<h2>Maps Wizard</h2>
<div class="sub-content maps-wizard">
    <div class="sub-content-box">
        <form class="sub-content-form maps-wizard-form confirmation-required"
            name="maps-wizard-form"
            id="maps-wizard-form"
            action="{{&actionPath}}"
            method="post"
            enctype="multipart/form-data">
            <input type="hidden" name="mainAction" id="mainAction" value="import"/>
            <input type="hidden" name="generatedMapsHandler" id="generatedMapsHandler" value="{{&generatedMapsHandler}}"/>
            <input type="hidden" name="importAssociationsForChangePoints" id="importAssociationsForChangePoints" value="{{&importAssociationsForChangePoints}}">
            <input type="hidden" name="importAssociationsRecursively" id="importAssociationsRecursively" value="{{&importAssociationsRecursively}}">
            <input type="hidden" name="automaticallyExtrudeMaps" id="automaticallyExtrudeMaps" value="{{&automaticallyExtrudeMaps}}">
            <input type="hidden" name="verifyTilesetImage" id="verifyTilesetImage" value="{{&verifyTilesetImage}}">
            <div class="main-action-container maps-selection">
                <p>Select the maps to be imported (if you refresh the page you will get a new set of random maps generated):</p>
                <ul class="wizard-options-container">
                {{#maps}}
                    <li class="wizard-map-option-container">
                        <div class="selector-box">
                            <input class="map-wizard-option" type="checkbox" name="selectedMaps[]" id="maps-wizard-map-option-{{&key}}" value="{{&key}}"/>
                            <input type="hidden" name="map-title-{{&key}}" id="map-title-{{&key}}" value="{{&key}}"/>
                            <label class="main-option" for="maps-wizard-map-option-{{&key}}">
                                {{&key}}
                            </label>
                        </div>
                        <canvas
                            class="mapCanvas"
                            width="{{&mapWidth}}"
                            height="{{&mapHeight}}"
                            data-tile-width="{{&tileWidth}}"
                            data-tile-height="{{&tileHeight}}"
                            data-image-key="{{&mapImage}}"
                            data-map-json="{{&mapJson}}">
                        </canvas>
                        <div class="sub-maps">
                            <p>Associated maps generated (this will be automatically imported)</p>
                            <img class="icon-sm clickable" data-expand-collapse=".sub-maps-container-{{&key}}" src="/assets/admin/filters.png" alt="Show or hide associated maps"/>
                            <div class="sub-maps-container sub-maps-container-{{&key}} hidden">
                                {{#subMaps}}
                                    <p>{{&key}}</p>
                                    <canvas
                                        class="mapCanvas"
                                        width="{{&mapWidth}}"
                                        height="{{&mapHeight}}"
                                        data-tile-width="{{&tileWidth}}"
                                        data-tile-height="{{&tileHeight}}"
                                        data-image-key="{{&mapImage}}"
                                        data-map-json="{{&mapJson}}">
                                    </canvas>
                                {{/subMaps}}
                            </div>
                        </div>
                    </li>
                {{/maps}}
                </ul>
            </div>
            <p>NOTE: the Game Server requires a reboot in order to make the maps available on the game.</p>
            <input type="submit" class="button button-primary button-maps-wizard" value="Import Selected Maps"/>
        </form>
    </div>
</div>
