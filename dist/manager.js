parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"XSQS":[function(require,module,exports) {
module.exports=function(r){try{return!!r()}catch(t){return!0}};
},{}],"E9nF":[function(require,module,exports) {
var r={}.toString;module.exports=function(t){return r.call(t).slice(8,-1)};
},{}],"oOJo":[function(require,module,exports) {
var r=require("../internals/fails"),e=require("../internals/classof-raw"),t="".split;module.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(r){return"String"==e(r)?t.call(r,""):Object(r)}:Object;
},{"../internals/fails":"XSQS","../internals/classof-raw":"E9nF"}],"NaQW":[function(require,module,exports) {
module.exports=function(o){if(null==o)throw TypeError("Can't call method on "+o);return o};
},{}],"mYlZ":[function(require,module,exports) {
var e=require("../internals/indexed-object"),r=require("../internals/require-object-coercible");module.exports=function(i){return e(r(i))};
},{"../internals/indexed-object":"oOJo","../internals/require-object-coercible":"NaQW"}],"UGzv":[function(require,module,exports) {
module.exports=function(){};
},{}],"COdq":[function(require,module,exports) {
module.exports={};
},{}],"akRO":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],o=function(t){return t&&t.Math==Math&&t};module.exports=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof t&&t)||Function("return this")();
},{}],"E7QI":[function(require,module,exports) {
var e=require("../internals/fails");module.exports=!e(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]});
},{"../internals/fails":"XSQS"}],"LaSR":[function(require,module,exports) {
module.exports=function(o){return"object"==typeof o?null!==o:"function"==typeof o};
},{}],"lEBO":[function(require,module,exports) {

var e=require("../internals/global"),r=require("../internals/is-object"),t=e.document,n=r(t)&&r(t.createElement);module.exports=function(e){return n?t.createElement(e):{}};
},{"../internals/global":"akRO","../internals/is-object":"LaSR"}],"nrb9":[function(require,module,exports) {
var e=require("../internals/descriptors"),r=require("../internals/fails"),n=require("../internals/document-create-element");module.exports=!e&&!r(function(){return 7!=Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a});
},{"../internals/descriptors":"E7QI","../internals/fails":"XSQS","../internals/document-create-element":"lEBO"}],"cavF":[function(require,module,exports) {
var r=require("../internals/is-object");module.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e};
},{"../internals/is-object":"LaSR"}],"A76B":[function(require,module,exports) {
var t=require("../internals/is-object");module.exports=function(r,e){if(!t(r))return r;var n,o;if(e&&"function"==typeof(n=r.toString)&&!t(o=n.call(r)))return o;if("function"==typeof(n=r.valueOf)&&!t(o=n.call(r)))return o;if(!e&&"function"==typeof(n=r.toString)&&!t(o=n.call(r)))return o;throw TypeError("Can't convert object to primitive value")};
},{"../internals/is-object":"LaSR"}],"SG2K":[function(require,module,exports) {
var e=require("../internals/descriptors"),r=require("../internals/ie8-dom-define"),i=require("../internals/an-object"),t=require("../internals/to-primitive"),n=Object.defineProperty;exports.f=e?n:function(e,o,s){if(i(e),o=t(o,!0),i(s),r)try{return n(e,o,s)}catch(u){}if("get"in s||"set"in s)throw TypeError("Accessors not supported");return"value"in s&&(e[o]=s.value),e};
},{"../internals/descriptors":"E7QI","../internals/ie8-dom-define":"nrb9","../internals/an-object":"cavF","../internals/to-primitive":"A76B"}],"UzCR":[function(require,module,exports) {
module.exports=function(e,r){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:r}};
},{}],"JagM":[function(require,module,exports) {
var r=require("../internals/descriptors"),e=require("../internals/object-define-property"),t=require("../internals/create-property-descriptor");module.exports=r?function(r,n,i){return e.f(r,n,t(1,i))}:function(r,e,t){return r[e]=t,r};
},{"../internals/descriptors":"E7QI","../internals/object-define-property":"SG2K","../internals/create-property-descriptor":"UzCR"}],"MN7X":[function(require,module,exports) {

var e=require("../internals/global"),r=require("../internals/create-non-enumerable-property");module.exports=function(n,t){try{r(e,n,t)}catch(a){e[n]=t}return t};
},{"../internals/global":"akRO","../internals/create-non-enumerable-property":"JagM"}],"Wyes":[function(require,module,exports) {

var e=require("../internals/global"),r=require("../internals/set-global"),l="__core-js_shared__",a=e[l]||r(l,{});module.exports=a;
},{"../internals/global":"akRO","../internals/set-global":"MN7X"}],"cBIU":[function(require,module,exports) {
var e=require("../internals/shared-store"),n=Function.toString;"function"!=typeof e.inspectSource&&(e.inspectSource=function(e){return n.call(e)}),module.exports=e.inspectSource;
},{"../internals/shared-store":"Wyes"}],"Chlf":[function(require,module,exports) {

var e=require("../internals/global"),r=require("../internals/inspect-source"),t=e.WeakMap;module.exports="function"==typeof t&&/native code/.test(r(t));
},{"../internals/global":"akRO","../internals/inspect-source":"cBIU"}],"LNKr":[function(require,module,exports) {
var r={}.hasOwnProperty;module.exports=function(e,n){return r.call(e,n)};
},{}],"C4xf":[function(require,module,exports) {
module.exports=!0;
},{}],"Igya":[function(require,module,exports) {
var r=require("../internals/is-pure"),e=require("../internals/shared-store");(module.exports=function(r,i){return e[r]||(e[r]=void 0!==i?i:{})})("versions",[]).push({version:"3.6.4",mode:r?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"});
},{"../internals/is-pure":"C4xf","../internals/shared-store":"Wyes"}],"MF5U":[function(require,module,exports) {
var o=0,r=Math.random();module.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++o+r).toString(36)};
},{}],"kMyV":[function(require,module,exports) {
var e=require("../internals/shared"),r=require("../internals/uid"),n=e("keys");module.exports=function(e){return n[e]||(n[e]=r(e))};
},{"../internals/shared":"Igya","../internals/uid":"MF5U"}],"XUjS":[function(require,module,exports) {

var e,r,n,t=require("../internals/native-weak-map"),i=require("../internals/global"),a=require("../internals/is-object"),u=require("../internals/create-non-enumerable-property"),o=require("../internals/has"),l=require("../internals/shared-key"),s=require("../internals/hidden-keys"),c=i.WeakMap,f=function(t){return n(t)?r(t):e(t,{})},p=function(e){return function(n){var t;if(!a(n)||(t=r(n)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return t}};if(t){var q=new c,h=q.get,v=q.has,d=q.set;e=function(e,r){return d.call(q,e,r),r},r=function(e){return h.call(q,e)||{}},n=function(e){return v.call(q,e)}}else{var y=l("state");s[y]=!0,e=function(e,r){return u(e,y,r),r},r=function(e){return o(e,y)?e[y]:{}},n=function(e){return o(e,y)}}module.exports={set:e,get:r,has:n,enforce:f,getterFor:p};
},{"../internals/native-weak-map":"Chlf","../internals/global":"akRO","../internals/is-object":"LaSR","../internals/create-non-enumerable-property":"JagM","../internals/has":"LNKr","../internals/shared-key":"kMyV","../internals/hidden-keys":"COdq"}],"fMoZ":[function(require,module,exports) {
"use strict";var r={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,t=e&&!r.call({1:2},1);exports.f=t?function(r){var t=e(this,r);return!!t&&t.enumerable}:r;
},{}],"i4Qf":[function(require,module,exports) {
var e=require("../internals/descriptors"),r=require("../internals/object-property-is-enumerable"),i=require("../internals/create-property-descriptor"),t=require("../internals/to-indexed-object"),n=require("../internals/to-primitive"),s=require("../internals/has"),a=require("../internals/ie8-dom-define"),o=Object.getOwnPropertyDescriptor;exports.f=e?o:function(e,c){if(e=t(e),c=n(c,!0),a)try{return o(e,c)}catch(u){}if(s(e,c))return i(!r.f.call(e,c),e[c])};
},{"../internals/descriptors":"E7QI","../internals/object-property-is-enumerable":"fMoZ","../internals/create-property-descriptor":"UzCR","../internals/to-indexed-object":"mYlZ","../internals/to-primitive":"A76B","../internals/has":"LNKr","../internals/ie8-dom-define":"nrb9"}],"YxSe":[function(require,module,exports) {
var r=require("../internals/fails"),e=/#|\.prototype\./,t=function(e,t){var u=o[n(e)];return u==i||u!=a&&("function"==typeof t?r(t):!!t)},n=t.normalize=function(r){return String(r).replace(e,".").toLowerCase()},o=t.data={},a=t.NATIVE="N",i=t.POLYFILL="P";module.exports=t;
},{"../internals/fails":"XSQS"}],"CKzo":[function(require,module,exports) {
module.exports=function(n){if("function"!=typeof n)throw TypeError(String(n)+" is not a function");return n};
},{}],"W5zC":[function(require,module,exports) {
var n=require("../internals/a-function");module.exports=function(r,t,e){if(n(r),void 0===t)return r;switch(e){case 0:return function(){return r.call(t)};case 1:return function(n){return r.call(t,n)};case 2:return function(n,e){return r.call(t,n,e)};case 3:return function(n,e,u){return r.call(t,n,e,u)}}return function(){return r.apply(t,arguments)}};
},{"../internals/a-function":"CKzo"}],"qpO1":[function(require,module,exports) {

"use strict";var e=require("../internals/global"),r=require("../internals/object-get-own-property-descriptor").f,t=require("../internals/is-forced"),n=require("../internals/path"),o=require("../internals/function-bind-context"),a=require("../internals/create-non-enumerable-property"),i=require("../internals/has"),s=function(e){var r=function(r,t,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,t)}return new e(r,t,n)}return e.apply(this,arguments)};return r.prototype=e.prototype,r};module.exports=function(p,u){var c,l,f,y,h,q,w,b,d=p.target,g=p.global,m=p.stat,v=p.proto,x=g?e:m?e[d]:(e[d]||{}).prototype,j=g?n:n[d]||(n[d]={}),F=j.prototype;for(f in u)c=!t(g?f:d+(m?".":"#")+f,p.forced)&&x&&i(x,f),h=j[f],c&&(q=p.noTargetGet?(b=r(x,f))&&b.value:x[f]),y=c&&q?q:u[f],c&&typeof h==typeof y||(w=p.bind&&c?o(y,e):p.wrap&&c?s(y):v&&"function"==typeof y?o(Function.call,y):y,(p.sham||y&&y.sham||h&&h.sham)&&a(w,"sham",!0),j[f]=w,v&&(i(n,l=d+"Prototype")||a(n,l,{}),n[l][f]=y,p.real&&F&&!F[f]&&a(F,f,y)))};
},{"../internals/global":"akRO","../internals/object-get-own-property-descriptor":"i4Qf","../internals/is-forced":"YxSe","../internals/path":"COdq","../internals/function-bind-context":"W5zC","../internals/create-non-enumerable-property":"JagM","../internals/has":"LNKr"}],"S7GN":[function(require,module,exports) {
var e=require("../internals/require-object-coercible");module.exports=function(r){return Object(e(r))};
},{"../internals/require-object-coercible":"NaQW"}],"HpLk":[function(require,module,exports) {
var t=require("../internals/fails");module.exports=!t(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype});
},{"../internals/fails":"XSQS"}],"SOTG":[function(require,module,exports) {
var t=require("../internals/has"),e=require("../internals/to-object"),r=require("../internals/shared-key"),o=require("../internals/correct-prototype-getter"),n=r("IE_PROTO"),c=Object.prototype;module.exports=o?Object.getPrototypeOf:function(r){return r=e(r),t(r,n)?r[n]:"function"==typeof r.constructor&&r instanceof r.constructor?r.constructor.prototype:r instanceof Object?c:null};
},{"../internals/has":"LNKr","../internals/to-object":"S7GN","../internals/shared-key":"kMyV","../internals/correct-prototype-getter":"HpLk"}],"hc8Y":[function(require,module,exports) {
var r=require("../internals/fails");module.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())});
},{"../internals/fails":"XSQS"}],"R9m5":[function(require,module,exports) {
var e=require("../internals/native-symbol");module.exports=e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator;
},{"../internals/native-symbol":"hc8Y"}],"Vjr7":[function(require,module,exports) {

var e=require("../internals/global"),r=require("../internals/shared"),i=require("../internals/has"),n=require("../internals/uid"),s=require("../internals/native-symbol"),t=require("../internals/use-symbol-as-uid"),l=r("wks"),u=e.Symbol,a=t?u:u&&u.withoutSetter||n;module.exports=function(e){return i(l,e)||(s&&i(u,e)?l[e]=u[e]:l[e]=a("Symbol."+e)),l[e]};
},{"../internals/global":"akRO","../internals/shared":"Igya","../internals/has":"LNKr","../internals/uid":"MF5U","../internals/native-symbol":"hc8Y","../internals/use-symbol-as-uid":"R9m5"}],"igBF":[function(require,module,exports) {
"use strict";var e,r,t,n=require("../internals/object-get-prototype-of"),o=require("../internals/create-non-enumerable-property"),i=require("../internals/has"),s=require("../internals/well-known-symbol"),l=require("../internals/is-pure"),u=s("iterator"),a=!1,p=function(){return this};[].keys&&("next"in(t=[].keys())?(r=n(n(t)))!==Object.prototype&&(e=r):a=!0),null==e&&(e={}),l||i(e,u)||o(e,u,p),module.exports={IteratorPrototype:e,BUGGY_SAFARI_ITERATORS:a};
},{"../internals/object-get-prototype-of":"SOTG","../internals/create-non-enumerable-property":"JagM","../internals/has":"LNKr","../internals/well-known-symbol":"Vjr7","../internals/is-pure":"C4xf"}],"nLes":[function(require,module,exports) {
var o=Math.ceil,r=Math.floor;module.exports=function(t){return isNaN(t=+t)?0:(t>0?r:o)(t)};
},{}],"RyUb":[function(require,module,exports) {
var e=require("../internals/to-integer"),r=Math.min;module.exports=function(n){return n>0?r(e(n),9007199254740991):0};
},{"../internals/to-integer":"nLes"}],"byU9":[function(require,module,exports) {
var r=require("../internals/to-integer"),e=Math.max,t=Math.min;module.exports=function(n,a){var i=r(n);return i<0?e(i+a,0):t(i,a)};
},{"../internals/to-integer":"nLes"}],"lYMG":[function(require,module,exports) {
var e=require("../internals/to-indexed-object"),r=require("../internals/to-length"),n=require("../internals/to-absolute-index"),t=function(t){return function(i,u,o){var l,f=e(i),s=r(f.length),a=n(o,s);if(t&&u!=u){for(;s>a;)if((l=f[a++])!=l)return!0}else for(;s>a;a++)if((t||a in f)&&f[a]===u)return t||a||0;return!t&&-1}};module.exports={includes:t(!0),indexOf:t(!1)};
},{"../internals/to-indexed-object":"mYlZ","../internals/to-length":"RyUb","../internals/to-absolute-index":"byU9"}],"KuCz":[function(require,module,exports) {
var e=require("../internals/has"),r=require("../internals/to-indexed-object"),n=require("../internals/array-includes").indexOf,i=require("../internals/hidden-keys");module.exports=function(s,t){var u,a=r(s),d=0,l=[];for(u in a)!e(i,u)&&e(a,u)&&l.push(u);for(;t.length>d;)e(a,u=t[d++])&&(~n(l,u)||l.push(u));return l};
},{"../internals/has":"LNKr","../internals/to-indexed-object":"mYlZ","../internals/array-includes":"lYMG","../internals/hidden-keys":"COdq"}],"clCT":[function(require,module,exports) {
module.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];
},{}],"krzE":[function(require,module,exports) {
var e=require("../internals/object-keys-internal"),r=require("../internals/enum-bug-keys");module.exports=Object.keys||function(n){return e(n,r)};
},{"../internals/object-keys-internal":"KuCz","../internals/enum-bug-keys":"clCT"}],"F60h":[function(require,module,exports) {
var e=require("../internals/descriptors"),r=require("../internals/object-define-property"),n=require("../internals/an-object"),t=require("../internals/object-keys");module.exports=e?Object.defineProperties:function(e,i){n(e);for(var o,s=t(i),a=s.length,u=0;a>u;)r.f(e,o=s[u++],i[o]);return e};
},{"../internals/descriptors":"E7QI","../internals/object-define-property":"SG2K","../internals/an-object":"cavF","../internals/object-keys":"krzE"}],"nXUJ":[function(require,module,exports) {

var n=require("../internals/path"),e=require("../internals/global"),r=function(n){return"function"==typeof n?n:void 0};module.exports=function(t,i){return arguments.length<2?r(n[t])||r(e[t]):n[t]&&n[t][i]||e[t]&&e[t][i]};
},{"../internals/path":"COdq","../internals/global":"akRO"}],"r4Gg":[function(require,module,exports) {
var e=require("../internals/get-built-in");module.exports=e("document","documentElement");
},{"../internals/get-built-in":"nXUJ"}],"rYkB":[function(require,module,exports) {
var e,n=require("../internals/an-object"),r=require("../internals/object-define-properties"),t=require("../internals/enum-bug-keys"),i=require("../internals/hidden-keys"),u=require("../internals/html"),o=require("../internals/document-create-element"),c=require("../internals/shared-key"),l=">",a="<",s="prototype",d="script",m=c("IE_PROTO"),p=function(){},f=function(e){return a+d+l+e+a+"/"+d+l},v=function(e){e.write(f("")),e.close();var n=e.parentWindow.Object;return e=null,n},b=function(){var e,n=o("iframe"),r="java"+d+":";return n.style.display="none",u.appendChild(n),n.src=String(r),(e=n.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F},h=function(){try{e=document.domain&&new ActiveXObject("htmlfile")}catch(r){}h=e?v(e):b();for(var n=t.length;n--;)delete h[s][t[n]];return h()};i[m]=!0,module.exports=Object.create||function(e,t){var i;return null!==e?(p[s]=n(e),i=new p,p[s]=null,i[m]=e):i=h(),void 0===t?i:r(i,t)};
},{"../internals/an-object":"cavF","../internals/object-define-properties":"F60h","../internals/enum-bug-keys":"clCT","../internals/hidden-keys":"COdq","../internals/html":"r4Gg","../internals/document-create-element":"lEBO","../internals/shared-key":"kMyV"}],"LORB":[function(require,module,exports) {
var e=require("../internals/well-known-symbol"),r=e("toStringTag"),n={};n[r]="z",module.exports="[object z]"===String(n);
},{"../internals/well-known-symbol":"Vjr7"}],"PKLy":[function(require,module,exports) {
var n=require("../internals/to-string-tag-support"),r=require("../internals/classof-raw"),t=require("../internals/well-known-symbol"),e=t("toStringTag"),u="Arguments"==r(function(){return arguments}()),i=function(n,r){try{return n[r]}catch(t){}};module.exports=n?r:function(n){var t,o,l;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(o=i(t=Object(n),e))?o:u?r(t):"Object"==(l=r(t))&&"function"==typeof t.callee?"Arguments":l};
},{"../internals/to-string-tag-support":"LORB","../internals/classof-raw":"E9nF","../internals/well-known-symbol":"Vjr7"}],"pXQ4":[function(require,module,exports) {
"use strict";var t=require("../internals/to-string-tag-support"),r=require("../internals/classof");module.exports=t?{}.toString:function(){return"[object "+r(this)+"]"};
},{"../internals/to-string-tag-support":"LORB","../internals/classof":"PKLy"}],"hgSk":[function(require,module,exports) {
var e=require("../internals/to-string-tag-support"),r=require("../internals/object-define-property").f,n=require("../internals/create-non-enumerable-property"),t=require("../internals/has"),i=require("../internals/object-to-string"),o=require("../internals/well-known-symbol"),a=o("toStringTag");module.exports=function(o,l,s,u){if(o){var p=s?o:o.prototype;t(p,a)||r(p,a,{configurable:!0,value:l}),u&&!e&&n(p,"toString",i)}};
},{"../internals/to-string-tag-support":"LORB","../internals/object-define-property":"SG2K","../internals/create-non-enumerable-property":"JagM","../internals/has":"LNKr","../internals/object-to-string":"pXQ4","../internals/well-known-symbol":"Vjr7"}],"z0iW":[function(require,module,exports) {
"use strict";var r=require("../internals/iterators-core").IteratorPrototype,e=require("../internals/object-create"),t=require("../internals/create-property-descriptor"),i=require("../internals/set-to-string-tag"),n=require("../internals/iterators"),o=function(){return this};module.exports=function(a,s,u){var c=s+" Iterator";return a.prototype=e(r,{next:t(1,u)}),i(a,c,!1,!0),n[c]=o,a};
},{"../internals/iterators-core":"igBF","../internals/object-create":"rYkB","../internals/create-property-descriptor":"UzCR","../internals/set-to-string-tag":"hgSk","../internals/iterators":"COdq"}],"YbgQ":[function(require,module,exports) {
var r=require("../internals/is-object");module.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t};
},{"../internals/is-object":"LaSR"}],"M5SR":[function(require,module,exports) {
var t=require("../internals/an-object"),r=require("../internals/a-possible-prototype");module.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,o=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),o=n instanceof Array}catch(c){}return function(n,c){return t(n),r(c),o?e.call(n,c):n.__proto__=c,n}}():void 0);
},{"../internals/an-object":"cavF","../internals/a-possible-prototype":"YbgQ"}],"WUv4":[function(require,module,exports) {
var e=require("../internals/create-non-enumerable-property");module.exports=function(r,n,a,o){o&&o.enumerable?r[n]=a:e(r,n,a)};
},{"../internals/create-non-enumerable-property":"JagM"}],"n6yK":[function(require,module,exports) {
"use strict";var e=require("../internals/export"),r=require("../internals/create-iterator-constructor"),t=require("../internals/object-get-prototype-of"),n=require("../internals/object-set-prototype-of"),i=require("../internals/set-to-string-tag"),o=require("../internals/create-non-enumerable-property"),s=require("../internals/redefine"),a=require("../internals/well-known-symbol"),u=require("../internals/is-pure"),c=require("../internals/iterators"),l=require("../internals/iterators-core"),f=l.IteratorPrototype,p=l.BUGGY_SAFARI_ITERATORS,q=a("iterator"),y="keys",w="values",b="entries",h=function(){return this};module.exports=function(a,l,g,m,v,A,I){r(g,l,m);var d,j,k,x=function(e){if(e===v&&T)return T;if(!p&&e in O)return O[e];switch(e){case y:case w:case b:return function(){return new g(this,e)}}return function(){return new g(this)}},R=l+" Iterator",G=!1,O=a.prototype,S=O[q]||O["@@iterator"]||v&&O[v],T=!p&&S||x(v),_="Array"==l&&O.entries||S;if(_&&(d=t(_.call(new a)),f!==Object.prototype&&d.next&&(u||t(d)===f||(n?n(d,f):"function"!=typeof d[q]&&o(d,q,h)),i(d,R,!0,!0),u&&(c[R]=h))),v==w&&S&&S.name!==w&&(G=!0,T=function(){return S.call(this)}),u&&!I||O[q]===T||o(O,q,T),c[l]=T,v)if(j={values:x(w),keys:A?T:x(y),entries:x(b)},I)for(k in j)!p&&!G&&k in O||s(O,k,j[k]);else e({target:l,proto:!0,forced:p||G},j);return j};
},{"../internals/export":"qpO1","../internals/create-iterator-constructor":"z0iW","../internals/object-get-prototype-of":"SOTG","../internals/object-set-prototype-of":"M5SR","../internals/set-to-string-tag":"hgSk","../internals/create-non-enumerable-property":"JagM","../internals/redefine":"WUv4","../internals/well-known-symbol":"Vjr7","../internals/is-pure":"C4xf","../internals/iterators":"COdq","../internals/iterators-core":"igBF"}],"ZQRi":[function(require,module,exports) {
"use strict";var e=require("../internals/to-indexed-object"),r=require("../internals/add-to-unscopables"),t=require("../internals/iterators"),n=require("../internals/internal-state"),a=require("../internals/define-iterator"),i="Array Iterator",s=n.set,u=n.getterFor(i);module.exports=a(Array,"Array",function(r,t){s(this,{type:i,target:e(r),index:0,kind:t})},function(){var e=u(this),r=e.target,t=e.kind,n=e.index++;return!r||n>=r.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==t?{value:n,done:!1}:"values"==t?{value:r[n],done:!1}:{value:[n,r[n]],done:!1}},"values"),t.Arguments=t.Array,r("keys"),r("values"),r("entries");
},{"../internals/to-indexed-object":"mYlZ","../internals/add-to-unscopables":"UGzv","../internals/iterators":"COdq","../internals/internal-state":"XUjS","../internals/define-iterator":"n6yK"}],"zwxw":[function(require,module,exports) {
module.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};
},{}],"GgAf":[function(require,module,exports) {

require("./es.array.iterator");var r=require("../internals/dom-iterables"),e=require("../internals/global"),a=require("../internals/classof"),n=require("../internals/create-non-enumerable-property"),i=require("../internals/iterators"),t=require("../internals/well-known-symbol"),l=t("toStringTag");for(var o in r){var s=e[o],u=s&&s.prototype;u&&a(u)!==l&&n(u,l,o),i[o]=i.Array}
},{"./es.array.iterator":"ZQRi","../internals/dom-iterables":"zwxw","../internals/global":"akRO","../internals/classof":"PKLy","../internals/create-non-enumerable-property":"JagM","../internals/iterators":"COdq","../internals/well-known-symbol":"Vjr7"}],"Tk1E":[function(require,module,exports) {
var e=require("../internals/to-integer"),r=require("../internals/require-object-coercible"),t=function(t){return function(n,i){var c,o,a=String(r(n)),u=e(i),l=a.length;return u<0||u>=l?t?"":void 0:(c=a.charCodeAt(u))<55296||c>56319||u+1===l||(o=a.charCodeAt(u+1))<56320||o>57343?t?a.charAt(u):c:t?a.slice(u,u+2):o-56320+(c-55296<<10)+65536}};module.exports={codeAt:t(!1),charAt:t(!0)};
},{"../internals/to-integer":"nLes","../internals/require-object-coercible":"NaQW"}],"flzy":[function(require,module,exports) {
"use strict";var t=require("../internals/string-multibyte").charAt,e=require("../internals/internal-state"),r=require("../internals/define-iterator"),n="String Iterator",i=e.set,a=e.getterFor(n);r(String,"String",function(t){i(this,{type:n,string:String(t),index:0})},function(){var e,r=a(this),n=r.string,i=r.index;return i>=n.length?{value:void 0,done:!0}:(e=t(n,i),r.index+=e.length,{value:e,done:!1})});
},{"../internals/string-multibyte":"Tk1E","../internals/internal-state":"XUjS","../internals/define-iterator":"n6yK"}],"yYfB":[function(require,module,exports) {
var r=require("../internals/classof"),e=require("../internals/iterators"),n=require("../internals/well-known-symbol"),t=n("iterator");module.exports=function(n){if(null!=n)return n[t]||n["@@iterator"]||e[r(n)]};
},{"../internals/classof":"PKLy","../internals/iterators":"COdq","../internals/well-known-symbol":"Vjr7"}],"EUJP":[function(require,module,exports) {
var r=require("../internals/an-object"),e=require("../internals/get-iterator-method");module.exports=function(t){var n=e(t);if("function"!=typeof n)throw TypeError(String(t)+" is not iterable");return r(n.call(t))};
},{"../internals/an-object":"cavF","../internals/get-iterator-method":"yYfB"}],"PDm9":[function(require,module,exports) {
require("../modules/web.dom-collections.iterator"),require("../modules/es.string.iterator");var e=require("../internals/get-iterator");module.exports=e;
},{"../modules/web.dom-collections.iterator":"GgAf","../modules/es.string.iterator":"flzy","../internals/get-iterator":"EUJP"}],"dtXd":[function(require,module,exports) {
module.exports=require("core-js-pure/features/get-iterator");
},{"core-js-pure/features/get-iterator":"PDm9"}],"ZiSi":[function(require,module,exports) {
var e=require("../internals/export"),r=require("../internals/to-object"),t=require("../internals/object-keys"),n=require("../internals/fails"),i=n(function(){t(1)});e({target:"Object",stat:!0,forced:i},{keys:function(e){return t(r(e))}});
},{"../internals/export":"qpO1","../internals/to-object":"S7GN","../internals/object-keys":"krzE","../internals/fails":"XSQS"}],"KRTx":[function(require,module,exports) {
require("../../modules/es.object.keys");var e=require("../../internals/path");module.exports=e.Object.keys;
},{"../../modules/es.object.keys":"ZiSi","../../internals/path":"COdq"}],"Q5Ku":[function(require,module,exports) {
var e=require("../../es/object/keys");module.exports=e;
},{"../../es/object/keys":"KRTx"}],"Jibu":[function(require,module,exports) {
module.exports=require("core-js-pure/stable/object/keys");
},{"core-js-pure/stable/object/keys":"Q5Ku"}],"AMXO":[function(require,module,exports) {
exports.f=Object.getOwnPropertySymbols;
},{}],"ayD1":[function(require,module,exports) {
"use strict";var e=require("../internals/descriptors"),r=require("../internals/fails"),n=require("../internals/object-keys"),t=require("../internals/object-get-own-property-symbols"),i=require("../internals/object-property-is-enumerable"),o=require("../internals/to-object"),a=require("../internals/indexed-object"),s=Object.assign,l=Object.defineProperty;module.exports=!s||r(function(){if(e&&1!==s({b:1},s(l({},"a",{enumerable:!0,get:function(){l(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var r={},t={},i=Symbol();return r[i]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!=s({},r)[i]||"abcdefghijklmnopqrst"!=n(s({},t)).join("")})?function(r,s){for(var l=o(r),u=arguments.length,c=1,b=t.f,f=i.f;u>c;)for(var j,p=a(arguments[c++]),q=b?n(p).concat(b(p)):n(p),m=q.length,d=0;m>d;)j=q[d++],e&&!f.call(p,j)||(l[j]=p[j]);return l}:s;
},{"../internals/descriptors":"E7QI","../internals/fails":"XSQS","../internals/object-keys":"krzE","../internals/object-get-own-property-symbols":"AMXO","../internals/object-property-is-enumerable":"fMoZ","../internals/to-object":"S7GN","../internals/indexed-object":"oOJo"}],"Zyps":[function(require,module,exports) {
var e=require("../internals/export"),r=require("../internals/object-assign");e({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r});
},{"../internals/export":"qpO1","../internals/object-assign":"ayD1"}],"vmNQ":[function(require,module,exports) {
require("../../modules/es.object.assign");var e=require("../../internals/path");module.exports=e.Object.assign;
},{"../../modules/es.object.assign":"Zyps","../../internals/path":"COdq"}],"Httc":[function(require,module,exports) {
var e=require("../../es/object/assign");module.exports=e;
},{"../../es/object/assign":"vmNQ"}],"t1mS":[function(require,module,exports) {
module.exports=require("core-js-pure/stable/object/assign");
},{"core-js-pure/stable/object/assign":"Httc"}],"jNKU":[function(require,module,exports) {
var t=function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,r,e,n){var o=r&&r.prototype instanceof v?r:v,i=Object.create(o.prototype),a=new k(n||[]);return i._invoke=function(t,r,e){var n=f;return function(o,i){if(n===l)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return N()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=_(a,e);if(c){if(c===y)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===f)throw n=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=l;var u=h(t,r,e);if("normal"===u.type){if(n=e.done?p:s,u.arg===y)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=p,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=u;var f="suspendedStart",s="suspendedYield",l="executing",p="completed",y={};function v(){}function d(){}function g(){}var m={};m[i]=function(){return this};var w=Object.getPrototypeOf,L=w&&w(w(G([])));L&&L!==e&&n.call(L,i)&&(m=L);var x=g.prototype=v.prototype=Object.create(m);function E(t){["next","throw","return"].forEach(function(r){t[r]=function(t){return this._invoke(r,t)}})}function b(t,r){var e;this._invoke=function(o,i){function a(){return new r(function(e,a){!function e(o,i,a,c){var u=h(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==typeof s&&n.call(s,"__await")?r.resolve(s.__await).then(function(t){e("next",t,a,c)},function(t){e("throw",t,a,c)}):r.resolve(s).then(function(t){f.value=t,a(f)},function(t){return e("throw",t,a,c)})}c(u.arg)}(o,i,e,a)})}return e=e?e.then(a,a):a()}}function _(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,_(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function j(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function G(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:N}}function N(){return{value:r,done:!0}}return d.prototype=x.constructor=g,g.constructor=d,g[c]=d.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===d||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},E(b.prototype),b.prototype[a]=function(){return this},t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(x),x[c]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=G,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),y},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),y}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:G(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),y}},t}("object"==typeof module?module.exports:{});try{regeneratorRuntime=t}catch(r){Function("r","regeneratorRuntime = r")(t)}
},{}],"BXeW":[function(require,module,exports) {
module.exports=require("regenerator-runtime");
},{"regenerator-runtime":"jNKU"}],"ZEWA":[function(require,module,exports) {
function n(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}module.exports=n;
},{}],"x324":[function(require,module,exports) {
var e=require("../internals/export"),r=require("../internals/descriptors"),t=require("../internals/object-define-property");e({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperty:t.f});
},{"../internals/export":"qpO1","../internals/descriptors":"E7QI","../internals/object-define-property":"SG2K"}],"MUfR":[function(require,module,exports) {
require("../../modules/es.object.define-property");var e=require("../../internals/path"),r=e.Object,t=module.exports=function(e,t,n){return r.defineProperty(e,t,n)};r.defineProperty.sham&&(t.sham=!0);
},{"../../modules/es.object.define-property":"x324","../../internals/path":"COdq"}],"f0MV":[function(require,module,exports) {
var e=require("../../es/object/define-property");module.exports=e;
},{"../../es/object/define-property":"MUfR"}],"K2i8":[function(require,module,exports) {
module.exports=require("core-js-pure/features/object/define-property");
},{"core-js-pure/features/object/define-property":"f0MV"}],"bMeU":[function(require,module,exports) {
var e=require("../core-js/object/define-property");function r(r,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),e(r,t.key,t)}}function n(e,n,o){return n&&r(e.prototype,n),o&&r(e,o),e}module.exports=n;
},{"../core-js/object/define-property":"K2i8"}],"qzGh":[function(require,module,exports) {
var e=require("../internals/well-known-symbol");exports.f=e;
},{"../internals/well-known-symbol":"Vjr7"}],"DnLs":[function(require,module,exports) {
var e=require("../internals/path"),r=require("../internals/has"),n=require("../internals/well-known-symbol-wrapped"),l=require("../internals/object-define-property").f;module.exports=function(a){var i=e.Symbol||(e.Symbol={});r(i,a)||l(i,a,{value:n.f(a)})};
},{"../internals/path":"COdq","../internals/has":"LNKr","../internals/well-known-symbol-wrapped":"qzGh","../internals/object-define-property":"SG2K"}],"gIOj":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("iterator");
},{"../internals/define-well-known-symbol":"DnLs"}],"t845":[function(require,module,exports) {
require("../../modules/es.symbol.iterator"),require("../../modules/es.string.iterator"),require("../../modules/web.dom-collections.iterator");var e=require("../../internals/well-known-symbol-wrapped");module.exports=e.f("iterator");
},{"../../modules/es.symbol.iterator":"gIOj","../../modules/es.string.iterator":"flzy","../../modules/web.dom-collections.iterator":"GgAf","../../internals/well-known-symbol-wrapped":"qzGh"}],"DUCf":[function(require,module,exports) {
var e=require("../../es/symbol/iterator");module.exports=e;
},{"../../es/symbol/iterator":"t845"}],"LYHE":[function(require,module,exports) {
module.exports=require("core-js-pure/features/symbol/iterator");
},{"core-js-pure/features/symbol/iterator":"DUCf"}],"FdCD":[function(require,module,exports) {
var r=require("../internals/classof-raw");module.exports=Array.isArray||function(a){return"Array"==r(a)};
},{"../internals/classof-raw":"E9nF"}],"GlCA":[function(require,module,exports) {
"use strict";var e=require("../internals/to-primitive"),r=require("../internals/object-define-property"),i=require("../internals/create-property-descriptor");module.exports=function(t,n,o){var p=e(n);p in t?r.f(t,p,i(0,o)):t[p]=o};
},{"../internals/to-primitive":"A76B","../internals/object-define-property":"SG2K","../internals/create-property-descriptor":"UzCR"}],"U9oi":[function(require,module,exports) {
var r=require("../internals/is-object"),e=require("../internals/is-array"),n=require("../internals/well-known-symbol"),o=n("species");module.exports=function(n,i){var t;return e(n)&&("function"!=typeof(t=n.constructor)||t!==Array&&!e(t.prototype)?r(t)&&null===(t=t[o])&&(t=void 0):t=void 0),new(void 0===t?Array:t)(0===i?0:i)};
},{"../internals/is-object":"LaSR","../internals/is-array":"FdCD","../internals/well-known-symbol":"Vjr7"}],"IVyy":[function(require,module,exports) {
var e=require("../internals/get-built-in");module.exports=e("navigator","userAgent")||"";
},{"../internals/get-built-in":"nXUJ"}],"IFms":[function(require,module,exports) {


var e,r,s=require("../internals/global"),n=require("../internals/engine-user-agent"),a=s.process,i=a&&a.versions,t=i&&i.v8;t?r=(e=t.split("."))[0]+e[1]:n&&(!(e=n.match(/Edge\/(\d+)/))||e[1]>=74)&&(e=n.match(/Chrome\/(\d+)/))&&(r=e[1]),module.exports=r&&+r;
},{"../internals/global":"akRO","../internals/engine-user-agent":"IVyy"}],"fN92":[function(require,module,exports) {
var n=require("../internals/fails"),e=require("../internals/well-known-symbol"),r=require("../internals/engine-v8-version"),o=e("species");module.exports=function(e){return r>=51||!n(function(){var n=[];return(n.constructor={})[o]=function(){return{foo:1}},1!==n[e](Boolean).foo})};
},{"../internals/fails":"XSQS","../internals/well-known-symbol":"Vjr7","../internals/engine-v8-version":"IFms"}],"DkW2":[function(require,module,exports) {
"use strict";var r=require("../internals/export"),e=require("../internals/fails"),n=require("../internals/is-array"),t=require("../internals/is-object"),i=require("../internals/to-object"),a=require("../internals/to-length"),o=require("../internals/create-property"),s=require("../internals/array-species-create"),l=require("../internals/array-method-has-species-support"),u=require("../internals/well-known-symbol"),c=require("../internals/engine-v8-version"),f=u("isConcatSpreadable"),p=9007199254740991,q="Maximum allowed index exceeded",h=c>=51||!e(function(){var r=[];return r[f]=!1,r.concat()[0]!==r}),d=l("concat"),y=function(r){if(!t(r))return!1;var e=r[f];return void 0!==e?!!e:n(r)},v=!h||!d;r({target:"Array",proto:!0,forced:v},{concat:function(r){var e,n,t,l,u,c=i(this),f=s(c,0),h=0;for(e=-1,t=arguments.length;e<t;e++)if(u=-1===e?c:arguments[e],y(u)){if(h+(l=a(u.length))>p)throw TypeError(q);for(n=0;n<l;n++,h++)n in u&&o(f,h,u[n])}else{if(h>=p)throw TypeError(q);o(f,h++,u)}return f.length=h,f}});
},{"../internals/export":"qpO1","../internals/fails":"XSQS","../internals/is-array":"FdCD","../internals/is-object":"LaSR","../internals/to-object":"S7GN","../internals/to-length":"RyUb","../internals/create-property":"GlCA","../internals/array-species-create":"U9oi","../internals/array-method-has-species-support":"fN92","../internals/well-known-symbol":"Vjr7","../internals/engine-v8-version":"IFms"}],"vBel":[function(require,module,exports) {

},{}],"Fz4k":[function(require,module,exports) {
var e=require("../internals/object-keys-internal"),r=require("../internals/enum-bug-keys"),t=r.concat("length","prototype");exports.f=Object.getOwnPropertyNames||function(r){return e(r,t)};
},{"../internals/object-keys-internal":"KuCz","../internals/enum-bug-keys":"clCT"}],"cAqr":[function(require,module,exports) {
var e=require("../internals/to-indexed-object"),t=require("../internals/object-get-own-property-names").f,r={}.toString,n="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(e){try{return t(e)}catch(r){return n.slice()}};module.exports.f=function(i){return n&&"[object Window]"==r.call(i)?o(i):t(e(i))};
},{"../internals/to-indexed-object":"mYlZ","../internals/object-get-own-property-names":"Fz4k"}],"DfAY":[function(require,module,exports) {
var e=require("../internals/function-bind-context"),r=require("../internals/indexed-object"),n=require("../internals/to-object"),i=require("../internals/to-length"),t=require("../internals/array-species-create"),a=[].push,s=function(s){var u=1==s,c=2==s,o=3==s,l=4==s,f=6==s,d=5==s||f;return function(h,q,v,p){for(var x,b,m=n(h),g=r(m),j=e(q,v,3),y=i(g.length),w=0,E=p||t,I=u?E(h,y):c?E(h,0):void 0;y>w;w++)if((d||w in g)&&(b=j(x=g[w],w,m),s))if(u)I[w]=b;else if(b)switch(s){case 3:return!0;case 5:return x;case 6:return w;case 2:a.call(I,x)}else if(l)return!1;return f?-1:o||l?l:I}};module.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6)};
},{"../internals/function-bind-context":"W5zC","../internals/indexed-object":"oOJo","../internals/to-object":"S7GN","../internals/to-length":"RyUb","../internals/array-species-create":"U9oi"}],"D0nb":[function(require,module,exports) {

"use strict";var e=require("../internals/export"),r=require("../internals/global"),t=require("../internals/get-built-in"),n=require("../internals/is-pure"),i=require("../internals/descriptors"),o=require("../internals/native-symbol"),s=require("../internals/use-symbol-as-uid"),a=require("../internals/fails"),u=require("../internals/has"),l=require("../internals/is-array"),c=require("../internals/is-object"),f=require("../internals/an-object"),p=require("../internals/to-object"),y=require("../internals/to-indexed-object"),b=require("../internals/to-primitive"),d=require("../internals/create-property-descriptor"),g=require("../internals/object-create"),q=require("../internals/object-keys"),h=require("../internals/object-get-own-property-names"),m=require("../internals/object-get-own-property-names-external"),v=require("../internals/object-get-own-property-symbols"),w=require("../internals/object-get-own-property-descriptor"),j=require("../internals/object-define-property"),O=require("../internals/object-property-is-enumerable"),S=require("../internals/create-non-enumerable-property"),k=require("../internals/redefine"),P=require("../internals/shared"),E=require("../internals/shared-key"),x=require("../internals/hidden-keys"),N=require("../internals/uid"),F=require("../internals/well-known-symbol"),J=require("../internals/well-known-symbol-wrapped"),T=require("../internals/define-well-known-symbol"),C=require("../internals/set-to-string-tag"),D=require("../internals/internal-state"),I=require("../internals/array-iteration").forEach,Q=E("hidden"),z="Symbol",A="prototype",B=F("toPrimitive"),G=D.set,H=D.getterFor(z),K=Object[A],L=r.Symbol,M=t("JSON","stringify"),R=w.f,U=j.f,V=m.f,W=O.f,X=P("symbols"),Y=P("op-symbols"),Z=P("string-to-symbol-registry"),$=P("symbol-to-string-registry"),_=P("wks"),ee=r.QObject,re=!ee||!ee[A]||!ee[A].findChild,te=i&&a(function(){return 7!=g(U({},"a",{get:function(){return U(this,"a",{value:7}).a}})).a})?function(e,r,t){var n=R(K,r);n&&delete K[r],U(e,r,t),n&&e!==K&&U(K,r,n)}:U,ne=function(e,r){var t=X[e]=g(L[A]);return G(t,{type:z,tag:e,description:r}),i||(t.description=r),t},ie=s?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof L},oe=function(e,r,t){e===K&&oe(Y,r,t),f(e);var n=b(r,!0);return f(t),u(X,n)?(t.enumerable?(u(e,Q)&&e[Q][n]&&(e[Q][n]=!1),t=g(t,{enumerable:d(0,!1)})):(u(e,Q)||U(e,Q,d(1,{})),e[Q][n]=!0),te(e,n,t)):U(e,n,t)},se=function(e,r){f(e);var t=y(r),n=q(t).concat(fe(t));return I(n,function(r){i&&!ue.call(t,r)||oe(e,r,t[r])}),e},ae=function(e,r){return void 0===r?g(e):se(g(e),r)},ue=function(e){var r=b(e,!0),t=W.call(this,r);return!(this===K&&u(X,r)&&!u(Y,r))&&(!(t||!u(this,r)||!u(X,r)||u(this,Q)&&this[Q][r])||t)},le=function(e,r){var t=y(e),n=b(r,!0);if(t!==K||!u(X,n)||u(Y,n)){var i=R(t,n);return!i||!u(X,n)||u(t,Q)&&t[Q][n]||(i.enumerable=!0),i}},ce=function(e){var r=V(y(e)),t=[];return I(r,function(e){u(X,e)||u(x,e)||t.push(e)}),t},fe=function(e){var r=e===K,t=V(r?Y:y(e)),n=[];return I(t,function(e){!u(X,e)||r&&!u(K,e)||n.push(X[e])}),n};if(o||(k((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,r=N(e),t=function(e){this===K&&t.call(Y,e),u(this,Q)&&u(this[Q],r)&&(this[Q][r]=!1),te(this,r,d(1,e))};return i&&re&&te(K,r,{configurable:!0,set:t}),ne(r,e)})[A],"toString",function(){return H(this).tag}),k(L,"withoutSetter",function(e){return ne(N(e),e)}),O.f=ue,j.f=oe,w.f=le,h.f=m.f=ce,v.f=fe,J.f=function(e){return ne(F(e),e)},i&&(U(L[A],"description",{configurable:!0,get:function(){return H(this).description}}),n||k(K,"propertyIsEnumerable",ue,{unsafe:!0}))),e({global:!0,wrap:!0,forced:!o,sham:!o},{Symbol:L}),I(q(_),function(e){T(e)}),e({target:z,stat:!0,forced:!o},{for:function(e){var r=String(e);if(u(Z,r))return Z[r];var t=L(r);return Z[r]=t,$[t]=r,t},keyFor:function(e){if(!ie(e))throw TypeError(e+" is not a symbol");if(u($,e))return $[e]},useSetter:function(){re=!0},useSimple:function(){re=!1}}),e({target:"Object",stat:!0,forced:!o,sham:!i},{create:ae,defineProperty:oe,defineProperties:se,getOwnPropertyDescriptor:le}),e({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:ce,getOwnPropertySymbols:fe}),e({target:"Object",stat:!0,forced:a(function(){v.f(1)})},{getOwnPropertySymbols:function(e){return v.f(p(e))}}),M){var pe=!o||a(function(){var e=L();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))});e({target:"JSON",stat:!0,forced:pe},{stringify:function(e,r,t){for(var n,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=r,(c(r)||void 0!==e)&&!ie(e))return l(r)||(r=function(e,r){if("function"==typeof n&&(r=n.call(this,e,r)),!ie(r))return r}),i[1]=r,M.apply(null,i)}})}L[A][B]||S(L[A],B,L[A].valueOf),C(L,z),x[Q]=!0;
},{"../internals/export":"qpO1","../internals/global":"akRO","../internals/get-built-in":"nXUJ","../internals/is-pure":"C4xf","../internals/descriptors":"E7QI","../internals/native-symbol":"hc8Y","../internals/use-symbol-as-uid":"R9m5","../internals/fails":"XSQS","../internals/has":"LNKr","../internals/is-array":"FdCD","../internals/is-object":"LaSR","../internals/an-object":"cavF","../internals/to-object":"S7GN","../internals/to-indexed-object":"mYlZ","../internals/to-primitive":"A76B","../internals/create-property-descriptor":"UzCR","../internals/object-create":"rYkB","../internals/object-keys":"krzE","../internals/object-get-own-property-names":"Fz4k","../internals/object-get-own-property-names-external":"cAqr","../internals/object-get-own-property-symbols":"AMXO","../internals/object-get-own-property-descriptor":"i4Qf","../internals/object-define-property":"SG2K","../internals/object-property-is-enumerable":"fMoZ","../internals/create-non-enumerable-property":"JagM","../internals/redefine":"WUv4","../internals/shared":"Igya","../internals/shared-key":"kMyV","../internals/hidden-keys":"COdq","../internals/uid":"MF5U","../internals/well-known-symbol":"Vjr7","../internals/well-known-symbol-wrapped":"qzGh","../internals/define-well-known-symbol":"DnLs","../internals/set-to-string-tag":"hgSk","../internals/internal-state":"XUjS","../internals/array-iteration":"DfAY"}],"qB7h":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("asyncIterator");
},{"../internals/define-well-known-symbol":"DnLs"}],"zzsi":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("hasInstance");
},{"../internals/define-well-known-symbol":"DnLs"}],"dwLz":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("isConcatSpreadable");
},{"../internals/define-well-known-symbol":"DnLs"}],"Ozfx":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("match");
},{"../internals/define-well-known-symbol":"DnLs"}],"Mszc":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("matchAll");
},{"../internals/define-well-known-symbol":"DnLs"}],"NSL9":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("replace");
},{"../internals/define-well-known-symbol":"DnLs"}],"sqN3":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("search");
},{"../internals/define-well-known-symbol":"DnLs"}],"ab7Q":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("species");
},{"../internals/define-well-known-symbol":"DnLs"}],"UBcC":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("split");
},{"../internals/define-well-known-symbol":"DnLs"}],"fukv":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("toPrimitive");
},{"../internals/define-well-known-symbol":"DnLs"}],"uagZ":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("toStringTag");
},{"../internals/define-well-known-symbol":"DnLs"}],"WcC1":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("unscopables");
},{"../internals/define-well-known-symbol":"DnLs"}],"yqPu":[function(require,module,exports) {
var t=require("../internals/set-to-string-tag");t(Math,"Math",!0);
},{"../internals/set-to-string-tag":"hgSk"}],"mW5I":[function(require,module,exports) {

var r=require("../internals/global"),e=require("../internals/set-to-string-tag");e(r.JSON,"JSON",!0);
},{"../internals/global":"akRO","../internals/set-to-string-tag":"hgSk"}],"x0Ov":[function(require,module,exports) {
require("../../modules/es.array.concat"),require("../../modules/es.object.to-string"),require("../../modules/es.symbol"),require("../../modules/es.symbol.async-iterator"),require("../../modules/es.symbol.description"),require("../../modules/es.symbol.has-instance"),require("../../modules/es.symbol.is-concat-spreadable"),require("../../modules/es.symbol.iterator"),require("../../modules/es.symbol.match"),require("../../modules/es.symbol.match-all"),require("../../modules/es.symbol.replace"),require("../../modules/es.symbol.search"),require("../../modules/es.symbol.species"),require("../../modules/es.symbol.split"),require("../../modules/es.symbol.to-primitive"),require("../../modules/es.symbol.to-string-tag"),require("../../modules/es.symbol.unscopables"),require("../../modules/es.math.to-string-tag"),require("../../modules/es.json.to-string-tag");var e=require("../../internals/path");module.exports=e.Symbol;
},{"../../modules/es.array.concat":"DkW2","../../modules/es.object.to-string":"vBel","../../modules/es.symbol":"D0nb","../../modules/es.symbol.async-iterator":"qB7h","../../modules/es.symbol.description":"vBel","../../modules/es.symbol.has-instance":"zzsi","../../modules/es.symbol.is-concat-spreadable":"dwLz","../../modules/es.symbol.iterator":"gIOj","../../modules/es.symbol.match":"Ozfx","../../modules/es.symbol.match-all":"Mszc","../../modules/es.symbol.replace":"NSL9","../../modules/es.symbol.search":"sqN3","../../modules/es.symbol.species":"ab7Q","../../modules/es.symbol.split":"UBcC","../../modules/es.symbol.to-primitive":"fukv","../../modules/es.symbol.to-string-tag":"uagZ","../../modules/es.symbol.unscopables":"WcC1","../../modules/es.math.to-string-tag":"yqPu","../../modules/es.json.to-string-tag":"mW5I","../../internals/path":"COdq"}],"LVsR":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("asyncDispose");
},{"../internals/define-well-known-symbol":"DnLs"}],"aOjQ":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("dispose");
},{"../internals/define-well-known-symbol":"DnLs"}],"qVuP":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("observable");
},{"../internals/define-well-known-symbol":"DnLs"}],"fZdv":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("patternMatch");
},{"../internals/define-well-known-symbol":"DnLs"}],"vcIw":[function(require,module,exports) {
var e=require("../internals/define-well-known-symbol");e("replaceAll");
},{"../internals/define-well-known-symbol":"DnLs"}],"jzqx":[function(require,module,exports) {
var e=require("../../es/symbol");require("../../modules/esnext.symbol.async-dispose"),require("../../modules/esnext.symbol.dispose"),require("../../modules/esnext.symbol.observable"),require("../../modules/esnext.symbol.pattern-match"),require("../../modules/esnext.symbol.replace-all"),module.exports=e;
},{"../../es/symbol":"x0Ov","../../modules/esnext.symbol.async-dispose":"LVsR","../../modules/esnext.symbol.dispose":"aOjQ","../../modules/esnext.symbol.observable":"qVuP","../../modules/esnext.symbol.pattern-match":"fZdv","../../modules/esnext.symbol.replace-all":"vcIw"}],"aP4y":[function(require,module,exports) {
module.exports=require("core-js-pure/features/symbol");
},{"core-js-pure/features/symbol":"jzqx"}],"UX4L":[function(require,module,exports) {
var o=require("../core-js/symbol/iterator"),t=require("../core-js/symbol");function e(r){return module.exports=e="function"==typeof t&&"symbol"==typeof o?function(o){return typeof o}:function(o){return o&&"function"==typeof t&&o.constructor===t&&o!==t.prototype?"symbol":typeof o},e(r)}module.exports=e;
},{"../core-js/symbol/iterator":"LYHE","../core-js/symbol":"aP4y"}],"r594":[function(require,module,exports) {
function e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}module.exports=e;
},{}],"yM8b":[function(require,module,exports) {
var e=require("../helpers/typeof"),r=require("./assertThisInitialized");function t(t,i){return!i||"object"!==e(i)&&"function"!=typeof i?r(t):i}module.exports=t;
},{"../helpers/typeof":"UX4L","./assertThisInitialized":"r594"}],"X1zW":[function(require,module,exports) {
var e=require("../internals/export"),t=require("../internals/fails"),r=require("../internals/to-object"),n=require("../internals/object-get-prototype-of"),o=require("../internals/correct-prototype-getter"),i=t(function(){n(1)});e({target:"Object",stat:!0,forced:i,sham:!o},{getPrototypeOf:function(e){return n(r(e))}});
},{"../internals/export":"qpO1","../internals/fails":"XSQS","../internals/to-object":"S7GN","../internals/object-get-prototype-of":"SOTG","../internals/correct-prototype-getter":"HpLk"}],"UPF6":[function(require,module,exports) {
require("../../modules/es.object.get-prototype-of");var e=require("../../internals/path");module.exports=e.Object.getPrototypeOf;
},{"../../modules/es.object.get-prototype-of":"X1zW","../../internals/path":"COdq"}],"ISXs":[function(require,module,exports) {
var e=require("../../es/object/get-prototype-of");module.exports=e;
},{"../../es/object/get-prototype-of":"UPF6"}],"em7q":[function(require,module,exports) {
module.exports=require("core-js-pure/features/object/get-prototype-of");
},{"core-js-pure/features/object/get-prototype-of":"ISXs"}],"u7JQ":[function(require,module,exports) {
var t=require("../internals/export"),e=require("../internals/object-set-prototype-of");t({target:"Object",stat:!0},{setPrototypeOf:e});
},{"../internals/export":"qpO1","../internals/object-set-prototype-of":"M5SR"}],"Ja6x":[function(require,module,exports) {
require("../../modules/es.object.set-prototype-of");var e=require("../../internals/path");module.exports=e.Object.setPrototypeOf;
},{"../../modules/es.object.set-prototype-of":"u7JQ","../../internals/path":"COdq"}],"jYWI":[function(require,module,exports) {
var e=require("../../es/object/set-prototype-of");module.exports=e;
},{"../../es/object/set-prototype-of":"Ja6x"}],"E2T8":[function(require,module,exports) {
module.exports=require("core-js-pure/features/object/set-prototype-of");
},{"core-js-pure/features/object/set-prototype-of":"jYWI"}],"ZyuO":[function(require,module,exports) {
var e=require("../core-js/object/get-prototype-of"),o=require("../core-js/object/set-prototype-of");function r(t){return module.exports=r=o?e:function(o){return o.__proto__||e(o)},r(t)}module.exports=r;
},{"../core-js/object/get-prototype-of":"em7q","../core-js/object/set-prototype-of":"E2T8"}],"lVFV":[function(require,module,exports) {
var e=require("../internals/export"),r=require("../internals/descriptors"),t=require("../internals/object-create");e({target:"Object",stat:!0,sham:!r},{create:t});
},{"../internals/export":"qpO1","../internals/descriptors":"E7QI","../internals/object-create":"rYkB"}],"nvQH":[function(require,module,exports) {
require("../../modules/es.object.create");var e=require("../../internals/path"),r=e.Object;module.exports=function(e,t){return r.create(e,t)};
},{"../../modules/es.object.create":"lVFV","../../internals/path":"COdq"}],"AbVZ":[function(require,module,exports) {
var e=require("../../es/object/create");module.exports=e;
},{"../../es/object/create":"nvQH"}],"SwNK":[function(require,module,exports) {
module.exports=require("core-js-pure/features/object/create");
},{"core-js-pure/features/object/create":"AbVZ"}],"eIIF":[function(require,module,exports) {
var o=require("../core-js/object/set-prototype-of");function e(r,t){return module.exports=e=o||function(o,e){return o.__proto__=e,o},e(r,t)}module.exports=e;
},{"../core-js/object/set-prototype-of":"E2T8"}],"DB6z":[function(require,module,exports) {
var e=require("../core-js/object/create"),r=require("./setPrototypeOf");function o(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");o.prototype=e(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),t&&r(o,t)}module.exports=o;
},{"../core-js/object/create":"SwNK","./setPrototypeOf":"eIIF"}],"LgNl":[function(require,module,exports) {
function o(r){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(r)}ArrayBuffer.isView||(ArrayBuffer.isView=function(r){return null!==r&&"object"===o(r)&&r.buffer instanceof ArrayBuffer});
},{}],"Y9sb":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){e.headers=t.headers||{},e.statusMessage=t.statusText,e.statusCode=t.status,e.data=t.response}function o(o,r,s){return new Promise(function(n,i){var a,p,u,d;s=s||{};var c=new XMLHttpRequest,f=s.headers||{};for(a in s.timeout&&(c.timeout=s.timeout),c.ontimeout=c.onerror=function(t){t.timeout="timeout"==t.type,i(t)},c.open(o,r),c.onload=function(){for(d=c.getAllResponseHeaders().trim().split(/[\r\n]+/),e(c,c);u=d.shift();)u=u.split(": "),c.headers[u.shift().toLowerCase()]=u.join(": ");if((u=c.headers["content-type"])&&~u.indexOf("application/json"))try{c.data=JSON.parse(c.data,s.reviver)}catch(t){return e(c,t),i(t)}(c.status>=400?i:n)(c)},(p=s.body)&&"object"==t(p)&&(f["content-type"]="application/json",p=JSON.stringify(p)),c.withCredentials=!!s.withCredentials,f)c.setRequestHeader(a,f[a]);c.send(p)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.send=o,exports.put=exports.del=exports.patch=exports.post=exports.get=void 0;var r=o.bind(o,"GET");exports.get=r;var s=o.bind(o,"POST");exports.post=s;var n=o.bind(o,"PATCH");exports.patch=n;var i=o.bind(o,"DELETE");exports.del=i;var a=o.bind(o,"PUT");exports.put=a;
},{}],"mOF4":[function(require,module,exports) {
"use strict";function t(t,e){if(this._offset=e,t instanceof ArrayBuffer)this._buffer=t,this._view=new DataView(this._buffer);else{if(!ArrayBuffer.isView(t))throw new Error("Invalid argument");this._buffer=t.buffer,this._view=new DataView(this._buffer,t.byteOffset,t.byteLength)}}function e(t,e,s){for(var i="",f=0,r=e,h=e+s;r<h;r++){var _=t.getUint8(r);if(0!=(128&_))if(192!=(224&_))if(224!=(240&_)){if(240!=(248&_))throw new Error("Invalid byte "+_.toString(16));(f=(7&_)<<18|(63&t.getUint8(++r))<<12|(63&t.getUint8(++r))<<6|(63&t.getUint8(++r))<<0)>=65536?(f-=65536,i+=String.fromCharCode(55296+(f>>>10),56320+(1023&f))):i+=String.fromCharCode(f)}else i+=String.fromCharCode((15&_)<<12|(63&t.getUint8(++r))<<6|(63&t.getUint8(++r))<<0);else i+=String.fromCharCode((31&_)<<6|63&t.getUint8(++r));else i+=String.fromCharCode(_)}return i}function s(e,s){void 0===s&&(s=0);var i=new t(e,s),f=i._parse();if(i._offset!==e.byteLength)throw new Error(e.byteLength-i._offset+" trailing bytes");return f}Object.defineProperty(exports,"__esModule",{value:!0}),t.prototype._array=function(t){for(var e=new Array(t),s=0;s<t;s++)e[s]=this._parse();return e},t.prototype._map=function(t){for(var e={},s=0;s<t;s++)e[this._parse()]=this._parse();return e},t.prototype._str=function(t){var s=e(this._view,this._offset,t);return this._offset+=t,s},t.prototype._bin=function(t){var e=this._buffer.slice(this._offset,this._offset+t);return this._offset+=t,e},t.prototype._parse=function(){var t,e=this._view.getUint8(this._offset++),s=0,i=0,f=0,r=0;if(e<192)return e<128?e:e<144?this._map(15&e):e<160?this._array(15&e):this._str(31&e);if(e>223)return-1*(255-e+1);switch(e){case 192:return null;case 194:return!1;case 195:return!0;case 196:return s=this._view.getUint8(this._offset),this._offset+=1,this._bin(s);case 197:return s=this._view.getUint16(this._offset),this._offset+=2,this._bin(s);case 198:return s=this._view.getUint32(this._offset),this._offset+=4,this._bin(s);case 199:return s=this._view.getUint8(this._offset),i=this._view.getInt8(this._offset+1),this._offset+=2,[i,this._bin(s)];case 200:return s=this._view.getUint16(this._offset),i=this._view.getInt8(this._offset+2),this._offset+=3,[i,this._bin(s)];case 201:return s=this._view.getUint32(this._offset),i=this._view.getInt8(this._offset+4),this._offset+=5,[i,this._bin(s)];case 202:return t=this._view.getFloat32(this._offset),this._offset+=4,t;case 203:return t=this._view.getFloat64(this._offset),this._offset+=8,t;case 204:return t=this._view.getUint8(this._offset),this._offset+=1,t;case 205:return t=this._view.getUint16(this._offset),this._offset+=2,t;case 206:return t=this._view.getUint32(this._offset),this._offset+=4,t;case 207:return f=this._view.getUint32(this._offset)*Math.pow(2,32),r=this._view.getUint32(this._offset+4),this._offset+=8,f+r;case 208:return t=this._view.getInt8(this._offset),this._offset+=1,t;case 209:return t=this._view.getInt16(this._offset),this._offset+=2,t;case 210:return t=this._view.getInt32(this._offset),this._offset+=4,t;case 211:return f=this._view.getInt32(this._offset)*Math.pow(2,32),r=this._view.getUint32(this._offset+4),this._offset+=8,f+r;case 212:return i=this._view.getInt8(this._offset),this._offset+=1,0===i?void(this._offset+=1):[i,this._bin(1)];case 213:return i=this._view.getInt8(this._offset),this._offset+=1,[i,this._bin(2)];case 214:return i=this._view.getInt8(this._offset),this._offset+=1,[i,this._bin(4)];case 215:return i=this._view.getInt8(this._offset),this._offset+=1,0===i?(f=this._view.getInt32(this._offset)*Math.pow(2,32),r=this._view.getUint32(this._offset+4),this._offset+=8,new Date(f+r)):[i,this._bin(8)];case 216:return i=this._view.getInt8(this._offset),this._offset+=1,[i,this._bin(16)];case 217:return s=this._view.getUint8(this._offset),this._offset+=1,this._str(s);case 218:return s=this._view.getUint16(this._offset),this._offset+=2,this._str(s);case 219:return s=this._view.getUint32(this._offset),this._offset+=4,this._str(s);case 220:return s=this._view.getUint16(this._offset),this._offset+=2,this._array(s);case 221:return s=this._view.getUint32(this._offset),this._offset+=4,this._array(s);case 222:return s=this._view.getUint16(this._offset),this._offset+=2,this._map(s);case 223:return s=this._view.getUint32(this._offset),this._offset+=4,this._map(s)}throw new Error("Could not parse")},exports.default=s;
},{}],"LHea":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e,r){for(var n=0,o=0,f=r.length;o<f;o++)(n=r.charCodeAt(o))<128?t.setUint8(e++,n):n<2048?(t.setUint8(e++,192|n>>6),t.setUint8(e++,128|63&n)):n<55296||n>=57344?(t.setUint8(e++,224|n>>12),t.setUint8(e++,128|n>>6&63),t.setUint8(e++,128|63&n)):(o++,n=65536+((1023&n)<<10|1023&r.charCodeAt(o)),t.setUint8(e++,240|n>>18),t.setUint8(e++,128|n>>12&63),t.setUint8(e++,128|n>>6&63),t.setUint8(e++,128|63&n))}function r(t){for(var e=0,r=0,n=0,o=t.length;n<o;n++)(e=t.charCodeAt(n))<128?r+=1:e<2048?r+=2:e<55296||e>=57344?r+=3:(n++,r+=4);return r}function n(e,o,f){var s=t(f),u=0,i=0,h=0,l=0,p=0,a=0;if("string"===s){if((p=r(f))<32)e.push(160|p),a=1;else if(p<256)e.push(217,p),a=2;else if(p<65536)e.push(218,p>>8,p),a=3;else{if(!(p<4294967296))throw new Error("String too long");e.push(219,p>>24,p>>16,p>>8,p),a=5}return o.push({_str:f,_length:p,_offset:e.length}),a+p}if("number"===s)return Math.floor(f)===f&&isFinite(f)?f>=0?f<128?(e.push(f),1):f<256?(e.push(204,f),2):f<65536?(e.push(205,f>>8,f),3):f<4294967296?(e.push(206,f>>24,f>>16,f>>8,f),5):(h=f/Math.pow(2,32)>>0,l=f>>>0,e.push(207,h>>24,h>>16,h>>8,h,l>>24,l>>16,l>>8,l),9):f>=-32?(e.push(f),1):f>=-128?(e.push(208,f),2):f>=-32768?(e.push(209,f>>8,f),3):f>=-2147483648?(e.push(210,f>>24,f>>16,f>>8,f),5):(h=Math.floor(f/Math.pow(2,32)),l=f>>>0,e.push(211,h>>24,h>>16,h>>8,h,l>>24,l>>16,l>>8,l),9):(e.push(203),o.push({_float:f,_length:8,_offset:e.length}),9);if("object"===s){if(null===f)return e.push(192),1;if(Array.isArray(f)){if((p=f.length)<16)e.push(144|p),a=1;else if(p<65536)e.push(220,p>>8,p),a=3;else{if(!(p<4294967296))throw new Error("Array too large");e.push(221,p>>24,p>>16,p>>8,p),a=5}for(u=0;u<p;u++)a+=n(e,o,f[u]);return a}if(f instanceof Date){var c=f.getTime();return h=Math.floor(c/Math.pow(2,32)),l=c>>>0,e.push(215,0,h>>24,h>>16,h>>8,h,l>>24,l>>16,l>>8,l),10}if(f instanceof ArrayBuffer){if((p=f.byteLength)<256)e.push(196,p),a=2;else if(p<65536)e.push(197,p>>8,p),a=3;else{if(!(p<4294967296))throw new Error("Buffer too large");e.push(198,p>>24,p>>16,p>>8,p),a=5}return o.push({_bin:f,_length:p,_offset:e.length}),a+p}if("function"==typeof f.toJSON)return n(e,o,f.toJSON());var y=[],g="",_=Object.keys(f);for(u=0,i=_.length;u<i;u++)"function"!=typeof f[g=_[u]]&&y.push(g);if((p=y.length)<16)e.push(128|p),a=1;else if(p<65536)e.push(222,p>>8,p),a=3;else{if(!(p<4294967296))throw new Error("Object too large");e.push(223,p>>24,p>>16,p>>8,p),a=5}for(u=0;u<p;u++)a+=n(e,o,g=y[u]),a+=n(e,o,f[g]);return a}if("boolean"===s)return e.push(f?195:194),1;if("undefined"===s)return e.push(212,0,0),3;throw new Error("Could not encode")}function o(t){var r=[],o=[],f=n(r,o,t),s=new ArrayBuffer(f),u=new DataView(s),i=0,h=0,l=-1;o.length>0&&(l=o[0]._offset);for(var p,a=0,c=0,y=0,g=r.length;y<g;y++)if(u.setUint8(h+y,r[y]),y+1===l){if(a=(p=o[i])._length,c=h+l,p._bin)for(var _=new Uint8Array(p._bin),b=0;b<a;b++)u.setUint8(c+b,_[b]);else p._str?e(u,c,p._str):void 0!==p._float&&u.setFloat64(c,p._float);h+=a,o[++i]&&(l=o[i]._offset)}return s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;
},{}],"P2h1":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./msgpack/decode")),r=e(require("./msgpack/encode"));exports.decode=t.default,exports.encode=r.default;
},{"./msgpack/decode":"mOF4","./msgpack/encode":"LHea"}],"G8a8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function n(){this.handlers=[]}return n.prototype.register=function(n,e){return void 0===e&&(e=!1),this.handlers.push(n),this},n.prototype.invoke=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.handlers.forEach(function(e){return e.apply(void 0,n)})},n.prototype.invokeAsync=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return Promise.all(this.handlers.map(function(e){return e.apply(void 0,n)}))},n.prototype.remove=function(n){var e=this.handlers.indexOf(n);this.handlers[e]=this.handlers[this.handlers.length-1],this.handlers.pop()},n.prototype.clear=function(){this.handlers=[]},n}();function e(){var e=new n;function r(n){return e.register(n,null===this)}return r.once=function(n){var r=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];n.apply(void 0,t),e.remove(r)};e.register(r)},r.remove=function(n){return e.remove(n)},r.invoke=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.invoke.apply(e,n)},r.invokeAsync=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.invokeAsync.apply(e,n)},r.clear=function(){return e.clear()},r}exports.EventEmitter=n,exports.createSignal=e;
},{}],"cAyg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBackoff=e;var t={exponential:function(t,e){return Math.floor(Math.random()*Math.pow(2,t)*e)},fibonacci:function(t,e){if(t>(o=1))for(var i=1,o=2,a=2;a<t;a++){var n=i+o;i=o,o=n}return Math.floor(Math.random()*o*e)}};function e(e,o){return new i(t[e],o)}function i(t,e){this.func=t,this.attempts=0,this.delay=void 0!==e.initialDelay?e.initialDelay:100}i.prototype.backoff=function(){setTimeout(this.onReady,this.func(++this.attempts,this.delay))};
},{}],"ilQv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,n){for(var t=0;t<n.length;t++){var s=n[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(n,t,s){return t&&e(n.prototype,t),s&&e(n,s),n}}();function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var t=require("./backoff").createBackoff,s="undefined"!=typeof WebSocket?WebSocket:require("ws"),o=function(){function o(e,s){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,o),this.url=e,this.protocols=s,this.reconnectEnabled=!0,this.listeners={},this.backoff=t(i.backoff||"exponential",i),this.backoff.onReady=this.onBackoffReady.bind(this),(void 0===i.connect||i.connect)&&this.open()}return e(o,[{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isReconnect=e;var n=this.ws&&this.ws.binaryType;this.ws=new s(this.url,this.protocols),this.ws.onclose=this.onCloseCallback.bind(this),this.ws.onerror=this.onErrorCallback.bind(this),this.ws.onmessage=this.onMessageCallback.bind(this),this.ws.onopen=this.onOpenCallback.bind(this),n&&(this.ws.binaryType=n)}},{key:"onBackoffReady",value:function(e,n){this.open(!0)}},{key:"onCloseCallback",value:function(e){!this.isReconnect&&this.listeners.onclose&&this.listeners.onclose.apply(null,arguments),this.reconnectEnabled&&e.code<3e3&&this.backoff.backoff()}},{key:"onErrorCallback",value:function(){this.listeners.onerror&&this.listeners.onerror.apply(null,arguments)}},{key:"onMessageCallback",value:function(){this.listeners.onmessage&&this.listeners.onmessage.apply(null,arguments)}},{key:"onOpenCallback",value:function(){this.listeners.onopen&&this.listeners.onopen.apply(null,arguments),this.isReconnect&&this.listeners.onreconnect&&this.listeners.onreconnect.apply(null,arguments),this.isReconnect=!1}},{key:"close",value:function(e,n){void 0===e&&(e=1e3),this.reconnectEnabled=!1,this.ws.close(e,n)}},{key:"send",value:function(e){this.ws.send(e)}},{key:"bufferedAmount",get:function(){return this.ws.bufferedAmount}},{key:"readyState",get:function(){return this.ws.readyState}},{key:"binaryType",get:function(){return this.ws.binaryType},set:function(e){this.ws.binaryType=e}},{key:"extensions",get:function(){return this.ws.extensions},set:function(e){this.ws.extensions=e}},{key:"protocol",get:function(){return this.ws.protocol},set:function(e){this.ws.protocol=e}},{key:"onclose",set:function(e){this.listeners.onclose=e},get:function(){return this.listeners.onclose}},{key:"onerror",set:function(e){this.listeners.onerror=e},get:function(){return this.listeners.onerror}},{key:"onmessage",set:function(e){this.listeners.onmessage=e},get:function(){return this.listeners.onmessage}},{key:"onopen",set:function(e){this.listeners.onopen=e},get:function(){return this.listeners.onopen}},{key:"onreconnect",set:function(e){this.listeners.onreconnect=e},get:function(){return this.listeners.onreconnect}}]),o}();o.CONNECTING=s.CONNECTING,o.OPEN=s.OPEN,o.CLOSING=s.CLOSING,o.CLOSED=s.CLOSED,exports.default=o;
},{"./backoff":"cAyg","ws":"vBel"}],"eW2Z":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("@gamestdio/websocket")),o=n(require("./msgpack")),i=function(e){function n(t,n){void 0===n&&(n=!0);var r=e.call(this,t,void 0,{connect:n})||this;return r._enqueuedCalls=[],r}return t(n,e),n.prototype.onOpenCallback=function(t){if(e.prototype.onOpenCallback.call(this),this.binaryType="arraybuffer",this._enqueuedCalls.length>0){for(var n=0,r=this._enqueuedCalls;n<r.length;n++){var o=r[n],i=o[0],u=o[1];this[i].apply(this,u)}this._enqueuedCalls=[]}},n.prototype.send=function(t){if(this.ws.readyState===r.default.OPEN)return e.prototype.send.call(this,o.encode(t));this._enqueuedCalls.push(["send",[t]])},n}(r.default);exports.Connection=i;
},{"@gamestdio/websocket":"ilQv","./msgpack":"P2h1"}],"R29f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={};function r(r,t){e[r]=t}function t(r){return e[r]}exports.registerSerializer=r,exports.getSerializer=t;
},{}],"IqTf":[function(require,module,exports) {
"use strict";var r;function o(r,o){for(var e=r[o++],O="",t=0,A=o,_=o+e;A<_;A++){var n=r[A];if(0!=(128&n))if(192!=(224&n))if(224!=(240&n)){if(240!=(248&n))throw new Error("Invalid byte "+n.toString(16));(t=(7&n)<<18|(63&r[++A])<<12|(63&r[++A])<<6|(63&r[++A])<<0)>=65536?(t-=65536,O+=String.fromCharCode(55296+(t>>>10),56320+(1023&t))):O+=String.fromCharCode(t)}else O+=String.fromCharCode((15&n)<<12|(63&r[++A])<<6|(63&r[++A])<<0);else O+=String.fromCharCode((31&n)<<6|63&r[++A]);else O+=String.fromCharCode(n)}return O}function e(r){void 0===r&&(r="");for(var o=0,e=0,O=0,t=r.length;O<t;O++)(o=r.charCodeAt(O))<128?e+=1:o<2048?e+=2:o<55296||o>=57344?e+=3:(O++,e+=4);return e+1}Object.defineProperty(exports,"__esModule",{value:!0}),function(r){r[r.HANDSHAKE=9]="HANDSHAKE",r[r.JOIN_ROOM=10]="JOIN_ROOM",r[r.JOIN_ERROR=11]="JOIN_ERROR",r[r.LEAVE_ROOM=12]="LEAVE_ROOM",r[r.ROOM_DATA=13]="ROOM_DATA",r[r.ROOM_STATE=14]="ROOM_STATE",r[r.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",r[r.ROOM_DATA_SCHEMA=16]="ROOM_DATA_SCHEMA"}(r=exports.Protocol||(exports.Protocol={})),exports.utf8Read=o,exports.utf8Length=e;
},{}],"nDQT":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./msgpack")),o=require("strong-events"),i=require("./Connection"),r=require("./serializer/Serializer"),n=require("./Protocol"),s=function(){function e(e,t){var i=this;this.onJoin=o.createSignal(),this.onStateChange=o.createSignal(),this.onMessage=o.createSignal(),this.onError=o.createSignal(),this.onLeave=o.createSignal(),this.hasJoined=!1,this.id=null,this.name=e,t?(this.serializer=new(r.getSerializer("schema")),this.rootSchema=t,this.serializer.state=new t):this.serializer=new(r.getSerializer("fossil-delta")),this.onError(function(e){return e&&console.error(e)}),this.onLeave(function(){return i.removeAllListeners()})}return e.prototype.connect=function(e){var t=this;this.connection=new i.Connection(e,!1),this.connection.reconnectEnabled=!1,this.connection.onmessage=this.onMessageCallback.bind(this),this.connection.onclose=function(e){if(!t.hasJoined)return console.error("Room connection was closed unexpectedly ("+e.code+"): "+e.reason),void t.onError.invoke(e.reason);t.onLeave.invoke(e.code)},this.connection.onerror=function(e){console.warn("Room, onError ("+e.code+"): "+e.reason),t.onError.invoke(e.reason)},this.connection.open()},e.prototype.leave=function(e){void 0===e&&(e=!0),this.connection?e?this.connection.send([n.Protocol.LEAVE_ROOM]):this.connection.close():this.onLeave.invoke(4e3)},e.prototype.send=function(e){this.connection.send([n.Protocol.ROOM_DATA,e])},Object.defineProperty(e.prototype,"state",{get:function(){return this.serializer.getState()},enumerable:!0,configurable:!0}),e.prototype.listen=function(e,t,o){if("schema"!==this.serializerId)return this.serializerId||console.warn("room.Listen() should be called after room.onJoin has been called (DEPRECATION WARNING)"),this.serializer.api.listen(e,t,o);console.error("'"+this.serializerId+"' serializer doesn't support .listen() method.")},e.prototype.removeListener=function(e){return this.serializer.api.removeListener(e)},e.prototype.removeAllListeners=function(){this.serializer&&this.serializer.teardown(),this.onJoin.clear(),this.onStateChange.clear(),this.onMessage.clear(),this.onError.clear(),this.onLeave.clear()},e.prototype.onMessageCallback=function(e){var o=Array.from(new Uint8Array(e.data)),i=o[0];if(i===n.Protocol.JOIN_ROOM){var s=1;this.serializerId=n.utf8Read(o,s),s+=n.utf8Length(this.serializerId);var a=r.getSerializer(this.serializerId);if(!a)throw new Error("missing serializer: "+this.serializerId);"fossil-delta"===this.serializerId||this.rootSchema||(this.serializer=new a),o.length>s&&this.serializer.handshake&&this.serializer.handshake(o,{offset:1}),this.hasJoined=!0,this.onJoin.invoke(),this.connection.send([n.Protocol.JOIN_ROOM])}else if(i===n.Protocol.JOIN_ERROR)this.onError.invoke(n.utf8Read(o,1));else if(i===n.Protocol.LEAVE_ROOM)this.leave();else if(i===n.Protocol.ROOM_DATA_SCHEMA){var c=new(this.serializer.getState().constructor._context.get(o[1]));c.decode(o,{offset:2}),this.onMessage.invoke(c)}else i===n.Protocol.ROOM_STATE?(o.shift(),this.setState(o)):i===n.Protocol.ROOM_STATE_PATCH?(o.shift(),this.patch(o)):i===n.Protocol.ROOM_DATA&&this.onMessage.invoke(t.decode(e.data,1))},e.prototype.setState=function(e){this.serializer.setState(e),this.onStateChange.invoke(this.serializer.getState())},e.prototype.patch=function(e){this.serializer.patch(e),this.onStateChange.invoke(this.serializer.getState())},e}();exports.Room=s;
},{"./msgpack":"P2h1","strong-events":"G8a8","./Connection":"eW2Z","./serializer/Serializer":"R29f","./Protocol":"IqTf"}],"RtSJ":[function(require,module,exports) {
"use strict";var e;function t(){return e||(e="undefined"!=typeof cc&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:{cache:{},setItem:function(e,t){this.cache[e]=t},getItem:function(e){this.cache[e]},removeItem:function(e){delete this.cache[e]}}),e}function o(e,o){t().setItem(e,o)}function c(e){t().removeItem(e)}function n(e,o){var c=t().getItem(e);"undefined"!=typeof Promise&&c instanceof Promise?c.then(function(e){return o(e)}):o(c)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.setItem=o,exports.removeItem=c,exports.getItem=n;
},{}],"vbIL":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{a(i.next(t))}catch(e){o(e)}}function u(t){try{a(i.throw(t))}catch(e){o(e)}}function a(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,u)}a((i=i.apply(t,e||[])).next())})},e=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(u){o=[6,u],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(exports,"__esModule",{value:!0});var i,r=n(require("httpie")),o=require("./Storage"),s="colyseus-auth-token";!function(t){t.ios="ios",t.android="android"}(i=exports.Platform||(exports.Platform={}));var u=function(){function n(t){var e=this;this._id=void 0,this.username=void 0,this.displayName=void 0,this.avatarUrl=void 0,this.isAnonymous=void 0,this.email=void 0,this.lang=void 0,this.location=void 0,this.timezone=void 0,this.metadata=void 0,this.devices=void 0,this.facebookId=void 0,this.twitterId=void 0,this.googleId=void 0,this.gameCenterId=void 0,this.steamId=void 0,this.friendIds=void 0,this.blockedUserIds=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.token=void 0,this.endpoint=t.replace("ws","http"),o.getItem(s,function(t){return e.token=t})}return Object.defineProperty(n.prototype,"hasToken",{get:function(){return!!this.token},enumerable:!0,configurable:!0}),n.prototype.login=function(n){return void 0===n&&(n={}),t(this,void 0,void 0,function(){var t,i,r;return e(this,function(e){switch(e.label){case 0:return t=Object.assign({},n),this.hasToken&&(t.token=this.token),[4,this.request("post","/auth",t)];case 1:for(r in i=e.sent(),this.token=i.token,o.setItem(s,this.token),i)this.hasOwnProperty(r)&&(this[r]=i[r]);return this.registerPingService(),[2,this]}})})},n.prototype.save=function(){return t(this,void 0,void 0,function(){return e(this,function(t){switch(t.label){case 0:return[4,this.request("put","/auth",{},{username:this.username,displayName:this.displayName,avatarUrl:this.avatarUrl,lang:this.lang,location:this.location,timezone:this.timezone})];case 1:return t.sent(),[2,this]}})})},n.prototype.getFriends=function(){return t(this,void 0,void 0,function(){return e(this,function(t){switch(t.label){case 0:return[4,this.request("get","/friends/all")];case 1:return[2,t.sent()]}})})},n.prototype.getOnlineFriends=function(){return t(this,void 0,void 0,function(){return e(this,function(t){switch(t.label){case 0:return[4,this.request("get","/friends/online")];case 1:return[2,t.sent()]}})})},n.prototype.getFriendRequests=function(){return t(this,void 0,void 0,function(){return e(this,function(t){switch(t.label){case 0:return[4,this.request("get","/friends/requests")];case 1:return[2,t.sent()]}})})},n.prototype.sendFriendRequest=function(n){return t(this,void 0,void 0,function(){return e(this,function(t){switch(t.label){case 0:return[4,this.request("post","/friends/requests",{userId:n})];case 1:return[2,t.sent()]}})})},n.prototype.acceptFriendRequest=function(n){return t(this,void 0,void 0,function(){return e(this,function(t){switch(t.label){case 0:return[4,this.request("put","/friends/requests",{userId:n})];case 1:return[2,t.sent()]}})})},n.prototype.declineFriendRequest=function(n){return t(this,void 0,void 0,function(){return e(this,function(t){switch(t.label){case 0:return[4,this.request("del","/friends/requests",{userId:n})];case 1:return[2,t.sent()]}})})},n.prototype.blockUser=function(n){return t(this,void 0,void 0,function(){return e(this,function(t){switch(t.label){case 0:return[4,this.request("post","/friends/block",{userId:n})];case 1:return[2,t.sent()]}})})},n.prototype.unblockUser=function(n){return t(this,void 0,void 0,function(){return e(this,function(t){switch(t.label){case 0:return[4,this.request("put","/friends/block",{userId:n})];case 1:return[2,t.sent()]}})})},n.prototype.request=function(n,i,o,s,u){return void 0===o&&(o={}),void 0===u&&(u={}),t(this,void 0,void 0,function(){var t,a,c,h;return e(this,function(e){switch(e.label){case 0:for(a in u.Accept="application/json",this.hasToken&&(u.Authorization="Bearer "+this.token),t=[],o)t.push(a+"="+o[a]);return c=t.length>0?"?"+t.join("&"):"",h={headers:u},s&&(h.body=s),[4,r[n](""+this.endpoint+i+c,h)];case 1:return[2,e.sent().data]}})})},n.prototype.logout=function(){this.token=void 0,o.removeItem(s),this.unregisterPingService()},n.prototype.registerPingService=function(t){var e=this;void 0===t&&(t=15e3),this.unregisterPingService(),this.keepOnlineInterval=setInterval(function(){return e.request("get","/auth")},t)},n.prototype.unregisterPingService=function(){clearInterval(this.keepOnlineInterval)},n}();exports.Auth=u;
},{"httpie":"Y9sb","./Storage":"RtSJ"}],"M2O4":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function u(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(s,u)}c((n=n.apply(t,e||[])).next())})},e=this&&this.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(u){o=[6,u],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function r(t){this.endpoint=t.replace("ws","http")}return r.prototype.register=function(){return t(this,void 0,void 0,function(){return e(this,function(t){switch(t.label){case 0:return this.check(),[4,this.registerServiceWorker()];case 1:return t.sent(),[4,this.requestNotificationPermission()];case 2:return t.sent(),[2]}})})},r.prototype.registerServiceWorker=function(){return t(this,void 0,void 0,function(){return e(this,function(t){switch(t.label){case 0:return[4,navigator.serviceWorker.register(this.endpoint+"/push")];case 1:return[2,t.sent()]}})})},r.prototype.requestNotificationPermission=function(){return t(this,void 0,void 0,function(){return e(this,function(t){switch(t.label){case 0:return[4,window.Notification.requestPermission()];case 1:if("granted"!==t.sent())throw new Error("Permission not granted for Notification");return[2]}})})},r.prototype.check=function(){if(!("serviceWorker"in navigator))throw new Error("No Service Worker support!");if(!("PushManager"in window))throw new Error("No Push API Support!")},r}();exports.Push=r;
},{}],"P1wo":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),e=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(c,s)}u((o=o.apply(t,e||[])).next())})},n=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(exports,"__esModule",{value:!0});var o=require("httpie"),r=require("./Room"),i=require("./Auth"),c=require("./Push"),s=function(e){function n(t,o){var r=e.call(this,t)||this;return r.code=o,Object.setPrototypeOf(r,n.prototype),r}return t(n,e),n}(Error);exports.MatchMakeError=s;var u=function(){function t(t){void 0===t&&(t=location.protocol.replace("http","ws")+"//"+location.hostname+(location.port&&":"+location.port)),this.endpoint=t,this.auth=new i.Auth(this.endpoint),this.push=new c.Push(this.endpoint)}return t.prototype.joinOrCreate=function(t,o,r){return void 0===o&&(o={}),e(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return[4,this.createMatchMakeRequest("joinOrCreate",t,o,r)];case 1:return[2,e.sent()]}})})},t.prototype.create=function(t,o,r){return void 0===o&&(o={}),e(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return[4,this.createMatchMakeRequest("create",t,o,r)];case 1:return[2,e.sent()]}})})},t.prototype.join=function(t,o,r){return void 0===o&&(o={}),e(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return[4,this.createMatchMakeRequest("join",t,o,r)];case 1:return[2,e.sent()]}})})},t.prototype.joinById=function(t,o,r){return void 0===o&&(o={}),e(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return[4,this.createMatchMakeRequest("joinById",t,o,r)];case 1:return[2,e.sent()]}})})},t.prototype.reconnect=function(t,o,r){return e(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return[4,this.createMatchMakeRequest("joinById",t,{sessionId:o},r)];case 1:return[2,e.sent()]}})})},t.prototype.getAvailableRooms=function(t){return void 0===t&&(t=""),e(this,void 0,void 0,function(){var e;return n(this,function(n){switch(n.label){case 0:return e=this.endpoint.replace("ws","http")+"/matchmake/"+t,[4,o.get(e,{headers:{Accept:"application/json"}})];case 1:return[2,n.sent().data]}})})},t.prototype.consumeSeatReservation=function(t,o){return e(this,void 0,void 0,function(){var e;return n(this,function(n){return(e=this.createRoom(t.room.name,o)).id=t.room.roomId,e.sessionId=t.sessionId,e.connect(this.buildEndpoint(t.room,{sessionId:e.sessionId})),[2,new Promise(function(t,n){var o=function(t){return n(t)};e.onError.once(o),e.onJoin.once(function(){e.onError.remove(o),t(e)})})]})})},t.prototype.createMatchMakeRequest=function(t,r,i,c){return void 0===i&&(i={}),e(this,void 0,void 0,function(){var e,u;return n(this,function(n){switch(n.label){case 0:return e=this.endpoint.replace("ws","http")+"/matchmake/"+t+"/"+r,this.auth.hasToken&&(i.token=this.auth.token),[4,o.post(e,{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)})];case 1:if((u=n.sent().data).error)throw new s(u.error,u.code);return[2,this.consumeSeatReservation(u,c)]}})})},t.prototype.createRoom=function(t,e){return new r.Room(t,e)},t.prototype.buildEndpoint=function(t,e){void 0===e&&(e={});var n=[];for(var o in e)e.hasOwnProperty(o)&&n.push(o+"="+e[o]);return this.endpoint+"/"+t.processId+"/"+t.roomId+"?"+n.join("&")},t}();exports.Client=u;
},{"httpie":"Y9sb","./Room":"nDQT","./Auth":"vbIL","./Push":"M2O4"}],"xEXq":[function(require,module,exports) {
"use strict";function r(r,e){var t=[];return o(r,e,t,[]),t}function e(r,e){var t=r.slice();return t.push(e),t}function t(r){if(Array.isArray(r)){for(var e=new Array(r.length),t=0;t<e.length;t++)e[t]=""+t;return e}if(Object.keys)return Object.keys(r);var o=[];for(var a in r)r.hasOwnProperty(a)&&o.push(a);return o}function o(r,a,n,u){for(var p=t(a),i=t(r),l=!1,s=i.length-1;s>=0;s--){var v=r[h=i[s]];if(!a.hasOwnProperty(h)||void 0===a[h]&&void 0!==v&&!1===Array.isArray(a))n.push({operation:"remove",path:e(u,h)}),l=!0;else{var f=a[h];"object"==typeof v&&null!=v&&"object"==typeof f&&null!=f?o(v,f,n,e(u,h)):v!==f&&n.push({operation:"replace",path:e(u,h),value:f,previousValue:v})}}if(l||p.length!=i.length)for(s=p.length-1;s>=0;s--){var h=p[s];if(!r.hasOwnProperty(h)&&void 0!==a[h]){f=a[h];var c=e(u,h);"object"==typeof f&&null!=f&&o({},f,n,c),n.push({operation:"add",path:c,value:f})}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.compare=r;
},{}],"wbUJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./compare"),t=function(){function t(e){this.listeners=[],this.matcherPlaceholders={":id":/^([a-zA-Z0-9\-_]+)$/,":number":/^([0-9]+)$/,":string":/^(\w+)$/,":axis":/^([xyz])$/,":*":/(.*)/},this.state=e,this.reset()}return t.prototype.set=function(t){var r=e.compare(this.state,t);return this.state=t,this.checkPatches(r,this.listeners,this.defaultListener),r},t.prototype.registerPlaceholder=function(e,t){this.matcherPlaceholders[e]=t},t.prototype.listen=function(t,r,s){var a,n=this;"function"==typeof t?(a=[],r=t):a=t.split("/"),r.length>1&&console.warn(".listen() accepts only one parameter.");var i={callback:r,rawRules:a,rules:a.map(function(e){return"string"==typeof e?0===e.indexOf(":")?n.matcherPlaceholders[e]||n.matcherPlaceholders[":*"]:new RegExp("^"+e+"$"):e})};return 0===a.length?this.defaultListener=i:this.listeners.push(i),s&&this.checkPatches(e.compare({},this.state),[i]),i},t.prototype.removeListener=function(e){for(var t=this.listeners.length-1;t>=0;t--)this.listeners[t]===e&&this.listeners.splice(t,1)},t.prototype.removeAllListeners=function(){this.reset()},t.prototype.checkPatches=function(e,t,r){for(var s=0,a=t.length;s<a;s++)for(var n=t[s],i=e.length-1;i>=0;i--){var h=n&&this.getPathVariables(e[i],n);h&&(n.callback({path:h,rawPath:e[i].path,operation:e[i].operation,value:e[i].value}),e[i].matched=!0)}if(r)for(i=e.length-1;i>=0;i--)e[i].matched||r.callback(e[i])},t.prototype.getPathVariables=function(e,t){if(e.path.length!==t.rules.length)return!1;for(var r={},s=0,a=t.rules.length;s<a;s++){var n=e.path[s].match(t.rules[s]);if(!n||0===n.length||n.length>2)return!1;":"===t.rawRules[s].substr(0,1)&&(r[t.rawRules[s].substr(1)]=n[1])}return r},t.prototype.reset=function(){this.listeners=[]},t}();exports.StateContainer=t;
},{"./compare":"xEXq"}],"lulU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./StateContainer");exports.StateContainer=e.StateContainer;
},{"./StateContainer":"wbUJ"}],"HdvK":[function(require,module,exports) {
!function(t,r){"undefined"!=typeof module&&module.exports?module.exports=r():t.fossilDelta=r()}(this,function(){"use strict";var t={},r=16;function e(){this.a=0,this.b=0,this.i=0,this.z=new Array(r)}e.prototype.init=function(t,e){var n,o,i=0,a=0;for(n=0;n<r;n++)i=i+(o=t[e+n])&65535,a=a+(r-n)*o&65535,this.z[n]=o;this.a=65535&i,this.b=65535&a,this.i=0},e.prototype.next=function(t){var e=this.z[this.i];this.z[this.i]=t,this.i=this.i+1&r-1,this.a=this.a-e+t&65535,this.b=this.b-r*e+this.a&65535},e.prototype.value=function(){return(65535&this.a|(65535&this.b)<<16)>>>0};var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz~".split("").map(function(t){return t.charCodeAt(0)}),o=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,36,-1,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,-1,-1,-1,63,-1];function i(t){this.a=t,this.pos=0}function a(){this.a=[]}function h(t){var r,e;for(r=1,e=64;t>=e;r++,e<<=6);return r}function u(t){for(var r=0,e=0,n=0,o=0,i=0,a=t.length;a>=16;)r=r+t[i+0]|0,e=e+t[i+1]|0,n=n+t[i+2]|0,o=o+t[i+3]|0,r=r+t[i+4]|0,e=e+t[i+5]|0,n=n+t[i+6]|0,o=o+t[i+7]|0,r=r+t[i+8]|0,e=e+t[i+9]|0,n=n+t[i+10]|0,o=o+t[i+11]|0,r=r+t[i+12]|0,e=e+t[i+13]|0,n=n+t[i+14]|0,o=o+t[i+15]|0,i+=16,a-=16;for(;a>=4;)r=r+t[i+0]|0,e=e+t[i+1]|0,n=n+t[i+2]|0,o=o+t[i+3]|0,i+=4,a-=4;switch(o=((o+(n<<8)|0)+(e<<16)|0)+(r<<24)|0,a){case 3:o=o+(t[i+2]<<8)|0;case 2:o=o+(t[i+1]<<16)|0;case 1:o=o+(t[i+0]<<24)|0}return o>>>0}return i.prototype.haveBytes=function(){return this.pos<this.a.length},i.prototype.getByte=function(){var t=this.a[this.pos];if(this.pos++,this.pos>this.a.length)throw new RangeError("out of bounds");return t},i.prototype.getChar=function(){return String.fromCharCode(this.getByte())},i.prototype.getInt=function(){for(var t,r=0;this.haveBytes()&&(t=o[127&this.getByte()])>=0;)r=(r<<6)+t;return this.pos--,r>>>0},a.prototype.toArray=function(){return this.a},a.prototype.putByte=function(t){this.a.push(255&t)},a.prototype.putChar=function(t){this.putByte(t.charCodeAt(0))},a.prototype.putInt=function(t){var r,e,o=[];if(0!==t){for(r=0;t>0;r++,t>>>=6)o.push(n[63&t]);for(e=r-1;e>=0;e--)this.putByte(o[e])}else this.putChar("0")},a.prototype.putArray=function(t,r,e){for(var n=r;n<e;n++)this.a.push(t[n])},t.create=function(t,n){var o,i=new a,s=n.length,p=t.length,f=-1;if(i.putInt(s),i.putChar("\n"),p<=r)return i.putInt(s),i.putChar(":"),i.putArray(n,0,s),i.putInt(u(n)),i.putChar(";"),i.toArray();var c=Math.ceil(p/r),y=new Array(c),w=new Array(c);for(o=0;o<y.length;o++)y[o]=-1;for(o=0;o<w.length;o++)w[o]=-1;var d,v=new e;for(o=0;o<p-r;o+=r)v.init(t,o),d=v.value()%c,y[o/r]=w[d],w[d]=o/r;for(var g,l,C,m,A,I=0;I+r<s;)for(m=0,A=0,v.init(n,I),o=0,C=0;;){var b=250;for(l=w[d=v.value()%c];l>=0&&b-- >0;){var E,z,B,k,x,S,D;for(k=0,S=g=l*r,D=I+o;S<p&&D<s&&t[S]===n[D];k++,S++,D++);for(k--,x=1;x<g&&x<=o&&t[g-x]===n[I+o-x];x++);z=g- --x,B=o-x,(E=k+x+1)>=h(o-x)+h(E)+h(z)+3&&E>C&&(C=E,m=g-x,A=B),l=y[l]}if(C>0){A>0&&(i.putInt(A),i.putChar(":"),i.putArray(n,I,I+A),I+=A),I+=C,i.putInt(C),i.putChar("@"),i.putInt(m),i.putChar(","),m+C-1>f&&(f=m+C-1),C=0;break}if(I+o+r>=s){i.putInt(s-I),i.putChar(":"),i.putArray(n,I,I+s-I),I=s;break}v.next(n[I+o+r]),o++}return I<s&&(i.putInt(s-I),i.putChar(":"),i.putArray(n,I,I+s-I)),i.putInt(u(n)),i.putChar(";"),i.toArray()},t.outputSize=function(t){var r=new i(t),e=r.getInt();if("\n"!==r.getChar())throw new Error("size integer not terminated by '\\n'");return e},t.apply=function(t,r,e){var n,o=0,h=new i(r),s=t.length,p=r.length;if(n=h.getInt(),"\n"!==h.getChar())throw new Error("size integer not terminated by '\\n'");for(var f=new a;h.haveBytes();){var c,y;switch(c=h.getInt(),h.getChar()){case"@":if(y=h.getInt(),h.haveBytes()&&","!==h.getChar())throw new Error("copy command not terminated by ','");if((o+=c)>n)throw new Error("copy exceeds output file size");if(y+c>s)throw new Error("copy extends past end of input");f.putArray(t,y,y+c);break;case":":if((o+=c)>n)throw new Error("insert command gives an output larger than predicted");if(c>p)throw new Error("insert count exceeds size of delta");f.putArray(h.a,h.pos,h.pos+c),h.pos+=c;break;case";":var w=f.toArray();if((!e||!1!==e.verifyChecksum)&&c!==u(w))throw new Error("bad checksum");if(o!==n)throw new Error("generated size does not match predicted size");return w;default:throw new Error("unknown delta operator")}}throw new Error("unterminated delta")},t});
},{}],"flfa":[function(require,module,exports) {
"use strict";var t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@gamestdio/state-listener"),i=t(require("fossil-delta")),r=t(require("../msgpack")),s=function(){function t(){this.api=new e.StateContainer({})}return t.prototype.getState=function(){return this.api.state},t.prototype.setState=function(t){this.previousState=new Uint8Array(t),this.api.set(r.decode(this.previousState))},t.prototype.patch=function(t){this.previousState=new Uint8Array(i.apply(this.previousState,t)),this.api.set(r.decode(this.previousState))},t.prototype.teardown=function(){this.api.removeAllListeners()},t}();exports.FossilDeltaSerializer=s;
},{"@gamestdio/state-listener":"lulU","fossil-delta":"HdvK","../msgpack":"P2h1"}],"VAwl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.END_OF_STRUCTURE=193,exports.NIL=192,exports.INDEX_CHANGE=212,exports.TYPE_ID=213;
},{}],"mx2X":[function(require,module,exports) {
"use strict";function t(t){for(var u=0,n=0,r=0,o=t.length;r<o;r++)(u=t.charCodeAt(r))<128?n+=1:u<2048?n+=2:u<55296||u>=57344?n+=3:(r++,n+=4);return n}function u(t,u,n){for(var r=0,o=0,e=n.length;o<e;o++)(r=n.charCodeAt(o))<128?t[u++]=r:r<2048?(t[u++]=192|r>>6,t[u++]=128|63&r):r<55296||r>=57344?(t[u++]=224|r>>12,t[u++]=128|r>>6&63,t[u++]=128|63&r):(o++,r=65536+((1023&r)<<10|1023&n.charCodeAt(o)),t[u++]=240|r>>18,t[u++]=128|r>>12&63,t[u++]=128|r>>6&63,t[u++]=128|63&r)}function n(t,u){t.push(255&u)}function r(t,u){t.push(255&u)}function o(t,u){t.push(255&u),t.push(u>>8&255)}function e(t,u){t.push(255&u),t.push(u>>8&255)}function s(t,u){t.push(255&u),t.push(u>>8&255),t.push(u>>16&255),t.push(u>>24&255)}function p(t,u){var n=u>>24,r=u>>16,o=u>>8,e=u;t.push(255&e),t.push(255&o),t.push(255&r),t.push(255&n)}function i(t,u){var n=Math.floor(u/Math.pow(2,32));p(t,u>>>0),p(t,n)}function h(t,u){var n=u/Math.pow(2,32)>>0;p(t,u>>>0),p(t,n)}function f(t,u){w(t,u)}function a(t,u){v(t,u)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.utf8Write=u,exports.int8=n,exports.uint8=r,exports.int16=o,exports.uint16=e,exports.int32=s,exports.uint32=p,exports.int64=i,exports.uint64=h,exports.float32=f,exports.float64=a;var c=!0,l=new Int32Array(2),x=new Float32Array(l.buffer),A=new Float64Array(l.buffer);function w(t,u){x[0]=u,s(t,l[0])}function v(t,u){A[0]=u,s(t,l[c?0:1]),s(t,l[c?1:0])}function b(t,u){return r(t,u?1:0)}function E(n,o){o||(o="");var s=t(o),i=0;if(s<32)n.push(160|s),i=1;else if(s<256)n.push(217),r(n,s),i=2;else if(s<65536)n.push(218),e(n,s),i=3;else{if(!(s<4294967296))throw new Error("String too long");n.push(219),p(n,s),i=5}return u(n,n.length,o),i+s}function F(t,u){return isNaN(u)?F(t,0):isFinite(u)?u!==(0|u)?(t.push(203),v(t,u),9):u>=0?u<128?(r(t,u),1):u<256?(t.push(204),r(t,u),2):u<65536?(t.push(205),e(t,u),3):u<4294967296?(t.push(206),p(t,u),5):(t.push(207),h(t,u),9):u>=-32?(t.push(u),1):u>=-128?(t.push(208),n(t,u),2):u>=-32768?(t.push(209),o(t,u),3):u>=-2147483648?(t.push(210),s(t,u),5):(t.push(211),i(t,u),9):F(t,u>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER)}exports.writeFloat32=w,exports.writeFloat64=v,exports.boolean=b,exports.string=E,exports.number=F;
},{}],"wNJr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../spec");function t(r,t,e){for(var n="",o=0,f=t,u=t+e;f<u;f++){var i=r[f];if(0!=(128&i))if(192!=(224&i))if(224!=(240&i)){if(240!=(248&i))throw new Error("Invalid byte "+i.toString(16));(o=(7&i)<<18|(63&r[++f])<<12|(63&r[++f])<<6|(63&r[++f])<<0)>=65536?(o-=65536,n+=String.fromCharCode(55296+(o>>>10),56320+(1023&o))):n+=String.fromCharCode(o)}else n+=String.fromCharCode((15&i)<<12|(63&r[++f])<<6|(63&r[++f])<<0);else n+=String.fromCharCode((31&i)<<6|63&r[++f]);else n+=String.fromCharCode(i)}return n}function e(r,t){return n(r,t)<<24>>24}function n(r,t){return r[t.offset++]}function o(r,t){return f(r,t)<<16>>16}function f(r,t){return r[t.offset++]|r[t.offset++]<<8}function u(r,t){return r[t.offset++]|r[t.offset++]<<8|r[t.offset++]<<16|r[t.offset++]<<24}function i(r,t){return u(r,t)>>>0}function s(r,t){return v(r,t)}function a(r,t){return d(r,t)}function c(r,t){var e=i(r,t);return u(r,t)*Math.pow(2,32)+e}function p(r,t){var e=i(r,t);return i(r,t)*Math.pow(2,32)+e}exports.int8=e,exports.uint8=n,exports.int16=o,exports.uint16=f,exports.int32=u,exports.uint32=i,exports.float32=s,exports.float64=a,exports.int64=c,exports.uint64=p;var x=!0,C=new Int32Array(2),h=new Float32Array(C.buffer),l=new Float64Array(C.buffer);function v(r,t){return C[0]=u(r,t),h[0]}function d(r,t){return C[x?0:1]=u(r,t),C[x?1:0]=u(r,t),l[0]}function g(r,t){return n(r,t)>0}function b(r,e){var o,u=r[e.offset++];u<192?o=31&u:217===u?o=n(r,e):218===u?o=f(r,e):219===u&&(o=i(r,e));var s=t(r,e.offset,o);return e.offset+=o,s}function m(r,t){var e=r[t.offset];return e<192&&e>160||217===e||218===e||219===e}function w(r,t){var s=r[t.offset++];return s<128?s:202===s?v(r,t):203===s?d(r,t):204===s?n(r,t):205===s?f(r,t):206===s?i(r,t):207===s?p(r,t):208===s?e(r,t):209===s?o(r,t):210===s?u(r,t):211===s?c(r,t):s>223?-1*(255-s+1):void 0}function y(r,t){var e=r[t.offset];return e<128||e>=202&&e<=211}function S(r,t){return r[t.offset]<160}function k(t,e){return t[e.offset]===r.NIL}function A(t,e){return t[e.offset]===r.INDEX_CHANGE}exports.readFloat32=v,exports.readFloat64=d,exports.boolean=g,exports.string=b,exports.stringCheck=m,exports.number=w,exports.numberCheck=y,exports.arrayCheck=S,exports.nilCheck=k,exports.indexChangeCheck=A;
},{"../spec":"VAwl"}],"SELh":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),t=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var a=arguments[t],i=0,c=a.length;i<c;i++,o++)n[o]=a[i];return n};Object.defineProperty(exports,"__esModule",{value:!0});var r=function(r){function n(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var a=r.apply(this,e)||this;return Object.setPrototypeOf(a,Object.create(n.prototype)),Object.defineProperties(a,{$sorting:{value:void 0,enumerable:!1,writable:!0},$changes:{value:void 0,enumerable:!1,writable:!0},onAdd:{value:void 0,enumerable:!1,writable:!0},onRemove:{value:void 0,enumerable:!1,writable:!0},onChange:{value:void 0,enumerable:!1,writable:!0},triggerAll:{value:function(){if(a.onAdd)for(var e=0;e<a.length;e++)a.onAdd(a[e],e)}},toJSON:{value:function(){for(var e=[],t=0;t<a.length;t++){var r=a[t];e.push("function"==typeof r.toJSON?r.toJSON():r)}return e}},clone:{value:function(e){var r;return e?((r=n.of.apply(n,a)).onAdd=a.onAdd,r.onRemove=a.onRemove,r.onChange=a.onChange):r=new(n.bind.apply(n,t([void 0],a.map(function(e){return"object"==typeof e?e.clone():e})))),r}}}),a}return e(n,r),Object.defineProperty(n,Symbol.species,{get:function(){return n},enumerable:!0,configurable:!0}),n.prototype.sort=function(e){if(this.$sorting=!0,r.prototype.sort.call(this,e),this.$changes)for(var t=0,n=Array.from(this.$changes.changes);t<n.length;t++){var o=n[t],a=this.$changes.getIndex(this[o]);void 0!==a&&this.$changes.mapIndexChange(this[o],a),this.$changes.mapIndex(this[o],o)}return this.$sorting=!1,this},n.prototype.filter=function(e,t){var n=r.prototype.filter.call(this,e);return n.$changes=this.$changes.clone(),n},n.prototype.splice=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=Array.prototype.splice.apply(this,arguments),a=Array.prototype.filter.call(this,function(r,n){return n>=e+t-1});return o.map(function(e){var t=e&&e.$changes;t&&(t.parent.deleteIndex(e),delete t.parent)}),a.forEach(function(e){var t=e&&e.$changes;t&&t.parentField--}),o},n}(Array);exports.ArraySchema=r;
},{}],"t9zB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){return function e(n){var o=this;for(var a in void 0===n&&(n={}),n)this[a]=n[a];Object.defineProperties(this,{$changes:{value:void 0,enumerable:!1,writable:!0},onAdd:{value:void 0,enumerable:!1,writable:!0},onRemove:{value:void 0,enumerable:!1,writable:!0},onChange:{value:void 0,enumerable:!1,writable:!0},clone:{value:function(n){var a;if(n)(a=Object.assign(new e,o)).onAdd=o.onAdd,a.onRemove=o.onRemove,a.onChange=o.onChange;else{var r=new e;for(var t in o)"object"==typeof o[t]?r[t]=o[t].clone():r[t]=o[t]}return a}},triggerAll:{value:function(){if(o.onAdd)for(var e in o)o.onAdd(o[e],e)}},toJSON:{value:function(){var e={};for(var n in o)e[n]="function"==typeof o[n].toJSON?o[n].toJSON():o[n];return e}},_indexes:{value:new Map,enumerable:!1,writable:!0},_updateIndexes:{value:function(e){for(var n=0,a=new Map,r=0,t=e;r<t.length;r++){var i=t[r];a.set(i,n++)}o._indexes=a}}})}}();exports.MapSchema=e;
},{}],"j5pr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Schema"),t=require("./types/ArraySchema"),n=require("./types/MapSchema"),i=function(){function i(e,t,n){void 0===e&&(e={}),void 0===t&&(t=null),this.changed=!1,this.changes=new Set,this.allChanges=new Set,this.deletedKeys={},this.fieldIndexes=e,this.parent=n,this.parentField=t}return i.prototype.change=function(e,t){void 0===t&&(t=!1);var n=this.fieldIndexes[e],i="number"==typeof n?n:e;t?t&&(this.changed=!0,this.changes.add(i),this.allChanges.delete(i)):(this.changed=!0,this.changes.add(i),this.allChanges.add(i)),this.parent&&this.parent.change(this.parentField)},i.prototype.mapIndex=function(e,t){"object"==typeof e&&(this.indexMap||(this.indexMap=new Map,this.indexChange=new Map),this.indexMap.set(e,t))},i.prototype.getIndex=function(e){return this.indexMap&&this.indexMap.get(e)},i.prototype.deleteIndex=function(e){"object"==typeof e&&(this.deletedKeys[this.indexMap.get(e)]=!0,this.indexMap.delete(e))},i.prototype.isDeleted=function(e){return void 0!==this.deletedKeys[e]},i.prototype.mapIndexChange=function(e,t){"object"!=typeof e||this.indexChange.has(e)||this.indexChange.set(e,t)},i.prototype.getIndexChange=function(e){return this.indexChange&&this.indexChange.get(e)},i.prototype.deleteIndexChange=function(e){"object"==typeof e&&this.indexChange.delete(e)},i.prototype.changeAll=function(i){if(i instanceof e.Schema){var a=i._schema;for(var h in a)(i[h]instanceof e.Schema||i[h]instanceof t.ArraySchema||i[h]instanceof n.MapSchema)&&!i[h].$changes.parent.parent&&(i[h].$changes.parent=this),void 0!==i[h]&&this.change(h)}else for(var s=0,d=Object.keys(i);s<d.length;s++){var o=d[s];void 0!==i[o]&&this.change(o)}},i.prototype.discard=function(){this.changed=!1,this.changes.clear(),this.deletedKeys={},this.indexChange&&this.indexChange.clear()},i.prototype.clone=function(){return new i(this.fieldIndexes,this.parentField,void 0)},i}();exports.ChangeTree=i;
},{"./Schema":"qSOB","./types/ArraySchema":"SELh","./types/MapSchema":"t9zB"}],"GeZp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(){this.handlers=[]}return t.prototype.register=function(t,e){return void 0===e&&(e=!1),this.handlers.push(t),this},t.prototype.invoke=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.handlers.forEach(function(e){return e.apply(void 0,t)})},t.prototype.invokeAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Promise.all(this.handlers.map(function(e){return e.apply(void 0,t)}))},t.prototype.remove=function(t){var e=this.handlers.indexOf(t);this.handlers[e]=this.handlers[this.handlers.length-1],this.handlers.pop()},t.prototype.clear=function(){this.handlers=[]},t}();exports.EventEmitter=t;
},{}],"qSOB":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./spec"),t=require("./encoding/encode"),n=require("./encoding/decode"),o=require("./types/ArraySchema"),i=require("./types/MapSchema"),s=require("./ChangeTree"),c=require("./events/EventEmitter"),a=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return e(t,r),t}(Error);function u(e,r,t,n){var o,i=!1;switch(r){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":o="number",isNaN(e)&&console.log('trying to encode "NaN" in '+t.constructor.name+"#"+n);break;case"string":o="string",i=!0;break;case"boolean":return}if(typeof e!==o&&(!i||i&&null!==e)){var s="'"+JSON.stringify(e)+"'"+(e&&e.constructor&&" ("+e.constructor.name+")");throw new a("a '"+o+"' was expected, but "+s+" was provided in "+t.constructor.name+"#"+n)}}function f(e,r,t,n){if(!(e instanceof r))throw new a("a '"+r.name+"' was expected, but '"+e.constructor.name+"' was provided in "+t.constructor.name+"#"+n)}function h(e,r,n,o,i){u(n,e,o,i);var s=t[e];if(!s)throw new a("a '"+e+"' was expected, but "+n+" was provided in "+o.constructor.name+"#"+i);s(r,n)}function d(e,r,t){return n[e](r,t)}var l=function(){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];Object.defineProperties(this,{$changes:{value:new s.ChangeTree(this._indexes),enumerable:!1,writable:!0},$listeners:{value:{},enumerable:!1,writable:!0}});var t=this._descriptors;t&&Object.defineProperties(this,t)}return e.onError=function(e){console.error(e)},Object.defineProperty(e.prototype,"_schema",{get:function(){return this.constructor._schema},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_descriptors",{get:function(){return this.constructor._descriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_indexes",{get:function(){return this.constructor._indexes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_fieldsByIndex",{get:function(){return this.constructor._fieldsByIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_filters",{get:function(){return this.constructor._filters},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_deprecated",{get:function(){return this.constructor._deprecated},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$changed",{get:function(){return this.$changes.changed},enumerable:!0,configurable:!0}),e.prototype.listen=function(e,r){var t=this;return this.$listeners[e]||(this.$listeners[e]=new c.EventEmitter),this.$listeners[e].register(r),function(){return t.$listeners[e].remove(r)}},e.prototype.decode=function(t,s){void 0===s&&(s={offset:0});var c=[],a=this._schema,u=this._fieldsByIndex,f=t.length;t[s.offset]===r.TYPE_ID&&(s.offset+=2);for(var h=function(){var f=n.nilCheck(t,s)&&++s.offset,h=t[s.offset++];if(h===r.END_OF_STRUCTURE)return"break";var p=u[h],v="_"+p,y=a[p],g=void 0,m=!1;if(!p)return"continue";if(f)g=null,m=!0;else if(y._schema)(g=l[v]||l.createTypeInstance(t,s,y)).decode(t,s),m=!0;else if(Array.isArray(y)){y=y[0];var _=l[v]||new o.ArraySchema;g=_.clone(!0);var b=n.number(t,s),E=Math.min(n.number(t,s),b),C=g.length>b;m=E>0||C;var A=!1;C&&Array.prototype.splice.call(g,b).forEach(function(r,t){if(r&&r.onRemove)try{r.onRemove()}catch(n){e.onError(n)}if(_.onRemove)try{_.onRemove(r,b+t)}catch(n){e.onError(n)}});for(var O=0;O<E;O++){var I=n.number(t,s),w=void 0;n.indexChangeCheck(t,s)&&(n.uint8(t,s),w=n.number(t,s),A=!0);var x=!A&&void 0===g[I]||A&&void 0===w;if(y.prototype instanceof e){var T=void 0;(T=x?l.createTypeInstance(t,s,y):void 0!==w?_[w]:_[I])||(T=l.createTypeInstance(t,s,y),x=!0),T.decode(t,s),g[I]=T}else g[I]=d(y,t,s);if(x){if(_.onAdd)try{_.onAdd(g[I],I)}catch(q){e.onError(q)}}else if(_.onChange)try{_.onChange(g[I],I)}catch(q){e.onError(q)}}}else if(y.map){y=y.map;var $=l[v]||new i.MapSchema;g=$.clone(!0);var N=n.number(t,s);m=N>0;A=!1;var S=Object.keys($);for(O=0;O<N&&(void 0!==t[s.offset]&&t[s.offset]!==r.END_OF_STRUCTURE);O++){var j=n.nilCheck(t,s)&&++s.offset,P=void 0;n.indexChangeCheck(t,s)&&(n.uint8(t,s),P=S[n.number(t,s)],A=!0);var R=n.numberCheck(t,s),k="string"!=typeof y,D=R?S[n.number(t,s)]:n.string(t,s);T=void 0;if(T=(x=!A&&void 0===$[D]||A&&void 0===P&&R)&&k?l.createTypeInstance(t,s,y):void 0!==P?$[P]:$[D],j){if(T&&T.onRemove)try{T.onRemove()}catch(q){e.onError(q)}if($.onRemove)try{$.onRemove(T,D)}catch(q){e.onError(q)}delete g[D]}else if(k?(T.decode(t,s),g[D]=T):g[D]=d(y,t,s),x){if($.onAdd)try{$.onAdd(g[D],D)}catch(q){e.onError(q)}}else if($.onChange)try{$.onChange(g[D],D)}catch(q){e.onError(q)}}}else m=(g=d(y,t,s))!==l[v];m&&(l.onChange||l.$listeners[p])&&c.push({field:p,value:g,previousValue:l[v]}),l[v]=g},l=this;s.offset<f;){if("break"===h())break}return this._triggerChanges(c),this},e.prototype.encode=function(e,n,s,c){var a=this;if(void 0===e&&(e=this),void 0===n&&(n=!1),void 0===c&&(c=[]),!this.$changes.changed&&!n)return this._encodeEndOfStructure(this,e,c),c;for(var u=this._schema,d=this._indexes,l=this._fieldsByIndex,p=this._filters,v=Array.from(n?this.$changes.allChanges:this.$changes.changes).sort(),y=function(y,m){var _=l[v[y]]||v[y],b="_"+_,E=u[_],C=p&&p[_],A=g[b],O=d[_];if(void 0===A)t.uint8(c,r.NIL),t.number(c,O);else if(E._schema){if(s&&C&&!C.call(g,s,A,e))return"continue";A?(t.number(c,O),f(A,E,g,_),g.tryEncodeTypeId(c,E,A.constructor),A.encode(e,n,s,c)):(t.uint8(c,r.NIL),t.number(c,O))}else if(Array.isArray(E)){var I=A.$changes;if(s&&C&&!C.call(g,s,A,e))return"continue";t.number(c,O),t.number(c,A.length);var w=Array.from(n?I.allChanges:I.changes).filter(function(e){return void 0!==a[b][e]}).sort(function(e,r){return e-r}),x=w.length;t.number(c,x);var T="string"!=typeof E[0];f(g[b],o.ArraySchema,g,_);for(var $=0;$<x;$++){var N=w[$],S=g[b][N];if(T){if(t.number(c,N),!n)void 0!==(q=I.getIndexChange(S))&&(t.uint8(c,r.INDEX_CHANGE),t.number(c,q));f(S,E[0],g,_),g.tryEncodeTypeId(c,E[0],S.constructor),S.encode(e,n,s,c)}else void 0!==S&&(t.number(c,N),h(E[0],c,S,g,_))}n||s||I.discard()}else if(E.map){I=A.$changes;if(s&&C&&!C.call(g,s,A,e))return"continue";t.number(c,O);var j=Array.from(n?I.allChanges:I.changes);t.number(c,j.length);var P=Array.from(I.allChanges);T="string"!=typeof E.map,x=j.length;f(g[b],i.MapSchema,g,_);for(var R=0;R<x;R++){var k=j[R],D=(S=g[b][k],void 0);if(n){if(void 0===S)continue}else{var q=I.getIndexChange(S);S&&void 0!==q&&(t.uint8(c,r.INDEX_CHANGE),t.number(c,g[b]._indexes.get(q))),D=I.isDeleted(k)&&S?void 0:g[b]._indexes.get(k)}var U=void 0===S;U&&t.uint8(c,r.NIL),void 0!==D?t.number(c,D):t.string(c,k),S&&T?(f(S,E.map,g,_),g.tryEncodeTypeId(c,E.map,S.constructor),S.encode(e,n,s,c)):U||h(E.map,c,S,g,_)}n||s||(I.discard(),g[b]._updateIndexes(P))}else{if(s&&C&&!C.call(g,s,A,e))return"continue";t.number(c,O),h(E,c,A,g,_)}},g=this,m=0,_=v.length;m<_;m++)y(m);return this._encodeEndOfStructure(this,e,c),n||s||this.$changes.discard(),c},e.prototype.encodeFiltered=function(e,r){return this.encode(this,!1,e,r)},e.prototype.encodeAll=function(e){return this.encode(this,!0,void 0,e)},e.prototype.encodeAllFiltered=function(e,r){return this.encode(this,!0,e,r)},e.prototype.clone=function(){var e=new this.constructor,r=this._schema;for(var t in r)"object"==typeof this[t]&&"function"==typeof this[t].clone?e[t]=this[t].clone():e[t]=this[t];return e},e.prototype.triggerAll=function(){var r=[],t=this._schema;for(var n in t)void 0!==this[n]&&r.push({field:n,value:this[n],previousValue:void 0});try{this._triggerChanges(r)}catch(o){e.onError(o)}},e.prototype.toJSON=function(){var e=this._schema,r=this._deprecated,t={};for(var n in e)r[n]||null===this[n]||void 0===this[n]||(t[n]="function"==typeof this[n].toJSON?this[n].toJSON():this["_"+n]);return t},e.prototype.discardAllChanges=function(){var r=this._schema,t=Array.from(this.$changes.changes),n=this._fieldsByIndex;for(var o in t){var i=n[o],s=r[i],c=this[i];if(void 0!==c)if(s._schema)c.discardAllChanges();else if(Array.isArray(s)){for(var a=0,u=c.length;a<u;a++){var f=c[a],h=this["_"+i][f];"string"!=typeof s[0]&&h&&h.discardAllChanges()}c.$changes.discard()}else if(s.map){var d=c,l=Object.keys(this["_"+i]);for(a=0;a<d.length;a++){var p=l[d[a]]||d[a];(h=this["_"+i][p])instanceof e&&h&&h.discardAllChanges()}c.$changes.discard()}}this.$changes.discard()},e.prototype._encodeEndOfStructure=function(e,t,n){e!==t&&n.push(r.END_OF_STRUCTURE)},e.prototype.tryEncodeTypeId=function(e,n,o){n._typeid!==o._typeid&&(t.uint8(e,r.TYPE_ID),t.uint8(e,o._typeid))},e.prototype.createTypeInstance=function(e,t,o){return e[t.offset]===r.TYPE_ID?(t.offset++,new(this.constructor._context.get(n.uint8(e,t)))):new o},e.prototype._triggerChanges=function(r){if(r.length>0){for(var t=0;t<r.length;t++){var n=r[t],o=this.$listeners[n.field];if(o)try{o.invoke(n.value,n.previousValue)}catch(i){e.onError(i)}}if(this.onChange)try{this.onChange(r)}catch(i){e.onError(i)}}},e}();exports.Schema=l;
},{"./spec":"VAwl","./encoding/encode":"mx2X","./encoding/decode":"wNJr","./types/ArraySchema":"SELh","./types/MapSchema":"t9zB","./ChangeTree":"j5pr","./events/EventEmitter":"GeZp"}],"RpYy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./"),r=require("./types/MapSchema"),a=require("./types/ArraySchema");function n(s){for(var t={},c=s.$changes,i=s._fieldsByIndex||{},o=0,h=Array.from(c.changes);o<h.length;o++){var u=h[o],f=i[u]||u;s[f]instanceof r.MapSchema||s[f]instanceof a.ArraySchema||s[f]instanceof e.Schema?t[f]=n(s[f]):t[f]=s[f]}return t}exports.dumpChanges=n;
},{"./":"xlMw","./types/MapSchema":"t9zB","./types/ArraySchema":"SELh"}],"TLSt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./ChangeTree"),n=require("./Schema"),t=function(){function e(){this.types={},this.schemas=new Map}return e.prototype.has=function(e){return this.schemas.has(e)},e.prototype.get=function(e){return this.types[e]},e.prototype.add=function(e){e._typeid=this.schemas.size,this.types[e._typeid]=e,this.schemas.set(e,e._typeid)},e}();function s(t,s){return void 0===s&&(s=exports.globalContext),function(a,r){var c=a.constructor;c._context=s,s.has(c)||(s.add(c),c._schema=Object.assign({},c._schema||{}),c._indexes=Object.assign({},c._indexes||{}),c._fieldsByIndex=Object.assign({},c._fieldsByIndex||{}),c._descriptors=Object.assign({},c._descriptors||{}),c._deprecated=Object.assign({},c._deprecated||{}));var i=Object.keys(c._schema).length;if(c._fieldsByIndex[i]=r,c._indexes[r]=i,c._schema[r]=t,!c._descriptors[r]){var h=Array.isArray(t),o=!h&&t.map,g="function"==typeof c._schema[r],d="_"+r;c._descriptors[d]={enumerable:!1,configurable:!1,writable:!0},c._descriptors[r]={get:function(){return this[d]},set:function(t){if((h||o)&&(t=new Proxy(t,{get:function(e,n){return e[n]},set:function(t,s,a){if("length"!==s&&0!==s.indexOf("$")){var r=h?Number(s):String(s);if(!t.$sorting){var c=t.$changes.getIndex(a);void 0!==c&&t.$changes.mapIndexChange(a,c),t.$changes.mapIndex(a,r)}a instanceof n.Schema?a.$changes.parent||(a.$changes=new e.ChangeTree(a._indexes,r,t.$changes),a.$changes.changeAll(a)):t[s]=a,t.$changes.change(r)}else t[s];return t[s]=a,!0},deleteProperty:function(e,n){var t=e[n];o&&void 0!==t&&(e.$changes.deleteIndex(t),e.$changes.deleteIndexChange(t),t.$changes&&delete t.$changes.parent),delete e[n];var s=h?Number(n):String(n);return e.$changes.change(s,!0),!0}})),t!==this[d])if(this[d]=t,h){this.$changes.change(r),t.$changes=new e.ChangeTree({},r,this.$changes);for(var s=0;s<t.length;s++)t[s]instanceof n.Schema&&(t[s].$changes=new e.ChangeTree(t[s]._indexes,s,t.$changes),t[s].$changes.changeAll(t[s])),t.$changes.mapIndex(t[s],s),t.$changes.change(s)}else if(o)for(var a in t.$changes=new e.ChangeTree({},r,this.$changes),this.$changes.change(r),t)t[a]instanceof n.Schema&&(t[a].$changes=new e.ChangeTree(t[a]._indexes,a,t.$changes),t[a].$changes.changeAll(t[a])),t.$changes.mapIndex(t[a],a),t.$changes.change(a);else g?(this.$changes.change(r),t&&(t.$changes=new e.ChangeTree(t._indexes,r,this.$changes),t.$changes.changeAll(t))):this.$changes.change(r)},enumerable:!0,configurable:!0}}}}function a(e){return function(n,t){var s=n.constructor;s._filters||(s._filters={}),s._filters[t]=e}}function r(e,n){return void 0===e&&(e=!0),void 0===n&&(n=exports.globalContext),function(n,t){var s=n.constructor;s._deprecated[t]=!0,e&&(s._descriptors[t]={get:function(){throw new Error(t+" is deprecated.")},set:function(e){},enumerable:!1,configurable:!0})}}function c(e,n,t){for(var a in void 0===t&&(t=exports.globalContext),n)s(n[a],t)(e.prototype,a);return e}exports.Context=t,exports.globalContext=new t,exports.type=s,exports.filter=a,exports.deprecated=r,exports.defineTypes=c;
},{"./ChangeTree":"j5pr","./Schema":"qSOB"}],"gVUL":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),t=this&&this.__decorate||function(e,t,r,n){var o,p=arguments.length,i=p<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(p<3?o(i):p>3?o(t,r,i):o(t,r))||i);return p>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./annotations"),n=require("./Schema"),o=require("./types/ArraySchema"),p=require("./types/MapSchema"),i=new r.Context,a=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return e(o,n),t([r.type("string",i)],o.prototype,"name",void 0),t([r.type("string",i)],o.prototype,"type",void 0),t([r.type("uint8",i)],o.prototype,"referencedType",void 0),o}(n.Schema);exports.ReflectionField=a;var y=function(n){function p(){var e=null!==n&&n.apply(this,arguments)||this;return e.fields=new o.ArraySchema,e}return e(p,n),t([r.type("uint8",i)],p.prototype,"id",void 0),t([r.type([a],i)],p.prototype,"fields",void 0),p}(n.Schema);exports.ReflectionType=y;var c=function(c){function f(){var e=null!==c&&c.apply(this,arguments)||this;return e.types=new o.ArraySchema,e}return e(f,c),f.encode=function(e){var t=e.constructor,r=new f;r.rootType=t._typeid;var n=function(e,t){for(var n in t){var o=new a;o.name=n;var p=void 0;if("string"==typeof t[n])p=t[n];else{var i="function"==typeof t[n],y=Array.isArray(t[n]),c=!y&&t[n].map,f=void 0;i?(p="ref",f=t[n]):y?(p="array","string"==typeof t[n][0]?p+=":"+t[n][0]:f=t[n][0]):c&&(p="map","string"==typeof t[n].map?p+=":"+t[n].map:f=t[n].map),o.referencedType=f?f._typeid:255}o.type=p,e.fields.push(o)}r.types.push(e)},o=t._context.types;for(var p in o){var i=new y;i.id=Number(p),n(i,o[p]._schema)}return r.encodeAll()},f.decode=function(t){var i=new r.Context,a=new f;a.decode(t);var y=a.types.reduce(function(t,r){return t[r.id]=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return e(r,t),r}(n.Schema),t},{});a.types.forEach(function(e,t){e.fields.forEach(function(t){var n=y[e.id];if(void 0!==t.referencedType){var o=y[t.referencedType];o||(o=t.type.split(":")[1]),0===t.type.indexOf("array")?r.type([o],i)(n.prototype,t.name):0===t.type.indexOf("map")?r.type({map:o},i)(n.prototype,t.name):"ref"===t.type&&r.type(o,i)(n.prototype,t.name)}else r.type(t.type,i)(n.prototype,t.name)})});var c=y[a.rootType],u=new c;for(var s in c._schema){var d=c._schema[s];if("string"!=typeof d){var v="function"==typeof d,l=Array.isArray(d),h=!l&&d.map;u[s]=l?new o.ArraySchema:h?new p.MapSchema:v?new d:void 0}}return u},t([r.type([y],i)],f.prototype,"types",void 0),t([r.type("uint8",i)],f.prototype,"rootType",void 0),f}(n.Schema);exports.Reflection=c;
},{"./annotations":"TLSt","./Schema":"qSOB","./types/ArraySchema":"SELh","./types/MapSchema":"t9zB"}],"xlMw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Schema");exports.Schema=e.Schema;var r=require("./types/MapSchema");exports.MapSchema=r.MapSchema;var t=require("./types/ArraySchema");exports.ArraySchema=t.ArraySchema;var p=require("./utils");exports.dumpChanges=p.dumpChanges;var a=require("./Reflection");exports.Reflection=a.Reflection,exports.ReflectionType=a.ReflectionType,exports.ReflectionField=a.ReflectionField;var o=require("./annotations");exports.type=o.type,exports.deprecated=o.deprecated,exports.filter=o.filter,exports.defineTypes=o.defineTypes,exports.Context=o.Context;
},{"./Schema":"qSOB","./types/MapSchema":"t9zB","./types/ArraySchema":"SELh","./utils":"RpYy","./Reflection":"gVUL","./annotations":"TLSt"}],"TlSr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@colyseus/schema"),e=function(){function e(){}return e.prototype.setState=function(t){this.state.decode(t)},e.prototype.getState=function(){return this.state},e.prototype.patch=function(t){this.state.decode(t)},e.prototype.teardown=function(){},e.prototype.handshake=function(e,o){this.state?(new t.Reflection).decode(e,o):this.state=t.Reflection.decode(e)},e}();exports.SchemaSerializer=e;
},{"@colyseus/schema":"xlMw"}],"gqut":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("./legacy");var e=require("./Client");exports.Client=e.Client;var r=require("./Protocol");exports.Protocol=r.Protocol;var i=require("./Room");exports.Room=i.Room;var a=require("./Auth");exports.Auth=a.Auth,exports.Platform=a.Platform;var l=require("./serializer/FossilDeltaSerializer");exports.FossilDeltaSerializer=l.FossilDeltaSerializer;var o=require("./serializer/SchemaSerializer");exports.SchemaSerializer=o.SchemaSerializer;var t=require("./serializer/Serializer");exports.registerSerializer=t.registerSerializer,t.registerSerializer("fossil-delta",l.FossilDeltaSerializer),t.registerSerializer("schema",o.SchemaSerializer);
},{"./legacy":"LgNl","./Client":"P1wo","./Protocol":"IqTf","./Room":"nDQT","./Auth":"vbIL","./serializer/FossilDeltaSerializer":"flfa","./serializer/SchemaSerializer":"TlSr","./serializer/Serializer":"R29f"}],"aOKw":[function(require,module,exports) {
"use strict";var e=l(require("@babel/runtime-corejs3/helpers/classCallCheck")),r=l(require("@babel/runtime-corejs3/helpers/possibleConstructorReturn")),t=l(require("@babel/runtime-corejs3/helpers/getPrototypeOf")),u=l(require("@babel/runtime-corejs3/helpers/inherits"));function l(e){return e&&e.__esModule?e:{default:e}}var s=require("colyseus.js"),i=s.Client,n=function(l){function s(u){return(0,e.default)(this,s),(0,r.default)(this,(0,t.default)(s).call(this,u))}return(0,u.default)(s,l),s}(i);module.exports.GameClient=n;
},{"@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@babel/runtime-corejs3/helpers/possibleConstructorReturn":"yM8b","@babel/runtime-corejs3/helpers/getPrototypeOf":"ZyuO","@babel/runtime-corejs3/helpers/inherits":"DB6z","colyseus.js":"gqut"}],"g7wj":[function(require,module,exports) {
Array.prototype.forEach||(Array.prototype.forEach=function(r){"use strict";if(null==this)throw new TypeError;var t=Object(this),o=t.length>>>0;if("function"!=typeof r)throw new TypeError;for(var e=arguments.length>=2?arguments[1]:void 0,n=0;n<o;n++)n in t&&r.call(e,t[n],n,t)});
},{}],"z9aK":[function(require,module,exports) {
Array.isArray||(Array.isArray=function(r){return"[object Array]"===Object.prototype.toString.call(r)});
},{}],"Si2v":[function(require,module,exports) {
!function(){function t(t){t&&(t.setTargetAtTime||(t.setTargetAtTime=t.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.hasOwnProperty("createPeriodicWave")||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var e=this.internal_createGain();return t(e.gain),e},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(e){var o=e?this.internal_createDelay(e):this.internal_createDelay();return t(o.delayTime),o},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var e=this.internal_createBufferSource();return e.start?(e.internal_start=e.start,e.start=function(t,o,r){void 0!==r?e.internal_start(t||0,o,r):e.internal_start(t||0,o||0)}):e.start=function(t,e,o){e||o?this.noteGrainOn(t||0,e,o):this.noteOn(t||0)},e.stop?(e.internal_stop=e.stop,e.stop=function(t){e.internal_stop(t||0)}):e.stop=function(t){this.noteOff(t||0)},t(e.playbackRate),e},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var e=this.internal_createDynamicsCompressor();return t(e.threshold),t(e.knee),t(e.ratio),t(e.reduction),t(e.attack),t(e.release),e},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var e=this.internal_createBiquadFilter();return t(e.frequency),t(e.detune),t(e.Q),t(e.gain),e},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var e=this.internal_createOscillator();return e.start?(e.internal_start=e.start,e.start=function(t){e.internal_start(t||0)}):e.start=function(t){this.noteOn(t||0)},e.stop?(e.internal_stop=e.stop,e.stop=function(t){e.internal_stop(t||0)}):e.stop=function(t){this.noteOff(t||0)},e.setPeriodicWave||(e.setPeriodicWave=e.setWaveTable),t(e.frequency),t(e.detune),e})),window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")&&(window.OfflineAudioContext=webkitOfflineAudioContext)}();
},{}],"b33R":[function(require,module,exports) {
window.console||(window.console={},window.console.log=window.console.assert=function(){},window.console.warn=window.console.assert=function(){});
},{}],"sfxt":[function(require,module,exports) {
Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)});
},{}],"wYEJ":[function(require,module,exports) {
!function(){if("performance"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==!1){var n=Date.now();performance.timing&&performance.timing.navigationStart&&(n=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-n}}}();
},{}],"fX8D":[function(require,module,exports) {
for(var n=Date.now(),e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;i++)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var i=Date.now(),o=16+n-i;return o<0&&(o=0),n=i,setTimeout(function(){n=Date.now(),e(performance.now())},o)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)});
},{}],"dYlQ":[function(require,module,exports) {
if("function"!=typeof window.Uint32Array&&"object"!=typeof window.Uint32Array){var t=function(t){var r=new Array;window[t]=function(t){if("number"==typeof t){Array.call(this,t),this.length=t;for(var r=0;r<this.length;r++)this[r]=0}else{Array.call(this,t.length),this.length=t.length;for(r=0;r<this.length;r++)this[r]=t[r]}},window[t].prototype=r,window[t].constructor=window[t]};t("Float32Array"),t("Uint32Array"),t("Uint16Array"),t("Int16Array"),t("ArrayBuffer")}
},{}],"DHzS":[function(require,module,exports) {
require("./Array.forEach"),require("./Array.isArray"),require("./AudioContextMonkeyPatch"),require("./console"),require("./Math.trunc"),require("./performance.now"),require("./requestAnimationFrame"),require("./Uint32Array");
},{"./Array.forEach":"g7wj","./Array.isArray":"z9aK","./AudioContextMonkeyPatch":"Si2v","./console":"b33R","./Math.trunc":"sfxt","./performance.now":"wYEJ","./requestAnimationFrame":"fX8D","./Uint32Array":"dYlQ"}],"XeVZ":[function(require,module,exports) {
module.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27};
},{}],"boNA":[function(require,module,exports) {
var E={DEFAULT:0,LINEAR:0,NEAREST:1};module.exports=E;
},{}],"ktri":[function(require,module,exports) {
var e={VERSION:"3.23.0",BlendModes:require("./renderer/BlendModes"),ScaleModes:require("./renderer/ScaleModes"),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};module.exports=e;
},{"./renderer/BlendModes":"XeVZ","./renderer/ScaleModes":"boNA"}],"TEos":[function(require,module,exports) {
var r=function(r){if("object"!=typeof r||r.nodeType||r===r.window)return!1;try{if(r.constructor&&!{}.hasOwnProperty.call(r.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0};module.exports=r;
},{}],"CtVZ":[function(require,module,exports) {
var r=require("./IsPlainObject"),e=function(){var i,o,a,n,t,l,f=arguments[0]||{},s=1,u=arguments.length,y=!1;for("boolean"==typeof f&&(y=f,f=arguments[1]||{},s=2),u===s&&(f=this,--s);s<u;s++)if(null!=(i=arguments[s]))for(o in i)a=f[o],f!==(n=i[o])&&(y&&n&&(r(n)||(t=Array.isArray(n)))?(t?(t=!1,l=a&&Array.isArray(a)?a:[]):l=a&&r(a)?a:{},f[o]=e(y,l,n)):void 0!==n&&(f[o]=n));return f};module.exports=e;
},{"./IsPlainObject":"TEos"}],"Jy6T":[function(require,module,exports) {
var T={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};module.exports=T;
},{}],"FGdi":[function(require,module,exports) {
var e=function(e){return e.y+e.height-e.height*e.originY};module.exports=e;
},{}],"IuOT":[function(require,module,exports) {
var i=function(i){return i.x-i.width*i.originX+.5*i.width};module.exports=i;
},{}],"jY5H":[function(require,module,exports) {
var r=function(r,i){var t=r.width*r.originX;return r.x=i+t-.5*r.width,r};module.exports=r;
},{}],"qlx8":[function(require,module,exports) {
var r=function(r,e){return r.y=e+r.height*r.originY,r};module.exports=r;
},{}],"LWyp":[function(require,module,exports) {
var e=require("../../bounds/GetBottom"),r=require("../../bounds/GetCenterX"),o=require("../../bounds/SetCenterX"),t=require("../../bounds/SetTop"),u=function(u,n,d,i){return void 0===d&&(d=0),void 0===i&&(i=0),o(u,r(n)+d),t(u,e(n)+i),u};module.exports=u;
},{"../../bounds/GetBottom":"FGdi","../../bounds/GetCenterX":"IuOT","../../bounds/SetCenterX":"jY5H","../../bounds/SetTop":"qlx8"}],"NW0e":[function(require,module,exports) {
var r=function(r){return r.x-r.width*r.originX};module.exports=r;
},{}],"Ys1q":[function(require,module,exports) {
var r=function(r,i){return r.x=i+r.width*r.originX,r};module.exports=r;
},{}],"Nwbu":[function(require,module,exports) {
var e=require("../../bounds/GetBottom"),o=require("../../bounds/GetLeft"),r=require("../../bounds/SetLeft"),t=require("../../bounds/SetTop"),u=function(u,d,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),r(u,o(d)-i),t(u,e(d)+n),u};module.exports=u;
},{"../../bounds/GetBottom":"FGdi","../../bounds/GetLeft":"NW0e","../../bounds/SetLeft":"Ys1q","../../bounds/SetTop":"qlx8"}],"F7Uw":[function(require,module,exports) {
var i=function(i){return i.x+i.width-i.width*i.originX};module.exports=i;
},{}],"QPgF":[function(require,module,exports) {
var i=function(i,r){return i.x=r-i.width+i.width*i.originX,i};module.exports=i;
},{}],"oFUH":[function(require,module,exports) {
var e=require("../../bounds/GetBottom"),o=require("../../bounds/GetRight"),r=require("../../bounds/SetRight"),t=require("../../bounds/SetTop"),u=function(u,i,d,n){return void 0===d&&(d=0),void 0===n&&(n=0),r(u,o(i)+d),t(u,e(i)+n),u};module.exports=u;
},{"../../bounds/GetBottom":"FGdi","../../bounds/GetRight":"F7Uw","../../bounds/SetRight":"QPgF","../../bounds/SetTop":"qlx8"}],"FthI":[function(require,module,exports) {
var e=function(e,i){return e.y=i-e.height+e.height*e.originY,e};module.exports=e;
},{}],"HU1U":[function(require,module,exports) {
var e=require("../../bounds/GetBottom"),o=require("../../bounds/GetLeft"),t=require("../../bounds/SetBottom"),r=require("../../bounds/SetRight"),u=function(u,i,d,n){return void 0===d&&(d=0),void 0===n&&(n=0),r(u,o(i)-d),t(u,e(i)+n),u};module.exports=u;
},{"../../bounds/GetBottom":"FGdi","../../bounds/GetLeft":"NW0e","../../bounds/SetBottom":"FthI","../../bounds/SetRight":"QPgF"}],"VcLV":[function(require,module,exports) {
var e=function(e){return e.y-e.height*e.originY+.5*e.height};module.exports=e;
},{}],"XUZj":[function(require,module,exports) {
var r=function(r,e){var i=r.height*r.originY;return r.y=e+i-.5*r.height,r};module.exports=r;
},{}],"Mmja":[function(require,module,exports) {
var e=require("../../bounds/GetCenterY"),r=require("../../bounds/GetLeft"),t=require("../../bounds/SetCenterY"),u=require("../../bounds/SetRight"),n=function(n,o,i,d){return void 0===i&&(i=0),void 0===d&&(d=0),u(n,r(o)-i),t(n,e(o)+d),n};module.exports=n;
},{"../../bounds/GetCenterY":"VcLV","../../bounds/GetLeft":"NW0e","../../bounds/SetCenterY":"XUZj","../../bounds/SetRight":"QPgF"}],"jIkc":[function(require,module,exports) {
var r=function(r){return r.y-r.height*r.originY};module.exports=r;
},{}],"S6kS":[function(require,module,exports) {
var e=require("../../bounds/GetLeft"),r=require("../../bounds/GetTop"),o=require("../../bounds/SetRight"),u=require("../../bounds/SetTop"),t=function(t,i,d,n){return void 0===d&&(d=0),void 0===n&&(n=0),o(t,e(i)-d),u(t,r(i)-n),t};module.exports=t;
},{"../../bounds/GetLeft":"NW0e","../../bounds/GetTop":"jIkc","../../bounds/SetRight":"QPgF","../../bounds/SetTop":"qlx8"}],"lPmb":[function(require,module,exports) {
var e=require("../../bounds/GetBottom"),o=require("../../bounds/GetRight"),t=require("../../bounds/SetBottom"),r=require("../../bounds/SetLeft"),u=function(u,i,d,n){return void 0===d&&(d=0),void 0===n&&(n=0),r(u,o(i)+d),t(u,e(i)+n),u};module.exports=u;
},{"../../bounds/GetBottom":"FGdi","../../bounds/GetRight":"F7Uw","../../bounds/SetBottom":"FthI","../../bounds/SetLeft":"Ys1q"}],"j7N9":[function(require,module,exports) {
var e=require("../../bounds/GetCenterY"),r=require("../../bounds/GetRight"),t=require("../../bounds/SetCenterY"),u=require("../../bounds/SetLeft"),n=function(n,o,i,d){return void 0===i&&(i=0),void 0===d&&(d=0),u(n,r(o)+i),t(n,e(o)+d),n};module.exports=n;
},{"../../bounds/GetCenterY":"VcLV","../../bounds/GetRight":"F7Uw","../../bounds/SetCenterY":"XUZj","../../bounds/SetLeft":"Ys1q"}],"IFT7":[function(require,module,exports) {
var e=require("../../bounds/GetRight"),r=require("../../bounds/GetTop"),o=require("../../bounds/SetLeft"),u=require("../../bounds/SetTop"),t=function(t,i,d,n){return void 0===d&&(d=0),void 0===n&&(n=0),o(t,e(i)+d),u(t,r(i)-n),t};module.exports=t;
},{"../../bounds/GetRight":"F7Uw","../../bounds/GetTop":"jIkc","../../bounds/SetLeft":"Ys1q","../../bounds/SetTop":"qlx8"}],"kvAk":[function(require,module,exports) {
var e=require("../../bounds/GetCenterX"),r=require("../../bounds/GetTop"),o=require("../../bounds/SetBottom"),t=require("../../bounds/SetCenterX"),u=function(u,n,d,i){return void 0===d&&(d=0),void 0===i&&(i=0),t(u,e(n)+d),o(u,r(n)-i),u};module.exports=u;
},{"../../bounds/GetCenterX":"IuOT","../../bounds/GetTop":"jIkc","../../bounds/SetBottom":"FthI","../../bounds/SetCenterX":"jY5H"}],"gnir":[function(require,module,exports) {
var e=require("../../bounds/GetLeft"),o=require("../../bounds/GetTop"),r=require("../../bounds/SetBottom"),t=require("../../bounds/SetLeft"),u=function(u,d,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),t(u,e(d)-i),r(u,o(d)-n),u};module.exports=u;
},{"../../bounds/GetLeft":"NW0e","../../bounds/GetTop":"jIkc","../../bounds/SetBottom":"FthI","../../bounds/SetLeft":"Ys1q"}],"CCBj":[function(require,module,exports) {
var e=require("../../bounds/GetRight"),o=require("../../bounds/GetTop"),r=require("../../bounds/SetBottom"),t=require("../../bounds/SetRight"),u=function(u,i,d,n){return void 0===d&&(d=0),void 0===n&&(n=0),t(u,e(i)+d),r(u,o(i)-n),u};module.exports=u;
},{"../../bounds/GetRight":"F7Uw","../../bounds/GetTop":"jIkc","../../bounds/SetBottom":"FthI","../../bounds/SetRight":"QPgF"}],"GWdF":[function(require,module,exports) {
var e=require("../const"),r=[];r[e.BOTTOM_CENTER]=require("./BottomCenter"),r[e.BOTTOM_LEFT]=require("./BottomLeft"),r[e.BOTTOM_RIGHT]=require("./BottomRight"),r[e.LEFT_BOTTOM]=require("./LeftBottom"),r[e.LEFT_CENTER]=require("./LeftCenter"),r[e.LEFT_TOP]=require("./LeftTop"),r[e.RIGHT_BOTTOM]=require("./RightBottom"),r[e.RIGHT_CENTER]=require("./RightCenter"),r[e.RIGHT_TOP]=require("./RightTop"),r[e.TOP_CENTER]=require("./TopCenter"),r[e.TOP_LEFT]=require("./TopLeft"),r[e.TOP_RIGHT]=require("./TopRight");var T=function(e,T,t,i,o){return r[t](e,T,i,o)};module.exports=T;
},{"../const":"Jy6T","./BottomCenter":"LWyp","./BottomLeft":"Nwbu","./BottomRight":"oFUH","./LeftBottom":"HU1U","./LeftCenter":"Mmja","./LeftTop":"S6kS","./RightBottom":"lPmb","./RightCenter":"j7N9","./RightTop":"IFT7","./TopCenter":"kvAk","./TopLeft":"gnir","./TopRight":"CCBj"}],"ZUZH":[function(require,module,exports) {
var r=require("../display/align/to/QuickSet"),e=function(e,t,a,i){for(var n=e[0],o=1;o<e.length;o++){var u=e[o];r(u,n,t,a,i),n=u}return e};module.exports=e;
},{"../display/align/to/QuickSet":"GWdF"}],"TgJ2":[function(require,module,exports) {
var o=function(o,r,e,v,i,d){var f;void 0===v&&(v=0),void 0===i&&(i=0),void 0===d&&(d=1);var n=0,t=o.length;if(1===d)for(f=i;f<t;f++)o[f][r]+=e+n*v,n++;else for(f=i;f>=0;f--)o[f][r]+=e+n*v,n++;return o};module.exports=o;
},{}],"kj0l":[function(require,module,exports) {
var e=require("./PropertyValueInc"),r=function(r,n,u,o,t){return e(r,"angle",n,u,o,t)};module.exports=r;
},{"./PropertyValueInc":"TgJ2"}],"kehH":[function(require,module,exports) {
var r=function(r,a,e){for(var l=0;l<r.length;l++){var n=r[l];a.call(e,n)}return r};module.exports=r;
},{}],"FulG":[function(require,module,exports) {
var r=function(r,n,o){void 0===o&&(o=0);for(var e=o;e<r.length;e++){var t=r[e],u=!0;for(var v in n)t[v]!==n[v]&&(u=!1);if(u)return t}return null};module.exports=r;
},{}],"HgQP":[function(require,module,exports) {
var e=require("../../bounds/GetBottom"),r=require("../../bounds/GetCenterX"),o=require("../../bounds/SetBottom"),t=require("../../bounds/SetCenterX"),u=function(u,n,d,i){return void 0===d&&(d=0),void 0===i&&(i=0),t(u,r(n)+d),o(u,e(n)+i),u};module.exports=u;
},{"../../bounds/GetBottom":"FGdi","../../bounds/GetCenterX":"IuOT","../../bounds/SetBottom":"FthI","../../bounds/SetCenterX":"jY5H"}],"RJus":[function(require,module,exports) {
var e=require("../../bounds/GetBottom"),o=require("../../bounds/GetLeft"),t=require("../../bounds/SetBottom"),r=require("../../bounds/SetLeft"),u=function(u,d,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),r(u,o(d)-i),t(u,e(d)+n),u};module.exports=u;
},{"../../bounds/GetBottom":"FGdi","../../bounds/GetLeft":"NW0e","../../bounds/SetBottom":"FthI","../../bounds/SetLeft":"Ys1q"}],"hhaK":[function(require,module,exports) {
var e=require("../../bounds/GetBottom"),o=require("../../bounds/GetRight"),t=require("../../bounds/SetBottom"),r=require("../../bounds/SetRight"),u=function(u,i,d,n){return void 0===d&&(d=0),void 0===n&&(n=0),r(u,o(i)+d),t(u,e(i)+n),u};module.exports=u;
},{"../../bounds/GetBottom":"FGdi","../../bounds/GetRight":"F7Uw","../../bounds/SetBottom":"FthI","../../bounds/SetRight":"QPgF"}],"FtR9":[function(require,module,exports) {
var e=require("./SetCenterX"),r=require("./SetCenterY"),t=function(t,n,u){return e(t,n),r(t,u)};module.exports=t;
},{"./SetCenterX":"jY5H","./SetCenterY":"XUZj"}],"xyeH":[function(require,module,exports) {
var e=require("../../bounds/CenterOn"),r=require("../../bounds/GetCenterX"),n=require("../../bounds/GetCenterY"),u=function(u,o,t,d){return void 0===t&&(t=0),void 0===d&&(d=0),e(u,r(o)+t,n(o)+d),u};module.exports=u;
},{"../../bounds/CenterOn":"FtR9","../../bounds/GetCenterX":"IuOT","../../bounds/GetCenterY":"VcLV"}],"twuZ":[function(require,module,exports) {
var e=require("../../bounds/GetCenterY"),r=require("../../bounds/GetLeft"),t=require("../../bounds/SetCenterY"),u=require("../../bounds/SetLeft"),n=function(n,o,d,i){return void 0===d&&(d=0),void 0===i&&(i=0),u(n,r(o)-d),t(n,e(o)+i),n};module.exports=n;
},{"../../bounds/GetCenterY":"VcLV","../../bounds/GetLeft":"NW0e","../../bounds/SetCenterY":"XUZj","../../bounds/SetLeft":"Ys1q"}],"NlZS":[function(require,module,exports) {
var e=require("../../bounds/GetCenterY"),r=require("../../bounds/GetRight"),t=require("../../bounds/SetCenterY"),u=require("../../bounds/SetRight"),i=function(i,n,o,d){return void 0===o&&(o=0),void 0===d&&(d=0),u(i,r(n)+o),t(i,e(n)+d),i};module.exports=i;
},{"../../bounds/GetCenterY":"VcLV","../../bounds/GetRight":"F7Uw","../../bounds/SetCenterY":"XUZj","../../bounds/SetRight":"QPgF"}],"gQDa":[function(require,module,exports) {
var e=require("../../bounds/GetCenterX"),r=require("../../bounds/GetTop"),o=require("../../bounds/SetCenterX"),u=require("../../bounds/SetTop"),n=function(n,t,d,i){return void 0===d&&(d=0),void 0===i&&(i=0),o(n,e(t)+d),u(n,r(t)-i),n};module.exports=n;
},{"../../bounds/GetCenterX":"IuOT","../../bounds/GetTop":"jIkc","../../bounds/SetCenterX":"jY5H","../../bounds/SetTop":"qlx8"}],"rlVy":[function(require,module,exports) {
var e=require("../../bounds/GetLeft"),r=require("../../bounds/GetTop"),o=require("../../bounds/SetLeft"),u=require("../../bounds/SetTop"),t=function(t,d,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),o(t,e(d)-i),u(t,r(d)-n),t};module.exports=t;
},{"../../bounds/GetLeft":"NW0e","../../bounds/GetTop":"jIkc","../../bounds/SetLeft":"Ys1q","../../bounds/SetTop":"qlx8"}],"SCyS":[function(require,module,exports) {
var e=require("../../bounds/GetRight"),r=require("../../bounds/GetTop"),o=require("../../bounds/SetRight"),u=require("../../bounds/SetTop"),i=function(i,t,d,n){return void 0===d&&(d=0),void 0===n&&(n=0),o(i,e(t)+d),u(i,r(t)-n),i};module.exports=i;
},{"../../bounds/GetRight":"F7Uw","../../bounds/GetTop":"jIkc","../../bounds/SetRight":"QPgF","../../bounds/SetTop":"qlx8"}],"af6z":[function(require,module,exports) {
var T=require("../const"),e=[];e[T.BOTTOM_CENTER]=require("./BottomCenter"),e[T.BOTTOM_LEFT]=require("./BottomLeft"),e[T.BOTTOM_RIGHT]=require("./BottomRight"),e[T.CENTER]=require("./Center"),e[T.LEFT_CENTER]=require("./LeftCenter"),e[T.RIGHT_CENTER]=require("./RightCenter"),e[T.TOP_CENTER]=require("./TopCenter"),e[T.TOP_LEFT]=require("./TopLeft"),e[T.TOP_RIGHT]=require("./TopRight"),e[T.LEFT_BOTTOM]=e[T.BOTTOM_LEFT],e[T.LEFT_TOP]=e[T.TOP_LEFT],e[T.RIGHT_BOTTOM]=e[T.BOTTOM_RIGHT],e[T.RIGHT_TOP]=e[T.TOP_RIGHT];var r=function(T,r,t,O,E){return e[t](T,r,O,E)};module.exports=r;
},{"../const":"Jy6T","./BottomCenter":"HgQP","./BottomLeft":"RJus","./BottomRight":"hhaK","./Center":"xyeH","./LeftCenter":"twuZ","./RightCenter":"NlZS","./TopCenter":"gQDa","./TopLeft":"rlVy","./TopRight":"SCyS"}],"xbYy":[function(require,module,exports) {
var r=function(r,e,n){var o=typeof r;return r&&"number"!==o&&"string"!==o&&r.hasOwnProperty(e)&&void 0!==r[e]?r[e]:n};module.exports=r;
},{}],"vnTW":[function(require,module,exports) {
var o=function(){};module.exports=o;
},{}],"Q4x4":[function(require,module,exports) {
function e(e){return!!e.get&&"function"==typeof e.get||!!e.set&&"function"==typeof e.set}function t(t,n,i){var r=i?t[n]:Object.getOwnPropertyDescriptor(t,n);return!i&&r.value&&"object"==typeof r.value&&(r=r.value),!(!r||!e(r))&&(void 0===r.enumerable&&(r.enumerable=!0),void 0===r.configurable&&(r.configurable=!0),r)}function n(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!!n&&(n.value&&"object"==typeof n.value&&(n=n.value),!1===n.configurable)}function i(e,i,r,a){for(var u in i)if(i.hasOwnProperty(u)){var p=t(i,u,r);if(!1!==p){if(n((a||e).prototype,u)){if(o.ignoreFinals)continue;throw new Error("cannot override final property '"+u+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(e.prototype,u,p)}else e.prototype[u]=i[u]}}function r(e,t){if(t){Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++)i(e,t[n].prototype||t[n])}}function o(e){var t,n;if(e||(e={}),e.initialize){if("function"!=typeof e.initialize)throw new Error("initialize must be a function");t=e.initialize,delete e.initialize}else if(e.Extends){var o=e.Extends;t=function(){o.apply(this,arguments)}}else t=function(){};e.Extends?(t.prototype=Object.create(e.Extends.prototype),t.prototype.constructor=t,n=e.Extends,delete e.Extends):t.prototype.constructor=t;var a=null;return e.Mixins&&(a=e.Mixins,delete e.Mixins),r(t,a),i(t,e,!0,n),t}o.extend=i,o.mixin=r,o.ignoreFinals=!1,module.exports=o;
},{}],"YD4D":[function(require,module,exports) {
var r=function(r,t,o){return r.radius>0&&t>=r.left&&t<=r.right&&o>=r.top&&o<=r.bottom&&(r.x-t)*(r.x-t)+(r.y-o)*(r.y-o)<=r.radius*r.radius};module.exports=r;
},{}],"wRsF":[function(require,module,exports) {
var E={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};module.exports=E;
},{}],"tZ6A":[function(require,module,exports) {
var i=require("../../utils/Class"),t=require("../const"),s=new i({initialize:function(i,s){void 0===i&&(i=0),void 0===s&&(s=i),this.type=t.POINT,this.x=i,this.y=s},setTo:function(i,t){return void 0===i&&(i=0),void 0===t&&(t=i),this.x=i,this.y=t,this}});module.exports=s;
},{"../../utils/Class":"Q4x4","../const":"wRsF"}],"mMwO":[function(require,module,exports) {
var i=require("../point/Point"),r=function(r,n,o){return void 0===o&&(o=new i),o.x=r.x+r.radius*Math.cos(n),o.y=r.y+r.radius*Math.sin(n),o};module.exports=r;
},{"../point/Point":"tZ6A"}],"dPkx":[function(require,module,exports) {
var t=function(t,a,n){return Math.max(a,Math.min(n,t))};module.exports=t;
},{}],"oreP":[function(require,module,exports) {
var r=require("./Clamp"),e=function(e,u,n){return(n-u)*(e=r(e,0,1))};module.exports=e;
},{"./Clamp":"dPkx"}],"TJqb":[function(require,module,exports) {
var E={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};module.exports=E;
},{}],"Wz4J":[function(require,module,exports) {
var e=require("./CircumferencePoint"),r=require("../../math/FromPercent"),i=require("../../math/const"),n=require("../point/Point"),t=function(t,o,u){void 0===u&&(u=new n);var c=r(o,0,i.PI2);return e(t,c,u)};module.exports=t;
},{"./CircumferencePoint":"mMwO","../../math/FromPercent":"oreP","../../math/const":"TJqb","../point/Point":"tZ6A"}],"KrH4":[function(require,module,exports) {
var r=function(r){return Math.PI*r.radius*2};module.exports=r;
},{}],"Cv5E":[function(require,module,exports) {
var r=require("./Circumference"),e=require("./CircumferencePoint"),u=require("../../math/FromPercent"),i=require("../../math/const"),n=function(n,o,t,c){void 0===c&&(c=[]),!o&&t>0&&(o=r(n)/t);for(var m=0;m<o;m++){var a=u(m/o,0,i.PI2);c.push(e(n,a))}return c};module.exports=n;
},{"./Circumference":"KrH4","./CircumferencePoint":"mMwO","../../math/FromPercent":"oreP","../../math/const":"TJqb"}],"LFnE":[function(require,module,exports) {
var a=require("../point/Point"),r=function(r,t){void 0===t&&(t=new a);var n=2*Math.PI*Math.random(),o=Math.random()+Math.random(),i=o>1?2-o:o,d=i*Math.cos(n),e=i*Math.sin(n);return t.x=r.x+d*r.radius,t.y=r.y+e*r.radius,t};module.exports=r;
},{"../point/Point":"tZ6A"}],"b8pw":[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("./Contains"),s=require("./GetPoint"),n=require("./GetPoints"),e=require("../const"),r=require("./Random"),u=new t({initialize:function(t,i,s){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),this.type=e.CIRCLE,this.x=t,this.y=i,this._radius=s,this._diameter=2*s},contains:function(t,s){return i(this,t,s)},getPoint:function(t,i){return s(this,t,i)},getPoints:function(t,i,s){return n(this,t,i,s)},getRandomPoint:function(t){return r(this,t)},setTo:function(t,i,s){return this.x=t,this.y=i,this._radius=s,this._diameter=2*s,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this._diameter=2*t}},diameter:{get:function(){return this._diameter},set:function(t){this._diameter=t,this._radius=.5*t}},left:{get:function(){return this.x-this._radius},set:function(t){this.x=t+this._radius}},right:{get:function(){return this.x+this._radius},set:function(t){this.x=t-this._radius}},top:{get:function(){return this.y-this._radius},set:function(t){this.y=t+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(t){this.y=t-this._radius}}});module.exports=u;
},{"../../utils/Class":"Q4x4","./Contains":"YD4D","./GetPoint":"Wz4J","./GetPoints":"Cv5E","../const":"wRsF","./Random":"LFnE"}],"fWy2":[function(require,module,exports) {
var a=require("../../math/Clamp"),t=2,h={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,h,i,l){return void 0===t&&(t=1),void 0===h?this.alpha=t:(this._alphaTL=a(t,0,1),this._alphaTR=a(h,0,1),this._alphaBL=a(i,0,1),this._alphaBR=a(l,0,1)),this},alpha:{get:function(){return this._alpha},set:function(h){var i=a(h,0,1);this._alpha=i,this._alphaTL=i,this._alphaTR=i,this._alphaBL=i,this._alphaBR=i,0===i?this.renderFlags&=~t:this.renderFlags|=t}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(h){var i=a(h,0,1);this._alphaTL=i,0!==i&&(this.renderFlags|=t)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(h){var i=a(h,0,1);this._alphaTR=i,0!==i&&(this.renderFlags|=t)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(h){var i=a(h,0,1);this._alphaBL=i,0!==i&&(this.renderFlags|=t)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(h){var i=a(h,0,1);this._alphaBR=i,0!==i&&(this.renderFlags|=t)}}};module.exports=h;
},{"../../math/Clamp":"dPkx"}],"QPBl":[function(require,module,exports) {
var a=require("../../math/Clamp"),t=2,e={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a){return void 0===a&&(a=1),this.alpha=a,this},alpha:{get:function(){return this._alpha},set:function(e){var h=a(e,0,1);this._alpha=h,0===h?this.renderFlags&=~t:this.renderFlags|=t}}};module.exports=e;
},{"../../math/Clamp":"dPkx"}],"Clm3":[function(require,module,exports) {
"use strict";var e=Object.prototype.hasOwnProperty,t="~";function n(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,n,o,s,i){if("function"!=typeof o)throw new TypeError("The listener must be a function");var c=new r(o,s||e,i),f=t?t+n:n;return e._events[f]?e._events[f].fn?e._events[f]=[e._events[f],c]:e._events[f].push(c):(e._events[f]=c,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function i(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(t=!1)),i.prototype.eventNames=function(){var n,r,o=[];if(0===this._eventsCount)return o;for(r in n=this._events)e.call(n,r)&&o.push(t?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(n)):o},i.prototype.listeners=function(e){var n=t?t+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},i.prototype.listenerCount=function(e){var n=t?t+e:e,r=this._events[n];return r?r.fn?1:r.length:0},i.prototype.emit=function(e,n,r,o,s,i){var c=t?t+e:e;if(!this._events[c])return!1;var f,u,a=this._events[c],l=arguments.length;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,o),!0;case 5:return a.fn.call(a.context,n,r,o,s),!0;case 6:return a.fn.call(a.context,n,r,o,s,i),!0}for(u=1,f=new Array(l-1);u<l;u++)f[u-1]=arguments[u];a.fn.apply(a.context,f)}else{var v,h=a.length;for(u=0;u<h;u++)switch(a[u].once&&this.removeListener(e,a[u].fn,void 0,!0),l){case 1:a[u].fn.call(a[u].context);break;case 2:a[u].fn.call(a[u].context,n);break;case 3:a[u].fn.call(a[u].context,n,r);break;case 4:a[u].fn.call(a[u].context,n,r,o);break;default:if(!f)for(v=1,f=new Array(l-1);v<l;v++)f[v-1]=arguments[v];a[u].fn.apply(a[u].context,f)}}return!0},i.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},i.prototype.removeListener=function(e,n,r,o){var i=t?t+e:e;if(!this._events[i])return this;if(!n)return s(this,i),this;var c=this._events[i];if(c.fn)c.fn!==n||o&&!c.once||r&&c.context!==r||s(this,i);else{for(var f=0,u=[],a=c.length;f<a;f++)(c[f].fn!==n||o&&!c[f].once||r&&c[f].context!==r)&&u.push(c[f]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},i.prototype.removeAllListeners=function(e){var r;return e?(r=t?t+e:e,this._events[r]&&s(this,r)):(this._events=new n,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=t,i.EventEmitter=i,"undefined"!=typeof module&&(module.exports=i);
},{}],"S3Vj":[function(require,module,exports) {
module.exports="add";
},{}],"RxkH":[function(require,module,exports) {
module.exports="complete";
},{}],"fvwy":[function(require,module,exports) {
module.exports="repeat";
},{}],"Tz2h":[function(require,module,exports) {
module.exports="restart";
},{}],"jUZf":[function(require,module,exports) {
module.exports="start";
},{}],"e12V":[function(require,module,exports) {
module.exports="pauseall";
},{}],"fEBO":[function(require,module,exports) {
module.exports="remove";
},{}],"gfcE":[function(require,module,exports) {
module.exports="resumeall";
},{}],"IJ1s":[function(require,module,exports) {
module.exports="animationcomplete";
},{}],"KHJV":[function(require,module,exports) {
module.exports="animationcomplete-";
},{}],"qacI":[function(require,module,exports) {
module.exports="animationrepeat-";
},{}],"Anwy":[function(require,module,exports) {
module.exports="animationrestart-";
},{}],"gxW4":[function(require,module,exports) {
module.exports="animationstart-";
},{}],"O8RE":[function(require,module,exports) {
module.exports="animationupdate-";
},{}],"L14d":[function(require,module,exports) {
module.exports="animationrepeat";
},{}],"UAzV":[function(require,module,exports) {
module.exports="animationrestart";
},{}],"e9Q5":[function(require,module,exports) {
module.exports="animationstart";
},{}],"BgVG":[function(require,module,exports) {
module.exports="animationupdate";
},{}],"bW0C":[function(require,module,exports) {
module.exports={ADD_ANIMATION:require("./ADD_ANIMATION_EVENT"),ANIMATION_COMPLETE:require("./ANIMATION_COMPLETE_EVENT"),ANIMATION_REPEAT:require("./ANIMATION_REPEAT_EVENT"),ANIMATION_RESTART:require("./ANIMATION_RESTART_EVENT"),ANIMATION_START:require("./ANIMATION_START_EVENT"),PAUSE_ALL:require("./PAUSE_ALL_EVENT"),REMOVE_ANIMATION:require("./REMOVE_ANIMATION_EVENT"),RESUME_ALL:require("./RESUME_ALL_EVENT"),SPRITE_ANIMATION_COMPLETE:require("./SPRITE_ANIMATION_COMPLETE_EVENT"),SPRITE_ANIMATION_KEY_COMPLETE:require("./SPRITE_ANIMATION_KEY_COMPLETE_EVENT"),SPRITE_ANIMATION_KEY_REPEAT:require("./SPRITE_ANIMATION_KEY_REPEAT_EVENT"),SPRITE_ANIMATION_KEY_RESTART:require("./SPRITE_ANIMATION_KEY_RESTART_EVENT"),SPRITE_ANIMATION_KEY_START:require("./SPRITE_ANIMATION_KEY_START_EVENT"),SPRITE_ANIMATION_KEY_UPDATE:require("./SPRITE_ANIMATION_KEY_UPDATE_EVENT"),SPRITE_ANIMATION_REPEAT:require("./SPRITE_ANIMATION_REPEAT_EVENT"),SPRITE_ANIMATION_RESTART:require("./SPRITE_ANIMATION_RESTART_EVENT"),SPRITE_ANIMATION_START:require("./SPRITE_ANIMATION_START_EVENT"),SPRITE_ANIMATION_UPDATE:require("./SPRITE_ANIMATION_UPDATE_EVENT")};
},{"./ADD_ANIMATION_EVENT":"S3Vj","./ANIMATION_COMPLETE_EVENT":"RxkH","./ANIMATION_REPEAT_EVENT":"fvwy","./ANIMATION_RESTART_EVENT":"Tz2h","./ANIMATION_START_EVENT":"jUZf","./PAUSE_ALL_EVENT":"e12V","./REMOVE_ANIMATION_EVENT":"fEBO","./RESUME_ALL_EVENT":"gfcE","./SPRITE_ANIMATION_COMPLETE_EVENT":"IJ1s","./SPRITE_ANIMATION_KEY_COMPLETE_EVENT":"KHJV","./SPRITE_ANIMATION_KEY_REPEAT_EVENT":"qacI","./SPRITE_ANIMATION_KEY_RESTART_EVENT":"Anwy","./SPRITE_ANIMATION_KEY_START_EVENT":"gxW4","./SPRITE_ANIMATION_KEY_UPDATE_EVENT":"O8RE","./SPRITE_ANIMATION_REPEAT_EVENT":"L14d","./SPRITE_ANIMATION_RESTART_EVENT":"UAzV","./SPRITE_ANIMATION_START_EVENT":"e9Q5","./SPRITE_ANIMATION_UPDATE_EVENT":"BgVG"}],"AbTG":[function(require,module,exports) {
var r=function(r,e,n){if(!e.length)return NaN;if(1===e.length)return e[0];var t,f,l=1;if(n){if(r<e[0][n])return e[0];for(;e[l][n]<r;)l++}else for(;e[l]<r;)l++;return l>e.length&&(l=e.length),n?(t=e[l-1][n],(f=e[l][n])-r<=r-t?e[l]:e[l-1]):(t=e[l-1],(f=e[l])-r<=r-t?f:t)};module.exports=r;
},{}],"p0nD":[function(require,module,exports) {
var t=require("../utils/Class"),i=new t({initialize:function(t,i,e,r){this.textureKey=t,this.textureFrame=i,this.index=e,this.frame=r,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration}},destroy:function(){this.frame=void 0}});module.exports=i;
},{"../utils/Class":"Q4x4"}],"FWyS":[function(require,module,exports) {
var r=function(r,e,n){if(r&&"number"!=typeof r){if(r.hasOwnProperty(e))return r[e];if(-1!==e.indexOf(".")){for(var t=e.split("."),f=r,i=n,o=0;o<t.length;o++){if(!f.hasOwnProperty(t[o])){i=n;break}i=f[t[o]],f=f[t[o]]}return i}return n}return n};module.exports=r;
},{}],"QlCu":[function(require,module,exports) {
var e=require("../math/Clamp"),t=require("../utils/Class"),r=require("eventemitter3"),a=require("./events"),i=require("../utils/array/FindClosestInSorted"),s=require("./AnimationFrame"),n=require("../utils/object/GetValue"),m=new t({Extends:r,initialize:function(e,t,i){r.call(this),this.manager=e,this.key=t,this.type="frame",this.frames=this.getFrames(e.textureManager,n(i,"frames",[]),n(i,"defaultTextureKey",null)),this.frameRate=n(i,"frameRate",null),this.duration=n(i,"duration",null),null===this.duration&&null===this.frameRate?(this.frameRate=24,this.duration=this.frameRate/this.frames.length*1e3):this.duration&&null===this.frameRate?this.frameRate=this.frames.length/(this.duration/1e3):this.duration=this.frames.length/this.frameRate*1e3,this.msPerFrame=1e3/this.frameRate,this.skipMissedFrames=n(i,"skipMissedFrames",!0),this.delay=n(i,"delay",0),this.repeat=n(i,"repeat",0),this.repeatDelay=n(i,"repeatDelay",0),this.yoyo=n(i,"yoyo",!1),this.showOnStart=n(i,"showOnStart",!1),this.hideOnComplete=n(i,"hideOnComplete",!1),this.paused=!1,this.manager.on(a.PAUSE_ALL,this.pause,this),this.manager.on(a.RESUME_ALL,this.resume,this)},addFrame:function(e){return this.addFrameAt(this.frames.length,e)},addFrameAt:function(e,t){var r=this.getFrames(this.manager.textureManager,t);if(r.length>0){if(0===e)this.frames=r.concat(this.frames);else if(e===this.frames.length)this.frames=this.frames.concat(r);else{var a=this.frames.slice(0,e),i=this.frames.slice(e);this.frames=a.concat(r,i)}this.updateFrameSequence()}return this},checkFrame:function(e){return e>=0&&e<this.frames.length},completeAnimation:function(e){this.hideOnComplete&&(e.parent.visible=!1),e.stop()},getFirstTick:function(e,t){void 0===t&&(t=!0),e.accumulator=0,e.nextTick=e.msPerFrame+e.currentFrame.duration,t&&(e.nextTick+=e._delay)},getFrameAt:function(e){return this.frames[e]},getFrames:function(e,t,r){var a,i,m,h,o=[],u=1;if("string"==typeof t){h=t;var f=e.get(h).getFrameNames();t=[],f.forEach(function(e,r){t.push({key:h,frame:r})})}if(!Array.isArray(t)||0===t.length)return o;for(m=0;m<t.length;m++){var p=t[m],l=n(p,"key",r);if(l){var d=n(p,"frame",0),c=e.getFrame(l,d);(i=new s(l,d,u,c)).duration=n(p,"duration",0),i.isFirst=!a,a&&(a.nextFrame=i,i.prevFrame=a),o.push(i),a=i,u++}}if(o.length>0){i.isLast=!0,i.nextFrame=o[0],o[0].prevFrame=i;var F=1/(o.length-1);for(m=0;m<o.length;m++)o[m].progress=m*F}return o},getNextTick:function(e){e.accumulator-=e.nextTick,e.nextTick=e.msPerFrame+e.currentFrame.duration},load:function(e,t){t>=this.frames.length&&(t=0),e.currentAnim!==this&&(e.currentAnim=this,e.frameRate=this.frameRate,e.duration=this.duration,e.msPerFrame=this.msPerFrame,e.skipMissedFrames=this.skipMissedFrames,e._delay=this.delay,e._repeat=this.repeat,e._repeatDelay=this.repeatDelay,e._yoyo=this.yoyo);var r=this.frames[t];0!==t||e.forward||(r=this.getLastFrame()),e.updateFrame(r)},getFrameByProgress:function(t){return t=e(t,0,1),i(t,this.frames,"progress")},nextFrame:function(e){var t=e.currentFrame;t.isLast?e._yoyo?this.handleYoyoFrame(e,!1):e.repeatCounter>0?e._reverse&&e.forward?e.forward=!1:this.repeatAnimation(e):this.completeAnimation(e):this.updateAndGetNextTick(e,t.nextFrame)},handleYoyoFrame:function(e,t){if(t||(t=!1),e._reverse===!t&&e.repeatCounter>0)return e._repeatDelay&&!e.pendingRepeat||(e.forward=t),void this.repeatAnimation(e);if(e._reverse===t||0!==e.repeatCounter){e.forward=t;var r=t?e.currentFrame.nextFrame:e.currentFrame.prevFrame;this.updateAndGetNextTick(e,r)}else this.completeAnimation(e)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(e){var t=e.currentFrame;t.isFirst?e._yoyo?this.handleYoyoFrame(e,!0):e.repeatCounter>0?e._reverse&&!e.forward?(e.currentFrame=this.getLastFrame(),this.repeatAnimation(e)):(e.forward=!0,this.repeatAnimation(e)):this.completeAnimation(e):this.updateAndGetNextTick(e,t.prevFrame)},updateAndGetNextTick:function(e,t){e.updateFrame(t),this.getNextTick(e)},removeFrame:function(e){var t=this.frames.indexOf(e);return-1!==t&&this.removeFrameAt(t),this},removeFrameAt:function(e){return this.frames.splice(e,1),this.updateFrameSequence(),this},repeatAnimation:function(e){if(2===e._pendingStop)return this.completeAnimation(e);if(e._repeatDelay>0&&!1===e.pendingRepeat)e.pendingRepeat=!0,e.accumulator-=e.nextTick,e.nextTick+=e._repeatDelay;else if(e.repeatCounter--,e.updateFrame(e.currentFrame[e.forward?"nextFrame":"prevFrame"]),e.isPlaying){this.getNextTick(e),e.pendingRepeat=!1;var t=e.currentFrame,r=e.parent;this.emit(a.ANIMATION_REPEAT,this,t),r.emit(a.SPRITE_ANIMATION_KEY_REPEAT+this.key,this,t,e.repeatCounter,r),r.emit(a.SPRITE_ANIMATION_REPEAT,this,t,e.repeatCounter,r)}},setFrame:function(e){e.forward?this.nextFrame(e):this.previousFrame(e)},toJSON:function(){var e={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(t){e.frames.push(t.toJSON())}),e},updateFrameSequence:function(){for(var e,t=this.frames.length,r=1/(t-1),a=0;a<t;a++)(e=this.frames[a]).index=a+1,e.isFirst=!1,e.isLast=!1,e.progress=a*r,0===a?(e.isFirst=!0,1===t?(e.isLast=!0,e.nextFrame=e,e.prevFrame=e):(e.isLast=!1,e.prevFrame=this.frames[t-1],e.nextFrame=this.frames[a+1])):a===t-1&&t>1?(e.isLast=!0,e.prevFrame=this.frames[t-2],e.nextFrame=this.frames[0]):t>1&&(e.prevFrame=this.frames[a-1],e.nextFrame=this.frames[a+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.removeAllListeners(),this.manager.off(a.PAUSE_ALL,this.pause,this),this.manager.off(a.RESUME_ALL,this.resume,this),this.manager.remove(this.key);for(var e=0;e<this.frames.length;e++)this.frames[e].destroy();this.frames=[],this.manager=null}});module.exports=m;
},{"../math/Clamp":"dPkx","../utils/Class":"Q4x4","eventemitter3":"Clm3","./events":"bW0C","../utils/array/FindClosestInSorted":"AbTG","./AnimationFrame":"p0nD","../utils/object/GetValue":"FWyS"}],"bZon":[function(require,module,exports) {
var t=require("../../animations/Animation"),i=require("../../utils/Class"),e=require("../../animations/events"),n=new i({initialize:function(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.once(e.REMOVE_ANIMATION,this.remove,this),this.isPlaying=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this._timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this._delay=0,this._repeat=0,this._repeatDelay=0,this._yoyo=!1,this.forward=!0,this._reverse=!1,this.accumulator=0,this.nextTick=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(i){return i instanceof t&&(i=i.key),this.nextAnim=i,this.parent},setDelay:function(t){return void 0===t&&(t=0),this._delay=t,this.parent},getDelay:function(){return this._delay},delayedPlay:function(t,i,e){return this.play(i,!0,e),this.nextTick+=t,this.parent},getCurrentKey:function(){if(this.currentAnim)return this.currentAnim.key},load:function(t,i){return void 0===i&&(i=0),this.isPlaying&&this.stop(),this.animationManager.load(this,t,i),this.parent},pause:function(t){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==t&&this.updateFrame(t),this.parent},resume:function(t){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==t&&this.updateFrame(t),this.parent},isPaused:{get:function(){return this._paused}},play:function(i,e,n){return void 0===e&&(e=!1),void 0===n&&(n=0),i instanceof t&&(i=i.key),e&&this.isPlaying&&this.currentAnim.key===i?this.parent:(this.forward=!0,this._reverse=!1,this._paused=!1,this._wasPlaying=!0,this._startAnimation(i,n))},playReverse:function(i,e,n){return void 0===e&&(e=!1),void 0===n&&(n=0),i instanceof t&&(i=i.key),e&&this.isPlaying&&this.currentAnim.key===i?this.parent:(this.forward=!1,this._reverse=!0,this._startAnimation(i,n))},_startAnimation:function(t,i){this.load(t,i);var n=this.currentAnim,r=this.parent;if(!n)return r;this.repeatCounter=-1===this._repeat?Number.MAX_VALUE:this._repeat,n.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,n.showOnStart&&(r.visible=!0);var s=this.currentFrame;return n.emit(e.ANIMATION_START,n,s,r),r.emit(e.SPRITE_ANIMATION_KEY_START+t,n,s,r),r.emit(e.SPRITE_ANIMATION_START,n,s,r),r},reverse:function(){return this.isPlaying&&(this._reverse=!this._reverse,this.forward=!this.forward),this.parent},getProgress:function(){var t=this.currentFrame.progress;return this.forward||(t=1-t),t},setProgress:function(t){return this.forward||(t=1-t),this.setCurrentFrame(this.currentAnim.getFrameByProgress(t)),this.parent},remove:function(t,i){void 0===i&&(i=this.currentAnim),this.isPlaying&&i.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},getRepeat:function(){return this._repeat},setRepeat:function(t){return this._repeat=t,this.repeatCounter=-1===t?Number.MAX_VALUE:t,this.parent},getRepeatDelay:function(){return this._repeatDelay},setRepeatDelay:function(t){return this._repeatDelay=t,this.parent},restart:function(t){void 0===t&&(t=!1);var i=this.currentAnim;i.getFirstTick(this,t),this.forward=!0,this.isPlaying=!0,this.pendingRepeat=!1,this._paused=!1,this.updateFrame(i.frames[0]);var n=this.parent,r=this.currentFrame;return i.emit(e.ANIMATION_RESTART,i,r,n),n.emit(e.SPRITE_ANIMATION_KEY_RESTART+i.key,i,r,n),n.emit(e.SPRITE_ANIMATION_RESTART,i,r,n),this.parent},stop:function(){this._pendingStop=0,this.isPlaying=!1;var t=this.parent,i=this.currentAnim,n=this.currentFrame;if(i&&(i.emit(e.ANIMATION_COMPLETE,i,n,t),t.emit(e.SPRITE_ANIMATION_KEY_COMPLETE+i.key,i,n,t),t.emit(e.SPRITE_ANIMATION_COMPLETE,i,n,t)),this.nextAnim){var r=this.nextAnim;this.nextAnim=null,this.play(r)}return t},stopAfterDelay:function(t){return this._pendingStop=1,this._pendingStopValue=t,this.parent},stopOnRepeat:function(){return this._pendingStop=2,this.parent},stopOnFrame:function(t){return this._pendingStop=3,this._pendingStopValue=t,this.parent},setTimeScale:function(t){return void 0===t&&(t=1),this._timeScale=t,this.parent},getTimeScale:function(){return this._timeScale},getTotalFrames:function(){return this.currentAnim.frames.length},update:function(t,i){if(this.currentAnim&&this.isPlaying&&!this.currentAnim.paused){if(this.accumulator+=i*this._timeScale,1===this._pendingStop&&(this._pendingStopValue-=i,this._pendingStopValue<=0))return this.currentAnim.completeAnimation(this);this.accumulator>=this.nextTick&&this.currentAnim.setFrame(this)}},setCurrentFrame:function(t){var i=this.parent;return this.currentFrame=t,i.texture=t.frame.texture,i.frame=t.frame,i.isCropped&&i.frame.updateCropUVs(i._crop,i.flipX,i.flipY),i.setSizeToFrame(),i._originComponent&&(t.frame.customPivot?i.setOrigin(t.frame.pivotX,t.frame.pivotY):i.updateDisplayOrigin()),i},updateFrame:function(t){var i=this.setCurrentFrame(t);if(this.isPlaying){t.setAlpha&&(i.alpha=t.alpha);var n=this.currentAnim;i.emit(e.SPRITE_ANIMATION_KEY_UPDATE+n.key,n,t,i),i.emit(e.SPRITE_ANIMATION_UPDATE,n,t,i),3===this._pendingStop&&this._pendingStopValue===t&&this.currentAnim.completeAnimation(this)}},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},setYoyo:function(t){return void 0===t&&(t=!1),this._yoyo=t,this.parent},getYoyo:function(){return this._yoyo},destroy:function(){this.animationManager.off(e.REMOVE_ANIMATION,this.remove,this),this.animationManager=null,this.parent=null,this.currentAnim=null,this.currentFrame=null}});module.exports=n;
},{"../../animations/Animation":"QlCu","../../utils/Class":"Q4x4","../../animations/events":"bW0C"}],"qtb9":[function(require,module,exports) {
var e=require("../../renderer/BlendModes"),n={_blendMode:e.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(n){"string"==typeof n&&(n=e[n]),(n|=0)>=-1&&(this._blendMode=n)}},setBlendMode:function(e){return this.blendMode=e,this}};module.exports=n;
},{"../../renderer/BlendModes":"XeVZ"}],"mu7s":[function(require,module,exports) {
var t={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,i){return this.width=t,this.height=i,this},setDisplaySize:function(t,i){return this.displayWidth=t,this.displayHeight=i,this}};module.exports=t;
},{}],"YLny":[function(require,module,exports) {
var i={texture:null,frame:null,isCropped:!1,setCrop:function(i,t,e,s){if(void 0===i)this.isCropped=!1;else if(this.frame){if("number"==typeof i)this.frame.setCropUVs(this._crop,i,t,e,s,this.flipX,this.flipY);else{var r=i;this.frame.setCropUVs(this._crop,r.x,r.y,r.width,r.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};module.exports=i;
},{}],"YMUa":[function(require,module,exports) {
var t={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.scene.sys.queueDepthSort(),this._depth=t}},setDepth:function(t){return void 0===t&&(t=0),this.depth=t,this}};module.exports=t;
},{}],"EyGG":[function(require,module,exports) {
var i={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(i){return this.flipX=i,this},setFlipY:function(i){return this.flipY=i,this},setFlip:function(i,t){return this.flipX=i,this.flipY=t,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};module.exports=i;
},{}],"VQyb":[function(require,module,exports) {
var t=function(t,h,e){return!(t.width<=0||t.height<=0)&&(t.x<=h&&t.x+t.width>=h&&t.y<=e&&t.y+t.height>=e)};module.exports=t;
},{}],"EoRj":[function(require,module,exports) {
var t=function(t){return 2*(t.width+t.height)};module.exports=t;
},{}],"As0Q":[function(require,module,exports) {
var t=require("./Perimeter"),i=require("../point/Point"),r=function(r,e,o){if(void 0===o&&(o=new i),e<=0||e>=1)return o.x=r.x,o.y=r.y,o;var h=t(r)*e;return e>.5?(h-=r.width+r.height)<=r.width?(o.x=r.right-h,o.y=r.bottom):(o.x=r.x,o.y=r.bottom-(h-r.width)):h<=r.width?(o.x=r.x+h,o.y=r.y):(o.x=r.right,o.y=r.y+(h-r.width)),o};module.exports=r;
},{"./Perimeter":"EoRj","../point/Point":"tZ6A"}],"OGJr":[function(require,module,exports) {
var r=require("./GetPoint"),e=require("./Perimeter"),i=function(i,o,t,u){void 0===u&&(u=[]),!o&&t>0&&(o=e(i)/t);for(var n=0;n<o;n++){var v=n/o;u.push(r(i,v))}return u};module.exports=i;
},{"./GetPoint":"As0Q","./Perimeter":"EoRj"}],"Axhg":[function(require,module,exports) {
var e=require("../point/Point"),n=function(n,o,r){return void 0===r&&(r=new e),r.x=n.x1+(n.x2-n.x1)*o,r.y=n.y1+(n.y2-n.y1)*o,r};module.exports=n;
},{"../point/Point":"tZ6A"}],"fUqJ":[function(require,module,exports) {
var r=function(r){return Math.sqrt((r.x2-r.x1)*(r.x2-r.x1)+(r.y2-r.y1)*(r.y2-r.y1))};module.exports=r;
},{}],"xXoa":[function(require,module,exports) {
var r=require("./Length"),e=require("../point/Point"),n=function(n,o,i,t){void 0===t&&(t=[]),!o&&i>0&&(o=r(n)/i);for(var u=n.x1,v=n.y1,a=n.x2,p=n.y2,x=0;x<o;x++){var d=x/o,f=u+(a-u)*d,h=v+(p-v)*d;t.push(new e(f,h))}return t};module.exports=n;
},{"./Length":"fUqJ","../point/Point":"tZ6A"}],"pD6t":[function(require,module,exports) {
var r=require("../point/Point"),n=function(n,o){void 0===o&&(o=new r);var e=Math.random();return o.x=n.x1+e*(n.x2-n.x1),o.y=n.y1+e*(n.y2-n.y1),o};module.exports=n;
},{"../point/Point":"tZ6A"}],"FGft":[function(require,module,exports) {
var e=function(e,o,r){return void 0===r&&(r=1e-4),Math.abs(e-o)<r};module.exports=e;
},{}],"xARF":[function(require,module,exports) {
var t=require("../utils/Class"),i=require("../math/fuzzy/Equal"),s=new t({initialize:function(t,i){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===i&&(i=t),this.x=t||0,this.y=i||0)},clone:function(){return new s(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setTo:function(t,i){return this.set(t,i)},setToPolar:function(t,i){return null==i&&(i=1),this.x=Math.cos(t)*i,this.y=Math.sin(t)*i,this},equals:function(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function(t,s){return i(this.x,t.x,s)&&i(this.y,t.y,s)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},setAngle:function(t){return this.setToPolar(t,this.length())},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var i=t.x-this.x,s=t.y-this.y;return Math.sqrt(i*i+s*s)},distanceSq:function(t){var i=t.x-this.x,s=t.y-this.y;return i*i+s*s},length:function(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},setLength:function(t){return this.normalize().scale(t)},lengthSq:function(){var t=this.x,i=this.y;return t*t+i*i},normalize:function(){var t=this.x,i=this.y,s=t*t+i*i;return s>0&&(s=1/Math.sqrt(s),this.x=t*s,this.y=i*s),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,i){void 0===i&&(i=0);var s=this.x,n=this.y;return this.x=s+i*(t.x-s),this.y=n+i*(t.y-n),this},transformMat3:function(t){var i=this.x,s=this.y,n=t.val;return this.x=n[0]*i+n[3]*s+n[6],this.y=n[1]*i+n[4]*s+n[7],this},transformMat4:function(t){var i=this.x,s=this.y,n=t.val;return this.x=n[0]*i+n[4]*s+n[12],this.y=n[1]*i+n[5]*s+n[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(t){var i=this.length();return i&&i>t&&this.scale(t/i),this},reflect:function(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function(t){return this.reflect(t).negate()},rotate:function(t){var i=Math.cos(t),s=Math.sin(t);return this.set(i*this.x-s*this.y,s*this.x+i*this.y)}});s.ZERO=new s,s.RIGHT=new s(1,0),s.LEFT=new s(-1,0),s.UP=new s(0,-1),s.DOWN=new s(0,1),s.ONE=new s(1,1),module.exports=s;
},{"../utils/Class":"Q4x4","../math/fuzzy/Equal":"FGft"}],"JM91":[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("./GetPoint"),n=require("./GetPoints"),s=require("../const"),e=require("./Random"),h=require("../../math/Vector2"),o=new t({initialize:function(t,i,n,e){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===e&&(e=0),this.type=s.LINE,this.x1=t,this.y1=i,this.x2=n,this.y2=e},getPoint:function(t,n){return i(this,t,n)},getPoints:function(t,i,s){return n(this,t,i,s)},getRandomPoint:function(t){return e(this,t)},setTo:function(t,i,n,s){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),this.x1=t,this.y1=i,this.x2=n,this.y2=s,this},getPointA:function(t){return void 0===t&&(t=new h),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new h),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});module.exports=o;
},{"../../utils/Class":"Q4x4","./GetPoint":"Axhg","./GetPoints":"xXoa","../const":"wRsF","./Random":"pD6t","../../math/Vector2":"xARF"}],"ylKO":[function(require,module,exports) {
var t=require("../point/Point"),n=function(n,o){return void 0===o&&(o=new t),o.x=n.x+Math.random()*n.width,o.y=n.y+Math.random()*n.height,o};module.exports=n;
},{"../point/Point":"tZ6A"}],"ACYM":[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("./Contains"),h=require("./GetPoint"),n=require("./GetPoints"),s=require("../const"),e=require("../line/Line"),o=require("./Random"),r=new t({initialize:function(t,i,h,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===h&&(h=0),void 0===n&&(n=0),this.type=s.RECTANGLE,this.x=t,this.y=i,this.width=h,this.height=n},contains:function(t,h){return i(this,t,h)},getPoint:function(t,i){return h(this,t,i)},getPoints:function(t,i,h){return n(this,t,i,h)},getRandomPoint:function(t){return o(this,t)},setTo:function(t,i,h,n){return this.x=t,this.y=i,this.width=h,this.height=n,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new e),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new e),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new e),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new e),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});module.exports=r;
},{"../../utils/Class":"Q4x4","./Contains":"VQyb","./GetPoint":"As0Q","./GetPoints":"OGJr","../const":"wRsF","../line/Line":"JM91","./Random":"ylKO"}],"xjYo":[function(require,module,exports) {
var r=function(r,t,a,n){var o=Math.cos(n),e=Math.sin(n),s=r.x-t,u=r.y-a;return r.x=s*o-u*e+t,r.y=s*e+u*o+a,r};module.exports=r;
},{}],"DCgd":[function(require,module,exports) {
var t=require("../../geom/rectangle/Rectangle"),i=require("../../math/RotateAround"),s=require("../../math/Vector2"),h={prepareBoundsOutput:function(t,s){(void 0===s&&(s=!1),0!==this.rotation&&i(t,this.x,this.y,this.rotation),s&&this.parentContainer)&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t);return t},getCenter:function(t){return void 0===t&&(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function(t,i){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopCenter:function(t,i){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopRight:function(t,i){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getLeftCenter:function(t,i){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getRightCenter:function(t,i){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getBottomLeft:function(t,i){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomCenter:function(t,i){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomRight:function(t,i){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBounds:function(i){var s,h,e,n,r,o,a,p;if(void 0===i&&(i=new t),this.parentContainer){var g=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(i),g.transformPoint(i.x,i.y,i),s=i.x,h=i.y,this.getTopRight(i),g.transformPoint(i.x,i.y,i),e=i.x,n=i.y,this.getBottomLeft(i),g.transformPoint(i.x,i.y,i),r=i.x,o=i.y,this.getBottomRight(i),g.transformPoint(i.x,i.y,i),a=i.x,p=i.y}else this.getTopLeft(i),s=i.x,h=i.y,this.getTopRight(i),e=i.x,n=i.y,this.getBottomLeft(i),r=i.x,o=i.y,this.getBottomRight(i),a=i.x,p=i.y;return i.x=Math.min(s,e,r,a),i.y=Math.min(h,n,o,p),i.width=Math.max(s,e,r,a)-i.x,i.height=Math.max(h,n,o,p)-i.y,i}};module.exports=h;
},{"../../geom/rectangle/Rectangle":"ACYM","../../math/RotateAround":"xjYo","../../math/Vector2":"xARF"}],"iTA6":[function(require,module,exports) {
module.exports="blur";
},{}],"YlvB":[function(require,module,exports) {
module.exports="boot";
},{}],"oXZc":[function(require,module,exports) {
module.exports="contextlost";
},{}],"tUBh":[function(require,module,exports) {
module.exports="contextrestored";
},{}],"dnzl":[function(require,module,exports) {
module.exports="destroy";
},{}],"TGT8":[function(require,module,exports) {
module.exports="focus";
},{}],"OR2Y":[function(require,module,exports) {
module.exports="hidden";
},{}],"RNoC":[function(require,module,exports) {
module.exports="pause";
},{}],"tsTZ":[function(require,module,exports) {
module.exports="postrender";
},{}],"clVB":[function(require,module,exports) {
module.exports="poststep";
},{}],"hasp":[function(require,module,exports) {
module.exports="prerender";
},{}],"E8tJ":[function(require,module,exports) {
module.exports="prestep";
},{}],"r1pK":[function(require,module,exports) {
module.exports="ready";
},{}],"eU0X":[function(require,module,exports) {
module.exports="resume";
},{}],"XMae":[function(require,module,exports) {
module.exports="step";
},{}],"regK":[function(require,module,exports) {
module.exports="visible";
},{}],"ZroQ":[function(require,module,exports) {
module.exports={BLUR:require("./BLUR_EVENT"),BOOT:require("./BOOT_EVENT"),CONTEXT_LOST:require("./CONTEXT_LOST_EVENT"),CONTEXT_RESTORED:require("./CONTEXT_RESTORED_EVENT"),DESTROY:require("./DESTROY_EVENT"),FOCUS:require("./FOCUS_EVENT"),HIDDEN:require("./HIDDEN_EVENT"),PAUSE:require("./PAUSE_EVENT"),POST_RENDER:require("./POST_RENDER_EVENT"),POST_STEP:require("./POST_STEP_EVENT"),PRE_RENDER:require("./PRE_RENDER_EVENT"),PRE_STEP:require("./PRE_STEP_EVENT"),READY:require("./READY_EVENT"),RESUME:require("./RESUME_EVENT"),STEP:require("./STEP_EVENT"),VISIBLE:require("./VISIBLE_EVENT")};
},{"./BLUR_EVENT":"iTA6","./BOOT_EVENT":"YlvB","./CONTEXT_LOST_EVENT":"oXZc","./CONTEXT_RESTORED_EVENT":"tUBh","./DESTROY_EVENT":"dnzl","./FOCUS_EVENT":"TGT8","./HIDDEN_EVENT":"OR2Y","./PAUSE_EVENT":"RNoC","./POST_RENDER_EVENT":"tsTZ","./POST_STEP_EVENT":"clVB","./PRE_RENDER_EVENT":"hasp","./PRE_STEP_EVENT":"E8tJ","./READY_EVENT":"r1pK","./RESUME_EVENT":"eU0X","./STEP_EVENT":"XMae","./VISIBLE_EVENT":"regK"}],"ZuI5":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../../core/events"),r=new e({initialize:function(e,r){var i=e.sys.game.renderer;if(this.renderer=i,this.bitmapMask=r,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.prevFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,i&&i.gl){var a=i.width,s=i.height,n=0==(a&a-1)&&0==(s&s-1),u=i.gl,m=n?u.REPEAT:u.CLAMP_TO_EDGE,l=u.LINEAR;this.mainTexture=i.createTexture2D(0,l,l,m,m,u.RGBA,null,a,s),this.maskTexture=i.createTexture2D(0,l,l,m,m,u.RGBA,null,a,s),this.mainFramebuffer=i.createFramebuffer(a,s,this.mainTexture,!0),this.maskFramebuffer=i.createFramebuffer(a,s,this.maskTexture,!0),e.sys.game.events.on(t.CONTEXT_RESTORED,function(e){var t=e.width,r=e.height,i=0==(t&t-1)&&0==(r&r-1),a=e.gl,s=i?a.REPEAT:a.CLAMP_TO_EDGE,n=a.LINEAR;this.mainTexture=e.createTexture2D(0,n,n,s,s,a.RGBA,null,t,r),this.maskTexture=e.createTexture2D(0,n,n,s,s,a.RGBA,null,t,r),this.mainFramebuffer=e.createFramebuffer(t,r,this.mainTexture,!0),this.maskFramebuffer=e.createFramebuffer(t,r,this.maskTexture,!0)},this)}},setBitmap:function(e){this.bitmapMask=e},preRenderWebGL:function(e,t,r){e.pipelines.BitmapMaskPipeline.beginMask(this,t,r)},postRenderWebGL:function(e,t){e.pipelines.BitmapMaskPipeline.endMask(this,t)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null;var e=this.renderer;e&&e.gl&&(e.deleteTexture(this.mainTexture),e.deleteTexture(this.maskTexture),e.deleteFramebuffer(this.mainFramebuffer),e.deleteFramebuffer(this.maskFramebuffer)),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null,this.prevFramebuffer=null,this.renderer=null}});module.exports=r;
},{"../../utils/Class":"Q4x4","../../core/events":"ZroQ"}],"dhb5":[function(require,module,exports) {
var e=require("../../utils/Class"),t=new e({initialize:function(e,t){this.geometryMask=t,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(e){return this.geometryMask=e,this},setInvertAlpha:function(e){return void 0===e&&(e=!0),this.invertAlpha=e,this},preRenderWebGL:function(e,t,s){var n=e.gl;e.flush(),0===e.maskStack.length&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),e.maskCount=0),e.currentCameraMask.mask!==this&&(e.currentMask.mask=this),e.maskStack.push({mask:this,camera:s}),this.applyStencil(e,s,!0),e.maskCount++},applyStencil:function(e,t,s){var n=e.gl,a=this.geometryMask,r=e.maskCount;n.colorMask(!1,!1,!1,!1),s?(n.stencilFunc(n.EQUAL,r,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,r+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),a.renderWebGL(e,a,0,t),e.flush(),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),s?this.invertAlpha?n.stencilFunc(n.NOTEQUAL,r+1,255):n.stencilFunc(n.EQUAL,r+1,255):this.invertAlpha?n.stencilFunc(n.NOTEQUAL,r,255):n.stencilFunc(n.EQUAL,r,255)},postRenderWebGL:function(e){var t=e.gl;if(e.maskStack.pop(),e.maskCount--,0===e.maskStack.length)e.flush(),e.currentMask.mask=null,t.disable(t.STENCIL_TEST);else{e.flush();var s=e.maskStack[e.maskStack.length-1];s.mask.applyStencil(e,s.camera,!1),e.currentCameraMask.mask!==s.mask?(e.currentMask.mask=s.mask,e.currentMask.camera=s.camera):e.currentMask.mask=null}},preRenderCanvas:function(e,t,s){var n=this.geometryMask;e.currentContext.save(),n.renderCanvas(e,n,0,s,null,null,!0),e.currentContext.clip()},postRenderCanvas:function(e){e.currentContext.restore()},destroy:function(){this.geometryMask=null}});module.exports=t;
},{"../../utils/Class":"Q4x4"}],"gLLY":[function(require,module,exports) {
var s=require("../../display/mask/BitmapMask"),t=require("../../display/mask/GeometryMask"),e={mask:null,setMask:function(s){return this.mask=s,this},clearMask:function(s){return void 0===s&&(s=!1),s&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new s(this.scene,t)},createGeometryMask:function(s){return void 0===s&&"Graphics"===this.type&&(s=this),new t(this.scene,s)}};module.exports=e;
},{"../../display/mask/BitmapMask":"ZuI5","../../display/mask/GeometryMask":"dhb5"}],"GWcJ":[function(require,module,exports) {
var i={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(i){this._displayOriginX=i,this.originX=i/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(i){this._displayOriginY=i,this.originY=i/this.height}},setOrigin:function(i,t){return void 0===i&&(i=.5),void 0===t&&(t=i),this.originX=i,this.originY=t,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(i,t){return void 0===i&&(i=0),void 0===t&&(t=i),this.displayOriginX=i,this.displayOriginY=t,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};module.exports=i;
},{}],"FzPC":[function(require,module,exports) {
var r=require("./const"),e=function(e){return e*r.DEG_TO_RAD};module.exports=e;
},{"./const":"TJqb"}],"pdce":[function(require,module,exports) {
var r=function(r,e,n){return r&&r.hasOwnProperty(e)?r[e]:n};module.exports=r;
},{}],"l3E3":[function(require,module,exports) {
var E={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};module.exports=E;
},{}],"bMkR":[function(require,module,exports) {
var t=require("../../math/DegToRad"),e=require("../../tweens/builders/GetBoolean"),i=require("../../utils/object/GetValue"),a=require("../../tweens/tween/const"),s=require("../../math/Vector2"),h={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:a.PLAYING_FORWARD,setPath:function(t,e){void 0===e&&(e=this.pathConfig);var i=this.pathTween;return i&&i.isPlaying()&&i.stop(),this.path=t,e&&this.startFollow(e),this},setRotateToPath:function(t,e){return void 0===e&&(e=0),this.rotateToPath=t,this.pathRotationOffset=e,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(h,o){void 0===h&&(h={}),void 0===o&&(o=0);var r=this.pathTween;r&&r.isPlaying()&&r.stop(),"number"==typeof h&&(h={duration:h}),h.from=i(h,"from",0),h.to=i(h,"to",1);var n=e(h,"positionOnPath",!1);this.rotateToPath=e(h,"rotateToPath",!1),this.pathRotationOffset=i(h,"rotationOffset",0);var p=i(h,"startAt",o);if(p&&(h.onStart=function(t){var e=t.data[0];e.progress=p,e.elapsed=e.duration*p;var i=e.ease(e.progress);e.current=e.start+(e.end-e.start)*i,e.target[e.key]=e.current}),this.pathOffset||(this.pathOffset=new s(this.x,this.y)),this.pathVector||(this.pathVector=new s),this.pathDelta||(this.pathDelta=new s),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(h),this.path.getStartPoint(this.pathOffset),n&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=a.PLAYING_FORWARD,this.rotateToPath){var f=this.path.getPoint(.1);this.rotation=Math.atan2(f.y-this.y,f.x-this.x)+t(this.pathRotationOffset)}return this.pathConfig=h,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){var e=this.pathTween;if(e){var i=e.data[0],s=this.pathDelta,h=this.pathVector;if(s.copy(h).negate(),i.state===a.COMPLETE)return this.path.getPoint(1,h),s.add(h),h.add(this.pathOffset),void this.setPosition(h.x,h.y);if(i.state!==a.PLAYING_FORWARD&&i.state!==a.PLAYING_BACKWARD)return;this.path.getPoint(e.getValue(),h),s.add(h),h.add(this.pathOffset);var o=this.x,r=this.y;this.setPosition(h.x,h.y);var n=this.x-o,p=this.y-r;if(0===n&&0===p)return;if(i.state!==this._prevDirection)return void(this._prevDirection=i.state);this.rotateToPath&&(this.rotation=Math.atan2(p,n)+t(this.pathRotationOffset))}}};module.exports=h;
},{"../../math/DegToRad":"FzPC","../../tweens/builders/GetBoolean":"pdce","../../utils/object/GetValue":"FWyS","../../tweens/tween/const":"l3E3","../../math/Vector2":"xARF"}],"B6Pt":[function(require,module,exports) {
var e={defaultPipeline:null,pipeline:null,initPipeline:function(e){void 0===e&&(e="TextureTintPipeline");var i=this.scene.sys.game.renderer;return!!(i&&i.gl&&i.hasPipeline(e))&&(this.defaultPipeline=i.getPipeline(e),this.pipeline=this.defaultPipeline,!0)},setPipeline:function(e){var i=this.scene.sys.game.renderer;return i&&i.gl&&i.hasPipeline(e)&&(this.pipeline=i.getPipeline(e)),this},resetPipeline:function(){return this.pipeline=this.defaultPipeline,null!==this.pipeline},getPipelineName:function(){return this.pipeline.name}};module.exports=e;
},{}],"Ti6A":[function(require,module,exports) {
var o={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(o,r){return void 0===r&&(r=o),this.scrollFactorX=o,this.scrollFactorY=r,this}};module.exports=o;
},{}],"fN6Z":[function(require,module,exports) {
var t={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function(t,i){return this.width=t,this.height=i,this},setDisplaySize:function(t,i){return this.displayWidth=t,this.displayHeight=i,this}};module.exports=t;
},{}],"m47e":[function(require,module,exports) {
var t=8,e={texture:null,frame:null,isCropped:!1,setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(e,i,s){return void 0===i&&(i=!0),void 0===s&&(s=!0),this.frame=this.texture.get(e),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=t:this.renderFlags&=~t,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&s&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};module.exports=e;
},{}],"i2Oa":[function(require,module,exports) {
var t=8,i={texture:null,frame:null,isCropped:!1,setCrop:function(t,i,e,s){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,i,e,s,this.flipX,this.flipY);else{var r=t;this.frame.setCropUVs(this._crop,r.x,r.y,r.width,r.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function(i,e,s){return void 0===e&&(e=!0),void 0===s&&(s=!0),this.frame=this.texture.get(i),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=t:this.renderFlags&=~t,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&s&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};module.exports=i;
},{}],"qnAh":[function(require,module,exports) {
var t=function(t){return(t>>16)+(65280&t)+((255&t)<<16)},i={_tintTL:16777215,_tintTR:16777215,_tintBL:16777215,_tintBR:16777215,_isTinted:!1,tintFill:!1,clearTint:function(){return this.setTint(16777215),this._isTinted=!1,this},setTint:function(i,n,s,e){return void 0===i&&(i=16777215),void 0===n&&(n=i,s=i,e=i),this._tintTL=t(i),this._tintTR=t(n),this._tintBL=t(s),this._tintBR=t(e),this._isTinted=!0,this.tintFill=!1,this},setTintFill:function(t,i,n,s){return this.setTint(t,i,n,s),this.tintFill=!0,this},tintTopLeft:{get:function(){return this._tintTL},set:function(i){this._tintTL=t(i),this._isTinted=!0}},tintTopRight:{get:function(){return this._tintTR},set:function(i){this._tintTR=t(i),this._isTinted=!0}},tintBottomLeft:{get:function(){return this._tintBL},set:function(i){this._tintBL=t(i),this._isTinted=!0}},tintBottomRight:{get:function(){return this._tintBR},set:function(i){this._tintBR=t(i),this._isTinted=!0}},tint:{set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){return this._isTinted}}};module.exports=i;
},{}],"nXyQ":[function(require,module,exports) {
var e=function(e){var t={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(t.textureKey=e.texture.key,t.frameKey=e.frame.name),t};module.exports=e;
},{}],"hzKR":[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("../../math/const"),r=require("../../math/Vector2"),a=new t({initialize:function(t,i,r,a,n,s){void 0===t&&(t=1),void 0===i&&(i=0),void 0===r&&(r=0),void 0===a&&(a=1),void 0===n&&(n=0),void 0===s&&(s=0),this.matrix=new Float32Array([t,i,r,a,n,s,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var t=this.matrix,r=t[0],a=t[1],n=t[2],s=t[3];return r||a?a>0?Math.acos(r/this.scaleX):-Math.acos(r/this.scaleX):n||s?i.TAU-(s>0?Math.acos(-n/this.scaleY):-Math.acos(n/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,i){var r=this.matrix;return r[4]=r[0]*t+r[2]*i+r[4],r[5]=r[1]*t+r[3]*i+r[5],this},scale:function(t,i){var r=this.matrix;return r[0]*=t,r[1]*=t,r[2]*=i,r[3]*=i,this},rotate:function(t){var i=Math.sin(t),r=Math.cos(t),a=this.matrix,n=a[0],s=a[1],e=a[2],o=a[3];return a[0]=n*r+e*i,a[1]=s*r+o*i,a[2]=n*-i+e*r,a[3]=s*-i+o*r,this},multiply:function(t,i){var r=this.matrix,a=t.matrix,n=r[0],s=r[1],e=r[2],o=r[3],h=r[4],c=r[5],u=a[0],m=a[1],f=a[2],x=a[3],l=a[4],v=a[5],d=void 0===i?this:i;return d.a=u*n+m*e,d.b=u*s+m*o,d.c=f*n+x*e,d.d=f*s+x*o,d.e=l*n+v*e+h,d.f=l*s+v*o+c,d},multiplyWithOffset:function(t,i,r){var a=this.matrix,n=t.matrix,s=a[0],e=a[1],o=a[2],h=a[3],c=i*s+r*o+a[4],u=i*e+r*h+a[5],m=n[0],f=n[1],x=n[2],l=n[3],v=n[4],d=n[5];return a[0]=m*s+f*o,a[1]=m*e+f*h,a[2]=x*s+l*o,a[3]=x*e+l*h,a[4]=v*s+d*o+c,a[5]=v*e+d*h+u,this},transform:function(t,i,r,a,n,s){var e=this.matrix,o=e[0],h=e[1],c=e[2],u=e[3],m=e[4],f=e[5];return e[0]=t*o+i*c,e[1]=t*h+i*u,e[2]=r*o+a*c,e[3]=r*h+a*u,e[4]=n*o+s*c+m,e[5]=n*h+s*u+f,this},transformPoint:function(t,i,r){void 0===r&&(r={x:0,y:0});var a=this.matrix,n=a[0],s=a[1],e=a[2],o=a[3],h=a[4],c=a[5];return r.x=t*n+i*e+h,r.y=t*s+i*o+c,r},invert:function(){var t=this.matrix,i=t[0],r=t[1],a=t[2],n=t[3],s=t[4],e=t[5],o=i*n-r*a;return t[0]=n/o,t[1]=-r/o,t[2]=-a/o,t[3]=i/o,t[4]=(a*e-n*s)/o,t[5]=-(i*e-r*s)/o,this},copyFrom:function(t){var i=this.matrix;return i[0]=t.a,i[1]=t.b,i[2]=t.c,i[3]=t.d,i[4]=t.e,i[5]=t.f,this},copyFromArray:function(t){var i=this.matrix;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],this},copyToContext:function(t){var i=this.matrix;return t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),t},setToContext:function(t){var i=this.matrix;return t.setTransform(i[0],i[1],i[2],i[3],i[4],i[5]),t},copyToArray:function(t){var i=this.matrix;return void 0===t?t=[i[0],i[1],i[2],i[3],i[4],i[5]]:(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5]),t},setTransform:function(t,i,r,a,n,s){var e=this.matrix;return e[0]=t,e[1]=i,e[2]=r,e[3]=a,e[4]=n,e[5]=s,this},decomposeMatrix:function(){var t=this.decomposedMatrix,i=this.matrix,r=i[0],a=i[1],n=i[2],s=i[3],e=r*s-a*n;if(t.translateX=i[4],t.translateY=i[5],r||a){var o=Math.sqrt(r*r+a*a);t.rotation=a>0?Math.acos(r/o):-Math.acos(r/o),t.scaleX=o,t.scaleY=e/o}else if(n||s){var h=Math.sqrt(n*n+s*s);t.rotation=.5*Math.PI-(s>0?Math.acos(-n/h):-Math.acos(n/h)),t.scaleX=e/h,t.scaleY=h}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function(t,i,r,a,n){var s=this.matrix,e=Math.sin(r),o=Math.cos(r);return s[4]=t,s[5]=i,s[0]=o*a,s[1]=e*a,s[2]=-e*n,s[3]=o*n,this},applyInverse:function(t,i,a){void 0===a&&(a=new r);var n=this.matrix,s=n[0],e=n[1],o=n[2],h=n[3],c=n[4],u=n[5],m=1/(s*h+o*-e);return a.x=h*m*t+-o*m*i+(u*o-c*h)*m,a.y=s*m*i+-e*m*t+(-u*s+c*e)*m,a},getX:function(t,i){return t*this.a+i*this.c+this.e},getY:function(t,i){return t*this.b+i*this.d+this.f},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});module.exports=a;
},{"../../utils/Class":"Q4x4","../../math/const":"TJqb","../../math/Vector2":"xARF"}],"gwbj":[function(require,module,exports) {
var r=function(r,e,n){var o=n-e;return e+((r-e)%o+o)%o};module.exports=r;
},{}],"SPah":[function(require,module,exports) {
var r=require("../Wrap"),e=function(e){return r(e,-Math.PI,Math.PI)};module.exports=e;
},{"../Wrap":"gwbj"}],"lSyh":[function(require,module,exports) {
var r=require("../Wrap"),e=function(e){return r(e,-180,180)};module.exports=e;
},{"../Wrap":"gwbj"}],"wIth":[function(require,module,exports) {
var t=require("../../math/const"),i=require("./TransformMatrix"),n=require("../../math/angle/Wrap"),s=require("../../math/angle/WrapDegrees"),e=4,r={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=~e:this.renderFlags|=e}},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,0===t?this.renderFlags&=~e:this.renderFlags|=e}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,0===t?this.renderFlags&=~e:this.renderFlags|=e}},angle:{get:function(){return s(this._rotation*t.RAD_TO_DEG)},set:function(i){this.rotation=s(i)*t.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=n(t)}},setPosition:function(t,i,n,s){return void 0===t&&(t=0),void 0===i&&(i=t),void 0===n&&(n=0),void 0===s&&(s=0),this.x=t,this.y=i,this.z=n,this.w=s,this},setRandomPosition:function(t,i,n,s){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===s&&(s=this.scene.sys.scale.height),this.x=t+Math.random()*n,this.y=i+Math.random()*s,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.scaleX=t,this.scaleY=i,this},setX:function(t){return void 0===t&&(t=0),this.x=t,this},setY:function(t){return void 0===t&&(t=0),this.y=t,this},setZ:function(t){return void 0===t&&(t=0),this.z=t,this},setW:function(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function(t){return void 0===t&&(t=new i),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,n){void 0===t&&(t=new i),void 0===n&&(n=new i);var s=this.parentContainer;if(!s)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);s;)n.applyITRS(s.x,s.y,s._rotation,s._scaleX,s._scaleY),n.multiply(t,t),s=s.parentContainer;return t},getParentRotation:function(){for(var t=0,i=this.parentContainer;i;)t+=i.rotation,i=i.parentContainer;return t}};module.exports=r;
},{"../../math/const":"TJqb","./TransformMatrix":"hzKR","../../math/angle/Wrap":"SPah","../../math/angle/WrapDegrees":"lSyh"}],"oYJu":[function(require,module,exports) {
var i=1,s={_visible:!0,visible:{get:function(){return this._visible},set:function(s){s?(this._visible=!0,this.renderFlags|=i):(this._visible=!1,this.renderFlags&=~i)}},setVisible:function(i){return this.visible=i,this}};module.exports=s;
},{}],"PnJA":[function(require,module,exports) {
module.exports={Alpha:require("./Alpha"),AlphaSingle:require("./AlphaSingle"),Animation:require("./Animation"),BlendMode:require("./BlendMode"),ComputedSize:require("./ComputedSize"),Crop:require("./Crop"),Depth:require("./Depth"),Flip:require("./Flip"),GetBounds:require("./GetBounds"),Mask:require("./Mask"),Origin:require("./Origin"),PathFollower:require("./PathFollower"),Pipeline:require("./Pipeline"),ScrollFactor:require("./ScrollFactor"),Size:require("./Size"),Texture:require("./Texture"),TextureCrop:require("./TextureCrop"),Tint:require("./Tint"),ToJSON:require("./ToJSON"),Transform:require("./Transform"),TransformMatrix:require("./TransformMatrix"),Visible:require("./Visible")};
},{"./Alpha":"fWy2","./AlphaSingle":"QPBl","./Animation":"bZon","./BlendMode":"qtb9","./ComputedSize":"mu7s","./Crop":"YLny","./Depth":"YMUa","./Flip":"EyGG","./GetBounds":"DCgd","./Mask":"gLLY","./Origin":"GWcJ","./PathFollower":"bMkR","./Pipeline":"B6Pt","./ScrollFactor":"Ti6A","./Size":"fN6Z","./Texture":"m47e","./TextureCrop":"i2Oa","./Tint":"qnAh","./ToJSON":"nXyQ","./Transform":"wIth","./TransformMatrix":"hzKR","./Visible":"oYJu"}],"EmLk":[function(require,module,exports) {
module.exports="changedata";
},{}],"FmoZ":[function(require,module,exports) {
module.exports="changedata-";
},{}],"c5hx":[function(require,module,exports) {
module.exports="removedata";
},{}],"Q6Ot":[function(require,module,exports) {
module.exports="setdata";
},{}],"DlER":[function(require,module,exports) {
module.exports={CHANGE_DATA:require("./CHANGE_DATA_EVENT"),CHANGE_DATA_KEY:require("./CHANGE_DATA_KEY_EVENT"),REMOVE_DATA:require("./REMOVE_DATA_EVENT"),SET_DATA:require("./SET_DATA_EVENT")};
},{"./CHANGE_DATA_EVENT":"EmLk","./CHANGE_DATA_KEY_EVENT":"FmoZ","./REMOVE_DATA_EVENT":"c5hx","./SET_DATA_EVENT":"Q6Ot"}],"SKdT":[function(require,module,exports) {
var t=require("../utils/Class"),e=require("./events"),i=new t({initialize:function(t,e){this.parent=t,this.events=e,e||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once("destroy",this.destroy,this)},get:function(t){var e=this.list;if(Array.isArray(t)){for(var i=[],s=0;s<t.length;s++)i.push(e[t[s]]);return i}return e[t]},getAll:function(){var t={};for(var e in this.list)this.list.hasOwnProperty(e)&&(t[e]=this.list[e]);return t},query:function(t){var e={};for(var i in this.list)this.list.hasOwnProperty(i)&&i.match(t)&&(e[i]=this.list[i]);return e},set:function(t,e){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,e);for(var i in t)this.setValue(i,t[i]);return this},inc:function(t,e){if(this._frozen)return this;void 0===e&&(e=1);var i=this.get(t);return void 0===i&&(i=0),this.set(t,i+e),this},toggle:function(t){return this._frozen?this:(this.set(t,!this.get(t)),this)},setValue:function(t,i){if(this._frozen)return this;if(this.has(t))this.values[t]=i;else{var s=this,r=this.list,n=this.events,h=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function(){return r[t]},set:function(i){if(!s._frozen){var o=r[t];r[t]=i,n.emit(e.CHANGE_DATA,h,t,i,o),n.emit(e.CHANGE_DATA_KEY+t,h,i,o)}}}),r[t]=i,n.emit(e.SET_DATA,h,t,i)}return this},each:function(t,e){for(var i=[this.parent,null,void 0],s=1;s<arguments.length;s++)i.push(arguments[s]);for(var r in this.list)i[1]=r,i[2]=this.list[r],t.apply(e,i);return this},merge:function(t,e){for(var i in void 0===e&&(e=!0),t)t.hasOwnProperty(i)&&(e||!e&&!this.has(i))&&this.setValue(i,t[i]);return this},remove:function(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var e=0;e<t.length;e++)this.removeValue(t[e]);return this},removeValue:function(t){if(this.has(t)){var i=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(e.REMOVE_DATA,this.parent,t,i)}return this},pop:function(t){var i=void 0;return!this._frozen&&this.has(t)&&(i=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(e.REMOVE_DATA,this.parent,t,i)),i},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(e.CHANGE_DATA),this.events.off(e.SET_DATA),this.events.off(e.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t=0;for(var e in this.list)void 0!==this.list[e]&&t++;return t}}});module.exports=i;
},{"../utils/Class":"Q4x4","./events":"DlER"}],"SCPS":[function(require,module,exports) {
module.exports="created";
},{}],"kEcb":[function(require,module,exports) {
module.exports="error";
},{}],"VycB":[function(require,module,exports) {
module.exports="loop";
},{}],"UU6v":[function(require,module,exports) {
module.exports="play";
},{}],"cr17":[function(require,module,exports) {
module.exports="seeked";
},{}],"FkKV":[function(require,module,exports) {
module.exports="seeking";
},{}],"M1lJ":[function(require,module,exports) {
module.exports="stop";
},{}],"KZ3F":[function(require,module,exports) {
module.exports="timeout";
},{}],"X4W7":[function(require,module,exports) {
module.exports="unlocked";
},{}],"YK6V":[function(require,module,exports) {
module.exports={DESTROY:require("./DESTROY_EVENT"),VIDEO_COMPLETE:require("./VIDEO_COMPLETE_EVENT"),VIDEO_CREATED:require("./VIDEO_CREATED_EVENT"),VIDEO_ERROR:require("./VIDEO_ERROR_EVENT"),VIDEO_LOOP:require("./VIDEO_LOOP_EVENT"),VIDEO_PLAY:require("./VIDEO_PLAY_EVENT"),VIDEO_SEEKED:require("./VIDEO_SEEKED_EVENT"),VIDEO_SEEKING:require("./VIDEO_SEEKING_EVENT"),VIDEO_STOP:require("./VIDEO_STOP_EVENT"),VIDEO_TIMEOUT:require("./VIDEO_TIMEOUT_EVENT"),VIDEO_UNLOCKED:require("./VIDEO_UNLOCKED_EVENT")};
},{"./DESTROY_EVENT":"dnzl","./VIDEO_COMPLETE_EVENT":"RxkH","./VIDEO_CREATED_EVENT":"SCPS","./VIDEO_ERROR_EVENT":"kEcb","./VIDEO_LOOP_EVENT":"VycB","./VIDEO_PLAY_EVENT":"UU6v","./VIDEO_SEEKED_EVENT":"cr17","./VIDEO_SEEKING_EVENT":"FkKV","./VIDEO_STOP_EVENT":"M1lJ","./VIDEO_TIMEOUT_EVENT":"KZ3F","./VIDEO_UNLOCKED_EVENT":"X4W7"}],"YzbT":[function(require,module,exports) {
var t=require("../utils/Class"),i=require("./components/ToJSON"),e=require("../data/DataManager"),s=require("eventemitter3"),n=require("./events"),a=new t({Extends:s,initialize:function(t,i){s.call(this),this.scene=t,this.type=i,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new e(this)),this},setData:function(t,i){return this.data||(this.data=new e(this)),this.data.set(t,i),this},incData:function(t,i){return this.data||(this.data=new e(this)),this.data.inc(t,i),this},toggleData:function(t){return this.data||(this.data=new e(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new e(this)),this.data.get(t)},setInteractive:function(t,i,e){return this.scene.sys.input.enable(this,t,i,e),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},update:function(){},toJSON:function(){return i(this)},willRender:function(t){return!(a.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,i=this.parentContainer,e=[];i&&(e.unshift(i.getIndex(t)),t=i,i.parentContainer);)i=i.parentContainer;return e.unshift(this.scene.sys.displayList.getIndex(t)),e},destroy:function(t){if(void 0===t&&(t=!1),this.scene&&!this.ignoreDestroy){this.preDestroy&&this.preDestroy.call(this),this.emit(n.DESTROY,this);var i=this.scene.sys;t||(i.displayList.remove(this),i.updateList.remove(this)),this.input&&(i.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),t||i.queueDepthSort(),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0,this.removeAllListeners()}}});a.RENDER_MASK=15,module.exports=a;
},{"../utils/Class":"Q4x4","./components/ToJSON":"nXyQ","../data/DataManager":"SKdT","eventemitter3":"Clm3","./events":"YK6V"}],"fuRQ":[function(require,module,exports) {
var e=require("../../renderer/BlendModes"),i=require("../../geom/circle/Circle"),t=require("../../geom/circle/Contains"),n=require("../../utils/Class"),s=require("../components"),r=require("../GameObject"),h=require("../../geom/rectangle/Rectangle"),o=require("../../geom/rectangle/Contains"),u=new n({Extends:r,Mixins:[s.Depth,s.GetBounds,s.Origin,s.Transform,s.ScrollFactor,s.Visible],initialize:function(i,t,n,s,h){void 0===s&&(s=1),void 0===h&&(h=s),r.call(this,i,"Zone"),this.setPosition(t,n),this.width=s,this.height=h,this.blendMode=e.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,i,t){void 0===t&&(t=!0),this.width=e,this.height=i,this.updateDisplayOrigin();var n=this.input;return t&&n&&!n.customHitArea&&(n.hitArea.width=e,n.hitArea.height=i),this},setDisplaySize:function(e,i){return this.displayWidth=e,this.displayHeight=i,this},setCircleDropZone:function(e){return this.setDropZone(new i(0,0,e),t)},setRectangleDropZone:function(e,i){return this.setDropZone(new h(0,0,e,i),o)},setDropZone:function(e,i){return void 0===e?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(e,i,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(){},renderWebGL:function(){}});module.exports=u;
},{"../../renderer/BlendModes":"XeVZ","../../geom/circle/Circle":"b8pw","../../geom/circle/Contains":"YD4D","../../utils/Class":"Q4x4","../components":"PnJA","../GameObject":"YzbT","../../geom/rectangle/Rectangle":"ACYM","../../geom/rectangle/Contains":"VQyb"}],"v3pG":[function(require,module,exports) {
var e=require("../display/align/in/QuickSet"),i=require("../display/align/const"),t=require("../utils/object/GetFastValue"),r=require("../utils/NOOP"),s=require("../gameobjects/zone/Zone"),o=new s({sys:{queueDepthSort:r,events:{once:r}}},0,0,1,1),n=function(r,s){void 0===s&&(s={});var n=s.hasOwnProperty("width"),l=s.hasOwnProperty("height"),u=t(s,"width",-1),a=t(s,"height",-1),h=t(s,"cellWidth",1),c=t(s,"cellHeight",h),y=t(s,"position",i.TOP_LEFT),d=t(s,"x",0),g=t(s,"y",0),p=0,q=0,f=u*h,v=a*c;o.setPosition(d,g),o.setSize(h,c);for(var w=0;w<r.length;w++)if(e(r[w],o,y),n&&-1===u)o.x+=h;else if(l&&-1===a)o.y+=c;else if(p+=h,o.x+=h,p===f&&(p=0,q+=c,o.x=d,o.y+=c,q===v))break;return r};module.exports=n;
},{"../display/align/in/QuickSet":"af6z","../display/align/const":"Jy6T","../utils/object/GetFastValue":"xbYy","../utils/NOOP":"vnTW","../gameobjects/zone/Zone":"fuRQ"}],"Swvj":[function(require,module,exports) {
var r=require("./PropertyValueInc"),e=function(e,u,a,n,o){return r(e,"alpha",u,a,n,o)};module.exports=e;
},{"./PropertyValueInc":"TgJ2"}],"dEB5":[function(require,module,exports) {
var r=require("./PropertyValueInc"),e=function(e,u,n,o,t){return r(e,"x",u,n,o,t)};module.exports=e;
},{"./PropertyValueInc":"TgJ2"}],"OKqY":[function(require,module,exports) {
var r=require("./PropertyValueInc"),e=function(e,u,n,l,o,t,a){return null==n&&(n=u),r(e,"x",u,l,t,a),r(e,"y",n,o,t,a)};module.exports=e;
},{"./PropertyValueInc":"TgJ2"}],"rpW5":[function(require,module,exports) {
var r=require("./PropertyValueInc"),e=function(e,u,n,o,t){return r(e,"y",u,n,o,t)};module.exports=e;
},{"./PropertyValueInc":"TgJ2"}],"E0lT":[function(require,module,exports) {
var r=function(r,o,t,a){void 0===t&&(t=0),void 0===a&&(a=6.28);for(var i=t,n=(a-t)/r.length,d=0;d<r.length;d++)r[d].x=o.x+o.radius*Math.cos(i),r[d].y=o.y+o.radius*Math.sin(i),i+=n;return r};module.exports=r;
},{}],"j68B":[function(require,module,exports) {
var t=function(t,h,o,e){void 0===o&&(o=0),void 0===e&&(e=6.28);for(var i=o,n=(e-o)/t.length,r=h.width/2,a=h.height/2,d=0;d<t.length;d++)t[d].x=h.x+r*Math.cos(i),t[d].y=h.y+a*Math.sin(i),i+=n;return t};module.exports=t;
},{}],"XEUb":[function(require,module,exports) {
var e=require("../geom/line/GetPoints"),r=function(r,n){for(var t=e(n,r.length),o=0;o<r.length;o++){var i=r[o],l=t[o];i.x=l.x,i.y=l.y}return r};module.exports=r;
},{"../geom/line/GetPoints":"xXoa"}],"fiqx":[function(require,module,exports) {
var t=require("./Perimeter"),e=require("../point/Point"),r=function(r,o,i,a){if(void 0===a&&(a=[]),!o&&!i)return a;o?i=Math.round(t(r)/o):o=t(r)/i;for(var n=r.x,u=r.y,s=0,b=0;b<i;b++)switch(a.push(new e(n,u)),s){case 0:(n+=o)>=r.right&&(s=1,u+=n-r.right,n=r.right);break;case 1:(u+=o)>=r.bottom&&(s=2,n-=u-r.bottom,u=r.bottom);break;case 2:(n-=o)<=r.left&&(s=3,u-=r.left-n,n=r.left);break;case 3:(u-=o)<=r.top&&(s=0,u=r.top)}return a};module.exports=r;
},{"./Perimeter":"EoRj","../point/Point":"tZ6A"}],"Obvy":[function(require,module,exports) {
var r=function(r,o){void 0===o&&(o=1);for(var u=null,n=0;n<o;n++)u=r.shift(),r.push(u);return u};module.exports=r;
},{}],"lezk":[function(require,module,exports) {
var o=function(o,r){void 0===r&&(r=1);for(var n=null,u=0;u<r;u++)n=o.pop(),o.unshift(n);return n};module.exports=o;
},{}],"istj":[function(require,module,exports) {
var r=require("../geom/rectangle/MarchingAnts"),e=require("../utils/array/RotateLeft"),t=require("../utils/array/RotateRight"),a=function(a,i,n){void 0===n&&(n=0);var o=r(i,!1,a.length);n>0?e(o,n):n<0&&t(o,Math.abs(n));for(var u=0;u<a.length;u++)a[u].x=o[u].x,a[u].y=o[u].y;return a};module.exports=a;
},{"../geom/rectangle/MarchingAnts":"fiqx","../utils/array/RotateLeft":"Obvy","../utils/array/RotateRight":"lezk"}],"EnRu":[function(require,module,exports) {
var a=function(a,r,o){void 0===r&&(r=1),void 0===o&&(o=[]);var t=Math.round(a.x1),u=Math.round(a.y1),h=Math.round(a.x2),d=Math.round(a.y2),n=Math.abs(h-t),v=Math.abs(d-u),M=t<h?1:-1,s=u<d?1:-1,x=n-v;o.push({x:t,y:u});for(var y=1;t!==h||u!==d;){var e=x<<1;e>-v&&(x-=v,t+=M),e<n&&(x+=n,u+=s),y%r==0&&o.push({x:t,y:u}),y++}return o};module.exports=a;
},{}],"HKqE":[function(require,module,exports) {
var x=require("../geom/line/BresenhamPoints"),y=function(y,e,o){var r=x({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},o),n=x({x1:e.x2,y1:e.y2,x2:e.x3,y2:e.y3},o),t=x({x1:e.x3,y1:e.y3,x2:e.x1,y2:e.y1},o);r.pop(),n.pop(),t.pop();for(var a=(r=r.concat(n,t)).length/y.length,p=0,l=0;l<y.length;l++){var h=y[l],g=r[Math.floor(p)];h.x=g.x,h.y=g.y,p+=a}return y};module.exports=y;
},{"../geom/line/BresenhamPoints":"EnRu"}],"Yd5l":[function(require,module,exports) {
var r=function(r,n,a){for(var e=0;e<r.length;e++)r[e].anims.play(n,a);return r};module.exports=r;
},{}],"u7Mw":[function(require,module,exports) {
var o=function(o,r,e,v,i,d){var f;void 0===v&&(v=0),void 0===i&&(i=0),void 0===d&&(d=1);var n=0,t=o.length;if(1===d)for(f=i;f<t;f++)o[f][r]=e+n*v,n++;else for(f=i;f>=0;f--)o[f][r]=e+n*v,n++;return o};module.exports=o;
},{}],"nTDF":[function(require,module,exports) {
var r=require("../geom/circle/Random"),e=function(e,o){for(var n=0;n<e.length;n++)r(o,e[n]);return e};module.exports=e;
},{"../geom/circle/Random":"LFnE"}],"DzNa":[function(require,module,exports) {
var t=require("../point/Point"),a=function(a,r){void 0===r&&(r=new t);var h=Math.random()*Math.PI*2,n=Math.sqrt(Math.random());return r.x=a.x+n*Math.cos(h)*a.width/2,r.y=a.y+n*Math.sin(h)*a.height/2,r};module.exports=a;
},{"../point/Point":"tZ6A"}],"atRT":[function(require,module,exports) {
var e=require("../geom/ellipse/Random"),r=function(r,o){for(var n=0;n<r.length;n++)e(o,r[n]);return r};module.exports=r;
},{"../geom/ellipse/Random":"DzNa"}],"XyLe":[function(require,module,exports) {
var e=require("../geom/line/Random"),r=function(r,n){for(var o=0;o<r.length;o++)e(n,r[o]);return r};module.exports=r;
},{"../geom/line/Random":"pD6t"}],"yiFJ":[function(require,module,exports) {
var e=require("../geom/rectangle/Random"),r=function(r,n){for(var o=0;o<r.length;o++)e(n,r[o]);return r};module.exports=r;
},{"../geom/rectangle/Random":"ylKO"}],"Agdn":[function(require,module,exports) {
var r=require("../point/Point"),n=function(n,o){void 0===o&&(o=new r);var t=n.x2-n.x1,x=n.y2-n.y1,a=n.x3-n.x1,e=n.y3-n.y1,y=Math.random(),i=Math.random();return y+i>=1&&(y=1-y,i=1-i),o.x=n.x1+(t*y+a*i),o.y=n.y1+(x*y+e*i),o};module.exports=n;
},{"../point/Point":"tZ6A"}],"LgPf":[function(require,module,exports) {
var r=require("../geom/triangle/Random"),e=function(e,n){for(var o=0;o<e.length;o++)r(n,e[o]);return e};module.exports=e;
},{"../geom/triangle/Random":"Agdn"}],"srFm":[function(require,module,exports) {
var r=require("./PropertyValueInc"),e=function(e,o,t,n,u){return r(e,"rotation",o,t,n,u)};module.exports=e;
},{"./PropertyValueInc":"TgJ2"}],"nFdD":[function(require,module,exports) {
var a=function(a,t,n,r,o){var e=r+Math.atan2(a.y-n,a.x-t);return a.x=t+o*Math.cos(e),a.y=n+o*Math.sin(e),a};module.exports=a;
},{}],"akRU":[function(require,module,exports) {
var r=function(r,t,a,e){var n=r-a,o=t-e;return Math.sqrt(n*n+o*o)};module.exports=r;
},{}],"pVFV":[function(require,module,exports) {
var e=require("../math/RotateAroundDistance"),t=require("../math/distance/DistanceBetween"),r=function(r,a,n){for(var i=a.x,o=a.y,u=0;u<r.length;u++){var c=r[u];e(c,i,o,n,Math.max(1,t(c.x,c.y,i,o)))}return r};module.exports=r;
},{"../math/RotateAroundDistance":"nFdD","../math/distance/DistanceBetween":"akRU"}],"Tgog":[function(require,module,exports) {
var r=require("../math/RotateAroundDistance"),e=function(e,t,n,a){var o=t.x,u=t.y;if(0===a)return e;for(var i=0;i<e.length;i++)r(e[i],o,u,n,a);return e};module.exports=e;
},{"../math/RotateAroundDistance":"nFdD"}],"pJe9":[function(require,module,exports) {
var e=require("./PropertyValueInc"),r=function(r,u,n,o,t){return e(r,"scaleX",u,n,o,t)};module.exports=r;
},{"./PropertyValueInc":"TgJ2"}],"D9QF":[function(require,module,exports) {
var e=require("./PropertyValueInc"),r=function(r,l,u,n,a,c,o){return null==u&&(u=l),e(r,"scaleX",l,n,c,o),e(r,"scaleY",u,a,c,o)};module.exports=r;
},{"./PropertyValueInc":"TgJ2"}],"YL1f":[function(require,module,exports) {
var e=require("./PropertyValueInc"),r=function(r,u,n,o,t){return e(r,"scaleY",u,n,o,t)};module.exports=r;
},{"./PropertyValueInc":"TgJ2"}],"j77M":[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,t,u,a,o){return e(r,"alpha",t,u,a,o)};module.exports=r;
},{"./PropertyValueSet":"u7Mw"}],"BNkF":[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,o,t,u){return e(r,"blendMode",o,0,t,u)};module.exports=r;
},{"./PropertyValueSet":"u7Mw"}],"Ud58":[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,t,u,o,n){return e(r,"depth",t,u,o,n)};module.exports=r;
},{"./PropertyValueSet":"u7Mw"}],"h6tu":[function(require,module,exports) {
var e=function(e,r,t){for(var n=0;n<e.length;n++)e[n].setInteractive(r,t);return e};module.exports=e;
},{}],"WUcp":[function(require,module,exports) {
var r=require("./PropertyValueSet"),e=function(e,i,n,o,u,t,l){return null==n&&(n=i),r(e,"originX",i,o,t,l),r(e,"originY",n,u,t,l)};module.exports=e;
},{"./PropertyValueSet":"u7Mw"}],"Gfoy":[function(require,module,exports) {
var r=require("./PropertyValueSet"),e=function(e,t,o,u,n){return r(e,"rotation",t,o,u,n)};module.exports=e;
},{"./PropertyValueSet":"u7Mw"}],"hDi0":[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,l,u,t,a,n,o){return null==u&&(u=l),e(r,"scaleX",l,t,n,o),e(r,"scaleY",u,a,n,o)};module.exports=r;
},{"./PropertyValueSet":"u7Mw"}],"iV0w":[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,t,u,o,a){return e(r,"scaleX",t,u,o,a)};module.exports=r;
},{"./PropertyValueSet":"u7Mw"}],"cZBS":[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,t,u,o,a){return e(r,"scaleY",t,u,o,a)};module.exports=r;
},{"./PropertyValueSet":"u7Mw"}],"XESl":[function(require,module,exports) {
var r=require("./PropertyValueSet"),e=function(e,l,o,t,u,c,a){return null==o&&(o=l),r(e,"scrollFactorX",l,t,c,a),r(e,"scrollFactorY",o,u,c,a)};module.exports=e;
},{"./PropertyValueSet":"u7Mw"}],"mgeu":[function(require,module,exports) {
var r=require("./PropertyValueSet"),e=function(e,o,t,u,l){return r(e,"scrollFactorX",o,t,u,l)};module.exports=e;
},{"./PropertyValueSet":"u7Mw"}],"QWyy":[function(require,module,exports) {
var r=require("./PropertyValueSet"),e=function(e,o,t,u,l){return r(e,"scrollFactorY",o,t,u,l)};module.exports=e;
},{"./PropertyValueSet":"u7Mw"}],"LaEN":[function(require,module,exports) {
var r=function(r,t,e,n,o){for(var u=0;u<r.length;u++)r[u].setTint(t,e,n,o);return r};module.exports=r;
},{}],"VrxD":[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,t,u,i){return e(r,"visible",t,0,u,i)};module.exports=r;
},{"./PropertyValueSet":"u7Mw"}],"Wugu":[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,t,u,o,n){return e(r,"x",t,u,o,n)};module.exports=r;
},{"./PropertyValueSet":"u7Mw"}],"dhXP":[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,u,t,l,n,o,a){return null==t&&(t=u),e(r,"x",u,l,o,a),e(r,"y",t,n,o,a)};module.exports=r;
},{"./PropertyValueSet":"u7Mw"}],"jVXm":[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,t,u,o,n){return e(r,"y",t,u,o,n)};module.exports=r;
},{"./PropertyValueSet":"u7Mw"}],"SbMl":[function(require,module,exports) {
var e=require("../math/Vector2"),x=function(x,r,y,o,t){var n,i,l,f,v,a;if(void 0===o&&(o=0),void 0===t&&(t=new e),x.length>1)if(0===o){var h=x.length-1;for(n=x[h].x,i=x[h].y,l=h-1;l>=0;l--)f=(a=x[l]).x,v=a.y,a.x=n,a.y=i,n=f,i=v;x[h].x=r,x[h].y=y}else{for(n=x[0].x,i=x[0].y,l=1;l<x.length;l++)f=(a=x[l]).x,v=a.y,a.x=n,a.y=i,n=f,i=v;x[0].x=r,x[0].y=y}else n=x[0].x,i=x[0].y,x[0].x=r,x[0].y=y;return t.x=n,t.y=i,t};module.exports=x;
},{"../math/Vector2":"xARF"}],"NCMc":[function(require,module,exports) {
var r=function(r){for(var o=r.length-1;o>0;o--){var a=Math.floor(Math.random()*(o+1)),t=r[o];r[o]=r[a],r[a]=t}return r};module.exports=r;
},{}],"MjOr":[function(require,module,exports) {
var r=require("../utils/array/Shuffle"),e=function(e){return r(e)};module.exports=e;
},{"../utils/array/Shuffle":"NCMc"}],"HROE":[function(require,module,exports) {
var t=function(t,a,n){return(t=Math.max(0,Math.min(1,(t-a)/(n-a))))*t*t*(t*(6*t-15)+10)};module.exports=t;
},{}],"K2Mx":[function(require,module,exports) {
var e=require("../math/SmootherStep"),r=function(r,t,o,h,n){void 0===n&&(n=!1);var a,l=Math.abs(h-o)/r.length;if(n)for(a=0;a<r.length;a++)r[a][t]+=e(a*l,o,h);else for(a=0;a<r.length;a++)r[a][t]=e(a*l,o,h);return r};module.exports=r;
},{"../math/SmootherStep":"HROE"}],"LBL7":[function(require,module,exports) {
var r=function(r,e,n){return r<=e?0:r>=n?1:(r=(r-e)/(n-e))*r*(3-2*r)};module.exports=r;
},{}],"flZU":[function(require,module,exports) {
var e=require("../math/SmoothStep"),t=function(t,r,o,h,n){void 0===n&&(n=!1);var a,l=Math.abs(h-o)/t.length;if(n)for(a=0;a<t.length;a++)t[a][r]+=e(a*l,o,h);else for(a=0;a<t.length;a++)t[a][r]=e(a*l,o,h);return t};module.exports=t;
},{"../math/SmoothStep":"LBL7"}],"PJ0U":[function(require,module,exports) {
var e=function(e,r,t,n,o){void 0===o&&(o=!1);var l,a=Math.abs(n-t)/e.length;if(o)for(l=0;l<e.length;l++)e[l][r]+=l*a+t;else for(l=0;l<e.length;l++)e[l][r]=l*a+t;return e};module.exports=e;
},{}],"RDfd":[function(require,module,exports) {
var e=function(e){for(var r=0;r<e.length;r++)e[r].visible=!e[r].visible;return e};module.exports=e;
},{}],"aZdB":[function(require,module,exports) {
var r=require("../math/Wrap"),t=function(t,o,e){void 0===e&&(e=0);for(var a=0;a<t.length;a++){var i=t[a];i.x=r(i.x,o.left-e,o.right+e),i.y=r(i.y,o.top-e,o.bottom+e)}return t};module.exports=t;
},{"../math/Wrap":"gwbj"}],"ehJJ":[function(require,module,exports) {
module.exports={AlignTo:require("./AlignTo"),Angle:require("./Angle"),Call:require("./Call"),GetFirst:require("./GetFirst"),GetLast:require("./GetLast"),GridAlign:require("./GridAlign"),IncAlpha:require("./IncAlpha"),IncX:require("./IncX"),IncXY:require("./IncXY"),IncY:require("./IncY"),PlaceOnCircle:require("./PlaceOnCircle"),PlaceOnEllipse:require("./PlaceOnEllipse"),PlaceOnLine:require("./PlaceOnLine"),PlaceOnRectangle:require("./PlaceOnRectangle"),PlaceOnTriangle:require("./PlaceOnTriangle"),PlayAnimation:require("./PlayAnimation"),PropertyValueInc:require("./PropertyValueInc"),PropertyValueSet:require("./PropertyValueSet"),RandomCircle:require("./RandomCircle"),RandomEllipse:require("./RandomEllipse"),RandomLine:require("./RandomLine"),RandomRectangle:require("./RandomRectangle"),RandomTriangle:require("./RandomTriangle"),Rotate:require("./Rotate"),RotateAround:require("./RotateAround"),RotateAroundDistance:require("./RotateAroundDistance"),ScaleX:require("./ScaleX"),ScaleXY:require("./ScaleXY"),ScaleY:require("./ScaleY"),SetAlpha:require("./SetAlpha"),SetBlendMode:require("./SetBlendMode"),SetDepth:require("./SetDepth"),SetHitArea:require("./SetHitArea"),SetOrigin:require("./SetOrigin"),SetRotation:require("./SetRotation"),SetScale:require("./SetScale"),SetScaleX:require("./SetScaleX"),SetScaleY:require("./SetScaleY"),SetScrollFactor:require("./SetScrollFactor"),SetScrollFactorX:require("./SetScrollFactorX"),SetScrollFactorY:require("./SetScrollFactorY"),SetTint:require("./SetTint"),SetVisible:require("./SetVisible"),SetX:require("./SetX"),SetXY:require("./SetXY"),SetY:require("./SetY"),ShiftPosition:require("./ShiftPosition"),Shuffle:require("./Shuffle"),SmootherStep:require("./SmootherStep"),SmoothStep:require("./SmoothStep"),Spread:require("./Spread"),ToggleVisible:require("./ToggleVisible"),WrapInRectangle:require("./WrapInRectangle")};
},{"./AlignTo":"ZUZH","./Angle":"kj0l","./Call":"kehH","./GetFirst":"FulG","./GetLast":"FulG","./GridAlign":"v3pG","./IncAlpha":"Swvj","./IncX":"dEB5","./IncXY":"OKqY","./IncY":"rpW5","./PlaceOnCircle":"E0lT","./PlaceOnEllipse":"j68B","./PlaceOnLine":"XEUb","./PlaceOnRectangle":"istj","./PlaceOnTriangle":"HKqE","./PlayAnimation":"Yd5l","./PropertyValueInc":"TgJ2","./PropertyValueSet":"u7Mw","./RandomCircle":"nTDF","./RandomEllipse":"atRT","./RandomLine":"XyLe","./RandomRectangle":"yiFJ","./RandomTriangle":"LgPf","./Rotate":"srFm","./RotateAround":"pVFV","./RotateAroundDistance":"Tgog","./ScaleX":"pJe9","./ScaleXY":"D9QF","./ScaleY":"YL1f","./SetAlpha":"j77M","./SetBlendMode":"BNkF","./SetDepth":"Ud58","./SetHitArea":"h6tu","./SetOrigin":"WUcp","./SetRotation":"Gfoy","./SetScale":"hDi0","./SetScaleX":"iV0w","./SetScaleY":"cZBS","./SetScrollFactor":"XESl","./SetScrollFactorX":"mgeu","./SetScrollFactorY":"QWyy","./SetTint":"LaEN","./SetVisible":"VrxD","./SetX":"Wugu","./SetXY":"dhXP","./SetY":"jVXm","./ShiftPosition":"SbMl","./Shuffle":"MjOr","./SmootherStep":"K2Mx","./SmoothStep":"flZU","./Spread":"PJ0U","./ToggleVisible":"RDfd","./WrapInRectangle":"aZdB"}],"t7Q5":[function(require,module,exports) {
var t=require("../utils/Class"),e=new t({initialize:function(t){if(this.entries={},this.size=0,Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e][0],t[e][1])},set:function(t,e){return this.has(t)||this.size++,this.entries[t]=e,this},get:function(t){if(this.has(t))return this.entries[t]},getArray:function(){var t=[],e=this.entries;for(var i in e)t.push(e[i]);return t},has:function(t){return this.entries.hasOwnProperty(t)},delete:function(t){return this.has(t)&&(delete this.entries[t],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(t){delete this.entries[t]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var t=[],e=this.entries;for(var i in e)t.push(e[i]);return t},dump:function(){var t=this.entries;for(var e in console.group("Map"),t)console.log(e,t[e]);console.groupEnd()},each:function(t){var e=this.entries;for(var i in e)if(!1===t(i,e[i]))break;return this},contains:function(t){var e=this.entries;for(var i in e)if(e[i]===t)return!0;return!1},merge:function(t,e){void 0===e&&(e=!1);var i=this.entries,r=t.entries;for(var n in r)i.hasOwnProperty(n)&&e?i[n]=r[n]:this.set(n,r[n]);return this}});module.exports=e;
},{"../utils/Class":"Q4x4"}],"KR4z":[function(require,module,exports) {
var e=function(e,r,n,a){void 0===r&&(r=0),void 0===n&&(n=" "),void 0===a&&(a=3);var i=0;if(r+1>=(e=e.toString()).length)switch(a){case 1:e=new Array(r+1-e.length).join(n)+e;break;case 3:var t=Math.ceil((i=r-e.length)/2);e=new Array(i-t+1).join(n)+e+new Array(t+1).join(n);break;default:e+=new Array(r+1-e.length).join(n)}return e};module.exports=e;
},{}],"t0IG":[function(require,module,exports) {
var e=require("./Animation"),t=require("../utils/Class"),r=require("../structs/Map"),i=require("eventemitter3"),s=require("./events"),a=require("../core/events"),n=require("../utils/object/GetValue"),h=require("../utils/string/Pad"),u=new t({Extends:i,initialize:function(e){i.call(this),this.game=e,this.textureManager=null,this.globalTimeScale=1,this.anims=new r,this.paused=!1,this.name="AnimationManager",e.events.once(a.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(a.DESTROY,this.destroy,this)},add:function(e,t){return this.anims.has(e)?(console.warn("Animation key exists: "+e),this):(t.key=e,this.anims.set(e,t),this.emit(s.ADD_ANIMATION,e,t),this)},exists:function(e){return this.anims.has(e)},create:function(t){var r=t.key,i=!1;return r&&((i=this.get(r))||(i=new e(this,r,t),this.anims.set(r,i),this.emit(s.ADD_ANIMATION,r,i))),i},fromJSON:function(e,t){void 0===t&&(t=!1),t&&this.anims.clear(),"string"==typeof e&&(e=JSON.parse(e));var r=[];if(e.hasOwnProperty("anims")&&Array.isArray(e.anims)){for(var i=0;i<e.anims.length;i++)r.push(this.create(e.anims[i]));e.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=e.globalTimeScale)}else e.hasOwnProperty("key")&&"frame"===e.type&&r.push(this.create(e));return r},generateFrameNames:function(e,t){var r=n(t,"prefix",""),i=n(t,"start",0),s=n(t,"end",0),a=n(t,"suffix",""),u=n(t,"zeroPad",0),o=n(t,"outputArray",[]),m=n(t,"frames",!1),l=this.textureManager.get(e);if(!l)return o;var f,g,c=i<s?1:-1;if(s+=c,t)if(Array.isArray(m))for(f=0;f<m.length;f++)g=r+h(m[f],u,"0",1)+a,l.has(g)&&o.push({key:e,frame:g});else for(f=i;f!==s;f+=c)g=r+h(f,u,"0",1)+a,l.has(g)&&o.push({key:e,frame:g});else for(m=l.getFrameNames(),f=0;f<m.length;f++)o.push({key:e,frame:m[f]});return o},generateFrameNumbers:function(e,t){var r,i=n(t,"start",0),s=n(t,"end",-1),a=n(t,"first",!1),h=n(t,"outputArray",[]),u=n(t,"frames",!1),o=this.textureManager.get(e);if(!o)return h;if(a&&o.has(a)&&h.push({key:e,frame:a}),Array.isArray(u))for(r=0;r<u.length;r++)o.has(u[r])&&h.push({key:e,frame:u[r]});else{-1===s&&(s=o.frameTotal);var m=i<s?1:-1;for(s+=m,r=i;r!==s;r+=m)o.has(r)&&h.push({key:e,frame:r})}return h},get:function(e){return this.anims.get(e)},load:function(e,t,r){var i=this.get(t);return i?i.load(e,r):console.warn("Missing animation: "+t),e},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(s.PAUSE_ALL)),this},play:function(e,t){if(Array.isArray(t)||(t=[t]),!this.get(e))return this;for(var r=0;r<t.length;r++)t[r].anims.play(e);return this},remove:function(e){var t=this.get(e);return t&&(this.emit(s.REMOVE_ANIMATION,e,t),this.anims.delete(e)),t},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(s.RESUME_ALL)),this},staggerPlay:function(e,t,r){if(void 0===r&&(r=0),Array.isArray(t)||(t=[t]),!this.get(e))return this;for(var i=0;i<t.length;i++)t[i].anims.delayedPlay(r*i,e);return this},toJSON:function(e){var t={anims:[],globalTimeScale:this.globalTimeScale};return void 0!==e&&""!==e?t.anims.push(this.anims.get(e).toJSON()):this.anims.each(function(e,r){t.anims.push(r.toJSON())}),t},destroy:function(){this.anims.clear(),this.textureManager=null,this.game=null}});module.exports=u;
},{"./Animation":"QlCu","../utils/Class":"Q4x4","../structs/Map":"t7Q5","eventemitter3":"Clm3","./events":"bW0C","../core/events":"ZroQ","../utils/object/GetValue":"FWyS","../utils/string/Pad":"KR4z"}],"u6Tx":[function(require,module,exports) {
module.exports={Animation:require("./Animation"),AnimationFrame:require("./AnimationFrame"),AnimationManager:require("./AnimationManager"),Events:require("./events")};
},{"./Animation":"QlCu","./AnimationFrame":"p0nD","./AnimationManager":"t0IG","./events":"bW0C"}],"XbE8":[function(require,module,exports) {
module.exports={ADD:require("./ADD_EVENT"),REMOVE:require("./REMOVE_EVENT")};
},{"./ADD_EVENT":"S3Vj","./REMOVE_EVENT":"fEBO"}],"JjGX":[function(require,module,exports) {
var e=require("../utils/Class"),t=require("../structs/Map"),s=require("eventemitter3"),i=require("./events"),n=new e({initialize:function(){this.entries=new t,this.events=new s},add:function(e,t){return this.entries.set(e,t),this.events.emit(i.ADD,this,e,t),this},has:function(e){return this.entries.has(e)},exists:function(e){return this.entries.has(e)},get:function(e){return this.entries.get(e)},remove:function(e){var t=this.get(e);return t&&(this.entries.delete(e),this.events.emit(i.REMOVE,this,e,t.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});module.exports=n;
},{"../utils/Class":"Q4x4","../structs/Map":"t7Q5","eventemitter3":"Clm3","./events":"XbE8"}],"geKa":[function(require,module,exports) {
var t=require("./BaseCache"),s=require("../utils/Class"),i=require("../core/events"),e=new s({initialize:function(s){this.game=s,this.binary=new t,this.bitmapFont=new t,this.json=new t,this.physics=new t,this.shader=new t,this.audio=new t,this.video=new t,this.text=new t,this.html=new t,this.obj=new t,this.tilemap=new t,this.xml=new t,this.custom={},this.game.events.once(i.DESTROY,this.destroy,this)},addCustom:function(s){return this.custom.hasOwnProperty(s)||(this.custom[s]=new t),this.custom[s]},destroy:function(){for(var t=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],s=0;s<t.length;s++)this[t[s]].destroy(),this[t[s]]=null;for(var i in this.custom)this.custom[i].destroy();this.custom=null,this.game=null}});module.exports=e;
},{"./BaseCache":"JjGX","../utils/Class":"Q4x4","../core/events":"ZroQ"}],"KyqC":[function(require,module,exports) {
module.exports={BaseCache:require("./BaseCache"),CacheManager:require("./CacheManager"),Events:require("./events")};
},{"./BaseCache":"JjGX","./CacheManager":"geKa","./events":"XbE8"}],"JQDc":[function(require,module,exports) {
var t=require("../../utils/Class"),s=require("../../utils/object/GetValue"),i=new t({initialize:function(t){this.camera=s(t,"camera",null),this.left=s(t,"left",null),this.right=s(t,"right",null),this.up=s(t,"up",null),this.down=s(t,"down",null),this.zoomIn=s(t,"zoomIn",null),this.zoomOut=s(t,"zoomOut",null),this.zoomSpeed=s(t,"zoomSpeed",.01),this.speedX=0,this.speedY=0;var i=s(t,"speed",null);"number"==typeof i?(this.speedX=i,this.speedY=i):(this.speedX=s(t,"speed.x",0),this.speedY=s(t,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){if(this.active){void 0===t&&(t=1);var s=this.camera;this.up&&this.up.isDown?s.scrollY-=this.speedY*t|0:this.down&&this.down.isDown&&(s.scrollY+=this.speedY*t|0),this.left&&this.left.isDown?s.scrollX-=this.speedX*t|0:this.right&&this.right.isDown&&(s.scrollX+=this.speedX*t|0),this.zoomIn&&this.zoomIn.isDown?(s.zoom-=this.zoomSpeed,s.zoom<.1&&(s.zoom=.1)):this.zoomOut&&this.zoomOut.isDown&&(s.zoom+=this.zoomSpeed)}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});module.exports=i;
},{"../../utils/Class":"Q4x4","../../utils/object/GetValue":"FWyS"}],"WGD8":[function(require,module,exports) {
var e=require("../../utils/Class"),s=require("../../utils/object/GetValue"),t=new e({initialize:function(e){this.camera=s(e,"camera",null),this.left=s(e,"left",null),this.right=s(e,"right",null),this.up=s(e,"up",null),this.down=s(e,"down",null),this.zoomIn=s(e,"zoomIn",null),this.zoomOut=s(e,"zoomOut",null),this.zoomSpeed=s(e,"zoomSpeed",.01),this.accelX=0,this.accelY=0;var t=s(e,"acceleration",null);"number"==typeof t?(this.accelX=t,this.accelY=t):(this.accelX=s(e,"acceleration.x",0),this.accelY=s(e,"acceleration.y",0)),this.dragX=0,this.dragY=0;var i=s(e,"drag",null);"number"==typeof i?(this.dragX=i,this.dragY=i):(this.dragX=s(e,"drag.x",0),this.dragY=s(e,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var h=s(e,"maxSpeed",null);"number"==typeof h?(this.maxSpeedX=h,this.maxSpeedY=h):(this.maxSpeedX=s(e,"maxSpeed.x",0),this.maxSpeedY=s(e,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(e){return this.camera=e,this},update:function(e){if(this.active){void 0===e&&(e=1);var s=this.camera;this._speedX>0?(this._speedX-=this.dragX*e,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*e,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*e,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*e,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,0!==this._speedX&&(s.scrollX-=this._speedX*e|0),0!==this._speedY&&(s.scrollY-=this._speedY*e|0),0!==this._zoom&&(s.zoom+=this._zoom,s.zoom<.001&&(s.zoom=.001))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});module.exports=t;
},{"../../utils/Class":"Q4x4","../../utils/object/GetValue":"FWyS"}],"sEbf":[function(require,module,exports) {
module.exports={FixedKeyControl:require("./FixedKeyControl"),SmoothedKeyControl:require("./SmoothedKeyControl")};
},{"./FixedKeyControl":"JQDc","./SmoothedKeyControl":"WGD8"}],"hvs6":[function(require,module,exports) {
module.exports="cameradestroy";
},{}],"bDOh":[function(require,module,exports) {
module.exports="camerafadeincomplete";
},{}],"b7D1":[function(require,module,exports) {
module.exports="camerafadeinstart";
},{}],"hjQw":[function(require,module,exports) {
module.exports="camerafadeoutcomplete";
},{}],"Z33c":[function(require,module,exports) {
module.exports="camerafadeoutstart";
},{}],"UkWK":[function(require,module,exports) {
module.exports="cameraflashcomplete";
},{}],"RhTL":[function(require,module,exports) {
module.exports="cameraflashstart";
},{}],"Xn0U":[function(require,module,exports) {
module.exports="camerapancomplete";
},{}],"Cg15":[function(require,module,exports) {
module.exports="camerapanstart";
},{}],"w2cZ":[function(require,module,exports) {
module.exports="camerarotatecomplete";
},{}],"nq9i":[function(require,module,exports) {
module.exports="camerarotatestart";
},{}],"srN4":[function(require,module,exports) {
module.exports="camerashakecomplete";
},{}],"iGfT":[function(require,module,exports) {
module.exports="camerashakestart";
},{}],"bIZR":[function(require,module,exports) {
module.exports="camerazoomcomplete";
},{}],"SgWn":[function(require,module,exports) {
module.exports="camerazoomstart";
},{}],"rVjJ":[function(require,module,exports) {
module.exports={DESTROY:require("./DESTROY_EVENT"),FADE_IN_COMPLETE:require("./FADE_IN_COMPLETE_EVENT"),FADE_IN_START:require("./FADE_IN_START_EVENT"),FADE_OUT_COMPLETE:require("./FADE_OUT_COMPLETE_EVENT"),FADE_OUT_START:require("./FADE_OUT_START_EVENT"),FLASH_COMPLETE:require("./FLASH_COMPLETE_EVENT"),FLASH_START:require("./FLASH_START_EVENT"),PAN_COMPLETE:require("./PAN_COMPLETE_EVENT"),PAN_START:require("./PAN_START_EVENT"),POST_RENDER:require("./POST_RENDER_EVENT"),PRE_RENDER:require("./PRE_RENDER_EVENT"),ROTATE_COMPLETE:require("./ROTATE_COMPLETE_EVENT"),ROTATE_START:require("./ROTATE_START_EVENT"),SHAKE_COMPLETE:require("./SHAKE_COMPLETE_EVENT"),SHAKE_START:require("./SHAKE_START_EVENT"),ZOOM_COMPLETE:require("./ZOOM_COMPLETE_EVENT"),ZOOM_START:require("./ZOOM_START_EVENT")};
},{"./DESTROY_EVENT":"hvs6","./FADE_IN_COMPLETE_EVENT":"bDOh","./FADE_IN_START_EVENT":"b7D1","./FADE_OUT_COMPLETE_EVENT":"hjQw","./FADE_OUT_START_EVENT":"Z33c","./FLASH_COMPLETE_EVENT":"UkWK","./FLASH_START_EVENT":"RhTL","./PAN_COMPLETE_EVENT":"Xn0U","./PAN_START_EVENT":"Cg15","./POST_RENDER_EVENT":"tsTZ","./PRE_RENDER_EVENT":"hasp","./ROTATE_COMPLETE_EVENT":"w2cZ","./ROTATE_START_EVENT":"nq9i","./SHAKE_COMPLETE_EVENT":"srN4","./SHAKE_START_EVENT":"iGfT","./ZOOM_COMPLETE_EVENT":"bIZR","./ZOOM_START_EVENT":"SgWn"}],"TE0Y":[function(require,module,exports) {
var r=function(r,e,n){return r<<16|e<<8|n};module.exports=r;
},{}],"Cc4v":[function(require,module,exports) {
var r=function(r,e,n,o){return o<<24|r<<16|e<<8|n};module.exports=r;
},{}],"p4NX":[function(require,module,exports) {
var o=require("./GetColor"),r=function(r,t,l,a){void 0===t&&(t=1),void 0===l&&(l=1);var e=Math.floor(6*r),f=6*r-e,h=Math.floor(l*(1-t)*255),M=Math.floor(l*(1-f*t)*255),i=Math.floor(l*(1-(1-f)*t)*255),u=l=Math.floor(l*=255),v=l,c=l,d=e%6;return 0===d?(v=i,c=h):1===d?(u=M,c=h):2===d?(u=h,c=i):3===d?(u=h,v=M):4===d?(u=i,v=h):5===d&&(v=h,c=M),a?a.setTo?a.setTo(u,v,c,a.alpha,!1):(a.r=u,a.g=v,a.b=c,a.color=o(u,v,c),a):{r:u,g:v,b:c,color:o(u,v,c)}};module.exports=r;
},{"./GetColor":"TE0Y"}],"hE7a":[function(require,module,exports) {
var h=function(h,r,a,t){void 0===t&&(t={h:0,s:0,v:0}),h/=255,r/=255,a/=255;var v=Math.min(h,r,a),n=Math.max(h,r,a),o=n-v,s=0,e=0===n?0:o/n,_=n;return n!==v&&(n===h?s=(r-a)/o+(r<a?6:0):n===r?s=(a-h)/o+2:n===a&&(s=(h-r)/o+4),s/=6),t.hasOwnProperty("_h")?(t._h=s,t._s=e,t._v=_):(t.h=s,t.s=e,t.v=_),t};module.exports=h;
},{}],"f7cv":[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("./GetColor"),h=require("./GetColor32"),s=require("./HSVToRGB"),n=require("./RGBToHSV"),r=new t({initialize:function(t,i,h,s){void 0===t&&(t=0),void 0===i&&(i=0),void 0===h&&(h=0),void 0===s&&(s=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,i,h,s)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(t,i,h,s,n){return void 0===s&&(s=255),void 0===n&&(n=!0),this._locked=!0,this.red=t,this.green=i,this.blue=h,this.alpha=s,this._locked=!1,this.update(n)},setGLTo:function(t,i,h,s){return void 0===s&&(s=1),this._locked=!0,this.redGL=t,this.greenGL=i,this.blueGL=h,this.alphaGL=s,this._locked=!1,this.update(!0)},setFromRGB:function(t){return this._locked=!0,this.red=t.r,this.green=t.g,this.blue=t.b,t.hasOwnProperty("a")&&(this.alpha=t.a),this._locked=!1,this.update(!0)},setFromHSV:function(t,i,h){return s(t,i,h,this)},update:function(t){if(void 0===t&&(t=!1),this._locked)return this;var s=this.r,r=this.g,e=this.b,o=this.a;return this._color=i(s,r,e),this._color32=h(s,r,e,o),this._rgba="rgba("+s+","+r+","+e+","+o/255+")",t&&n(s,r,e,this),this},updateHSV:function(){var t=this.r,i=this.g,h=this.b;return n(t,i,h,this),this},clone:function(){return new r(this.r,this.g,this.b,this.a)},gray:function(t){return this.setTo(t,t,t)},random:function(t,i){void 0===t&&(t=0),void 0===i&&(i=255);var h=Math.floor(t+Math.random()*(i-t)),s=Math.floor(t+Math.random()*(i-t)),n=Math.floor(t+Math.random()*(i-t));return this.setTo(h,s,n)},randomGray:function(t,i){void 0===t&&(t=0),void 0===i&&(i=255);var h=Math.floor(t+Math.random()*(i-t));return this.setTo(h,h,h)},saturate:function(t){return this.s+=t/100,this},desaturate:function(t){return this.s-=t/100,this},lighten:function(t){return this.v+=t/100,this},darken:function(t){return this.v-=t/100,this},brighten:function(t){var i=this.r,h=this.g,s=this.b;return i=Math.max(0,Math.min(255,i-Math.round(-t/100*255))),h=Math.max(0,Math.min(255,h-Math.round(-t/100*255))),s=Math.max(0,Math.min(255,s-Math.round(-t/100*255))),this.setTo(i,h,s)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(t){this.gl[0]=Math.min(Math.abs(t),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(t){this.gl[1]=Math.min(Math.abs(t),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(t){this.gl[2]=Math.min(Math.abs(t),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(t){this.gl[3]=Math.min(Math.abs(t),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(t){t=Math.floor(Math.abs(t)),this.r=Math.min(t,255),this.gl[0]=t/255,this.update(!0)}},green:{get:function(){return this.g},set:function(t){t=Math.floor(Math.abs(t)),this.g=Math.min(t,255),this.gl[1]=t/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(t){t=Math.floor(Math.abs(t)),this.b=Math.min(t,255),this.gl[2]=t/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(t){t=Math.floor(Math.abs(t)),this.a=Math.min(t,255),this.gl[3]=t/255,this.update()}},h:{get:function(){return this._h},set:function(t){this._h=t,s(t,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(t){this._s=t,s(this._h,t,this._v,this)}},v:{get:function(){return this._v},set:function(t){this._v=t,s(this._h,this._s,t,this)}}});module.exports=r;
},{"../../utils/Class":"Q4x4","./GetColor":"TE0Y","./GetColor32":"Cc4v","./HSVToRGB":"p4NX","./RGBToHSV":"hE7a"}],"L8Gv":[function(require,module,exports) {
var r=require("./Color"),e=function(e){var a=new r;e=e.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(r,e,a,n){return e+e+a+a+n+n});var n=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(n){var f=parseInt(n[1],16),t=parseInt(n[2],16),d=parseInt(n[3],16);a.setTo(f,t,d)}return a};module.exports=e;
},{"./Color":"f7cv"}],"f5Fl":[function(require,module,exports) {
var r=function(r){return r>16777215?{a:r>>>24,r:r>>16&255,g:r>>8&255,b:255&r}:{a:255,r:r>>16&255,g:r>>8&255,b:255&r}};module.exports=r;
},{}],"PJMi":[function(require,module,exports) {
var r=require("./Color"),e=require("./IntegerToRGB"),o=function(o){var n=e(o);return new r(n.r,n.g,n.b,n.a)};module.exports=o;
},{"./Color":"f7cv","./IntegerToRGB":"f5Fl"}],"djQZ":[function(require,module,exports) {
var r=require("./Color"),e=function(e){return new r(e.r,e.g,e.b,e.a)};module.exports=e;
},{"./Color":"f7cv"}],"gtHM":[function(require,module,exports) {
var e=require("./Color"),r=function(r){var s=new e,a=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(r.toLowerCase());if(a){var o=parseInt(a[1],10),t=parseInt(a[2],10),d=parseInt(a[3],10),n=void 0!==a[4]?parseFloat(a[4]):1;s.setTo(o,t,d,255*n)}return s};module.exports=r;
},{"./Color":"f7cv"}],"Q1dy":[function(require,module,exports) {
var r=require("./HexStringToColor"),e=require("./IntegerToColor"),o=require("./ObjectToColor"),t=require("./RGBStringToColor"),u=function(u){switch(typeof u){case"string":return"rgb"===u.substr(0,3).toLowerCase()?t(u):r(u);case"number":return e(u);case"object":return o(u)}};module.exports=u;
},{"./HexStringToColor":"L8Gv","./IntegerToColor":"PJMi","./ObjectToColor":"djQZ","./RGBStringToColor":"gtHM"}],"ZcMy":[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("../../gameobjects/components"),s=require("../../math/DegToRad"),h=require("eventemitter3"),e=require("./events"),r=require("../../geom/rectangle/Rectangle"),n=require("../../gameobjects/components/TransformMatrix"),o=require("../../display/color/ValueToColor"),u=require("../../math/Vector2"),a=new t({Extends:h,Mixins:[i.Alpha,i.Visible],initialize:function(t,i,s,e){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===e&&(e=0),h.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.resolution=1,this.roundPixels=!1,this.useBounds=!1,this.worldView=new r,this.dirty=!0,this._x=t,this._y=i,this._cx=0,this._cy=0,this._cw=0,this._ch=0,this._width=s,this._height=e,this._bounds=new r,this._scrollX=0,this._scrollY=0,this._zoom=1,this._rotation=0,this.matrix=new n,this.transparent=!0,this.backgroundColor=o("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new u(s/2,e/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null},setOrigin:function(t,i){return void 0===t&&(t=.5),void 0===i&&(i=t),this.originX=t,this.originY=i,this},getScroll:function(t,i,s){void 0===s&&(s=new u);var h=.5*this.width,e=.5*this.height;return s.x=t-h,s.y=i-e,this.useBounds&&(s.x=this.clampX(s.x),s.y=this.clampY(s.y)),s},centerOnX:function(t){var i=.5*this.width;return this.midPoint.x=t,this.scrollX=t-i,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(t){var i=.5*this.height;return this.midPoint.y=t,this.scrollY=t-i,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(t,i){return this.centerOnX(t),this.centerOnY(i),this},centerToBounds:function(){if(this.useBounds){var t=this._bounds,i=.5*this.width,s=.5*this.height;this.midPoint.set(t.centerX,t.centerY),this.scrollX=t.centerX-i,this.scrollY=t.centerY-s}return this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(t){if(this.disableCull)return t;var i=this.matrix.matrix,s=i[0],h=i[1],e=i[2],r=i[3],n=s*r-h*e;if(!n)return t;var o=i[4],u=i[5],a=this.scrollX,c=this.scrollY,l=this.width,d=this.height,g=this.culledObjects,m=t.length;n=1/n,g.length=0;for(var f=0;f<m;++f){var _=t[f];if(_.hasOwnProperty("width")&&!_.parentContainer){var y=_.width,w=_.height,v=_.x-a*_.scrollFactorX-y*_.originX,p=_.y-c*_.scrollFactorY-w*_.originY,x=v*s+p*e+o,Y=v*h+p*r+u,X=(v+y)*s+(p+w)*e+o,b=(v+y)*h+(p+w)*r+u,M=this.y,V=M+d,k=this.x;X>k&&x<k+l&&b>M&&Y<V&&g.push(_)}else g.push(_)}return g},getWorldPoint:function(t,i,s){void 0===s&&(s=new u);var h=this.matrix.matrix,e=h[0],r=h[1],n=h[2],o=h[3],a=h[4],c=h[5],l=e*o-r*n;if(!l)return s.x=t,s.y=i,s;var d=o*(l=1/l),g=-r*l,m=-n*l,f=e*l,_=(n*c-o*a)*l,y=(r*a-e*c)*l,w=Math.cos(this.rotation),v=Math.sin(this.rotation),p=this.zoom,x=this.resolution,Y=this.scrollX,X=this.scrollY,b=t+(Y*w-X*v)*p,M=i+(Y*v+X*w)*p;return s.x=(b*d+M*m)*x+_,s.y=(b*g+M*f)*x+y,s},ignore:function(t){var i=this.id;Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++){var h=t[s];Array.isArray(h)?this.ignore(h):h.isParent?this.ignore(h.getChildren()):h.cameraFilter|=i}return this},preRender:function(t){var i=this.width,s=this.height,h=.5*i,e=.5*s,r=this.zoom*t,n=this.matrix,o=i*this.originX,u=s*this.originY,a=this.scrollX,c=this.scrollY;this.useBounds&&(a=this.clampX(a),c=this.clampY(c)),this.roundPixels&&(o=Math.round(o),u=Math.round(u)),this.scrollX=a,this.scrollY=c;var l=a+h,d=c+e;this.midPoint.set(l,d);var g=i/r,m=s/r;this.worldView.setTo(l-g/2,d-m/2,g,m),n.applyITRS(this.x+o,this.y+u,this.rotation,r,r),n.translate(-o,-u)},clampX:function(t){var i=this._bounds,s=this.displayWidth,h=i.x+(s-this.width)/2,e=Math.max(h,h+i.width-s);return t<h?t=h:t>e&&(t=e),t},clampY:function(t){var i=this._bounds,s=this.displayHeight,h=i.y+(s-this.height)/2,e=Math.max(h,h+i.height-s);return t<h?t=h:t>e&&(t=e),t},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(t){return void 0===t&&(t=0),this.rotation=s(t),this},setBackgroundColor:function(t){return void 0===t&&(t="rgba(0,0,0,0)"),this.backgroundColor=o(t),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function(t,i,s,h,e){return void 0===e&&(e=!1),this._bounds.setTo(t,i,s,h),this.dirty=!0,this.useBounds=!0,e?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(t){void 0===t&&(t=new r);var i=this._bounds;return t.setTo(i.x,i.y,i.width,i.height),t},setName:function(t){return void 0===t&&(t=""),this.name=t,this},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setRoundPixels:function(t){return this.roundPixels=t,this},setScene:function(t){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=t;var i=t.sys;this.sceneManager=i.game.scene,this.scaleManager=i.scale,this.cameraManager=i.cameras;var s=this.scaleManager.resolution;return this.resolution=s,this._cx=this._x*s,this._cy=this._y*s,this._cw=this._width*s,this._ch=this._height*s,this.updateSystem(),this},setScroll:function(t,i){return void 0===i&&(i=t),this.scrollX=t,this.scrollY=i,this},setSize:function(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},setViewport:function(t,i,s,h){return this.x=t,this.y=i,this.width=s,this.height=h,this},setZoom:function(t){return void 0===t&&(t=1),0===t&&(t=.001),this.zoom=t,this},setMask:function(t,i){return void 0===i&&(i=!0),this.mask=t,this._maskCamera=i?this.cameraManager.default:this,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var t={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(t.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),t},update:function(){},updateSystem:function(){if(this.scaleManager){var t=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,i=this.sceneManager;t&&!this._customViewport?i.customViewports++:!t&&this._customViewport&&i.customViewports--,this.dirty=!0,this._customViewport=t}},destroy:function(){this.emit(e.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(t){this._x=t,this._cx=t*this.resolution,this.updateSystem()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._cy=t*this.resolution,this.updateSystem()}},width:{get:function(){return this._width},set:function(t){this._width=t,this._cw=t*this.resolution,this.updateSystem()}},height:{get:function(){return this._height},set:function(t){this._height=t,this._ch=t*this.resolution,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(t){this._scrollX=t,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(t){this._scrollY=t,this.dirty=!0}},zoom:{get:function(){return this._zoom},set:function(t){this._zoom=t,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoom}},displayHeight:{get:function(){return this.height/this.zoom}}});module.exports=a;
},{"../../utils/Class":"Q4x4","../../gameobjects/components":"PnJA","../../math/DegToRad":"FzPC","eventemitter3":"Clm3","./events":"rVjJ","../../geom/rectangle/Rectangle":"ACYM","../../gameobjects/components/TransformMatrix":"hzKR","../../display/color/ValueToColor":"Q1dy","../../math/Vector2":"xARF"}],"bmjb":[function(require,module,exports) {
var n="",r=function(){var r=function(n){for(var r=["i","webkitI","msI","mozI","oI"],e=0;e<r.length;e++){var t=r[e]+"mageSmoothingEnabled";if(t in n)return t}return null};return{disable:function(e){return""===n&&(n=r(e)),n&&(e[n]=!1),e},enable:function(e){return""===n&&(n=r(e)),n&&(e[n]=!0),e},getPrefix:r,isEnabled:function(r){return null!==n?r[n]:null}}};module.exports=r();
},{}],"Brmu":[function(require,module,exports) {
var n=require("../../const"),t=require("./Smoothing"),e=[],r=!1,a=function(){var a=function(a,i,u,c,v){var f;void 0===i&&(i=1),void 0===u&&(u=1),void 0===c&&(c=n.CANVAS),void 0===v&&(v=!1);var l=o(c);return null===l?(l={parent:a,canvas:document.createElement("canvas"),type:c},c===n.CANVAS&&e.push(l),f=l.canvas):(l.parent=a,f=l.canvas),v&&(l.parent=f),f.width=i,f.height=u,r&&c===n.CANVAS&&t.disable(f.getContext("2d")),f},o=function(t){if(void 0===t&&(t=n.CANVAS),t===n.WEBGL)return null;for(var r=0;r<e.length;r++){var a=e[r];if(!a.parent&&a.type===t)return a}return null},i=function(){var n=0;return e.forEach(function(t){t.parent&&n++}),n};return{create2D:function(t,e,r){return a(t,e,r,n.CANVAS)},create:a,createWebGL:function(t,e,r){return a(t,e,r,n.WEBGL)},disableSmoothing:function(){r=!0},enableSmoothing:function(){r=!1},first:o,free:function(){return e.length-i()},pool:e,remove:function(n){var t=n instanceof HTMLCanvasElement;e.forEach(function(e){(t&&e.canvas===n||!t&&e.parent===n)&&(e.parent=null,e.canvas.width=1,e.canvas.height=1)})},total:i}};module.exports=a();
},{"../../const":"ktri","./Smoothing":"bmjb"}],"hbtX":[function(require,module,exports) {
var t=function(t,e,r){return t.x=e-t.width/2,t.y=r-t.height/2,t};module.exports=t;
},{}],"Ld89":[function(require,module,exports) {
var i=require("../../../math/Clamp"),t=require("../../../utils/Class"),e=require("../events"),s=new t({initialize:function(i){this.camera=i,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(i,t,s,h,n,r,a,o){if(void 0===i&&(i=!0),void 0===t&&(t=1e3),void 0===s&&(s=0),void 0===h&&(h=0),void 0===n&&(n=0),void 0===r&&(r=!1),void 0===a&&(a=null),void 0===o&&(o=this.camera.scene),!r&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=t,this.direction=i,this.progress=0,this.red=s,this.green=h,this.blue=n,this.alpha=i?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=a,this._onUpdateScope=o;var l=i?e.FADE_OUT_START:e.FADE_IN_START;return this.camera.emit(l,this.camera,this,t,s,h,n),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=i(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(i){if(!this.isRunning&&!this.isComplete)return!1;var t=this.camera;return i.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",i.fillRect(t._cx,t._cy,t._cw,t._ch),!0},postRenderWebGL:function(i,t){if(!this.isRunning&&!this.isComplete)return!1;var e=this.camera,s=this.red/255,h=this.blue/255,n=this.green/255;return i.drawFillRect(e._cx,e._cy,e._cw,e._ch,t(s,n,h,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var i=this.direction?e.FADE_OUT_COMPLETE:e.FADE_IN_COMPLETE;this.camera.emit(i,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});module.exports=s;
},{"../../../math/Clamp":"dPkx","../../../utils/Class":"Q4x4","../events":"rVjJ"}],"rrQ8":[function(require,module,exports) {
var i=require("../../../math/Clamp"),t=require("../../../utils/Class"),e=require("../events"),s=new t({initialize:function(i){this.camera=i,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(i,t,s,n,h,a,r){return void 0===i&&(i=250),void 0===t&&(t=255),void 0===s&&(s=255),void 0===n&&(n=255),void 0===h&&(h=!1),void 0===a&&(a=null),void 0===r&&(r=this.camera.scene),!h&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=i,this.progress=0,this.red=t,this.green=s,this.blue=n,this.alpha=1,this._elapsed=0,this._onUpdate=a,this._onUpdateScope=r,this.camera.emit(e.FLASH_START,this.camera,this,i,t,s,n),this.camera)},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=i(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(i){if(!this.isRunning)return!1;var t=this.camera;return i.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",i.fillRect(t._cx,t._cy,t._cw,t._ch),!0},postRenderWebGL:function(i,t){if(!this.isRunning)return!1;var e=this.camera,s=this.red/255,n=this.blue/255,h=this.green/255;return i.drawFillRect(e._cx,e._cy,e._cw,e._ch,t(s,h,n,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(e.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});module.exports=s;
},{"../../../math/Clamp":"dPkx","../../../utils/Class":"Q4x4","../events":"rVjJ"}],"ILPr":[function(require,module,exports) {
var o=function(o,r){return void 0===r&&(r=1.70158),o*o*((r+1)*o-r)};module.exports=o;
},{}],"SmvC":[function(require,module,exports) {
var o=function(o,r){return void 0===r&&(r=1.70158),--o*o*((r+1)*o+r)+1};module.exports=o;
},{}],"MUMV":[function(require,module,exports) {
var r=function(r,o){void 0===o&&(o=1.70158);var e=1.525*o;return(r*=2)<1?r*r*((e+1)*r-e)*.5:.5*((r-=2)*r*((e+1)*r+e)+2)};module.exports=r;
},{}],"TzbF":[function(require,module,exports) {
module.exports={In:require("./In"),Out:require("./Out"),InOut:require("./InOut")};
},{"./In":"ILPr","./Out":"SmvC","./InOut":"MUMV"}],"qjKj":[function(require,module,exports) {
var r=function(r){return(r=1-r)<1/2.75?1-7.5625*r*r:r<2/2.75?1-(7.5625*(r-=1.5/2.75)*r+.75):r<2.5/2.75?1-(7.5625*(r-=2.25/2.75)*r+.9375):1-(7.5625*(r-=2.625/2.75)*r+.984375)};module.exports=r;
},{}],"DmZV":[function(require,module,exports) {
var r=function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375};module.exports=r;
},{}],"rdk1":[function(require,module,exports) {
var r=function(r){var e=!1;return r<.5?(r=1-2*r,e=!0):r=2*r-1,r<1/2.75?r*=7.5625*r:r=r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375,e?.5*(1-r):.5*r+.5};module.exports=r;
},{}],"gGY7":[function(require,module,exports) {
module.exports={In:require("./In"),Out:require("./Out"),InOut:require("./InOut")};
},{"./In":"qjKj","./Out":"DmZV","./InOut":"rdk1"}],"Meyq":[function(require,module,exports) {
var r=function(r){return 1-Math.sqrt(1-r*r)};module.exports=r;
},{}],"znu6":[function(require,module,exports) {
var r=function(r){return Math.sqrt(1- --r*r)};module.exports=r;
},{}],"r5zN":[function(require,module,exports) {
var t=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)};module.exports=t;
},{}],"BFnW":[function(require,module,exports) {
module.exports={In:require("./In"),Out:require("./Out"),InOut:require("./InOut")};
},{"./In":"Meyq","./Out":"znu6","./InOut":"r5zN"}],"Quov":[function(require,module,exports) {
var r=function(r){return r*r*r};module.exports=r;
},{}],"FzQZ":[function(require,module,exports) {
var r=function(r){return--r*r*r+1};module.exports=r;
},{}],"vDm3":[function(require,module,exports) {
var r=function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)};module.exports=r;
},{}],"dp0t":[function(require,module,exports) {
module.exports={In:require("./In"),Out:require("./Out"),InOut:require("./InOut")};
},{"./In":"Quov","./Out":"FzQZ","./InOut":"vDm3"}],"MTNU":[function(require,module,exports) {
var t=function(t,r,a){if(void 0===r&&(r=.1),void 0===a&&(a=.1),0===t)return 0;if(1===t)return 1;var i=a/4;return r<1?r=1:i=a*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/a)};module.exports=t;
},{}],"Dm0r":[function(require,module,exports) {
var t=function(t,r,a){if(void 0===r&&(r=.1),void 0===a&&(a=.1),0===t)return 0;if(1===t)return 1;var i=a/4;return r<1?r=1:i=a*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/a)+1};module.exports=t;
},{}],"Q7Fw":[function(require,module,exports) {
var t=function(t,a,r){if(void 0===a&&(a=.1),void 0===r&&(r=.1),0===t)return 0;if(1===t)return 1;var h=r/4;return a<1?a=1:h=r*Math.asin(1/a)/(2*Math.PI),(t*=2)<1?a*Math.pow(2,10*(t-=1))*Math.sin((t-h)*(2*Math.PI)/r)*-.5:a*Math.pow(2,-10*(t-=1))*Math.sin((t-h)*(2*Math.PI)/r)*.5+1};module.exports=t;
},{}],"eo4p":[function(require,module,exports) {
module.exports={In:require("./In"),Out:require("./Out"),InOut:require("./InOut")};
},{"./In":"MTNU","./Out":"Dm0r","./InOut":"Q7Fw"}],"yC0G":[function(require,module,exports) {
var o=function(o){return Math.pow(2,10*(o-1))-.001};module.exports=o;
},{}],"mE3l":[function(require,module,exports) {
var o=function(o){return 1-Math.pow(2,-10*o)};module.exports=o;
},{}],"Ew6Q":[function(require,module,exports) {
var o=function(o){return(o*=2)<1?.5*Math.pow(2,10*(o-1)):.5*(2-Math.pow(2,-10*(o-1)))};module.exports=o;
},{}],"AFCW":[function(require,module,exports) {
module.exports={In:require("./In"),Out:require("./Out"),InOut:require("./InOut")};
},{"./In":"yC0G","./Out":"mE3l","./InOut":"Ew6Q"}],"VdI7":[function(require,module,exports) {
var r=function(r){return r};module.exports=r;
},{}],"qhTg":[function(require,module,exports) {
module.exports=require("./Linear");
},{"./Linear":"VdI7"}],"LvyS":[function(require,module,exports) {
var r=function(r){return r*r};module.exports=r;
},{}],"MZ62":[function(require,module,exports) {
var r=function(r){return r*(2-r)};module.exports=r;
},{}],"dPAz":[function(require,module,exports) {
var r=function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)};module.exports=r;
},{}],"ZYUl":[function(require,module,exports) {
module.exports={In:require("./In"),Out:require("./Out"),InOut:require("./InOut")};
},{"./In":"LvyS","./Out":"MZ62","./InOut":"dPAz"}],"DX4j":[function(require,module,exports) {
var r=function(r){return r*r*r*r};module.exports=r;
},{}],"dDCX":[function(require,module,exports) {
var r=function(r){return 1- --r*r*r*r};module.exports=r;
},{}],"WVEm":[function(require,module,exports) {
var r=function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)};module.exports=r;
},{}],"XVe2":[function(require,module,exports) {
module.exports={In:require("./In"),Out:require("./Out"),InOut:require("./InOut")};
},{"./In":"DX4j","./Out":"dDCX","./InOut":"WVEm"}],"QuQg":[function(require,module,exports) {
var r=function(r){return r*r*r*r*r};module.exports=r;
},{}],"xFIA":[function(require,module,exports) {
var r=function(r){return--r*r*r*r*r+1};module.exports=r;
},{}],"pOxX":[function(require,module,exports) {
var r=function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)};module.exports=r;
},{}],"p24c":[function(require,module,exports) {
module.exports={In:require("./In"),Out:require("./Out"),InOut:require("./InOut")};
},{"./In":"QuQg","./Out":"xFIA","./InOut":"pOxX"}],"SKoy":[function(require,module,exports) {
var t=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)};module.exports=t;
},{}],"RQFD":[function(require,module,exports) {
var t=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)};module.exports=t;
},{}],"agS4":[function(require,module,exports) {
var t=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))};module.exports=t;
},{}],"Eg1o":[function(require,module,exports) {
module.exports={In:require("./In"),Out:require("./Out"),InOut:require("./InOut")};
},{"./In":"SKoy","./Out":"RQFD","./InOut":"agS4"}],"UdVC":[function(require,module,exports) {
var o=function(o,r){return void 0===r&&(r=1),o<=0?0:o>=1?1:1/r*(1+(r*o|0))};module.exports=o;
},{}],"nu3z":[function(require,module,exports) {
module.exports=require("./Stepped");
},{"./Stepped":"UdVC"}],"XARF":[function(require,module,exports) {
var e=require("./back"),u=require("./bounce"),t=require("./circular"),n=require("./cubic"),a=require("./elastic"),O=require("./expo"),r=require("./linear"),i=require("./quadratic"),I=require("./quartic"),s=require("./quintic"),c=require("./sine"),o=require("./stepped");module.exports={Power0:r,Power1:i.Out,Power2:n.Out,Power3:I.Out,Power4:s.Out,Linear:r,Quad:i.Out,Cubic:n.Out,Quart:I.Out,Quint:s.Out,Sine:c.Out,Expo:O.Out,Circ:t.Out,Elastic:a.Out,Back:e.Out,Bounce:u.Out,Stepped:o,"Quad.easeIn":i.In,"Cubic.easeIn":n.In,"Quart.easeIn":I.In,"Quint.easeIn":s.In,"Sine.easeIn":c.In,"Expo.easeIn":O.In,"Circ.easeIn":t.In,"Elastic.easeIn":a.In,"Back.easeIn":e.In,"Bounce.easeIn":u.In,"Quad.easeOut":i.Out,"Cubic.easeOut":n.Out,"Quart.easeOut":I.Out,"Quint.easeOut":s.Out,"Sine.easeOut":c.Out,"Expo.easeOut":O.Out,"Circ.easeOut":t.Out,"Elastic.easeOut":a.Out,"Back.easeOut":e.Out,"Bounce.easeOut":u.Out,"Quad.easeInOut":i.InOut,"Cubic.easeInOut":n.InOut,"Quart.easeInOut":I.InOut,"Quint.easeInOut":s.InOut,"Sine.easeInOut":c.InOut,"Expo.easeInOut":O.InOut,"Circ.easeInOut":t.InOut,"Elastic.easeInOut":a.InOut,"Back.easeInOut":e.InOut,"Bounce.easeInOut":u.InOut};
},{"./back":"TzbF","./bounce":"gGY7","./circular":"BFnW","./cubic":"dp0t","./elastic":"eo4p","./expo":"AFCW","./linear":"qhTg","./quadratic":"ZYUl","./quartic":"XVe2","./quintic":"p24c","./sine":"Eg1o","./stepped":"nu3z"}],"yWhY":[function(require,module,exports) {
var t=require("../../../math/Clamp"),i=require("../../../utils/Class"),s=require("../../../math/easing/EaseMap"),e=require("../events"),n=require("../../../math/Vector2"),a=new i({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new n,this.current=new n,this.destination=new n,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,i,n,a,h,r,o){void 0===n&&(n=1e3),void 0===a&&(a=s.Linear),void 0===h&&(h=!1),void 0===r&&(r=null),void 0===o&&(o=this.camera.scene);var c=this.camera;return!h&&this.isRunning?c:(this.isRunning=!0,this.duration=n,this.progress=0,this.source.set(c.scrollX,c.scrollY),this.destination.set(t,i),c.getScroll(t,i,this.current),"string"==typeof a&&s.hasOwnProperty(a)?this.ease=s[a]:"function"==typeof a&&(this.ease=a),this._elapsed=0,this._onUpdate=r,this._onUpdateScope=o,this.camera.emit(e.PAN_START,this.camera,this,n,t,i),c)},update:function(i,s){if(this.isRunning){this._elapsed+=s;var e=t(this._elapsed/this.duration,0,1);this.progress=e;var n=this.camera;if(this._elapsed<this.duration){var a=this.ease(e);n.getScroll(this.destination.x,this.destination.y,this.current);var h=this.source.x+(this.current.x-this.source.x)*a,r=this.source.y+(this.current.y-this.source.y)*a;n.setScroll(h,r),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,e,h,r)}else n.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,e,n.scrollX,n.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(e.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});module.exports=a;
},{"../../../math/Clamp":"dPkx","../../../utils/Class":"Q4x4","../../../math/easing/EaseMap":"XARF","../events":"rVjJ","../../../math/Vector2":"xARF"}],"y6PV":[function(require,module,exports) {
var t=require("../../../math/Clamp"),s=require("../../../utils/Class"),i=require("../events"),e=require("../../../math/Vector2"),n=new s({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new e,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(t,s,e,n,h){return void 0===t&&(t=100),void 0===s&&(s=.05),void 0===e&&(e=!1),void 0===n&&(n=null),void 0===h&&(h=this.camera.scene),!e&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=t,this.progress=0,"number"==typeof s?this.intensity.set(s):this.intensity.set(s.x,s.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=n,this._onUpdateScope=h,this.camera.emit(i.SHAKE_START,this.camera,this,t,s),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(s,i){if(this.isRunning)if(this._elapsed+=i,this.progress=t(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var e=this.intensity,n=this.camera._cw,h=this.camera._ch,a=this.camera.zoom;this._offsetX=(Math.random()*e.x*n*2-e.x*n)*a,this._offsetY=(Math.random()*e.y*h*2-e.y*h)*a,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(i.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});module.exports=n;
},{"../../../math/Clamp":"dPkx","../../../utils/Class":"Q4x4","../events":"rVjJ","../../../math/Vector2":"xARF"}],"VEqx":[function(require,module,exports) {
var t=require("../../../math/Clamp"),i=require("../../../utils/Class"),s=require("../events"),e=require("../../../math/easing/EaseMap"),a=new i({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(t,i,a,n,h,o,r){void 0===a&&(a=1e3),void 0===n&&(n=e.Linear),void 0===h&&(h=!1),void 0===o&&(o=null),void 0===r&&(r=this.camera.scene),void 0===i&&(i=!1),this.shortestPath=i;var c=t;t<0?(c=-1*t,this.clockwise=!1):this.clockwise=!0;var u=360*Math.PI/180;c-=Math.floor(c/u)*u;var d=this.camera;if(!h&&this.isRunning)return d;if(this.isRunning=!0,this.duration=a,this.progress=0,this.source=d.rotation,this.destination=c,"string"==typeof n&&e.hasOwnProperty(n)?this.ease=e[n]:"function"==typeof n&&(this.ease=n),this._elapsed=0,this._onUpdate=o,this._onUpdateScope=r,this.shortestPath){var l=0,p=0;(l=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+u)-this.source)<(p=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+u)-this.destination)?this.clockwise=!0:l>p&&(this.clockwise=!1)}return this.camera.emit(s.ROTATE_START,this.camera,this,a,c),d},update:function(i,s){if(this.isRunning){this._elapsed+=s;var e=t(this._elapsed/this.duration,0,1);this.progress=e;var a=this.camera;if(this._elapsed<this.duration){var n=this.ease(e);this.current=a.rotation;var h=0,o=360*Math.PI/180,r=this.destination,c=this.current;!1===this.clockwise&&(r=this.current,c=this.destination),h=r>=c?Math.abs(r-c):Math.abs(r+o)-c;var u=0;u=this.clockwise?a.rotation+h*n:a.rotation-h*n,a.rotation=u,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,e,u)}else a.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,e,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});module.exports=a;
},{"../../../math/Clamp":"dPkx","../../../utils/Class":"Q4x4","../events":"rVjJ","../../../math/easing/EaseMap":"XARF"}],"xSko":[function(require,module,exports) {
var t=require("../../../math/Clamp"),i=require("../../../utils/Class"),s=require("../../../math/easing/EaseMap"),e=require("../events"),n=new i({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,i,n,a,h,o){void 0===i&&(i=1e3),void 0===n&&(n=s.Linear),void 0===a&&(a=!1),void 0===h&&(h=null),void 0===o&&(o=this.camera.scene);var r=this.camera;return!a&&this.isRunning?r:(this.isRunning=!0,this.duration=i,this.progress=0,this.source=r.zoom,this.destination=t,"string"==typeof n&&s.hasOwnProperty(n)?this.ease=s[n]:"function"==typeof n&&(this.ease=n),this._elapsed=0,this._onUpdate=h,this._onUpdateScope=o,this.camera.emit(e.ZOOM_START,this.camera,this,i,t),r)},update:function(i,s){this.isRunning&&(this._elapsed+=s,this.progress=t(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(e.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});module.exports=n;
},{"../../../math/Clamp":"dPkx","../../../utils/Class":"Q4x4","../../../math/easing/EaseMap":"XARF","../events":"rVjJ"}],"oEd3":[function(require,module,exports) {
module.exports={Fade:require("./Fade"),Flash:require("./Flash"),Pan:require("./Pan"),Shake:require("./Shake"),RotateTo:require("./RotateTo"),Zoom:require("./Zoom")};
},{"./Fade":"Ld89","./Flash":"rrQ8","./Pan":"yWhY","./Shake":"y6PV","./RotateTo":"VEqx","./Zoom":"xSko"}],"dQUL":[function(require,module,exports) {
var r=function(r,e,n){return(e-r)*n+r};module.exports=r;
},{}],"iuIK":[function(require,module,exports) {
var t=require("./BaseCamera"),e=require("../../display/canvas/CanvasPool"),i=require("../../geom/rectangle/CenterOn"),s=require("../../math/Clamp"),h=require("../../utils/Class"),r=require("../../gameobjects/components"),n=require("./effects"),o=require("../../math/Linear"),l=require("../../geom/rectangle/Rectangle"),f=require("../../math/Vector2"),a=new h({Extends:t,Mixins:[r.Flip,r.Tint],initialize:function(e,i,s,h){t.call(this,e,i,s,h),this.inputEnabled=!0,this.fadeEffect=new n.Fade(this),this.flashEffect=new n.Flash(this),this.shakeEffect=new n.Shake(this),this.panEffect=new n.Pan(this),this.rotateToEffect=new n.RotateTo(this),this.zoomEffect=new n.Zoom(this),this.lerp=new f(1,1),this.followOffset=new f,this.deadzone=null,this._follow=null,this.renderToTexture=!1,this.renderToGame=!0,this.canvas=null,this.context=null,this.glTexture=null,this.framebuffer=null,this.pipeline=null},setRenderToTexture:function(t,i){void 0===i&&(i=!0);var s=this.scene.sys.game.renderer;return s.gl?(this.glTexture=s.createTextureFromSource(null,this.width,this.height,0),this.framebuffer=s.createFramebuffer(this.width,this.height,this.glTexture,!1)):(this.canvas=e.create2D(this,this.width,this.height),this.context=this.canvas.getContext("2d")),this.renderToTexture=!0,this.renderToGame=i,t&&this.setPipeline(t),this},setPipeline:function(t){if("string"==typeof t){var e=this.scene.sys.game.renderer;e.gl&&e.hasPipeline(t)&&(this.pipeline=e.getPipeline(t))}else this.pipeline=t;return this},clearRenderToTexture:function(){if(this.scene){var t=this.scene.sys.game.renderer;if(t)return t.gl?(this.framebuffer&&t.deleteFramebuffer(this.framebuffer),this.glTexture&&t.deleteTexture(this.glTexture),this.framebuffer=null,this.glTexture=null,this.pipeline=null):(e.remove(this),this.canvas=null,this.context=null),this.renderToTexture=!1,this}},setDeadzone:function(t,e){if(void 0===t)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=t,this.deadzone.height=e):this.deadzone=new l(0,0,t,e),this._follow){var s=this.width/2,h=this.height/2,r=this._follow.x-this.followOffset.x,n=this._follow.y-this.followOffset.y;this.midPoint.set(r,n),this.scrollX=r-s,this.scrollY=n-h}i(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(t,e,i,s,h,r){return this.fadeEffect.start(!1,t,e,i,s,!0,h,r)},fadeOut:function(t,e,i,s,h,r){return this.fadeEffect.start(!0,t,e,i,s,!0,h,r)},fadeFrom:function(t,e,i,s,h,r,n){return this.fadeEffect.start(!1,t,e,i,s,h,r,n)},fade:function(t,e,i,s,h,r,n){return this.fadeEffect.start(!0,t,e,i,s,h,r,n)},flash:function(t,e,i,s,h,r,n){return this.flashEffect.start(t,e,i,s,h,r,n)},shake:function(t,e,i,s,h){return this.shakeEffect.start(t,e,i,s,h)},pan:function(t,e,i,s,h,r,n){return this.panEffect.start(t,e,i,s,h,r,n)},rotateTo:function(t,e,i,s,h,r,n){return this.rotateToEffect.start(t,e,i,s,h,r,n)},zoomTo:function(t,e,i,s,h,r){return this.zoomEffect.start(t,e,i,s,h,r)},preRender:function(t){var e=this.width,s=this.height,h=.5*e,r=.5*s,n=this.zoom*t,l=this.matrix,f=e*this.originX,a=s*this.originY,u=this._follow,c=this.deadzone,d=this.scrollX,p=this.scrollY;if(c&&i(c,this.midPoint.x,this.midPoint.y),u&&!this.panEffect.isRunning){var m=u.x-this.followOffset.x,w=u.y-this.followOffset.y;c?(m<c.x?d=o(d,d-(c.x-m),this.lerp.x):m>c.right&&(d=o(d,d+(m-c.right),this.lerp.x)),w<c.y?p=o(p,p-(c.y-w),this.lerp.y):w>c.bottom&&(p=o(p,p+(w-c.bottom),this.lerp.y))):(d=o(d,m-f,this.lerp.x),p=o(p,w-a,this.lerp.y))}this.useBounds&&(d=this.clampX(d),p=this.clampY(p)),this.roundPixels&&(f=Math.round(f),a=Math.round(a)),this.scrollX=d,this.scrollY=p;var x=d+h,g=p+r;this.midPoint.set(x,g);var T=e/n,E=s/n;this.worldView.setTo(x-T/2,g-E/2,T,E),l.applyITRS(this.x+f,this.y+a,this.rotation,n,n),l.translate(-f,-a),this.shakeEffect.preRender()},setLerp:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.lerp.set(t,e),this},setFollowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.followOffset.set(t,e),this},startFollow:function(t,e,i,h,r,n){void 0===e&&(e=!1),void 0===i&&(i=1),void 0===h&&(h=i),void 0===r&&(r=0),void 0===n&&(n=r),this._follow=t,this.roundPixels=e,i=s(i,0,1),h=s(h,0,1),this.lerp.set(i,h),this.followOffset.set(r,n);var o=this.width/2,l=this.height/2,f=t.x-r,a=t.y-n;return this.midPoint.set(f,a),this.scrollX=f-o,this.scrollY=a-l,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(t,e){this.visible&&(this.rotateToEffect.update(t,e),this.panEffect.update(t,e),this.zoomEffect.update(t,e),this.shakeEffect.update(t,e),this.flashEffect.update(t,e),this.fadeEffect.update(t,e))},destroy:function(){this.clearRenderToTexture(),this.resetFX(),t.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});module.exports=a;
},{"./BaseCamera":"ZcMy","../../display/canvas/CanvasPool":"Brmu","../../geom/rectangle/CenterOn":"hbtX","../../math/Clamp":"dPkx","../../utils/Class":"Q4x4","../../gameobjects/components":"PnJA","./effects":"oEd3","../../math/Linear":"dQUL","../../geom/rectangle/Rectangle":"ACYM","../../math/Vector2":"xARF"}],"vXV4":[function(require,module,exports) {
var n={},t={},e={register:function(t,e,r,o){void 0===o&&(o=!1),n[t]={plugin:e,mapping:r,custom:o}},registerCustom:function(n,e,r,o){t[n]={plugin:e,mapping:r,data:o}},hasCore:function(t){return n.hasOwnProperty(t)},hasCustom:function(n){return t.hasOwnProperty(n)},getCore:function(t){return n[t]},getCustom:function(n){return t[n]},getCustomClass:function(n){return t.hasOwnProperty(n)?t[n].plugin:null},remove:function(t){n.hasOwnProperty(t)&&delete n[t]},removeCustom:function(n){t.hasOwnProperty(n)&&delete t[n]},destroyCorePlugins:function(){for(var t in n)n.hasOwnProperty(t)&&delete n[t]},destroyCustomPlugins:function(){for(var n in t)t.hasOwnProperty(n)&&delete t[n]}};module.exports=e;
},{}],"UCyn":[function(require,module,exports) {
module.exports="enterfullscreen";
},{}],"zTna":[function(require,module,exports) {
module.exports="fullscreenfailed";
},{}],"LPZ2":[function(require,module,exports) {
module.exports="fullscreenunsupported";
},{}],"mEKz":[function(require,module,exports) {
module.exports="leavefullscreen";
},{}],"RB5E":[function(require,module,exports) {
module.exports="orientationchange";
},{}],"bwQd":[function(require,module,exports) {
module.exports="resize";
},{}],"r6hq":[function(require,module,exports) {
module.exports={ENTER_FULLSCREEN:require("./ENTER_FULLSCREEN_EVENT"),FULLSCREEN_FAILED:require("./FULLSCREEN_FAILED_EVENT"),FULLSCREEN_UNSUPPORTED:require("./FULLSCREEN_UNSUPPORTED_EVENT"),LEAVE_FULLSCREEN:require("./LEAVE_FULLSCREEN_EVENT"),ORIENTATION_CHANGE:require("./ORIENTATION_CHANGE_EVENT"),RESIZE:require("./RESIZE_EVENT")};
},{"./ENTER_FULLSCREEN_EVENT":"UCyn","./FULLSCREEN_FAILED_EVENT":"zTna","./FULLSCREEN_UNSUPPORTED_EVENT":"LPZ2","./LEAVE_FULLSCREEN_EVENT":"mEKz","./ORIENTATION_CHANGE_EVENT":"RB5E","./RESIZE_EVENT":"bwQd"}],"qj09":[function(require,module,exports) {
module.exports="create";
},{}],"tyU3":[function(require,module,exports) {
module.exports="postupdate";
},{}],"ku9x":[function(require,module,exports) {
module.exports="preupdate";
},{}],"wTRR":[function(require,module,exports) {
module.exports="render";
},{}],"h7j8":[function(require,module,exports) {
module.exports="shutdown";
},{}],"XuVA":[function(require,module,exports) {
module.exports="sleep";
},{}],"OmNh":[function(require,module,exports) {
module.exports="transitioncomplete";
},{}],"mYiC":[function(require,module,exports) {
module.exports="transitioninit";
},{}],"KM2R":[function(require,module,exports) {
module.exports="transitionout";
},{}],"AhNX":[function(require,module,exports) {
module.exports="transitionstart";
},{}],"oGSc":[function(require,module,exports) {
module.exports="transitionwake";
},{}],"xWP0":[function(require,module,exports) {
module.exports="update";
},{}],"bYmZ":[function(require,module,exports) {
module.exports="wake";
},{}],"Zlz3":[function(require,module,exports) {
module.exports={BOOT:require("./BOOT_EVENT"),CREATE:require("./CREATE_EVENT"),DESTROY:require("./DESTROY_EVENT"),PAUSE:require("./PAUSE_EVENT"),POST_UPDATE:require("./POST_UPDATE_EVENT"),PRE_UPDATE:require("./PRE_UPDATE_EVENT"),READY:require("./READY_EVENT"),RENDER:require("./RENDER_EVENT"),RESUME:require("./RESUME_EVENT"),SHUTDOWN:require("./SHUTDOWN_EVENT"),SLEEP:require("./SLEEP_EVENT"),START:require("./START_EVENT"),TRANSITION_COMPLETE:require("./TRANSITION_COMPLETE_EVENT"),TRANSITION_INIT:require("./TRANSITION_INIT_EVENT"),TRANSITION_OUT:require("./TRANSITION_OUT_EVENT"),TRANSITION_START:require("./TRANSITION_START_EVENT"),TRANSITION_WAKE:require("./TRANSITION_WAKE_EVENT"),UPDATE:require("./UPDATE_EVENT"),WAKE:require("./WAKE_EVENT")};
},{"./BOOT_EVENT":"YlvB","./CREATE_EVENT":"qj09","./DESTROY_EVENT":"dnzl","./PAUSE_EVENT":"RNoC","./POST_UPDATE_EVENT":"tyU3","./PRE_UPDATE_EVENT":"ku9x","./READY_EVENT":"r1pK","./RENDER_EVENT":"wTRR","./RESUME_EVENT":"eU0X","./SHUTDOWN_EVENT":"h7j8","./SLEEP_EVENT":"XuVA","./START_EVENT":"jUZf","./TRANSITION_COMPLETE_EVENT":"OmNh","./TRANSITION_INIT_EVENT":"mYiC","./TRANSITION_OUT_EVENT":"KM2R","./TRANSITION_START_EVENT":"AhNX","./TRANSITION_WAKE_EVENT":"oGSc","./UPDATE_EVENT":"xWP0","./WAKE_EVENT":"bYmZ"}],"cW7J":[function(require,module,exports) {
var s=require("./Camera"),e=require("../../utils/Class"),t=require("../../utils/object/GetFastValue"),i=require("../../plugins/PluginCache"),r=require("../../geom/rectangle/Contains"),a=require("../../scale/events"),n=require("../../scene/events"),h=new e({initialize:function(s){this.scene=s,this.systems=s.sys,this.roundPixels=s.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,s.sys.events.once(n.BOOT,this.boot,this),s.sys.events.on(n.START,this.start,this)},boot:function(){var e=this.systems;e.settings.cameras?this.fromJSON(e.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new s(0,0,e.scale.width,e.scale.height).setScene(this.scene),e.game.scale.on(a.RESIZE,this.onResize,this),this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){if(!this.main){var s=this.systems;s.settings.cameras?this.fromJSON(s.settings.cameras):this.add(),this.main=this.cameras[0]}var e=this.systems.events;e.on(n.UPDATE,this.update,this),e.once(n.SHUTDOWN,this.shutdown,this)},add:function(e,t,i,r,a,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===r&&(r=this.scene.sys.scale.height),void 0===a&&(a=!1),void 0===n&&(n="");var h=new s(e,t,i,r);return h.setName(n),h.setScene(this.scene),h.setRoundPixels(this.roundPixels),h.id=this.getNextID(),this.cameras.push(h),a&&(this.main=h),h},addExisting:function(s,e){return void 0===e&&(e=!1),-1===this.cameras.indexOf(s)?(s.id=this.getNextID(),s.setRoundPixels(this.roundPixels),this.cameras.push(s),e&&(this.main=s),s):null},getNextID:function(){for(var s=this.cameras,e=1,t=0;t<32;t++){for(var i=!1,r=0;r<s.length;r++){var a=s[r];a&&a.id===e&&(i=!0)}if(!i)return e;e<<=1}return 0},getTotal:function(s){void 0===s&&(s=!1);for(var e=0,t=this.cameras,i=0;i<t.length;i++){var r=t[i];(!s||s&&r.visible)&&e++}return e},fromJSON:function(s){Array.isArray(s)||(s=[s]);for(var e=this.scene.sys.scale.width,i=this.scene.sys.scale.height,r=0;r<s.length;r++){var a=s[r],n=t(a,"x",0),h=t(a,"y",0),o=t(a,"width",e),c=t(a,"height",i),u=this.add(n,h,o,c);u.name=t(a,"name",""),u.zoom=t(a,"zoom",1),u.rotation=t(a,"rotation",0),u.scrollX=t(a,"scrollX",0),u.scrollY=t(a,"scrollY",0),u.roundPixels=t(a,"roundPixels",!1),u.visible=t(a,"visible",!0);var l=t(a,"backgroundColor",!1);l&&u.setBackgroundColor(l);var d=t(a,"bounds",null);if(d){var m=t(d,"x",0),v=t(d,"y",0),f=t(d,"width",e),g=t(d,"height",i);u.setBounds(m,v,f,g)}}return this},getCamera:function(s){for(var e=this.cameras,t=0;t<e.length;t++)if(e[t].name===s)return e[t];return null},getCamerasBelowPointer:function(s){for(var e=this.cameras,t=s.x,i=s.y,a=[],n=0;n<e.length;n++){var h=e[n];h.visible&&h.inputEnabled&&r(h,t,i)&&a.unshift(h)}return a},remove:function(s,e){void 0===e&&(e=!0),Array.isArray(s)||(s=[s]);for(var t=0,i=this.cameras,r=0;r<s.length;r++){var a=i.indexOf(s[r]);-1!==a&&(e&&i[a].destroy(),i.splice(a,1),t++)}return!this.main&&i[0]&&(this.main=i[0]),t},render:function(s,e,t){for(var i=this.scene,r=this.cameras,a=0;a<this.cameras.length;a++){var n=r[a];n.visible&&n.alpha>0&&(n.preRender(1),s.render(i,e,t,n))}},resetAll:function(){for(var s=0;s<this.cameras.length;s++)this.cameras[s].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(s,e){for(var t=0;t<this.cameras.length;t++)this.cameras[t].update(s,e)},onResize:function(s,e,t,i,r,a){for(var n=0;n<this.cameras.length;n++){var h=this.cameras[n];0===h._x&&0===h._y&&h._width===r&&h._height===a&&h.setSize(e.width,e.height)}},resize:function(s,e){for(var t=0;t<this.cameras.length;t++)this.cameras[t].setSize(s,e)},shutdown:function(){this.main=void 0;for(var s=0;s<this.cameras.length;s++)this.cameras[s].destroy();this.cameras=[];var e=this.systems.events;e.off(n.UPDATE,this.update,this),e.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});i.register("CameraManager",h,"cameras"),module.exports=h;
},{"./Camera":"iuIK","../../utils/Class":"Q4x4","../../utils/object/GetFastValue":"xbYy","../../plugins/PluginCache":"vXV4","../../geom/rectangle/Contains":"VQyb","../../scale/events":"r6hq","../../scene/events":"Zlz3"}],"lqZK":[function(require,module,exports) {
module.exports={Camera:require("./Camera"),BaseCamera:require("./BaseCamera"),CameraManager:require("./CameraManager"),Effects:require("./effects"),Events:require("./events")};
},{"./Camera":"iuIK","./BaseCamera":"ZcMy","./CameraManager":"cW7J","./effects":"oEd3","./events":"rVjJ"}],"Swla":[function(require,module,exports) {
module.exports={Controls:require("./controls"),Scene2D:require("./2d")};
},{"./controls":"sEbf","./2d":"lqZK"}],"FeV4":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"Q09W":[function(require,module,exports) {
var process = require("process");
var e=require("process"),o={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function i(){var i=navigator.userAgent;/Windows/.test(i)?o.windows=!0:/Mac OS/.test(i)&&!/like Mac OS/.test(i)?o.macOS=!0:/Android/.test(i)?o.android=!0:/Linux/.test(i)?o.linux=!0:/iP[ao]d|iPhone/i.test(i)?(o.iOS=!0,navigator.appVersion.match(/OS (\d+)/),o.iOSVersion=parseInt(RegExp.$1,10),o.iPhone=-1!==i.toLowerCase().indexOf("iphone"),o.iPad=-1!==i.toLowerCase().indexOf("ipad")):/Kindle/.test(i)||/\bKF[A-Z][A-Z]+/.test(i)||/Silk.*Mobile Safari/.test(i)?o.kindle=!0:/CrOS/.test(i)&&(o.chromeOS=!0),(/Windows Phone/i.test(i)||/IEMobile/i.test(i))&&(o.android=!1,o.iOS=!1,o.macOS=!1,o.windows=!0,o.windowsPhone=!0);var n=/Silk/.test(i);return(o.windows||o.macOS||o.linux&&!n||o.chromeOS)&&(o.desktop=!0),(o.windowsPhone||/Windows NT/i.test(i)&&/Touch/i.test(i))&&(o.desktop=!1),navigator.standalone&&(o.webApp=!0),void 0!==window.cordova&&(o.cordova=!0),void 0!==e&&e.versions&&e.versions.node&&(o.node=!0),o.node&&"object"==typeof e.versions&&(o.nodeWebkit=!!e.versions["node-webkit"],o.electron=!!e.versions.electron),void 0!==window.ejecta&&(o.ejecta=!0),/Crosswalk/.test(i)&&(o.crosswalk=!0),o.pixelRatio=window.devicePixelRatio||1,o}module.exports=i();
},{"process":"FeV4"}],"WyCK":[function(require,module,exports) {
var e=require("./OS"),r={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function i(){var i=navigator.userAgent;return/Edge\/\d+/.test(i)?r.edge=!0:/Chrome\/(\d+)/.test(i)&&!e.windowsPhone?(r.chrome=!0,r.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(i)?(r.firefox=!0,r.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(i)&&e.iOS?r.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(i)?(r.ie=!0,r.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(i)?r.opera=!0:/Safari/.test(i)&&!e.windowsPhone?r.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(i)&&(r.ie=!0,r.trident=!0,r.tridentVersion=parseInt(RegExp.$1,10),r.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(i)&&(r.silk=!0),r}module.exports=i();
},{"./OS":"Q09W"}],"ZJKL":[function(require,module,exports) {
var e=require("./OS"),t=require("./Browser"),i=require("../display/canvas/CanvasPool"),r={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function a(){var e=new ArrayBuffer(4),t=new Uint8Array(e),i=new Uint32Array(e);return t[0]=161,t[1]=178,t[2]=195,t[3]=212,3569595041===i[0]||2712847316!==i[0]&&null}function n(){r.canvas=!!window.CanvasRenderingContext2D;try{r.localStorage=!!localStorage.getItem}catch(o){r.localStorage=!1}r.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),r.fileSystem=!!window.requestFileSystem;var n=!1;return r.webGL=function(){if(window.WebGLRenderingContext)try{var e=i.createWebGL(this),t=e.getContext("webgl")||e.getContext("experimental-webgl"),r=i.create2D(this),a=r.getContext("2d").createImageData(1,1);return n=a.data instanceof Uint8ClampedArray,i.remove(e),i.remove(r),!!t}catch(o){return!1}return!1}(),r.worker=!!window.Worker,r.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,r.getUserMedia=r.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,t.firefox&&t.firefoxVersion<21&&(r.getUserMedia=!1),!e.iOS&&(t.ie||t.firefox||t.chrome)&&(r.canvasBitBltShift=!0),(t.safari||t.mobileSafari)&&(r.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(r.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(r.littleEndian=a()),r.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==r.littleEndian&&n,r}module.exports=n();
},{"./OS":"Q09W","./Browser":"WyCK","../display/canvas/CanvasPool":"Brmu"}],"D7am":[function(require,module,exports) {
var e=require("./Browser"),n={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function o(){return("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(n.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(n.mspointer=!0),navigator.getGamepads&&(n.gamepads=!0),"onwheel"in window||e.ie&&"WheelEvent"in window?n.wheelEvent="wheel":"onmousewheel"in window?n.wheelEvent="mousewheel":e.firefox&&"MouseScrollEvent"in window&&(n.wheelEvent="DOMMouseScroll"),n}module.exports=o();
},{"./Browser":"WyCK"}],"yJ5w":[function(require,module,exports) {
var a=require("./Browser"),e={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function o(){e.audioData=!!window.Audio,e.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var o=document.createElement("audio"),c=!!o.canPlayType;try{if(c&&(o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(e.ogg=!0),(o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||o.canPlayType("audio/opus;").replace(/^no$/,""))&&(e.opus=!0),o.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(e.mp3=!0),o.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(e.wav=!0),(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/aac;").replace(/^no$/,""))&&(e.m4a=!0),o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(e.webm=!0),""!==o.canPlayType('audio/mp4;codecs="ec-3"')))if(a.edge)e.dolby=!0;else if(a.safari&&a.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var d=parseInt(RegExp.$1,10),i=parseInt(RegExp.$2,10);(10===d&&i>=11||d>10)&&(e.dolby=!0)}}catch(n){}return e}module.exports=o();
},{"./Browser":"WyCK"}],"KL4N":[function(require,module,exports) {
var e={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function c(){var c=document.createElement("video"),a=!!c.canPlayType;try{a&&(c.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(e.ogg=!0),c.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(e.h264=!0,e.mp4=!0),c.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(e.webm=!0),c.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(e.vp9=!0),c.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(e.hls=!0))}catch(o){}return e}module.exports=c();
},{}],"uDQb":[function(require,module,exports) {
var e={available:!1,cancel:"",keyboard:!1,request:""};function t(){var t,n="Fullscreen",l="FullScreen",r=["request"+n,"request"+l,"webkitRequest"+n,"webkitRequest"+l,"msRequest"+n,"msRequest"+l,"mozRequest"+l,"mozRequest"+n];for(t=0;t<r.length;t++)if(document.documentElement[r[t]]){e.available=!0,e.request=r[t];break}var u=["cancel"+l,"exit"+n,"webkitCancel"+l,"webkitExit"+n,"msCancel"+l,"msExit"+n,"mozCancel"+l,"mozExit"+n];if(e.available)for(t=0;t<u.length;t++)if(document[u[t]]){e.cancel=u[t];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(e.keyboard=!0),Object.defineProperty(e,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),e}module.exports=t();
},{}],"rJKe":[function(require,module,exports) {
var a=require("../display/canvas/CanvasPool"),e={supportInverseAlpha:!1,supportNewBlendModes:!1};function t(){var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",r="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",A=new Image;return A.onload=function(){var n=new Image;n.onload=function(){var t=a.create(n,6,1).getContext("2d");if(t.globalCompositeOperation="multiply",t.drawImage(A,0,0),t.drawImage(n,2,0),!t.getImageData(2,0,1,1))return!1;var r=t.getImageData(2,0,1,1).data;a.remove(n),e.supportNewBlendModes=255===r[0]&&0===r[1]&&0===r[2]},n.src=t+"/wCKxvRF"+r},A.src=t+"AP804Oa6"+r,!1}function r(){var e=a.create(this,2,1).getContext("2d");e.fillStyle="rgba(10, 20, 30, 0.5)",e.fillRect(0,0,1,1);var t=e.getImageData(0,0,1,1);if(null===t)return!1;e.putImageData(t,1,0);var r=e.getImageData(1,0,1,1);return r.data[0]===t.data[0]&&r.data[1]===t.data[1]&&r.data[2]===t.data[2]&&r.data[3]===t.data[3]}function A(){return void 0!==document&&(e.supportNewBlendModes=t(),e.supportInverseAlpha=r()),e}module.exports=A();
},{"../display/canvas/CanvasPool":"Brmu"}],"lb0S":[function(require,module,exports) {
module.exports={os:require("./OS"),browser:require("./Browser"),features:require("./Features"),input:require("./Input"),audio:require("./Audio"),video:require("./Video"),fullscreen:require("./Fullscreen"),canvasFeatures:require("./CanvasFeatures")};
},{"./OS":"Q09W","./Browser":"WyCK","./Features":"ZJKL","./Input":"D7am","./Audio":"yJ5w","./Video":"KL4N","./Fullscreen":"uDQb","./CanvasFeatures":"rJKe"}],"TWXP":[function(require,module,exports) {
var t=function(t,a,n,r){return Math.atan2(r-a,n-t)};module.exports=t;
},{}],"FhgI":[function(require,module,exports) {
var t=function(t,a){return Math.atan2(a.y-t.y,a.x-t.x)};module.exports=t;
},{}],"LEpV":[function(require,module,exports) {
var t=function(t,a){return Math.atan2(a.x-t.x,a.y-t.y)};module.exports=t;
},{}],"kwUj":[function(require,module,exports) {
var t=function(t,a,n,r){return Math.atan2(n-t,r-a)};module.exports=t;
},{}],"dcfJ":[function(require,module,exports) {
var r=require("../const"),t=function(t){return t>Math.PI&&(t-=r.PI2),Math.abs(((t+r.TAU)%r.PI2-r.PI2)%r.PI2)};module.exports=t;
},{"../const":"TJqb"}],"PamJ":[function(require,module,exports) {
var t=function(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI};module.exports=t;
},{}],"urL2":[function(require,module,exports) {
var r=function(r,n){return Math.random()*(n-r)+r};module.exports=r;
},{}],"G8jQ":[function(require,module,exports) {
var e=require("../FloatBetween"),t=function(){return e(-Math.PI,Math.PI)};module.exports=t;
},{"../FloatBetween":"urL2"}],"eJYK":[function(require,module,exports) {
var e=require("../FloatBetween"),r=function(){return e(-180,180)};module.exports=r;
},{"../FloatBetween":"urL2"}],"UaFw":[function(require,module,exports) {
var r=require("./Normalize"),e=function(e){return r(e+Math.PI)};module.exports=e;
},{"./Normalize":"PamJ"}],"UD4G":[function(require,module,exports) {
var a=require("../const"),t=function(t,r,e){return void 0===e&&(e=.05),t===r?t:(Math.abs(r-t)<=e||Math.abs(r-t)>=a.PI2-e?t=r:(Math.abs(r-t)>Math.PI&&(r<t?r+=a.PI2:r-=a.PI2),r>t?t+=e:r<t&&(t-=e)),t)};module.exports=t;
},{"../const":"TJqb"}],"CAEt":[function(require,module,exports) {
var r=function(r,o){var t=o-r;return 0===t?0:t-360*Math.floor((t- -180)/360)};module.exports=r;
},{}],"ajTT":[function(require,module,exports) {
module.exports={Between:require("./Between"),BetweenPoints:require("./BetweenPoints"),BetweenPointsY:require("./BetweenPointsY"),BetweenY:require("./BetweenY"),CounterClockwise:require("./CounterClockwise"),Normalize:require("./Normalize"),Random:require("./Random"),RandomDegrees:require("./RandomDegrees"),Reverse:require("./Reverse"),RotateTo:require("./RotateTo"),ShortestBetween:require("./ShortestBetween"),Wrap:require("./Wrap"),WrapDegrees:require("./WrapDegrees")};
},{"./Between":"TWXP","./BetweenPoints":"FhgI","./BetweenPointsY":"LEpV","./BetweenY":"kwUj","./CounterClockwise":"dcfJ","./Normalize":"PamJ","./Random":"G8jQ","./RandomDegrees":"eJYK","./Reverse":"UaFw","./RotateTo":"UD4G","./ShortestBetween":"CAEt","./Wrap":"SPah","./WrapDegrees":"lSyh"}],"myKq":[function(require,module,exports) {
var r=function(r,t){var a=r.x-t.x,e=r.y-t.y;return Math.sqrt(a*a+e*e)};module.exports=r;
},{}],"BCvb":[function(require,module,exports) {
var r=function(r,e){var n=r.x-e.x,o=r.y-e.y;return n*n+o*o};module.exports=r;
},{}],"FwNY":[function(require,module,exports) {
var a=function(a,t,r,e){return Math.max(Math.abs(a-r),Math.abs(t-e))};module.exports=a;
},{}],"w7uK":[function(require,module,exports) {
var t=function(t,o,r,a,e){return void 0===e&&(e=2),Math.sqrt(Math.pow(r-t,e)+Math.pow(a-o,e))};module.exports=t;
},{}],"dGxG":[function(require,module,exports) {
var a=function(a,t,r,e){return Math.abs(a-r)+Math.abs(t-e)};module.exports=a;
},{}],"e7qD":[function(require,module,exports) {
var r=function(r,e,n,o){var t=r-n,u=e-o;return t*t+u*u};module.exports=r;
},{}],"IM6W":[function(require,module,exports) {
module.exports={Between:require("./DistanceBetween"),BetweenPoints:require("./DistanceBetweenPoints"),BetweenPointsSquared:require("./DistanceBetweenPointsSquared"),Chebyshev:require("./DistanceChebyshev"),Power:require("./DistancePower"),Snake:require("./DistanceSnake"),Squared:require("./DistanceSquared")};
},{"./DistanceBetween":"akRU","./DistanceBetweenPoints":"myKq","./DistanceBetweenPointsSquared":"BCvb","./DistanceChebyshev":"FwNY","./DistancePower":"w7uK","./DistanceSnake":"dGxG","./DistanceSquared":"e7qD"}],"ZXE5":[function(require,module,exports) {
module.exports={Back:require("./back"),Bounce:require("./bounce"),Circular:require("./circular"),Cubic:require("./cubic"),Elastic:require("./elastic"),Expo:require("./expo"),Linear:require("./linear"),Quadratic:require("./quadratic"),Quartic:require("./quartic"),Quintic:require("./quintic"),Sine:require("./sine"),Stepped:require("./stepped")};
},{"./back":"TzbF","./bounce":"gGY7","./circular":"BFnW","./cubic":"dp0t","./elastic":"eo4p","./expo":"AFCW","./linear":"qhTg","./quadratic":"ZYUl","./quartic":"XVe2","./quintic":"p24c","./sine":"Eg1o","./stepped":"nu3z"}],"BGhk":[function(require,module,exports) {
var e=function(e,o){return void 0===o&&(o=1e-4),Math.ceil(e-o)};module.exports=e;
},{}],"UA74":[function(require,module,exports) {
var o=function(o,r){return void 0===r&&(r=1e-4),Math.floor(o+r)};module.exports=o;
},{}],"bfWd":[function(require,module,exports) {
var e=function(e,o,r){return void 0===r&&(r=1e-4),e>o-r};module.exports=e;
},{}],"tTB8":[function(require,module,exports) {
var e=function(e,o,r){return void 0===r&&(r=1e-4),e<o+r};module.exports=e;
},{}],"QEGU":[function(require,module,exports) {
module.exports={Ceil:require("./Ceil"),Equal:require("./Equal"),Floor:require("./Floor"),GreaterThan:require("./GreaterThan"),LessThan:require("./LessThan")};
},{"./Ceil":"BGhk","./Equal":"FGft","./Floor":"UA74","./GreaterThan":"bfWd","./LessThan":"tTB8"}],"eVAG":[function(require,module,exports) {
var r=function(r){if(0===r)return 1;for(var e=r;--r;)e*=r;return e};module.exports=r;
},{}],"d1J1":[function(require,module,exports) {
var r=require("./Factorial"),e=function(e,o){return r(e)/r(o)/r(e-o)};module.exports=e;
},{"./Factorial":"eVAG"}],"XKVq":[function(require,module,exports) {
var r=require("../Bernstein"),e=function(e,t){for(var n=0,o=e.length-1,a=0;a<=o;a++)n+=Math.pow(1-t,o-a)*Math.pow(t,a)*e[a]*r(o,a);return n};module.exports=e;
},{"../Bernstein":"d1J1"}],"RTzq":[function(require,module,exports) {
var r=function(r,e,n,o,t){var u=.5*(o-e),a=.5*(t-n),v=r*r;return(2*n-2*o+u+a)*(r*v)+(-3*n+3*o-2*u-a)*v+u*r+n};module.exports=r;
},{}],"K9uT":[function(require,module,exports) {
var r=require("../CatmullRom"),o=function(o,t){var e=o.length-1,l=e*t,a=Math.floor(l);return o[0]===o[e]?(t<0&&(a=Math.floor(l=e*(1+t))),r(l-a,o[(a-1+e)%e],o[a],o[(a+1)%e],o[(a+2)%e])):t<0?o[0]-(r(-l,o[0],o[0],o[1],o[1])-o[0]):t>1?o[e]-(r(l-e,o[e],o[e],o[e-1],o[e-1])-o[e]):r(l-a,o[a?a-1:0],o[a],o[e<a+1?e:a+1],o[e<a+2?e:a+2])};module.exports=o;
},{"../CatmullRom":"RTzq"}],"HSQg":[function(require,module,exports) {
function n(n,r){var t=1-n;return t*t*t*r}function r(n,r){var t=1-n;return 3*t*t*n*r}function t(n,r){return 3*(1-n)*n*n*r}function u(n,r){return n*n*n*r}var e=function(e,o,c,f,i){return n(e,o)+r(e,c)+t(e,f)+u(e,i)};module.exports=e;
},{}],"QJJh":[function(require,module,exports) {
var r=require("../Linear"),e=function(e,n){var o=e.length-1,t=o*n,a=Math.floor(t);return n<0?r(e[0],e[1],t):n>1?r(e[o],e[o-1],o-t):r(e[a],e[a+1>o?o:a+1],t-a)};module.exports=e;
},{"../Linear":"dQUL"}],"VaH3":[function(require,module,exports) {
function n(n,r){var t=1-n;return t*t*r}function r(n,r){return 2*(1-n)*n*r}function t(n,r){return n*n*r}var u=function(u,e,o,c){return n(u,e)+r(u,o)+t(u,c)};module.exports=u;
},{}],"Q5Mh":[function(require,module,exports) {
var e=require("../SmoothStep"),r=function(r,o,t){return o+(t-o)*e(r,0,1)};module.exports=r;
},{"../SmoothStep":"LBL7"}],"sq5I":[function(require,module,exports) {
var e=require("../SmootherStep"),r=function(r,o,t){return o+(t-o)*e(r,0,1)};module.exports=r;
},{"../SmootherStep":"HROE"}],"sWG2":[function(require,module,exports) {
module.exports={Bezier:require("./BezierInterpolation"),CatmullRom:require("./CatmullRomInterpolation"),CubicBezier:require("./CubicBezierInterpolation"),Linear:require("./LinearInterpolation"),QuadraticBezier:require("./QuadraticBezierInterpolation"),SmoothStep:require("./SmoothStepInterpolation"),SmootherStep:require("./SmootherStepInterpolation")};
},{"./BezierInterpolation":"XKVq","./CatmullRomInterpolation":"K9uT","./CubicBezierInterpolation":"HSQg","./LinearInterpolation":"QJJh","./QuadraticBezierInterpolation":"VaH3","./SmoothStepInterpolation":"Q5Mh","./SmootherStepInterpolation":"sq5I"}],"xUtk":[function(require,module,exports) {
var r=function(r){var t=Math.log(r)/.6931471805599453;return 1<<Math.ceil(t)};module.exports=r;
},{}],"HYc7":[function(require,module,exports) {
var r=function(r,e){return r>0&&0==(r&r-1)&&e>0&&0==(e&e-1)};module.exports=r;
},{}],"ioSG":[function(require,module,exports) {
var r=function(r){return r>0&&0==(r&r-1)};module.exports=r;
},{}],"WBtX":[function(require,module,exports) {
module.exports={GetNext:require("./GetPowerOfTwo"),IsSize:require("./IsSizePowerOfTwo"),IsValue:require("./IsValuePowerOfTwo")};
},{"./GetPowerOfTwo":"xUtk","./IsSizePowerOfTwo":"HYc7","./IsValuePowerOfTwo":"ioSG"}],"M09I":[function(require,module,exports) {
var e=function(e,o,r,t){return void 0===r&&(r=0),0===o?e:(e-=r,e=o*Math.ceil(e/o),t?(r+e)/o:r+e)};module.exports=e;
},{}],"mSaS":[function(require,module,exports) {
var o=function(o,r,t,e){return void 0===t&&(t=0),0===r?o:(o-=t,o=r*Math.floor(o/r),e?(t+o)/r:t+o)};module.exports=o;
},{}],"ptM8":[function(require,module,exports) {
var o=function(o,r,n,t){return void 0===n&&(n=0),0===r?o:(o-=n,o=r*Math.round(o/r),t?(n+o)/r:n+o)};module.exports=o;
},{}],"DDgt":[function(require,module,exports) {
module.exports={Ceil:require("./SnapCeil"),Floor:require("./SnapFloor"),To:require("./SnapTo")};
},{"./SnapCeil":"M09I","./SnapFloor":"mSaS","./SnapTo":"ptM8"}],"lhFT":[function(require,module,exports) {
var t=require("../../utils/Class"),s=new t({initialize:function(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var s,i=this.n;t=t.toString();for(var n=0;n<t.length;n++)s=.02519603282416938*(i+=t.charCodeAt(n)),s-=i=s>>>0,i=(s*=i)>>>0,i+=4294967296*(s-=i);return this.n=i,2.3283064365386963e-10*(i>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var s=0;s<t.length&&null!=t[s];s++){var i=t[s];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+1.1102230246251565e-16*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,s){return Math.floor(this.realInRange(0,s-t+1)+t)},between:function(t,s){return Math.floor(this.realInRange(0,s-t+1)+t)},realInRange:function(t,s){return this.frac()*(s-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",s="";for(s=t="";t++<36;s+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return s},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function(t,s){return this.realInRange(t||9466848e5,s||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var s=t.length-1;s>0;s--){var i=Math.floor(this.frac()*(s+1)),n=t[i];t[i]=t[s],t[s]=n}return t}});module.exports=s;
},{"../../utils/Class":"Q4x4"}],"caE4":[function(require,module,exports) {
var r=function(r){for(var e=0,n=0;n<r.length;n++)e+=+r[n];return e/r.length};module.exports=r;
},{}],"rT52":[function(require,module,exports) {
var o=function(o,r){return Math.floor(Math.random()*(r-o+1)+o)};module.exports=o;
},{}],"byQC":[function(require,module,exports) {
var o=function(o,r,t){void 0===r&&(r=0),void 0===t&&(t=10);var a=Math.pow(t,-r);return Math.ceil(o*a)/a};module.exports=o;
},{}],"yZ7v":[function(require,module,exports) {
var r=function(r,t){return Math.abs(r-t)};module.exports=r;
},{}],"vCLf":[function(require,module,exports) {
var o=function(o,r,t){void 0===r&&(r=0),void 0===t&&(t=10);var a=Math.pow(t,-r);return Math.floor(o*a)/a};module.exports=o;
},{}],"HACD":[function(require,module,exports) {
var e=function(e,r){return e/r/1e3};module.exports=e;
},{}],"wgPd":[function(require,module,exports) {
var o=function(o){return o==parseFloat(o)?!(o%2):void 0};module.exports=o;
},{}],"KcxJ":[function(require,module,exports) {
var o=function(o){return o===parseFloat(o)?!(o%2):void 0};module.exports=o;
},{}],"iU2K":[function(require,module,exports) {
var n=function(n,r,t){return Math.min(n+r,t)};module.exports=n;
},{}],"afZm":[function(require,module,exports) {
var r=function(r,t,a){return Math.max(r-t,a)};module.exports=r;
},{}],"e9HI":[function(require,module,exports) {
var o=function(o,r,v,d){void 0===v&&(v=r+1);var e=(o-r)/(v-r);return e>1?void 0!==d?(e=(d-o)/(d-v))<0&&(e=0):e=1:e<0&&(e=0),e};module.exports=o;
},{}],"T4as":[function(require,module,exports) {
var r=require("./const"),e=function(e){return e*r.RAD_TO_DEG};module.exports=e;
},{"./const":"TJqb"}],"CKY7":[function(require,module,exports) {
var a=function(a,t){void 0===t&&(t=1);var o=2*Math.random()*Math.PI;return a.x=Math.cos(o)*t,a.y=Math.sin(o)*t,a};module.exports=a;
},{}],"HJhl":[function(require,module,exports) {
var a=function(a,t){void 0===t&&(t=1);var r=2*Math.random()*Math.PI,o=2*Math.random()-1,h=Math.sqrt(1-o*o)*t;return a.x=Math.cos(r)*h,a.y=Math.sin(r)*h,a.z=o*t,a};module.exports=a;
},{}],"KVeE":[function(require,module,exports) {
var a=function(a,o){return void 0===o&&(o=1),a.x=(2*Math.random()-1)*o,a.y=(2*Math.random()-1)*o,a.z=(2*Math.random()-1)*o,a.w=(2*Math.random()-1)*o,a};module.exports=a;
},{}],"TnWp":[function(require,module,exports) {
var t=function(t,a){var n=t.x,o=t.y;return t.x=n*Math.cos(a)-o*Math.sin(a),t.y=n*Math.sin(a)+o*Math.cos(a),t};module.exports=t;
},{}],"F5Vn":[function(require,module,exports) {
var o=function(o){return o>0?Math.ceil(o):Math.floor(o)};module.exports=o;
},{}],"JL9K":[function(require,module,exports) {
var o=function(o,r,t){void 0===r&&(r=0),void 0===t&&(t=10);var a=Math.pow(t,-r);return Math.round(o*a)/a};module.exports=o;
},{}],"IbTd":[function(require,module,exports) {
var o=function(o,r,i,n){void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=1),n*=Math.PI/o;for(var t=[],v=[],d=0;d<o;d++)r+=(i-=r*n)*n,t[d]=i,v[d]=r;return{sin:v,cos:t,length:o}};module.exports=o;
},{}],"sALr":[function(require,module,exports) {
var r=require("./Vector2"),e=function(e,o,t,n){void 0===n&&(n=new r);var u=0,a=0;return e>0&&e<=o*t&&(u=e>o-1?e-(a=Math.floor(e/o))*o:e,n.set(u,a)),n};module.exports=e;
},{"./Vector2":"xARF"}],"GQm4":[function(require,module,exports) {
var r=require("./Vector2"),e=function(e,o,t,n,a,i,u,c){void 0===c&&(c=new r);var s=Math.sin(a),v=Math.cos(a),d=v*i,h=s*i,x=-s*u,M=v*u,f=1/(d*M+x*-h);return c.x=M*f*e+-x*f*o+(n*x-t*M)*f,c.y=d*f*o+-h*f*e+(-n*d+t*h)*f,c};module.exports=e;
},{"./Vector2":"xARF"}],"kZ4f":[function(require,module,exports) {
var r=function(r,t,a){return Math.abs(r-t)<=a};module.exports=r;
},{}],"E0QN":[function(require,module,exports) {
var t=require("../utils/Class"),i=new t({initialize:function(t,i,s){this.x=0,this.y=0,this.z=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=s||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},clone:function(){return new i(this.x,this.y,this.z)},crossVectors:function(t,i){var s=t.x,h=t.y,n=t.z,r=i.x,e=i.y,u=i.z;return this.x=h*u-n*e,this.y=n*r-s*u,this.z=s*e-h*r,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,i,s){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=s||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var i=t.x-this.x,s=t.y-this.y,h=t.z-this.z||0;return Math.sqrt(i*i+s*s+h*h)},distanceSq:function(t){var i=t.x-this.x,s=t.y-this.y,h=t.z-this.z||0;return i*i+s*s+h*h},length:function(){var t=this.x,i=this.y,s=this.z;return Math.sqrt(t*t+i*i+s*s)},lengthSq:function(){var t=this.x,i=this.y,s=this.z;return t*t+i*i+s*s},normalize:function(){var t=this.x,i=this.y,s=this.z,h=t*t+i*i+s*s;return h>0&&(h=1/Math.sqrt(h),this.x=t*h,this.y=i*h,this.z=s*h),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var i=this.x,s=this.y,h=this.z,n=t.x,r=t.y,e=t.z;return this.x=s*e-h*r,this.y=h*n-i*e,this.z=i*r-s*n,this},lerp:function(t,i){void 0===i&&(i=0);var s=this.x,h=this.y,n=this.z;return this.x=s+i*(t.x-s),this.y=h+i*(t.y-h),this.z=n+i*(t.z-n),this},transformMat3:function(t){var i=this.x,s=this.y,h=this.z,n=t.val;return this.x=i*n[0]+s*n[3]+h*n[6],this.y=i*n[1]+s*n[4]+h*n[7],this.z=i*n[2]+s*n[5]+h*n[8],this},transformMat4:function(t){var i=this.x,s=this.y,h=this.z,n=t.val;return this.x=n[0]*i+n[4]*s+n[8]*h+n[12],this.y=n[1]*i+n[5]*s+n[9]*h+n[13],this.z=n[2]*i+n[6]*s+n[10]*h+n[14],this},transformCoordinates:function(t){var i=this.x,s=this.y,h=this.z,n=t.val,r=i*n[0]+s*n[4]+h*n[8]+n[12],e=i*n[1]+s*n[5]+h*n[9]+n[13],u=i*n[2]+s*n[6]+h*n[10]+n[14],y=i*n[3]+s*n[7]+h*n[11]+n[15];return this.x=r/y,this.y=e/y,this.z=u/y,this},transformQuat:function(t){var i=this.x,s=this.y,h=this.z,n=t.x,r=t.y,e=t.z,u=t.w,y=u*i+r*h-e*s,z=u*s+e*i-n*h,x=u*h+n*s-r*i,o=-n*i-r*s-e*h;return this.x=y*u+o*-n+z*-e-x*-r,this.y=z*u+o*-r+x*-n-y*-e,this.z=x*u+o*-e+y*-r-z*-n,this},project:function(t){var i=this.x,s=this.y,h=this.z,n=t.val,r=n[0],e=n[1],u=n[2],y=n[3],z=n[4],x=n[5],o=n[6],c=n[7],a=n[8],f=n[9],v=n[10],l=n[11],w=n[12],d=n[13],p=n[14],m=1/(i*y+s*c+h*l+n[15]);return this.x=(i*r+s*z+h*a+w)*m,this.y=(i*e+s*x+h*f+d)*m,this.z=(i*u+s*o+h*v+p)*m,this},unproject:function(t,i){var s=t.x,h=t.y,n=t.z,r=t.w,e=this.x-s,u=r-this.y-1-h,y=this.z;return this.x=2*e/n-1,this.y=2*u/r-1,this.z=2*y-1,this.project(i)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});i.ZERO=new i,i.RIGHT=new i(1,0,0),i.LEFT=new i(-1,0,0),i.UP=new i(0,-1,0),i.DOWN=new i(0,1,0),i.FORWARD=new i(0,0,1),i.BACK=new i(0,0,-1),i.ONE=new i(1,1,1),module.exports=i;
},{"../utils/Class":"Q4x4"}],"SD5N":[function(require,module,exports) {
var t=require("../utils/Class"),i=new t({initialize:function(t,i,s,h){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=s||0,this.w=h||0)},clone:function(){return new i(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,i,s,h){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=s||0,this.w=h||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,i=this.y,s=this.z,h=this.w;return Math.sqrt(t*t+i*i+s*s+h*h)},lengthSq:function(){var t=this.x,i=this.y,s=this.z,h=this.w;return t*t+i*i+s*s+h*h},normalize:function(){var t=this.x,i=this.y,s=this.z,h=this.w,n=t*t+i*i+s*s+h*h;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=i*n,this.z=s*n,this.w=h*n),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,i){void 0===i&&(i=0);var s=this.x,h=this.y,n=this.z,r=this.w;return this.x=s+i*(t.x-s),this.y=h+i*(t.y-h),this.z=n+i*(t.z-n),this.w=r+i*(t.w-r),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var i=t.x-this.x,s=t.y-this.y,h=t.z-this.z||0,n=t.w-this.w||0;return Math.sqrt(i*i+s*s+h*h+n*n)},distanceSq:function(t){var i=t.x-this.x,s=t.y-this.y,h=t.z-this.z||0,n=t.w-this.w||0;return i*i+s*s+h*h+n*n},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var i=this.x,s=this.y,h=this.z,n=this.w,r=t.val;return this.x=r[0]*i+r[4]*s+r[8]*h+r[12]*n,this.y=r[1]*i+r[5]*s+r[9]*h+r[13]*n,this.z=r[2]*i+r[6]*s+r[10]*h+r[14]*n,this.w=r[3]*i+r[7]*s+r[11]*h+r[15]*n,this},transformQuat:function(t){var i=this.x,s=this.y,h=this.z,n=t.x,r=t.y,e=t.z,o=t.w,y=o*i+r*h-e*s,u=o*s+e*i-n*h,z=o*h+n*s-r*i,x=-n*i-r*s-e*h;return this.x=y*o+x*-n+u*-e-z*-r,this.y=u*o+x*-r+z*-n-y*-e,this.z=z*o+x*-e+y*-r-u*-n,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});i.prototype.sub=i.prototype.subtract,i.prototype.mul=i.prototype.multiply,i.prototype.div=i.prototype.divide,i.prototype.dist=i.prototype.distance,i.prototype.distSq=i.prototype.distanceSq,i.prototype.len=i.prototype.length,i.prototype.lenSq=i.prototype.lengthSq,module.exports=i;
},{"../utils/Class":"Q4x4"}],"xkpI":[function(require,module,exports) {
var t=require("../utils/Class"),n=new t({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new n(this)},set:function(t){return this.copy(t)},copy:function(t){var n=this.val,i=t.val;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this},fromMat4:function(t){var n=t.val,i=this.val;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[4],i[4]=n[5],i[5]=n[6],i[6]=n[8],i[7]=n[9],i[8]=n[10],this},fromArray:function(t){var n=this.val;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,n=t[1],i=t[2],r=t[5];return t[1]=t[3],t[2]=t[6],t[3]=n,t[5]=t[7],t[6]=i,t[7]=r,this},invert:function(){var t=this.val,n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],u=t[5],e=t[6],v=t[7],h=t[8],l=h*s-u*v,o=-h*a+u*e,c=v*a-s*e,f=n*l+i*o+r*c;return f?(f=1/f,t[0]=l*f,t[1]=(-h*i+r*v)*f,t[2]=(u*i-r*s)*f,t[3]=o*f,t[4]=(h*n-r*e)*f,t[5]=(-u*n+r*a)*f,t[6]=c*f,t[7]=(-v*n+i*e)*f,t[8]=(s*n-i*a)*f,this):null},adjoint:function(){var t=this.val,n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],u=t[5],e=t[6],v=t[7],h=t[8];return t[0]=s*h-u*v,t[1]=r*v-i*h,t[2]=i*u-r*s,t[3]=u*e-a*h,t[4]=n*h-r*e,t[5]=r*a-n*u,t[6]=a*v-s*e,t[7]=i*e-n*v,t[8]=n*s-i*a,this},determinant:function(){var t=this.val,n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],u=t[5],e=t[6],v=t[7],h=t[8];return n*(h*s-u*v)+i*(-h*a+u*e)+r*(v*a-s*e)},multiply:function(t){var n=this.val,i=n[0],r=n[1],a=n[2],s=n[3],u=n[4],e=n[5],v=n[6],h=n[7],l=n[8],o=t.val,c=o[0],f=o[1],y=o[2],m=o[3],p=o[4],d=o[5],w=o[6],x=o[7],M=o[8];return n[0]=c*i+f*s+y*v,n[1]=c*r+f*u+y*h,n[2]=c*a+f*e+y*l,n[3]=m*i+p*s+d*v,n[4]=m*r+p*u+d*h,n[5]=m*a+p*e+d*l,n[6]=w*i+x*s+M*v,n[7]=w*r+x*u+M*h,n[8]=w*a+x*e+M*l,this},translate:function(t){var n=this.val,i=t.x,r=t.y;return n[6]=i*n[0]+r*n[3]+n[6],n[7]=i*n[1]+r*n[4]+n[7],n[8]=i*n[2]+r*n[5]+n[8],this},rotate:function(t){var n=this.val,i=n[0],r=n[1],a=n[2],s=n[3],u=n[4],e=n[5],v=Math.sin(t),h=Math.cos(t);return n[0]=h*i+v*s,n[1]=h*r+v*u,n[2]=h*a+v*e,n[3]=h*s-v*i,n[4]=h*u-v*r,n[5]=h*e-v*a,this},scale:function(t){var n=this.val,i=t.x,r=t.y;return n[0]=i*n[0],n[1]=i*n[1],n[2]=i*n[2],n[3]=r*n[3],n[4]=r*n[4],n[5]=r*n[5],this},fromQuat:function(t){var n=t.x,i=t.y,r=t.z,a=t.w,s=n+n,u=i+i,e=r+r,v=n*s,h=n*u,l=n*e,o=i*u,c=i*e,f=r*e,y=a*s,m=a*u,p=a*e,d=this.val;return d[0]=1-(o+f),d[3]=h+p,d[6]=l-m,d[1]=h-p,d[4]=1-(v+f),d[7]=c+y,d[2]=l+m,d[5]=c-y,d[8]=1-(v+o),this},normalFromMat4:function(t){var n=t.val,i=this.val,r=n[0],a=n[1],s=n[2],u=n[3],e=n[4],v=n[5],h=n[6],l=n[7],o=n[8],c=n[9],f=n[10],y=n[11],m=n[12],p=n[13],d=n[14],w=n[15],x=r*v-a*e,M=r*h-s*e,z=r*l-u*e,A=a*h-s*v,F=a*l-u*v,j=s*l-u*h,q=o*p-c*m,C=o*d-f*m,Q=o*w-y*m,b=c*d-f*p,g=c*w-y*p,k=f*w-y*d,B=x*k-M*g+z*b+A*Q-F*C+j*q;return B?(B=1/B,i[0]=(v*k-h*g+l*b)*B,i[1]=(h*Q-e*k-l*C)*B,i[2]=(e*g-v*Q+l*q)*B,i[3]=(s*g-a*k-u*b)*B,i[4]=(r*k-s*Q+u*C)*B,i[5]=(a*Q-r*g-u*q)*B,i[6]=(p*j-d*F+w*A)*B,i[7]=(d*z-m*j-w*M)*B,i[8]=(m*F-p*z+w*x)*B,this):null}});module.exports=n;
},{"../utils/Class":"Q4x4"}],"SO9Y":[function(require,module,exports) {
var t=require("../utils/Class"),i=1e-6,r=new t({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new r(this)},set:function(t){return this.copy(t)},copy:function(t){var i=this.val,r=t.val;return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],this},fromArray:function(t){var i=this.val;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],this},zero:function(){var t=this.val;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=0,this},xyz:function(t,i,r){this.identity();var a=this.val;return a[12]=t,a[13]=i,a[14]=r,this},scaling:function(t,i,r){this.zero();var a=this.val;return a[0]=t,a[5]=i,a[10]=r,a[15]=1,this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},transpose:function(){var t=this.val,i=t[1],r=t[2],a=t[3],n=t[6],s=t[7],h=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=i,t[6]=t[9],t[7]=t[13],t[8]=r,t[9]=n,t[11]=t[14],t[12]=a,t[13]=s,t[14]=h,this},invert:function(){var t=this.val,i=t[0],r=t[1],a=t[2],n=t[3],s=t[4],h=t[5],o=t[6],u=t[7],l=t[8],e=t[9],v=t[10],c=t[11],f=t[12],y=t[13],M=t[14],z=t[15],x=i*h-r*s,m=i*o-a*s,p=i*u-n*s,d=r*o-a*h,w=r*u-n*h,L=a*u-n*o,A=l*y-e*f,q=l*M-v*f,b=l*z-c*f,R=e*M-v*y,X=e*z-c*y,Y=v*z-c*M,Z=x*Y-m*X+p*R+d*b-w*q+L*A;return Z?(Z=1/Z,t[0]=(h*Y-o*X+u*R)*Z,t[1]=(a*X-r*Y-n*R)*Z,t[2]=(y*L-M*w+z*d)*Z,t[3]=(v*w-e*L-c*d)*Z,t[4]=(o*b-s*Y-u*q)*Z,t[5]=(i*Y-a*b+n*q)*Z,t[6]=(M*p-f*L-z*m)*Z,t[7]=(l*L-v*p+c*m)*Z,t[8]=(s*X-h*b+u*A)*Z,t[9]=(r*b-i*X-n*A)*Z,t[10]=(f*w-y*p+z*x)*Z,t[11]=(e*p-l*w-c*x)*Z,t[12]=(h*q-s*R-o*A)*Z,t[13]=(i*R-r*q+a*A)*Z,t[14]=(y*m-f*d-M*x)*Z,t[15]=(l*d-e*m+v*x)*Z,this):null},adjoint:function(){var t=this.val,i=t[0],r=t[1],a=t[2],n=t[3],s=t[4],h=t[5],o=t[6],u=t[7],l=t[8],e=t[9],v=t[10],c=t[11],f=t[12],y=t[13],M=t[14],z=t[15];return t[0]=h*(v*z-c*M)-e*(o*z-u*M)+y*(o*c-u*v),t[1]=-(r*(v*z-c*M)-e*(a*z-n*M)+y*(a*c-n*v)),t[2]=r*(o*z-u*M)-h*(a*z-n*M)+y*(a*u-n*o),t[3]=-(r*(o*c-u*v)-h*(a*c-n*v)+e*(a*u-n*o)),t[4]=-(s*(v*z-c*M)-l*(o*z-u*M)+f*(o*c-u*v)),t[5]=i*(v*z-c*M)-l*(a*z-n*M)+f*(a*c-n*v),t[6]=-(i*(o*z-u*M)-s*(a*z-n*M)+f*(a*u-n*o)),t[7]=i*(o*c-u*v)-s*(a*c-n*v)+l*(a*u-n*o),t[8]=s*(e*z-c*y)-l*(h*z-u*y)+f*(h*c-u*e),t[9]=-(i*(e*z-c*y)-l*(r*z-n*y)+f*(r*c-n*e)),t[10]=i*(h*z-u*y)-s*(r*z-n*y)+f*(r*u-n*h),t[11]=-(i*(h*c-u*e)-s*(r*c-n*e)+l*(r*u-n*h)),t[12]=-(s*(e*M-v*y)-l*(h*M-o*y)+f*(h*v-o*e)),t[13]=i*(e*M-v*y)-l*(r*M-a*y)+f*(r*v-a*e),t[14]=-(i*(h*M-o*y)-s*(r*M-a*y)+f*(r*o-a*h)),t[15]=i*(h*v-o*e)-s*(r*v-a*e)+l*(r*o-a*h),this},determinant:function(){var t=this.val,i=t[0],r=t[1],a=t[2],n=t[3],s=t[4],h=t[5],o=t[6],u=t[7],l=t[8],e=t[9],v=t[10],c=t[11],f=t[12],y=t[13],M=t[14],z=t[15];return(i*h-r*s)*(v*z-c*M)-(i*o-a*s)*(e*z-c*y)+(i*u-n*s)*(e*M-v*y)+(r*o-a*h)*(l*z-c*f)-(r*u-n*h)*(l*M-v*f)+(a*u-n*o)*(l*y-e*f)},multiply:function(t){var i=this.val,r=i[0],a=i[1],n=i[2],s=i[3],h=i[4],o=i[5],u=i[6],l=i[7],e=i[8],v=i[9],c=i[10],f=i[11],y=i[12],M=i[13],z=i[14],x=i[15],m=t.val,p=m[0],d=m[1],w=m[2],L=m[3];return i[0]=p*r+d*h+w*e+L*y,i[1]=p*a+d*o+w*v+L*M,i[2]=p*n+d*u+w*c+L*z,i[3]=p*s+d*l+w*f+L*x,p=m[4],d=m[5],w=m[6],L=m[7],i[4]=p*r+d*h+w*e+L*y,i[5]=p*a+d*o+w*v+L*M,i[6]=p*n+d*u+w*c+L*z,i[7]=p*s+d*l+w*f+L*x,p=m[8],d=m[9],w=m[10],L=m[11],i[8]=p*r+d*h+w*e+L*y,i[9]=p*a+d*o+w*v+L*M,i[10]=p*n+d*u+w*c+L*z,i[11]=p*s+d*l+w*f+L*x,p=m[12],d=m[13],w=m[14],L=m[15],i[12]=p*r+d*h+w*e+L*y,i[13]=p*a+d*o+w*v+L*M,i[14]=p*n+d*u+w*c+L*z,i[15]=p*s+d*l+w*f+L*x,this},multiplyLocal:function(t){var i=[],r=this.val,a=t.val;return i[0]=r[0]*a[0]+r[1]*a[4]+r[2]*a[8]+r[3]*a[12],i[1]=r[0]*a[1]+r[1]*a[5]+r[2]*a[9]+r[3]*a[13],i[2]=r[0]*a[2]+r[1]*a[6]+r[2]*a[10]+r[3]*a[14],i[3]=r[0]*a[3]+r[1]*a[7]+r[2]*a[11]+r[3]*a[15],i[4]=r[4]*a[0]+r[5]*a[4]+r[6]*a[8]+r[7]*a[12],i[5]=r[4]*a[1]+r[5]*a[5]+r[6]*a[9]+r[7]*a[13],i[6]=r[4]*a[2]+r[5]*a[6]+r[6]*a[10]+r[7]*a[14],i[7]=r[4]*a[3]+r[5]*a[7]+r[6]*a[11]+r[7]*a[15],i[8]=r[8]*a[0]+r[9]*a[4]+r[10]*a[8]+r[11]*a[12],i[9]=r[8]*a[1]+r[9]*a[5]+r[10]*a[9]+r[11]*a[13],i[10]=r[8]*a[2]+r[9]*a[6]+r[10]*a[10]+r[11]*a[14],i[11]=r[8]*a[3]+r[9]*a[7]+r[10]*a[11]+r[11]*a[15],i[12]=r[12]*a[0]+r[13]*a[4]+r[14]*a[8]+r[15]*a[12],i[13]=r[12]*a[1]+r[13]*a[5]+r[14]*a[9]+r[15]*a[13],i[14]=r[12]*a[2]+r[13]*a[6]+r[14]*a[10]+r[15]*a[14],i[15]=r[12]*a[3]+r[13]*a[7]+r[14]*a[11]+r[15]*a[15],this.fromArray(i)},translate:function(t){var i=t.x,r=t.y,a=t.z,n=this.val;return n[12]=n[0]*i+n[4]*r+n[8]*a+n[12],n[13]=n[1]*i+n[5]*r+n[9]*a+n[13],n[14]=n[2]*i+n[6]*r+n[10]*a+n[14],n[15]=n[3]*i+n[7]*r+n[11]*a+n[15],this},translateXYZ:function(t,i,r){var a=this.val;return a[12]=a[0]*t+a[4]*i+a[8]*r+a[12],a[13]=a[1]*t+a[5]*i+a[9]*r+a[13],a[14]=a[2]*t+a[6]*i+a[10]*r+a[14],a[15]=a[3]*t+a[7]*i+a[11]*r+a[15],this},scale:function(t){var i=t.x,r=t.y,a=t.z,n=this.val;return n[0]=n[0]*i,n[1]=n[1]*i,n[2]=n[2]*i,n[3]=n[3]*i,n[4]=n[4]*r,n[5]=n[5]*r,n[6]=n[6]*r,n[7]=n[7]*r,n[8]=n[8]*a,n[9]=n[9]*a,n[10]=n[10]*a,n[11]=n[11]*a,this},scaleXYZ:function(t,i,r){var a=this.val;return a[0]=a[0]*t,a[1]=a[1]*t,a[2]=a[2]*t,a[3]=a[3]*t,a[4]=a[4]*i,a[5]=a[5]*i,a[6]=a[6]*i,a[7]=a[7]*i,a[8]=a[8]*r,a[9]=a[9]*r,a[10]=a[10]*r,a[11]=a[11]*r,this},makeRotationAxis:function(t,i){var r=Math.cos(i),a=Math.sin(i),n=1-r,s=t.x,h=t.y,o=t.z,u=n*s,l=n*h;return this.fromArray([u*s+r,u*h-a*o,u*o+a*h,0,u*h+a*o,l*h+r,l*o-a*s,0,u*o-a*h,l*o+a*s,n*o*o+r,0,0,0,0,1]),this},rotate:function(t,r){var a=this.val,n=r.x,s=r.y,h=r.z,o=Math.sqrt(n*n+s*s+h*h);if(Math.abs(o)<i)return null;n*=o=1/o,s*=o,h*=o;var u=Math.sin(t),l=Math.cos(t),e=1-l,v=a[0],c=a[1],f=a[2],y=a[3],M=a[4],z=a[5],x=a[6],m=a[7],p=a[8],d=a[9],w=a[10],L=a[11],A=n*n*e+l,q=s*n*e+h*u,b=h*n*e-s*u,R=n*s*e-h*u,X=s*s*e+l,Y=h*s*e+n*u,Z=n*h*e+s*u,g=s*h*e-n*u,k=h*h*e+l;return a[0]=v*A+M*q+p*b,a[1]=c*A+z*q+d*b,a[2]=f*A+x*q+w*b,a[3]=y*A+m*q+L*b,a[4]=v*R+M*X+p*Y,a[5]=c*R+z*X+d*Y,a[6]=f*R+x*X+w*Y,a[7]=y*R+m*X+L*Y,a[8]=v*Z+M*g+p*k,a[9]=c*Z+z*g+d*k,a[10]=f*Z+x*g+w*k,a[11]=y*Z+m*g+L*k,this},rotateX:function(t){var i=this.val,r=Math.sin(t),a=Math.cos(t),n=i[4],s=i[5],h=i[6],o=i[7],u=i[8],l=i[9],e=i[10],v=i[11];return i[4]=n*a+u*r,i[5]=s*a+l*r,i[6]=h*a+e*r,i[7]=o*a+v*r,i[8]=u*a-n*r,i[9]=l*a-s*r,i[10]=e*a-h*r,i[11]=v*a-o*r,this},rotateY:function(t){var i=this.val,r=Math.sin(t),a=Math.cos(t),n=i[0],s=i[1],h=i[2],o=i[3],u=i[8],l=i[9],e=i[10],v=i[11];return i[0]=n*a-u*r,i[1]=s*a-l*r,i[2]=h*a-e*r,i[3]=o*a-v*r,i[8]=n*r+u*a,i[9]=s*r+l*a,i[10]=h*r+e*a,i[11]=o*r+v*a,this},rotateZ:function(t){var i=this.val,r=Math.sin(t),a=Math.cos(t),n=i[0],s=i[1],h=i[2],o=i[3],u=i[4],l=i[5],e=i[6],v=i[7];return i[0]=n*a+u*r,i[1]=s*a+l*r,i[2]=h*a+e*r,i[3]=o*a+v*r,i[4]=u*a-n*r,i[5]=l*a-s*r,i[6]=e*a-h*r,i[7]=v*a-o*r,this},fromRotationTranslation:function(t,i){var r=this.val,a=t.x,n=t.y,s=t.z,h=t.w,o=a+a,u=n+n,l=s+s,e=a*o,v=a*u,c=a*l,f=n*u,y=n*l,M=s*l,z=h*o,x=h*u,m=h*l;return r[0]=1-(f+M),r[1]=v+m,r[2]=c-x,r[3]=0,r[4]=v-m,r[5]=1-(e+M),r[6]=y+z,r[7]=0,r[8]=c+x,r[9]=y-z,r[10]=1-(e+f),r[11]=0,r[12]=i.x,r[13]=i.y,r[14]=i.z,r[15]=1,this},fromQuat:function(t){var i=this.val,r=t.x,a=t.y,n=t.z,s=t.w,h=r+r,o=a+a,u=n+n,l=r*h,e=r*o,v=r*u,c=a*o,f=a*u,y=n*u,M=s*h,z=s*o,x=s*u;return i[0]=1-(c+y),i[1]=e+x,i[2]=v-z,i[3]=0,i[4]=e-x,i[5]=1-(l+y),i[6]=f+M,i[7]=0,i[8]=v+z,i[9]=f-M,i[10]=1-(l+c),i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},frustum:function(t,i,r,a,n,s){var h=this.val,o=1/(i-t),u=1/(a-r),l=1/(n-s);return h[0]=2*n*o,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=2*n*u,h[6]=0,h[7]=0,h[8]=(i+t)*o,h[9]=(a+r)*u,h[10]=(s+n)*l,h[11]=-1,h[12]=0,h[13]=0,h[14]=s*n*2*l,h[15]=0,this},perspective:function(t,i,r,a){var n=this.val,s=1/Math.tan(t/2),h=1/(r-a);return n[0]=s/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(a+r)*h,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*a*r*h,n[15]=0,this},perspectiveLH:function(t,i,r,a){var n=this.val;return n[0]=2*r/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*r/i,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=-a/(r-a),n[11]=1,n[12]=0,n[13]=0,n[14]=r*a/(r-a),n[15]=0,this},ortho:function(t,i,r,a,n,s){var h=this.val,o=t-i,u=r-a,l=n-s;return o=0===o?o:1/o,u=0===u?u:1/u,l=0===l?l:1/l,h[0]=-2*o,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*u,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*l,h[11]=0,h[12]=(t+i)*o,h[13]=(a+r)*u,h[14]=(s+n)*l,h[15]=1,this},lookAt:function(t,r,a){var n=this.val,s=t.x,h=t.y,o=t.z,u=a.x,l=a.y,e=a.z,v=r.x,c=r.y,f=r.z;if(Math.abs(s-v)<i&&Math.abs(h-c)<i&&Math.abs(o-f)<i)return this.identity();var y=s-v,M=h-c,z=o-f,x=1/Math.sqrt(y*y+M*M+z*z),m=l*(z*=x)-e*(M*=x),p=e*(y*=x)-u*z,d=u*M-l*y;(x=Math.sqrt(m*m+p*p+d*d))?(m*=x=1/x,p*=x,d*=x):(m=0,p=0,d=0);var w=M*d-z*p,L=z*m-y*d,A=y*p-M*m;return(x=Math.sqrt(w*w+L*L+A*A))?(w*=x=1/x,L*=x,A*=x):(w=0,L=0,A=0),n[0]=m,n[1]=w,n[2]=y,n[3]=0,n[4]=p,n[5]=L,n[6]=M,n[7]=0,n[8]=d,n[9]=A,n[10]=z,n[11]=0,n[12]=-(m*s+p*h+d*o),n[13]=-(w*s+L*h+A*o),n[14]=-(y*s+M*h+z*o),n[15]=1,this},yawPitchRoll:function(t,i,r){this.zero(),a.zero(),n.zero();var s=this.val,h=a.val,o=n.val,u=Math.sin(r),l=Math.cos(r);return s[10]=1,s[15]=1,s[0]=l,s[1]=u,s[4]=-u,s[5]=l,u=Math.sin(i),l=Math.cos(i),h[0]=1,h[15]=1,h[5]=l,h[10]=l,h[9]=-u,h[6]=u,u=Math.sin(t),l=Math.cos(t),o[5]=1,o[15]=1,o[0]=l,o[2]=-u,o[8]=u,o[10]=l,this.multiplyLocal(a),this.multiplyLocal(n),this},setWorldMatrix:function(t,i,r,s,h){return this.yawPitchRoll(t.y,t.x,t.z),a.scaling(r.x,r.y,r.z),n.xyz(i.x,i.y,i.z),this.multiplyLocal(a),this.multiplyLocal(n),void 0!==s&&this.multiplyLocal(s),void 0!==h&&this.multiplyLocal(h),this}}),a=new r,n=new r;module.exports=r;
},{"../utils/Class":"Q4x4"}],"l0NC":[function(require,module,exports) {
var t=require("../utils/Class"),i=require("./Vector3"),s=require("./Matrix3"),h=1e-6,r=new Int8Array([1,2,0]),n=new Float32Array([0,0,0]),e=new i(1,0,0),a=new i(0,1,0),y=new i,o=new s,x=new t({initialize:function(t,i,s,h){"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=s||0,this.w=h||0)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},set:function(t,i,s,h){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=s||0,this.w=h||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,i=this.y,s=this.z,h=this.w;return Math.sqrt(t*t+i*i+s*s+h*h)},lengthSq:function(){var t=this.x,i=this.y,s=this.z,h=this.w;return t*t+i*i+s*s+h*h},normalize:function(){var t=this.x,i=this.y,s=this.z,h=this.w,r=t*t+i*i+s*s+h*h;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=i*r,this.z=s*r,this.w=h*r),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,i){void 0===i&&(i=0);var s=this.x,h=this.y,r=this.z,n=this.w;return this.x=s+i*(t.x-s),this.y=h+i*(t.y-h),this.z=r+i*(t.z-r),this.w=n+i*(t.w-n),this},rotationTo:function(t,i){var s=t.x*i.x+t.y*i.y+t.z*i.z;return s<-.999999?(y.copy(e).cross(t).length()<h&&y.copy(a).cross(t),y.normalize(),this.setAxisAngle(y,Math.PI)):s>.999999?(this.x=0,this.y=0,this.z=0,this.w=1,this):(y.copy(t).cross(i),this.x=y.x,this.y=y.y,this.z=y.z,this.w=1+s,this.normalize())},setAxes:function(t,i,s){var h=o.val;return h[0]=i.x,h[3]=i.y,h[6]=i.z,h[1]=s.x,h[4]=s.y,h[7]=s.z,h[2]=-t.x,h[5]=-t.y,h[8]=-t.z,this.fromMat3(o).normalize()},identity:function(){return this.x=0,this.y=0,this.z=0,this.w=1,this},setAxisAngle:function(t,i){i*=.5;var s=Math.sin(i);return this.x=s*t.x,this.y=s*t.y,this.z=s*t.z,this.w=Math.cos(i),this},multiply:function(t){var i=this.x,s=this.y,h=this.z,r=this.w,n=t.x,e=t.y,a=t.z,y=t.w;return this.x=i*y+r*n+s*a-h*e,this.y=s*y+r*e+h*n-i*a,this.z=h*y+r*a+i*e-s*n,this.w=r*y-i*n-s*e-h*a,this},slerp:function(t,i){var s=this.x,r=this.y,n=this.z,e=this.w,a=t.x,y=t.y,o=t.z,x=t.w,z=s*a+r*y+n*o+e*x;z<0&&(z=-z,a=-a,y=-y,o=-o,x=-x);var u=1-i,w=i;if(1-z>h){var c=Math.acos(z),f=Math.sin(c);u=Math.sin((1-i)*c)/f,w=Math.sin(i*c)/f}return this.x=u*s+w*a,this.y=u*r+w*y,this.z=u*n+w*o,this.w=u*e+w*x,this},invert:function(){var t=this.x,i=this.y,s=this.z,h=this.w,r=t*t+i*i+s*s+h*h,n=r?1/r:0;return this.x=-t*n,this.y=-i*n,this.z=-s*n,this.w=h*n,this},conjugate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},rotateX:function(t){t*=.5;var i=this.x,s=this.y,h=this.z,r=this.w,n=Math.sin(t),e=Math.cos(t);return this.x=i*e+r*n,this.y=s*e+h*n,this.z=h*e-s*n,this.w=r*e-i*n,this},rotateY:function(t){t*=.5;var i=this.x,s=this.y,h=this.z,r=this.w,n=Math.sin(t),e=Math.cos(t);return this.x=i*e-h*n,this.y=s*e+r*n,this.z=h*e+i*n,this.w=r*e-s*n,this},rotateZ:function(t){t*=.5;var i=this.x,s=this.y,h=this.z,r=this.w,n=Math.sin(t),e=Math.cos(t);return this.x=i*e+s*n,this.y=s*e-i*n,this.z=h*e+r*n,this.w=r*e-h*n,this},calculateW:function(){var t=this.x,i=this.y,s=this.z;return this.w=-Math.sqrt(1-t*t-i*i-s*s),this},fromMat3:function(t){var i,s=t.val,h=s[0]+s[4]+s[8];if(h>0)i=Math.sqrt(h+1),this.w=.5*i,i=.5/i,this.x=(s[7]-s[5])*i,this.y=(s[2]-s[6])*i,this.z=(s[3]-s[1])*i;else{var e=0;s[4]>s[0]&&(e=1),s[8]>s[3*e+e]&&(e=2);var a=r[e],y=r[a];i=Math.sqrt(s[3*e+e]-s[3*a+a]-s[3*y+y]+1),n[e]=.5*i,i=.5/i,n[a]=(s[3*a+e]+s[3*e+a])*i,n[y]=(s[3*y+e]+s[3*e+y])*i,this.x=n[0],this.y=n[1],this.z=n[2],this.w=(s[3*y+a]-s[3*a+y])*i}return this}});module.exports=x;
},{"../utils/Class":"Q4x4","./Vector3":"E0QN","./Matrix3":"xkpI"}],"YZ7U":[function(require,module,exports) {
var e=require("../math/Vector3"),r=require("../math/Matrix4"),t=require("../math/Quaternion"),n=new r,a=new t,o=new e,i=function(e,r,t){return a.setAxisAngle(r,t),n.fromRotationTranslation(a,o.set(0,0,0)),e.transformMat4(n)};module.exports=i;
},{"../math/Vector3":"E0QN","../math/Matrix4":"SO9Y","../math/Quaternion":"l0NC"}],"N0aO":[function(require,module,exports) {
var e=require("./const"),r=require("../utils/object/Extend"),i={Angle:require("./angle/"),Distance:require("./distance/"),Easing:require("./easing/"),Fuzzy:require("./fuzzy/"),Interpolation:require("./interpolation/"),Pow2:require("./pow2/"),Snap:require("./snap/"),RandomDataGenerator:require("./random-data-generator/RandomDataGenerator"),Average:require("./Average"),Bernstein:require("./Bernstein"),Between:require("./Between"),CatmullRom:require("./CatmullRom"),CeilTo:require("./CeilTo"),Clamp:require("./Clamp"),DegToRad:require("./DegToRad"),Difference:require("./Difference"),Factorial:require("./Factorial"),FloatBetween:require("./FloatBetween"),FloorTo:require("./FloorTo"),FromPercent:require("./FromPercent"),GetSpeed:require("./GetSpeed"),IsEven:require("./IsEven"),IsEvenStrict:require("./IsEvenStrict"),Linear:require("./Linear"),MaxAdd:require("./MaxAdd"),MinSub:require("./MinSub"),Percent:require("./Percent"),RadToDeg:require("./RadToDeg"),RandomXY:require("./RandomXY"),RandomXYZ:require("./RandomXYZ"),RandomXYZW:require("./RandomXYZW"),Rotate:require("./Rotate"),RotateAround:require("./RotateAround"),RotateAroundDistance:require("./RotateAroundDistance"),RoundAwayFromZero:require("./RoundAwayFromZero"),RoundTo:require("./RoundTo"),SinCosTableGenerator:require("./SinCosTableGenerator"),SmootherStep:require("./SmootherStep"),SmoothStep:require("./SmoothStep"),ToXY:require("./ToXY"),TransformXY:require("./TransformXY"),Within:require("./Within"),Wrap:require("./Wrap"),Vector2:require("./Vector2"),Vector3:require("./Vector3"),Vector4:require("./Vector4"),Matrix3:require("./Matrix3"),Matrix4:require("./Matrix4"),Quaternion:require("./Quaternion"),RotateVec3:require("./RotateVec3")};i=r(!1,i,e),module.exports=i;
},{"./const":"TJqb","../utils/object/Extend":"CtVZ","./angle/":"ajTT","./distance/":"IM6W","./easing/":"ZXE5","./fuzzy/":"QEGU","./interpolation/":"sWG2","./pow2/":"WBtX","./snap/":"DDgt","./random-data-generator/RandomDataGenerator":"lhFT","./Average":"caE4","./Bernstein":"d1J1","./Between":"rT52","./CatmullRom":"RTzq","./CeilTo":"byQC","./Clamp":"dPkx","./DegToRad":"FzPC","./Difference":"yZ7v","./Factorial":"eVAG","./FloatBetween":"urL2","./FloorTo":"vCLf","./FromPercent":"oreP","./GetSpeed":"HACD","./IsEven":"wgPd","./IsEvenStrict":"KcxJ","./Linear":"dQUL","./MaxAdd":"iU2K","./MinSub":"afZm","./Percent":"e9HI","./RadToDeg":"T4as","./RandomXY":"CKY7","./RandomXYZ":"HJhl","./RandomXYZW":"KVeE","./Rotate":"TnWp","./RotateAround":"xjYo","./RotateAroundDistance":"nFdD","./RoundAwayFromZero":"F5Vn","./RoundTo":"JL9K","./SinCosTableGenerator":"IbTd","./SmootherStep":"HROE","./SmoothStep":"LBL7","./ToXY":"sALr","./TransformXY":"GQm4","./Within":"kZ4f","./Wrap":"gwbj","./Vector2":"xARF","./Vector3":"E0QN","./Vector4":"SD5N","./Matrix3":"xkpI","./Matrix4":"SO9Y","./Quaternion":"l0NC","./RotateVec3":"YZ7U"}],"L6E0":[function(require,module,exports) {
var e={Global:["game","anims","cache","plugins","registry","scale","sound","textures"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};e.DefaultScene.push("CameraManager3D"),e.Global.push("facebook"),module.exports=e;
},{}],"A458":[function(require,module,exports) {
var t=require("../utils/Class"),e=require("../const"),i=require("../device"),s=require("../utils/object/GetFastValue"),a=require("../utils/object/GetValue"),n=require("../utils/object/IsPlainObject"),r=require("../math/"),h=require("../utils/NOOP"),o=require("../plugins/DefaultPlugins"),l=require("../display/color/ValueToColor"),u=new t({initialize:function(t){void 0===t&&(t={});this.width=a(t,"width",1024),this.height=a(t,"height",768),this.zoom=a(t,"zoom",1),this.resolution=a(t,"resolution",1),this.parent=a(t,"parent",void 0),this.scaleMode=a(t,"scaleMode",0),this.expandParent=a(t,"expandParent",!0),this.autoRound=a(t,"autoRound",!1),this.autoCenter=a(t,"autoCenter",0),this.resizeInterval=a(t,"resizeInterval",500),this.fullscreenTarget=a(t,"fullscreenTarget",null),this.minWidth=a(t,"minWidth",0),this.maxWidth=a(t,"maxWidth",0),this.minHeight=a(t,"minHeight",0),this.maxHeight=a(t,"maxHeight",0);var u=a(t,"scale",null);u&&(this.width=a(u,"width",this.width),this.height=a(u,"height",this.height),this.zoom=a(u,"zoom",this.zoom),this.resolution=a(u,"resolution",this.resolution),this.parent=a(u,"parent",this.parent),this.scaleMode=a(u,"mode",this.scaleMode),this.expandParent=a(u,"expandParent",this.expandParent),this.autoRound=a(u,"autoRound",this.autoRound),this.autoCenter=a(u,"autoCenter",this.autoCenter),this.resizeInterval=a(u,"resizeInterval",this.resizeInterval),this.fullscreenTarget=a(u,"fullscreenTarget",this.fullscreenTarget),this.minWidth=a(u,"min.width",this.minWidth),this.maxWidth=a(u,"max.width",this.maxWidth),this.minHeight=a(u,"min.height",this.minHeight),this.maxHeight=a(u,"max.height",this.maxHeight)),this.renderType=a(t,"type",e.AUTO),this.canvas=a(t,"canvas",null),this.context=a(t,"context",null),this.canvasStyle=a(t,"canvasStyle",null),this.customEnvironment=a(t,"customEnvironment",!1),this.sceneConfig=a(t,"scene",null),this.seed=a(t,"seed",[(Date.now()*Math.random()).toString()]),r.RND=new r.RandomDataGenerator(this.seed),this.gameTitle=a(t,"title",""),this.gameURL=a(t,"url","https://phaser.io"),this.gameVersion=a(t,"version",""),this.autoFocus=a(t,"autoFocus",!0),this.domCreateContainer=a(t,"dom.createContainer",!1),this.domBehindCanvas=a(t,"dom.behindCanvas",!1),this.inputKeyboard=a(t,"input.keyboard",!0),this.inputKeyboardEventTarget=a(t,"input.keyboard.target",window),this.inputKeyboardCapture=a(t,"input.keyboard.capture",[]),this.inputMouse=a(t,"input.mouse",!0),this.inputMouseEventTarget=a(t,"input.mouse.target",null),this.inputMouseCapture=a(t,"input.mouse.capture",!0),this.inputTouch=a(t,"input.touch",i.input.touch),this.inputTouchEventTarget=a(t,"input.touch.target",null),this.inputTouchCapture=a(t,"input.touch.capture",!0),this.inputActivePointers=a(t,"input.activePointers",1),this.inputSmoothFactor=a(t,"input.smoothFactor",0),this.inputWindowEvents=a(t,"input.windowEvents",!0),this.inputGamepad=a(t,"input.gamepad",!1),this.inputGamepadEventTarget=a(t,"input.gamepad.target",window),this.disableContextMenu=a(t,"disableContextMenu",!1),this.audio=a(t,"audio"),this.hideBanner=!1===a(t,"banner",null),this.hidePhaser=a(t,"banner.hidePhaser",!1),this.bannerTextColor=a(t,"banner.text","#ffffff"),this.bannerBackgroundColor=a(t,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=a(t,"fps",null);var d=a(t,"render",t);this.antialias=a(d,"antialias",!0),this.antialiasGL=a(d,"antialiasGL",!0),this.mipmapFilter=a(d,"mipmapFilter","LINEAR"),this.desynchronized=a(d,"desynchronized",!1),this.roundPixels=a(d,"roundPixels",!1),this.pixelArt=a(d,"pixelArt",1!==this.zoom),this.pixelArt&&(this.antialias=!1,this.roundPixels=!0),this.transparent=a(d,"transparent",!1),this.clearBeforeRender=a(d,"clearBeforeRender",!0),this.premultipliedAlpha=a(d,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=a(d,"failIfMajorPerformanceCaveat",!1),this.powerPreference=a(d,"powerPreference","default"),this.batchSize=a(d,"batchSize",2e3),this.maxLights=a(d,"maxLights",10);var p=a(t,"backgroundColor",0);this.backgroundColor=l(p),0===p&&this.transparent&&(this.backgroundColor.alpha=0),this.preBoot=a(t,"callbacks.preBoot",h),this.postBoot=a(t,"callbacks.postBoot",h),this.physics=a(t,"physics",{}),this.defaultPhysicsSystem=a(this.physics,"default",!1),this.loaderBaseURL=a(t,"loader.baseURL",""),this.loaderPath=a(t,"loader.path",""),this.loaderMaxParallelDownloads=a(t,"loader.maxParallelDownloads",32),this.loaderCrossOrigin=a(t,"loader.crossOrigin",void 0),this.loaderResponseType=a(t,"loader.responseType",""),this.loaderAsync=a(t,"loader.async",!0),this.loaderUser=a(t,"loader.user",""),this.loaderPassword=a(t,"loader.password",""),this.loaderTimeout=a(t,"loader.timeout",0),this.loaderWithCredentials=a(t,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var A=a(t,"plugins",null),c=o.DefaultScene;A&&(Array.isArray(A)?this.defaultPlugins=A:n(A)&&(this.installGlobalPlugins=s(A,"global",[]),this.installScenePlugins=s(A,"scene",[]),Array.isArray(A.default)?c=A.default:Array.isArray(A.defaultMerge)&&(c=c.concat(A.defaultMerge)))),this.defaultPlugins=c;var g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=a(t,"images.default",g+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=a(t,"images.missing",g+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),window&&(window.FORCE_WEBGL?this.renderType=e.WEBGL:window.FORCE_CANVAS&&(this.renderType=e.CANVAS))}});module.exports=u;
},{"../utils/Class":"Q4x4","../const":"ktri","../device":"lb0S","../utils/object/GetFastValue":"xbYy","../utils/object/GetValue":"FWyS","../utils/object/IsPlainObject":"TEos","../math/":"N0aO","../utils/NOOP":"vnTW","../plugins/DefaultPlugins":"L6E0","../display/color/ValueToColor":"Q1dy"}],"w8zY":[function(require,module,exports) {
var e={setCrisp:function(e){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach(function(t){e.style["image-rendering"]=t}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};module.exports=e;
},{}],"sBaW":[function(require,module,exports) {
var e=require("../../display/canvas/CanvasPool"),a=require("../../display/color/Color"),t=require("../../utils/object/GetFastValue"),l=function(l,o){var n=t(o,"callback"),r=t(o,"type","image/png"),i=t(o,"encoder",.92),c=Math.abs(Math.round(t(o,"x",0))),u=Math.abs(Math.round(t(o,"y",0))),d=t(o,"width",l.width),h=t(o,"height",l.height);if(t(o,"getPixel",!1)){var s=l.getContext("2d").getImageData(c,u,1,1).data;n.call(null,new a(s[0],s[1],s[2],s[3]/255))}else if(0!==c||0!==u||d!==l.width||h!==l.height){var g=e.createWebGL(this,d,h);g.getContext("2d").drawImage(l,c,u,d,h,0,0,d,h);var v=new Image;v.onerror=function(){n.call(null),e.remove(g)},v.onload=function(){n.call(null,v),e.remove(g)},v.src=g.toDataURL(r,i)}else{var m=new Image;m.onerror=function(){n.call(null)},m.onload=function(){n.call(null,m)},m.src=l.toDataURL(r,i)}};module.exports=l;
},{"../../display/canvas/CanvasPool":"Brmu","../../display/color/Color":"f7cv","../../utils/object/GetFastValue":"xbYy"}],"k2xT":[function(require,module,exports) {
var e=require("../../BlendModes"),o=require("../../../device/CanvasFeatures"),r=function(){var r=[],t=o.supportNewBlendModes,i="source-over";return r[e.NORMAL]=i,r[e.ADD]="lighter",r[e.MULTIPLY]=t?"multiply":i,r[e.SCREEN]=t?"screen":i,r[e.OVERLAY]=t?"overlay":i,r[e.DARKEN]=t?"darken":i,r[e.LIGHTEN]=t?"lighten":i,r[e.COLOR_DODGE]=t?"color-dodge":i,r[e.COLOR_BURN]=t?"color-burn":i,r[e.HARD_LIGHT]=t?"hard-light":i,r[e.SOFT_LIGHT]=t?"soft-light":i,r[e.DIFFERENCE]=t?"difference":i,r[e.EXCLUSION]=t?"exclusion":i,r[e.HUE]=t?"hue":i,r[e.SATURATION]=t?"saturation":i,r[e.COLOR]=t?"color":i,r[e.LUMINOSITY]=t?"luminosity":i,r[e.ERASE]="destination-out",r[e.SOURCE_IN]="source-in",r[e.SOURCE_OUT]="source-out",r[e.SOURCE_ATOP]="source-atop",r[e.DESTINATION_OVER]="destination-over",r[e.DESTINATION_IN]="destination-in",r[e.DESTINATION_OUT]="destination-out",r[e.DESTINATION_ATOP]="destination-atop",r[e.LIGHTER]="lighter",r[e.COPY]="copy",r[e.XOR]="xor",r};module.exports=r;
},{"../../BlendModes":"XeVZ","../../../device/CanvasFeatures":"rJKe"}],"Uqk3":[function(require,module,exports) {
var t=require("../snapshot/CanvasSnapshot"),e=require("../../cameras/2d/events"),a=require("../../utils/Class"),i=require("../../const"),s=require("./utils/GetBlendModes"),n=require("../../scale/events"),r=require("../../gameobjects/components/TransformMatrix"),o=new a({initialize:function(t){this.game=t,this.type=i.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.config={clearBeforeRender:t.config.clearBeforeRender,backgroundColor:t.config.backgroundColor,resolution:t.config.resolution,antialias:t.config.antialias,roundPixels:t.config.roundPixels},this.gameCanvas=t.canvas;var e={alpha:t.config.transparent,desynchronized:t.config.desynchronized};this.gameContext=this.game.config.context?this.game.config.context:this.gameCanvas.getContext("2d",e),this.currentContext=this.gameContext,this.antialias=t.config.antialias,this.blendModes=s(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new r,this._tempMatrix2=new r,this._tempMatrix3=new r,this._tempMatrix4=new r,this.init()},init:function(){this.game.scale.on(n.RESIZE,this.onResize,this);var t=this.game.scale.baseSize;this.resize(t.width,t.height)},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},resize:function(t,e){this.width=t,this.height=e},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(t){return this.currentContext.globalCompositeOperation=t,this},setContext:function(t){return this.currentContext=t||this.gameContext,this},setAlpha:function(t){return this.currentContext.globalAlpha=t,this},preRender:function(){var t=this.gameContext,e=this.config,a=this.width,i=this.height;t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),e.clearBeforeRender&&t.clearRect(0,0,a,i),e.transparent||(t.fillStyle=e.backgroundColor.rgba,t.fillRect(0,0,a,i)),t.save(),this.drawCount=0},render:function(t,a,i,s){var n=a.list,r=n.length,o=s._cx,h=s._cy,l=s._cw,c=s._ch,p=s.renderToTexture?s.context:t.sys.context;p.save(),this.game.scene.customViewports&&(p.beginPath(),p.rect(o,h,l,c),p.clip()),this.currentContext=p;var g=s.mask;g&&g.preRenderCanvas(this,null,s._maskCamera),s.transparent||(p.fillStyle=s.backgroundColor.rgba,p.fillRect(o,h,l,c)),p.globalAlpha=s.alpha,p.globalCompositeOperation="source-over",this.drawCount+=n.length,s.renderToTexture&&s.emit(e.PRE_RENDER,s),s.matrix.copyToContext(p);for(var u=0;u<r;u++){var d=n[u];d.willRender(s)&&(d.mask&&d.mask.preRenderCanvas(this,d,s),d.renderCanvas(this,d,i,s),d.mask&&d.mask.postRenderCanvas(this,d,s))}p.setTransform(1,0,0,1,0,0),p.globalCompositeOperation="source-over",p.globalAlpha=1,s.flashEffect.postRenderCanvas(p),s.fadeEffect.postRenderCanvas(p),s.dirty=!1,g&&g.postRenderCanvas(this),p.restore(),s.renderToTexture&&(s.emit(e.POST_RENDER,s),s.renderToGame&&t.sys.context.drawImage(s.canvas,o,h))},postRender:function(){this.gameContext.restore();var e=this.snapshotState;e.callback&&(t(this.gameCanvas,e),e.callback=null)},snapshotCanvas:function(e,a,i,s,n,r,o,h,l){void 0===i&&(i=!1),this.snapshotArea(s,n,r,o,a,h,l);var c=this.snapshotState;return c.getPixel=i,t(this.canvas,c),c.callback=null,this},snapshot:function(t,e,a){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,t,e,a)},snapshotArea:function(t,e,a,i,s,n,r){var o=this.snapshotState;return o.callback=s,o.type=n,o.encoder=r,o.getPixel=!1,o.x=t,o.y=e,o.width=Math.min(a,this.gameCanvas.width),o.height=Math.min(i,this.gameCanvas.height),this},snapshotPixel:function(t,e,a){return this.snapshotArea(t,e,1,1,a),this.snapshotState.getPixel=!0,this},batchSprite:function(t,e,a,i){var s=a.alpha*t.alpha;if(0!==s){var n=this.currentContext,r=this._tempMatrix1,o=this._tempMatrix2,h=this._tempMatrix3,l=e.canvasData,c=l.x,p=l.y,g=e.cutWidth,u=e.cutHeight,d=e.customPivot,m=e.source.resolution,f=t.displayOriginX,x=t.displayOriginY,C=-f+e.x,v=-x+e.y;if(t.isCropped){var b=t._crop;b.flipX===t.flipX&&b.flipY===t.flipY||e.updateCropUVs(b,t.flipX,t.flipY),g=b.cw,u=b.ch,c=b.cx,p=b.cy,C=-f+b.x,v=-x+b.y,t.flipX&&(C>=0?C=-(C+g):C<0&&(C=Math.abs(C)-g)),t.flipY&&(v>=0?v=-(v+u):v<0&&(v=Math.abs(v)-u))}var y=1,w=1;t.flipX&&(d||(C+=-e.realWidth+2*f),y=-1),t.flipY&&(d||(v+=-e.realHeight+2*x),w=-1),o.applyITRS(t.x,t.y,t.rotation,t.scaleX*y,t.scaleY*w),r.copyFrom(a.matrix),i?(r.multiplyWithOffset(i,-a.scrollX*t.scrollFactorX,-a.scrollY*t.scrollFactorY),o.e=t.x,o.f=t.y,r.multiply(o,h)):(o.e-=a.scrollX*t.scrollFactorX,o.f-=a.scrollY*t.scrollFactorY,r.multiply(o,h)),n.save(),h.setToContext(n),n.globalCompositeOperation=this.blendModes[t.blendMode],n.globalAlpha=s,n.imageSmoothingEnabled=!(!this.antialias||e.source.scaleMode),n.drawImage(e.source.image,c,p,g,u,C,v,g/m,u/m),n.restore()}},destroy:function(){this.gameCanvas=null,this.gameContext=null,this.game=null}});module.exports=o;
},{"../snapshot/CanvasSnapshot":"sBaW","../../cameras/2d/events":"rVjJ","../../utils/Class":"Q4x4","../../const":"ktri","./utils/GetBlendModes":"k2xT","../../scale/events":"r6hq","../../gameobjects/components/TransformMatrix":"hzKR"}],"kAni":[function(require,module,exports) {
var e=function(e,n){if(!(n>=e.length)){for(var r=e.length-1,t=e[n],l=n;l<r;l++)e[l]=e[l+1];return e.length=r,t}};module.exports=e;
},{}],"V000":[function(require,module,exports) {
module.exports="addtexture";
},{}],"t3Zl":[function(require,module,exports) {
module.exports="onerror";
},{}],"Y9UR":[function(require,module,exports) {
module.exports="onload";
},{}],"fYKn":[function(require,module,exports) {
module.exports="removetexture";
},{}],"KB6D":[function(require,module,exports) {
module.exports={ADD:require("./ADD_EVENT"),ERROR:require("./ERROR_EVENT"),LOAD:require("./LOAD_EVENT"),READY:require("./READY_EVENT"),REMOVE:require("./REMOVE_EVENT")};
},{"./ADD_EVENT":"V000","./ERROR_EVENT":"t3Zl","./LOAD_EVENT":"Y9UR","./READY_EVENT":"r1pK","./REMOVE_EVENT":"fYKn"}],"mjFh":[function(require,module,exports) {
module.exports={getTintFromFloats:function(t,n,e,o){return((255&(255*o|0))<<24|(255&(255*t|0))<<16|(255&(255*n|0))<<8|255&(255*e|0))>>>0},getTintAppendFloatAlpha:function(t,n){return((255&(255*n|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function(t,n){return((255&(255*n|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},getComponentCount:function(t,n){for(var e=0,o=0;o<t.length;++o){var r=t[o];r.type===n.FLOAT?e+=r.size:e+=1}return e}};
},{}],"zdkt":[function(require,module,exports) {
var e=require("../../display/canvas/CanvasPool"),a=require("../../display/color/Color"),r=require("../../utils/object/GetFastValue"),t=function(t,l){var i=t.getContext("experimental-webgl"),n=r(l,"callback"),o=r(l,"type","image/png"),u=r(l,"encoder",.92),f=r(l,"x",0),g=r(l,"y",0),c=r(l,"getPixel",!1),d=r(l,"isFramebuffer",!1),s=d?r(l,"bufferWidth",1):i.drawingBufferWidth,v=d?r(l,"bufferHeight",1):i.drawingBufferHeight;if(c){var m=new Uint8Array(4),h=d?g:v-g;i.readPixels(f,h,1,1,i.RGBA,i.UNSIGNED_BYTE,m),n.call(null,new a(m[0],m[1],m[2],m[3]/255))}else{var w=r(l,"width",s),x=r(l,"height",v),b=w*x*4,p=new Uint8Array(b);i.readPixels(f,v-g-x,w,x,i.RGBA,i.UNSIGNED_BYTE,p);for(var y=e.createWebGL(this,w,x),B=y.getContext("2d"),G=B.getImageData(0,0,w,x),D=G.data,I=0;I<x;I++)for(var U=0;U<w;U++){var A=4*((x-I)*w+U),C=d?b-4*(I*w+(w-U)):4*(I*w+U);D[C+0]=p[A+0],D[C+1]=p[A+1],D[C+2]=p[A+2],D[C+3]=p[A+3]}B.putImageData(G,0,0);var E=new Image;E.onerror=function(){n.call(null),e.remove(y)},E.onload=function(){n.call(null,E),e.remove(y)},E.src=y.toDataURL(o,u)}};module.exports=t;
},{"../../display/canvas/CanvasPool":"Brmu","../../display/color/Color":"f7cv","../../utils/object/GetFastValue":"xbYy"}],"NQ11":[function(require,module,exports) {
module.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join("\n");
},{}],"vxvq":[function(require,module,exports) {
module.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join("\n");
},{}],"EVZ4":[function(require,module,exports) {
var t=require("../../utils/Class"),e=require("./Utils"),r=new t({initialize:function(t){this.name="WebGLPipeline",this.game=t.game,this.view=t.game.canvas,this.resolution=1,this.width=0,this.height=0,this.gl=t.gl,this.vertexCount=0,this.vertexCapacity=t.vertexCapacity,this.renderer=t.renderer,this.vertexData=t.vertices?t.vertices:new ArrayBuffer(t.vertexCapacity*t.vertexSize),this.vertexBuffer=this.renderer.createVertexBuffer(t.vertices?t.vertices:this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=this.renderer.createProgram(t.vertShader,t.fragShader),this.attributes=t.attributes,this.vertexSize=t.vertexSize,this.topology=t.topology,this.bytes=new Uint8Array(this.vertexData),this.vertexComponentCount=e.getComponentCount(t.attributes,this.gl),this.flushLocked=!1,this.active=!1},boot:function(){},addAttribute:function(t,r,i,s,n){return this.attributes.push({name:t,size:r,type:this.renderer.glFormats[i],normalized:s,offset:n}),this.vertexComponentCount=e.getComponentCount(this.attributes,this.gl),this},shouldFlush:function(){return this.vertexCount>=this.vertexCapacity},resize:function(t,e,r){return this.width=t*r,this.height=e*r,this.resolution=r,this},bind:function(){var t=this.gl,e=this.vertexBuffer,r=this.attributes,i=this.program,s=this.renderer,n=this.vertexSize;s.setProgram(i),s.setVertexBuffer(e);for(var h=0;h<r.length;++h){var o=r[h],a=t.getAttribLocation(i,o.name);a>=0?(t.enableVertexAttribArray(a),t.vertexAttribPointer(a,o.size,o.type,o.normalized,n,o.offset)):-1!==a&&t.disableVertexAttribArray(a)}return this},onBind:function(){return this},onPreRender:function(){return this},onRender:function(){return this},onPostRender:function(){return this},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var t=this.gl,e=this.vertexCount,r=this.topology,i=this.vertexSize;if(0!==e)return t.bufferSubData(t.ARRAY_BUFFER,0,this.bytes.subarray(0,e*i)),t.drawArrays(r,0,e),this.vertexCount=0,this.flushLocked=!1,this;this.flushLocked=!1},destroy:function(){var t=this.gl;return t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),delete this.program,delete this.vertexBuffer,delete this.gl,this},setFloat1:function(t,e){return this.renderer.setFloat1(this.program,t,e),this},setFloat2:function(t,e,r){return this.renderer.setFloat2(this.program,t,e,r),this},setFloat3:function(t,e,r,i){return this.renderer.setFloat3(this.program,t,e,r,i),this},setFloat4:function(t,e,r,i,s){return this.renderer.setFloat4(this.program,t,e,r,i,s),this},setFloat1v:function(t,e){return this.renderer.setFloat1v(this.program,t,e),this},setFloat2v:function(t,e){return this.renderer.setFloat2v(this.program,t,e),this},setFloat3v:function(t,e){return this.renderer.setFloat3v(this.program,t,e),this},setFloat4v:function(t,e){return this.renderer.setFloat4v(this.program,t,e),this},setInt1:function(t,e){return this.renderer.setInt1(this.program,t,e),this},setInt2:function(t,e,r){return this.renderer.setInt2(this.program,t,e,r),this},setInt3:function(t,e,r,i){return this.renderer.setInt3(this.program,t,e,r,i),this},setInt4:function(t,e,r,i,s){return this.renderer.setInt4(this.program,t,e,r,i,s),this},setMatrix2:function(t,e,r){return this.renderer.setMatrix2(this.program,t,e,r),this},setMatrix3:function(t,e,r){return this.renderer.setMatrix3(this.program,t,e,r),this},setMatrix4:function(t,e,r){return this.renderer.setMatrix4(this.program,t,e,r),this}});module.exports=r;
},{"../../utils/Class":"Q4x4","./Utils":"mjFh"}],"BD6f":[function(require,module,exports) {
var e=require("../../../utils/Class"),r=require("../shaders/BitmapMask-frag.js"),t=require("../shaders/BitmapMask-vert.js"),a=require("../WebGLPipeline"),i=new e({Extends:a,initialize:function(e){a.call(this,{game:e.game,renderer:e.renderer,gl:e.renderer.gl,topology:e.topology?e.topology:e.renderer.gl.TRIANGLES,vertShader:e.vertShader?e.vertShader:t,fragShader:e.fragShader?e.fragShader:r,vertexCapacity:e.vertexCapacity?e.vertexCapacity:3,vertexSize:e.vertexSize?e.vertexSize:2*Float32Array.BYTES_PER_ELEMENT,vertices:new Float32Array([-1,1,-1,-7,7,1]).buffer,attributes:[{name:"inPosition",size:2,type:e.renderer.gl.FLOAT,normalized:!1,offset:0}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.maxQuads=1,this.resolutionDirty=!0},onBind:function(){a.prototype.onBind.call(this);var e=this.renderer,r=this.program;return this.resolutionDirty&&(e.setFloat2(r,"uResolution",this.width,this.height),e.setInt1(r,"uMainSampler",0),e.setInt1(r,"uMaskSampler",1),this.resolutionDirty=!1),this},resize:function(e,r,t){return a.prototype.resize.call(this,e,r,t),this.resolutionDirty=!0,this},beginMask:function(e,r,t){var a=this.renderer,i=this.gl;e.bitmapMask&&i&&(a.flush(),e.prevFramebuffer=a.currentFramebuffer,a.setFramebuffer(e.mainFramebuffer),i.disable(i.STENCIL_TEST),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),a.currentCameraMask.mask!==e&&(a.currentMask.mask=e,a.currentMask.camera=t))},endMask:function(e,r){var t=this.gl,a=this.renderer,i=e.bitmapMask;if(i&&t){a.flush(),a.setFramebuffer(e.maskFramebuffer),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),a.setBlendMode(0,!0),i.renderWebGL(a,i,0,r),a.flush(),a.setFramebuffer(e.prevFramebuffer);var s=a.getCurrentStencilMask();s?(t.enable(t.STENCIL_TEST),s.mask.applyStencil(a,s.camera,!0)):a.currentMask.mask=null,a.setPipeline(this),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,e.maskTexture),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e.mainTexture),t.uniform1i(t.getUniformLocation(this.program,"uInvertMaskAlpha"),e.invertAlpha),t.drawArrays(this.topology,0,3)}}});module.exports=i;
},{"../../../utils/Class":"Q4x4","../shaders/BitmapMask-frag.js":"NQ11","../shaders/BitmapMask-vert.js":"vxvq","../WebGLPipeline":"EVZ4"}],"Qjq2":[function(require,module,exports) {
module.exports=["#define SHADER_NAME PHASER_FORWARD_DIFFUSE_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.rgb * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","","}",""].join("\n");
},{}],"zz3E":[function(require,module,exports) {
"use strict";function e(e,t,x){x=x||2;var i,u,v,y,o,p,l,a=t&&t.length,h=a?t[0]*x:e.length,s=n(e,0,h,x,!0),c=[];if(!s||s.next===s.prev)return c;if(a&&(s=f(e,t,s,x)),e.length>80*x){i=v=e[0],u=y=e[1];for(var Z=x;Z<h;Z+=x)(o=e[Z])<i&&(i=o),(p=e[Z+1])<u&&(u=p),o>v&&(v=o),p>y&&(y=p);l=0!==(l=Math.max(v-i,y-u))?1/l:0}return r(s,c,x,i,u,l),c}function n(e,n,t,r,x){var i,u;if(x===A(e,n,t,r)>0)for(i=n;i<t;i+=r)u=k(i,e[i],e[i+1],u);else for(i=t-r;i>=n;i-=r)u=k(i,e[i],e[i+1],u);return u&&d(u,u.next)&&(j(u),u=u.next),u}function t(e,n){if(!e)return e;n||(n=e);var t,r=e;do{if(t=!1,r.steiner||!d(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(j(r),(r=n=r.prev)===r.next)break;t=!0}}while(t||r!==n);return n}function r(e,n,f,y,o,p,a){if(e){!a&&p&&l(e,y,o,p);for(var h,s,c=e;e.prev!==e.next;)if(h=e.prev,s=e.next,p?i(e,y,o,p):x(e))n.push(h.i/f),n.push(e.i/f),n.push(s.i/f),j(e),e=s.next,c=s.next;else if((e=s)===c){a?1===a?r(e=u(e,n,f),n,f,y,o,p,2):2===a&&v(e,n,f,y,o,p):r(t(e),n,f,y,o,p,1);break}}}function x(e){var n=e.prev,t=e,r=e.next;if(g(n,t,r)>=0)return!1;for(var x=e.next.next;x!==e.prev;){if(c(n.x,n.y,t.x,t.y,r.x,r.y,x.x,x.y)&&g(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function i(e,n,t,r){var x=e.prev,i=e,u=e.next;if(g(x,i,u)>=0)return!1;for(var v=x.x<i.x?x.x<u.x?x.x:u.x:i.x<u.x?i.x:u.x,f=x.y<i.y?x.y<u.y?x.y:u.y:i.y<u.y?i.y:u.y,y=x.x>i.x?x.x>u.x?x.x:u.x:i.x>u.x?i.x:u.x,o=x.y>i.y?x.y>u.y?x.y:u.y:i.y>u.y?i.y:u.y,p=h(v,f,n,t,r),l=h(y,o,n,t,r),a=e.prevZ,s=e.nextZ;a&&a.z>=p&&s&&s.z<=l;){if(a!==e.prev&&a!==e.next&&c(x.x,x.y,i.x,i.y,u.x,u.y,a.x,a.y)&&g(a.prev,a,a.next)>=0)return!1;if(a=a.prevZ,s!==e.prev&&s!==e.next&&c(x.x,x.y,i.x,i.y,u.x,u.y,s.x,s.y)&&g(s.prev,s,s.next)>=0)return!1;s=s.nextZ}for(;a&&a.z>=p;){if(a!==e.prev&&a!==e.next&&c(x.x,x.y,i.x,i.y,u.x,u.y,a.x,a.y)&&g(a.prev,a,a.next)>=0)return!1;a=a.prevZ}for(;s&&s.z<=l;){if(s!==e.prev&&s!==e.next&&c(x.x,x.y,i.x,i.y,u.x,u.y,s.x,s.y)&&g(s.prev,s,s.next)>=0)return!1;s=s.nextZ}return!0}function u(e,n,t){var r=e;do{var x=r.prev,i=r.next.next;!d(x,i)&&w(x,r,r.next,i)&&b(x,i)&&b(i,x)&&(n.push(x.i/t),n.push(r.i/t),n.push(i.i/t),j(r),j(r.next),r=e=i),r=r.next}while(r!==e);return r}function v(e,n,x,i,u,v){var f=e;do{for(var y=f.next.next;y!==f.prev;){if(f.i!==y.i&&Z(f,y)){var o=m(f,y);return f=t(f,f.next),o=t(o,o.next),r(f,n,x,i,u,v),void r(o,n,x,i,u,v)}y=y.next}f=f.next}while(f!==e)}function f(e,r,x,i){var u,v,f,p=[];for(u=0,v=r.length;u<v;u++)(f=n(e,r[u]*i,u<v-1?r[u+1]*i:e.length,i,!1))===f.next&&(f.steiner=!0),p.push(s(f));for(p.sort(y),u=0;u<p.length;u++)o(p[u],x),x=t(x,x.next);return x}function y(e,n){return e.x-n.x}function o(e,n){if(n=p(e,n)){var r=m(n,e);t(r,r.next)}}function p(e,n){var t,r=n,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var v=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(v<=x&&v>u){if(u=v,v===x){if(i===r.y)return r;if(i===r.next.y)return r.next}t=r.x<r.next.x?r:r.next}}r=r.next}while(r!==n);if(!t)return null;if(x===u)return t.prev;var f,y=t,o=t.x,p=t.y,l=1/0;for(r=t.next;r!==y;)x>=r.x&&r.x>=o&&x!==r.x&&c(i<p?x:u,i,o,p,i<p?u:x,i,r.x,r.y)&&((f=Math.abs(i-r.y)/(x-r.x))<l||f===l&&r.x>t.x)&&b(r,e)&&(t=r,l=f),r=r.next;return t}function l(e,n,t,r){var x=e;do{null===x.z&&(x.z=h(x.x,x.y,n,t,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,a(x)}function a(e){var n,t,r,x,i,u,v,f,y=1;do{for(t=e,e=null,i=null,u=0;t;){for(u++,r=t,v=0,n=0;n<y&&(v++,r=r.nextZ);n++);for(f=y;v>0||f>0&&r;)0!==v&&(0===f||!r||t.z<=r.z)?(x=t,t=t.nextZ,v--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;t=r}i.nextZ=null,y*=2}while(u>1);return e}function h(e,n,t,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)*x)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-r)*x)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function s(e){var n=e,t=e;do{n.x<t.x&&(t=n),n=n.next}while(n!==e);return t}function c(e,n,t,r,x,i,u,v){return(x-u)*(n-v)-(e-u)*(i-v)>=0&&(e-u)*(r-v)-(t-u)*(n-v)>=0&&(t-u)*(i-v)-(x-u)*(r-v)>=0}function Z(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!z(e,n)&&b(e,n)&&b(n,e)&&M(e,n)}function g(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function d(e,n){return e.x===n.x&&e.y===n.y}function w(e,n,t,r){return!!(d(e,n)&&d(t,r)||d(e,r)&&d(t,n))||g(e,n,t)>0!=g(e,n,r)>0&&g(t,r,e)>0!=g(t,r,n)>0}function z(e,n){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&w(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function b(e,n){return g(e.prev,e,e.next)<0?g(e,n,e.next)>=0&&g(e,e.prev,n)>=0:g(e,n,e.prev)<0||g(e,e.next,n)<0}function M(e,n){var t=e,r=!1,x=(e.x+n.x)/2,i=(e.y+n.y)/2;do{t.y>i!=t.next.y>i&&t.next.y!==t.y&&x<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==e);return r}function m(e,n){var t=new q(e.i,e.x,e.y),r=new q(n.i,n.x,n.y),x=e.next,i=n.prev;return e.next=n,n.prev=e,t.next=x,x.prev=t,r.next=t,t.prev=r,i.next=r,r.prev=i,r}function k(e,n,t,r){var x=new q(e,n,t);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function j(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function q(e,n,t){this.i=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(e,n,t,r){for(var x=0,i=n,u=t-r;i<t;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}module.exports=e,e.deviation=function(e,n,t,r){var x=n&&n.length,i=x?n[0]*t:e.length,u=Math.abs(A(e,0,i,t));if(x)for(var v=0,f=n.length;v<f;v++){var y=n[v]*t,o=v<f-1?n[v+1]*t:e.length;u-=Math.abs(A(e,y,o,t))}var p=0;for(v=0;v<r.length;v+=3){var l=r[v]*t,a=r[v+1]*t,h=r[v+2]*t;p+=Math.abs((e[l]-e[h])*(e[a+1]-e[l+1])-(e[l]-e[a])*(e[h+1]-e[l+1]))}return 0===u&&0===p?0:Math.abs((p-u)/u)},e.flatten=function(e){for(var n=e[0][0].length,t={vertices:[],holes:[],dimensions:n},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<n;u++)t.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,t.holes.push(r))}return t};
},{}],"VByf":[function(require,module,exports) {
var t={modelMatrixDirty:!1,viewMatrixDirty:!1,projectionMatrixDirty:!1,modelMatrix:null,viewMatrix:null,projectionMatrix:null,mvpInit:function(){return this.modelMatrixDirty=!0,this.viewMatrixDirty=!0,this.projectionMatrixDirty=!0,this.modelMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},mvpUpdate:function(){var t=this.program;return this.modelMatrixDirty&&(this.renderer.setMatrix4(t,"uModelMatrix",!1,this.modelMatrix),this.modelMatrixDirty=!1),this.viewMatrixDirty&&(this.renderer.setMatrix4(t,"uViewMatrix",!1,this.viewMatrix),this.viewMatrixDirty=!1),this.projectionMatrixDirty&&(this.renderer.setMatrix4(t,"uProjectionMatrix",!1,this.projectionMatrix),this.projectionMatrixDirty=!1),this},modelIdentity:function(){var t=this.modelMatrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this.modelMatrixDirty=!0,this},modelScale:function(t,i,r){var e=this.modelMatrix;return e[0]=e[0]*t,e[1]=e[1]*t,e[2]=e[2]*t,e[3]=e[3]*t,e[4]=e[4]*i,e[5]=e[5]*i,e[6]=e[6]*i,e[7]=e[7]*i,e[8]=e[8]*r,e[9]=e[9]*r,e[10]=e[10]*r,e[11]=e[11]*r,this.modelMatrixDirty=!0,this},modelTranslate:function(t,i,r){var e=this.modelMatrix;return e[12]=e[0]*t+e[4]*i+e[8]*r+e[12],e[13]=e[1]*t+e[5]*i+e[9]*r+e[13],e[14]=e[2]*t+e[6]*i+e[10]*r+e[14],e[15]=e[3]*t+e[7]*i+e[11]*r+e[15],this.modelMatrixDirty=!0,this},modelRotateX:function(t){var i=this.modelMatrix,r=Math.sin(t),e=Math.cos(t),a=i[4],o=i[5],n=i[6],s=i[7],h=i[8],M=i[9],x=i[10],v=i[11];return i[4]=a*e+h*r,i[5]=o*e+M*r,i[6]=n*e+x*r,i[7]=s*e+v*r,i[8]=h*e-a*r,i[9]=M*e-o*r,i[10]=x*e-n*r,i[11]=v*e-s*r,this.modelMatrixDirty=!0,this},modelRotateY:function(t){var i=this.modelMatrix,r=Math.sin(t),e=Math.cos(t),a=i[0],o=i[1],n=i[2],s=i[3],h=i[8],M=i[9],x=i[10],v=i[11];return i[0]=a*e-h*r,i[1]=o*e-M*r,i[2]=n*e-x*r,i[3]=s*e-v*r,i[8]=a*r+h*e,i[9]=o*r+M*e,i[10]=n*r+x*e,i[11]=s*r+v*e,this.modelMatrixDirty=!0,this},modelRotateZ:function(t){var i=this.modelMatrix,r=Math.sin(t),e=Math.cos(t),a=i[0],o=i[1],n=i[2],s=i[3],h=i[4],M=i[5],x=i[6],v=i[7];return i[0]=a*e+h*r,i[1]=o*e+M*r,i[2]=n*e+x*r,i[3]=s*e+v*r,i[4]=h*e-a*r,i[5]=M*e-o*r,i[6]=x*e-n*r,i[7]=v*e-s*r,this.modelMatrixDirty=!0,this},viewIdentity:function(){var t=this.viewMatrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this.viewMatrixDirty=!0,this},viewScale:function(t,i,r){var e=this.viewMatrix;return e[0]=e[0]*t,e[1]=e[1]*t,e[2]=e[2]*t,e[3]=e[3]*t,e[4]=e[4]*i,e[5]=e[5]*i,e[6]=e[6]*i,e[7]=e[7]*i,e[8]=e[8]*r,e[9]=e[9]*r,e[10]=e[10]*r,e[11]=e[11]*r,this.viewMatrixDirty=!0,this},viewTranslate:function(t,i,r){var e=this.viewMatrix;return e[12]=e[0]*t+e[4]*i+e[8]*r+e[12],e[13]=e[1]*t+e[5]*i+e[9]*r+e[13],e[14]=e[2]*t+e[6]*i+e[10]*r+e[14],e[15]=e[3]*t+e[7]*i+e[11]*r+e[15],this.viewMatrixDirty=!0,this},viewRotateX:function(t){var i=this.viewMatrix,r=Math.sin(t),e=Math.cos(t),a=i[4],o=i[5],n=i[6],s=i[7],h=i[8],M=i[9],x=i[10],v=i[11];return i[4]=a*e+h*r,i[5]=o*e+M*r,i[6]=n*e+x*r,i[7]=s*e+v*r,i[8]=h*e-a*r,i[9]=M*e-o*r,i[10]=x*e-n*r,i[11]=v*e-s*r,this.viewMatrixDirty=!0,this},viewRotateY:function(t){var i=this.viewMatrix,r=Math.sin(t),e=Math.cos(t),a=i[0],o=i[1],n=i[2],s=i[3],h=i[8],M=i[9],x=i[10],v=i[11];return i[0]=a*e-h*r,i[1]=o*e-M*r,i[2]=n*e-x*r,i[3]=s*e-v*r,i[8]=a*r+h*e,i[9]=o*r+M*e,i[10]=n*r+x*e,i[11]=s*r+v*e,this.viewMatrixDirty=!0,this},viewRotateZ:function(t){var i=this.viewMatrix,r=Math.sin(t),e=Math.cos(t),a=i[0],o=i[1],n=i[2],s=i[3],h=i[4],M=i[5],x=i[6],v=i[7];return i[0]=a*e+h*r,i[1]=o*e+M*r,i[2]=n*e+x*r,i[3]=s*e+v*r,i[4]=h*e-a*r,i[5]=M*e-o*r,i[6]=x*e-n*r,i[7]=v*e-s*r,this.viewMatrixDirty=!0,this},viewLoad2D:function(t){var i=this.viewMatrix;return i[0]=t[0],i[1]=t[1],i[2]=0,i[3]=0,i[4]=t[2],i[5]=t[3],i[6]=0,i[7]=0,i[8]=t[4],i[9]=t[5],i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this.viewMatrixDirty=!0,this},viewLoad:function(t){var i=this.viewMatrix;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],this.viewMatrixDirty=!0,this},projIdentity:function(){var t=this.projectionMatrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this.projectionMatrixDirty=!0,this},projOrtho:function(t,i,r,e,a,o){var n=this.projectionMatrix,s=1/(t-i),h=1/(r-e),M=1/(a-o);return n[0]=-2*s,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*h,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*M,n[11]=0,n[12]=(t+i)*s,n[13]=(e+r)*h,n[14]=(o+a)*M,n[15]=1,this.projectionMatrixDirty=!0,this},projPersp:function(t,i,r,e){var a=this.projectionMatrix,o=1/Math.tan(t/2),n=1/(r-e);return a[0]=o/i,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=o,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+r)*n,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*r*n,a[15]=0,this.projectionMatrixDirty=!0,this}};module.exports=t;
},{}],"PqHQ":[function(require,module,exports) {
module.exports=["#define SHADER_NAME PHASER_TEXTURE_TINT_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.rgb * outTint.a, outTint.a);","    vec4 color = texture;","","    if (outTintEffect == 0.0)","    {","        //  Multiply texture tint","        color = texture * texel;","    }","    else if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.rgb * outTint.a, texture.a);","        color.a = texture.a * texel.a;","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n");
},{}],"q4Fl":[function(require,module,exports) {
module.exports=["#define SHADER_NAME PHASER_TEXTURE_TINT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform mat4 uModelMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}","",""].join("\n");
},{}],"w8xl":[function(require,module,exports) {
var t=require("../../../utils/Class"),e=require("../../../geom/polygon/Earcut"),i=require("../../../utils/object/GetFastValue"),r=require("./components/ModelViewProjection"),h=require("../shaders/TextureTint-frag.js"),s=require("../shaders/TextureTint-vert.js"),a=require("../../../gameobjects/components/TransformMatrix"),n=require("../Utils"),l=require("../WebGLPipeline"),u=new t({Extends:l,Mixins:[r],initialize:function(t){var e=t.renderer.config;l.call(this,{game:t.game,renderer:t.renderer,gl:t.renderer.gl,topology:i(t,"topology",t.renderer.gl.TRIANGLES),vertShader:i(t,"vertShader",s),fragShader:i(t,"fragShader",h),vertexCapacity:i(t,"vertexCapacity",6*e.batchSize),vertexSize:i(t,"vertexSize",5*Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT),attributes:[{name:"inPosition",size:2,type:t.renderer.gl.FLOAT,normalized:!1,offset:0},{name:"inTexCoord",size:2,type:t.renderer.gl.FLOAT,normalized:!1,offset:2*Float32Array.BYTES_PER_ELEMENT},{name:"inTintEffect",size:1,type:t.renderer.gl.FLOAT,normalized:!1,offset:4*Float32Array.BYTES_PER_ELEMENT},{name:"inTint",size:4,type:t.renderer.gl.UNSIGNED_BYTE,normalized:!0,offset:5*Float32Array.BYTES_PER_ELEMENT}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.vertexViewU32=new Uint32Array(this.vertexData),this.maxQuads=e.batchSize,this.batches=[],this._tempMatrix1=new a,this._tempMatrix2=new a,this._tempMatrix3=new a,this._tempMatrix4=new a,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.tintEffect=2,this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[],this.mvpInit()},onBind:function(){return l.prototype.onBind.call(this),this.mvpUpdate(),this},resize:function(t,e,i){return l.prototype.resize.call(this,t,e,i),this.projOrtho(0,this.width,this.height,0,-1e3,1e3),this},setTexture2D:function(t,e){return void 0===t&&(t=this.renderer.blankTexture.glTexture),void 0===e&&(e=0),this.requireTextureBatch(t,e)&&this.pushBatch(t,e),this},requireTextureBatch:function(t,e){var i=this.batches,r=i.length;return!(r>0)||!((e>0?i[r-1].textures[e-1]:i[r-1].texture)===t)},pushBatch:function(t,e){if(0===e)this.batches.push({first:this.vertexCount,texture:t,textures:[]});else{var i=[];i[e-1]=t,this.batches.push({first:this.vertexCount,texture:null,textures:i})}},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var t,e,i,r=this.gl,h=this.vertexCount,s=this.topology,a=this.vertexSize,n=this.renderer,l=this.batches,u=l.length,o=0,p=null;if(0===u||0===h)return this.flushLocked=!1,this;r.bufferSubData(r.ARRAY_BUFFER,0,this.bytes.subarray(0,h*a));for(var c=0;c<u-1;c++){if(p=l[c],t=l[c+1],p.textures.length>0){for(e=0;e<p.textures.length;++e)(i=p.textures[e])&&n.setTexture2D(i,1+e,!1);r.activeTexture(r.TEXTURE0)}o=t.first-p.first,null===p.texture||o<=0||(n.setTexture2D(p.texture,0,!1),r.drawArrays(s,p.first,o))}if((p=l[u-1]).textures.length>0){for(e=0;e<p.textures.length;++e)(i=p.textures[e])&&n.setTexture2D(i,1+e,!1);r.activeTexture(r.TEXTURE0)}return o=h-p.first,p.texture&&o>0&&(n.setTexture2D(p.texture,0,!1),r.drawArrays(s,p.first,o)),this.vertexCount=0,l.length=0,this.flushLocked=!1,this},batchSprite:function(t,e,i){this.renderer.setPipeline(this);var r=this._tempMatrix1,h=this._tempMatrix2,s=this._tempMatrix3,a=t.frame,l=a.glTexture,u=a.u0,o=a.v0,p=a.u1,c=a.v1,d=a.x,x=a.y,g=a.cutWidth,f=a.cutHeight,T=a.customPivot,v=t.displayOriginX,m=t.displayOriginY,y=-v+d,Y=-m+x;if(t.isCropped){var E=t._crop;E.flipX===t.flipX&&E.flipY===t.flipY||a.updateCropUVs(E,t.flipX,t.flipY),u=E.u0,o=E.v0,p=E.u1,c=E.v1,g=E.width,f=E.height,y=-v+(d=E.x),Y=-m+(x=E.y)}var M=1,X=1;t.flipX&&(T||(y+=-a.realWidth+2*v),M=-1),(t.flipY||a.source.isGLTexture&&!l.flipY)&&(T||(Y+=-a.realHeight+2*m),X=-1),h.applyITRS(t.x,t.y,t.rotation,t.scaleX*M,t.scaleY*X),r.copyFrom(e.matrix),i?(r.multiplyWithOffset(i,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),h.e=t.x,h.f=t.y,r.multiply(h,s)):(h.e-=e.scrollX*t.scrollFactorX,h.f-=e.scrollY*t.scrollFactorY,r.multiply(h,s));var b=y+g,_=Y+f,F=s.getX(y,Y),w=s.getY(y,Y),L=s.getX(y,_),R=s.getY(y,_),A=s.getX(b,_),B=s.getY(b,_),C=s.getX(b,Y),S=s.getY(b,Y),P=n.getTintAppendFloatAlpha(t._tintTL,e.alpha*t._alphaTL),z=n.getTintAppendFloatAlpha(t._tintTR,e.alpha*t._alphaTR),Q=n.getTintAppendFloatAlpha(t._tintBL,e.alpha*t._alphaBL),D=n.getTintAppendFloatAlpha(t._tintBR,e.alpha*t._alphaBR);e.roundPixels&&(F=Math.round(F),w=Math.round(w),L=Math.round(L),R=Math.round(R),A=Math.round(A),B=Math.round(B),C=Math.round(C),S=Math.round(S)),this.setTexture2D(l,0);var q=t._isTinted&&t.tintFill;this.batchQuad(F,w,L,R,A,B,C,S,u,o,p,c,P,z,Q,D,q,l,0)},batchQuad:function(t,e,i,r,h,s,a,n,l,u,o,p,c,d,x,g,f,T,v){var m=!1;this.vertexCount+6>this.vertexCapacity&&(this.flush(),m=!0,this.setTexture2D(T,v));var y=this.vertexViewF32,Y=this.vertexViewU32,E=this.vertexCount*this.vertexComponentCount-1;return y[++E]=t,y[++E]=e,y[++E]=l,y[++E]=u,y[++E]=f,Y[++E]=c,y[++E]=i,y[++E]=r,y[++E]=l,y[++E]=p,y[++E]=f,Y[++E]=x,y[++E]=h,y[++E]=s,y[++E]=o,y[++E]=p,y[++E]=f,Y[++E]=g,y[++E]=t,y[++E]=e,y[++E]=l,y[++E]=u,y[++E]=f,Y[++E]=c,y[++E]=h,y[++E]=s,y[++E]=o,y[++E]=p,y[++E]=f,Y[++E]=g,y[++E]=a,y[++E]=n,y[++E]=o,y[++E]=u,y[++E]=f,Y[++E]=d,this.vertexCount+=6,m},batchTri:function(t,e,i,r,h,s,a,n,l,u,o,p,c,d,x,g){var f=!1;this.vertexCount+3>this.vertexCapacity&&(this.flush(),this.setTexture2D(x,g),f=!0);var T=this.vertexViewF32,v=this.vertexViewU32,m=this.vertexCount*this.vertexComponentCount-1;return T[++m]=t,T[++m]=e,T[++m]=a,T[++m]=n,T[++m]=d,v[++m]=o,T[++m]=i,T[++m]=r,T[++m]=a,T[++m]=u,T[++m]=d,v[++m]=p,T[++m]=h,T[++m]=s,T[++m]=l,T[++m]=u,T[++m]=d,v[++m]=c,this.vertexCount+=3,f},batchTexture:function(t,e,i,r,h,s,a,n,l,u,o,p,c,d,x,g,f,T,v,m,y,Y,E,M,X,b,_,F,w,L,R){this.renderer.setPipeline(this,t);var A=this._tempMatrix1,B=this._tempMatrix2,C=this._tempMatrix3,S=T/i+_,P=v/r+F,z=(T+m)/i+_,Q=(v+y)/r+F,D=a,q=n,U=-g,k=-f;if(t.isCropped){var V=t._crop;D=V.width,q=V.height,a=V.width,n=V.height;var N=T=V.x,O=v=V.y;p&&(N=m-V.x-V.width),c&&!e.isRenderTexture&&(O=y-V.y-V.height),S=N/i+_,P=O/r+F,z=(N+V.width)/i+_,Q=(O+V.height)/r+F,U=-g+T,k=-f+v}p&&(D*=-1,U+=a),(c^=!R&&e.isRenderTexture?1:0)&&(q*=-1,k+=n);var j=U+D,G=k+q;B.applyITRS(h,s,o,l,u),A.copyFrom(w.matrix),L?(A.multiplyWithOffset(L,-w.scrollX*d,-w.scrollY*x),B.e=h,B.f=s,A.multiply(B,C)):(B.e-=w.scrollX*d,B.f-=w.scrollY*x,A.multiply(B,C));var I=C.getX(U,k),W=C.getY(U,k),H=C.getX(U,G),J=C.getY(U,G),K=C.getX(j,G),Z=C.getY(j,G),$=C.getX(j,k),tt=C.getY(j,k);w.roundPixels&&(I=Math.round(I),W=Math.round(W),H=Math.round(H),J=Math.round(J),K=Math.round(K),Z=Math.round(Z),$=Math.round($),tt=Math.round(tt)),this.setTexture2D(e,0),this.batchQuad(I,W,H,J,K,Z,$,tt,S,P,z,Q,Y,E,M,X,b,e,0)},batchTextureFrame:function(t,e,i,r,h,s,a){this.renderer.setPipeline(this);var l=this._tempMatrix1.copyFrom(s),u=this._tempMatrix2,o=e+t.width,p=i+t.height;a?l.multiply(a,u):u=l;var c=u.getX(e,i),d=u.getY(e,i),x=u.getX(e,p),g=u.getY(e,p),f=u.getX(o,p),T=u.getY(o,p),v=u.getX(o,i),m=u.getY(o,i);this.setTexture2D(t.glTexture,0),r=n.getTintAppendFloatAlpha(r,h),this.batchQuad(c,d,x,g,f,T,v,m,t.u0,t.v0,t.u1,t.v1,r,r,r,r,0,t.glTexture,0)},drawFillRect:function(t,e,i,r,h,s){var a=t+i,l=e+r;this.setTexture2D();var u=n.getTintAppendFloatAlphaAndSwap(h,s);this.batchQuad(t,e,t,l,a,l,a,e,0,0,1,1,u,u,u,u,2)},batchFillRect:function(t,e,i,r,h,s){this.renderer.setPipeline(this);var a=this._tempMatrix3;s&&s.multiply(h,a);var n=t+i,l=e+r,u=a.getX(t,e),o=a.getY(t,e),p=a.getX(t,l),c=a.getY(t,l),d=a.getX(n,l),x=a.getY(n,l),g=a.getX(n,e),f=a.getY(n,e),T=this.currentFrame,v=T.u0,m=T.v0,y=T.u1,Y=T.v1;this.batchQuad(u,o,p,c,d,x,g,f,v,m,y,Y,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.fillTint.BR,this.tintEffect)},batchFillTriangle:function(t,e,i,r,h,s,a,n){this.renderer.setPipeline(this);var l=this._tempMatrix3;n&&n.multiply(a,l);var u=l.getX(t,e),o=l.getY(t,e),p=l.getX(i,r),c=l.getY(i,r),d=l.getX(h,s),x=l.getY(h,s),g=this.currentFrame,f=g.u0,T=g.v0,v=g.u1,m=g.v1;this.batchTri(u,o,p,c,d,x,f,T,v,m,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.tintEffect)},batchStrokeTriangle:function(t,e,i,r,h,s,a,n,l){var u=this.tempTriangle;u[0].x=t,u[0].y=e,u[0].width=a,u[1].x=i,u[1].y=r,u[1].width=a,u[2].x=h,u[2].y=s,u[2].width=a,u[3].x=t,u[3].y=e,u[3].width=a,this.batchStrokePath(u,a,!1,n,l)},batchFillPath:function(t,i,r){this.renderer.setPipeline(this);var h=this._tempMatrix3;r&&r.multiply(i,h);for(var s,a,n=t.length,l=this.polygonCache,u=this.fillTint.TL,o=this.fillTint.TR,p=this.fillTint.BL,c=this.tintEffect,d=0;d<n;++d)a=t[d],l.push(a.x,a.y);n=(s=e(l)).length;for(var x=this.currentFrame,g=0;g<n;g+=3){var f=2*s[g+0],T=2*s[g+1],v=2*s[g+2],m=l[f+0],y=l[f+1],Y=l[T+0],E=l[T+1],M=l[v+0],X=l[v+1],b=h.getX(m,y),_=h.getY(m,y),F=h.getX(Y,E),w=h.getY(Y,E),L=h.getX(M,X),R=h.getY(M,X),A=x.u0,B=x.v0,C=x.u1,S=x.v1;this.batchTri(b,_,F,w,L,R,A,B,C,S,u,o,p,c)}l.length=0},batchStrokePath:function(t,e,i,r,h){this.renderer.setPipeline(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var s=t.length-1,a=0;a<s;a++){var n=t[a],l=t[a+1];this.batchLine(n.x,n.y,l.x,l.y,n.width/2,l.width/2,e,a,!i&&a===s-1,r,h)}},batchLine:function(t,e,i,r,h,s,a,n,l,u,o){this.renderer.setPipeline(this);var p=this._tempMatrix3;o&&o.multiply(u,p);var c=i-t,d=r-e,x=Math.sqrt(c*c+d*d),g=h*(r-e)/x,f=h*(t-i)/x,T=s*(r-e)/x,v=s*(t-i)/x,m=i-T,y=r-v,Y=t-g,E=e-f,M=i+T,X=r+v,b=t+g,_=e+f,F=p.getX(m,y),w=p.getY(m,y),L=p.getX(Y,E),R=p.getY(Y,E),A=p.getX(M,X),B=p.getY(M,X),C=p.getX(b,_),S=p.getY(b,_),P=this.strokeTint,z=this.tintEffect,Q=P.TL,D=P.TR,q=P.BL,U=P.BR,k=this.currentFrame,V=k.u0,N=k.v0,O=k.u1,j=k.v1;if(this.batchQuad(C,S,L,R,F,w,A,B,V,N,O,j,Q,D,q,U,z),!(a<=2)){var G=this.prevQuad,I=this.firstQuad;n>0&&G[4]?this.batchQuad(C,S,L,R,G[0],G[1],G[2],G[3],V,N,O,j,Q,D,q,U,z):(I[0]=C,I[1]=S,I[2]=L,I[3]=R,I[4]=1),l&&I[4]?this.batchQuad(F,w,A,B,I[0],I[1],I[2],I[3],V,N,O,j,Q,D,q,U,z):(G[0]=F,G[1]=w,G[2]=A,G[3]=B,G[4]=1)}}});module.exports=u;
},{"../../../utils/Class":"Q4x4","../../../geom/polygon/Earcut":"zz3E","../../../utils/object/GetFastValue":"xbYy","./components/ModelViewProjection":"VByf","../shaders/TextureTint-frag.js":"PqHQ","../shaders/TextureTint-vert.js":"q4Fl","../../../gameobjects/components/TransformMatrix":"hzKR","../Utils":"mjFh","../WebGLPipeline":"EVZ4"}],"fuar":[function(require,module,exports) {
var t=require("../../../utils/Class"),e=require("../shaders/ForwardDiffuse-frag.js"),r=require("./TextureTintPipeline"),i=10,a=new t({Extends:r,initialize:function(t){i=t.maxLights,t.fragShader=e.replace("%LIGHT_COUNT%",i.toString()),r.call(this,t),this.defaultNormalMap,this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1])},boot:function(){this.defaultNormalMap=this.game.textures.getFrame("__DEFAULT")},onBind:function(t){r.prototype.onBind.call(this);var e=this.renderer,i=this.program;return this.mvpUpdate(),e.setInt1(i,"uNormSampler",1),e.setFloat2(i,"uResolution",this.width,this.height),t&&this.setNormalMap(t),this},onRender:function(t,e){this.active=!1;var r=t.sys.lights;if(!r||r.lights.length<=0||!r.active)return this;var a=r.cull(e),s=Math.min(a.length,i);if(0===s)return this;this.active=!0;var o,n=this.renderer,h=this.program,l=e.matrix,u={x:0,y:0},d=n.height;for(o=0;o<i;++o)n.setFloat1(h,"uLights["+o+"].radius",0);for(n.setFloat4(h,"uCamera",e.x,e.y,e.rotation,e.zoom),n.setFloat3(h,"uAmbientLightColor",r.ambientColor.r,r.ambientColor.g,r.ambientColor.b),o=0;o<s;++o){var c=a[o],m="uLights["+o+"].";l.transformPoint(c.x,c.y,u),n.setFloat2(h,m+"position",u.x-e.scrollX*c.scrollFactorX*e.zoom,d-(u.y-e.scrollY*c.scrollFactorY*e.zoom)),n.setFloat3(h,m+"color",c.r,c.g,c.b),n.setFloat1(h,m+"intensity",c.intensity),n.setFloat1(h,m+"radius",c.radius)}return this.currentNormalMapRotation=null,this},batchTexture:function(t,e,r,i,a,s,o,n,h,l,u,d,c,m,p,x,g,f,M,v,y,T,F,N,R,b,S,w,C,I){var X;if(this.active)if(this.renderer.setPipeline(this),t.displayTexture?X=t.displayTexture.dataSource[t.displayFrame.sourceIndex]:t.texture?X=t.texture.dataSource[t.frame.sourceIndex]:t.tileset&&(X=Array.isArray(t.tileset)?t.tileset[0].image.dataSource[0]:t.tileset.image.dataSource[0]),X){this.setTexture2D(X.glTexture,1),this.setNormalMapRotation(u);var Y=this._tempMatrix1,_=this._tempMatrix2,L=this._tempMatrix3,P=f/r+S,D=M/i+w,A=(f+v)/r+S,z=(M+y)/i+w,U=o,q=n,O=-x,B=-g;if(t.isCropped){var E=t._crop;U=E.width,q=E.height,o=E.width,n=E.height;var G=f=E.x,H=M=E.y;d&&(G=v-E.x-E.width),c&&!e.isRenderTexture&&(H=y-E.y-E.height),P=G/r+S,D=H/i+w,A=(G+E.width)/r+S,z=(H+E.height)/i+w,O=-x+f,B=-g+M}d&&(U*=-1,O+=o),(c^=e.isRenderTexture?1:0)&&(q*=-1,B+=n);var j=O+U,Q=B+q;_.applyITRS(a,s,u,h,l),Y.copyFrom(C.matrix),I?(Y.multiplyWithOffset(I,-C.scrollX*m,-C.scrollY*p),_.e=a,_.f=s,Y.multiply(_,L)):(_.e-=C.scrollX*m,_.f-=C.scrollY*p,Y.multiply(_,L));var W=L.getX(O,B),k=L.getY(O,B),J=L.getX(O,Q),K=L.getY(O,Q),V=L.getX(j,Q),Z=L.getY(j,Q),$=L.getX(j,B),tt=L.getY(j,B);C.roundPixels&&(W=Math.round(W),k=Math.round(k),J=Math.round(J),K=Math.round(K),V=Math.round(V),Z=Math.round(Z),$=Math.round($),tt=Math.round(tt)),this.setTexture2D(e,0),this.batchQuad(W,k,J,K,V,Z,$,tt,P,D,A,z,T,F,N,R,b,e,0)}else console.warn("Normal map missing or invalid")},setNormalMap:function(t){var e;this.active&&t&&(t.texture&&(e=t.texture.dataSource[t.frame.sourceIndex]),e||(e=this.defaultNormalMap),this.setTexture2D(e.glTexture,1),this.renderer.setPipeline(t.defaultPipeline))},setNormalMapRotation:function(t){if(t!==this.currentNormalMapRotation||0===this.batches.length){this.batches.length>0&&this.flush();var e=this.inverseRotationMatrix;if(t){var r=-t,i=Math.cos(r),a=Math.sin(r);e[1]=a,e[3]=-a,e[0]=e[4]=i}else e[0]=e[4]=1,e[1]=e[3]=0;this.renderer.setMatrix3(this.program,"uInverseRotationMatrix",!1,e),this.currentNormalMapRotation=t}},batchSprite:function(t,e,i){if(this.active){var a=t.texture.dataSource[t.frame.sourceIndex];a&&(this.renderer.setPipeline(this),this.setTexture2D(a.glTexture,1),this.setNormalMapRotation(t.rotation),r.prototype.batchSprite.call(this,t,e,i))}}});a.LIGHT_COUNT=i,module.exports=a;
},{"../../../utils/Class":"Q4x4","../shaders/ForwardDiffuse-frag.js":"Qjq2","./TextureTintPipeline":"w8xl"}],"ByRZ":[function(require,module,exports) {
var e=require("../../../utils/Class"),t=require("../../../utils/object/GetFastValue"),r=require("./components/ModelViewProjection"),i=require("../shaders/TextureTint-frag.js"),s=require("../shaders/TextureTint-vert.js"),n=require("../../../gameobjects/components/TransformMatrix"),a=require("../WebGLPipeline"),h=new e({Extends:a,Mixins:[r],initialize:function(e){var r=e.renderer.config;a.call(this,{game:e.game,renderer:e.renderer,gl:e.renderer.gl,topology:e.renderer.gl.TRIANGLE_STRIP,vertShader:t(e,"vertShader",s),fragShader:t(e,"fragShader",i),vertexCapacity:t(e,"vertexCapacity",6*r.batchSize),vertexSize:t(e,"vertexSize",5*Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT),attributes:[{name:"inPosition",size:2,type:e.renderer.gl.FLOAT,normalized:!1,offset:0},{name:"inTexCoord",size:2,type:e.renderer.gl.FLOAT,normalized:!1,offset:2*Float32Array.BYTES_PER_ELEMENT},{name:"inTintEffect",size:1,type:e.renderer.gl.FLOAT,normalized:!1,offset:4*Float32Array.BYTES_PER_ELEMENT},{name:"inTint",size:4,type:e.renderer.gl.UNSIGNED_BYTE,normalized:!0,offset:5*Float32Array.BYTES_PER_ELEMENT}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.vertexViewU32=new Uint32Array(this.vertexData),this.maxQuads=r.batchSize,this.batches=[],this._tempMatrix1=new n,this._tempMatrix2=new n,this._tempMatrix3=new n,this.mvpInit()},onBind:function(){return a.prototype.onBind.call(this),this.mvpUpdate(),this},resize:function(e,t,r){return a.prototype.resize.call(this,e,t,r),this.projOrtho(0,this.width,this.height,0,-1e3,1e3),this},setTexture2D:function(e,t){return void 0===e&&(e=this.renderer.blankTexture.glTexture),void 0===t&&(t=0),this.requireTextureBatch(e,t)&&this.pushBatch(e,t),this},requireTextureBatch:function(e,t){var r=this.batches,i=r.length;return!(i>0)||!((t>0?r[i-1].textures[t-1]:r[i-1].texture)===e)},pushBatch:function(e,t){if(0===t)this.batches.push({first:this.vertexCount,texture:e,textures:[]});else{var r=[];r[t-1]=e,this.batches.push({first:this.vertexCount,texture:null,textures:r})}},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var e,t,r,i=this.gl,s=this.vertexCount,n=this.topology,a=this.vertexSize,h=this.renderer,u=this.batches,o=u.length,l=0,x=null;if(0===o||0===s)return this.flushLocked=!1,this;i.bufferSubData(i.ARRAY_BUFFER,0,this.bytes.subarray(0,s*a));for(var f=0;f<o-1;f++){if(x=u[f],e=u[f+1],x.textures.length>0){for(t=0;t<x.textures.length;++t)(r=x.textures[t])&&h.setTexture2D(r,1+t,!1);i.activeTexture(i.TEXTURE0)}l=e.first-x.first,null===x.texture||l<=0||(h.setTexture2D(x.texture,0,!1),i.drawArrays(n,x.first,l))}if((x=u[o-1]).textures.length>0){for(t=0;t<x.textures.length;++t)(r=x.textures[t])&&h.setTexture2D(r,1+t,!1);i.activeTexture(i.TEXTURE0)}return l=s-x.first,x.texture&&l>0&&(h.setTexture2D(x.texture,0,!1),i.drawArrays(n,x.first,l)),this.vertexCount=0,u.length=0,this.flushLocked=!1,this}});module.exports=h;
},{"../../../utils/Class":"Q4x4","../../../utils/object/GetFastValue":"xbYy","./components/ModelViewProjection":"VByf","../shaders/TextureTint-frag.js":"PqHQ","../shaders/TextureTint-vert.js":"q4Fl","../../../gameobjects/components/TransformMatrix":"hzKR","../WebGLPipeline":"EVZ4"}],"FVKV":[function(require,module,exports) {
var e=require("../../cameras/2d/BaseCamera"),t=require("../../cameras/2d/events"),i=require("../../utils/Class"),r=require("../../const"),n=require("../../core/events"),s=require("../../math/pow2/IsSizePowerOfTwo"),a=require("../../utils/NOOP"),h=require("../../scale/events"),u=require("../../utils/array/SpliceOne"),o=require("../../textures/events"),l=require("../../gameobjects/components/TransformMatrix"),f=require("./Utils"),c=require("../snapshot/WebGLSnapshot"),d=require("./pipelines/BitmapMaskPipeline"),m=require("./pipelines/ForwardDiffuseLightPipeline"),g=require("./pipelines/TextureTintPipeline"),p=require("./pipelines/TextureTintStripPipeline"),T=new i({initialize:function(t){var i=t.config,n={alpha:i.transparent,desynchronized:i.desynchronized,depth:!1,antialias:i.antialiasGL,premultipliedAlpha:i.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:i.failIfMajorPerformanceCaveat,powerPreference:i.powerPreference};this.config={clearBeforeRender:i.clearBeforeRender,antialias:i.antialias,backgroundColor:i.backgroundColor,contextCreation:n,resolution:i.resolution,roundPixels:i.roundPixels,maxTextures:i.maxTextures,maxTextureSize:i.maxTextureSize,batchSize:i.batchSize,maxLights:i.maxLights,mipmapFilter:i.mipmapFilter},this.game=t,this.type=r.WEBGL,this.width=0,this.height=0,this.canvas=t.canvas,this.blendModes=[],this.nativeTextures=[],this.contextLost=!1,this.pipelines=null,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTextureUnit=0,this.currentTextures=new Array(16),this.currentFramebuffer=null,this.currentPipeline=null,this.currentProgram=null,this.currentVertexBuffer=null,this.currentIndexBuffer=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=a,this.contextRestoredHandler=a,this.gl=null,this.supportedExtensions=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.defaultCamera=new e(0,0,0,0),this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this._tempMatrix4=new l,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.mipmapFilter=null,this.init(this.config)},init:function(e){var t,i=this.game,s=this.canvas,a=e.backgroundColor;if(!(t=i.config.context?i.config.context:s.getContext("webgl",e.contextCreation)||s.getContext("experimental-webgl",e.contextCreation))||t.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=t;var h=this;this.contextLostHandler=function(e){h.contextLost=!0,h.game.events.emit(n.CONTEXT_LOST,h),e.preventDefault()},this.contextRestoredHandler=function(){h.contextLost=!1,h.init(h.config),h.game.events.emit(n.CONTEXT_RESTORED,h)},s.addEventListener("webglcontextlost",this.contextLostHandler,!1),s.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),i.context=t;for(var u=0;u<=27;u++)this.blendModes.push({func:[t.ONE,t.ONE_MINUS_SRC_ALPHA],equation:t.FUNC_ADD});this.blendModes[1].func=[t.ONE,t.DST_ALPHA],this.blendModes[2].func=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[t.ONE,t.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[t.ZERO,t.ONE_MINUS_SRC_ALPHA],equation:t.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=t.BYTE,this.glFormats[1]=t.SHORT,this.glFormats[2]=t.UNSIGNED_BYTE,this.glFormats[3]=t.UNSIGNED_SHORT,this.glFormats[4]=t.FLOAT,this.glFuncMap={mat2:{func:t.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:t.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:t.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:t.uniform1f,length:1},"1fv":{func:t.uniform1fv,length:1},"1i":{func:t.uniform1i,length:1},"1iv":{func:t.uniform1iv,length:1},"2f":{func:t.uniform2f,length:2},"2fv":{func:t.uniform2fv,length:1},"2i":{func:t.uniform2i,length:2},"2iv":{func:t.uniform2iv,length:1},"3f":{func:t.uniform3f,length:3},"3fv":{func:t.uniform3fv,length:1},"3i":{func:t.uniform3i,length:3},"3iv":{func:t.uniform3iv,length:1},"4f":{func:t.uniform4f,length:4},"4fv":{func:t.uniform4fv,length:1},"4i":{func:t.uniform4i,length:4},"4iv":{func:t.uniform4iv,length:1}};var l=t.getSupportedExtensions();e.maxTextures||(e.maxTextures=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),e.maxTextureSize||(e.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE));var f="WEBGL_compressed_texture_",c="WEBKIT_"+f;this.compression.ETC1=t.getExtension(f+"etc1")||t.getExtension(c+"etc1"),this.compression.PVRTC=t.getExtension(f+"pvrtc")||t.getExtension(c+"pvrtc"),this.compression.S3TC=t.getExtension(f+"s3tc")||t.getExtension(c+"s3tc"),this.supportedExtensions=l,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.clearColor(a.redGL,a.greenGL,a.blueGL,a.alphaGL),this.mipmapFilter=t[e.mipmapFilter];for(var T=0;T<this.currentTextures.length;++T)this.currentTextures[T]=null;return this.pipelines={},this.addPipeline("TextureTintPipeline",new g({game:i,renderer:this})),this.addPipeline("TextureTintStripPipeline",new p({game:i,renderer:this})),this.addPipeline("BitmapMaskPipeline",new d({game:i,renderer:this})),this.addPipeline("Light2D",new m({game:i,renderer:this,maxLights:e.maxLights})),this.setBlendMode(r.BlendModes.NORMAL),i.textures.once(o.READY,this.boot,this),this},boot:function(){for(var e in this.pipelines)this.pipelines[e].boot();var t=this.game.textures.getFrame("__DEFAULT");this.pipelines.TextureTintPipeline.currentFrame=t,this.blankTexture=t;var i=this.gl;i.bindFramebuffer(i.FRAMEBUFFER,null),i.enable(i.SCISSOR_TEST),this.setPipeline(this.pipelines.TextureTintPipeline),this.game.scale.on(h.RESIZE,this.onResize,this);var r=this.game.scale.baseSize;this.resize(r.width,r.height,this.game.scale.resolution)},onResize:function(e,t,i,r){t.width===this.width&&t.height===this.height&&r===this.resolution||this.resize(t.width,t.height,r)},resize:function(e,t,i){var r=this.gl,n=this.pipelines;for(var s in this.width=e,this.height=t,this.resolution=i,r.viewport(0,0,e,t),n)n[s].resize(e,t,i);return this.drawingBufferHeight=r.drawingBufferHeight,r.scissor(0,r.drawingBufferHeight-t,e,t),this.defaultCamera.setSize(e,t),this},hasExtension:function(e){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(e)},getExtension:function(e){return this.hasExtension(e)?(e in this.extensions||(this.extensions[e]=this.gl.getExtension(e)),this.extensions[e]):null},flush:function(){this.currentPipeline&&this.currentPipeline.flush()},hasPipeline:function(e){return e in this.pipelines},getPipeline:function(e){return this.hasPipeline(e)?this.pipelines[e]:null},removePipeline:function(e){return delete this.pipelines[e],this},addPipeline:function(e,t){return this.hasPipeline(e)?console.warn("Pipeline exists: "+e):this.pipelines[e]=t,t.name=e,this.pipelines[e].resize(this.width,this.height,this.config.resolution),t},pushScissor:function(e,t,i,r,n){void 0===n&&(n=this.drawingBufferHeight);var s=[e,t,i,r];return this.scissorStack.push(s),this.setScissor(e,t,i,r,n),this.currentScissor=s,s},setScissor:function(e,t,i,r,n){void 0===n&&(n=this.drawingBufferHeight);var s=this.gl,a=this.currentScissor,h=i>0&&r>0;if(a&&h){var u=a[0],o=a[1],l=a[2],f=a[3];h=u!==e||o!==t||l!==i||f!==r}h&&(this.flush(),s.scissor(e,n-t-r,i,r))},popScissor:function(){var e=this.scissorStack;e.pop();var t=e[e.length-1];t&&this.setScissor(t[0],t[1],t[2],t[3]),this.currentScissor=t},setPipeline:function(e,t){return this.currentPipeline===e&&this.currentPipeline.vertexBuffer===this.currentVertexBuffer&&this.currentPipeline.program===this.currentProgram||(this.flush(),this.currentPipeline=e,this.currentPipeline.bind()),this.currentPipeline.onBind(t),this.currentPipeline},hasActiveStencilMask:function(){var e=this.currentMask.mask,t=this.currentCameraMask.mask;return e&&e.isStencil||t&&t.isStencil},rebindPipeline:function(e){var t=this.gl;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),this.hasActiveStencilMask()?t.clear(t.DEPTH_BUFFER_BIT):(t.disable(t.STENCIL_TEST),t.clear(t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)),t.viewport(0,0,this.width,this.height),this.setBlendMode(0,!0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.blankTexture.glTexture),this.currentActiveTextureUnit=0,this.currentTextures[0]=this.blankTexture.glTexture,this.currentPipeline=e,this.currentPipeline.bind(),this.currentPipeline.onBind()},clearPipeline:function(){this.flush(),this.currentPipeline=null,this.currentProgram=null,this.currentVertexBuffer=null,this.currentIndexBuffer=null,this.setBlendMode(0,!0)},setBlendMode:function(e,t){void 0===t&&(t=!1);var i=this.gl,n=this.blendModes[e];return!!(t||e!==r.BlendModes.SKIP_CHECK&&this.currentBlendMode!==e)&&(this.flush(),i.enable(i.BLEND),i.blendEquation(n.equation),n.func.length>2?i.blendFuncSeparate(n.func[0],n.func[1],n.func[2],n.func[3]):i.blendFunc(n.func[0],n.func[1]),this.currentBlendMode=e,!0)},addBlendMode:function(e,t){return this.blendModes.push({func:e,equation:t})-1},updateBlendMode:function(e,t,i){return this.blendModes[e]&&(this.blendModes[e].func=t,i&&(this.blendModes[e].equation=i)),this},removeBlendMode:function(e){return e>17&&this.blendModes[e]&&this.blendModes.splice(e,1),this},setBlankTexture:function(e){void 0===e&&(e=!1),!e&&0===this.currentActiveTextureUnit&&this.currentTextures[0]||this.setTexture2D(this.blankTexture.glTexture,0)},setTexture2D:function(e,t,i){void 0===i&&(i=!0);var r=this.gl;return e!==this.currentTextures[t]&&(i&&this.flush(),this.currentActiveTextureUnit!==t&&(r.activeTexture(r.TEXTURE0+t),this.currentActiveTextureUnit=t),r.bindTexture(r.TEXTURE_2D,e),this.currentTextures[t]=e),this},setFramebuffer:function(e,t){void 0===t&&(t=!1);var i=this.gl,r=this.width,n=this.height;return e!==this.currentFramebuffer&&(e&&e.renderTexture?(r=e.renderTexture.width,n=e.renderTexture.height):this.flush(),i.bindFramebuffer(i.FRAMEBUFFER,e),i.viewport(0,0,r,n),t&&(e?(this.drawingBufferHeight=n,this.pushScissor(0,0,r,n)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=e),this},setProgram:function(e){var t=this.gl;return e!==this.currentProgram&&(this.flush(),t.useProgram(e),this.currentProgram=e),this},setVertexBuffer:function(e){var t=this.gl;return e!==this.currentVertexBuffer&&(this.flush(),t.bindBuffer(t.ARRAY_BUFFER,e),this.currentVertexBuffer=e),this},setIndexBuffer:function(e){var t=this.gl;return e!==this.currentIndexBuffer&&(this.flush(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.currentIndexBuffer=e),this},createTextureFromSource:function(e,t,i,n){var a=this.gl,h=a.NEAREST,u=a.NEAREST,o=a.CLAMP_TO_EDGE;t=e?e.width:t,i=e?e.height:i;var l=s(t,i);return l&&(o=a.REPEAT),n===r.ScaleModes.LINEAR&&this.config.antialias&&(h=l?this.mipmapFilter:a.LINEAR,u=a.LINEAR),e||"number"!=typeof t||"number"!=typeof i?this.createTexture2D(0,h,u,o,o,a.RGBA,e):this.createTexture2D(0,h,u,o,o,a.RGBA,null,t,i)},createTexture2D:function(e,t,i,r,n,a,h,u,o,l,f,c){l=null==l||l,void 0===f&&(f=!1),void 0===c&&(c=!1);var d=this.gl,m=d.createTexture();return this.setTexture2D(m,0),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,t),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,i),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,n),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,r),d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,c),null==h?d.texImage2D(d.TEXTURE_2D,e,a,u,o,0,a,d.UNSIGNED_BYTE,null):(f||(u=h.width,o=h.height),d.texImage2D(d.TEXTURE_2D,e,a,a,d.UNSIGNED_BYTE,h)),s(u,o)&&d.generateMipmap(d.TEXTURE_2D),this.setTexture2D(null,0),m.isAlphaPremultiplied=l,m.isRenderTexture=!1,m.width=u,m.height=o,this.nativeTextures.push(m),m},createFramebuffer:function(e,t,i,r){var n,s=this.gl,a=s.createFramebuffer();if(this.setFramebuffer(a),r){var h=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,h),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,e,t),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,h)}if(i.isRenderTexture=!0,i.isAlphaPremultiplied=!1,s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,i,0),(n=s.checkFramebufferStatus(s.FRAMEBUFFER))!==s.FRAMEBUFFER_COMPLETE){throw new Error("Framebuffer incomplete. Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[n])}return a.renderTexture=i,this.setFramebuffer(null),a},createProgram:function(e,t){var i=this.gl,r=i.createProgram(),n=i.createShader(i.VERTEX_SHADER),s=i.createShader(i.FRAGMENT_SHADER);if(i.shaderSource(n,e),i.shaderSource(s,t),i.compileShader(n),i.compileShader(s),!i.getShaderParameter(n,i.COMPILE_STATUS))throw new Error("Failed to compile Vertex Shader:\n"+i.getShaderInfoLog(n));if(!i.getShaderParameter(s,i.COMPILE_STATUS))throw new Error("Failed to compile Fragment Shader:\n"+i.getShaderInfoLog(s));if(i.attachShader(r,n),i.attachShader(r,s),i.linkProgram(r),!i.getProgramParameter(r,i.LINK_STATUS))throw new Error("Failed to link program:\n"+i.getProgramInfoLog(r));return r},createVertexBuffer:function(e,t){var i=this.gl,r=i.createBuffer();return this.setVertexBuffer(r),i.bufferData(i.ARRAY_BUFFER,e,t),this.setVertexBuffer(null),r},createIndexBuffer:function(e,t){var i=this.gl,r=i.createBuffer();return this.setIndexBuffer(r),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e,t),this.setIndexBuffer(null),r},deleteTexture:function(e){var t=this.nativeTextures.indexOf(e);return-1!==t&&u(this.nativeTextures,t),this.gl.deleteTexture(e),this.currentTextures[0]!==e||this.game.pendingDestroy||this.setBlankTexture(!0),this},deleteFramebuffer:function(e){return this.gl.deleteFramebuffer(e),this},deleteProgram:function(e){return this.gl.deleteProgram(e),this},deleteBuffer:function(e){return this.gl.deleteBuffer(e),this},preRenderCamera:function(e){var i=e._cx,r=e._cy,n=e._cw,s=e._ch,a=this.pipelines.TextureTintPipeline,h=e.backgroundColor;if(e.renderToTexture){this.flush(),this.pushScissor(i,r,n,-s),this.setFramebuffer(e.framebuffer);var u=this.gl;u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),a.projOrtho(i,n+i,r,s+r,-1e3,1e3),e.mask&&(this.currentCameraMask.mask=e.mask,this.currentCameraMask.camera=e._maskCamera,e.mask.preRenderWebGL(this,e,e._maskCamera)),h.alphaGL>0&&a.drawFillRect(i,r,n+i,s+r,f.getTintFromFloats(h.redGL,h.greenGL,h.blueGL,1),h.alphaGL),e.emit(t.PRE_RENDER,e)}else this.pushScissor(i,r,n,s),e.mask&&(this.currentCameraMask.mask=e.mask,this.currentCameraMask.camera=e._maskCamera,e.mask.preRenderWebGL(this,e,e._maskCamera)),h.alphaGL>0&&a.drawFillRect(i,r,n,s,f.getTintFromFloats(h.redGL,h.greenGL,h.blueGL,1),h.alphaGL)},getCurrentStencilMask:function(){var e=null,t=this.maskStack,i=this.currentCameraMask;return t.length>0?e=t[t.length-1]:i.mask&&i.mask.isStencil&&(e=i),e},postRenderCamera:function(e){this.setPipeline(this.pipelines.TextureTintPipeline);var i=this.pipelines.TextureTintPipeline;if(e.flashEffect.postRenderWebGL(i,f.getTintFromFloats),e.fadeEffect.postRenderWebGL(i,f.getTintFromFloats),e.dirty=!1,this.popScissor(),e.renderToTexture){if(i.flush(),this.setFramebuffer(null),e.emit(t.POST_RENDER,e),e.renderToGame){i.projOrtho(0,i.width,i.height,0,-1e3,1e3);var r=f.getTintAppendFloatAlpha;(e.pipeline?e.pipeline:i).batchTexture(e,e.glTexture,e.width,e.height,e.x,e.y,e.width,e.height,e.zoom,e.zoom,e.rotation,e.flipX,!e.flipY,1,1,0,0,0,0,e.width,e.height,r(e._tintTL,e._alphaTL),r(e._tintTR,e._alphaTR),r(e._tintBL,e._alphaBL),r(e._tintBR,e._alphaBR),e._isTinted&&e.tintFill,0,0,this.defaultCamera,null)}this.setBlankTexture(!0)}e.mask&&(this.currentCameraMask.mask=null,e.mask.postRenderWebGL(this,e._maskCamera))},preRender:function(){if(!this.contextLost){var e=this.gl,t=this.pipelines;if(e.bindFramebuffer(e.FRAMEBUFFER,null),this.config.clearBeforeRender){var i=this.config.backgroundColor;e.clearColor(i.redGL,i.greenGL,i.blueGL,i.alphaGL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT)}for(var r in e.enable(e.SCISSOR_TEST),t)t[r].onPreRender();this.currentScissor=[0,0,this.width,this.height],this.scissorStack=[this.currentScissor],this.game.scene.customViewports&&e.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.setPipeline(this.pipelines.TextureTintPipeline)}},render:function(e,t,i,n){if(!this.contextLost){var s=t.list,a=s.length,h=this.pipelines;for(var u in h)h[u].onRender(e,n);if(this.preRenderCamera(n),0===a)return this.setBlendMode(r.BlendModes.NORMAL),void this.postRenderCamera(n);this.currentType="";for(var o=this.currentMask,l=0;l<a;l++){var f=s[l];if(f.willRender(n)){f.blendMode!==this.currentBlendMode&&this.setBlendMode(f.blendMode);var c=f.mask;(o=this.currentMask).mask&&o.mask!==c&&o.mask.postRenderWebGL(this,o.camera),c&&o.mask!==c&&c.preRenderWebGL(this,f,n);var d=f.type;d!==this.currentType&&(this.newType=!0,this.currentType=d),this.nextTypeMatch=l<a-1&&s[l+1].type===this.currentType,f.renderWebGL(this,f,i,n),this.newType=!1}}(o=this.currentMask).mask&&o.mask.postRenderWebGL(this,o.camera),this.setBlendMode(r.BlendModes.NORMAL),this.postRenderCamera(n)}},postRender:function(){if(!this.contextLost){this.flush();var e=this.snapshotState;e.callback&&(c(this.canvas,e),e.callback=null);var t=this.pipelines;for(var i in t)t[i].onPostRender()}},snapshot:function(e,t,i){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,e,t,i)},snapshotArea:function(e,t,i,r,n,s,a){var h=this.snapshotState;return h.callback=n,h.type=s,h.encoder=a,h.getPixel=!1,h.x=e,h.y=t,h.width=Math.min(i,this.gl.drawingBufferWidth),h.height=Math.min(r,this.gl.drawingBufferHeight),this},snapshotPixel:function(e,t,i){return this.snapshotArea(e,t,1,1,i),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(e,t,i,r,n,s,a,h,u,o,l){void 0===n&&(n=!1),void 0===s&&(s=0),void 0===a&&(a=0),void 0===h&&(h=t),void 0===u&&(u=i);var f=this.currentFramebuffer;this.snapshotArea(s,a,h,u,r,o,l);var d=this.snapshotState;return d.getPixel=n,d.isFramebuffer=!0,d.bufferWidth=t,d.bufferHeight=i,this.setFramebuffer(e),c(this.canvas,d),this.setFramebuffer(f),d.callback=null,d.isFramebuffer=!1,this},canvasToTexture:function(e,t,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),t?this.updateCanvasTexture(e,t,r):this.createCanvasTexture(e,i,r)},createCanvasTexture:function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var r=this.gl,n=r.NEAREST,a=r.NEAREST,h=e.width,u=e.height,o=r.CLAMP_TO_EDGE,l=s(h,u);return!t&&l&&(o=r.REPEAT),this.config.antialias&&(n=l?this.mipmapFilter:r.LINEAR,a=r.LINEAR),this.createTexture2D(0,n,a,o,o,r.RGBA,e,h,u,!0,!1,i)},updateCanvasTexture:function(e,t,i){void 0===i&&(i=!1);var r=this.gl,n=e.width,s=e.height;return n>0&&s>0&&(this.setTexture2D(t,0),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,i),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),t.width=n,t.height=s,this.setTexture2D(null,0)),t},createVideoTexture:function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var r=this.gl,n=r.NEAREST,a=r.NEAREST,h=e.videoWidth,u=e.videoHeight,o=r.CLAMP_TO_EDGE,l=s(h,u);return!t&&l&&(o=r.REPEAT),this.config.antialias&&(n=l?this.mipmapFilter:r.LINEAR,a=r.LINEAR),this.createTexture2D(0,n,a,o,o,r.RGBA,e,h,u,!0,!0,i)},updateVideoTexture:function(e,t,i){void 0===i&&(i=!1);var r=this.gl,n=e.videoWidth,s=e.videoHeight;return n>0&&s>0&&(this.setTexture2D(t,0),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,i),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),t.width=n,t.height=s,this.setTexture2D(null,0)),t},setTextureFilter:function(e,t){var i=this.gl,r=[i.LINEAR,i.NEAREST][t];return this.setTexture2D(e,0),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,r),this.setTexture2D(null,0),this},setFloat1:function(e,t,i){return this.setProgram(e),this.gl.uniform1f(this.gl.getUniformLocation(e,t),i),this},setFloat2:function(e,t,i,r){return this.setProgram(e),this.gl.uniform2f(this.gl.getUniformLocation(e,t),i,r),this},setFloat3:function(e,t,i,r,n){return this.setProgram(e),this.gl.uniform3f(this.gl.getUniformLocation(e,t),i,r,n),this},setFloat4:function(e,t,i,r,n,s){return this.setProgram(e),this.gl.uniform4f(this.gl.getUniformLocation(e,t),i,r,n,s),this},setFloat1v:function(e,t,i){return this.setProgram(e),this.gl.uniform1fv(this.gl.getUniformLocation(e,t),i),this},setFloat2v:function(e,t,i){return this.setProgram(e),this.gl.uniform2fv(this.gl.getUniformLocation(e,t),i),this},setFloat3v:function(e,t,i){return this.setProgram(e),this.gl.uniform3fv(this.gl.getUniformLocation(e,t),i),this},setFloat4v:function(e,t,i){return this.setProgram(e),this.gl.uniform4fv(this.gl.getUniformLocation(e,t),i),this},setInt1:function(e,t,i){return this.setProgram(e),this.gl.uniform1i(this.gl.getUniformLocation(e,t),i),this},setInt2:function(e,t,i,r){return this.setProgram(e),this.gl.uniform2i(this.gl.getUniformLocation(e,t),i,r),this},setInt3:function(e,t,i,r,n){return this.setProgram(e),this.gl.uniform3i(this.gl.getUniformLocation(e,t),i,r,n),this},setInt4:function(e,t,i,r,n,s){return this.setProgram(e),this.gl.uniform4i(this.gl.getUniformLocation(e,t),i,r,n,s),this},setMatrix2:function(e,t,i,r){return this.setProgram(e),this.gl.uniformMatrix2fv(this.gl.getUniformLocation(e,t),i,r),this},setMatrix3:function(e,t,i,r){return this.setProgram(e),this.gl.uniformMatrix3fv(this.gl.getUniformLocation(e,t),i,r),this},setMatrix4:function(e,t,i,r){return this.setProgram(e),this.gl.uniformMatrix4fv(this.gl.getUniformLocation(e,t),i,r),this},getMaxTextures:function(){return this.config.maxTextures},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){for(var e=0;e<this.nativeTextures.length;e++)this.gl.deleteTexture(this.nativeTextures[e]);for(var t in this.nativeTextures=[],this.pipelines)this.pipelines[t].destroy(),delete this.pipelines[t];this.defaultCamera.destroy(),this.currentMask=null,this.currentCameraMask=null,this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.game=null,this.gl=null,this.canvas=null,this.maskStack=[],this.contextLost=!0,this.extensions={}}});module.exports=T;
},{"../../cameras/2d/BaseCamera":"ZcMy","../../cameras/2d/events":"rVjJ","../../utils/Class":"Q4x4","../../const":"ktri","../../core/events":"ZroQ","../../math/pow2/IsSizePowerOfTwo":"HYc7","../../utils/NOOP":"vnTW","../../scale/events":"r6hq","../../utils/array/SpliceOne":"kAni","../../textures/events":"KB6D","../../gameobjects/components/TransformMatrix":"hzKR","./Utils":"mjFh","../snapshot/WebGLSnapshot":"zdkt","./pipelines/BitmapMaskPipeline":"BD6f","./pipelines/ForwardDiffuseLightPipeline":"fuar","./pipelines/TextureTintPipeline":"w8xl","./pipelines/TextureTintStripPipeline":"ByRZ"}],"eb4K":[function(require,module,exports) {
var e=require("../display/canvas/CanvasInterpolation"),r=require("../display/canvas/CanvasPool"),n=require("../const"),a=require("../device/Features"),s=function(s){var t=s.config;if((t.customEnvironment||t.canvas)&&t.renderType===n.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!t.customEnvironment&&!t.canvas&&t.renderType!==n.HEADLESS)if(t.renderType===n.CANVAS||t.renderType!==n.CANVAS&&!a.webGL){if(!a.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");t.renderType=n.CANVAS}else t.renderType=n.WEBGL;t.antialias||r.disableSmoothing();var i,c,o=s.scale.baseSize,v=o.width,d=o.height;(t.canvas?(s.canvas=t.canvas,s.canvas.width=v,s.canvas.height=d):s.canvas=r.create(s,v,d,t.renderType),t.canvasStyle&&(s.canvas.style=t.canvasStyle),t.antialias||e.setCrisp(s.canvas),t.renderType!==n.HEADLESS)&&(i=require("../renderer/canvas/CanvasRenderer"),c=require("../renderer/webgl/WebGLRenderer"),t.renderType===n.WEBGL?s.renderer=new c(s):(s.renderer=new i(s),s.context=s.renderer.gameContext))};module.exports=s;
},{"../display/canvas/CanvasInterpolation":"w8zY","../display/canvas/CanvasPool":"Brmu","../const":"ktri","../device/Features":"ZJKL","../renderer/canvas/CanvasRenderer":"Uqk3","../renderer/webgl/WebGLRenderer":"FVKV"}],"hD4h":[function(require,module,exports) {
var o=require("../const"),e=function(e){var a=e.config;if(!a.hideBanner){var r="WebGL";a.renderType===o.CANVAS?r="Canvas":a.renderType===o.HEADLESS&&(r="Headless");var n,c=a.audio,i=e.device.audio;if(n=!i.webAudio||c&&c.disableWebAudio?c&&c.noAudio||!i.webAudio&&!i.audioData?"No Audio":"HTML5 Audio":"Web Audio",e.device.browser.ie)window.console&&console.log("Phaser v"+o.VERSION+" / https://phaser.io");else{var d,s="",u=[s];if(Array.isArray(a.bannerBackgroundColor))a.bannerBackgroundColor.forEach(function(o){s=s.concat("%c "),u.push("background: "+o),d=o}),u[u.length-1]="color: "+a.bannerTextColor+"; background: "+d;else s=s.concat("%c "),u.push("color: "+a.bannerTextColor+"; background: "+a.bannerBackgroundColor);u.push("background: #fff"),a.gameTitle&&(s=s.concat(a.gameTitle),a.gameVersion&&(s=s.concat(" v"+a.gameVersion)),a.hidePhaser||(s=s.concat(" / ")));a.hidePhaser||(s=s.concat("Phaser v"+o.VERSION+"-FB ("+r+" | "+n+")")),s=s.concat(" %c "+a.gameURL),u[0]=s,console.log.apply(console,u)}}};module.exports=e;
},{"../const":"ktri"}],"ufBt":[function(require,module,exports) {
var t=require("../utils/Class"),i=require("../utils/NOOP"),e=new t({initialize:function(){this.isRunning=!1,this.callback=i,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var t=this;this.step=function i(){var e=window.performance.now();t.lastTime=t.tick,t.tick=e,t.callback(e),t.timeOutID=window.requestAnimationFrame(i)},this.stepTimeout=function i(){var e=Date.now(),s=Math.min(Math.max(2*t.target+t.tick-e,0),t.target);t.lastTime=t.tick,t.tick=e,t.callback(e),t.timeOutID=window.setTimeout(i,s)}},start:function(t,i,e){this.isRunning||(this.callback=t,this.isSetTimeOut=i,this.target=e,this.isRunning=!0,this.timeOutID=i?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=i}});module.exports=e;
},{"../utils/Class":"Q4x4","../utils/NOOP":"vnTW"}],"ncFP":[function(require,module,exports) {
var t=require("../utils/Class"),i=require("../utils/object/GetValue"),s=require("../utils/NOOP"),e=require("../dom/RequestAnimationFrame"),h=new t({initialize:function(t,h){this.game=t,this.raf=new e,this.started=!1,this.running=!1,this.minFps=i(h,"min",5),this.targetFps=i(h,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=s,this.forceSetTimeOut=i(h,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=i(h,"deltaHistory",10),this.panicMax=i(h,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=i(h,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var t=window.performance.now();this.time=t,this.lastTime=t,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0;for(var i=0;i<this.deltaSmoothingMax;i++)this.deltaHistory[i]=Math.min(this._target,this.deltaHistory[i]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(t){if(this.started)return this;this.started=!0,this.running=!0;for(var i=0;i<this.deltaSmoothingMax;i++)this.deltaHistory[i]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=t,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var t=window.performance.now();this.now=t;var i=t-this.lastTime;i<0&&(i=0),this.rawDelta=i;var s=this.deltaIndex,e=this.deltaHistory,h=this.deltaSmoothingMax,a=i,n=i;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,a=Math.min(a,this._target)),a>this._min&&(a=e[s],a=Math.min(a,this._min)),e[s]=a,this.deltaIndex++,this.deltaIndex>h&&(this.deltaIndex=0),n=0;for(var r=0;r<h;r++)n+=e[r];n/=h}this.delta=n,this.time+=this.rawDelta,t>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0),this.framesThisSecond++;var o=n/this._target;this.callback(t,n,o),this.lastTime=t,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(t){this.running?this.sleep():t&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step()},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=s,this.raf=null,this.game=null}});module.exports=h;
},{"../utils/Class":"Q4x4","../utils/object/GetValue":"FWyS","../utils/NOOP":"vnTW","../dom/RequestAnimationFrame":"ufBt"}],"kmxn":[function(require,module,exports) {
var n=require("./events"),e=function(e){var i,o=e.events;if(void 0!==document.hidden)i="visibilitychange";else{["webkit","moz","ms"].forEach(function(n){void 0!==document[n+"Hidden"]&&(document.hidden=function(){return document[n+"Hidden"]},i=n+"visibilitychange")})}i&&document.addEventListener(i,function(e){document.hidden||"pause"===e.type?o.emit(n.HIDDEN):o.emit(n.VISIBLE)},!1),window.onblur=function(){o.emit(n.BLUR)},window.onfocus=function(){o.emit(n.FOCUS)},window.focus&&e.config.autoFocus&&window.focus()};module.exports=e;
},{"./events":"ZroQ"}],"flTz":[function(require,module,exports) {
module.exports={Config:require("./Config"),CreateRenderer:require("./CreateRenderer"),DebugHeader:require("./DebugHeader"),Events:require("./events"),TimeStep:require("./TimeStep"),VisibilityHandler:require("./VisibilityHandler")};
},{"./Config":"A458","./CreateRenderer":"eb4K","./DebugHeader":"hD4h","./events":"ZroQ","./TimeStep":"ncFP","./VisibilityHandler":"kmxn"}],"MuMI":[function(require,module,exports) {
module.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"};
},{}],"kOQJ":[function(require,module,exports) {
var e=require("./palettes/Arne16"),t=require("../display/canvas/CanvasPool"),a=require("../utils/object/GetValue"),l=function(l){var r=a(l,"data",[]),n=a(l,"canvas",null),i=a(l,"palette",e),h=a(l,"pixelWidth",1),o=a(l,"pixelHeight",h),s=a(l,"resizeCanvas",!0),u=a(l,"clearCanvas",!0),v=a(l,"preRender",null),c=a(l,"postRender",null),d=Math.floor(Math.abs(r[0].length*h)),p=Math.floor(Math.abs(r.length*o));n||(n=t.create2D(this,d,p),s=!1,u=!1),s&&(n.width=d,n.height=p);var f=n.getContext("2d");u&&f.clearRect(0,0,d,p),v&&v(n,f);for(var g=0;g<r.length;g++)for(var x=r[g],C=0;C<x.length;C++){var M=x[C];"."!==M&&" "!==M&&(f.fillStyle=i[M],f.fillRect(C*h,g*o,h,o))}return c&&c(n,f),n};module.exports=l;
},{"./palettes/Arne16":"MuMI","../display/canvas/CanvasPool":"Brmu","../utils/object/GetValue":"FWyS"}],"DiJz":[function(require,module,exports) {
module.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"};
},{}],"LsND":[function(require,module,exports) {
module.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"};
},{}],"g4ib":[function(require,module,exports) {
module.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"};
},{}],"Hwqu":[function(require,module,exports) {
module.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"};
},{}],"HtLZ":[function(require,module,exports) {
module.exports={ARNE16:require("./Arne16"),C64:require("./C64"),CGA:require("./CGA"),JMP:require("./JMP"),MSX:require("./MSX")};
},{"./Arne16":"MuMI","./C64":"DiJz","./CGA":"LsND","./JMP":"g4ib","./MSX":"Hwqu"}],"b5BM":[function(require,module,exports) {
module.exports={GenerateTexture:require("./GenerateTexture"),Palettes:require("./palettes")};
},{"./GenerateTexture":"kOQJ","./palettes":"HtLZ"}],"mko9":[function(require,module,exports) {
var r=require("./Rectangle"),e=require("../../math/const"),t=function(t,a){if(void 0===a&&(a=new r),0===t.length)return a;for(var n,h,i,m=Number.MAX_VALUE,u=Number.MAX_VALUE,A=e.MIN_SAFE_INTEGER,E=e.MIN_SAFE_INTEGER,M=0;M<t.length;M++)n=t[M],Array.isArray(n)?(h=n[0],i=n[1]):(h=n.x,i=n.y),m=Math.min(m,h),u=Math.min(u,i),A=Math.max(A,h),E=Math.max(E,i);return a.x=m,a.y=u,a.width=A-m,a.height=E-u,a};module.exports=t;
},{"./Rectangle":"ACYM","../../math/const":"TJqb"}],"CBSH":[function(require,module,exports) {
var t=require("../utils/Class"),e=require("../geom/rectangle/FromPoints"),n=require("../geom/rectangle/Rectangle"),i=require("../math/Vector2"),s=new t({initialize:function(t){this.type=t,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new i,this._tmpVec2B=new i},draw:function(t,e){return void 0===e&&(e=32),t.strokePoints(this.getPoints(e))},getBounds:function(t,i){t||(t=new n),void 0===i&&(i=16);var s=this.getLength();i>s&&(i=s/2);var r=Math.max(1,Math.round(s/i));return e(this.getSpacedPoints(r),t)},getDistancePoints:function(t){var e=this.getLength(),n=Math.max(1,e/t);return this.getSpacedPoints(n)},getEndPoint:function(t){return void 0===t&&(t=new i),this.getPointAt(1,t)},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],i=this.getPoint(0,this._tmpVec2A),s=0;n.push(0);for(var r=1;r<=t;r++)s+=(e=this.getPoint(r/t,this._tmpVec2B)).distance(i),n.push(s),i.copy(e);return this.cacheArcLengths=n,n},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t,e,n){void 0===n&&(n=[]),t||(t=e?this.getLength()/e:this.defaultDivisions);for(var i=0;i<=t;i++)n.push(this.getPoint(i/t));return n},getRandomPoint:function(t){return void 0===t&&(t=new i),this.getPoint(Math.random(),t)},getSpacedPoints:function(t,e,n){void 0===n&&(n=[]),t||(t=e?this.getLength()/e:this.defaultDivisions);for(var i=0;i<=t;i++){var s=this.getUtoTmapping(i/t,null,t);n.push(this.getPoint(s))}return n},getStartPoint:function(t){return void 0===t&&(t=new i),this.getPointAt(0,t)},getTangent:function(t,e){void 0===e&&(e=new i);var n=t-1e-4,s=t+1e-4;return n<0&&(n=0),s>1&&(s=1),this.getPoint(n,this._tmpVec2A),this.getPoint(s,e),e.subtract(this._tmpVec2A).normalize()},getTangentAt:function(t,e){var n=this.getUtoTmapping(t);return this.getTangent(n,e)},getTFromDistance:function(t,e){return t<=0?0:this.getUtoTmapping(0,t,e)},getUtoTmapping:function(t,e,n){var i,s=this.getLengths(n),r=0,h=s.length;i=e?Math.min(e,s[h-1]):t*s[h-1];for(var o,g=0,a=h-1;g<=a;)if((o=s[r=Math.floor(g+(a-g)/2)]-i)<0)g=r+1;else{if(!(o>0)){a=r;break}a=r-1}if(s[r=a]===i)return r/(h-1);var u=s[r];return(r+(i-u)/(s[r+1]-u))/(h-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});module.exports=s;
},{"../utils/Class":"Q4x4","../geom/rectangle/FromPoints":"mko9","../geom/rectangle/Rectangle":"ACYM","../math/Vector2":"xARF"}],"Zd1h":[function(require,module,exports) {
var t=require("../utils/Class"),i=require("../math/interpolation/CubicBezierInterpolation"),e=require("./Curve"),n=require("../math/Vector2"),r=new t({Extends:e,initialize:function(t,i,r,s){e.call(this,"CubicBezierCurve"),Array.isArray(t)&&(s=new n(t[6],t[7]),r=new n(t[4],t[5]),i=new n(t[2],t[3]),t=new n(t[0],t[1])),this.p0=t,this.p1=i,this.p2=r,this.p3=s},getStartPoint:function(t){return void 0===t&&(t=new n),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new n);var r=this.p0,s=this.p1,o=this.p2,h=this.p3;return e.set(i(t,r.x,s.x,o.x,h.x),i(t,r.y,s.y,o.y,h.y))},draw:function(t,i){void 0===i&&(i=32);var e=this.getPoints(i);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});r.fromJSON=function(t){var i=t.points,e=new n(i[0],i[1]),s=new n(i[2],i[3]),o=new n(i[4],i[5]),h=new n(i[6],i[7]);return new r(e,s,o,h)},module.exports=r;
},{"../utils/Class":"Q4x4","../math/interpolation/CubicBezierInterpolation":"HSQg","./Curve":"CBSH","../math/Vector2":"xARF"}],"maNo":[function(require,module,exports) {
var t=require("../utils/Class"),i=require("./Curve"),n=require("../math/DegToRad"),s=require("../utils/object/GetValue"),e=require("../math/RadToDeg"),o=require("../math/Vector2"),r=new t({Extends:i,initialize:function(t,e,r,u,h,a,c,d){if("object"==typeof t){var l=t;t=s(l,"x",0),e=s(l,"y",0),r=s(l,"xRadius",0),u=s(l,"yRadius",r),h=s(l,"startAngle",0),a=s(l,"endAngle",360),c=s(l,"clockwise",!1),d=s(l,"rotation",0)}else void 0===u&&(u=r),void 0===h&&(h=0),void 0===a&&(a=360),void 0===c&&(c=!1),void 0===d&&(d=0);i.call(this,"EllipseCurve"),this.p0=new o(t,e),this._xRadius=r,this._yRadius=u,this._startAngle=n(h),this._endAngle=n(a),this._clockwise=c,this._rotation=n(d)},getStartPoint:function(t){return void 0===t&&(t=new o),this.getPoint(0,t)},getResolution:function(t){return 2*t},getPoint:function(t,i){void 0===i&&(i=new o);for(var n=2*Math.PI,s=this._endAngle-this._startAngle,e=Math.abs(s)<Number.EPSILON;s<0;)s+=n;for(;s>n;)s-=n;s<Number.EPSILON&&(s=e?0:n),this._clockwise&&!e&&(s===n?s=-n:s-=n);var r=this._startAngle+t*s,u=this.p0.x+this._xRadius*Math.cos(r),h=this.p0.y+this._yRadius*Math.sin(r);if(0!==this._rotation){var a=Math.cos(this._rotation),c=Math.sin(this._rotation),d=u-this.p0.x,l=h-this.p0.y;u=d*a-l*c+this.p0.x,h=d*c+l*a+this.p0.y}return i.set(u,h)},setXRadius:function(t){return this.xRadius=t,this},setYRadius:function(t){return this.yRadius=t,this},setWidth:function(t){return this.xRadius=2*t,this},setHeight:function(t){return this.yRadius=2*t,this},setStartAngle:function(t){return this.startAngle=t,this},setEndAngle:function(t){return this.endAngle=t,this},setClockwise:function(t){return this.clockwise=t,this},setRotation:function(t){return this.rotation=t,this},x:{get:function(){return this.p0.x},set:function(t){this.p0.x=t}},y:{get:function(){return this.p0.y},set:function(t){this.p0.y=t}},xRadius:{get:function(){return this._xRadius},set:function(t){this._xRadius=t}},yRadius:{get:function(){return this._yRadius},set:function(t){this._yRadius=t}},startAngle:{get:function(){return e(this._startAngle)},set:function(t){this._startAngle=n(t)}},endAngle:{get:function(){return e(this._endAngle)},set:function(t){this._endAngle=n(t)}},clockwise:{get:function(){return this._clockwise},set:function(t){this._clockwise=t}},angle:{get:function(){return e(this._rotation)},set:function(t){this._rotation=n(t)}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:e(this._startAngle),endAngle:e(this._endAngle),clockwise:this._clockwise,rotation:e(this._rotation)}}});r.fromJSON=function(t){return new r(t)},module.exports=r;
},{"../utils/Class":"Q4x4","./Curve":"CBSH","../math/DegToRad":"FzPC","../utils/object/GetValue":"FWyS","../math/RadToDeg":"T4as","../math/Vector2":"xARF"}],"BKGz":[function(require,module,exports) {
var s=require("../utils/Class"),t=require("../plugins/PluginCache"),e=require("../scene/events"),i=new s({initialize:function(s){this.scene=s,this.systems=s.sys,this.displayList,this.updateList,s.sys.events.once(e.BOOT,this.boot,this),s.sys.events.on(e.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.systems.events.once(e.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(e.SHUTDOWN,this.shutdown,this)},existing:function(s){return(s.renderCanvas||s.renderWebGL)&&this.displayList.add(s),s.preUpdate&&this.updateList.add(s),s},shutdown:function(){this.systems.events.off(e.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(e.START,this.start,this),this.scene=null,this.systems=null,this.displayList=null,this.updateList=null}});i.register=function(s,t){i.prototype.hasOwnProperty(s)||(i.prototype[s]=t)},i.remove=function(s){i.prototype.hasOwnProperty(s)&&delete i.prototype[s]},t.register("GameObjectFactory",i,"add"),module.exports=i;
},{"../utils/Class":"Q4x4","../plugins/PluginCache":"vXV4","../scene/events":"Zlz3"}],"yHUq":[function(require,module,exports) {
var t=require("../utils/Class"),e=require("./Curve"),n=require("../geom/rectangle/FromPoints"),i=require("../geom/rectangle/Rectangle"),r=require("../math/Vector2"),s=new r,o=new t({Extends:e,initialize:function(t,n){e.call(this,"LineCurve"),Array.isArray(t)&&(n=new r(t[2],t[3]),t=new r(t[0],t[1])),this.p0=t,this.p1=n,this.arcLengthDivisions=1},getBounds:function(t){return void 0===t&&(t=new i),n([this.p0,this.p1],t)},getStartPoint:function(t){return void 0===t&&(t=new r),t.copy(this.p0)},getResolution:function(t){return void 0===t&&(t=1),t},getPoint:function(t,e){return void 0===e&&(e=new r),1===t?e.copy(this.p1):(e.copy(this.p1).subtract(this.p0).scale(t).add(this.p0),e)},getPointAt:function(t,e){return this.getPoint(t,e)},getTangent:function(){return s.copy(this.p1).subtract(this.p0).normalize()},getUtoTmapping:function(t,e,n){var i;if(e){var r=this.getLengths(n),s=r[r.length-1];i=Math.min(e,s)/s}else i=t;return i},draw:function(t){return t.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});o.fromJSON=function(t){var e=t.points,n=new r(e[0],e[1]),i=new r(e[2],e[3]);return new o(n,i)},module.exports=o;
},{"../utils/Class":"Q4x4","./Curve":"CBSH","../geom/rectangle/FromPoints":"mko9","../geom/rectangle/Rectangle":"ACYM","../math/Vector2":"xARF"}],"xJEA":[function(require,module,exports) {
var t=require("../../utils/Class"),n=require("../../math/Vector2"),e=new t({initialize:function(t,e){this.active=!1,this.p0=new n(t,e)},getPoint:function(t,e){return void 0===e&&(e=new n),e.copy(this.p0)},getPointAt:function(t,n){return this.getPoint(t,n)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});module.exports=e;
},{"../../utils/Class":"Q4x4","../../math/Vector2":"xARF"}],"eHz6":[function(require,module,exports) {
var t=require("../utils/Class"),i=require("./Curve"),e=require("../math/interpolation/QuadraticBezierInterpolation"),n=require("../math/Vector2"),r=new t({Extends:i,initialize:function(t,e,r){i.call(this,"QuadraticBezier"),Array.isArray(t)&&(r=new n(t[4],t[5]),e=new n(t[2],t[3]),t=new n(t[0],t[1])),this.p0=t,this.p1=e,this.p2=r},getStartPoint:function(t){return void 0===t&&(t=new n),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,i){void 0===i&&(i=new n);var r=this.p0,o=this.p1,s=this.p2;return i.set(e(t,r.x,o.x,s.x),e(t,r.y,o.y,s.y))},draw:function(t,i){void 0===i&&(i=32);var e=this.getPoints(i);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});r.fromJSON=function(t){var i=t.points,e=new n(i[0],i[1]),o=new n(i[2],i[3]),s=new n(i[4],i[5]);return new r(e,o,s)},module.exports=r;
},{"../utils/Class":"Q4x4","./Curve":"CBSH","../math/interpolation/QuadraticBezierInterpolation":"VaH3","../math/Vector2":"xARF"}],"OcqP":[function(require,module,exports) {
var t=require("../math/CatmullRom"),n=require("../utils/Class"),i=require("./Curve"),e=require("../math/Vector2"),r=new n({Extends:i,initialize:function(t){void 0===t&&(t=[]),i.call(this,"SplineCurve"),this.points=[],this.addPoints(t)},addPoints:function(t){for(var n=0;n<t.length;n++){var i=new e;"number"==typeof t[n]?(i.x=t[n],i.y=t[n+1],n++):Array.isArray(t[n])?(i.x=t[n][0],i.y=t[n][1]):(i.x=t[n].x,i.y=t[n].y),this.points.push(i)}return this},addPoint:function(t,n){var i=new e(t,n);return this.points.push(i),i},getStartPoint:function(t){return void 0===t&&(t=new e),t.copy(this.points[0])},getResolution:function(t){return t*this.points.length},getPoint:function(n,i){void 0===i&&(i=new e);var r=this.points,o=(r.length-1)*n,s=Math.floor(o),u=o-s,h=r[0===s?s:s-1],p=r[s],a=r[s>r.length-2?r.length-1:s+1],l=r[s>r.length-3?r.length-1:s+2];return i.set(t(u,h.x,p.x,a.x,l.x),t(u,h.y,p.y,a.y,l.y))},toJSON:function(){for(var t=[],n=0;n<this.points.length;n++)t.push(this.points[n].x),t.push(this.points[n].y);return{type:this.type,points:t}}});r.fromJSON=function(t){return new r(t.points)},module.exports=r;
},{"../math/CatmullRom":"RTzq","../utils/Class":"Q4x4","./Curve":"CBSH","../math/Vector2":"xARF"}],"GBNC":[function(require,module,exports) {
var t=require("../../utils/Class"),e=require("../CubicBezierCurve"),i=require("../EllipseCurve"),n=require("../../gameobjects/GameObjectFactory"),r=require("../LineCurve"),s=require("./MoveTo"),h=require("../QuadraticBezierCurve"),u=require("../../geom/rectangle/Rectangle"),o=require("../SplineCurve"),a=require("../../math/Vector2"),c=require("../../math/const"),v=new t({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new a,this._tmpVec2A=new a,this._tmpVec2B=new a,"object"==typeof t?this.fromJSON(t):this.startPoint.set(t,e)},add:function(t){return this.curves.push(t),this},circleTo:function(t,e,i){return void 0===e&&(e=!1),this.ellipseTo(t,t,0,360,e,i)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);return t.equals(e)||this.curves.push(new r(e,t)),this},cubicBezierTo:function(t,i,n,r,s,h){var u,o,c,v=this.getEndPoint();return t instanceof a?(u=t,o=i,c=n):(u=new a(n,r),o=new a(s,h),c=new a(t,i)),this.add(new e(v,u,o,c))},quadraticBezierTo:function(t,e,i,n){var r,s,u=this.getEndPoint();return t instanceof a?(r=t,s=e):(r=new a(i,n),s=new a(t,e)),this.add(new h(u,r,s))},draw:function(t,e){for(var i=0;i<this.curves.length;i++){var n=this.curves[i];n.active&&n.draw(t,e)}return t},ellipseTo:function(t,e,n,r,s,h){var u=new i(0,0,t,e,n,r,s,h),o=this.getEndPoint(this._tmpVec2A),a=u.getStartPoint(this._tmpVec2B);return o.subtract(a),u.x=o.x,u.y=o.y,this.add(u)},fromJSON:function(t){this.curves=[],this.cacheLengths=[],this.startPoint.set(t.x,t.y),this.autoClose=t.autoClose;for(var n=0;n<t.curves.length;n++){var s=t.curves[n];switch(s.type){case"LineCurve":this.add(r.fromJSON(s));break;case"EllipseCurve":this.add(i.fromJSON(s));break;case"SplineCurve":this.add(o.fromJSON(s));break;case"CubicBezierCurve":this.add(e.fromJSON(s));break;case"QuadraticBezierCurve":this.add(h.fromJSON(s))}}return this},getBounds:function(t,e){void 0===t&&(t=new u),void 0===e&&(e=16),t.x=Number.MAX_VALUE,t.y=Number.MAX_VALUE;for(var i=new u,n=c.MIN_SAFE_INTEGER,r=c.MIN_SAFE_INTEGER,s=0;s<this.curves.length;s++){var h=this.curves[s];h.active&&(h.getBounds(i,e),t.x=Math.min(t.x,i.x),t.y=Math.min(t.y,i.y),n=Math.max(n,i.right),r=Math.max(r,i.bottom))}return t.right=n,t.bottom=r,t},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0;i<this.curves.length;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t},getEndPoint:function(t){return void 0===t&&(t=new a),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,t):t.copy(this.startPoint),t},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},getPoint:function(t,e){void 0===e&&(e=new a);for(var i=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=i){var s=n[r]-i,h=this.curves[r],u=h.getLength(),o=0===u?0:1-s/u;return h.getPointAt(o,e)}r++}return null},getPoints:function(t){void 0===t&&(t=12);for(var e,i=[],n=0;n<this.curves.length;n++){var r=this.curves[n];if(r.active)for(var s=r.getResolution(t),h=r.getPoints(s),u=0;u<h.length;u++){var o=h[u];e&&e.equals(o)||(i.push(o),e=o)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},getRandomPoint:function(t){return void 0===t&&(t=new a),this.getPoint(Math.random(),t)},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getStartPoint:function(t){return void 0===t&&(t=new a),t.copy(this.startPoint)},getTangent:function(t,e){void 0===e&&(e=new a);for(var i=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=i){var s=n[r]-i,h=this.curves[r],u=h.getLength(),o=0===u?0:1-s/u;return h.getTangentAt(o,e)}r++}return null},lineTo:function(t,e){t instanceof a?this._tmpVec2B.copy(t):this._tmpVec2B.set(t,e);var i=this.getEndPoint(this._tmpVec2A);return this.add(new r([i.x,i.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(t){return t.unshift(this.getEndPoint()),this.add(new o(t))},moveTo:function(t,e){return t instanceof a?this.add(new s(t.x,t.y)):this.add(new s(t,e))},toJSON:function(){for(var t=[],e=0;e<this.curves.length;e++)t.push(this.curves[e].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:t}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});n.register("path",function(t,e){return new v(t,e)}),module.exports=v;
},{"../../utils/Class":"Q4x4","../CubicBezierCurve":"Zd1h","../EllipseCurve":"maNo","../../gameobjects/GameObjectFactory":"BKGz","../LineCurve":"yHUq","./MoveTo":"xJEA","../QuadraticBezierCurve":"eHz6","../../geom/rectangle/Rectangle":"ACYM","../SplineCurve":"OcqP","../../math/Vector2":"xARF","../../math/const":"TJqb"}],"Qwkw":[function(require,module,exports) {
module.exports={Path:require("./path/Path"),CubicBezier:require("./CubicBezierCurve"),Curve:require("./Curve"),Ellipse:require("./EllipseCurve"),Line:require("./LineCurve"),QuadraticBezier:require("./QuadraticBezierCurve"),Spline:require("./SplineCurve")};
},{"./path/Path":"GBNC","./CubicBezierCurve":"Zd1h","./Curve":"CBSH","./EllipseCurve":"maNo","./LineCurve":"yHUq","./QuadraticBezierCurve":"eHz6","./SplineCurve":"OcqP"}],"HZqr":[function(require,module,exports) {
var s=require("../utils/Class"),t=require("./DataManager"),e=require("../plugins/PluginCache"),i=require("../scene/events"),n=new s({Extends:t,initialize:function(s){t.call(this,s,s.sys.events),this.scene=s,this.systems=s.sys,s.sys.events.once(i.BOOT,this.boot,this),s.sys.events.on(i.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(i.DESTROY,this.destroy,this)},start:function(){this.events.once(i.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(i.SHUTDOWN,this.shutdown,this)},destroy:function(){t.prototype.destroy.call(this),this.events.off(i.START,this.start,this),this.scene=null,this.systems=null}});e.register("DataManagerPlugin",n,"data"),module.exports=n;
},{"../utils/Class":"Q4x4","./DataManager":"SKdT","../plugins/PluginCache":"vXV4","../scene/events":"Zlz3"}],"vtWA":[function(require,module,exports) {
module.exports={DataManager:require("./DataManager"),DataManagerPlugin:require("./DataManagerPlugin"),Events:require("./events")};
},{"./DataManager":"SKdT","./DataManagerPlugin":"HZqr","./events":"DlER"}],"cAGp":[function(require,module,exports) {
module.exports={BottomCenter:require("./BottomCenter"),BottomLeft:require("./BottomLeft"),BottomRight:require("./BottomRight"),Center:require("./Center"),LeftCenter:require("./LeftCenter"),QuickSet:require("./QuickSet"),RightCenter:require("./RightCenter"),TopCenter:require("./TopCenter"),TopLeft:require("./TopLeft"),TopRight:require("./TopRight")};
},{"./BottomCenter":"HgQP","./BottomLeft":"RJus","./BottomRight":"hhaK","./Center":"xyeH","./LeftCenter":"twuZ","./QuickSet":"af6z","./RightCenter":"NlZS","./TopCenter":"gQDa","./TopLeft":"rlVy","./TopRight":"SCyS"}],"z5TL":[function(require,module,exports) {
module.exports={BottomCenter:require("./BottomCenter"),BottomLeft:require("./BottomLeft"),BottomRight:require("./BottomRight"),LeftBottom:require("./LeftBottom"),LeftCenter:require("./LeftCenter"),LeftTop:require("./LeftTop"),QuickSet:require("./QuickSet"),RightBottom:require("./RightBottom"),RightCenter:require("./RightCenter"),RightTop:require("./RightTop"),TopCenter:require("./TopCenter"),TopLeft:require("./TopLeft"),TopRight:require("./TopRight")};
},{"./BottomCenter":"LWyp","./BottomLeft":"Nwbu","./BottomRight":"oFUH","./LeftBottom":"HU1U","./LeftCenter":"Mmja","./LeftTop":"S6kS","./QuickSet":"GWdF","./RightBottom":"lPmb","./RightCenter":"j7N9","./RightTop":"IFT7","./TopCenter":"kvAk","./TopLeft":"gnir","./TopRight":"CCBj"}],"FI06":[function(require,module,exports) {
var e=require("./const"),r=require("../../utils/object/Extend"),i={In:require("./in"),To:require("./to")};i=r(!1,i,e),module.exports=i;
},{"./const":"Jy6T","../../utils/object/Extend":"CtVZ","./in":"cAGp","./to":"z5TL"}],"SUyJ":[function(require,module,exports) {
var i=require("../../utils/Class"),o=new i({initialize:function(i,o,n,r){o&&""!==o||(o=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),n&&""!==n||(n=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","void main () {","gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","}"].join("\n")),void 0===r&&(r=null),this.key=i,this.fragmentSrc=o,this.vertexSrc=n,this.uniforms=r}});module.exports=o;
},{"../../utils/Class":"Q4x4"}],"wsDe":[function(require,module,exports) {
var r=function(r){return r.width*r.originX};module.exports=r;
},{}],"BFRC":[function(require,module,exports) {
var r=function(r){return r.height*r.originY};module.exports=r;
},{}],"Nwlo":[function(require,module,exports) {
module.exports={CenterOn:require("./CenterOn"),GetBottom:require("./GetBottom"),GetCenterX:require("./GetCenterX"),GetCenterY:require("./GetCenterY"),GetLeft:require("./GetLeft"),GetOffsetX:require("./GetOffsetX"),GetOffsetY:require("./GetOffsetY"),GetRight:require("./GetRight"),GetTop:require("./GetTop"),SetBottom:require("./SetBottom"),SetCenterX:require("./SetCenterX"),SetCenterY:require("./SetCenterY"),SetLeft:require("./SetLeft"),SetRight:require("./SetRight"),SetTop:require("./SetTop")};
},{"./CenterOn":"FtR9","./GetBottom":"FGdi","./GetCenterX":"IuOT","./GetCenterY":"VcLV","./GetLeft":"NW0e","./GetOffsetX":"wsDe","./GetOffsetY":"BFRC","./GetRight":"F7Uw","./GetTop":"jIkc","./SetBottom":"FthI","./SetCenterX":"jY5H","./SetCenterY":"XUZj","./SetLeft":"Ys1q","./SetRight":"QPgF","./SetTop":"qlx8"}],"vf3m":[function(require,module,exports) {
var o=function(o,t){return void 0===t&&(t="none"),o.style.msTouchAction=t,o.style["ms-touch-action"]=t,o.style["touch-action"]=t,o};module.exports=o;
},{}],"iOAY":[function(require,module,exports) {
var t=function(t,e){void 0===e&&(e="none");return["-webkit-","-khtml-","-moz-","-ms-",""].forEach(function(o){t.style[o+"user-select"]=e}),t.style["-webkit-touch-callout"]=e,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t};module.exports=t;
},{}],"Pr6D":[function(require,module,exports) {
module.exports={CanvasInterpolation:require("./CanvasInterpolation"),CanvasPool:require("./CanvasPool"),Smoothing:require("./Smoothing"),TouchAction:require("./TouchAction"),UserSelect:require("./UserSelect")};
},{"./CanvasInterpolation":"w8zY","./CanvasPool":"Brmu","./Smoothing":"bmjb","./TouchAction":"vf3m","./UserSelect":"iOAY"}],"PLMd":[function(require,module,exports) {
var r=function(r){var a={r:r>>16&255,g:r>>8&255,b:255&r,a:255};return r>16777215&&(a.a=r>>>24),a};module.exports=r;
},{}],"rmJL":[function(require,module,exports) {
var r=function(r){var t=r.toString(16);return 1===t.length?"0"+t:t};module.exports=r;
},{}],"xGA7":[function(require,module,exports) {
var r=function(r,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+6*(e-r)*n:n<.5?e:n<2/3?r+(e-r)*(2/3-n)*6:r};module.exports=r;
},{}],"Arx5":[function(require,module,exports) {
var e=require("./Color"),r=require("./HueToComponent"),o=function(o,n,u){var t=u,i=u,a=u;if(0!==n){var v=u<.5?u*(1+n):u+n-u*n,f=2*u-v;t=r(f,v,o+1/3),i=r(f,v,o),a=r(f,v,o-1/3)}return(new e).setGLTo(t,i,a,1)};module.exports=o;
},{"./Color":"f7cv","./HueToComponent":"xGA7"}],"M7nN":[function(require,module,exports) {
var r=require("./HSVToRGB"),o=function(o,e){void 0===o&&(o=1),void 0===e&&(e=1);for(var u=[],i=0;i<=359;i++)u.push(r(i/359,o,e));return u};module.exports=o;
},{"./HSVToRGB":"p4NX"}],"UA2H":[function(require,module,exports) {
var r=require("../../math/Linear"),o=function(o,i,t,n,e,u,v,d){void 0===v&&(v=100),void 0===d&&(d=0);var a=d/v;return{r:r(o,n,a),g:r(i,e,a),b:r(t,u,a)}},i=function(r,i,t,n){return void 0===t&&(t=100),void 0===n&&(n=0),o(r.r,r.g,r.b,i.r,i.g,i.b,t,n)},t=function(r,i,t,n,e,u){return void 0===e&&(e=100),void 0===u&&(u=0),o(r.r,r.g,r.b,i,t,n,e,u)};module.exports={RGBWithRGB:o,ColorWithRGB:t,ColorWithColor:i};
},{"../../math/Linear":"dQUL"}],"nPZ0":[function(require,module,exports) {
var e=require("../../math/Between"),r=require("./Color"),o=function(o,i){return void 0===o&&(o=0),void 0===i&&(i=255),new r(e(o,i),e(o,i),e(o,i))};module.exports=o;
},{"../../math/Between":"rT52","./Color":"f7cv"}],"S9bN":[function(require,module,exports) {
var o=require("./ComponentToHex"),e=function(e,r,i,n,t){return void 0===n&&(n=255),void 0===t&&(t="#"),"#"===t?"#"+((1<<24)+(e<<16)+(r<<8)+i).toString(16).slice(1):"0x"+o(n)+o(e)+o(r)+o(i)};module.exports=e;
},{"./ComponentToHex":"rmJL"}],"oO41":[function(require,module,exports) {
var o=require("./Color");o.ColorToRGBA=require("./ColorToRGBA"),o.ComponentToHex=require("./ComponentToHex"),o.GetColor=require("./GetColor"),o.GetColor32=require("./GetColor32"),o.HexStringToColor=require("./HexStringToColor"),o.HSLToColor=require("./HSLToColor"),o.HSVColorWheel=require("./HSVColorWheel"),o.HSVToRGB=require("./HSVToRGB"),o.HueToComponent=require("./HueToComponent"),o.IntegerToColor=require("./IntegerToColor"),o.IntegerToRGB=require("./IntegerToRGB"),o.Interpolate=require("./Interpolate"),o.ObjectToColor=require("./ObjectToColor"),o.RandomRGB=require("./RandomRGB"),o.RGBStringToColor=require("./RGBStringToColor"),o.RGBToHSV=require("./RGBToHSV"),o.RGBToString=require("./RGBToString"),o.ValueToColor=require("./ValueToColor"),module.exports=o;
},{"./Color":"f7cv","./ColorToRGBA":"PLMd","./ComponentToHex":"rmJL","./GetColor":"TE0Y","./GetColor32":"Cc4v","./HexStringToColor":"L8Gv","./HSLToColor":"Arx5","./HSVColorWheel":"M7nN","./HSVToRGB":"p4NX","./HueToComponent":"xGA7","./IntegerToColor":"PJMi","./IntegerToRGB":"f5Fl","./Interpolate":"UA2H","./ObjectToColor":"djQZ","./RandomRGB":"nPZ0","./RGBStringToColor":"gtHM","./RGBToHSV":"hE7a","./RGBToString":"S9bN","./ValueToColor":"Q1dy"}],"v89H":[function(require,module,exports) {
module.exports={BitmapMask:require("./BitmapMask"),GeometryMask:require("./GeometryMask")};
},{"./BitmapMask":"ZuI5","./GeometryMask":"dhb5"}],"EJqx":[function(require,module,exports) {
module.exports={Align:require("./align"),BaseShader:require("./shader/BaseShader"),Bounds:require("./bounds"),Canvas:require("./canvas"),Color:require("./color"),Masks:require("./mask")};
},{"./align":"FI06","./shader/BaseShader":"SUyJ","./bounds":"Nwlo","./canvas":"Pr6D","./color":"oO41","./mask":"v89H"}],"SMiB":[function(require,module,exports) {
var e=function(e,t){var n;if(t)"string"==typeof t?n=document.getElementById(t):"object"==typeof t&&1===t.nodeType&&(n=t);else if(e.parentElement)return e;return n||(n=document.body),n.appendChild(e),e};module.exports=e;
},{}],"h3cQ":[function(require,module,exports) {
var e=require("../device/OS"),t=function(t){if("complete"!==document.readyState&&"interactive"!==document.readyState){var d=function(){document.removeEventListener("deviceready",d,!0),document.removeEventListener("DOMContentLoaded",d,!0),window.removeEventListener("load",d,!0),t()};document.body?e.cordova?document.addEventListener("deviceready",d,!1):(document.addEventListener("DOMContentLoaded",d,!0),window.addEventListener("load",d,!0)):window.setTimeout(d,20)}else t()};module.exports=t;
},{"../device/OS":"Q09W"}],"Ylke":[function(require,module,exports) {
module.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3};
},{}],"BGdD":[function(require,module,exports) {
module.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"};
},{}],"z4L3":[function(require,module,exports) {
module.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5};
},{}],"WDRA":[function(require,module,exports) {
module.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1};
},{}],"Spu2":[function(require,module,exports) {
var O={CENTER:require("./CENTER_CONST"),ORIENTATION:require("./ORIENTATION_CONST"),SCALE_MODE:require("./SCALE_MODE_CONST"),ZOOM:require("./ZOOM_CONST")};module.exports=O;
},{"./CENTER_CONST":"Ylke","./ORIENTATION_CONST":"BGdD","./SCALE_MODE_CONST":"z4L3","./ZOOM_CONST":"WDRA"}],"owoX":[function(require,module,exports) {
var t=require("../scale/const"),i=function(i,n){var e=window.screen,r=!!e&&(e.orientation||e.mozOrientation||e.msOrientation);if(r&&"string"==typeof r.type)return r.type;if("string"==typeof r)return r;if(e)return e.height>e.width?t.ORIENTATION.PORTRAIT:t.ORIENTATION.LANDSCAPE;if("number"==typeof window.orientation)return 0===window.orientation||180===window.orientation?t.ORIENTATION.PORTRAIT:t.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return t.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return t.ORIENTATION.LANDSCAPE}return n>i?t.ORIENTATION.PORTRAIT:t.ORIENTATION.LANDSCAPE};module.exports=i;
},{"../scale/const":"Spu2"}],"uxfS":[function(require,module,exports) {
var e=function(e){var t;return""!==e&&("string"==typeof e?t=document.getElementById(e):e&&1===e.nodeType&&(t=e)),t||(t=document.body),t};module.exports=e;
},{}],"CpwE":[function(require,module,exports) {
var e=function(e){var r="";try{if(window.DOMParser)r=(new DOMParser).parseFromString(e,"text/xml");else(r=new ActiveXObject("Microsoft.XMLDOM")).loadXML(e)}catch(t){r=null}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length?r:null};module.exports=e;
},{}],"QPTS":[function(require,module,exports) {
var e=function(e){e.parentNode&&e.parentNode.removeChild(e)};module.exports=e;
},{}],"rW5S":[function(require,module,exports) {
var e={AddToDOM:require("./AddToDOM"),DOMContentLoaded:require("./DOMContentLoaded"),GetScreenOrientation:require("./GetScreenOrientation"),GetTarget:require("./GetTarget"),ParseXML:require("./ParseXML"),RemoveFromDOM:require("./RemoveFromDOM"),RequestAnimationFrame:require("./RequestAnimationFrame")};module.exports=e;
},{"./AddToDOM":"SMiB","./DOMContentLoaded":"h3cQ","./GetScreenOrientation":"owoX","./GetTarget":"uxfS","./ParseXML":"CpwE","./RemoveFromDOM":"QPTS","./RequestAnimationFrame":"ufBt"}],"YmMH":[function(require,module,exports) {
var e=require("../utils/Class"),t=require("eventemitter3"),i=require("../plugins/PluginCache"),n=new e({Extends:t,initialize:function(){t.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});i.register("EventEmitter",n,"events"),module.exports=n;
},{"../utils/Class":"Q4x4","eventemitter3":"Clm3","../plugins/PluginCache":"vXV4"}],"goTv":[function(require,module,exports) {
module.exports={EventEmitter:require("./EventEmitter")};
},{"./EventEmitter":"YmMH"}],"Beyf":[function(require,module,exports) {
var e=require("../dom/AddToDOM"),o=function(o){var t=o.config;if(t.parent&&t.domCreateContainer){var n=document.createElement("div");n.style.cssText=["display: block;","width: "+o.scale.width+"px;","height: "+o.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: none;","transform: scale(1);","transform-origin: left top;"].join(" "),o.domContainer=n,e(n,t.parent)}};module.exports=o;
},{"../dom/AddToDOM":"SMiB"}],"YXWV":[function(require,module,exports) {
var O={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};module.exports=O;
},{}],"c2L9":[function(require,module,exports) {
module.exports="dragend";
},{}],"rC79":[function(require,module,exports) {
module.exports="dragenter";
},{}],"ttxB":[function(require,module,exports) {
module.exports="drag";
},{}],"Obrh":[function(require,module,exports) {
module.exports="dragleave";
},{}],"v1Sf":[function(require,module,exports) {
module.exports="dragover";
},{}],"hzGM":[function(require,module,exports) {
module.exports="dragstart";
},{}],"aGGz":[function(require,module,exports) {
module.exports="drop";
},{}],"io8W":[function(require,module,exports) {
module.exports="gameout";
},{}],"KdUh":[function(require,module,exports) {
module.exports="gameover";
},{}],"DszS":[function(require,module,exports) {
module.exports="gameobjectdown";
},{}],"eQGu":[function(require,module,exports) {
module.exports="gameobjectmove";
},{}],"Gh0t":[function(require,module,exports) {
module.exports="gameobjectout";
},{}],"sEtB":[function(require,module,exports) {
module.exports="gameobjectover";
},{}],"w0se":[function(require,module,exports) {
module.exports="pointerdown";
},{}],"JQPX":[function(require,module,exports) {
module.exports="pointermove";
},{}],"AOLq":[function(require,module,exports) {
module.exports="pointerout";
},{}],"sTCg":[function(require,module,exports) {
module.exports="pointerover";
},{}],"xAHa":[function(require,module,exports) {
module.exports="pointerup";
},{}],"evU2":[function(require,module,exports) {
module.exports="wheel";
},{}],"hH4H":[function(require,module,exports) {
module.exports="gameobjectup";
},{}],"FulQ":[function(require,module,exports) {
module.exports="gameobjectwheel";
},{}],"Zjuu":[function(require,module,exports) {
module.exports="process";
},{}],"eeGl":[function(require,module,exports) {
module.exports="pointerdownoutside";
},{}],"Hk2r":[function(require,module,exports) {
module.exports="pointerupoutside";
},{}],"zJRR":[function(require,module,exports) {
module.exports="pointerlockchange";
},{}],"akNL":[function(require,module,exports) {
module.exports={BOOT:require("./BOOT_EVENT"),DESTROY:require("./DESTROY_EVENT"),DRAG_END:require("./DRAG_END_EVENT"),DRAG_ENTER:require("./DRAG_ENTER_EVENT"),DRAG:require("./DRAG_EVENT"),DRAG_LEAVE:require("./DRAG_LEAVE_EVENT"),DRAG_OVER:require("./DRAG_OVER_EVENT"),DRAG_START:require("./DRAG_START_EVENT"),DROP:require("./DROP_EVENT"),GAME_OUT:require("./GAME_OUT_EVENT"),GAME_OVER:require("./GAME_OVER_EVENT"),GAMEOBJECT_DOWN:require("./GAMEOBJECT_DOWN_EVENT"),GAMEOBJECT_DRAG_END:require("./GAMEOBJECT_DRAG_END_EVENT"),GAMEOBJECT_DRAG_ENTER:require("./GAMEOBJECT_DRAG_ENTER_EVENT"),GAMEOBJECT_DRAG:require("./GAMEOBJECT_DRAG_EVENT"),GAMEOBJECT_DRAG_LEAVE:require("./GAMEOBJECT_DRAG_LEAVE_EVENT"),GAMEOBJECT_DRAG_OVER:require("./GAMEOBJECT_DRAG_OVER_EVENT"),GAMEOBJECT_DRAG_START:require("./GAMEOBJECT_DRAG_START_EVENT"),GAMEOBJECT_DROP:require("./GAMEOBJECT_DROP_EVENT"),GAMEOBJECT_MOVE:require("./GAMEOBJECT_MOVE_EVENT"),GAMEOBJECT_OUT:require("./GAMEOBJECT_OUT_EVENT"),GAMEOBJECT_OVER:require("./GAMEOBJECT_OVER_EVENT"),GAMEOBJECT_POINTER_DOWN:require("./GAMEOBJECT_POINTER_DOWN_EVENT"),GAMEOBJECT_POINTER_MOVE:require("./GAMEOBJECT_POINTER_MOVE_EVENT"),GAMEOBJECT_POINTER_OUT:require("./GAMEOBJECT_POINTER_OUT_EVENT"),GAMEOBJECT_POINTER_OVER:require("./GAMEOBJECT_POINTER_OVER_EVENT"),GAMEOBJECT_POINTER_UP:require("./GAMEOBJECT_POINTER_UP_EVENT"),GAMEOBJECT_POINTER_WHEEL:require("./GAMEOBJECT_POINTER_WHEEL_EVENT"),GAMEOBJECT_UP:require("./GAMEOBJECT_UP_EVENT"),GAMEOBJECT_WHEEL:require("./GAMEOBJECT_WHEEL_EVENT"),MANAGER_BOOT:require("./MANAGER_BOOT_EVENT"),MANAGER_PROCESS:require("./MANAGER_PROCESS_EVENT"),MANAGER_UPDATE:require("./MANAGER_UPDATE_EVENT"),POINTER_DOWN:require("./POINTER_DOWN_EVENT"),POINTER_DOWN_OUTSIDE:require("./POINTER_DOWN_OUTSIDE_EVENT"),POINTER_MOVE:require("./POINTER_MOVE_EVENT"),POINTER_OUT:require("./POINTER_OUT_EVENT"),POINTER_OVER:require("./POINTER_OVER_EVENT"),POINTER_UP:require("./POINTER_UP_EVENT"),POINTER_UP_OUTSIDE:require("./POINTER_UP_OUTSIDE_EVENT"),POINTER_WHEEL:require("./POINTER_WHEEL_EVENT"),POINTERLOCK_CHANGE:require("./POINTERLOCK_CHANGE_EVENT"),PRE_UPDATE:require("./PRE_UPDATE_EVENT"),SHUTDOWN:require("./SHUTDOWN_EVENT"),START:require("./START_EVENT"),UPDATE:require("./UPDATE_EVENT")};
},{"./BOOT_EVENT":"YlvB","./DESTROY_EVENT":"dnzl","./DRAG_END_EVENT":"c2L9","./DRAG_ENTER_EVENT":"rC79","./DRAG_EVENT":"ttxB","./DRAG_LEAVE_EVENT":"Obrh","./DRAG_OVER_EVENT":"v1Sf","./DRAG_START_EVENT":"hzGM","./DROP_EVENT":"aGGz","./GAME_OUT_EVENT":"io8W","./GAME_OVER_EVENT":"KdUh","./GAMEOBJECT_DOWN_EVENT":"DszS","./GAMEOBJECT_DRAG_END_EVENT":"c2L9","./GAMEOBJECT_DRAG_ENTER_EVENT":"rC79","./GAMEOBJECT_DRAG_EVENT":"ttxB","./GAMEOBJECT_DRAG_LEAVE_EVENT":"Obrh","./GAMEOBJECT_DRAG_OVER_EVENT":"v1Sf","./GAMEOBJECT_DRAG_START_EVENT":"hzGM","./GAMEOBJECT_DROP_EVENT":"aGGz","./GAMEOBJECT_MOVE_EVENT":"eQGu","./GAMEOBJECT_OUT_EVENT":"Gh0t","./GAMEOBJECT_OVER_EVENT":"sEtB","./GAMEOBJECT_POINTER_DOWN_EVENT":"w0se","./GAMEOBJECT_POINTER_MOVE_EVENT":"JQPX","./GAMEOBJECT_POINTER_OUT_EVENT":"AOLq","./GAMEOBJECT_POINTER_OVER_EVENT":"sTCg","./GAMEOBJECT_POINTER_UP_EVENT":"xAHa","./GAMEOBJECT_POINTER_WHEEL_EVENT":"evU2","./GAMEOBJECT_UP_EVENT":"hH4H","./GAMEOBJECT_WHEEL_EVENT":"FulQ","./MANAGER_BOOT_EVENT":"YlvB","./MANAGER_PROCESS_EVENT":"Zjuu","./MANAGER_UPDATE_EVENT":"xWP0","./POINTER_DOWN_EVENT":"w0se","./POINTER_DOWN_OUTSIDE_EVENT":"eeGl","./POINTER_MOVE_EVENT":"JQPX","./POINTER_OUT_EVENT":"AOLq","./POINTER_OVER_EVENT":"sTCg","./POINTER_UP_EVENT":"xAHa","./POINTER_UP_OUTSIDE_EVENT":"Hk2r","./POINTER_WHEEL_EVENT":"evU2","./POINTERLOCK_CHANGE_EVENT":"zJRR","./PRE_UPDATE_EVENT":"ku9x","./SHUTDOWN_EVENT":"h7j8","./START_EVENT":"jUZf","./UPDATE_EVENT":"xWP0"}],"WDn7":[function(require,module,exports) {
var r=require("./SpliceOne"),e=function(e,l,n,a){var i;if(void 0===a&&(a=e),!Array.isArray(l))return-1!==(i=e.indexOf(l))?(r(e,i),n&&n.call(a,l),l):null;for(var o=l.length-1;o>=0;){var u=l[o];-1!==(i=e.indexOf(u))?(r(e,i),n&&n.call(a,u)):l.pop(),o--}return l};module.exports=e;
},{"./SpliceOne":"kAni"}],"JPxJ":[function(require,module,exports) {
var E={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};module.exports=E;
},{}],"MB9P":[function(require,module,exports) {
var e=require("../../utils/array/Remove"),t=require("../../utils/Class"),s=require("../../core/events"),n=require("../events"),r=require("../../input/keyboard/keys/KeyCodes"),i=require("../../utils/Class"),a=new t({initialize:function(e){this.manager=e,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=i,this.onKeyUp=i,e.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputKeyboard,this.target=e.inputKeyboardEventTarget,this.addCapture(e.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(s.POST_STEP,this.postUpdate,this)},startListeners:function(){var e=this;this.onKeyDown=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager){e.queue.push(t),e.manager.useQueue||e.manager.events.emit(n.MANAGER_PROCESS);var s=t.altKey||t.ctrlKey||t.shiftKey||t.metaKey;e.preventDefault&&!s&&e.captures.indexOf(t.keyCode)>-1&&t.preventDefault()}},this.onKeyUp=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager){e.queue.push(t),e.manager.useQueue||e.manager.events.emit(n.MANAGER_PROCESS);var s=t.altKey||t.ctrlKey||t.shiftKey||t.metaKey;e.preventDefault&&!s&&e.captures.indexOf(t.keyCode)>-1&&t.preventDefault()}};var t=this.target;t&&(t.addEventListener("keydown",this.onKeyDown,!1),t.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var e=this.target;e.removeEventListener("keydown",this.onKeyDown,!1),e.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(e){"string"==typeof e&&(e=e.split(",")),Array.isArray(e)||(e=[e]);for(var t=this.captures,s=0;s<e.length;s++){var n=e[s];"string"==typeof n&&(n=r[n.trim().toUpperCase()]),-1===t.indexOf(n)&&t.push(n)}this.preventDefault=t.length>0},removeCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var s=this.captures,n=0;n<t.length;n++){var i=t[n];"string"==typeof i&&(i=r[i.toUpperCase()]),e(s,i)}this.preventDefault=s.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(s.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});module.exports=a;
},{"../../utils/array/Remove":"WDn7","../../utils/Class":"Q4x4","../../core/events":"ZroQ","../events":"akNL","../../input/keyboard/keys/KeyCodes":"JPxJ"}],"eRjz":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../../device/Features"),n=require("../events"),o=require("../../utils/Class"),i=new e({initialize:function(e){this.manager=e,this.capture=!0,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=o,this.onMouseDown=o,this.onMouseUp=o,this.onMouseDownWindow=o,this.onMouseUpWindow=o,this.onMouseOver=o,this.onMouseOut=o,this.onMouseWheel=o,this.pointerLockChange=o,e.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputMouse,this.target=e.inputMouseEventTarget,this.capture=e.inputMouseCapture,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,e.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this},requestPointerLock:function(){if(t.pointerLock){var e=this.target;e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock()}},releasePointerLock:function(){t.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var e=this,n=this.manager.canvas,o=window&&window.focus&&this.manager.game.config.autoFocus;this.onMouseMove=function(t){!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onMouseMove(t),e.capture&&t.preventDefault())},this.onMouseDown=function(t){o&&window.focus(),!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onMouseDown(t),e.capture&&t.target===n&&t.preventDefault())},this.onMouseDownWindow=function(t){!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&t.target!==n&&e.manager.onMouseDown(t)},this.onMouseUp=function(t){!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onMouseUp(t),e.capture&&t.target===n&&t.preventDefault())},this.onMouseUpWindow=function(t){!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&t.target!==n&&e.manager.onMouseUp(t)},this.onMouseOver=function(t){!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.setCanvasOver(t)},this.onMouseOut=function(t){!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.setCanvasOut(t)},this.onMouseWheel=function(t){!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.onMouseWheel(t)};var i=this.target;if(i){var s={passive:!0},a={passive:!1};i.addEventListener("mousemove",this.onMouseMove,this.capture?a:s),i.addEventListener("mousedown",this.onMouseDown,this.capture?a:s),i.addEventListener("mouseup",this.onMouseUp,this.capture?a:s),i.addEventListener("mouseover",this.onMouseOver,this.capture?a:s),i.addEventListener("mouseout",this.onMouseOut,this.capture?a:s),i.addEventListener("wheel",this.onMouseWheel,this.capture?a:s),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("mousedown",this.onMouseDownWindow,a),window.addEventListener("mouseup",this.onMouseUpWindow,a)),t.pointerLock&&(this.pointerLockChange=function(t){var n=e.target;e.locked=document.pointerLockElement===n||document.mozPointerLockElement===n||document.webkitPointerLockElement===n,e.manager.onPointerLockChange(t)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var e=this.target;e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("mouseover",this.onMouseOver),e.removeEventListener("mouseout",this.onMouseOut),window&&(window.removeEventListener("mousedown",this.onMouseDownWindow),window.removeEventListener("mouseup",this.onMouseUpWindow)),t.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});module.exports=i;
},{"../../utils/Class":"Q4x4","../../device/Features":"ZJKL","../events":"akNL"}],"FoB9":[function(require,module,exports) {
var t=require("../math/angle/Between"),i=require("../utils/Class"),n=require("../math/distance/DistanceBetween"),s=require("../math/fuzzy/Equal"),e=require("../math/interpolation/SmoothStepInterpolation"),o=require("../math/Vector2"),h=new i({initialize:function(t,i){this.manager=t,this.id=i,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new o,this.prevPosition=new o,this.midPoint=new o(-1,-1),this.velocity=new o,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===i,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(t){var i=this.x,n=this.y;1!==t.resolution&&(i+=t._x,n+=t._y);var s=t.getWorldPoint(i,n);return this.worldX=s.x,this.worldY=s.y,this},positionToCamera:function(t,i){return t.getWorldPoint(this.x,this.y,i)},updateMotion:function(){var i=this.position.x,n=this.position.y,o=this.midPoint.x,h=this.midPoint.y;if(i!==o||n!==h){var a=e(this.motionFactor,o,i),u=e(this.motionFactor,h,n);s(a,i,.1)&&(a=i),s(u,n,.1)&&(u=n),this.midPoint.set(a,u);var r=i-a,m=n-u;this.velocity.set(r,m),this.angle=t(a,u,i,n),this.distance=Math.sqrt(r*r+m*m)}},up:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=t.timeStamp),this.isDown=!1,this.wasTouch=!1},down:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=t.timeStamp),this.isDown=!0,this.wasTouch=!1},move:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.locked&&(this.movementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.movementY=t.movementY||t.mozMovementY||t.webkitMovementY||0),this.moveTime=t.timeStamp,this.wasTouch=!1},wheel:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.wasTouch=!1},touchstart:function(t,i){t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,this.active=!0,this.buttons=1,this.event=i,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=i.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(t,i){this.event=i,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.moveTime=i.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(t,i){this.buttons=0,this.event=i,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=i.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(t,i){this.buttons=0,this.event=i,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=i.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return 0===this.button&&!this.isDown},rightButtonReleased:function(){return 2===this.button&&!this.isDown},middleButtonReleased:function(){return 1===this.button&&!this.isDown},backButtonReleased:function(){return 3===this.button&&!this.isDown},forwardButtonReleased:function(){return 4===this.button&&!this.isDown},getDistance:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?t(this.downX,this.downY,this.x,this.y):t(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(t,i){void 0===t&&(t=10),void 0===i&&(i=[]);for(var n=this.prevPosition.x,s=this.prevPosition.y,o=this.position.x,h=this.position.y,a=0;a<t;a++){var u=1/t*a;i[a]={x:e(u,n,o),y:e(u,s,h)}}return i},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},time:{get:function(){return this.event?this.event.timeStamp:0}}});module.exports=h;
},{"../math/angle/Between":"TWXP","../utils/Class":"Q4x4","../math/distance/DistanceBetween":"akRU","../math/fuzzy/Equal":"FGft","../math/interpolation/SmoothStepInterpolation":"Q5Mh","../math/Vector2":"xARF"}],"H9m4":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../events"),n=require("../../utils/NOOP"),a=new e({initialize:function(e){this.manager=e,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=n,this.onTouchStartWindow=n,this.onTouchMove=n,this.onTouchEnd=n,this.onTouchEndWindow=n,this.onTouchCancel=n,this.onTouchCancelWindow=n,this.onTouchOver=n,this.onTouchOut=n,e.events.once(t.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputTouch,this.target=e.inputTouchEventTarget,this.capture=e.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),e.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this},startListeners:function(){var e=this,t=this.manager.canvas,n=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(a){n&&window.focus(),!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchStart(a),e.capture&&a.cancelable&&a.target===t&&a.preventDefault())},this.onTouchStartWindow=function(n){!n.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&n.target!==t&&e.manager.onTouchStart(n)},this.onTouchMove=function(t){!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchMove(t),e.capture&&t.cancelable&&t.preventDefault())},this.onTouchEnd=function(n){!n.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchEnd(n),e.capture&&n.cancelable&&n.target===t&&n.preventDefault())},this.onTouchEndWindow=function(n){!n.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&n.target!==t&&e.manager.onTouchEnd(n)},this.onTouchCancel=function(t){!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchCancel(t),e.capture&&t.preventDefault())},this.onTouchCancelWindow=function(t){!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.onTouchCancel(t)},this.onTouchOver=function(t){!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.setCanvasOver(t)},this.onTouchOut=function(t){!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.setCanvasOut(t)};var a=this.target;if(a){var o={passive:!0},i={passive:!1};a.addEventListener("touchstart",this.onTouchStart,this.capture?i:o),a.addEventListener("touchmove",this.onTouchMove,this.capture?i:o),a.addEventListener("touchend",this.onTouchEnd,this.capture?i:o),a.addEventListener("touchcancel",this.onTouchCancel,this.capture?i:o),a.addEventListener("touchover",this.onTouchOver,this.capture?i:o),a.addEventListener("touchout",this.onTouchOut,this.capture?i:o),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,i),window.addEventListener("touchend",this.onTouchEndWindow,i),window.addEventListener("touchcancel",this.onTouchCancelWindow,i)),this.enabled=!0}},stopListeners:function(){var e=this.target;e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchmove",this.onTouchMove),e.removeEventListener("touchend",this.onTouchEnd),e.removeEventListener("touchcancel",this.onTouchCancel),e.removeEventListener("touchover",this.onTouchOver),e.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});module.exports=a;
},{"../../utils/Class":"Q4x4","../events":"akNL","../../utils/NOOP":"vnTW"}],"hfaV":[function(require,module,exports) {
var t=require("../utils/Class"),e=require("./const"),i=require("eventemitter3"),s=require("./events"),n=require("../core/events"),o=require("./keyboard/KeyboardManager"),r=require("./mouse/MouseManager"),a=require("./Pointer"),h=require("./touch/TouchManager"),u=require("../gameobjects/components/TransformMatrix"),c=require("../math/TransformXY"),l=new t({initialize:function(t,e){this.game=t,this.scaleManager,this.canvas,this.config=e,this.enabled=!0,this.events=new i,this.isOver=!0,this.defaultCursor="",this.keyboard=e.inputKeyboard?new o(this):null,this.mouse=e.inputMouse?new r(this):null,this.touch=e.inputTouch?new h(this):null,this.pointers=[],this.pointersTotal=e.inputActivePointers,e.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var s=0;s<=this.pointersTotal;s++){var c=new a(this,s);c.smoothFactor=e.inputSmoothFactor,this.pointers.push(c)}this.mousePointer=e.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new u,this._tempMatrix2=new u,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(n.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(s.MANAGER_BOOT),this.game.events.on(n.PRE_RENDER,this.preRender,this),this.game.events.once(n.DESTROY,this.destroy,this)},setCanvasOver:function(t){this.isOver=!0,this.events.emit(s.GAME_OVER,t)},setCanvasOut:function(t){this.isOver=!1,this.events.emit(s.GAME_OUT,t)},preRender:function(){var t=this.game.loop.now,e=this.game.loop.delta,i=this.game.scene.getScenes(!0,!0);this.time=t,this.events.emit(s.MANAGER_UPDATE);for(var n=0;n<i.length;n++){var o=i[n];if(o.sys.input&&o.sys.input.updatePoll(t,e)&&this.globalTopOnly)return}},setDefaultCursor:function(t){this.defaultCursor=t,this.canvas.style.cursor!==t&&(this.canvas.style.cursor=t)},setCursor:function(t){t.cursor&&(this.canvas.style.cursor=t.cursor)},resetCursor:function(t){t.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(t){void 0===t&&(t=1);var e=[];this.pointersTotal+t>10&&(t=10-this.pointersTotal);for(var i=0;i<t;i++){var s=this.pointers.length,n=new a(this,s);n.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(n),this.pointersTotal++,e.push(n)}return e},updateInputPlugins:function(t,e){var i=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var s=0;s<i.length;s++){var n=i[s];if(n.sys.input)if(n.sys.input.update(t,e)&&this.globalTopOnly||this._tempSkip)return}},onTouchStart:function(t){for(var i=this.pointers,s=[],n=0;n<t.changedTouches.length;n++)for(var o=t.changedTouches[n],r=1;r<this.pointersTotal;r++){var a=i[r];if(!a.active){a.touchstart(o,t),this.activePointer=a,s.push(a);break}}this.updateInputPlugins(e.TOUCH_START,s)},onTouchMove:function(t){for(var i=this.pointers,s=[],n=0;n<t.changedTouches.length;n++)for(var o=t.changedTouches[n],r=1;r<this.pointersTotal;r++){var a=i[r];if(a.active&&a.identifier===o.identifier){a.touchmove(o,t),this.activePointer=a,s.push(a);break}}this.updateInputPlugins(e.TOUCH_MOVE,s)},onTouchEnd:function(t){for(var i=this.pointers,s=[],n=0;n<t.changedTouches.length;n++)for(var o=t.changedTouches[n],r=1;r<this.pointersTotal;r++){var a=i[r];if(a.active&&a.identifier===o.identifier){a.touchend(o,t),s.push(a);break}}this.updateInputPlugins(e.TOUCH_END,s)},onTouchCancel:function(t){for(var i=this.pointers,s=[],n=0;n<t.changedTouches.length;n++)for(var o=t.changedTouches[n],r=1;r<this.pointersTotal;r++){var a=i[r];if(a.active&&a.identifier===o.identifier){a.touchcancel(o,t),s.push(a);break}}this.updateInputPlugins(e.TOUCH_CANCEL,s)},onMouseDown:function(t){this.mousePointer.down(t),this.mousePointer.updateMotion(),this.updateInputPlugins(e.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(t){this.mousePointer.move(t),this.mousePointer.updateMotion(),this.updateInputPlugins(e.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(t){this.mousePointer.up(t),this.mousePointer.updateMotion(),this.updateInputPlugins(e.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(t){this.mousePointer.wheel(t),this.updateInputPlugins(e.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(t){var e=this.mouse.locked;this.mousePointer.locked=e,this.events.emit(s.POINTERLOCK_CHANGE,t,e)},inputCandidate:function(t,e){var i=t.input;if(!i||!i.enabled||!i.alwaysEnabled&&!t.willRender(e))return!1;var s=!0,n=t.parentContainer;if(n)do{if(!n.willRender(e)){s=!1;break}n=n.parentContainer}while(n);return s},hitTest:function(t,e,i,s){void 0===s&&(s=this._tempHitTest);var n=this._tempPoint,o=i.scrollX,r=i.scrollY;s.length=0;var a=t.x,h=t.y;1!==i.resolution&&(a+=i._x,h+=i._y),i.getWorldPoint(a,h,n),t.worldX=n.x,t.worldY=n.y;for(var u={x:0,y:0},l=this._tempMatrix,p=this._tempMatrix2,v=0;v<e.length;v++){var d=e[v];if(this.inputCandidate(d,i)){var m=n.x+o*d.scrollFactorX-o,f=n.y+r*d.scrollFactorY-r;d.parentContainer?(d.getWorldTransformMatrix(l,p),l.applyInverse(m,f,u)):c(m,f,d.x,d.y,d.rotation,d.scaleX,d.scaleY,u),this.pointWithinHitArea(d,u.x,u.y)&&s.push(d)}}return s},pointWithinHitArea:function(t,e,i){e+=t.displayOriginX,i+=t.displayOriginY;var s=t.input;return!(!s||!s.hitAreaCallback(s.hitArea,e,i,t))&&(s.localX=e,s.localY=i,!0)},pointWithinInteractiveObject:function(t,e,i){return!!t.hitArea&&(e+=t.gameObject.displayOriginX,i+=t.gameObject.displayOriginY,t.localX=e,t.localY=i,t.hitAreaCallback(t.hitArea,e,i,t))},transformPointer:function(t,e,i,s){var n=t.position,o=t.prevPosition;o.x=n.x,o.y=n.y;var r=this.scaleManager.transformX(e),a=this.scaleManager.transformY(i),h=t.smoothFactor;s&&0!==h?(n.x=r*h+o.x*(1-h),n.y=a*h+o.y*(1-h)):(n.x=r,n.y=a)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(n.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var t=0;t<this.pointers.length;t++)this.pointers[t].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});module.exports=l;
},{"../utils/Class":"Q4x4","./const":"YXWV","eventemitter3":"Clm3","./events":"akNL","../core/events":"ZroQ","./keyboard/KeyboardManager":"MB9P","./mouse/MouseManager":"eRjz","./Pointer":"FoB9","./touch/TouchManager":"H9m4","../gameobjects/components/TransformMatrix":"hzKR","../math/TransformXY":"GQm4"}],"KCw4":[function(require,module,exports) {
var n={},o={install:function(o){for(var r in n)o[r]=n[r]},register:function(o,r){n[o]=r},destroy:function(){n={}}};module.exports=o;
},{}],"eYSd":[function(require,module,exports) {
var s=require("../utils/Class"),t=require("../plugins/PluginCache"),e=require("../scene/events"),i=new s({initialize:function(s){this.scene=s,this.systems=s.sys,this.displayList,this.updateList,s.sys.events.once(e.BOOT,this.boot,this),s.sys.events.on(e.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.systems.events.once(e.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(e.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(e.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(e.START,this.start,this),this.scene=null,this.systems=null,this.displayList=null,this.updateList=null}});i.register=function(s,t){i.prototype.hasOwnProperty(s)||(i.prototype[s]=t)},i.remove=function(s){i.prototype.hasOwnProperty(s)&&delete i.prototype[s]},t.register("GameObjectCreator",i,"make"),module.exports=i;
},{"../utils/Class":"Q4x4","../plugins/PluginCache":"vXV4","../scene/events":"Zlz3"}],"CwAX":[function(require,module,exports) {
var e=require("../utils/Class"),n=require("../core/events"),t=require("eventemitter3"),i=require("../loader/FileTypesManager"),s=require("../gameobjects/GameObjectCreator"),r=require("../gameobjects/GameObjectFactory"),l=require("../utils/object/GetFastValue"),u=require("./PluginCache"),o=require("../utils/array/Remove"),a=new e({Extends:t,initialize:function(e){t.call(this),this.game=e,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],e.isBooted?this.boot():e.events.once(n.BOOT,this.boot,this)},boot:function(){var e,t,i,s,r,u,o,a=this.game.config,g=a.installGlobalPlugins;for(g=g.concat(this._pendingGlobal),e=0;e<g.length;e++)t=g[e],i=l(t,"key",null),s=l(t,"plugin",null),r=l(t,"start",!1),u=l(t,"mapping",null),o=l(t,"data",null),i&&(s?this.install(i,s,r,u,o):console.warn("Missing `plugin` for key: "+i));for(g=(g=a.installScenePlugins).concat(this._pendingScene),e=0;e<g.length;e++)t=g[e],i=l(t,"key",null),s=l(t,"plugin",null),u=l(t,"mapping",null),i&&(s?this.installScenePlugin(i,s,u):console.warn("Missing `plugin` for key: "+i));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(n.DESTROY,this.destroy,this)},addToScene:function(e,n,t){var i,s,r,l=this.game,o=e.scene,a=e.settings.map,g=e.settings.isBooted;for(i=0;i<n.length;i++)l[s=n[i]]?(e[s]=l[s],a.hasOwnProperty(s)&&(o[a[s]]=e[s])):"game"===s&&a.hasOwnProperty(s)&&(o[a[s]]=l);for(var c=0;c<t.length;c++)for(r=t[c],i=0;i<r.length;i++)if(s=r[i],u.hasCore(s)){var h=u.getCore(s),p=new h.plugin(o,this);e[h.mapping]=p,h.custom?o[h.mapping]=p:a.hasOwnProperty(h.mapping)&&(o[a[h.mapping]]=p),g&&p.boot()}for(r=this.plugins,i=0;i<r.length;i++){var f=r[i];f.mapping&&(o[f.mapping]=f.plugin)}},getDefaultScenePlugins:function(){var e=this.game.config.defaultPlugins;return e=e.concat(this.scenePlugins)},installScenePlugin:function(e,n,t,i,s){if(void 0===s&&(s=!1),"function"==typeof n){if(u.hasCore(e)){if(!s&&u.hasCore(e))return void console.warn("Scene Plugin key in use: "+e)}else u.register(e,n,t,!0),this.scenePlugins.push(e);if(i){var r=new n(i,this);i.sys[e]=r,t&&""!==t&&(i[t]=r),r.boot()}}else console.warn("Invalid Scene Plugin: "+e)},install:function(e,n,t,i,s){if(void 0===t&&(t=!1),void 0===i&&(i=null),void 0===s&&(s=null),"function"!=typeof n)return console.warn("Invalid Plugin: "+e),null;if(u.hasCustom(e))return console.warn("Plugin key in use: "+e),null;if(null!==i&&(t=!0),this.game.isBooted){if(u.registerCustom(e,n,i,s),t)return this.start(e)}else this._pendingGlobal.push({key:e,plugin:n,start:t,mapping:i,data:s});return null},getIndex:function(e){for(var n=this.plugins,t=0;t<n.length;t++){if(n[t].key===e)return t}return-1},getEntry:function(e){var n=this.getIndex(e);if(-1!==n)return this.plugins[n]},isActive:function(e){var n=this.getEntry(e);return n&&n.active},start:function(e,n){void 0===n&&(n=e);var t=this.getEntry(n);return t&&!t.active?(t.active=!0,t.plugin.start()):t||(t=this.createEntry(e,n)),t?t.plugin:null},createEntry:function(e,n){var t=u.getCustom(e);if(t){var i=new t.plugin(this);t={key:n,plugin:i,active:!0,mapping:t.mapping,data:t.data},this.plugins.push(t),i.init(t.data),i.start()}return t},stop:function(e){var n=this.getEntry(e);return n&&n.active&&(n.active=!1,n.plugin.stop()),this},get:function(e,n){void 0===n&&(n=!0);var t=this.getEntry(e);if(t)return t.plugin;var i=this.getClass(e);return i&&n?(t=this.createEntry(e,e))?t.plugin:null:i||null},getClass:function(e){return u.getCustomClass(e)},removeGlobalPlugin:function(e){var n=this.getEntry(e);n&&o(this.plugins,n),u.removeCustom(e)},removeScenePlugin:function(e){o(this.scenePlugins,e),u.remove(e)},registerGameObject:function(e,n,t){return n&&r.register(e,n),t&&s.register(e,t),this},removeGameObject:function(e,n,t){return void 0===n&&(n=!0),void 0===t&&(t=!0),n&&r.remove(e),t&&s.remove(e),this},registerFileType:function(e,n,t){i.register(e,n),t&&t.sys.load&&(t.sys.load[e]=n)},destroy:function(){for(var e=0;e<this.plugins.length;e++)this.plugins[e].plugin.destroy();u.destroyCustomPlugins(),this.game.noReturn&&u.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});module.exports=a;
},{"../utils/Class":"Q4x4","../core/events":"ZroQ","eventemitter3":"Clm3","../loader/FileTypesManager":"KCw4","../gameobjects/GameObjectCreator":"eYSd","../gameobjects/GameObjectFactory":"BKGz","../utils/object/GetFastValue":"xbYy","./PluginCache":"vXV4","../utils/array/Remove":"WDn7"}],"FAfG":[function(require,module,exports) {
var e=function(e){if(!e)return window.innerHeight;var t=Math.abs(window.orientation),n={w:0,h:0},i=document.createElement("div");return i.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(i),n.w=90===t?i.offsetHeight:window.innerWidth,n.h=90===t?window.innerWidth:i.offsetHeight,document.documentElement.removeChild(i),i=null,90!==Math.abs(window.orientation)?n.h:n.w};module.exports=e;
},{}],"nBZT":[function(require,module,exports) {
var t=require("../math/Clamp"),i=require("../utils/Class"),h=require("../math/snap/SnapFloor"),s=require("../math/Vector2"),e=new i({initialize:function(t,i,h,e){void 0===t&&(t=0),void 0===i&&(i=t),void 0===h&&(h=0),void 0===e&&(e=null),this._width=t,this._height=i,this._parent=e,this.aspectMode=h,this.aspectRatio=0===i?1:t/i,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new s},setAspectMode:function(t){return void 0===t&&(t=0),this.aspectMode=t,this.setSize(this._width,this._height)},setSnap:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.snapTo.set(t,i),this.setSize(this._width,this._height)},setParent:function(t){return this._parent=t,this.setSize(this._width,this._height)},setMin:function(i,h){return void 0===i&&(i=0),void 0===h&&(h=i),this.minWidth=t(i,0,this.maxWidth),this.minHeight=t(h,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(i,h){return void 0===i&&(i=Number.MAX_VALUE),void 0===h&&(h=i),this.maxWidth=t(i,this.minWidth,Number.MAX_VALUE),this.maxHeight=t(h,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(t,i){switch(void 0===t&&(t=0),void 0===i&&(i=t),this.aspectMode){case e.NONE:this._width=this.getNewWidth(h(t,this.snapTo.x)),this._height=this.getNewHeight(h(i,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case e.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(h(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case e.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(h(i,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case e.FIT:this.constrain(t,i,!0);break;case e.ENVELOP:this.constrain(t,i,!1)}return this},setAspectRatio:function(t){return this.aspectRatio=t,this.setSize(this._width,this._height)},resize:function(t,i){return this._width=this.getNewWidth(h(t,this.snapTo.x)),this._height=this.getNewHeight(h(i,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function(i,h){return void 0===h&&(h=!0),i=t(i,this.minWidth,this.maxWidth),h&&this._parent&&i>this._parent.width&&(i=Math.max(this.minWidth,this._parent.width)),i},getNewHeight:function(i,h){return void 0===h&&(h=!0),i=t(i,this.minHeight,this.maxHeight),h&&this._parent&&i>this._parent.height&&(i=Math.max(this.minHeight,this._parent.height)),i},constrain:function(t,i,s){void 0===t&&(t=0),void 0===i&&(i=t),void 0===s&&(s=!0),t=this.getNewWidth(t),i=this.getNewHeight(i);var e=this.snapTo,n=0===i?1:t/i;return s&&this.aspectRatio>n||!s&&this.aspectRatio<n?(i=(t=h(t,e.x))/this.aspectRatio,e.y>0&&(t=(i=h(i,e.y))*this.aspectRatio)):(s&&this.aspectRatio<n||!s&&this.aspectRatio>n)&&(t=(i=h(i,e.y))*this.aspectRatio,e.x>0&&(i=(t=h(t,e.x))*(1/this.aspectRatio))),this._width=t,this._height=i,this},fitTo:function(t,i){return this.constrain(t,i,!0)},envelop:function(t,i){return this.constrain(t,i,!1)},setWidth:function(t){return this.setSize(t,this._height)},setHeight:function(t){return this.setSize(this._width,t)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(t){t&&t.style&&(t.style.width=this._width+"px",t.style.height=this._height+"px")},copy:function(t){return t.setAspectMode(this.aspectMode),t.aspectRatio=this.aspectRatio,t.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(t){this.setSize(t,this._height)}},height:{get:function(){return this._height},set:function(t){this.setSize(this._width,t)}}});e.NONE=0,e.WIDTH_CONTROLS_HEIGHT=1,e.HEIGHT_CONTROLS_WIDTH=2,e.FIT=3,e.ENVELOP=4,module.exports=e;
},{"../math/Clamp":"dPkx","../utils/Class":"Q4x4","../math/snap/SnapFloor":"mSaS","../math/Vector2":"xARF"}],"UoJ6":[function(require,module,exports) {
var e=require("./const"),t=require("../utils/Class"),i=require("eventemitter3"),s=require("./events"),n=require("../core/events"),h=require("../dom/GetInnerHeight"),r=require("../dom/GetTarget"),a=require("../dom/GetScreenOrientation"),o=require("../utils/NOOP"),l=require("../geom/rectangle/Rectangle"),c=require("../structs/Size"),u=require("../math/snap/SnapFloor"),d=require("../math/Vector2"),g=new t({Extends:i,initialize:function(t){i.call(this),this.game=t,this.canvas,this.canvasBounds=new l,this.parent=null,this.parentIsWindow=!1,this.parentSize=new c,this.gameSize=new c,this.baseSize=new c,this.displaySize=new c,this.scaleMode=e.SCALE_MODE.NONE,this.resolution=1,this.zoom=1,this._resetZoom=!1,this.displayScale=new d(1,1),this.autoRound=!1,this.autoCenter=e.CENTER.NO_CENTER,this.orientation=e.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:o,windowResize:o,fullScreenChange:o,fullScreenError:o}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once("boot",this.boot,this)},boot:function(){var t=this.game;this.canvas=t.canvas,this.fullscreen=t.device.fullscreen,this.scaleMode!==e.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===e.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),t.events.on(n.PRE_STEP,this.step,this),t.events.once(n.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(t){this.getParent(t),this.getParentBounds();var i=t.width,s=t.height,n=t.scaleMode,h=t.resolution,r=t.zoom,o=t.autoRound;if("string"==typeof i){var l=this.parentSize.width;0===l&&(l=window.innerWidth);var c=parseInt(i,10)/100;i=Math.floor(l*c)}if("string"==typeof s){var u=this.parentSize.height;0===u&&(u=window.innerHeight);var d=parseInt(s,10)/100;s=Math.floor(u*d)}this.resolution=1,this.scaleMode=n,this.autoRound=o,this.autoCenter=t.autoCenter,this.resizeInterval=t.resizeInterval,o&&(i=Math.floor(i),s=Math.floor(s)),this.gameSize.setSize(i,s),r===e.ZOOM.MAX_ZOOM&&(r=this.getMaxZoom()),this.zoom=r,1!==r&&(this._resetZoom=!0),this.baseSize.setSize(i*h,s*h),o&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),t.minWidth>0&&this.displaySize.setMin(t.minWidth*r,t.minHeight*r),t.maxWidth>0&&this.displaySize.setMax(t.maxWidth*r,t.maxHeight*r),this.displaySize.setSize(i,s),this.orientation=a(i,s)},getParent:function(t){var i=t.parent;if(null!==i){if(this.parent=r(i),this.parentIsWindow=this.parent===document.body,t.expandParent&&t.scaleMode!==e.SCALE_MODE.NONE){var s=this.parent.getBoundingClientRect();(this.parentIsWindow||0===s.height)&&(document.documentElement.style.height="100%",document.body.style.height="100%",s=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==s.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}t.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=r(t.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var e=this.parentSize,t=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(t.height=h(!0));var i=this.resolution,s=t.width*i,n=t.height*i;return(e.width!==s||e.height!==n)&&(e.setSize(s,n),!0)},lockOrientation:function(e){var t=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!t&&t.call(screen,e)},setParentSize:function(e,t){return this.parentSize.setSize(e,t),this.refresh()},setGameSize:function(e,t){var i=this.autoRound,s=this.resolution;i&&(e=Math.floor(e),t=Math.floor(t));var n=this.width,h=this.height;return this.gameSize.resize(e,t),this.baseSize.resize(e*s,t*s),i&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(e/t),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(n,h)},resize:function(e,t){var i=this.zoom,s=this.resolution,n=this.autoRound;n&&(e=Math.floor(e),t=Math.floor(t));var h=this.width,r=this.height;this.gameSize.resize(e,t),this.baseSize.resize(e*s,t*s),n&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(e*i*s,t*i*s),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var a=this.canvas.style,o=e*i,l=t*i;return n&&(o=Math.floor(o),l=Math.floor(l)),o===e&&l===t||(a.width=o+"px",a.height=l+"px"),this.refresh(h,r)},setZoom:function(e){return this.zoom=e,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(e,t){void 0===e&&(e=this.width),void 0===t&&(t=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var i=this.game.domContainer;if(i){this.baseSize.setCSS(i);var n=this.canvas.style,h=i.style;h.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",h.marginLeft=n.marginLeft,h.marginTop=n.marginTop}return this.emit(s.RESIZE,this.gameSize,this.baseSize,this.displaySize,this.resolution,e,t),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var e=a(this.width,this.height);e!==this.orientation&&(this.orientation=e,this.emit(s.ORIENTATION_CHANGE,e))}},updateScale:function(){var t,i,s=this.canvas.style,n=this.gameSize.width,h=this.gameSize.height,r=this.zoom,a=this.autoRound;this.scaleMode===e.SCALE_MODE.NONE?(this.displaySize.setSize(n*r*1,h*r*1),t=this.displaySize.width/1,i=this.displaySize.height/1,a&&(t=Math.floor(t),i=Math.floor(i)),this._resetZoom&&(s.width=t+"px",s.height=i+"px",this._resetZoom=!1)):this.scaleMode===e.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(1*this.displaySize.width,1*this.displaySize.height),t=this.displaySize.width/1,i=this.displaySize.height/1,a&&(t=Math.floor(t),i=Math.floor(i)),this.canvas.width=t,this.canvas.height=i):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=this.displaySize.width/1,i=this.displaySize.height/1,a&&(t=Math.floor(t),i=Math.floor(i)),s.width=t+"px",s.height=i+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var e=u(this.parentSize.width,this.gameSize.width,0,!0),t=u(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(e,t),1)},updateCenter:function(){var t=this.autoCenter;if(t!==e.CENTER.NO_CENTER){var i=this.canvas,s=i.style,n=i.getBoundingClientRect(),h=n.width,r=n.height,a=Math.floor((this.parentSize.width-h)/2),o=Math.floor((this.parentSize.height-r)/2);t===e.CENTER.CENTER_HORIZONTALLY?o=0:t===e.CENTER.CENTER_VERTICALLY&&(a=0),s.marginLeft=a+"px",s.marginTop=o+"px"}},updateBounds:function(){var e=this.canvasBounds,t=this.canvas.getBoundingClientRect();e.x=t.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),e.y=t.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),e.width=t.width,e.height=t.height},transformX:function(e){return(e-this.canvasBounds.left)*this.displayScale.x},transformY:function(e){return(e-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(e){void 0===e&&(e={navigationUI:"hide"});var t=this.fullscreen;if(t.available){if(!t.active){var i,n=this.getFullscreenTarget();(i=t.keyboard?n[t.request](Element.ALLOW_KEYBOARD_INPUT):n[t.request](e))?i.then(this.fullscreenSuccessHandler.bind(this)).catch(this.fullscreenErrorHandler.bind(this)):t.active?this.fullscreenSuccessHandler():this.fullscreenErrorHandler()}}else this.emit(s.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(s.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(e){this.removeFullscreenTarget(),this.emit(s.FULLSCREEN_FAILED,e)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var e=document.createElement("div");e.style.margin="0",e.style.padding="0",e.style.width="100%",e.style.height="100%",this.fullscreenTarget=e,this._createdFullscreenTarget=!0}this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas));return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var e=this.fullscreenTarget;if(e&&e.parentNode){var t=e.parentNode;t.insertBefore(this.canvas,e),t.removeChild(e)}}},stopFullscreen:function(){var e=this.fullscreen;if(!e.available)return this.emit(s.FULLSCREEN_UNSUPPORTED),!1;e.active&&document[e.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(s.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(e){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(e)},startListeners:function(){var e=this,t=this.listeners;if(t.orientationChange=function(){e._checkOrientation=!0,e.dirty=!0},t.windowResize=function(){e.dirty=!0},window.addEventListener("orientationchange",t.orientationChange,!1),window.addEventListener("resize",t.windowResize,!1),this.fullscreen.available){t.fullScreenChange=function(t){return e.onFullScreenChange(t)},t.fullScreenError=function(t){return e.onFullScreenError(t)};["webkit","moz",""].forEach(function(e){document.addEventListener(e+"fullscreenchange",t.fullScreenChange,!1),document.addEventListener(e+"fullscreenerror",t.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.addEventListener("MSFullscreenError",t.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(e,t){this.parent&&(this._lastCheck+=t,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var e=this.listeners;window.removeEventListener("orientationchange",e.orientationChange,!1),window.removeEventListener("resize",e.windowResize,!1);["webkit","moz",""].forEach(function(t){document.removeEventListener(t+"fullscreenchange",e.fullScreenChange,!1),document.removeEventListener(t+"fullscreenerror",e.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",e.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",e.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===e.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===e.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});module.exports=g;
},{"./const":"Spu2","../utils/Class":"Q4x4","eventemitter3":"Clm3","./events":"r6hq","../core/events":"ZroQ","../dom/GetInnerHeight":"FAfG","../dom/GetTarget":"uxfS","../dom/GetScreenOrientation":"owoX","../utils/NOOP":"vnTW","../geom/rectangle/Rectangle":"ACYM","../structs/Size":"nBZT","../math/snap/SnapFloor":"mSaS","../math/Vector2":"xARF"}],"o8LK":[function(require,module,exports) {
var N={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};module.exports=N;
},{}],"YJBs":[function(require,module,exports) {
module.exports="addfile";
},{}],"RlUL":[function(require,module,exports) {
module.exports="filecomplete";
},{}],"SjYn":[function(require,module,exports) {
module.exports="filecomplete-";
},{}],"DHxH":[function(require,module,exports) {
module.exports="loaderror";
},{}],"pepc":[function(require,module,exports) {
module.exports="load";
},{}],"twF6":[function(require,module,exports) {
module.exports="fileprogress";
},{}],"hxTy":[function(require,module,exports) {
module.exports="postprocess";
},{}],"aUAY":[function(require,module,exports) {
module.exports="progress";
},{}],"bOrI":[function(require,module,exports) {
module.exports={ADD:require("./ADD_EVENT"),COMPLETE:require("./COMPLETE_EVENT"),FILE_COMPLETE:require("./FILE_COMPLETE_EVENT"),FILE_KEY_COMPLETE:require("./FILE_KEY_COMPLETE_EVENT"),FILE_LOAD_ERROR:require("./FILE_LOAD_ERROR_EVENT"),FILE_LOAD:require("./FILE_LOAD_EVENT"),FILE_PROGRESS:require("./FILE_PROGRESS_EVENT"),POST_PROCESS:require("./POST_PROCESS_EVENT"),PROGRESS:require("./PROGRESS_EVENT"),START:require("./START_EVENT")};
},{"./ADD_EVENT":"YJBs","./COMPLETE_EVENT":"RxkH","./FILE_COMPLETE_EVENT":"RlUL","./FILE_KEY_COMPLETE_EVENT":"SjYn","./FILE_LOAD_ERROR_EVENT":"DHxH","./FILE_LOAD_EVENT":"pepc","./FILE_PROGRESS_EVENT":"twF6","./POST_PROCESS_EVENT":"hxTy","./PROGRESS_EVENT":"aUAY","./START_EVENT":"jUZf"}],"hy3t":[function(require,module,exports) {
var e=function(e){return e&&e[0].toUpperCase()+e.slice(1)};module.exports=e;
},{}],"Piea":[function(require,module,exports) {
var s=require("../utils/object/GetFastValue"),e=require("../utils/string/UppercaseFirst"),i=function(i){var r=i.game.config.defaultPhysicsSystem,t=s(i.settings,"physics",!1);if(r||t){var u=[];if(r&&u.push(e(r+"Physics")),t)for(var a in t)a=e(a.concat("Physics")),-1===u.indexOf(a)&&u.push(a);return u}};module.exports=i;
},{"../utils/object/GetFastValue":"xbYy","../utils/string/UppercaseFirst":"hy3t"}],"zgQT":[function(require,module,exports) {
var e=require("../utils/object/GetFastValue"),r=function(r){var t=r.plugins.getDefaultScenePlugins(),u=e(r.settings,"plugins",!1);return Array.isArray(u)?u:t||[]};module.exports=r;
},{"../utils/object/GetFastValue":"xbYy"}],"y1cc":[function(require,module,exports) {
var r=function(r){var a={};for(var e in r)Array.isArray(r[e])?a[e]=r[e].slice(0):a[e]=r[e];return a};module.exports=r;
},{}],"J7IV":[function(require,module,exports) {
var r=require("./Clone"),e=function(e,n){var o=r(e);for(var a in n)o.hasOwnProperty(a)||(o[a]=n[a]);return o};module.exports=e;
},{"./Clone":"y1cc"}],"HEmd":[function(require,module,exports) {
var e={game:"game",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter",cameras3d:"cameras3d",facebook:"facebook"};module.exports=e;
},{}],"pdM0":[function(require,module,exports) {
var e=require("./const"),i=require("../utils/object/GetValue"),t=require("../utils/object/Merge"),a=require("./InjectionMap"),r={create:function(r){return"string"==typeof r?r={key:r}:void 0===r&&(r={}),{status:e.PENDING,key:i(r,"key",""),active:i(r,"active",!1),visible:i(r,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:i(r,"pack",!1),cameras:i(r,"cameras",null),map:i(r,"map",t(a,i(r,"mapAdd",{}))),physics:i(r,"physics",{}),loader:i(r,"loader",{}),plugins:i(r,"plugins",!1),input:i(r,"input",{})}}};module.exports=r;
},{"./const":"o8LK","../utils/object/GetValue":"FWyS","../utils/object/Merge":"J7IV","./InjectionMap":"HEmd"}],"FQkz":[function(require,module,exports) {
var t=require("../utils/Class"),s=require("./const"),i=require("../plugins/DefaultPlugins"),e=require("./events"),n=require("./GetPhysicsPlugins"),h=require("./GetScenePlugins"),r=require("../utils/NOOP"),u=require("./Settings"),a=new t({initialize:function(t,s){this.scene=t,this.game,this.renderer,this.facebook,this.config=s,this.settings=u.create(s),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=r},init:function(t){this.settings.status=s.INIT,this.sceneUpdate=r,this.game=t,this.renderer=t.renderer,this.canvas=t.canvas,this.context=t.context;var u=t.plugins;this.plugins=u,u.addToScene(this,i.Global,[i.CoreScene,h(this),n(this)]),this.events.emit(e.BOOT,this),this.settings.isBooted=!0},install:function(t){Array.isArray(t)||(t=[t]),this.plugins.installLocal(this,t)},step:function(t,s){this.events.emit(e.PRE_UPDATE,t,s),this.events.emit(e.UPDATE,t,s),this.sceneUpdate.call(this.scene,t,s),this.events.emit(e.POST_UPDATE,t,s)},render:function(t){var s=this.displayList;s.depthSort(),this.cameras.render(t,s),this.events.emit(e.RENDER,t)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(t){return this.settings.active&&(this.settings.status=s.PAUSED,this.settings.active=!1,this.events.emit(e.PAUSE,this,t)),this},resume:function(t){return this.settings.active||(this.settings.status=s.RUNNING,this.settings.active=!0,this.events.emit(e.RESUME,this,t)),this},sleep:function(t){return this.settings.status=s.SLEEPING,this.settings.active=!1,this.settings.visible=!1,this.events.emit(e.SLEEP,this,t),this},wake:function(t){var i=this.settings;return i.status=s.RUNNING,i.active=!0,i.visible=!0,this.events.emit(e.WAKE,this,t),i.isTransition&&this.events.emit(e.TRANSITION_WAKE,i.transitionFrom,i.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===s.SLEEPING},isActive:function(){return this.settings.status===s.RUNNING},isPaused:function(){return this.settings.status===s.PAUSED},isTransitioning:function(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function(){return null!==this.scenePlugin._target&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(t){return this.settings.visible=t,this},setActive:function(t,s){return t?this.resume(s):this.pause(s)},start:function(t){t&&(this.settings.data=t),this.settings.status=s.START,this.settings.active=!0,this.settings.visible=!0,this.events.emit(e.START,this),this.events.emit(e.READY,this,t)},shutdown:function(t){this.events.off(e.TRANSITION_INIT),this.events.off(e.TRANSITION_START),this.events.off(e.TRANSITION_COMPLETE),this.events.off(e.TRANSITION_OUT),this.settings.status=s.SHUTDOWN,this.settings.active=!1,this.settings.visible=!1,this.events.emit(e.SHUTDOWN,this,t)},destroy:function(){this.settings.status=s.DESTROYED,this.settings.active=!1,this.settings.visible=!1,this.events.emit(e.DESTROY,this),this.events.removeAllListeners();for(var t=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],i=0;i<t.length;i++)this[t[i]]=null}});module.exports=a;
},{"../utils/Class":"Q4x4","./const":"o8LK","../plugins/DefaultPlugins":"L6E0","./events":"Zlz3","./GetPhysicsPlugins":"Piea","./GetScenePlugins":"zgQT","../utils/NOOP":"vnTW","./Settings":"pdM0"}],"dryH":[function(require,module,exports) {
var s=require("../utils/Class"),t=require("./Systems"),i=new s({initialize:function(s){this.sys=new t(this,s),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.facebook,this.scale,this.plugins},update:function(){}});module.exports=i;
},{"../utils/Class":"Q4x4","./Systems":"FQkz"}],"nhQn":[function(require,module,exports) {
var e=require("../utils/Class"),s=require("./const"),t=require("./events"),i=require("../core/events"),n=require("../utils/object/GetValue"),r=require("../loader/events"),a=require("../utils/NOOP"),h=require("./Scene"),o=require("./Systems"),u=new e({initialize:function(e,s){if(this.game=e,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,s){Array.isArray(s)||(s=[s]);for(var t=0;t<s.length;t++)this._pending.push({key:"default",scene:s[t],autoStart:0===t,data:{}})}e.events.once(i.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var e,s,t,i;for(e=0;e<this._pending.length;e++){var n;t=(s=this._pending[e]).key,(i=s.scene)instanceof h?n=this.createSceneFromInstance(t,i):"object"==typeof i?n=this.createSceneFromObject(t,i):"function"==typeof i&&(n=this.createSceneFromFunction(t,i)),t=n.sys.settings.key,this.keys[t]=n,this.scenes.push(n),this._data[t]&&(n.sys.settings.data=this._data[t].data,this._data[t].autoStart&&(s.autoStart=!0)),(s.autoStart||n.sys.settings.active)&&this._start.push(t)}for(this._pending.length=0,this._data={},this.isBooted=!0,e=0;e<this._start.length;e++)s=this._start[e],this.start(s);this._start.length=0}},processQueue:function(){var e=this._pending.length,s=this._queue.length;if(0!==e||0!==s){var t,i;if(e){for(t=0;t<e;t++)i=this._pending[t],this.add(i.key,i.scene,i.autoStart,i.data);for(t=0;t<this._start.length;t++)i=this._start[t],this.start(i);return this._start.length=0,void(this._pending.length=0)}for(t=0;t<this._queue.length;t++)this[(i=this._queue[t]).op](i.keyA,i.keyB);this._queue.length=0}},add:function(e,s,t,i){return void 0===t&&(t=!1),void 0===i&&(i={}),this.isProcessing||!this.isBooted?(this._pending.push({key:e,scene:s,autoStart:t,data:i}),this.isBooted||(this._data[e]={data:i}),null):(e=this.getKey(e,s),s instanceof h?n=this.createSceneFromInstance(e,s):"object"==typeof s?(s.key=e,n=this.createSceneFromObject(e,s)):"function"==typeof s&&(n=this.createSceneFromFunction(e,s)),n.sys.settings.data=i,e=n.sys.settings.key,this.keys[e]=n,this.scenes.push(n),(t||n.sys.settings.active)&&(this._pending.length?this._start.push(e):this.start(e)),n);var n},remove:function(e){if(this.isProcessing)this._queue.push({op:"remove",keyA:e,keyB:null});else{var s=this.getScene(e);if(!s||s.sys.isTransitioning())return this;var t=this.scenes.indexOf(s),i=s.sys.settings.key;t>-1&&(delete this.keys[i],this.scenes.splice(t,1),this._start.indexOf(i)>-1&&(t=this._start.indexOf(i),this._start.splice(t,1)),s.sys.destroy())}return this},bootScene:function(e){var i,n=e.sys,h=n.settings;n.sceneUpdate=a,e.init&&(e.init.call(e,h.data),h.status=s.INIT,h.isTransition&&n.events.emit(t.TRANSITION_INIT,h.transitionFrom,h.transitionDuration)),n.load&&(i=n.load).reset(),i&&e.preload?(e.preload.call(e),0===i.list.size?this.create(e):(h.status=s.LOADING,i.once(r.COMPLETE,this.loadComplete,this),i.start())):this.create(e)},loadComplete:function(e){var s=e.scene;this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(s)},payloadComplete:function(e){this.bootScene(e.scene)},update:function(e,t){this.processQueue(),this.isProcessing=!0;for(var i=this.scenes.length-1;i>=0;i--){var n=this.scenes[i].sys;n.settings.status>s.START&&n.settings.status<=s.RUNNING&&n.step(e,t)}},render:function(e){for(var t=0;t<this.scenes.length;t++){var i=this.scenes[t].sys;i.settings.visible&&i.settings.status>=s.LOADING&&i.settings.status<s.SLEEPING&&i.render(e)}this.isProcessing=!1},create:function(e){var i=e.sys,n=i.settings;e.create&&(n.status=s.CREATING,e.create.call(e,n.data),n.status===s.DESTROYED)||(n.isTransition&&i.events.emit(t.TRANSITION_START,n.transitionFrom,n.transitionDuration),e.update&&(i.sceneUpdate=e.update),n.status=s.RUNNING,i.events.emit(t.CREATE,e))},createSceneFromFunction:function(e,s){var t=new s;if(t instanceof h){var i=t.sys.settings.key;if(""!==i&&(e=i),this.keys.hasOwnProperty(e))throw new Error("Cannot add a Scene with duplicate key: "+e);return this.createSceneFromInstance(e,t)}return t.sys=new o(t),t.sys.settings.key=e,t.sys.init(this.game),t},createSceneFromInstance:function(e,s){var t=s.sys.settings.key;return""!==t?e=t:s.sys.settings.key=e,s.sys.init(this.game),s},createSceneFromObject:function(e,s){var t=new h(s),i=t.sys.settings.key;""!==i?e=i:t.sys.settings.key=e,t.sys.init(this.game);for(var r=["init","preload","create","update","render"],a=0;a<r.length;a++){var o=n(s,r[a],null);o&&(t[r[a]]=o)}if(s.hasOwnProperty("extend"))for(var u in s.extend)if(s.extend.hasOwnProperty(u)){var c=s.extend[u];"data"===u&&t.hasOwnProperty("data")&&"object"==typeof c?t.data.merge(c):"sys"!==u&&(t[u]=c)}return t},getKey:function(e,s){if(e||(e="default"),"function"==typeof s)return e;if(s instanceof h?e=s.sys.settings.key:"object"==typeof s&&s.hasOwnProperty("key")&&(e=s.key),this.keys.hasOwnProperty(e))throw new Error("Cannot add a Scene with duplicate key: "+e);return e},getScenes:function(e,s){void 0===e&&(e=!0),void 0===s&&(s=!1);for(var t=[],i=this.scenes,n=0;n<i.length;n++){var r=i[n];r&&(!e||e&&r.sys.isActive())&&t.push(r)}return s?t.reverse():t},getScene:function(e){if("string"==typeof e){if(this.keys[e])return this.keys[e]}else for(var s=0;s<this.scenes.length;s++)if(e===this.scenes[s])return e;return null},isActive:function(e){var s=this.getScene(e);return s?s.sys.isActive():null},isPaused:function(e){var s=this.getScene(e);return s?s.sys.isPaused():null},isVisible:function(e){var s=this.getScene(e);return s?s.sys.isVisible():null},isSleeping:function(e){var s=this.getScene(e);return s?s.sys.isSleeping():null},pause:function(e,s){var t=this.getScene(e);return t&&t.sys.pause(s),this},resume:function(e,s){var t=this.getScene(e);return t&&t.sys.resume(s),this},sleep:function(e,s){var t=this.getScene(e);return t&&!t.sys.isTransitioning()&&t.sys.sleep(s),this},wake:function(e,s){var t=this.getScene(e);return t&&t.sys.wake(s),this},run:function(e,s){var t=this.getScene(e);if(!t){for(var i=0;i<this._pending.length;i++)if(this._pending[i].key===e){this.queueOp("start",e,s);break}return this}t.sys.isSleeping()?t.sys.wake(s):t.sys.isPaused()?t.sys.resume(s):this.start(e,s)},start:function(e,t){if(!this.isBooted)return this._data[e]={autoStart:!0,data:t},this;var i=this.getScene(e);if(i){var n;if(i.sys.isActive()||i.sys.isPaused())i.sys.shutdown(),i.sys.start(t);else if(i.sys.start(t),i.sys.load&&(n=i.sys.load),n&&i.sys.settings.hasOwnProperty("pack")&&(n.reset(),n.addPack({payload:i.sys.settings.pack})))return i.sys.settings.status=s.LOADING,n.once(r.COMPLETE,this.payloadComplete,this),n.start(),this;this.bootScene(i)}return this},stop:function(e,s){var t=this.getScene(e);return t&&!t.sys.isTransitioning()&&t.sys.shutdown(s),this},switch:function(e,s){var t=this.getScene(e),i=this.getScene(s);return t&&i&&t!==i&&(this.sleep(e),this.isSleeping(s)?this.wake(s):this.start(s)),this},getAt:function(e){return this.scenes[e]},getIndex:function(e){var s=this.getScene(e);return this.scenes.indexOf(s)},bringToTop:function(e){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:e,keyB:null});else{var s=this.getIndex(e);if(-1!==s&&s<this.scenes.length){var t=this.getScene(e);this.scenes.splice(s,1),this.scenes.push(t)}}return this},sendToBack:function(e){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:e,keyB:null});else{var s=this.getIndex(e);if(-1!==s&&s>0){var t=this.getScene(e);this.scenes.splice(s,1),this.scenes.unshift(t)}}return this},moveDown:function(e){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:e,keyB:null});else{var s=this.getIndex(e);if(s>0){var t=s-1,i=this.getScene(e),n=this.getAt(t);this.scenes[s]=n,this.scenes[t]=i}}return this},moveUp:function(e){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:e,keyB:null});else{var s=this.getIndex(e);if(s<this.scenes.length-1){var t=s+1,i=this.getScene(e),n=this.getAt(t);this.scenes[s]=n,this.scenes[t]=i}}return this},moveAbove:function(e,s){if(e===s)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:e,keyB:s});else{var t=this.getIndex(e),i=this.getIndex(s);if(-1!==t&&-1!==i){var n=this.getAt(i);this.scenes.splice(i,1),this.scenes.splice(t+1,0,n)}}return this},moveBelow:function(e,s){if(e===s)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:e,keyB:s});else{var t=this.getIndex(e),i=this.getIndex(s);if(-1!==t&&-1!==i){var n=this.getAt(i);this.scenes.splice(i,1),0===t?this.scenes.unshift(n):this.scenes.splice(t,0,n)}}return this},queueOp:function(e,s,t){return this._queue.push({op:e,keyA:s,keyB:t}),this},swapPosition:function(e,s){if(e===s)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:e,keyB:s});else{var t=this.getIndex(e),i=this.getIndex(s);if(t!==i&&-1!==t&&-1!==i){var n=this.getAt(t);this.scenes[t]=this.scenes[i],this.scenes[i]=n}}return this},dump:function(){for(var e=[],t=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],i=0;i<this.scenes.length;i++){var n=this.scenes[i].sys,r=!n.settings.visible||n.settings.status!==s.RUNNING&&n.settings.status!==s.PAUSED?"[-] ":"[*] ";r+=n.settings.key+" ("+t[n.settings.status]+")",e.push(r)}console.log(e.join("\n"))},destroy:function(){for(var e=0;e<this.scenes.length;e++){this.scenes[e].sys.destroy()}this.update=a,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});module.exports=u;
},{"../utils/Class":"Q4x4","./const":"o8LK","./events":"Zlz3","../core/events":"ZroQ","../utils/object/GetValue":"FWyS","../loader/events":"bOrI","../utils/NOOP":"vnTW","./Scene":"dryH","./Systems":"FQkz"}],"qOsR":[function(require,module,exports) {
var t=require("../utils/Class"),i=require("../math/Clamp"),h=require("../utils/object/Extend"),s=new t({initialize:function(t,i,h,s,e,r,u){this.texture=t,this.name=i,this.source=t.source[h],this.sourceIndex=h,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(r,u,s,e)},setSize:function(t,i,h,s){void 0===h&&(h=0),void 0===s&&(s=0),this.cutX=h,this.cutY=s,this.cutWidth=t,this.cutHeight=i,this.width=t,this.height=i,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*i),this.centerX=Math.floor(t/2),this.centerY=Math.floor(i/2);var e=this.data,r=e.cut;r.x=h,r.y=s,r.w=t,r.h=i,r.r=h+t,r.b=s+i,e.sourceSize.w=t,e.sourceSize.h=i,e.spriteSourceSize.w=t,e.spriteSourceSize.h=i,e.radius=.5*Math.sqrt(t*t+i*i);var u=e.drawImage;return u.x=h,u.y=s,u.width=t,u.height=i,this.updateUVs()},setTrim:function(t,i,h,s,e,r){var u=this.data,a=u.spriteSourceSize;return u.trim=!0,u.sourceSize.w=t,u.sourceSize.h=i,a.x=h,a.y=s,a.w=e,a.h=r,a.r=h+e,a.b=s+r,this.x=h,this.y=s,this.width=e,this.height=r,this.halfWidth=.5*e,this.halfHeight=.5*r,this.centerX=Math.floor(e/2),this.centerY=Math.floor(r/2),this.updateUVs()},setCropUVs:function(t,h,s,e,r,u,a){var c=this.cutX,n=this.cutY,o=this.cutWidth,d=this.cutHeight,l=this.realWidth,g=this.realHeight,f=c+(h=i(h,0,l)),x=n+(s=i(s,0,g)),w=e=i(e,0,l-h),m=r=i(r,0,g-s),v=this.data;if(v.trim){var p=v.spriteSourceSize,S=h+(e=i(e,0,o-h)),y=s+(r=i(r,0,d-s));if(!(p.r<h||p.b<s||p.x>S||p.y>y)){var z=Math.max(p.x,h),M=Math.max(p.y,s),X=Math.min(p.r,S)-z,Y=Math.min(p.b,y)-M;w=X,m=Y,f=u?c+(o-(z-p.x)-X):c+(z-p.x),x=a?n+(d-(M-p.y)-Y):n+(M-p.y),h=z,s=M,e=X,r=Y}else f=0,x=0,w=0,m=0}else u&&(f=c+(o-h-e)),a&&(x=n+(d-s-r));var H=this.source.width,W=this.source.height;return t.u0=Math.max(0,f/H),t.v0=Math.max(0,x/W),t.u1=Math.min(1,(f+w)/H),t.v1=Math.min(1,(x+m)/W),t.x=h,t.y=s,t.cx=f,t.cy=x,t.cw=w,t.ch=m,t.width=e,t.height=r,t.flipX=u,t.flipY=a,t},updateCropUVs:function(t,i,h){return this.setCropUVs(t,t.x,t.y,t.width,t.height,i,h)},updateUVs:function(){var t=this.cutX,i=this.cutY,h=this.cutWidth,s=this.cutHeight,e=this.data.drawImage;e.width=h,e.height=s;var r=this.source.width,u=this.source.height;return this.u0=t/r,this.v0=i/u,this.u1=(t+h)/r,this.v1=(i+s)/u,this},updateUVsInverted:function(){var t=this.source.width,i=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/i,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/i,this},clone:function(){var t=new s(this.texture,this.name,this.sourceIndex);return t.cutX=this.cutX,t.cutY=this.cutY,t.cutWidth=this.cutWidth,t.cutHeight=this.cutHeight,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.halfWidth=this.halfWidth,t.halfHeight=this.halfHeight,t.centerX=this.centerX,t.centerY=this.centerY,t.rotated=this.rotated,t.data=h(!0,t.data,this.data),t.updateUVs(),t},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});module.exports=s;
},{"../utils/Class":"Q4x4","../math/Clamp":"dPkx","../utils/object/Extend":"CtVZ"}],"vpxx":[function(require,module,exports) {
var e=require("../display/canvas/CanvasPool"),t=require("../utils/Class"),i=require("../math/pow2/IsSizePowerOfTwo"),s=require("../renderer/ScaleModes"),r=new t({initialize:function(e,t,r,h,n){void 0===n&&(n=!1);var a=e.manager.game;this.renderer=a.renderer,this.texture=e,this.source=t,this.image=t,this.compressionAlgorithm=null,this.resolution=1,this.width=r||t.naturalWidth||t.videoWidth||t.width||0,this.height=h||t.naturalHeight||t.videoHeight||t.height||0,this.scaleMode=s.DEFAULT,this.isCanvas=t instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&t instanceof HTMLVideoElement,this.isRenderTexture="RenderTexture"===t.type,this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&t instanceof WebGLTexture,this.isPowerOf2=i(this.width,this.height),this.glTexture=null,this.flipY=n,this.init(a)},init:function(e){this.renderer&&(this.renderer.gl?this.isCanvas?this.glTexture=this.renderer.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=this.renderer.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=this.renderer.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=this.renderer.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),e.config.antialias||this.setFilter(1)},setFilter:function(e){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,e),this.scaleMode=e},setFlipY:function(e){return void 0===e&&(e=!0),this.flipY=e,this},update:function(){var e=this.renderer.gl;e&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):e&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&e.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});module.exports=r;
},{"../display/canvas/CanvasPool":"Brmu","../utils/Class":"Q4x4","../math/pow2/IsSizePowerOfTwo":"HYc7","../renderer/ScaleModes":"boNA"}],"ylmY":[function(require,module,exports) {
var e=require("../utils/Class"),r=require("./Frame"),t=require("./TextureSource"),s="Texture.frame missing: ",i=new e({initialize:function(e,r,s,i,a){Array.isArray(s)||(s=[s]),this.manager=e,this.key=r,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var o=0;o<s.length;o++)this.source.push(new t(this,s[o],i,a))},add:function(e,t,s,i,a,o){if(this.has(e))return null;var h=new r(this,e,t,s,i,a,o);return this.frames[e]=h,"__BASE"===this.firstFrame&&(this.firstFrame=e),this.frameTotal++,h},remove:function(e){return!!this.has(e)&&(this.get(e).destroy(),delete this.frames[e],!0)},has:function(e){return this.frames[e]},get:function(e){e||(e=this.firstFrame);var r=this.frames[e];return r||(console.warn(s+e),r=this.frames[this.firstFrame]),r},getTextureSourceIndex:function(e){for(var r=0;r<this.source.length;r++)if(this.source[r]===e)return r;return-1},getFramesFromTextureSource:function(e,r){void 0===r&&(r=!1);var t=[];for(var s in this.frames)if("__BASE"!==s||r){var i=this.frames[s];i.sourceIndex===e&&t.push(i)}return t},getFrameNames:function(e){void 0===e&&(e=!1);var r=Object.keys(this.frames);if(!e){var t=r.indexOf("__BASE");-1!==t&&r.splice(t,1)}return r},getSourceImage:function(e){null!=e&&1!==this.frameTotal||(e="__BASE");var r=this.frames[e];return r?r.source.image:(console.warn(s+e),this.frames.__BASE.source.image)},getDataSourceImage:function(e){null!=e&&1!==this.frameTotal||(e="__BASE");var r,t=this.frames[e];return t?r=t.sourceIndex:(console.warn(s+e),r=this.frames.__BASE.sourceIndex),this.dataSource[r].image},setDataSource:function(e){Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var s=this.source[r];this.dataSource.push(new t(this,e[r],s.width,s.height))}},setFilter:function(e){var r;for(r=0;r<this.source.length;r++)this.source[r].setFilter(e);for(r=0;r<this.dataSource.length;r++)this.dataSource[r].setFilter(e)},destroy:function(){var e;for(e=0;e<this.source.length;e++)this.source[e].destroy();for(e=0;e<this.dataSource.length;e++)this.dataSource[e].destroy();for(var r in this.frames){this.frames[r].destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});module.exports=i;
},{"../utils/Class":"Q4x4","./Frame":"qOsR","./TextureSource":"vpxx"}],"iCi3":[function(require,module,exports) {
var t=require("../utils/Class"),i=require("../math/Clamp"),a=require("../display/color/Color"),e=require("../const"),h=require("../math/pow2/IsSizePowerOfTwo"),s=require("./Texture"),r=new t({Extends:s,initialize:function(t,i,a,e,h){s.call(this,t,i,a,e,h),this.add("__BASE",0,0,0,e,h),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=e,this.height=h,this.imageData=this.context.getImageData(0,0,e,h),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===e.WEBGL&&this.refresh(),this},draw:function(t,i,a){return this.context.drawImage(a,t,i),this.update()},drawFrame:function(t,i,a,e){void 0===a&&(a=0),void 0===e&&(e=0);var h=this.manager.getFrame(t,i);if(h){var s=h.canvasData,r=h.cutWidth,n=h.cutHeight,o=h.source.resolution;return this.context.drawImage(h.source.image,s.x,s.y,r,n,a,e,r/o,n/o),this.update()}return this},setPixel:function(t,i,a,e,h,s){if(void 0===s&&(s=255),t=Math.abs(Math.floor(t)),i=Math.abs(Math.floor(i)),this.getIndex(t,i)>-1){var r=this.context.getImageData(t,i,1,1);r.data[0]=a,r.data[1]=e,r.data[2]=h,r.data[3]=s,this.context.putImageData(r,t,i)}return this},putData:function(t,i,a,e,h,s,r){return void 0===e&&(e=0),void 0===h&&(h=0),void 0===s&&(s=t.width),void 0===r&&(r=t.height),this.context.putImageData(t,i,a,e,h,s,r),this},getData:function(t,a,e,h){return t=i(Math.floor(t),0,this.width-1),a=i(Math.floor(a),0,this.height-1),e=i(e,1,this.width-t),h=i(h,1,this.height-a),this.context.getImageData(t,a,e,h)},getPixel:function(t,i,e){e||(e=new a);var h=this.getIndex(t,i);if(h>-1){var s=this.data,r=s[h+0],n=s[h+1],o=s[h+2],u=s[h+3];e.setTo(r,n,o,u)}return e},getPixels:function(t,e,h,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===h&&(h=this.width),void 0===s&&(s=h),t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e));for(var r=i(t,0,this.width),n=i(t+h,0,this.width),o=i(e,0,this.height),u=i(e+s,0,this.height),d=new a,f=[],g=o;g<u;g++){for(var c=[],l=r;l<n;l++)d=this.getPixel(l,g,d),c.push({x:l,y:g,color:d.color,alpha:d.alphaGL});f.push(c)}return f},getIndex:function(t,i){return t=Math.abs(Math.round(t)),i=Math.abs(Math.round(i)),t<this.width&&i<this.height?4*(t+i*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(t,i,a,e){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===a&&(a=this.width),void 0===e&&(e=this.height),this.context.clearRect(t,i,a,e),this.update()},setSize:function(t,i){return void 0===i&&(i=t),t===this.width&&i===this.height||(this.canvas.width=t,this.canvas.height=i,this._source.width=t,this._source.height=i,this._source.isPowerOf2=h(t,i),this.frames.__BASE.setSize(t,i,0,0),this.width=t,this.height=i,this.refresh()),this},destroy:function(){s.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});module.exports=r;
},{"../utils/Class":"Q4x4","../math/Clamp":"dPkx","../display/color/Color":"f7cv","../const":"ktri","../math/pow2/IsSizePowerOfTwo":"HYc7","./Texture":"ylmY"}],"cBL6":[function(require,module,exports) {
var e=function(e,a,t){if(t.getElementsByTagName("TextureAtlas")){var r=e.source[a];e.add("__BASE",a,0,0,r.width,r.height);for(var n,s=t.getElementsByTagName("SubTexture"),u=0;u<s.length;u++){var l=s[u].attributes,v=l.name.value,i=parseInt(l.x.value,10),m=parseInt(l.y.value,10),h=parseInt(l.width.value,10),d=parseInt(l.height.value,10);if(n=e.add(v,a,i,m,h,d),l.frameX){var f=Math.abs(parseInt(l.frameX.value,10)),g=Math.abs(parseInt(l.frameY.value,10)),p=parseInt(l.frameWidth.value,10),I=parseInt(l.frameHeight.value,10);n.setTrim(h,d,f,g,p,I)}}return e}console.warn("Invalid Texture Atlas XML given")};module.exports=e;
},{}],"txRV":[function(require,module,exports) {
var r=function(r,e){var t=r.source[e];return r.add("__BASE",e,0,0,t.width,t.height),r};module.exports=r;
},{}],"mGtO":[function(require,module,exports) {
var e=require("../../utils/object/Clone"),r=function(r,t,a){if(a.frames||a.textures){var i=r.source[t];r.add("__BASE",t,0,0,i.width,i.height);for(var o,s=Array.isArray(a.textures)?a.textures[t].frames:a.frames,u=0;u<s.length;u++){var m=s[u];o=r.add(m.filename,t,m.frame.x,m.frame.y,m.frame.w,m.frame.h),m.trimmed&&o.setTrim(m.sourceSize.w,m.sourceSize.h,m.spriteSourceSize.x,m.spriteSourceSize.y,m.spriteSourceSize.w,m.spriteSourceSize.h),m.rotated&&(o.rotated=!0,o.updateUVsInverted());var c=m.anchor||m.pivot;c&&(o.customPivot=!0,o.pivotX=c.x,o.pivotY=c.y),o.customData=e(m)}for(var f in a)"frames"!==f&&(Array.isArray(a[f])?r.customData[f]=a[f].slice(0):r.customData[f]=a[f]);return r}console.warn("Invalid Texture Atlas JSON Array")};module.exports=r;
},{"../../utils/object/Clone":"y1cc"}],"epjL":[function(require,module,exports) {
var e=require("../../utils/object/Clone"),r=function(r,a,t){if(t.frames){var i=r.source[a];r.add("__BASE",a,0,0,i.width,i.height);var o,s=t.frames;for(var u in s){var c=s[u];o=r.add(u,a,c.frame.x,c.frame.y,c.frame.w,c.frame.h),c.trimmed&&o.setTrim(c.sourceSize.w,c.sourceSize.h,c.spriteSourceSize.x,c.spriteSourceSize.y,c.spriteSourceSize.w,c.spriteSourceSize.h),c.rotated&&(o.rotated=!0,o.updateUVsInverted());var m=c.anchor||c.pivot;m&&(o.customPivot=!0,o.pivotX=m.x,o.pivotY=m.y),o.customData=e(c)}for(var v in t)"frames"!==v&&(Array.isArray(t[v])?r.customData[v]=t[v].slice(0):r.customData[v]=t[v]);return r}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")};module.exports=r;
},{"../../utils/object/Clone":"y1cc"}],"As2K":[function(require,module,exports) {
var r=require("../../utils/object/GetFastValue"),e=function(e,a,t,i,n,o,l){var d=r(l,"frameWidth",null),h=r(l,"frameHeight",d);if(null===d)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var s=e.source[a];e.add("__BASE",a,0,0,s.width,s.height);var u=r(l,"startFrame",0),f=r(l,"endFrame",-1),m=r(l,"margin",0),v=r(l,"spacing",0),g=Math.floor((n-m+v)/(d+v))*Math.floor((o-m+v)/(h+v));0===g&&console.warn("SpriteSheet frame dimensions will result in zero frames."),(u>g||u<-g)&&(u=0),u<0&&(u=g+u),-1!==f&&(g=u+(f+1));for(var c=m,w=m,S=0,p=0,F=0;F<g;F++){S=0,p=0;var M=c+d,x=w+h;M>n&&(S=M-n),x>o&&(p=x-o),e.add(F,a,t+c,i+w,d-S,h-p),(c+=d+v)+d>n&&(c=m,w+=h+v)}return e};module.exports=e;
},{"../../utils/object/GetFastValue":"xbYy"}],"Xika":[function(require,module,exports) {
var r=require("../../utils/object/GetFastValue"),t=function(t,e,a){var i=r(a,"frameWidth",null),h=r(a,"frameHeight",i);if(!i)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var u=t.source[0];t.add("__BASE",0,0,0,u.width,u.height);var o,d=r(a,"startFrame",0),n=r(a,"endFrame",-1),c=r(a,"margin",0),l=r(a,"spacing",0),v=e.cutX,f=e.cutY,g=e.cutWidth,m=e.cutHeight,s=e.realWidth,W=e.realHeight,x=Math.floor((s-c+l)/(i+l)),F=Math.floor((W-c+l)/(h+l)),H=x*F,p=e.x,w=i-p,M=i-(s-g-p),S=e.y,A=h-S,E=h-(W-m-S);(d>H||d<-H)&&(d=0),d<0&&(d=H+d),-1!==n&&(H=d+(n+1));for(var I=c,T=c,_=0,b=e.sourceIndex,j=0;j<F;j++){for(var q=0===j,y=j===F-1,B=0;B<x;B++){var G=0===B,V=B===x-1;if(o=t.add(_,b,v+I,f+T,i,h),G||q||V||y){var X=G?p:0,Y=q?S:0,k=0,z=0;G&&(k+=i-w),V&&(k+=i-M),q&&(z+=h-A),y&&(z+=h-E);var C=i-k,D=h-z;o.cutWidth=C,o.cutHeight=D,o.setTrim(i,h,X,Y,C,D)}I+=l,I+=G?w:V?M:i,_++}I=c,T+=l,T+=q?A:y?E:h}return t};module.exports=t;
},{"../../utils/object/GetFastValue":"xbYy"}],"mcfX":[function(require,module,exports) {
var h=0,t=function(t,e,i,a){var r=h-a.y-a.height;t.add(i,e,a.x,r,a.width,a.height)},e=function(e,i,a){var r=e.source[i];e.add("__BASE",i,0,0,r.width,r.height),h=r.height;for(var d=a.split("\n"),s=/^[ ]*(- )*(\w+)+[: ]+(.*)/,c="",n="",g={x:0,y:0,width:0,height:0},w=0;w<d.length;w++){var o=d[w].match(s);if(o){var v="- "===o[1],f=o[2],u=o[3];if(v&&(n!==c&&(t(e,i,n,g),c=n),g={x:0,y:0,width:0,height:0}),"name"!==f)switch(f){case"x":case"y":case"width":case"height":g[f]=parseInt(u,10)}else n=u}}return n!==c&&t(e,i,n,g),e};module.exports=e;
},{}],"VrY0":[function(require,module,exports) {
module.exports={AtlasXML:require("./AtlasXML"),Canvas:require("./Canvas"),Image:require("./Image"),JSONArray:require("./JSONArray"),JSONHash:require("./JSONHash"),SpriteSheet:require("./SpriteSheet"),SpriteSheetFromAtlas:require("./SpriteSheetFromAtlas"),UnityYAML:require("./UnityYAML")};
},{"./AtlasXML":"cBL6","./Canvas":"txRV","./Image":"txRV","./JSONArray":"mGtO","./JSONHash":"epjL","./SpriteSheet":"As2K","./SpriteSheetFromAtlas":"Xika","./UnityYAML":"mcfX"}],"xZ5N":[function(require,module,exports) {
var t=require("../display/canvas/CanvasPool"),e=require("./CanvasTexture"),i=require("../utils/Class"),r=require("../display/color/Color"),s=require("../const"),a=require("eventemitter3"),n=require("./events"),h=require("../core/events"),u=require("../create/GenerateTexture"),c=require("../utils/object/GetValue"),o=require("./parsers"),l=require("./Texture"),d=new i({Extends:a,initialize:function(e){a.call(this),this.game=e,this.name="TextureManager",this.list={},this._tempCanvas=t.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,e.events.once(h.BOOT,this.boot,this)},boot:function(){this._pending=2,this.on(n.LOAD,this.updatePending,this),this.on(n.ERROR,this.updatePending,this),this.addBase64("__DEFAULT",this.game.config.defaultImage),this.addBase64("__MISSING",this.game.config.missingImage),this.game.events.once(h.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,0===this._pending&&(this.off(n.LOAD),this.off(n.ERROR),this.emit(n.READY))},checkKey:function(t){return!this.exists(t)||(console.error("Texture key already in use: "+t),!1)},remove:function(t){if("string"==typeof t){if(!this.exists(t))return console.warn("No texture found matching key: "+t),this;t=this.get(t)}return this.list.hasOwnProperty(t.key)&&(t.destroy(),this.emit(n.REMOVE,t.key)),this},removeKey:function(t){return this.list.hasOwnProperty(t)&&delete this.list[t],this},addBase64:function(t,e){if(this.checkKey(t)){var i=this,r=new Image;r.onerror=function(){i.emit(n.ERROR,t)},r.onload=function(){var e=i.create(t,r);o.Image(e,0),i.emit(n.ADD,t,e),i.emit(n.LOAD,t,e)},r.src=e}return this},getBase64:function(e,i,r,s){void 0===r&&(r="image/png"),void 0===s&&(s=.92);var a="",n=this.getFrame(e,i);if(n&&(n.source.isRenderTexture||n.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(n){var h=n.canvasData,u=t.create2D(this,h.width,h.height);u.getContext("2d").drawImage(n.source.image,h.x,h.y,h.width,h.height,0,0,h.width,h.height),a=u.toDataURL(r,s),t.remove(u)}return a},addImage:function(t,e,i){var r=null;return this.checkKey(t)&&(r=this.create(t,e),o.Image(r,0),i&&r.setDataSource(i),this.emit(n.ADD,t,r)),r},addGLTexture:function(t,e,i,r){var s=null;return this.checkKey(t)&&((s=this.create(t,e,i,r)).add("__BASE",0,0,0,i,r),this.emit(n.ADD,t,s)),s},addRenderTexture:function(t,e){var i=null;return this.checkKey(t)&&((i=this.create(t,e)).add("__BASE",0,0,0,e.width,e.height),this.emit(n.ADD,t,i)),i},generate:function(e,i){if(this.checkKey(e)){var r=t.create(this,1,1);return i.canvas=r,u(i),this.addCanvas(e,r)}return null},createCanvas:function(e,i,r){if(void 0===i&&(i=256),void 0===r&&(r=256),this.checkKey(e)){var a=t.create(this,i,r,s.CANVAS,!0);return this.addCanvas(e,a)}return null},addCanvas:function(t,i,r){void 0===r&&(r=!1);var s=null;return r?s=new e(this,t,i,i.width,i.height):this.checkKey(t)&&(s=new e(this,t,i,i.width,i.height),this.list[t]=s,this.emit(n.ADD,t,s)),s},addAtlas:function(t,e,i,r){return Array.isArray(i.textures)||Array.isArray(i.frames)?this.addAtlasJSONArray(t,e,i,r):this.addAtlasJSONHash(t,e,i,r)},addAtlasJSONArray:function(t,e,i,r){var s=null;if(this.checkKey(t)){if(s=this.create(t,e),Array.isArray(i))for(var a=1===i.length,h=0;h<s.source.length;h++){var u=a?i[0]:i[h];o.JSONArray(s,h,u)}else o.JSONArray(s,0,i);r&&s.setDataSource(r),this.emit(n.ADD,t,s)}return s},addAtlasJSONHash:function(t,e,i,r){var s=null;if(this.checkKey(t)){if(s=this.create(t,e),Array.isArray(i))for(var a=0;a<i.length;a++)o.JSONHash(s,a,i[a]);else o.JSONHash(s,0,i);r&&s.setDataSource(r),this.emit(n.ADD,t,s)}return s},addAtlasXML:function(t,e,i,r){var s=null;return this.checkKey(t)&&(s=this.create(t,e),o.AtlasXML(s,0,i),r&&s.setDataSource(r),this.emit(n.ADD,t,s)),s},addUnityAtlas:function(t,e,i,r){var s=null;return this.checkKey(t)&&(s=this.create(t,e),o.UnityYAML(s,0,i),r&&s.setDataSource(r),this.emit(n.ADD,t,s)),s},addSpriteSheet:function(t,e,i){var r=null;if(this.checkKey(t)){var s=(r=this.create(t,e)).source[0].width,a=r.source[0].height;o.SpriteSheet(r,0,0,0,s,a,i),this.emit(n.ADD,t,r)}return r},addSpriteSheetFromAtlas:function(t,e){if(!this.checkKey(t))return null;var i=c(e,"atlas",null),r=c(e,"frame",null);if(i&&r){var s=this.get(i).get(r);if(s){var a=this.create(t,s.source.image);return s.trimmed?o.SpriteSheetFromAtlas(a,s,e):o.SpriteSheet(a,0,s.cutX,s.cutY,s.cutWidth,s.cutHeight,e),this.emit(n.ADD,t,a),a}}},create:function(t,e,i,r){var s=null;return this.checkKey(t)&&(s=new l(this,t,e,i,r),this.list[t]=s),s},exists:function(t){return this.list.hasOwnProperty(t)},get:function(t){return void 0===t&&(t="__DEFAULT"),this.list[t]?this.list[t]:t instanceof l?t:this.list.__MISSING},cloneFrame:function(t,e){if(this.list[t])return this.list[t].get(e).clone()},getFrame:function(t,e){if(this.list[t])return this.list[t].get(e)},getTextureKeys:function(){var t=[];for(var e in this.list)"__DEFAULT"!==e&&"__MISSING"!==e&&t.push(e);return t},getPixel:function(t,e,i,s){var a=this.getFrame(i,s);if(a){t-=a.x,e-=a.y;var n=a.data.cut;if(t+=n.x,e+=n.y,t>=n.x&&t<n.r&&e>=n.y&&e<n.b){var h=this._tempContext;h.clearRect(0,0,1,1),h.drawImage(a.source.image,t,e,1,1,0,0,1,1);var u=h.getImageData(0,0,1,1);return new r(u.data[0],u.data[1],u.data[2],u.data[3])}}return null},getPixelAlpha:function(t,e,i,r){var s=this.getFrame(i,r);if(s){t-=s.x,e-=s.y;var a=s.data.cut;if(t+=a.x,e+=a.y,t>=a.x&&t<a.r&&e>=a.y&&e<a.b){var n=this._tempContext;return n.clearRect(0,0,1,1),n.drawImage(s.source.image,t,e,1,1,0,0,1,1),n.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(t,e,i){return this.list[e]&&(t.texture=this.list[e],t.frame=t.texture.get(i)),t},renameTexture:function(t,e){var i=this.get(t);return!(!i||t===e)&&(i.key=e,this.list[e]=i,delete this.list[t],!0)},each:function(t,e){for(var i=[null],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var s in this.list)i[0]=this.list[s],t.apply(e,i)},destroy:function(){for(var e in this.list)this.list[e].destroy();this.list={},this.game=null,t.remove(this._tempCanvas)}});module.exports=d;
},{"../display/canvas/CanvasPool":"Brmu","./CanvasTexture":"iCi3","../utils/Class":"Q4x4","../display/color/Color":"f7cv","../const":"ktri","eventemitter3":"Clm3","./events":"KB6D","../core/events":"ZroQ","../create/GenerateTexture":"kOQJ","../utils/object/GetValue":"FWyS","./parsers":"VrY0","./Texture":"ylmY"}],"geXX":[function(require,module,exports) {
module.exports="decoded";
},{}],"pTYr":[function(require,module,exports) {
module.exports="decodedall";
},{}],"SFbJ":[function(require,module,exports) {
module.exports="detune";
},{}],"OjQP":[function(require,module,exports) {
module.exports="mute";
},{}],"JTbZ":[function(require,module,exports) {
module.exports="rate";
},{}],"Kw4I":[function(require,module,exports) {
module.exports="volume";
},{}],"W8mK":[function(require,module,exports) {
module.exports="looped";
},{}],"UMl6":[function(require,module,exports) {
module.exports="seek";
},{}],"xMzV":[function(require,module,exports) {
module.exports="stopall";
},{}],"joJ3":[function(require,module,exports) {
module.exports={COMPLETE:require("./COMPLETE_EVENT"),DECODED:require("./DECODED_EVENT"),DECODED_ALL:require("./DECODED_ALL_EVENT"),DESTROY:require("./DESTROY_EVENT"),DETUNE:require("./DETUNE_EVENT"),GLOBAL_DETUNE:require("./GLOBAL_DETUNE_EVENT"),GLOBAL_MUTE:require("./GLOBAL_MUTE_EVENT"),GLOBAL_RATE:require("./GLOBAL_RATE_EVENT"),GLOBAL_VOLUME:require("./GLOBAL_VOLUME_EVENT"),LOOP:require("./LOOP_EVENT"),LOOPED:require("./LOOPED_EVENT"),MUTE:require("./MUTE_EVENT"),PAUSE_ALL:require("./PAUSE_ALL_EVENT"),PAUSE:require("./PAUSE_EVENT"),PLAY:require("./PLAY_EVENT"),RATE:require("./RATE_EVENT"),RESUME_ALL:require("./RESUME_ALL_EVENT"),RESUME:require("./RESUME_EVENT"),SEEK:require("./SEEK_EVENT"),STOP_ALL:require("./STOP_ALL_EVENT"),STOP:require("./STOP_EVENT"),UNLOCKED:require("./UNLOCKED_EVENT"),VOLUME:require("./VOLUME_EVENT")};
},{"./COMPLETE_EVENT":"RxkH","./DECODED_EVENT":"geXX","./DECODED_ALL_EVENT":"pTYr","./DESTROY_EVENT":"dnzl","./DETUNE_EVENT":"SFbJ","./GLOBAL_DETUNE_EVENT":"SFbJ","./GLOBAL_MUTE_EVENT":"OjQP","./GLOBAL_RATE_EVENT":"JTbZ","./GLOBAL_VOLUME_EVENT":"Kw4I","./LOOP_EVENT":"VycB","./LOOPED_EVENT":"W8mK","./MUTE_EVENT":"OjQP","./PAUSE_ALL_EVENT":"e12V","./PAUSE_EVENT":"RNoC","./PLAY_EVENT":"UU6v","./RATE_EVENT":"JTbZ","./RESUME_ALL_EVENT":"gfcE","./RESUME_EVENT":"eU0X","./SEEK_EVENT":"UMl6","./STOP_ALL_EVENT":"xMzV","./STOP_EVENT":"M1lJ","./UNLOCKED_EVENT":"X4W7","./VOLUME_EVENT":"Kw4I"}],"k2LY":[function(require,module,exports) {
var r=function(r,e,n,t){var a=r.length;if(e<0||e>a||e>=n||n>a||e+n>a){if(t)throw new Error("Range Error: Values outside acceptable range");return!1}return!0};module.exports=r;
},{}],"nQOX":[function(require,module,exports) {
var r=require("./SafeRange"),e=function(e,o,v,a,i){void 0===a&&(a=0),void 0===i&&(i=e.length);var n=[];if(r(e,a,i))for(var d=a;d<i;d++){var t=e[d];(!o||o&&void 0===v&&t.hasOwnProperty(o)||o&&void 0!==v&&t[o]===v)&&n.push(t)}return n};module.exports=e;
},{"./SafeRange":"k2LY"}],"xQHB":[function(require,module,exports) {
var r=require("./SafeRange"),e=function(e,o,i,n,v){if(void 0===n&&(n=0),void 0===v&&(v=e.length),r(e,n,v))for(var a=n;a<v;a++){var t=e[a];if(!o||o&&void 0===i&&t.hasOwnProperty(o)||o&&void 0!==i&&t[o]===i)return t}return null};module.exports=e;
},{"./SafeRange":"k2LY"}],"eyaX":[function(require,module,exports) {
var t=require("../utils/Class"),e=require("../utils/object/Clone"),s=require("eventemitter3"),i=require("./events"),n=require("../core/events"),o=require("../utils/NOOP"),u=require("../utils/array/GetAll"),r=require("../utils/array/GetFirst"),h=new t({Extends:s,initialize:function(t){s.call(this),this.game=t,this.jsonCache=t.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,t.events.on(n.BLUR,this.onGameBlur,this),t.events.on(n.FOCUS,this.onGameFocus,this),t.events.on(n.PRE_STEP,this.update,this),t.events.once(n.DESTROY,this.destroy,this)},add:o,addAudioSprite:function(t,s){void 0===s&&(s={});var i=this.add(t,s);for(var n in i.spritemap=this.jsonCache.get(t).spritemap,i.spritemap)if(i.spritemap.hasOwnProperty(n)){var o=e(s),u=i.spritemap[n];o.loop=!!u.hasOwnProperty("loop")&&u.loop,i.addMarker({name:n,start:u.start,duration:u.end-u.start,config:o})}return i},get:function(t){return r(this.sounds,"key",t)},getAll:function(t){return u(this.sounds,"key",t)},play:function(t,e){var s=this.add(t);return s.once(i.COMPLETE,s.destroy,s),e?e.name?(s.addMarker(e),s.play(e.name)):s.play(e):s.play()},playAudioSprite:function(t,e,s){var n=this.addAudioSprite(t);return n.once(i.COMPLETE,n.destroy,n),n.play(e,s)},remove:function(t){var e=this.sounds.indexOf(t);return-1!==e&&(t.destroy(),this.sounds.splice(e,1),!0)},removeAll:function(){this.sounds.forEach(function(t){t.destroy()}),this.sounds.length=0},removeByKey:function(t){for(var e=0,s=this.sounds.length-1;s>=0;s--){var i=this.sounds[s];i.key===t&&(i.destroy(),this.sounds.splice(s,1),e++)}return e},pauseAll:function(){this.forEachActiveSound(function(t){t.pause()}),this.emit(i.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(t){t.resume()}),this.emit(i.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(t){t.stop()}),this.emit(i.STOP_ALL,this)},stopByKey:function(t){var e=0;return this.getAll(t).forEach(function(t){t.stop()&&e++}),e},unlock:o,onBlur:o,onFocus:o,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(t,e){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(i.UNLOCKED,this));for(var s=this.sounds.length-1;s>=0;s--)this.sounds[s].pendingRemove&&this.sounds.splice(s,1);this.sounds.forEach(function(s){s.update(t,e)})},destroy:function(){this.game.events.off(n.BLUR,this.onGameBlur,this),this.game.events.off(n.FOCUS,this.onGameFocus,this),this.game.events.off(n.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(t,e){var s=this;this.sounds.forEach(function(i,n){i&&!i.pendingRemove&&t.call(e||s,i,n,s.sounds)})},setRate:function(t){return this.rate=t,this},rate:{get:function(){return this._rate},set:function(t){this._rate=t,this.forEachActiveSound(function(t){t.calculateRate()}),this.emit(i.GLOBAL_RATE,this,t)}},setDetune:function(t){return this.detune=t,this},detune:{get:function(){return this._detune},set:function(t){this._detune=t,this.forEachActiveSound(function(t){t.calculateRate()}),this.emit(i.GLOBAL_DETUNE,this,t)}}});module.exports=h;
},{"../utils/Class":"Q4x4","../utils/object/Clone":"y1cc","eventemitter3":"Clm3","./events":"joJ3","../core/events":"ZroQ","../utils/NOOP":"vnTW","../utils/array/GetAll":"nQOX","../utils/array/GetFirst":"xQHB"}],"BDpY":[function(require,module,exports) {
var t=require("../utils/Class"),i=require("eventemitter3"),e=require("./events"),s=require("../utils/object/Extend"),n=require("../utils/NOOP"),r=new t({Extends:i,initialize:function(t,e,n){i.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0},this.currentConfig=this.config,this.config=s(this.config,n),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name)&&(this.markers[t.name]?(console.error("addMarker "+t.name+" already exists in Sound"),!1):(t=s(!0,{name:"",start:0,duration:this.totalDuration-(t.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0}},t),this.markers[t.name]=t,!0))},updateMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name)&&(this.markers[t.name]?(this.markers[t.name]=s(!0,this.markers[t.name],t),!0):(console.warn("Audio Marker: "+t.name+" missing in Sound: "+this.key),!1))},removeMarker:function(t){var i=this.markers[t];return i?(this.markers[t]=null,i):null},play:function(t,i){if(void 0===t&&(t=""),"object"==typeof t&&(i=t,t=""),"string"!=typeof t)return!1;if(t){if(!this.markers[t])return console.warn("Marker: "+t+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[t],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=s(this.currentConfig,i),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return!(this.isPaused||!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!(!this.isPaused||this.isPlaying)&&(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!(!this.isPaused&&!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:n,calculateRate:function(){var t=this.currentConfig.detune+this.manager.detune,i=Math.pow(1.0005777895065548,t);this.totalRate=this.currentConfig.rate*this.manager.rate*i},destroy:function(){this.pendingRemove||(this.emit(e.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});module.exports=r;
},{"../utils/Class":"Q4x4","eventemitter3":"Clm3","./events":"joJ3","../utils/object/Extend":"CtVZ","../utils/NOOP":"vnTW"}],"wmfv":[function(require,module,exports) {
var t=require("../BaseSound"),i=require("../../utils/Class"),e=require("../events"),s=require("../../math/Clamp"),r=new i({Extends:t,initialize:function(i,e,s){if(void 0===s&&(s={}),this.tags=i.game.cache.audio.get(e),!this.tags)throw new Error('There is no audio asset with key "'+e+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,t.call(this,i,e,s)},play:function(i,s){return!this.manager.isLocked(this,"play",[i,s])&&(!!t.prototype.play.call(this,i,s)&&(!!this.pickAndPlayAudioTag()&&(this.emit(e.PLAY,this),!0)))},pause:function(){return!this.manager.isLocked(this,"pause")&&(!(this.startTime>0)&&(!!t.prototype.pause.call(this)&&(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(e.PAUSE,this),!0)))},resume:function(){return!this.manager.isLocked(this,"resume")&&(!(this.startTime>0)&&(!!t.prototype.resume.call(this)&&(!!this.pickAndPlayAudioTag()&&(this.emit(e.RESUME,this),!0))))},stop:function(){return!this.manager.isLocked(this,"stop")&&(!!t.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(e.STOP,this),!0))},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var t=this.currentConfig.seek,i=this.currentConfig.delay,e=(this.currentMarker?this.currentMarker.start:0)+t;return this.previousTime=e,this.audio.currentTime=e,this.applyConfig(),0===i?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*i,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var t=0;t<this.tags.length;t++){var i=this.tags[t];if("false"===i.dataset.used)return i.dataset.used="true",this.audio=i,!0}if(!this.manager.override)return!1;var e=[];this.manager.forEachActiveSound(function(t){t.key===this.key&&t.audio&&e.push(t)},this),e.sort(function(t,i){return t.loop===i.loop?i.seek/i.duration-t.seek/t.duration:t.loop?1:-1});var s=e[0];return this.audio=s.audio,s.reset(),s.audio=null,s.startTime=0,s.previousTime=0,!0},playCatchPromise:function(){var t=this.audio.play();t&&t.catch(function(t){console.warn(t)})},stopAndReleaseAudioTag:function(){this.audio.pause(),this.audio.dataset.used="false",this.audio=null,this.startTime=0,this.previousTime=0},reset:function(){t.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(t,i){if(this.isPlaying)if(this.startTime>0)this.startTime<t-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,t-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var s=this.currentMarker?this.currentMarker.start:0,r=s+this.duration,a=this.audio.currentTime;if(this.currentConfig.loop)a>=r-this.manager.loopEndOffset?(this.audio.currentTime=s+Math.max(0,a-r),a=this.audio.currentTime):a<s&&(this.audio.currentTime+=s,a=this.audio.currentTime),a<this.previousTime&&this.emit(e.LOOPED,this);else if(a>=r)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(e.COMPLETE,this);this.previousTime=a}},destroy:function(){t.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=s(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){t.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(t){this.currentConfig.mute=t,this.manager.isLocked(this,"mute",t)||(this.updateMute(),this.emit(e.MUTE,this,t))}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.currentConfig.volume},set:function(t){this.currentConfig.volume=t,this.manager.isLocked(this,"volume",t)||(this.updateVolume(),this.emit(e.VOLUME,this,t))}},setVolume:function(t){return this.volume=t,this},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.manager.isLocked(this,e.RATE,t)||(this.calculateRate(),this.emit(e.RATE,this,t))}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.manager.isLocked(this,e.DETUNE,t)||(this.calculateRate(),this.emit(e.DETUNE,this,t))}},setDetune:function(t){return this.detune=t,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.isLocked(this,"seek",t)||this.startTime>0||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.isPlaying?(this.previousTime=t,this.audio.currentTime=t):this.isPaused&&(this.currentConfig.seek=t),this.emit(e.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.manager.isLocked(this,"loop",t)||(this.audio&&(this.audio.loop=t),this.emit(e.LOOP,this,t))}},setLoop:function(t){return this.loop=t,this}});module.exports=r;
},{"../BaseSound":"BDpY","../../utils/Class":"Q4x4","../events":"joJ3","../../math/Clamp":"dPkx"}],"CmN3":[function(require,module,exports) {
var t=require("../BaseSoundManager"),e=require("../../utils/Class"),n=require("../events"),o=require("./HTML5AudioSound"),u=new e({Extends:t,initialize:function(e){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,t.call(this,e)},add:function(t,e){var n=new o(this,t,e);return this.sounds.push(n),n},unlock:function(){this.locked=!1;var t=this;if(this.game.cache.audio.entries.each(function(e,n){for(var o=0;o<n.length;o++)if("true"===n[o].dataset.locked)return t.locked=!0,!1;return!0}),this.locked){var e=!1,o=function(){e=!0},u=function(){if(e)e=!1;else{document.body.removeEventListener("touchmove",o),document.body.removeEventListener("touchend",u);var n=[];if(t.game.cache.audio.entries.each(function(t,e){for(var o=0;o<e.length;o++){var u=e[o];"true"===u.dataset.locked&&n.push(u)}return!0}),0!==n.length){var i=n[n.length-1];i.oncanplaythrough=function(){i.oncanplaythrough=null,n.forEach(function(t){t.dataset.locked="false"}),t.unlocked=!0},n.forEach(function(t){t.load()})}}};this.once(n.UNLOCKED,function(){for(this.forEachActiveSound(function(t){null===t.currentMarker&&0===t.duration&&(t.duration=t.tags[0].duration),t.totalDuration=t.tags[0].duration});this.lockedActionsQueue.length;){var t=this.lockedActionsQueue.shift();t.sound[t.prop].apply?t.sound[t.prop].apply(t.sound,t.value||[]):t.sound[t.prop]=t.value}},this),document.body.addEventListener("touchmove",o,!1),document.body.addEventListener("touchend",u,!1)}},onBlur:function(){this.forEachActiveSound(function(t){t.isPlaying&&(this.onBlurPausedSounds.push(t),t.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(t){t.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){t.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(t,e,n){return"true"===t.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:t,prop:e,value:n}),!0)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return this._mute},set:function(t){this._mute=t,this.forEachActiveSound(function(t){t.updateMute()}),this.emit(n.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this._volume},set:function(t){this._volume=t,this.forEachActiveSound(function(t){t.updateVolume()}),this.emit(n.GLOBAL_VOLUME,this,t)}}});module.exports=u;
},{"../BaseSoundManager":"eyaX","../../utils/Class":"Q4x4","../events":"joJ3","./HTML5AudioSound":"wmfv"}],"DVV6":[function(require,module,exports) {
var e=require("../BaseSound"),t=require("../../utils/Class"),i=require("eventemitter3"),s=require("../../utils/object/Extend"),r=function(){return!1},n=function(){return null},u=function(){return this},o=new t({Extends:i,initialize:function(e,t,r){void 0===r&&(r={}),i.call(this),this.manager=e,this.key=t,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=s({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0},r),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:r,updateMarker:r,removeMarker:n,play:r,pause:r,resume:r,stop:r,destroy:function(){e.prototype.destroy.call(this)},setMute:u,setVolume:u,setRate:u,setDetune:u,setSeek:u,setLoop:u});module.exports=o;
},{"../BaseSound":"BDpY","../../utils/Class":"Q4x4","eventemitter3":"Clm3","../../utils/object/Extend":"CtVZ"}],"DHOV":[function(require,module,exports) {
var e=require("../BaseSoundManager"),t=require("../../utils/Class"),r=require("eventemitter3"),i=require("./NoAudioSound"),u=require("../../utils/NOOP"),o=new t({Extends:r,initialize:function(e){r.call(this),this.game=e,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(e,t){var r=new i(this,e,t);return this.sounds.push(r),r},addAudioSprite:function(e,t){var r=this.add(e,t);return r.spritemap={},r},play:function(e,t){return!1},playAudioSprite:function(e,t,r){return!1},remove:function(t){return e.prototype.remove.call(this,t)},removeByKey:function(t){return e.prototype.removeByKey.call(this,t)},pauseAll:u,resumeAll:u,stopAll:u,update:u,setRate:u,setDetune:u,setMute:u,setVolume:u,forEachActiveSound:function(t,r){e.prototype.forEachActiveSound.call(this,t,r)},destroy:function(){e.prototype.destroy.call(this)}});module.exports=o;
},{"../BaseSoundManager":"eyaX","../../utils/Class":"Q4x4","eventemitter3":"Clm3","./NoAudioSound":"DVV6","../../utils/NOOP":"vnTW"}],"emFm":[function(require,module,exports) {
for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),t=0;t<r.length;t++)e[r.charCodeAt(t)]=t;var a=function(r){var t,a,n,o,A=(r=r.substr(r.indexOf(",")+1)).length,d=.75*A,h=0;"="===r[A-1]&&(d--,"="===r[A-2]&&d--);for(var c=new ArrayBuffer(d),f=new Uint8Array(c),u=0;u<A;u+=4)t=e[r.charCodeAt(u)],a=e[r.charCodeAt(u+1)],n=e[r.charCodeAt(u+2)],o=e[r.charCodeAt(u+3)],f[h++]=t<<2|a>>4,f[h++]=(15&a)<<4|n>>2,f[h++]=(3&n)<<6|63&o;return c};module.exports=a;
},{}],"FWbP":[function(require,module,exports) {
var t=require("../BaseSound"),e=require("../../utils/Class"),i=require("../events"),s=new e({Extends:t,initialize:function(e,i,s){if(void 0===s&&(s={}),this.audioBuffer=e.game.cache.audio.get(i),!this.audioBuffer)throw new Error('There is no audio asset with key "'+i+'" in the audio cache');this.source=null,this.loopSource=null,this.muteNode=e.context.createGain(),this.volumeNode=e.context.createGain(),this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),this.volumeNode.connect(e.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,t.call(this,e,i,s)},play:function(e,s){return!!t.prototype.play.call(this,e,s)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(i.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime)&&(!!t.prototype.pause.call(this)&&(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(i.PAUSE,this),!0))},resume:function(){return!(this.manager.context.currentTime<this.startTime)&&(!!t.prototype.resume.call(this)&&(this.createAndStartBufferSource(),this.emit(i.RESUME,this),!0))},stop:function(){return!!t.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(i.STOP,this),!0)},createAndStartBufferSource:function(){var t=this.currentConfig.seek,e=this.currentConfig.delay,i=this.manager.context.currentTime+e,s=(this.currentMarker?this.currentMarker.start:0)+t,r=this.duration-t;this.playTime=i-t,this.startTime=i,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,i),Math.max(0,s),Math.max(0,r)),this.resetConfig()},createAndStartLoopBufferSource:function(){var t=this.getLoopTime(),e=this.currentMarker?this.currentMarker.start:0,i=this.duration;this.loopTime=t,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,t),Math.max(0,e),Math.max(0,i))},createBufferSource:function(){var t=this,e=this.manager.context.createBufferSource();return e.buffer=this.audioBuffer,e.connect(this.muteNode),e.onended=function(e){e.target===t.source&&(t.currentConfig.loop?t.hasLooped=!0:t.hasEnded=!0)},e},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),t.prototype.applyConfig.call(this)},update:function(e,s){this.hasEnded?(this.hasEnded=!1,t.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(i.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(i.LOOPED,this))},destroy:function(){t.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){t.prototype.calculateRate.call(this);var e=this.manager.context.currentTime;this.source&&"number"==typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,e),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,e)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var t=0,e=0;e<this.rateUpdates.length;e++){t+=((e<this.rateUpdates.length-1?this.rateUpdates[e+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[e].time)*this.rateUpdates[e].rate}return t},getLoopTime:function(){for(var t=0,e=0;e<this.rateUpdates.length-1;e++)t+=(this.rateUpdates[e+1].time-this.rateUpdates[e].time)*this.rateUpdates[e].rate;var i=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+i.time+(this.duration-t)/i.rate},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.calculateRate(),this.emit(i.RATE,this,t)}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.calculateRate(),this.emit(i.DETUNE,this,t)}},setDetune:function(t){return this.detune=t,this},mute:{get:function(){return 0===this.muteNode.gain.value},set:function(t){this.currentConfig.mute=t,this.muteNode.gain.setValueAtTime(t?0:1,0),this.emit(i.MUTE,this,t)}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(t){this.currentConfig.volume=t,this.volumeNode.gain.setValueAtTime(t,0),this.emit(i.VOLUME,this,t)}},setVolume:function(t){return this.volume=t,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.currentConfig.seek=t,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(i.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),t&&this.createAndStartLoopBufferSource()),this.emit(i.LOOP,this,t)}},setLoop:function(t){return this.loop=t,this}});module.exports=s;
},{"../BaseSound":"BDpY","../../utils/Class":"Q4x4","../events":"joJ3"}],"eu9A":[function(require,module,exports) {
var t=require("../../utils/base64/Base64ToArrayBuffer"),e=require("../BaseSoundManager"),n=require("../../utils/Class"),i=require("../events"),o=require("./WebAudioSound"),s=new n({Extends:e,initialize:function(t){this.context=this.createAudioContext(t),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window),e.call(this,t),this.locked&&this.unlock()},createAudioContext:function(t){var e=t.config.audio;return e&&e.context?(e.context.resume(),e.context):new AudioContext},setAudioContext:function(t){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=t,this.masterMuteNode=t.createGain(),this.masterVolumeNode=t.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(t.destination),this.destination=this.masterMuteNode,this},add:function(t,e){var n=new o(this,t,e);return this.sounds.push(n),n},decodeAudio:function(e,n){var o;o=Array.isArray(e)?e:[{key:e,data:n}];for(var s=this.game.cache.audio,r=o.length,u=0;u<o.length;u++){var c=o[u],a=c.key,d=c.data;"string"==typeof d&&(d=t(d));var h=function(t,e){s.add(t,e),this.emit(i.DECODED,t),0===--r&&this.emit(i.DECODED_ALL)}.bind(this,a),m=function(t,e){console.error("Error decoding audio: "+t+" - ",e?e.message:""),0===--r&&this.emit(i.DECODED_ALL)}.bind(this,a);this.context.decodeAudioData(d,h,m)}},unlock:function(){var t=this,e=document.body,n=function n(){t.context&&t.context.resume().then(function(){e.removeEventListener("touchstart",n),e.removeEventListener("touchend",n),e.removeEventListener("click",n),e.removeEventListener("keydown",n),t.unlocked=!0},function(){e.removeEventListener("touchstart",n),e.removeEventListener("touchend",n),e.removeEventListener("click",n),e.removeEventListener("keydown",n)})};e&&(e.addEventListener("touchstart",n,!1),e.addEventListener("touchend",n,!1),e.addEventListener("click",n,!1),e.addEventListener("keydown",n,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){this.locked||this.context.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio&&this.game.config.audio.context)this.context.suspend();else{var t=this;this.context.close().then(function(){t.context=null})}e.prototype.destroy.call(this)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return 0===this.masterMuteNode.gain.value},set:function(t){this.masterMuteNode.gain.setValueAtTime(t?0:1,0),this.emit(i.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(t){this.masterVolumeNode.gain.setValueAtTime(t,0),this.emit(i.GLOBAL_VOLUME,this,t)}}});module.exports=s;
},{"../../utils/base64/Base64ToArrayBuffer":"emFm","../BaseSoundManager":"eyaX","../../utils/Class":"Q4x4","../events":"joJ3","./WebAudioSound":"FWbP"}],"NW4I":[function(require,module,exports) {
var e=require("./html5/HTML5AudioSoundManager"),o=require("./noaudio/NoAudioSoundManager"),u=require("./webaudio/WebAudioSoundManager"),i={create:function(i){var d=i.config.audio,a=i.device.audio;return d&&d.noAudio||!a.webAudio&&!a.audioData?new o(i):!a.webAudio||d&&d.disableWebAudio?new e(i):new u(i)}};module.exports=i;
},{"./html5/HTML5AudioSoundManager":"CmN3","./noaudio/NoAudioSoundManager":"DHOV","./webaudio/WebAudioSoundManager":"eu9A"}],"qRXP":[function(require,module,exports) {
var e=function(e,n,o){return{instance:n,placementID:e,shown:!1,video:o}};module.exports=e;
},{}],"xW3L":[function(require,module,exports) {
var e=function(e){return{score:e.getScore(),scoreFormatted:e.getFormattedScore(),timestamp:e.getTimestamp(),rank:e.getRank(),data:e.getExtraData(),playerName:e.getPlayer().getName(),playerPhotoURL:e.getPlayer().getPhoto(),playerID:e.getPlayer().getID()}};module.exports=e;
},{}],"BEti":[function(require,module,exports) {
var e=require("../../../src/utils/Class"),t=require("eventemitter3"),n=require("./LeaderboardScore"),r=new e({Extends:t,initialize:function(e,n){t.call(this),this.plugin=e,this.ref=n,this.name=n.getName(),this.contextID=n.getContextID(),this.entryCount=0,this.playerScore=null,this.scores=[],this.getEntryCount()},getEntryCount:function(){var e=this;return this.ref.getEntryCountAsync().then(function(t){e.entryCount=t,e.emit("getentrycount",t,e.name)}).catch(function(e){console.warn(e)}),this},setScore:function(e,t){void 0===t&&(t=""),"object"==typeof t&&(t=JSON.stringify(t));var r=this;return this.ref.setScoreAsync(e,t).then(function(e){if(e){var t=n(e);r.playerScore=t,r.emit("setscore",t,r.name)}else r.emit("setscore",null,r.name)}).catch(function(e){console.warn(e)}),this},getPlayerScore:function(){var e=this;return this.ref.getPlayerEntryAsync().then(function(t){if(t){var r=n(t);e.playerScore=r,e.emit("getplayerscore",r,e.name)}else e.emit("getplayerscore",null,e.name)}).catch(function(e){console.warn(e)}),this},getScores:function(e,t){void 0===e&&(e=10),void 0===t&&(t=0);var r=this;return this.ref.getEntriesAsync(e,t).then(function(e){r.scores=[],e.forEach(function(e){r.scores.push(n(e))}),r.emit("getscores",r.scores,r.name)}).catch(function(e){console.warn(e)}),this},getConnectedScores:function(){var e=this;return this.ref.getConnectedPlayerEntriesAsync().then(function(t){e.scores=[],t.forEach(function(t){e.scores.push(n(t))}),e.emit("getconnectedscores",e.scores,e.name)}).catch(function(e){console.warn(e)}),this}});module.exports=r;
},{"../../../src/utils/Class":"Q4x4","eventemitter3":"Clm3","./LeaderboardScore":"xW3L"}],"G1Yi":[function(require,module,exports) {
var e=require("../../../src/utils/object/GetFastValue"),r=function(r){return{title:e(r,"title",""),productID:e(r,"productID",""),description:e(r,"description",""),imageURI:e(r,"imageURI",""),price:e(r,"price",""),priceCurrencyCode:e(r,"priceCurrencyCode","")}};module.exports=r;
},{"../../../src/utils/object/GetFastValue":"xbYy"}],"bdDk":[function(require,module,exports) {
var e=require("../../../src/utils/object/GetFastValue"),r=function(r){return{developerPayload:e(r,"developerPayload",""),paymentID:e(r,"paymentID",""),productID:e(r,"productID",""),purchaseTime:e(r,"purchaseTime",""),purchaseToken:e(r,"purchaseToken",""),signedRequest:e(r,"signedRequest","")}};module.exports=r;
},{"../../../src/utils/object/GetFastValue":"xbYy"}],"UF5h":[function(require,module,exports) {
var t=require("./AdInstance"),e=require("../../../src/utils/Class"),n=require("../../../src/data/DataManager"),s=require("eventemitter3"),a=require("./Leaderboard"),i=require("./Product"),r=require("./Purchase"),c=new e({Extends:s,initialize:function(t){s.call(this),this.game=t,this.data=new n(this),this.on("setdata",this.setDataHandler,this),this.on("changedata",this.changeDataHandler,this),this.hasLoaded=!1,this.dataLocked=!1,this.supportedAPIs=[],this.entryPoint="",this.entryPointData=null,this.contextID=null,this.contextType=null,this.locale=null,this.platform=null,this.version=null,this.playerID=null,this.playerName=null,this.playerPhotoURL=null,this.playerCanSubscribeBot=!1,this.paymentsReady=!1,this.catalog=[],this.purchases=[],this.leaderboards={},this.ads=[]},setDataHandler:function(t,e,n){if(!this.dataLocked){var s={};s[e]=n;var a=this;FBInstant.player.setDataAsync(s).then(function(){a.emit("savedata",s)})}},changeDataHandler:function(t,e,n){if(!this.dataLocked){var s={};s[e]=n;var a=this;FBInstant.player.setDataAsync(s).then(function(){a.emit("savedata",s)})}},showLoadProgress:function(t){return t.load.on("progress",function(t){this.hasLoaded||FBInstant.setLoadingProgress(100*t)},this),t.load.on("complete",function(){this.hasLoaded||(this.hasLoaded=!0,FBInstant.startGameAsync().then(this.gameStartedHandler.bind(this)))},this),this},gameStarted:function(){this.hasLoaded?this.gameStartedHandler():(this.hasLoaded=!0,FBInstant.startGameAsync().then(this.gameStartedHandler.bind(this)))},gameStartedHandler:function(){var t=FBInstant.getSupportedAPIs(),e={},n=function(t){return t[1].toUpperCase()};t.forEach(function(t){t=t.replace(/\../g,n),e[t]=!0}),this.supportedAPIs=e,this.getID(),this.getType(),this.getLocale(),this.getPlatform(),this.getSDKVersion(),this.getPlayerID(),this.getPlayerName(),this.getPlayerPhotoURL();var s=this;FBInstant.onPause(function(){s.emit("pause")}),FBInstant.getEntryPointAsync().then(function(t){s.entryPoint=t,s.entryPointData=FBInstant.getEntryPointData(),s.emit("startgame")}).catch(function(t){console.warn(t)}),this.supportedAPIs.paymentsPurchaseAsync&&FBInstant.payments.onReady(function(){s.paymentsReady=!0}).catch(function(t){console.warn(t)})},checkAPI:function(t){return!!this.supportedAPIs[t]},getID:function(){return!this.contextID&&this.supportedAPIs.contextGetID&&(this.contextID=FBInstant.context.getID()),this.contextID},getType:function(){return!this.contextType&&this.supportedAPIs.contextGetType&&(this.contextType=FBInstant.context.getType()),this.contextType},getLocale:function(){return!this.locale&&this.supportedAPIs.getLocale&&(this.locale=FBInstant.getLocale()),this.locale},getPlatform:function(){return!this.platform&&this.supportedAPIs.getPlatform&&(this.platform=FBInstant.getPlatform()),this.platform},getSDKVersion:function(){return!this.version&&this.supportedAPIs.getSDKVersion&&(this.version=FBInstant.getSDKVersion()),this.version},getPlayerID:function(){return!this.playerID&&this.supportedAPIs.playerGetID&&(this.playerID=FBInstant.player.getID()),this.playerID},getPlayerName:function(){return!this.playerName&&this.supportedAPIs.playerGetName&&(this.playerName=FBInstant.player.getName()),this.playerName},getPlayerPhotoURL:function(){return!this.playerPhotoURL&&this.supportedAPIs.playerGetPhoto&&(this.playerPhotoURL=FBInstant.player.getPhoto()),this.playerPhotoURL},loadPlayerPhoto:function(t,e){return this.playerPhotoURL&&(t.load.setCORS("anonymous"),t.load.image(e,this.playerPhotoURL),t.load.once("filecomplete-image-"+e,function(){this.emit("photocomplete",e)},this),t.load.start()),this},canSubscribeBot:function(){if(this.supportedAPIs.playerCanSubscribeBotAsync){var t=this;FBInstant.player.canSubscribeBotAsync().then(function(){t.playerCanSubscribeBot=!0,t.emit("cansubscribebot")}).catch(function(e){t.emit("cansubscribebotfail",e)})}else this.emit("cansubscribebotfail");return this},subscribeBot:function(){if(this.playerCanSubscribeBot){var t=this;FBInstant.player.subscribeBotAsync().then(function(){t.emit("subscribebot")}).catch(function(e){t.emit("subscribebotfail",e)})}else this.emit("subscribebotfail");return this},getData:function(t){if(!this.checkAPI("playerGetDataAsync"))return this;Array.isArray(t)||(t=[t]);var e=this;return FBInstant.player.getDataAsync(t).then(function(t){for(var n in e.dataLocked=!0,t)e.data.set(n,t[n]);e.dataLocked=!1,e.emit("getdata",t)}),this},saveData:function(t){if(!this.checkAPI("playerSetDataAsync"))return this;var e=this;return FBInstant.player.setDataAsync(t).then(function(){e.emit("savedata",t)}).catch(function(t){e.emit("savedatafail",t)}),this},flushData:function(){if(!this.checkAPI("playerFlushDataAsync"))return this;var t=this;return FBInstant.player.flushDataAsync().then(function(){t.emit("flushdata")}).catch(function(e){t.emit("flushdatafail",e)}),this},getStats:function(t){if(!this.checkAPI("playerGetStatsAsync"))return this;var e=this;return FBInstant.player.getStatsAsync(t).then(function(t){e.emit("getstats",t)}).catch(function(t){e.emit("getstatsfail",t)}),this},saveStats:function(t){if(!this.checkAPI("playerSetStatsAsync"))return this;var e={};for(var n in t)"number"==typeof t[n]&&(e[n]=t[n]);var s=this;return FBInstant.player.setStatsAsync(e).then(function(){s.emit("savestats",e)}).catch(function(t){s.emit("savestatsfail",t)}),this},incStats:function(t){if(!this.checkAPI("playerIncrementStatsAsync"))return this;var e={};for(var n in t)"number"==typeof t[n]&&(e[n]=t[n]);var s=this;return FBInstant.player.incrementStatsAsync(e).then(function(t){s.emit("incstats",t)}).catch(function(t){s.emit("incstatsfail",t)}),this},saveSession:function(t){return this.checkAPI("setSessionData")?(JSON.stringify(t).length<=1e3?FBInstant.setSessionData(t):console.warn("Session data too long. Max 1000 chars."),this):this},openShare:function(t,e,n,s){return this._share("SHARE",t,e,n,s)},openInvite:function(t,e,n,s){return this._share("INVITE",t,e,n,s)},openRequest:function(t,e,n,s){return this._share("REQUEST",t,e,n,s)},openChallenge:function(t,e,n,s){return this._share("CHALLENGE",t,e,n,s)},_share:function(t,e,n,s,a){if(!this.checkAPI("shareAsync"))return this;if(void 0===a&&(a={}),n)var i=this.game.textures.getBase64(n,s);var r={intent:t,image:i,text:e,data:a},c=this;return FBInstant.shareAsync(r).then(function(){c.emit("resume")}),this},isSizeBetween:function(t,e){return this.checkAPI("contextIsSizeBetween")?FBInstant.context.isSizeBetween(t,e):this},switchContext:function(t){if(!this.checkAPI("contextSwitchAsync"))return this;if(t!==this.contextID){var e=this;FBInstant.context.switchAsync(t).then(function(){e.contextID=FBInstant.context.getID(),e.emit("switch",e.contextID)}).catch(function(t){e.emit("switchfail",t)})}return this},chooseContext:function(t){if(!this.checkAPI("contextChooseAsync"))return this;var e=this;return FBInstant.context.chooseAsync(t).then(function(){e.contextID=FBInstant.context.getID(),e.emit("choose",e.contextID)}).catch(function(t){e.emit("choosefail",t)}),this},createContext:function(t){if(!this.checkAPI("contextCreateAsync"))return this;var e=this;return FBInstant.context.createAsync(t).then(function(){e.contextID=FBInstant.context.getID(),e.emit("create",e.contextID)}).catch(function(t){e.emit("createfail",t)}),this},getPlayers:function(){if(!this.checkAPI("playerGetConnectedPlayersAsync"))return this;var t=this;return FBInstant.player.getConnectedPlayersAsync().then(function(e){t.emit("players",e)}).catch(function(e){t.emit("playersfail",e)}),this},getCatalog:function(){if(!this.paymentsReady)return this;var t=this,e=this.catalog;return FBInstant.payments.getCatalogAsync().then(function(n){e=[],n.forEach(function(t){e.push(i(t))}),t.emit("getcatalog",e)}).catch(function(e){t.emit("getcatalogfail",e)}),this},getProduct:function(t){for(var e=0;e<this.catalog.length;e++)if(this.catalog[e].productID===t)return this.catalog[e];return null},purchase:function(t,e){if(!this.paymentsReady)return this;var n={productID:t};e&&(n.developerPayload=e);var s=this;return FBInstant.payments.purchaseAsync(n).then(function(t){var e=r(t);s.emit("purchase",e)}).catch(function(t){s.emit("purchasefail",t)}),this},getPurchases:function(){if(!this.paymentsReady)return this;var t=this,e=this.purchases;return FBInstant.payments.getPurchasesAsync().then(function(n){e=[],n.forEach(function(t){e.push(r(t))}),t.emit("getpurchases",e)}).catch(function(e){t.emit("getpurchasesfail",e)}),this},consumePurchase:function(t){if(!this.paymentsReady)return this;var e=this;return FBInstant.payments.consumePurchaseAsync(t).then(function(){e.emit("consumepurchase",t)}).catch(function(t){e.emit("consumepurchasefail",t)}),this},update:function(t,e,n,s,a,i){return this._update("CUSTOM",t,e,n,s,a,i)},updateLeaderboard:function(t,e,n,s,a,i){return this._update("LEADERBOARD",t,e,n,s,a,i)},_update:function(t,e,n,s,a,i,r){if(!this.checkAPI("shareAsync"))return this;if(void 0===e&&(e=""),"string"==typeof n&&(n={default:n}),void 0===r&&(r={}),s)var c=this.game.textures.getBase64(s,a);var o={action:t,cta:e,image:c,text:n,template:i,data:r,strategy:"IMMEDIATE",notification:"NO_PUSH"},h=this;return FBInstant.updateAsync(o).then(function(){h.emit("update")}).catch(function(t){h.emit("updatefail",t)}),this},switchGame:function(t,e){if(!this.checkAPI("switchGameAsync"))return this;if(e&&JSON.stringify(e).length>1e3)return console.warn("Switch Game data too long. Max 1000 chars."),this;var n=this;return FBInstant.switchGameAsync(t,e).then(function(){n.emit("switchgame",t)}).catch(function(t){n.emit("switchgamefail",t)}),this},createShortcut:function(){var t=this;return FBInstant.canCreateShortcutAsync().then(function(e){e&&FBInstant.createShortcutAsync().then(function(){t.emit("shortcutcreated")}).catch(function(e){t.emit("shortcutfailed",e)})}),this},quit:function(){FBInstant.quit()},log:function(t,e,n){return this.checkAPI("logEvent")?(void 0===n&&(n={}),t.length>=2&&t.length<=40&&FBInstant.logEvent(t,parseFloat(e),n),this):this},preloadAds:function(e){if(!this.checkAPI("getInterstitialAdAsync"))return this;var n;Array.isArray(e)||(e=[e]);var s=this,a=0;for(n=0;n<this.ads.length;n++)this.ads[n].shown||a++;if(a+e.length>=3)return console.warn("Too many AdInstances. Show an ad before loading more"),this;for(n=0;n<e.length;n++){var i,r=e[n];FBInstant.getInterstitialAdAsync(r).then(function(t){return i=t,t.loadAsync()}).then(function(){var e=t(r,i,!1);s.ads.push(e),s.emit("adloaded",e)}).catch(function(t){"ADS_NO_FILL"===t.code?s.emit("adsnofill",r):"ADS_FREQUENT_LOAD"===t.code?s.emit("adsfrequentload",r):console.warn(t)})}return this},preloadVideoAds:function(e){if(!this.checkAPI("getRewardedVideoAsync"))return this;var n;Array.isArray(e)||(e=[e]);var s=this,a=0;for(n=0;n<this.ads.length;n++)this.ads[n].shown||a++;if(a+e.length>=3)return console.warn("Too many AdInstances. Show an ad before loading more"),this;for(n=0;n<e.length;n++){var i,r=e[n];FBInstant.getRewardedVideoAsync(r).then(function(t){return i=t,t.loadAsync()}).then(function(){var e=t(r,i,!0);s.ads.push(e),s.emit("adloaded",e)}).catch(function(t){"ADS_NO_FILL"===t.code?s.emit("adsnofill",r):"ADS_FREQUENT_LOAD"===t.code?s.emit("adsfrequentload",r):console.warn(t)})}return this},showAd:function(t){for(var e=this,n=0;n<this.ads.length;n++){var s=this.ads[n];if(s.placementID===t&&!s.shown){s.instance.showAsync().then(function(){s.shown=!0,e.emit("adfinished",s)}).catch(function(t){"ADS_NOT_LOADED"===t.code?e.emit("adsnotloaded",s):"RATE_LIMITED"===t.code&&e.emit("adratelimited",s),e.emit("adshowerror",t,s)});break}}return this},showVideo:function(t){for(var e=this,n=0;n<this.ads.length;n++){var s=this.ads[n];if(s.placementID===t&&s.video&&!s.shown){s.instance.showAsync().then(function(){s.shown=!0,e.emit("adfinished",s)}).catch(function(t){"ADS_NOT_LOADED"===t.code?e.emit("adsnotloaded",s):"RATE_LIMITED"===t.code&&e.emit("adratelimited",s),e.emit("adshowerror",t,s)});break}}return this},matchPlayer:function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=!1),!this.checkAPI("matchPlayerAsync"))return this;var n=this;return FBInstant.matchPlayerAsync(t,e).then(function(){n.getID(),n.getType(),n.emit("matchplayer",n.contextID,n.contextType)}),this},getLeaderboard:function(t){if(!this.checkAPI("getLeaderboardAsync"))return this;var e=this;return FBInstant.getLeaderboardAsync(t).then(function(n){var s=new a(e,n);e.leaderboards[t]=s,e.emit("getleaderboard",s)}).catch(function(t){console.warn(t)}),this},destroy:function(){FBInstant.quit(),this.data.destroy(),this.removeAllListeners(),this.catalog=[],this.purchases=[],this.leaderboards=[],this.ads=[],this.game=null}});module.exports=c;
},{"./AdInstance":"qRXP","../../../src/utils/Class":"Q4x4","../../../src/data/DataManager":"SKdT","eventemitter3":"Clm3","./Leaderboard":"BEti","./Product":"G1Yi","./Purchase":"bdDk"}],"b9L8":[function(require,module,exports) {
var e=require("../dom/AddToDOM"),t=require("../animations/AnimationManager"),i=require("../cache/CacheManager"),s=require("../display/canvas/CanvasPool"),n=require("../utils/Class"),r=require("./Config"),o=require("../dom/CreateDOMContainer"),h=require("./CreateRenderer"),a=require("../data/DataManager"),u=require("./DebugHeader"),c=require("../device"),d=require("../dom/DOMContentLoaded"),l=require("eventemitter3"),m=require("./events"),p=require("../input/InputManager"),g=require("../plugins/PluginCache"),v=require("../plugins/PluginManager"),f=require("../scale/ScaleManager"),E=require("../scene/SceneManager"),R=require("../textures/events"),q=require("../textures/TextureManager"),C=require("./TimeStep"),D=require("./VisibilityHandler"),S=require("../sound/SoundManagerCreator"),P=require("../../plugins/fbinstant/src/FacebookInstantGamesPlugin"),y=new n({initialize:function(e){this.config=new r(e),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new l,this.anims=new t(this),this.textures=new q(this),this.cache=new i(this),this.registry=new a(this),this.input=new p(this,this.config),this.scene=new E(this,this.config.sceneConfig),this.device=c,this.scale=new f(this,this.config),this.sound=null,this.sound=S.create(this),this.loop=new C(this,this.config.fps),this.plugins=new v(this,this.config),this.facebook=new P(this),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,d(this.boot.bind(this))},boot:function(){g.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),h(this),o(this),u(this),e(this.canvas,this.config.parent),this.textures.once(R.READY,this.texturesReady,this),this.events.emit(m.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(m.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),D(this);var e=this.events;e.on(m.HIDDEN,this.onHidden,this),e.on(m.VISIBLE,this.onVisible,this),e.on(m.BLUR,this.onBlur,this),e.on(m.FOCUS,this.onFocus,this)},step:function(e,t){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(m.PRE_STEP,e,t),i.emit(m.STEP,e,t),this.scene.update(e,t),i.emit(m.POST_STEP,e,t);var s=this.renderer;s.preRender(),i.emit(m.PRE_RENDER,s,e,t),this.scene.render(s),s.postRender(),i.emit(m.POST_RENDER,s,e,t)},headlessStep:function(e,t){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(m.PRE_STEP,e,t),i.emit(m.STEP,e,t),this.scene.update(e,t),i.emit(m.POST_STEP,e,t),i.emit(m.PRE_RENDER),i.emit(m.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(m.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(m.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(e,t){void 0===t&&(t=!1),this.pendingDestroy=!0,this.removeCanvas=e,this.noReturn=t},runDestroy:function(){this.scene.destroy(),this.events.emit(m.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(s.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});module.exports=y;
},{"../dom/AddToDOM":"SMiB","../animations/AnimationManager":"t0IG","../cache/CacheManager":"geKa","../display/canvas/CanvasPool":"Brmu","../utils/Class":"Q4x4","./Config":"A458","../dom/CreateDOMContainer":"Beyf","./CreateRenderer":"eb4K","../data/DataManager":"SKdT","./DebugHeader":"hD4h","../device":"lb0S","../dom/DOMContentLoaded":"h3cQ","eventemitter3":"Clm3","./events":"ZroQ","../input/InputManager":"hfaV","../plugins/PluginCache":"vXV4","../plugins/PluginManager":"CwAX","../scale/ScaleManager":"UoJ6","../scene/SceneManager":"nhQn","../textures/events":"KB6D","../textures/TextureManager":"xZ5N","./TimeStep":"ncFP","./VisibilityHandler":"kmxn","../sound/SoundManagerCreator":"NW4I","../../plugins/fbinstant/src/FacebookInstantGamesPlugin":"UF5h"}],"sPYe":[function(require,module,exports) {
var r=function(r){if(!Array.isArray(r)||r.length<2||!Array.isArray(r[0]))return!1;for(var e=r[0].length,n=1;n<r.length;n++)if(r[n].length!==e)return!1;return!0};module.exports=r;
},{}],"ml4v":[function(require,module,exports) {
var r=require("../../string/Pad"),e=require("./CheckMatrix"),n=function(n){var t="";if(!e(n))return t;for(var i=0;i<n.length;i++){for(var a=0;a<n[i].length;a++){var g=n[i][a].toString();t+="undefined"!==g?r(g,2):"?",a<n[i].length-1&&(t+=" |")}if(i<n.length-1){t+="\n";for(var f=0;f<n[i].length;f++)t+="---",f<n[i].length-1&&(t+="+");t+="\n"}}return t};module.exports=n;
},{"../../string/Pad":"KR4z","./CheckMatrix":"sPYe"}],"uCsn":[function(require,module,exports) {
var e=function(e){return e.reverse()};module.exports=e;
},{}],"uZq0":[function(require,module,exports) {
var r=function(r){for(var e=0;e<r.length;e++)r[e].reverse();return r};module.exports=r;
},{}],"OhBD":[function(require,module,exports) {
var r=function(r){for(var e=r.length,n=r[0].length,a=new Array(n),o=0;o<n;o++){a[o]=new Array(e);for(var t=e-1;t>-1;t--)a[o][t]=r[t][o]}return a};module.exports=r;
},{}],"izbi":[function(require,module,exports) {
var e=require("./CheckMatrix"),r=require("./TransposeMatrix"),t=function(t,i){if(void 0===i&&(i=90),!e(t))return null;if("string"!=typeof i&&(i=(i%360+360)%360),90===i||-270===i||"rotateLeft"===i)(t=r(t)).reverse();else if(-90===i||270===i||"rotateRight"===i)t.reverse(),t=r(t);else if(180===Math.abs(i)||"rotate180"===i){for(var s=0;s<t.length;s++)t[s].reverse();t.reverse()}return t};module.exports=t;
},{"./CheckMatrix":"sPYe","./TransposeMatrix":"OhBD"}],"U6Dv":[function(require,module,exports) {
var r=require("./RotateMatrix"),e=function(e){return r(e,180)};module.exports=e;
},{"./RotateMatrix":"izbi"}],"T2CY":[function(require,module,exports) {
var r=require("./RotateMatrix"),e=function(e){return r(e,90)};module.exports=e;
},{"./RotateMatrix":"izbi"}],"uP9M":[function(require,module,exports) {
var r=require("./RotateMatrix"),e=function(e){return r(e,-90)};module.exports=e;
},{"./RotateMatrix":"izbi"}],"s9lG":[function(require,module,exports) {
module.exports={CheckMatrix:require("./CheckMatrix"),MatrixToString:require("./MatrixToString"),ReverseColumns:require("./ReverseColumns"),ReverseRows:require("./ReverseRows"),Rotate180:require("./Rotate180"),RotateLeft:require("./RotateLeft"),RotateMatrix:require("./RotateMatrix"),RotateRight:require("./RotateRight"),TransposeMatrix:require("./TransposeMatrix")};
},{"./CheckMatrix":"sPYe","./MatrixToString":"ml4v","./ReverseColumns":"uCsn","./ReverseRows":"uZq0","./Rotate180":"U6Dv","./RotateLeft":"T2CY","./RotateMatrix":"izbi","./RotateRight":"uP9M","./TransposeMatrix":"OhBD"}],"j0qv":[function(require,module,exports) {
var r=function(r,l,n,e,i){if(void 0===i&&(i=r),n>0){var u=n-r.length;if(u<=0)return null}if(!Array.isArray(l))return-1===r.indexOf(l)?(r.push(l),e&&e.call(i,l),l):null;for(var a=l.length-1;a>=0;)-1!==r.indexOf(l[a])&&l.splice(a,1),a--;if(0===(a=l.length))return null;n>0&&a>u&&(l.splice(u),a=u);for(var f=0;f<a;f++){var t=l[f];r.push(t),e&&e.call(i,t)}return l};module.exports=r;
},{}],"Wema":[function(require,module,exports) {
var r=function(r,l,e,n,i,a){if(void 0===e&&(e=0),void 0===a&&(a=r),n>0){var f=n-r.length;if(f<=0)return null}if(!Array.isArray(l))return-1===r.indexOf(l)?(r.splice(e,0,l),i&&i.call(a,l),l):null;for(var t=l.length-1;t>=0;)-1!==r.indexOf(l[t])&&l.pop(),t--;if(0===(t=l.length))return null;n>0&&t>f&&(l.splice(f),t=f);for(var u=t-1;u>=0;u--){var o=l[u];r.splice(e,0,o),i&&i.call(a,o)}return l};module.exports=r;
},{}],"GANc":[function(require,module,exports) {
var e=function(e,n){var r=e.indexOf(n);return-1!==r&&r<e.length&&(e.splice(r,1),e.push(n)),n};module.exports=e;
},{}],"mpNu":[function(require,module,exports) {
var r=require("./SafeRange"),e=function(e,o,a,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);var v=0;if(r(e,i,n))for(var f=i;f<n;f++){e[f][o]===a&&v++}return v};module.exports=e;
},{"./SafeRange":"k2LY"}],"NGwn":[function(require,module,exports) {
var r=function(r,l,n){var e,o=[null];for(e=3;e<arguments.length;e++)o.push(arguments[e]);for(e=0;e<r.length;e++)o[0]=r[e],l.apply(n,o);return r};module.exports=r;
},{}],"COOa":[function(require,module,exports) {
var e=require("./SafeRange"),r=function(r,n,o,l,u){if(void 0===l&&(l=0),void 0===u&&(u=r.length),e(r,l,u)){var a,f=[null];for(a=5;a<arguments.length;a++)f.push(arguments[a]);for(a=l;a<u;a++)f[0]=r[a],n.apply(o,f)}return r};module.exports=r;
},{"./SafeRange":"k2LY"}],"kyCN":[function(require,module,exports) {
var o=function(o,r,n){void 0===r&&(r=0),void 0===n&&(n=o.length);var t=r+Math.floor(Math.random()*n);return void 0===o[t]?null:o[t]};module.exports=o;
},{}],"fFv8":[function(require,module,exports) {
var r=function(r,e){var n=r.indexOf(e);if(n>0){var f=r[n-1],i=r.indexOf(f);r[n]=f,r[i]=e}return r};module.exports=r;
},{}],"m9jP":[function(require,module,exports) {
var e=function(e,r,n){var o=e.indexOf(r);if(-1===o||n<0||n>=e.length)throw new Error("Supplied index out of bounds");return o!==n&&(e.splice(o,1),e.splice(n,0,r)),r};module.exports=e;
},{}],"rw3f":[function(require,module,exports) {
var e=function(e,n){var r=e.indexOf(n);if(-1!==r&&r<e.length-1){var f=e[r+1],i=e.indexOf(f);e[r]=f,e[i]=n}return e};module.exports=e;
},{}],"dxb8":[function(require,module,exports) {
var r=function(r,t,o,n){for(var e=[],u=r;u<=t;u++)if(o||n){var a=o?o+u.toString():u.toString();n&&(a=a.concat(n)),e.push(a)}else e.push(u);return e};module.exports=r;
},{}],"rXSC":[function(require,module,exports) {
var o=require("../../math/RoundAwayFromZero"),r=function(r,u,a){void 0===r&&(r=0),void 0===u&&(u=null),void 0===a&&(a=1),null===u&&(u=r,r=0);for(var e=[],n=Math.max(o((u-r)/(a||1)),0),d=0;d<n;d++)e.push(r),r+=a;return e};module.exports=r;
},{"../../math/RoundAwayFromZero":"F5Vn"}],"zxF2":[function(require,module,exports) {
function o(o,r,t){var a=o[r];o[r]=o[t],o[t]=a}function r(o,r){return o<r?-1:o>r?1:0}var t=function(a,f,n,h,i){for(void 0===n&&(n=0),void 0===h&&(h=a.length-1),void 0===i&&(i=r);h>n;){if(h-n>600){var v=h-n+1,M=f-n+1,e=Math.log(v),l=.5*Math.exp(2*e/3),u=.5*Math.sqrt(e*l*(v-l)/v)*(M-v/2<0?-1:1),d=Math.max(n,Math.floor(f-M*l/v+u)),c=Math.min(h,Math.floor(f+(v-M)*l/v+u));t(a,f,d,c,i)}var m=a[f],x=n,g=h;for(o(a,n,f),i(a[h],m)>0&&o(a,n,h);x<g;){for(o(a,x,g),x++,g--;i(a[x],m)<0;)x++;for(;i(a[g],m)>0;)g--}0===i(a[n],m)?o(a,n,g):o(a,++g,h),g<=f&&(n=g+1),f<=g&&(h=g-1)}};module.exports=t;
},{}],"VtWV":[function(require,module,exports) {
var r=require("../object/GetValue"),e=require("./Shuffle"),a=function(r,e,a){for(var t=[],o=0;o<r.length;o++)for(var n=0;n<e.length;n++)for(var f=0;f<a;f++)t.push({a:r[o],b:e[n]});return t},t=function(t,o,n){var f=r(n,"max",0),l=r(n,"qty",1),u=r(n,"random",!1),c=r(n,"randomB",!1),v=r(n,"repeat",0),i=r(n,"yoyo",!1),h=[];if(c&&e(o),-1===v)if(0===f)v=0;else{var s=t.length*o.length*l;i&&(s*=2),v=Math.ceil(f/s)}for(var g=0;g<=v;g++){var m=a(t,o,l);u&&e(m),h=h.concat(m),i&&(m.reverse(),h=h.concat(m))}return f&&h.splice(f),h};module.exports=t;
},{"../object/GetValue":"FWyS","./Shuffle":"NCMc"}],"rG29":[function(require,module,exports) {
var r=require("./SpliceOne"),e=function(e,o,n,t){if(void 0===t&&(t=e),o<0||o>e.length-1)throw new Error("Index out of bounds");var u=r(e,o);return n&&n.call(t,u),u};module.exports=e;
},{"./SpliceOne":"kAni"}],"Qgm1":[function(require,module,exports) {
var r=require("./SafeRange"),e=function(e,i,a,n,o){if(void 0===i&&(i=0),void 0===a&&(a=e.length),void 0===o&&(o=e),r(e,i,a)){var v=a-i,l=e.splice(i,v);if(n)for(var t=0;t<l.length;t++){var f=l[t];n.call(o,f)}return l}return[]};module.exports=e;
},{"./SafeRange":"k2LY"}],"yJn4":[function(require,module,exports) {
var r=require("./SpliceOne"),e=function(e,o,n){void 0===o&&(o=0),void 0===n&&(n=e.length);var t=o+Math.floor(Math.random()*n);return r(e,t)};module.exports=e;
},{"./SpliceOne":"kAni"}],"TFYY":[function(require,module,exports) {
var e=function(e,n,r){var d=e.indexOf(n),f=e.indexOf(r);return-1!==d&&-1===f&&(e[d]=r,!0)};module.exports=e;
},{}],"nKba":[function(require,module,exports) {
var e=function(e,n){var r=e.indexOf(n);return-1!==r&&r>0&&(e.splice(r,1),e.unshift(n)),n};module.exports=e;
},{}],"gaRd":[function(require,module,exports) {
var r=require("./SafeRange"),e=function(e,o,a,n,i){if(void 0===n&&(n=0),void 0===i&&(i=e.length),r(e,n,i))for(var t=n;t<i;t++){var v=e[t];v.hasOwnProperty(o)&&(v[o]=a)}return e};module.exports=e;
},{"./SafeRange":"k2LY"}],"G8Dq":[function(require,module,exports) {
!function(){var n=function(n,r){return e(n.slice(),r)};function e(n,e){"function"!=typeof e&&(e=function(n,e){return String(n).localeCompare(e)});var t=n.length;if(t<=1)return n;for(var o=new Array(t),f=1;f<t;f*=2){r(n,e,f,o);var i=n;n=o,o=i}return n}n.inplace=function(n,t){var o=e(n,t);return o!==n&&r(o,null,n.length,n),n};var r=function(n,e,r,t){var o,f,i,u,l,a=n.length,c=0,v=2*r;for(o=0;o<a;o+=v)for(i=(f=o+r)+r,f>a&&(f=a),i>a&&(i=a),u=o,l=f;;)if(u<f&&l<i)e(n[u],n[l])<=0?t[c++]=n[u++]:t[c++]=n[l++];else if(u<f)t[c++]=n[u++];else{if(!(l<i))break;t[c++]=n[l++]}};"undefined"!=typeof module?module.exports=n:window.stable=n}();
},{}],"BogR":[function(require,module,exports) {
var e=function(e,r,t){if(r!==t){var i=e.indexOf(r),n=e.indexOf(t);if(i<0||n<0)throw new Error("Supplied items must be elements of the same array");return e[i]=t,e[n]=r,e}};module.exports=e;
},{}],"BpeF":[function(require,module,exports) {
module.exports={Matrix:require("./matrix"),Add:require("./Add"),AddAt:require("./AddAt"),BringToTop:require("./BringToTop"),CountAllMatching:require("./CountAllMatching"),Each:require("./Each"),EachInRange:require("./EachInRange"),FindClosestInSorted:require("./FindClosestInSorted"),GetAll:require("./GetAll"),GetFirst:require("./GetFirst"),GetRandom:require("./GetRandom"),MoveDown:require("./MoveDown"),MoveTo:require("./MoveTo"),MoveUp:require("./MoveUp"),NumberArray:require("./NumberArray"),NumberArrayStep:require("./NumberArrayStep"),QuickSelect:require("./QuickSelect"),Range:require("./Range"),Remove:require("./Remove"),RemoveAt:require("./RemoveAt"),RemoveBetween:require("./RemoveBetween"),RemoveRandomElement:require("./RemoveRandomElement"),Replace:require("./Replace"),RotateLeft:require("./RotateLeft"),RotateRight:require("./RotateRight"),SafeRange:require("./SafeRange"),SendToBack:require("./SendToBack"),SetAll:require("./SetAll"),Shuffle:require("./Shuffle"),SpliceOne:require("./SpliceOne"),StableSort:require("./StableSort"),Swap:require("./Swap")};
},{"./matrix":"s9lG","./Add":"j0qv","./AddAt":"Wema","./BringToTop":"GANc","./CountAllMatching":"mpNu","./Each":"NGwn","./EachInRange":"COOa","./FindClosestInSorted":"AbTG","./GetAll":"nQOX","./GetFirst":"xQHB","./GetRandom":"kyCN","./MoveDown":"fFv8","./MoveTo":"m9jP","./MoveUp":"rw3f","./NumberArray":"dxb8","./NumberArrayStep":"rXSC","./QuickSelect":"zxF2","./Range":"VtWV","./Remove":"WDn7","./RemoveAt":"rG29","./RemoveBetween":"Qgm1","./RemoveRandomElement":"yJn4","./Replace":"TFYY","./RotateLeft":"Obvy","./RotateRight":"lezk","./SafeRange":"k2LY","./SendToBack":"nKba","./SetAll":"gaRd","./Shuffle":"NCMc","./SpliceOne":"kAni","./StableSort":"G8Dq","./Swap":"BogR"}],"qQUc":[function(require,module,exports) {
var t=require("../utils/array"),i=require("../utils/Class"),s=require("../utils/NOOP"),n=require("../utils/array/StableSort"),e=new i({initialize:function(t){this.parent=t,this.list=[],this.position=0,this.addCallback=s,this.removeCallback=s,this._sortKey=""},add:function(i,s){return s?t.Add(this.list,i):t.Add(this.list,i,0,this.addCallback,this)},addAt:function(i,s,n){return n?t.AddAt(this.list,i,s):t.AddAt(this.list,i,s,0,this.addCallback,this)},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,i){return t?(void 0===i&&(i=function(i,s){return i[t]-s[t]}),n.inplace(this.list,i),this):this},getByName:function(i){return t.GetFirst(this.list,"name",i)},getRandom:function(i,s){return t.GetRandom(this.list,i,s)},getFirst:function(i,s,n,e){return t.GetFirst(this.list,i,s,n,e)},getAll:function(i,s,n,e){return t.GetAll(this.list,i,s,n,e)},count:function(i,s){return t.CountAllMatching(this.list,i,s)},swap:function(i,s){t.Swap(this.list,i,s)},moveTo:function(i,s){return t.MoveTo(this.list,i,s)},remove:function(i,s){return s?t.Remove(this.list,i):t.Remove(this.list,i,this.removeCallback,this)},removeAt:function(i,s){return s?t.RemoveAt(this.list,i):t.RemoveAt(this.list,i,this.removeCallback,this)},removeBetween:function(i,s,n){return n?t.RemoveBetween(this.list,i,s):t.RemoveBetween(this.list,i,s,this.removeCallback,this)},removeAll:function(t){for(var i=this.list.length;i--;)this.remove(this.list[i],t);return this},bringToTop:function(i){return t.BringToTop(this.list,i)},sendToBack:function(i){return t.SendToBack(this.list,i)},moveUp:function(i){return t.MoveUp(this.list,i),i},moveDown:function(i){return t.MoveDown(this.list,i),i},reverse:function(){return this.list.reverse(),this},shuffle:function(){return t.Shuffle(this.list),this},replace:function(i,s){return t.Replace(this.list,i,s)},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(i,s,n,e){return t.SetAll(this.list,i,s,n,e),this},each:function(t,i){for(var s=[null],n=2;n<arguments.length;n++)s.push(arguments[n]);for(n=0;n<this.list.length;n++)s[0]=this.list[n],t.apply(i,s)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});module.exports=e;
},{"../utils/array":"BpeF","../utils/Class":"Q4x4","../utils/NOOP":"vnTW","../utils/array/StableSort":"G8Dq"}],"V3Gn":[function(require,module,exports) {
var t=require("../utils/Class"),s=require("../structs/List"),e=require("../plugins/PluginCache"),i=require("../scene/events"),n=require("../utils/array/StableSort"),h=new t({Extends:s,initialize:function(t){s.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,t.sys.events.once(i.BOOT,this.boot,this),t.sys.events.on(i.START,this.start,this)},boot:function(){this.systems.events.once(i.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(i.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(n.inplace(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,s){return t._depth-s._depth},getChildren:function(){return this.list},shutdown:function(){for(var t=this.list.length;t--;)this.list[t].destroy(!0);this.list.length=0,this.systems.events.off(i.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(i.START,this.start,this),this.scene=null,this.systems=null}});e.register("DisplayList",h,"displayList"),module.exports=h;
},{"../utils/Class":"Q4x4","../structs/List":"qQUc","../plugins/PluginCache":"vXV4","../scene/events":"Zlz3","../utils/array/StableSort":"G8Dq"}],"Fhss":[function(require,module,exports) {
module.exports={PROCESS_QUEUE_ADD:require("./PROCESS_QUEUE_ADD_EVENT"),PROCESS_QUEUE_REMOVE:require("./PROCESS_QUEUE_REMOVE_EVENT")};
},{"./PROCESS_QUEUE_ADD_EVENT":"S3Vj","./PROCESS_QUEUE_REMOVE_EVENT":"fEBO"}],"mKHj":[function(require,module,exports) {
var t=require("../utils/Class"),e=require("eventemitter3"),i=require("./events"),s=new t({Extends:e,initialize:function(){e.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0},add:function(t){return this._pending.push(t),this._toProcess++,t},remove:function(t){return this._destroy.push(t),this._toProcess++,t},removeAll:function(){for(var t=this._active,e=this._destroy,i=t.length;i--;)e.push(t[i]),this._toProcess++;return this},update:function(){if(0===this._toProcess)return this._active;var t,e,s=this._destroy,n=this._active;for(t=0;t<s.length;t++){e=s[t];var r=n.indexOf(e);-1!==r&&(n.splice(r,1),this.emit(i.REMOVE,e))}for(s.length=0,s=this._pending,t=0;t<s.length;t++)e=s[t],this._active.push(e),this.emit(i.ADD,e);return s.length=0,this._toProcess=0,this._active},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});module.exports=s;
},{"../utils/Class":"Q4x4","eventemitter3":"Clm3","./events":"Fhss"}],"eGlM":[function(require,module,exports) {
var s=require("../utils/Class"),t=require("../structs/ProcessQueue"),e=require("../plugins/PluginCache"),i=require("../scene/events"),n=new s({Extends:t,initialize:function(s){t.call(this),this.scene=s,this.systems=s.sys,s.sys.events.once(i.BOOT,this.boot,this),s.sys.events.on(i.START,this.start,this)},boot:function(){this.systems.events.once(i.DESTROY,this.destroy,this)},start:function(){var s=this.systems.events;s.on(i.PRE_UPDATE,this.update,this),s.on(i.UPDATE,this.sceneUpdate,this),s.once(i.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(s,t){for(var e=this._active,i=e.length,n=0;n<i;n++){var h=e[n];h.active&&h.preUpdate.call(h,s,t)}},shutdown:function(){for(var s=this._active.length;s--;)this._active[s].destroy(!0);for(s=this._pending.length;s--;)this._pending[s].destroy(!0);for(s=this._destroy.length;s--;)this._destroy[s].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var t=this.systems.events;t.off(i.PRE_UPDATE,this.preUpdate,this),t.off(i.UPDATE,this.sceneUpdate,this),t.off(i.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(i.START,this.start,this),this.scene=null,this.systems=null}});e.register("UpdateList",n,"updateList"),module.exports=n;
},{"../utils/Class":"Q4x4","../structs/ProcessQueue":"mKHj","../plugins/PluginCache":"vXV4","../scene/events":"Zlz3"}],"YJ2h":[function(require,module,exports) {
var r=require("../../math"),n=require("./GetValue"),e=function(e,t,a){var u=n(e,t,null);if(null===u)return a;if(Array.isArray(u))return r.RND.pick(u);if("object"==typeof u){if(u.hasOwnProperty("randInt"))return r.RND.integerInRange(u.randInt[0],u.randInt[1]);if(u.hasOwnProperty("randFloat"))return r.RND.realInRange(u.randFloat[0],u.randFloat[1])}else if("function"==typeof u)return u(t);return u};module.exports=e;
},{"../../math":"N0aO","./GetValue":"FWyS"}],"irpS":[function(require,module,exports) {
var l=require("../renderer/BlendModes"),e=require("../utils/object/GetAdvancedValue"),r=function(r,a,t){a.x=e(t,"x",0),a.y=e(t,"y",0),a.depth=e(t,"depth",0),a.flipX=e(t,"flipX",!1),a.flipY=e(t,"flipY",!1);var n=e(t,"scale",null);"number"==typeof n?a.setScale(n):null!==n&&(a.scaleX=e(n,"x",1),a.scaleY=e(n,"y",1));var i=e(t,"scrollFactor",null);"number"==typeof i?a.setScrollFactor(i):null!==i&&(a.scrollFactorX=e(i,"x",1),a.scrollFactorY=e(i,"y",1)),a.rotation=e(t,"rotation",0);var o=e(t,"angle",null);null!==o&&(a.angle=o),a.alpha=e(t,"alpha",1);var s=e(t,"origin",null);if("number"==typeof s)a.setOrigin(s);else if(null!==s){var d=e(s,"x",.5),u=e(s,"y",.5);a.setOrigin(d,u)}return a.blendMode=e(t,"blendMode",l.NORMAL),a.visible=e(t,"visible",!0),e(t,"add",!0)&&r.sys.displayList.add(a),a.preUpdate&&r.sys.updateList.add(a),a};module.exports=r;
},{"../renderer/BlendModes":"XeVZ","../utils/object/GetAdvancedValue":"YJ2h"}],"OsWu":[function(require,module,exports) {
var e=require("../utils/object/GetAdvancedValue"),a=function(a,t){var l=e(t,"anims",null);if(null===l)return a;if("string"==typeof l)a.anims.play(l);else if("object"==typeof l){var y=a.anims,r=e(l,"key",void 0),o=e(l,"startFrame",void 0),i=e(l,"delay",0),s=e(l,"repeat",0),d=e(l,"repeatDelay",0),n=e(l,"yoyo",!1),p=e(l,"play",!1),u=e(l,"delayedPlay",0);y.setDelay(i),y.setRepeat(s),y.setRepeatDelay(d),y.setYoyo(n),p?y.play(r,o):u>0?y.delayedPlay(u,r,o):y.load(r)}return a};module.exports=a;
},{"../utils/object/GetAdvancedValue":"YJ2h"}],"Pi73":[function(require,module,exports) {
var global = arguments[3];
var l=arguments[3],h=function(l,h,r){if(void 0===r)return r={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],scaleX:0,scaleY:0};var n,t,e,i,o=l.text,d=o.length,a=l.maxWidth,u=l.wordWrapCharCode,w=Number.MAX_VALUE,s=Number.MAX_VALUE,x=0,c=0,g=l.fontData.chars,y=l.fontData.lineHeight,f=l.letterSpacing,p=0,v=0,A=0,M=null,X=0,b=0,m=l.fontSize/l.fontData.size,Y=m*l.scaleX,C=m*l.scaleY,O=null,D=0,E=[],L=Number.MAX_VALUE,N=0,U=0,V=0,_=[],k=null;if(a>0){for(n=0;n<d;n++)if(10!==(A=o.charCodeAt(n))){if(M=g[A]){if(null!==O)var z=M.kerning[D];A===u?null!==k&&(_.push({word:k.word,i:k.i,x:k.x*Y,y:k.y*C,w:k.w*Y,h:k.h*C,cr:!1}),k=null):(null===k&&(k={word:"",i:n,x:p,y:v,w:0,h:y,cr:!1}),k.word=k.word.concat(o[n]),k.w+=M.xOffset+M.xAdvance+(void 0!==z?z:0)),p+=M.xAdvance+f,O=M,D=A}}else null!==k&&(_.push({word:k.word,i:k.i,x:k.x*Y,y:k.y*C,w:k.w*Y,h:k.h*C,cr:!0}),k=null),p=0,v+=y,O=null;var S;null!==k&&_.push({word:k.word,i:k.i,x:k.x*Y,y:k.y*C,w:k.w*Y,h:k.h*C,cr:!1}),p=0,v=0,O=null,D=0;var T=0,W=[];for(n=0;n<_.length;n++){var H=_[n],j=H.x,q=H.x+H.w;if(S)T=j-(j-(S.x+S.w)+S.w),S=null;j-T>a||q-T>a?(W.push(H.i-1),H.cr?(W.push(H.i+H.word.length),T=0,S=null):S=H):H.cr&&(W.push(H.i+H.word.length),T=0,S=null)}for(n=W.length-1;n>=0;n--)t=o,e=W[n],i="\n",o=t.substr(0,e)+i+t.substr(e+1);r.wrappedText=o,d=o.length,_=[],k=null}for(n=0;n<d;n++)if(10!==(A=o.charCodeAt(n))){if(M=g[A]){if(X=p,b=v,null!==O){var B=M.kerning[D];X+=void 0!==B?B:0}w>X&&(w=X),s>b&&(s=b);var F=X+M.xAdvance,G=b+y;x<F&&(x=F),c<G&&(c=G),A===u?null!==k&&(_.push({word:k.word,i:k.i,x:k.x*Y,y:k.y*C,w:k.w*Y,h:k.h*C}),k=null):(null===k&&(k={word:"",i:n,x:p,y:v,w:0,h:y}),k.word=k.word.concat(o[n]),k.w+=M.xOffset+M.xAdvance+(void 0!==B?B:0)),p+=M.xAdvance+f,O=M,D=A,V=F*m}}else null!==k&&(_.push({word:k.word,i:k.i,x:k.x*Y,y:k.y*C,w:k.w*Y,h:k.h*C}),k=null),p=0,v+=y,O=null,E[U]=V,V>N&&(N=V),V<L&&(L=V),U++,V=0;null!==k&&_.push({word:k.word,i:k.i,x:k.x*Y,y:k.y*C,w:k.w*Y,h:k.h*C}),E[U]=V,V>N&&(N=V),V<L&&(L=V);var I=r.local,J=r.global,K=r.lines;return I.x=w*m,I.y=s*m,I.width=x*m,I.height=c*m,J.x=l.x-l.displayOriginX+w*Y,J.y=l.y-l.displayOriginY+s*C,J.width=x*Y,J.height=c*C,K.shortest=L,K.longest=N,K.lengths=E,h&&(I.x=Math.round(I.x),I.y=Math.round(I.y),I.width=Math.round(I.width),I.height=Math.round(I.height),J.x=Math.round(J.x),J.y=Math.round(J.y),J.width=Math.round(J.width),J.height=Math.round(J.height),K.shortest=Math.round(L),K.longest=Math.round(N)),r.words=_,r.lines.height=y,r.scaleX=l.scaleX,r.scaleY=l.scaleY,r};module.exports=h;
},{}],"UcRl":[function(require,module,exports) {
function e(e,t){return parseInt(e.getAttribute(t),10)}var t=function(t,r,a,n){void 0===r&&(r=0),void 0===a&&(a=0);var i={},o=t.getElementsByTagName("info")[0],f=t.getElementsByTagName("common")[0];i.font=o.getAttribute("face"),i.size=e(o,"size"),i.lineHeight=e(f,"lineHeight")+a,i.chars={};var h=t.getElementsByTagName("char"),g=void 0!==n&&n.trimmed;if(g)var s=n.height,c=n.width;for(var v=0;v<h.length;v++){var m=h[v],d=e(m,"id"),l=e(m,"x"),y=e(m,"y"),x=e(m,"width"),u=e(m,"height");g&&(l<c&&(c=l),y<s&&(s=y)),i.chars[d]={x:l,y:y,width:x,height:u,centerX:Math.floor(x/2),centerY:Math.floor(u/2),xOffset:e(m,"xoffset"),yOffset:e(m,"yoffset"),xAdvance:e(m,"xadvance")+r,data:{},kerning:{}}}if(g&&0!==s&&0!==c)for(var B in i.chars){var E=i.chars[B];E.x-=n.x,E.y-=n.y}var N=t.getElementsByTagName("kerning");for(v=0;v<N.length;v++){var T=N[v],k=e(T,"first"),w=e(T,"second"),A=e(T,"amount");i.chars[w].kerning[k]=A}return i};module.exports=t;
},{}],"JY62":[function(require,module,exports) {
var e=require("./ParseXMLBitmapFont"),r=function(r,t,a,s,u,m,n){var c=r.sys.textures.getFrame(a,s),i=r.sys.cache.xml.get(u);if(c&&i){var o=e(i,m,n,c);return r.sys.cache.bitmapFont.add(t,{data:o,texture:a,frame:s}),!0}return!1};module.exports=r;
},{"./ParseXMLBitmapFont":"UcRl"}],"GfPP":[function(require,module,exports) {
var t=require("../../../renderer/webgl/Utils"),e=function(e,l,a,i,r){var n=l._text,o=n.length;if(0!==o){var h=this.pipeline;e.setPipeline(h,l);var p=h._tempMatrix1,s=h._tempMatrix2,g=h._tempMatrix3;s.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),p.copyFrom(i.matrix),r?(p.multiplyWithOffset(r,-i.scrollX*l.scrollFactorX,-i.scrollY*l.scrollFactorY),s.e=l.x,s.f=l.y,p.multiply(s,g)):(s.e-=i.scrollX*l.scrollFactorX,s.f-=i.scrollY*l.scrollFactorY,p.multiply(s,g));var d=l.frame,u=d.glTexture,c=d.cutX,f=d.cutY,x=u.width,_=u.height,T=l._isTinted&&l.tintFill,v=t.getTintAppendFloatAlpha(l._tintTL,i.alpha*l._alphaTL),m=t.getTintAppendFloatAlpha(l._tintTR,i.alpha*l._alphaTR),y=t.getTintAppendFloatAlpha(l._tintBL,i.alpha*l._alphaBL),M=t.getTintAppendFloatAlpha(l._tintBR,i.alpha*l._alphaBR);h.setTexture2D(u,0);var X,Y,A=0,F=0,B=0,O=0,R=l._letterSpacing,w=0,L=0,b=0,S=0,z=l.fontData,D=z.chars,P=z.lineHeight,W=l._fontSize/z.size,k=l._align,q=0,C=0,H=l.getTextBounds(!1);l.maxWidth>0&&(o=(n=H.wrappedText).length);var I=l._bounds.lines;1===k?C=(I.longest-I.lengths[0])/2:2===k&&(C=I.longest-I.lengths[0]);for(var Q=i.roundPixels,U=0;U<o;U++)if(10!==(B=n.charCodeAt(U))){if(X=D[B]){w=c+X.x,L=f+X.y,b=X.width,S=X.height;var j=X.xOffset+A,E=X.yOffset+F;if(null!==Y){var G=X.kerning[O];j+=void 0!==G?G:0}if(A+=X.xAdvance+R,Y=X,O=B,0!==b&&0!==S&&32!==B){j*=W,E*=W,j-=l.displayOriginX;var J=w/x,K=L/_,N=(w+b)/x,V=(L+S)/_,Z=(j+=C)+b*W,$=(E-=l.displayOriginY)+S*W,tt=g.getX(j,E),et=g.getY(j,E),lt=g.getX(j,$),at=g.getY(j,$),it=g.getX(Z,$),rt=g.getY(Z,$),nt=g.getX(Z,E),ot=g.getY(Z,E);Q&&(tt=Math.round(tt),et=Math.round(et),lt=Math.round(lt),at=Math.round(at),it=Math.round(it),rt=Math.round(rt),nt=Math.round(nt),ot=Math.round(ot)),h.batchQuad(tt,et,lt,at,it,rt,nt,ot,J,K,N,V,v,m,y,M,T,u,0)}}}else q++,1===k?C=(I.longest-I.lengths[q])/2:2===k&&(C=I.longest-I.lengths[q]),A=0,F+=P,Y=null}};module.exports=e;
},{"../../../renderer/webgl/Utils":"mjFh"}],"Jz6d":[function(require,module,exports) {
var l=function(l,a,r,o,t){var e=o.alpha*r.alpha;if(e<=0)return!1;var s=l._tempMatrix1.copyFromArray(o.matrix.matrix),c=l._tempMatrix2.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),i=l._tempMatrix3;return t?(s.multiplyWithOffset(t,-o.scrollX*r.scrollFactorX,-o.scrollY*r.scrollFactorY),c.e=r.x,c.f=r.y,s.multiply(c,i)):(c.e-=o.scrollX*r.scrollFactorX,c.f-=o.scrollY*r.scrollFactorY,s.multiply(c,i)),a.globalCompositeOperation=l.blendModes[r.blendMode],a.globalAlpha=e,a.save(),i.setToContext(a),a.imageSmoothingEnabled=!(!l.antialias||r.frame&&r.frame.source.scaleMode),!0};module.exports=l;
},{}],"Z5WR":[function(require,module,exports) {
var e=require("../../../renderer/canvas/utils/SetTransform"),t=function(t,n,a,r,l){var s=n._text,i=s.length,o=t.currentContext;if(0!==i&&e(t,o,n,r,l)){var g=n.frame,f=n.fontData.chars,u=n.fontData.lineHeight,d=n._letterSpacing,h=0,c=0,v=0,x=null,m=0,p=0,_=0,y=0,O=0,w=0,D=null,S=0,T=n.frame.source.image,z=g.cutX,A=g.cutY,C=n._fontSize/n.fontData.size,M=n._align,X=0,Y=0,b=n.getTextBounds(!1);n.maxWidth>0&&(i=(s=b.wrappedText).length);var k=n._bounds.lines;1===M?Y=(k.longest-k.lengths[0])/2:2===M&&(Y=k.longest-k.lengths[0]),o.translate(-n.displayOriginX,-n.displayOriginY);for(var q=r.roundPixels,B=0;B<i;B++)if(10!==(v=s.charCodeAt(B))){if(x=f[v]){if(m=z+x.x,p=A+x.y,_=x.width,y=x.height,O=x.xOffset+h,w=x.yOffset+c,null!==D){var H=x.kerning[S];O+=void 0!==H?H:0}O*=C,w*=C,O+=Y,h+=x.xAdvance+d,D=x,S=v,0!==_&&0!==y&&32!==v&&(q&&(O=Math.round(O),w=Math.round(w)),o.save(),o.translate(O,w),o.scale(C,C),o.drawImage(T,m,p,_,y,0,0,_,y),o.restore())}}else X++,1===M?Y=(k.longest-k.lengths[X])/2:2===M&&(Y=k.longest-k.lengths[X]),h=0,c+=u,D=null;o.restore()}};module.exports=t;
},{"../../../renderer/canvas/utils/SetTransform":"Jz6d"}],"rrEs":[function(require,module,exports) {
var e=require("../../../utils/NOOP"),r=require("../../../utils/NOOP");e=require("./BitmapTextWebGLRenderer"),r=require("./BitmapTextCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../../utils/NOOP":"vnTW","./BitmapTextWebGLRenderer":"GfPP","./BitmapTextCanvasRenderer":"Z5WR"}],"es4n":[function(require,module,exports) {
var t=require("../../../utils/Class"),i=require("../../components"),e=require("../../GameObject"),s=require("../GetBitmapTextSize"),n=require("../ParseFromAtlas"),r=require("../ParseXMLBitmapFont"),h=require("./BitmapTextRender"),a=new t({Extends:e,Mixins:[i.Alpha,i.BlendMode,i.Depth,i.Mask,i.Origin,i.Pipeline,i.ScrollFactor,i.Texture,i.Tint,i.Transform,i.Visible,h],initialize:function(t,i,n,r,h,a,o){void 0===h&&(h=""),void 0===o&&(o=0),e.call(this,t,"BitmapText"),this.font=r;var u=this.scene.sys.cache.bitmapFont.get(r);this.fontData=u.data,this._text="",this._fontSize=a||this.fontData.size,this._letterSpacing=0,this._align=o,this._bounds=s(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.setTexture(u.texture,u.frame),this.setPosition(i,n),this.setOrigin(0,0),this.initPipeline(),this.setText(h)},setLeftAlign:function(){return this._align=a.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=a.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=a.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(t){return this._fontSize=t,this._dirty=!0,this},setLetterSpacing:function(t){return void 0===t&&(t=0),this._letterSpacing=t,this._dirty=!0,this},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this._text=t.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},getTextBounds:function(t){var i=this._bounds;return(this._dirty||this.scaleX!==i.scaleX||this.scaleY!==i.scaleY)&&(s(this,t,i),this._dirty=!1,this.updateDisplayOrigin()),i},setFont:function(t,i,e){if(void 0===i&&(i=this._fontSize),void 0===e&&(e=this._align),t!==this.font){var n=this.scene.sys.cache.bitmapFont.get(t);n&&(this.font=t,this.fontData=n.data,this._fontSize=i,this._align=e,this.setTexture(n.texture,n.frame),s(this,!1,this._bounds))}return this},setMaxWidth:function(t,i){return this._maxWidth=t,this._dirty=!0,void 0!==i&&(this.wordWrapCharCode=i),this},align:{set:function(t){this._align=t,this._dirty=!0},get:function(){return this._align}},text:{set:function(t){this.setText(t)},get:function(){return this._text}},fontSize:{set:function(t){this._fontSize=t,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(t){this._letterSpacing=t,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(t){this._maxWidth=t,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var t=i.ToJSON(this),e={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return t.data=e,t}});a.ALIGN_LEFT=0,a.ALIGN_CENTER=1,a.ALIGN_RIGHT=2,a.ParseFromAtlas=n,a.ParseXMLBitmapFont=r,module.exports=a;
},{"../../../utils/Class":"Q4x4","../../components":"PnJA","../../GameObject":"YzbT","../GetBitmapTextSize":"Pi73","../ParseFromAtlas":"JY62","../ParseXMLBitmapFont":"UcRl","./BitmapTextRender":"rrEs"}],"V4Vu":[function(require,module,exports) {
var e=require("../../renderer/webgl/Utils"),t=function(t,r,a,l,i){var o=r.getRenderList();if(0!==o.length){var h=this.pipeline;t.setPipeline(h,r);var n=l.scrollX*r.scrollFactorX,u=l.scrollY*r.scrollFactorY,p=h._tempMatrix1;p.copyFrom(l.matrix),i&&(p.multiplyWithOffset(i,-n,-u),n=0,u=0);for(var d=r.x-n,s=r.y-u,g=-1,x=l.alpha*r.alpha,c=l.roundPixels,v=0;v<o.length;v++){var f=o[v],m=f.frame,y=f.alpha*x;if(0!==y){var M=m.width,X=m.height,Y=d+f.x+m.x,F=s+f.y+m.y;f.flipX&&(M*=-1,Y+=m.width),f.flipY&&(X*=-1,F+=m.height);var T=Y+M,w=F+X,b=p.getX(Y,F),A=p.getY(Y,F),I=p.getX(T,w),P=p.getY(T,w),q=e.getTintAppendFloatAlpha(f.tint,y);m.sourceIndex!==g&&(h.setTexture2D(m.glTexture,0),g=m.sourceIndex),c&&(b=Math.round(b),A=Math.round(A),I=Math.round(I),P=Math.round(P)),h.batchQuad(b,A,b,P,I,P,I,A,m.u0,m.v0,m.u1,m.v1,q,q,q,q,!1,m.glTexture,0)&&(g=-1)}}}};module.exports=t;
},{"../../renderer/webgl/Utils":"mjFh"}],"SiYF":[function(require,module,exports) {
var a=function(a,e,t,r,o){var l=e.getRenderList();if(0!==l.length){var i=a.currentContext,h=r.alpha*e.alpha;if(0!==h){i.globalCompositeOperation=a.blendModes[e.blendMode],i.imageSmoothingEnabled=!(!a.antialias||e.frame.source.scaleMode);var s=e.x-r.scrollX*e.scrollFactorX,n=e.y-r.scrollY*e.scrollFactorY;i.save(),o&&o.copyToContext(i);for(var d=r.roundPixels,g=0;g<l.length;g++){var c=l[g],p=c.flipX||c.flipY,f=c.frame,m=f.canvasData,x=f.x,u=f.y,v=1,w=1,y=c.alpha*h;0!==y&&(i.globalAlpha=y,p?(c.flipX&&(v=-1,x-=m.width),c.flipY&&(w=-1,u-=m.height),i.save(),i.translate(c.x+s,c.y+n),i.scale(v,w),i.drawImage(f.source.image,m.x,m.y,m.width,m.height,x,u,m.width,m.height),i.restore()):(d&&(x=Math.round(x),u=Math.round(u)),i.drawImage(f.source.image,m.x,m.y,m.width,m.height,x+c.x+s,u+c.y+n,m.width,m.height)))}i.restore()}}};module.exports=a;
},{}],"QqYu":[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");e=require("./BlitterWebGLRenderer"),r=require("./BlitterCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":"vnTW","./BlitterWebGLRenderer":"V4Vu","./BlitterCanvasRenderer":"SiYF"}],"R87E":[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("../../textures/Frame"),s=new t({initialize:function(t,i,s,e,h){this.parent=t,this.x=i,this.y=s,this.frame=e,this.data={},this.tint=16777215,this._visible=h,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(t){return void 0===t?this.frame=this.parent.frame:t instanceof i&&t.texture===this.parent.texture?this.frame=t:this.frame=this.parent.texture.get(t),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(t,i,s){return this.x=t,this.y=i,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,s&&this.setFrame(s),this},setPosition:function(t,i){return this.x=t,this.y=i,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,i){return this.flipX=t,this.flipY=i,this},setVisible:function(t){return this.visible=t,this},setAlpha:function(t){return this.alpha=t,this},setTint:function(t){return this.tint=t,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(t){this.parent.dirty|=this._visible!==t,this._visible=t}},alpha:{get:function(){return this._alpha},set:function(t){this.parent.dirty|=this._alpha>0!=t>0,this._alpha=t}}});module.exports=s;
},{"../../utils/Class":"Q4x4","../../textures/Frame":"qOsR"}],"zIsB":[function(require,module,exports) {
var e=require("./BlitterRender"),i=require("./Bob"),t=require("../../utils/Class"),r=require("../components"),n=require("../../textures/Frame"),s=require("../GameObject"),h=require("../../structs/List"),l=new t({Extends:s,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.ScrollFactor,r.Size,r.Texture,r.Transform,r.Visible,e],initialize:function(e,i,t,r,n){s.call(this,e,"Blitter"),this.setTexture(r,n),this.setPosition(i,t),this.initPipeline(),this.children=new h,this.renderList=[],this.dirty=!1},create:function(e,t,r,s,h){void 0===s&&(s=!0),void 0===h&&(h=this.children.length),void 0===r?r=this.frame:r instanceof n||(r=this.texture.get(r));var l=new i(this,e,t,r,s);return this.children.addAt(l,h,!1),this.dirty=!0,l},createFromCallback:function(e,i,t,r){for(var n=this.createMultiple(i,t,r),s=0;s<n.length;s++){var h=n[s];e.call(this,h,s)}return n},createMultiple:function(e,i,t){void 0===i&&(i=this.frame.name),void 0===t&&(t=!0),Array.isArray(i)||(i=[i]);var r=[],n=this;return i.forEach(function(i){for(var s=0;s<e;s++)r.push(n.create(0,0,i,t))}),r},childCanRender:function(e){return e.visible&&e.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});module.exports=l;
},{"./BlitterRender":"QqYu","./Bob":"R87E","../../utils/Class":"Q4x4","../components":"PnJA","../../textures/Frame":"qOsR","../GameObject":"YzbT","../../structs/List":"qQUc"}],"pCuv":[function(require,module,exports) {
var e=function(e,a,l,t,r){var o=a.list;if(0!==o.length){var n=a.localTransform;r?(n.loadIdentity(),n.multiply(r),n.translate(a.x,a.y),n.rotate(a.rotation),n.scale(a.scaleX,a.scaleY)):n.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);var p=-1!==a.blendMode;p||e.setBlendMode(0);for(var c=a.alpha,s=a.scrollFactorX,d=a.scrollFactorY,h=o,i=o.length,y=0;y<i;y++){var v=o[y];if(v.willRender(t)){var T,f,u,M;if(void 0!==v.alphaTopLeft)T=v.alphaTopLeft,f=v.alphaTopRight,u=v.alphaBottomLeft,M=v.alphaBottomRight;else{var b=v.alpha;T=b,f=b,u=b,M=b}var m=v.scrollFactorX,F=v.scrollFactorY;p||v.blendMode===e.currentBlendMode||e.setBlendMode(v.blendMode);var L=v.mask;L&&L.preRenderWebGL(e,v,t);var R=v.type;R!==e.currentType&&(e.newType=!0,e.currentType=R),e.nextTypeMatch=y<i-1&&h[y+1].type===e.currentType,v.setScrollFactor(m*s,F*d),v.setAlpha(T*c,f*c,u*c,M*c),v.renderWebGL(e,v,l,t,n),v.setAlpha(T,f,u,M),v.setScrollFactor(m,F),L&&L.postRenderWebGL(e,t),e.newType=!1}}}};module.exports=e;
},{}],"zZOR":[function(require,module,exports) {
var l=function(l,a,e,r,o){var t=a.list;if(0!==t.length){var c=a.localTransform;o?(c.loadIdentity(),c.multiply(o),c.translate(a.x,a.y),c.rotate(a.rotation),c.scale(a.scaleX,a.scaleY)):c.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);var s=-1!==a.blendMode;s||l.setBlendMode(0);for(var n=a._alpha,d=a.scrollFactorX,i=a.scrollFactorY,p=0;p<t.length;p++){var v=t[p];if(v.willRender(r)){var h=v.alpha,F=v.scrollFactorX,M=v.scrollFactorY;s||v.blendMode===l.currentBlendMode||l.setBlendMode(v.blendMode),v.setScrollFactor(F*d,M*i),v.setAlpha(h*n),v.renderCanvas(l,v,e,r,c),v.setAlpha(h),v.setScrollFactor(F,M)}}}};module.exports=l;
},{}],"fRf0":[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");e=require("./ContainerWebGLRenderer"),r=require("./ContainerCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":"vnTW","./ContainerWebGLRenderer":"pCuv","./ContainerCanvasRenderer":"zZOR"}],"Ke6y":[function(require,module,exports) {
var t=require("./Rectangle"),a=function(a,e,o){void 0===o&&(o=new t);var r=Math.min(a.x,e.x),i=Math.min(a.y,e.y),m=Math.max(a.right,e.right)-r,n=Math.max(a.bottom,e.bottom)-i;return o.setTo(r,i,m,n)};module.exports=a;
},{"./Rectangle":"ACYM"}],"Vfu9":[function(require,module,exports) {
var t=require("../../utils/array"),i=require("../../renderer/BlendModes"),e=require("../../utils/Class"),s=require("../components"),n=require("../events"),r=require("../GameObject"),o=require("../../geom/rectangle/Rectangle"),h=require("./ContainerRender"),l=require("../../geom/rectangle/Union"),a=require("../../math/Vector2"),u=new e({Extends:r,Mixins:[s.AlphaSingle,s.BlendMode,s.ComputedSize,s.Depth,s.Mask,s.Transform,s.Visible,h],initialize:function(t,e,n,o){r.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new s.TransformMatrix,this.tempTransformMatrix=new s.TransformMatrix,this._displayList=t.sys.displayList,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.setPosition(e,n),this.clearAlpha(),this.setBlendMode(i.SKIP_CHECK),o&&this.add(o)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){if(void 0===t&&(t=new o),t.setTo(this.x,this.y,0,0),this.parentContainer){var i=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(i.x,i.y,0,0)}if(this.list.length>0){var e=this.list,s=new o,n=e[0].getBounds();t.setTo(n.x,n.y,n.width,n.height);for(var r=1;r<e.length;r++){var h=e[r];h.getBounds&&(h.getBounds(s),l(s,t,t))}}return t},addHandler:function(t){t.once(n.DESTROY,this.remove,this),this.exclusive&&(this._displayList.remove(t),t.parentContainer&&t.parentContainer.remove(t),t.parentContainer=this)},removeHandler:function(t){t.off(n.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null)},pointToContainer:function(t,i){void 0===i&&(i=new a),this.parentContainer?this.parentContainer.pointToContainer(t,i):i=new a(t.x,t.y);var e=this.tempTransformMatrix;return e.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),e.invert(),e.transformPoint(t.x,t.y,i),i},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(i){return t.Add(this.list,i,this.maxSize,this.addHandler,this),this},addAt:function(i,e){return t.AddAt(this.list,i,e,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(i,e){return i?(void 0===e&&(e=function(t,e){return t[i]-e[i]}),t.StableSort.inplace(this.list,e),this):this},getByName:function(i){return t.GetFirst(this.list,"name",i)},getRandom:function(i,e){return t.GetRandom(this.list,i,e)},getFirst:function(i,e,s,n){return t.GetFirst(this.list,i,e,s,n)},getAll:function(i,e,s,n){return t.GetAll(this.list,i,e,s,n)},count:function(i,e,s,n){return t.CountAllMatching(this.list,i,e,s,n)},swap:function(i,e){return t.Swap(this.list,i,e),this},moveTo:function(i,e){return t.MoveTo(this.list,i,e),this},remove:function(i,e){var s=t.Remove(this.list,i,this.removeHandler,this);if(e&&s){Array.isArray(s)||(s=[s]);for(var n=0;n<s.length;n++)s[n].destroy()}return this},removeAt:function(i,e){var s=t.RemoveAt(this.list,i,this.removeHandler,this);return e&&s&&s.destroy(),this},removeBetween:function(i,e,s){var n=t.RemoveBetween(this.list,i,e,this.removeHandler,this);if(s)for(var r=0;r<n.length;r++)n[r].destroy();return this},removeAll:function(i){var e=t.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(i)for(var s=0;s<e.length;s++)e[s].destroy();return this},bringToTop:function(i){return t.BringToTop(this.list,i),this},sendToBack:function(i){return t.SendToBack(this.list,i),this},moveUp:function(i){return t.MoveUp(this.list,i),this},moveDown:function(i){return t.MoveDown(this.list,i),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return t.Shuffle(this.list),this},replace:function(i,e,s){return t.Replace(this.list,i,e)&&(this.addHandler(e),this.removeHandler(i),s&&i.destroy()),this},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(i,e,s,n){return t.SetAll(this.list,i,e,s,n),this},each:function(t,i){var e,s=[null],n=this.list.slice(),r=n.length;for(e=2;e<arguments.length;e++)s.push(arguments[e]);for(e=0;e<r;e++)s[0]=n[e],t.apply(i,s);return this},iterate:function(t,i){var e,s=[null];for(e=2;e<arguments.length;e++)s.push(arguments[e]);for(e=0;e<this.list.length;e++)s[0]=this.list[e],t.apply(i,s);return this},setScrollFactor:function(i,e,s){return void 0===e&&(e=i),void 0===s&&(s=!1),this.scrollFactorX=i,this.scrollFactorY=e,s&&(t.SetAll(this.list,"scrollFactorX",i),t.SetAll(this.list,"scrollFactorY",e)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[],this._displayList=null}});module.exports=u;
},{"../../utils/array":"BpeF","../../renderer/BlendModes":"XeVZ","../../utils/Class":"Q4x4","../components":"PnJA","../events":"YK6V","../GameObject":"YzbT","../../geom/rectangle/Rectangle":"ACYM","./ContainerRender":"fRf0","../../geom/rectangle/Union":"Ke6y","../../math/Vector2":"xARF"}],"bsIo":[function(require,module,exports) {
module.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];
},{}],"MUZu":[function(require,module,exports) {
var e=require("./CSSBlendModes"),r=require("../GameObject"),t=function(t,a,l,o,i){var n=a.node,s=n.style,c=a.scene.sys.settings;if(!(n&&s&&c.visible&&r.RENDER_MASK===a.renderFlags)||0!==a.cameraFilter&&a.cameraFilter&o.id||a.parentContainer&&!a.parentContainer.willRender())n&&(s.display="none");else{var d=a.parentContainer,p=o.alpha*a.alpha;d&&(p*=d.alpha);var m=t._tempMatrix1,y=t._tempMatrix2,g=t._tempMatrix3,x=0,h=0,X="0%",Y="0%";i?(x=a.width*a.scaleX*a.originX,h=a.height*a.scaleY*a.originY,y.applyITRS(a.x-x,a.y-h,a.rotation,a.scaleX,a.scaleY),m.copyFrom(o.matrix),m.multiplyWithOffset(i,-o.scrollX*a.scrollFactorX,-o.scrollY*a.scrollFactorY),y.e=a.x-x,y.f=a.y-h,m.multiply(y,g)):(x=a.width*a.originX,h=a.height*a.originY,y.applyITRS(a.x-x,a.y-h,a.rotation,a.scaleX,a.scaleY),m.copyFrom(o.matrix),X=100*a.originX+"%",Y=100*a.originY+"%",y.e-=o.scrollX*a.scrollFactorX,y.f-=o.scrollY*a.scrollFactorY,m.multiply(y,g)),a.transformOnly||(s.display="block",s.opacity=p,s.zIndex=a._depth,s.pointerEvents="auto",s.mixBlendMode=e[a._blendMode]),s.transform=g.getCSSMatrix()+" skew("+a.skewX+"rad, "+a.skewY+"rad) rotate3d("+a.rotate3d.x+","+a.rotate3d.y+","+a.rotate3d.z+","+a.rotate3d.w+a.rotate3dAngle+")",s.transformOrigin=X+" "+Y}};module.exports=t;
},{"./CSSBlendModes":"bsIo","../GameObject":"YzbT"}],"sIlb":[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");e=require("./DOMElementCSSRenderer"),r=require("./DOMElementCSSRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":"vnTW","./DOMElementCSSRenderer":"MUZu"}],"GzAZ":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../components"),i=require("./DOMElementRender"),n=require("../GameObject"),s=require("../../utils/object/IsPlainObject"),r=require("../../dom/RemoveFromDOM"),h=require("../../scene/events"),o=require("../../math/Vector4"),l=new e({Extends:n,Mixins:[t.AlphaSingle,t.BlendMode,t.Depth,t.Origin,t.ScrollFactor,t.Transform,t.Visible,i],initialize:function(e,t,i,s,r,l){n.call(this,e,"DOMElement"),this.parent=e.sys.game.domContainer,this.cache=e.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new o,this.rotate3dAngle="deg",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(t,i),"string"==typeof s?"#"===s[0]?this.setElement(s.substr(1),r,l):this.createElement(s,r,l):s&&this.setElement(s,r,l),e.sys.events.on(h.SLEEP,this.handleSceneEvent,this),e.sys.events.on(h.WAKE,this.handleSceneEvent,this)},handleSceneEvent:function(e){var t=this.node,i=t.style;t&&(i.display=e.settings.visible?"block":"none")},setSkew:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.skewX=e,this.skewY=t,this},setPerspective:function(e){return this.parent.style.perspective=e+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(e){this.parent.style.perspective=e+"px"}},addListener:function(e){if(this.node){e=e.split(" ");for(var t=0;t<e.length;t++)this.node.addEventListener(e[t],this.handler,!1)}return this},removeListener:function(e){if(this.node){e=e.split(" ");for(var t=0;t<e.length;t++)this.node.removeEventListener(e[t],this.handler)}return this},dispatchNativeEvent:function(e){this.emit(e.type,e)},createElement:function(e,t,i){return this.setElement(document.createElement(e),t,i)},setElement:function(e,t,i){var n;if(this.removeElement(),"string"==typeof e?("#"===e[0]&&(e=e.substr(1)),n=document.getElementById(e)):"object"==typeof e&&1===e.nodeType&&(n=e),!n)return this;if(this.node=n,t&&s(t))for(var r in t)n.style[r]=t[r];else"string"==typeof t&&(n.style=t);return n.style.zIndex="0",n.style.display="inline",n.style.position="absolute",n.phaser=this,this.parent&&this.parent.appendChild(n),i&&(n.innerText=i),this.updateSize()},createFromCache:function(e,t){var i=this.cache.get(e);return i&&this.createFromHTML(i,t),this},createFromHTML:function(e,t){void 0===t&&(t="div"),this.removeElement();var i=document.createElement(t);return this.node=i,i.style.zIndex="0",i.style.display="inline",i.style.position="absolute",i.phaser=this,this.parent&&this.parent.appendChild(i),i.innerHTML=e,this.updateSize()},removeElement:function(){return this.node&&(r(this.node),this.node=null),this},updateSize:function(){var e=this.node,t=e.getBoundingClientRect();return this.width=e.clientWidth,this.height=e.clientHeight,this.displayWidth=t.width||0,this.displayHeight=t.height||0,this},getChildByProperty:function(e,t){if(this.node)for(var i=this.node.querySelectorAll("*"),n=0;n<i.length;n++)if(i[n][e]===t)return i[n];return null},getChildByID:function(e){return this.getChildByProperty("id",e)},getChildByName:function(e){return this.getChildByProperty("name",e)},setClassName:function(e){return this.node&&(this.node.className=e,this.updateSize()),this},setText:function(e){return this.node&&(this.node.innerText=e,this.updateSize()),this},setHTML:function(e){return this.node&&(this.node.innerHTML=e,this.updateSize()),this},preUpdate:function(){var e=this.parentContainer,t=this.node;t&&e&&!e.willRender()&&(t.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(h.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(h.WAKE,this.handleSceneEvent,this)}});module.exports=l;
},{"../../utils/Class":"Q4x4","../components":"PnJA","./DOMElementRender":"sIlb","../GameObject":"YzbT","../../utils/object/IsPlainObject":"TEos","../../dom/RemoveFromDOM":"QPTS","../../scene/events":"Zlz3","../../math/Vector4":"SD5N"}],"MJQq":[function(require,module,exports) {
var t=require("../../../renderer/webgl/Utils"),a=function(a,l,e,o,i){var n=l.text,r=n.length;if(0!==r){var p=this.pipeline;a.setPipeline(p,l);var h=l.cropWidth>0||l.cropHeight>0;h&&(p.flush(),a.pushScissor(l.x,l.y,l.cropWidth*l.scaleX,l.cropHeight*l.scaleY));var s=p._tempMatrix1,c=p._tempMatrix2,d=p._tempMatrix3,g=p._tempMatrix4;c.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),s.copyFrom(o.matrix),i?(s.multiplyWithOffset(i,-o.scrollX*l.scrollFactorX,-o.scrollY*l.scrollFactorY),c.e=l.x,c.f=l.y,s.multiply(c,d)):(c.e-=o.scrollX*l.scrollFactorX,c.f-=o.scrollY*l.scrollFactorY,s.multiply(c,d));var f=l.frame,u=f.glTexture,x=f.cutX,T=f.cutY,_=u.width,A=u.height,y=l._isTinted&&l.tintFill,m=t.getTintAppendFloatAlpha(l._tintTL,o.alpha*l._alphaTL),v=t.getTintAppendFloatAlpha(l._tintTR,o.alpha*l._alphaTR),F=t.getTintAppendFloatAlpha(l._tintBL,o.alpha*l._alphaBL),M=t.getTintAppendFloatAlpha(l._tintBR,o.alpha*l._alphaBR);p.setTexture2D(u,0);var R,b,L=0,X=0,Y=0,B=0,S=l.letterSpacing,O=0,z=0,D=0,k=0,w=l.scrollX,C=l.scrollY,H=l.fontData,W=H.chars,I=H.lineHeight,P=l.fontSize/H.size,q=0,Q=l._align,U=0,j=0;l.getTextBounds(!1);var E=l._bounds.lines;1===Q?j=(E.longest-E.lengths[0])/2:2===Q&&(j=E.longest-E.lengths[0]);for(var G=o.roundPixels,J=l.displayCallback,K=l.callbackData,N=0;N<r;N++)if(10!==(Y=n.charCodeAt(N))){if(R=W[Y]){O=x+R.x,z=T+R.y,D=R.width,k=R.height;var V=R.xOffset+L-w,Z=R.yOffset+X-C;if(null!==b){var $=R.kerning[B];V+=void 0!==$?$:0}if(L+=R.xAdvance+S,b=R,B=Y,0!==D&&0!==k&&32!==Y){if(P=l.fontSize/l.fontData.size,q=0,J){K.color=0,K.tint.topLeft=m,K.tint.topRight=v,K.tint.bottomLeft=F,K.tint.bottomRight=M,K.index=N,K.charCode=Y,K.x=V,K.y=Z,K.scale=P,K.rotation=q,K.data=R.data;var tt=J(K);V=tt.x,Z=tt.y,P=tt.scale,q=tt.rotation,tt.color?(m=tt.color,v=tt.color,F=tt.color,M=tt.color):(m=tt.tint.topLeft,v=tt.tint.topRight,F=tt.tint.bottomLeft,M=tt.tint.bottomRight),m=t.getTintAppendFloatAlpha(m,o.alpha*l._alphaTL),v=t.getTintAppendFloatAlpha(v,o.alpha*l._alphaTR),F=t.getTintAppendFloatAlpha(F,o.alpha*l._alphaBL),M=t.getTintAppendFloatAlpha(M,o.alpha*l._alphaBR)}V*=P,Z*=P,V-=l.displayOriginX,Z-=l.displayOriginY,V+=j,g.applyITRS(V,Z,q,P,P),d.multiply(g,c);var at=O/_,lt=z/A,et=(O+D)/_,ot=(z+k)/A,it=D,nt=k,rt=c.e,pt=c.f,ht=nt*c.c+c.e,st=nt*c.d+c.f,ct=it*c.a+nt*c.c+c.e,dt=it*c.b+nt*c.d+c.f,gt=it*c.a+c.e,ft=it*c.b+c.f;G&&(rt=Math.round(rt),pt=Math.round(pt),ht=Math.round(ht),st=Math.round(st),ct=Math.round(ct),dt=Math.round(dt),gt=Math.round(gt),ft=Math.round(ft)),p.batchQuad(rt,pt,ht,st,ct,dt,gt,ft,at,lt,et,ot,m,v,F,M,y,u,0)}}}else U++,1===Q?j=(E.longest-E.lengths[U])/2:2===Q&&(j=E.longest-E.lengths[U]),L=0,X+=I,b=null;h&&(p.flush(),a.popScissor())}};module.exports=a;
},{"../../../renderer/webgl/Utils":"mjFh"}],"szaX":[function(require,module,exports) {
var e=require("../../../renderer/canvas/utils/SetTransform"),t=function(t,a,r,n,l){var i=a._text,o=i.length,s=t.currentContext;if(0!==o&&e(t,s,a,n,l)){var c=a.frame,g=a.displayCallback,d=a.callbackData,h=a.fontData.chars,f=a.fontData.lineHeight,u=a._letterSpacing,v=0,x=0,p=0,y=null,m=0,_=0,b=0,C=0,D=0,O=0,k=null,H=0,S=a.frame.source.image,X=c.cutX,Y=c.cutY,w=0,z=0,A=a._fontSize/a.fontData.size,M=a._align,P=0,T=0;a.getTextBounds(!1);var W=a._bounds.lines;1===M?T=(W.longest-W.lengths[0])/2:2===M&&(T=W.longest-W.lengths[0]),s.translate(-a.displayOriginX,-a.displayOriginY);var q=n.roundPixels;a.cropWidth>0&&a.cropHeight>0&&(s.beginPath(),s.rect(0,0,a.cropWidth,a.cropHeight),s.clip());for(var B=0;B<o;B++)if(z=A,w=0,10!==(p=i.charCodeAt(B))){if(y=h[p]){if(m=X+y.x,_=Y+y.y,b=y.width,C=y.height,D=y.xOffset+v-a.scrollX,O=y.yOffset+x-a.scrollY,null!==k){var I=y.kerning[H];D+=void 0!==I?I:0}if(g){d.index=B,d.charCode=p,d.x=D,d.y=O,d.scale=z,d.rotation=w,d.data=y.data;var j=g(d);D=j.x,O=j.y,z=j.scale,w=j.rotation}D*=z,O*=z,D+=T,v+=y.xAdvance+u,k=y,H=p,0!==b&&0!==C&&32!==p&&(q&&(D=Math.round(D),O=Math.round(O)),s.save(),s.translate(D,O),s.rotate(w),s.scale(z,z),s.drawImage(S,m,_,b,C,0,0,b,C),s.restore())}}else P++,1===M?T=(W.longest-W.lengths[P])/2:2===M&&(T=W.longest-W.lengths[P]),v=0,x+=f,k=null;s.restore()}};module.exports=t;
},{"../../../renderer/canvas/utils/SetTransform":"Jz6d"}],"VvRj":[function(require,module,exports) {
var e=require("../../../utils/NOOP"),r=require("../../../utils/NOOP");e=require("./DynamicBitmapTextWebGLRenderer"),r=require("./DynamicBitmapTextCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../../utils/NOOP":"vnTW","./DynamicBitmapTextWebGLRenderer":"MJQq","./DynamicBitmapTextCanvasRenderer":"szaX"}],"Wb3Y":[function(require,module,exports) {
var t=require("../static/BitmapText"),i=require("../../../utils/Class"),s=require("./DynamicBitmapTextRender"),e=new i({Extends:t,Mixins:[s],initialize:function(i,s,e,l,r,a,o){t.call(this,i,s,e,l,r,a,o),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(t,i){return this.cropWidth=t,this.cropHeight=i,this},setDisplayCallback:function(t){return this.displayCallback=t,this},setScrollX:function(t){return this.scrollX=t,this},setScrollY:function(t){return this.scrollY=t,this}});module.exports=e;
},{"../static/BitmapText":"es4n","../../../utils/Class":"Q4x4","./DynamicBitmapTextRender":"VvRj"}],"LbF4":[function(require,module,exports) {
var l=function(l,r,e,t,c){var o=l.currentPipeline;l.clearPipeline();var a=l._tempMatrix1,i=l._tempMatrix2,p=l._tempMatrix3;i.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),a.copyFrom(t.matrix),c?(a.multiplyWithOffset(c,-t.scrollX*r.scrollFactorX,-t.scrollY*r.scrollFactorY),i.e=r.x,i.f=r.y,a.multiply(i,p)):(i.e-=t.scrollX*r.scrollFactorX,i.f-=t.scrollY*r.scrollFactorY,a.multiply(i,p)),r.render.call(r,l,t,p),l.rebindPipeline(o)};module.exports=l;
},{}],"Zz7i":[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");e=require("./ExternWebGLRenderer"),r=require("./ExternCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":"vnTW","./ExternWebGLRenderer":"LbF4","./ExternCanvasRenderer":"vBel"}],"fdwf":[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("../components"),r=require("../GameObject"),n=require("./ExternRender"),t=new e({Extends:r,Mixins:[i.Alpha,i.BlendMode,i.Depth,i.Flip,i.Origin,i.ScrollFactor,i.Size,i.Texture,i.Tint,i.Transform,i.Visible,n],initialize:function(e){r.call(this,e,"Extern")},preUpdate:function(){},render:function(){}});module.exports=t;
},{"../../utils/Class":"Q4x4","../components":"PnJA","../GameObject":"YzbT","./ExternRender":"Zz7i"}],"hZph":[function(require,module,exports) {
module.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,SET_TEXTURE:19,CLEAR_TEXTURE:20,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22};
},{}],"fwc7":[function(require,module,exports) {
var t=function(t,r,e){if(t.width<=0||t.height<=0)return!1;var h=(r-t.x)/t.width,i=(e-t.y)/t.height;return(h*=h)+(i*=i)<.25};module.exports=t;
},{}],"CnKU":[function(require,module,exports) {
var t=require("../point/Point"),i=function(i,e,n){void 0===n&&(n=new t);var o=i.width/2,r=i.height/2;return n.x=i.x+o*Math.cos(e),n.y=i.y+r*Math.sin(e),n};module.exports=i;
},{"../point/Point":"tZ6A"}],"Oewv":[function(require,module,exports) {
var e=require("./CircumferencePoint"),r=require("../../math/FromPercent"),i=require("../../math/const"),n=require("../point/Point"),t=function(t,o,u){void 0===u&&(u=new n);var c=r(o,0,i.PI2);return e(t,c,u)};module.exports=t;
},{"./CircumferencePoint":"CnKU","../../math/FromPercent":"oreP","../../math/const":"TJqb","../point/Point":"tZ6A"}],"T4aX":[function(require,module,exports) {
var t=function(t){var h=t.width/2,a=t.height/2,r=Math.pow(h-a,2)/Math.pow(h+a,2);return Math.PI*(h+a)*(1+3*r/(10+Math.sqrt(4-3*r)))};module.exports=t;
},{}],"Axl9":[function(require,module,exports) {
var r=require("./Circumference"),e=require("./CircumferencePoint"),u=require("../../math/FromPercent"),i=require("../../math/const"),n=function(n,o,t,c){void 0===c&&(c=[]),!o&&t>0&&(o=r(n)/t);for(var m=0;m<o;m++){var a=u(m/o,0,i.PI2);c.push(e(n,a))}return c};module.exports=n;
},{"./Circumference":"T4aX","./CircumferencePoint":"CnKU","../../math/FromPercent":"oreP","../../math/const":"TJqb"}],"g0eY":[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("./Contains"),h=require("./GetPoint"),n=require("./GetPoints"),s=require("../const"),e=require("./Random"),r=new t({initialize:function(t,i,h,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===h&&(h=0),void 0===n&&(n=0),this.type=s.ELLIPSE,this.x=t,this.y=i,this.width=h,this.height=n},contains:function(t,h){return i(this,t,h)},getPoint:function(t,i){return h(this,t,i)},getPoints:function(t,i,h){return n(this,t,i,h)},getRandomPoint:function(t){return e(this,t)},setTo:function(t,i,h,n){return this.x=t,this.y=i,this.width=h,this.height=n,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(t){this.x=t+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(t){this.y=t+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});module.exports=r;
},{"../../utils/Class":"Q4x4","./Contains":"fwc7","./GetPoint":"Oewv","./GetPoints":"Axl9","../const":"wRsF","./Random":"DzNa"}],"rvAu":[function(require,module,exports) {
var e=require("./Commands"),t=require("../../renderer/webgl/Utils"),a=function(e,t,a){this.x=e,this.y=t,this.width=a},r=function(e,t,r){this.points=[],this.pointsLength=1,this.points[0]=new a(e,t,r)},s=[],l=function(l,n,c,i,T){if(0!==n.commandBuffer.length){var o=this.pipeline;l.setPipeline(o,n);var h=n._tempMatrix1,p=n._tempMatrix2,u=n._tempMatrix3;u.loadIdentity(),p.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),h.copyFrom(i.matrix),T?(h.multiplyWithOffset(T,-i.scrollX*n.scrollFactorX,-i.scrollY*n.scrollFactorY),p.e=n.x,p.f=n.y,h.multiply(p)):(p.e-=i.scrollX*n.scrollFactorX,p.f-=i.scrollY*n.scrollFactorY,h.multiply(p));for(var L=n.commandBuffer,E=i.alpha*n.alpha,b=1,k=o.fillTint,R=o.strokeTint,f=0,x=0,A=0,_=2*Math.PI,m=[],F=0,I=!1,S=null,g=t.getTintAppendFloatAlphaAndSwap,y=l.blankTexture.glTexture,w=0;w<L.length;w++)switch(L[w]){case e.BEGIN_PATH:m.length=0,S=null,I=!0;break;case e.CLOSE_PATH:I=!1,S&&S.points.length&&S.points.push(S.points[0]);break;case e.FILL_PATH:for(F=0;F<m.length;F++)o.setTexture2D(y),o.batchFillPath(m[F].points,u,h);break;case e.STROKE_PATH:for(F=0;F<m.length;F++)o.setTexture2D(y),o.batchStrokePath(m[F].points,b,I,u,h);break;case e.LINE_STYLE:b=L[++w];var B=g(L[++w],L[++w]*E);R.TL=B,R.TR=B,R.BL=B,R.BR=B;break;case e.FILL_STYLE:var M=g(L[++w],L[++w]*E);k.TL=M,k.TR=M,k.BL=M,k.BR=M;break;case e.GRADIENT_FILL_STYLE:var d=L[++w]*E;k.TL=g(L[++w],d),k.TR=g(L[++w],d),k.BL=g(L[++w],d),k.BR=g(L[++w],d);break;case e.GRADIENT_LINE_STYLE:b=L[++w];var v=L[++w]*E;R.TL=g(L[++w],v),R.TR=g(L[++w],v),R.BL=g(L[++w],v),R.BR=g(L[++w],v);break;case e.ARC:var N=0,O=L[++w],Y=L[++w],D=L[++w],P=L[++w],X=L[++w],C=L[++w],G=L[++w];for(X-=P,C?X<-_?X=-_:X>0&&(X=X%_-_):X>_?X=_:X<0&&(X=_+X%_),null===S&&(S=new r(O+Math.cos(P)*D,Y+Math.sin(P)*D,b),m.push(S),N+=.01);N<1+G;)A=X*N+P,f=O+Math.cos(A)*D,x=Y+Math.sin(A)*D,S.points.push(new a(f,x,b)),N+=.01;A=X+P,f=O+Math.cos(A)*D,x=Y+Math.sin(A)*D,S.points.push(new a(f,x,b));break;case e.FILL_RECT:o.setTexture2D(y),o.batchFillRect(L[++w],L[++w],L[++w],L[++w],u,h);break;case e.FILL_TRIANGLE:o.setTexture2D(y),o.batchFillTriangle(L[++w],L[++w],L[++w],L[++w],L[++w],L[++w],u,h);break;case e.STROKE_TRIANGLE:o.setTexture2D(y),o.batchStrokeTriangle(L[++w],L[++w],L[++w],L[++w],L[++w],L[++w],b,u,h);break;case e.LINE_TO:null!==S?S.points.push(new a(L[++w],L[++w],b)):(S=new r(L[++w],L[++w],b),m.push(S));break;case e.MOVE_TO:S=new r(L[++w],L[++w],b),m.push(S);break;case e.SAVE:s.push(u.copyToArray());break;case e.RESTORE:u.copyFromArray(s.pop());break;case e.TRANSLATE:O=L[++w],Y=L[++w],u.translate(O,Y);break;case e.SCALE:O=L[++w],Y=L[++w],u.scale(O,Y);break;case e.ROTATE:u.rotate(L[++w]);break;case e.SET_TEXTURE:var H=L[++w],U=L[++w];o.currentFrame=H,o.setTexture2D(H.glTexture,0),o.tintEffect=U,y=H.glTexture;break;case e.CLEAR_TEXTURE:o.currentFrame=l.blankTexture,o.tintEffect=2,y=l.blankTexture.glTexture}}};module.exports=l;
},{"./Commands":"hZph","../../renderer/webgl/Utils":"mjFh"}],"a0fX":[function(require,module,exports) {
var e=require("./Commands"),a=require("../../renderer/canvas/utils/SetTransform"),r=function(r,s,T,c,o,t,E){var b=s.commandBuffer,l=b.length,k=t||r.currentContext;if(0!==l&&a(r,k,s,c,o)){var L=1,i=1,n=0,_=0,S=1,A=0,I=0,R=0;k.beginPath();for(var O=0;O<l;++O){switch(b[O]){case e.ARC:k.arc(b[O+1],b[O+2],b[O+3],b[O+4],b[O+5],b[O+6]),O+=7;break;case e.LINE_STYLE:S=b[O+1],n=b[O+2],L=b[O+3],A=(16711680&n)>>>16,I=(65280&n)>>>8,R=255&n,k.strokeStyle="rgba("+A+","+I+","+R+","+L+")",k.lineWidth=S,O+=3;break;case e.FILL_STYLE:_=b[O+1],i=b[O+2],A=(16711680&_)>>>16,I=(65280&_)>>>8,R=255&_,k.fillStyle="rgba("+A+","+I+","+R+","+i+")",O+=2;break;case e.BEGIN_PATH:k.beginPath();break;case e.CLOSE_PATH:k.closePath();break;case e.FILL_PATH:E||k.fill();break;case e.STROKE_PATH:E||k.stroke();break;case e.FILL_RECT:E?k.rect(b[O+1],b[O+2],b[O+3],b[O+4]):k.fillRect(b[O+1],b[O+2],b[O+3],b[O+4]),O+=4;break;case e.FILL_TRIANGLE:k.beginPath(),k.moveTo(b[O+1],b[O+2]),k.lineTo(b[O+3],b[O+4]),k.lineTo(b[O+5],b[O+6]),k.closePath(),E||k.fill(),O+=6;break;case e.STROKE_TRIANGLE:k.beginPath(),k.moveTo(b[O+1],b[O+2]),k.lineTo(b[O+3],b[O+4]),k.lineTo(b[O+5],b[O+6]),k.closePath(),E||k.stroke(),O+=6;break;case e.LINE_TO:k.lineTo(b[O+1],b[O+2]),O+=2;break;case e.MOVE_TO:k.moveTo(b[O+1],b[O+2]),O+=2;break;case e.LINE_FX_TO:k.lineTo(b[O+1],b[O+2]),O+=5;break;case e.MOVE_FX_TO:k.moveTo(b[O+1],b[O+2]),O+=5;break;case e.SAVE:k.save();break;case e.RESTORE:k.restore();break;case e.TRANSLATE:k.translate(b[O+1],b[O+2]),O+=2;break;case e.SCALE:k.scale(b[O+1],b[O+2]),O+=2;break;case e.ROTATE:k.rotate(b[O+1]),O+=1;break;case e.GRADIENT_FILL_STYLE:O+=5;break;case e.GRADIENT_LINE_STYLE:O+=6;break;case e.SET_TEXTURE:O+=2}}k.restore()}};module.exports=r;
},{"./Commands":"hZph","../../renderer/canvas/utils/SetTransform":"Jz6d"}],"dycv":[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");e=require("./GraphicsWebGLRenderer"),r=require("./GraphicsCanvasRenderer"),r=require("./GraphicsCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":"vnTW","./GraphicsWebGLRenderer":"rvAu","./GraphicsCanvasRenderer":"a0fX"}],"LiUC":[function(require,module,exports) {
var t=require("../../cameras/2d/BaseCamera.js"),e=require("../../utils/Class"),i=require("./Commands"),s=require("../components/AlphaSingle"),r=require("../components/BlendMode"),n=require("../components/Depth"),h=require("../components/Mask"),o=require("../components/Pipeline"),l=require("../components/Transform"),u=require("../components/Visible"),a=require("../components/ScrollFactor"),f=require("../components/TransformMatrix"),c=require("../../geom/ellipse/Ellipse"),d=require("../GameObject"),m=require("../../utils/object/GetFastValue"),T=require("../../utils/object/GetValue"),p=require("../../math/const"),S=require("./GraphicsRender"),P=new e({Extends:d,Mixins:[s,r,n,h,o,l,u,a,S],initialize:function(t,e){var i=T(e,"x",0),s=T(e,"y",0);d.call(this,t,"Graphics"),this.setPosition(i,s),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this._tempMatrix1=new f,this._tempMatrix2=new f,this._tempMatrix3=new f,this.setDefaultStyles(e)},setDefaultStyles:function(t){return T(t,"lineStyle",null)&&(this.defaultStrokeWidth=T(t,"lineStyle.width",1),this.defaultStrokeColor=T(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=T(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),T(t,"fillStyle",null)&&(this.defaultFillColor=T(t,"fillStyle.color",16777215),this.defaultFillAlpha=T(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(t,e,s){return void 0===s&&(s=1),this.commandBuffer.push(i.LINE_STYLE,t,e,s),this._lineWidth=t,this},fillStyle:function(t,e){return void 0===e&&(e=1),this.commandBuffer.push(i.FILL_STYLE,t,e),this},fillGradientStyle:function(t,e,s,r,n){return void 0===n&&(n=1),this.commandBuffer.push(i.GRADIENT_FILL_STYLE,n,t,e,s,r),this},lineGradientStyle:function(t,e,s,r,n,h){return void 0===h&&(h=1),this.commandBuffer.push(i.GRADIENT_LINE_STYLE,t,h,e,s,r,n),this},setTexture:function(t,e,s){if(void 0===s&&(s=0),void 0===t)this.commandBuffer.push(i.CLEAR_TEXTURE);else{var r=this.scene.sys.textures.getFrame(t,e);r&&(2===s&&(s=3),this.commandBuffer.push(i.SET_TEXTURE,r,s))}return this},beginPath:function(){return this.commandBuffer.push(i.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(i.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(i.FILL_PATH),this},fill:function(){return this.commandBuffer.push(i.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(i.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(i.STROKE_PATH),this},fillCircleShape:function(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,p.PI2),this.fillPath(),this},strokeCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,p.PI2),this.strokePath(),this},fillRectShape:function(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function(t,e,s,r){return this.commandBuffer.push(i.FILL_RECT,t,e,s,r),this},strokeRect:function(t,e,i,s){var r=this._lineWidth/2,n=t-r,h=t+r;return this.beginPath(),this.moveTo(t,e),this.lineTo(t,e+s),this.strokePath(),this.beginPath(),this.moveTo(t+i,e),this.lineTo(t+i,e+s),this.strokePath(),this.beginPath(),this.moveTo(n,e),this.lineTo(h+i,e),this.strokePath(),this.beginPath(),this.moveTo(n,e+s),this.lineTo(h+i,e+s),this.strokePath(),this},fillRoundedRect:function(t,e,i,s,r){void 0===r&&(r=20);var n=r,h=r,o=r,l=r;return"number"!=typeof r&&(n=m(r,"tl",20),h=m(r,"tr",20),o=m(r,"bl",20),l=m(r,"br",20)),this.beginPath(),this.moveTo(t+n,e),this.lineTo(t+i-h,e),this.arc(t+i-h,e+h,h,-p.TAU,0),this.lineTo(t+i,e+s-l),this.arc(t+i-l,e+s-l,l,0,p.TAU),this.lineTo(t+o,e+s),this.arc(t+o,e+s-o,o,p.TAU,Math.PI),this.lineTo(t,e+n),this.arc(t+n,e+n,n,-Math.PI,-p.TAU),this.fillPath(),this},strokeRoundedRect:function(t,e,i,s,r){void 0===r&&(r=20);var n=r,h=r,o=r,l=r;return"number"!=typeof r&&(n=m(r,"tl",20),h=m(r,"tr",20),o=m(r,"bl",20),l=m(r,"br",20)),this.beginPath(),this.moveTo(t+n,e),this.lineTo(t+i-h,e),this.arc(t+i-h,e+h,h,-p.TAU,0),this.lineTo(t+i,e+s-l),this.arc(t+i-l,e+s-l,l,0,p.TAU),this.lineTo(t+o,e+s),this.arc(t+o,e+s-o,o,p.TAU,Math.PI),this.lineTo(t,e+n),this.arc(t+n,e+n,n,-Math.PI,-p.TAU),this.strokePath(),this},fillPointShape:function(t,e){return this.fillPoint(t.x,t.y,e)},fillPoint:function(t,e,s){return!s||s<1?s=1:(t-=s/2,e-=s/2),this.commandBuffer.push(i.FILL_RECT,t,e,s,s),this},fillTriangleShape:function(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function(t,e,s,r,n,h){return this.commandBuffer.push(i.FILL_TRIANGLE,t,e,s,r,n,h),this},strokeTriangle:function(t,e,s,r,n,h){return this.commandBuffer.push(i.STROKE_TRIANGLE,t,e,s,r,n,h),this},strokeLineShape:function(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function(t,e,i,s){return this.beginPath(),this.moveTo(t,e),this.lineTo(i,s),this.strokePath(),this},lineTo:function(t,e){return this.commandBuffer.push(i.LINE_TO,t,e),this},moveTo:function(t,e){return this.commandBuffer.push(i.MOVE_TO,t,e),this},strokePoints:function(t,e,i,s){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===s&&(s=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var r=1;r<s;r++)this.lineTo(t[r].x,t[r].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.strokePath(),this},fillPoints:function(t,e,i,s){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===s&&(s=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var r=1;r<s;r++)this.lineTo(t[r].x,t[r].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.strokePoints(i,!0)},strokeEllipse:function(t,e,i,s,r){void 0===r&&(r=32);var n=new c(t,e,i,s).getPoints(r);return this.strokePoints(n,!0)},fillEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.fillPoints(i,!0)},fillEllipse:function(t,e,i,s,r){void 0===r&&(r=32);var n=new c(t,e,i,s).getPoints(r);return this.fillPoints(n,!0)},arc:function(t,e,s,r,n,h,o){return void 0===h&&(h=!1),void 0===o&&(o=0),this.commandBuffer.push(i.ARC,t,e,s,r,n,h,o),this},slice:function(t,e,s,r,n,h,o){return void 0===h&&(h=!1),void 0===o&&(o=0),this.commandBuffer.push(i.BEGIN_PATH),this.commandBuffer.push(i.MOVE_TO,t,e),this.commandBuffer.push(i.ARC,t,e,s,r,n,h,o),this.commandBuffer.push(i.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(i.SAVE),this},restore:function(){return this.commandBuffer.push(i.RESTORE),this},translateCanvas:function(t,e){return this.commandBuffer.push(i.TRANSLATE,t,e),this},scaleCanvas:function(t,e){return this.commandBuffer.push(i.SCALE,t,e),this},rotateCanvas:function(t){return this.commandBuffer.push(i.ROTATE,t),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(t,e,i){var s,r,n=this.scene.sys,h=n.game.renderer;if(void 0===e&&(e=n.scale.width),void 0===i&&(i=n.scale.height),P.TargetCamera.setScene(this.scene),P.TargetCamera.setViewport(0,0,e,i),P.TargetCamera.scrollX=this.x,P.TargetCamera.scrollY=this.y,"string"==typeof t)if(n.textures.exists(t)){var o=(s=n.textures.get(t)).getSourceImage();o instanceof HTMLCanvasElement&&(r=o.getContext("2d"))}else r=(s=n.textures.createCanvas(t,e,i)).getSourceImage().getContext("2d");else t instanceof HTMLCanvasElement&&(r=t.getContext("2d"));return r&&(this.renderCanvas(h,this,0,P.TargetCamera,null,r,!1),s&&s.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});P.TargetCamera=new t,module.exports=P;
},{"../../cameras/2d/BaseCamera.js":"ZcMy","../../utils/Class":"Q4x4","./Commands":"hZph","../components/AlphaSingle":"QPBl","../components/BlendMode":"qtb9","../components/Depth":"YMUa","../components/Mask":"gLLY","../components/Pipeline":"B6Pt","../components/Transform":"wIth","../components/Visible":"oYJu","../components/ScrollFactor":"Ti6A","../components/TransformMatrix":"hzKR","../../geom/ellipse/Ellipse":"g0eY","../GameObject":"YzbT","../../utils/object/GetFastValue":"xbYy","../../utils/object/GetValue":"FWyS","../../math/const":"TJqb","./GraphicsRender":"dycv"}],"TNKn":[function(require,module,exports) {
var t=require("../utils/Class"),e=new t({initialize:function(t){if(this.entries=[],Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e])},set:function(t){return-1===this.entries.indexOf(t)&&this.entries.push(t),this},get:function(t,e){for(var n=0;n<this.entries.length;n++){var i=this.entries[n];if(i[t]===e)return i}},getArray:function(){return this.entries.slice(0)},delete:function(t){var e=this.entries.indexOf(t);return e>-1&&this.entries.splice(e,1),this},dump:function(){console.group("Set");for(var t=0;t<this.entries.length;t++){var e=this.entries[t];console.log(e)}console.groupEnd()},each:function(t,e){var n,i=this.entries.slice(),r=i.length;if(e)for(n=0;n<r&&!1!==t.call(e,i[n],n);n++);else for(n=0;n<r&&!1!==t(i[n],n);n++);return this},iterate:function(t,e){var n,i=this.entries.length;if(e)for(n=0;n<i&&!1!==t.call(e,this.entries[n],n);n++);else for(n=0;n<i&&!1!==t(this.entries[n],n);n++);return this},iterateLocal:function(t){var e,n=[];for(e=1;e<arguments.length;e++)n.push(arguments[e]);var i=this.entries.length;for(e=0;e<i;e++){var r=this.entries[e];r[t].apply(r,n)}return this},clear:function(){return this.entries.length=0,this},contains:function(t){return this.entries.indexOf(t)>-1},union:function(t){var n=new e;return t.entries.forEach(function(t){n.set(t)}),this.entries.forEach(function(t){n.set(t)}),n},intersect:function(t){var n=new e;return this.entries.forEach(function(e){t.contains(e)&&n.set(e)}),n},difference:function(t){var n=new e;return this.entries.forEach(function(e){t.contains(e)||n.set(e)}),n},size:{get:function(){return this.entries.length},set:function(t){return t<this.entries.length?this.entries.length=t:this.entries.length}}});module.exports=e;
},{"../utils/Class":"Q4x4"}],"XYqw":[function(require,module,exports) {
var e=function(e,i,t,p,n){this.pipeline.batchSprite(i,p,n)};module.exports=e;
},{}],"flNU":[function(require,module,exports) {
var e=function(e,r,t,a,o){e.batchSprite(r,r.frame,a,o)};module.exports=e;
},{}],"WBD4":[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");e=require("./SpriteWebGLRenderer"),r=require("./SpriteCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":"vnTW","./SpriteWebGLRenderer":"XYqw","./SpriteCanvasRenderer":"flNU"}],"uRwE":[function(require,module,exports) {
var i=require("../../utils/Class"),e=require("../components"),t=require("../GameObject"),s=require("./SpriteRender"),n=new i({Extends:t,Mixins:[e.Alpha,e.BlendMode,e.Depth,e.Flip,e.GetBounds,e.Mask,e.Origin,e.Pipeline,e.ScrollFactor,e.Size,e.TextureCrop,e.Tint,e.Transform,e.Visible,s],initialize:function(i,s,n,r,o){t.call(this,i,"Sprite"),this._crop=this.resetCropObject(),this.anims=new e.Animation(this),this.setTexture(r,o),this.setPosition(s,n),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},preUpdate:function(i,e){this.anims.update(i,e)},play:function(i,e,t){return this.anims.play(i,e,t),this},toJSON:function(){return e.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});module.exports=n;
},{"../../utils/Class":"Q4x4","../components":"PnJA","../GameObject":"YzbT","./SpriteRender":"WBD4"}],"b7vI":[function(require,module,exports) {
var e=require("../../actions/"),t=require("../../utils/Class"),i=require("../events"),r=require("../../utils/object/GetFastValue"),n=require("../../utils/object/GetValue"),s=require("../../utils/object/IsPlainObject"),l=require("../../utils/array/Range"),a=require("../../structs/Set"),c=require("../sprite/Sprite"),h=new t({initialize:function(e,t,i){i?t&&!Array.isArray(t)&&(t=[t]):Array.isArray(t)?s(t[0])&&(i=t,t=null):s(t)&&(i=t,t=null),this.scene=e,this.children=new a(t),this.isParent=!0,this.type="Group",this.classType=r(i,"classType",c),this.name=r(i,"name",""),this.active=r(i,"active",!0),this.maxSize=r(i,"maxSize",-1),this.defaultKey=r(i,"defaultKey",null),this.defaultFrame=r(i,"defaultFrame",null),this.runChildUpdate=r(i,"runChildUpdate",!1),this.createCallback=r(i,"createCallback",null),this.removeCallback=r(i,"removeCallback",null),this.createMultipleCallback=r(i,"createMultipleCallback",null),this.internalCreateCallback=r(i,"internalCreateCallback",null),this.internalRemoveCallback=r(i,"internalRemoveCallback",null),i&&this.createMultiple(i)},create:function(e,t,i,r,n,s){if(void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=this.defaultKey),void 0===r&&(r=this.defaultFrame),void 0===n&&(n=!0),void 0===s&&(s=!0),this.isFull())return null;var l=new this.classType(this.scene,e,t,i,r);return this.scene.sys.displayList.add(l),l.preUpdate&&this.scene.sys.updateList.add(l),l.visible=n,l.setActive(s),this.add(l),l},createMultiple:function(e){if(this.isFull())return[];Array.isArray(e)||(e=[e]);var t=[];if(e[0].key)for(var i=0;i<e.length;i++){var r=this.createFromConfig(e[i]);t=t.concat(r)}return t},createFromConfig:function(t){if(this.isFull())return[];this.classType=r(t,"classType",this.classType);var i=r(t,"key",void 0),s=r(t,"frame",null),a=r(t,"visible",!0),c=r(t,"active",!0),h=[];if(void 0===i)return h;Array.isArray(i)||(i=[i]),Array.isArray(s)||(s=[s]);var u=r(t,"repeat",0),o=r(t,"randomKey",!1),d=r(t,"randomFrame",!1),f=r(t,"yoyo",!1),v=r(t,"quantity",!1),p=r(t,"frameQuantity",1),y=r(t,"max",0),m=l(i,s,{max:y,qty:v||p,random:o,randomB:d,repeat:u,yoyo:f});t.createCallback&&(this.createCallback=t.createCallback),t.removeCallback&&(this.removeCallback=t.removeCallback);for(var S=0;S<m.length;S++){var b=this.create(0,0,m[S].a,m[S].b,a,c);if(!b)break;h.push(b)}var g=n(t,"setXY.x",0),A=n(t,"setXY.y",0),C=n(t,"setXY.stepX",0),k=n(t,"setXY.stepY",0);e.SetXY(h,g,A,C,k);var F=n(t,"setRotation.value",0),Y=n(t,"setRotation.step",0);e.SetRotation(h,F,Y);var X=n(t,"setScale.x",1),T=n(t,"setScale.y",X),R=n(t,"setScale.stepX",0),x=n(t,"setScale.stepY",0);e.SetScale(h,X,T,R,x);var z=n(t,"setAlpha.value",1),D=n(t,"setAlpha.step",0);e.SetAlpha(h,z,D);var q=n(t,"setDepth.value",0),L=n(t,"setDepth.step",0);e.SetDepth(h,q,L);var V=n(t,"setScrollFactor.x",1),U=n(t,"setScrollFactor.y",V),H=n(t,"setScrollFactor.stepX",0),M=n(t,"setScrollFactor.stepY",0);e.SetScrollFactor(h,V,U,H,M);var P=r(t,"hitArea",null),I=r(t,"hitAreaCallback",null);P&&e.SetHitArea(h,P,I);var O=r(t,"gridAlign",!1);return O&&e.GridAlign(h,O),this.createMultipleCallback&&this.createMultipleCallback.call(this,h),h},preUpdate:function(e,t){if(this.runChildUpdate&&0!==this.children.size)for(var i=this.children.entries.slice(),r=0;r<i.length;r++){var n=i[r];n.active&&n.update(e,t)}},add:function(e,t){return void 0===t&&(t=!1),this.isFull()?this:(this.children.set(e),this.internalCreateCallback&&this.internalCreateCallback.call(this,e),this.createCallback&&this.createCallback.call(this,e),t&&(this.scene.sys.displayList.add(e),e.preUpdate&&this.scene.sys.updateList.add(e)),e.on(i.DESTROY,this.remove,this),this)},addMultiple:function(e,t){if(void 0===t&&(t=!1),Array.isArray(e))for(var i=0;i<e.length;i++)this.add(e[i],t);return this},remove:function(e,t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),this.children.contains(e)?(this.children.delete(e),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,e),this.removeCallback&&this.removeCallback.call(this,e),e.off(i.DESTROY,this.remove,this),r?e.destroy():t&&(e.scene.sys.displayList.remove(e),e.preUpdate&&e.scene.sys.updateList.remove(e)),this):this},clear:function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);for(var r=this.children,n=0;n<r.size;n++){var s=r.entries[n];s.off(i.DESTROY,this.remove,this),t?s.destroy():e&&(s.scene.sys.displayList.remove(s),s.preUpdate&&s.scene.sys.updateList.remove(s))}return this.children.clear(),this},contains:function(e){return this.children.contains(e)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getFirst:function(e,t,i,r,n,s,l){return this.getHandler(!0,1,e,t,i,r,n,s,l)},getFirstNth:function(e,t,i,r,n,s,l,a){return this.getHandler(!0,e,t,i,r,n,s,l,a)},getLast:function(e,t,i,r,n,s,l){return this.getHandler(!1,1,e,t,i,r,n,s,l)},getLastNth:function(e,t,i,r,n,s,l,a){return this.getHandler(!1,e,t,i,r,n,s,l,a)},getHandler:function(e,t,i,r,n,s,l,a,c){var h,u;void 0===i&&(i=!1),void 0===r&&(r=!1);var o=0,d=this.children.entries;if(e)for(u=0;u<d.length;u++)if((h=d[u]).active===i){if(++o===t)break}else h=null;else for(u=d.length-1;u>=0;u--)if((h=d[u]).active===i){if(++o===t)break}else h=null;return h?("number"==typeof n&&(h.x=n),"number"==typeof s&&(h.y=s),h):r?this.create(n,s,l,a,c):null},get:function(e,t,i,r,n){return this.getFirst(!1,!0,e,t,i,r,n)},getFirstAlive:function(e,t,i,r,n,s){return this.getFirst(!0,e,t,i,r,n,s)},getFirstDead:function(e,t,i,r,n,s){return this.getFirst(!1,e,t,i,r,n,s)},playAnimation:function(t,i){return e.PlayAnimation(this.children.entries,t,i),this},isFull:function(){return-1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function(e){void 0===e&&(e=!0);for(var t=0,i=0;i<this.children.size;i++)this.children.entries[i].active===e&&t++;return t},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var e=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-e},propertyValueSet:function(t,i,r,n,s){return e.PropertyValueSet(this.children.entries,t,i,r,n,s),this},propertyValueInc:function(t,i,r,n,s){return e.PropertyValueInc(this.children.entries,t,i,r,n,s),this},setX:function(t,i){return e.SetX(this.children.entries,t,i),this},setY:function(t,i){return e.SetY(this.children.entries,t,i),this},setXY:function(t,i,r,n){return e.SetXY(this.children.entries,t,i,r,n),this},incX:function(t,i){return e.IncX(this.children.entries,t,i),this},incY:function(t,i){return e.IncY(this.children.entries,t,i),this},incXY:function(t,i,r,n){return e.IncXY(this.children.entries,t,i,r,n),this},shiftPosition:function(t,i,r){return e.ShiftPosition(this.children.entries,t,i,r),this},angle:function(t,i){return e.Angle(this.children.entries,t,i),this},rotate:function(t,i){return e.Rotate(this.children.entries,t,i),this},rotateAround:function(t,i){return e.RotateAround(this.children.entries,t,i),this},rotateAroundDistance:function(t,i,r){return e.RotateAroundDistance(this.children.entries,t,i,r),this},setAlpha:function(t,i){return e.SetAlpha(this.children.entries,t,i),this},setTint:function(t,i,r,n){return e.SetTint(this.children.entries,t,i,r,n),this},setOrigin:function(t,i,r,n){return e.SetOrigin(this.children.entries,t,i,r,n),this},scaleX:function(t,i){return e.ScaleX(this.children.entries,t,i),this},scaleY:function(t,i){return e.ScaleY(this.children.entries,t,i),this},scaleXY:function(t,i,r,n){return e.ScaleXY(this.children.entries,t,i,r,n),this},setDepth:function(t,i){return e.SetDepth(this.children.entries,t,i),this},setBlendMode:function(t){return e.SetBlendMode(this.children.entries,t),this},setHitArea:function(t,i){return e.SetHitArea(this.children.entries,t,i),this},shuffle:function(){return e.Shuffle(this.children.entries),this},kill:function(e){this.children.contains(e)&&e.setActive(!1)},killAndHide:function(e){this.children.contains(e)&&(e.setActive(!1),e.setVisible(!1))},setVisible:function(t,i,r){return e.SetVisible(this.children.entries,t,i,r),this},toggleVisible:function(){return e.ToggleVisible(this.children.entries),this},destroy:function(e){void 0===e&&(e=!1),this.scene&&!this.ignoreDestroy&&(this.clear(!1,e),this.scene=void 0,this.children=void 0)}});module.exports=h;
},{"../../actions/":"ehJJ","../../utils/Class":"Q4x4","../events":"YK6V","../../utils/object/GetFastValue":"xbYy","../../utils/object/GetValue":"FWyS","../../utils/object/IsPlainObject":"TEos","../../utils/array/Range":"VtWV","../../structs/Set":"TNKn","../sprite/Sprite":"uRwE"}],"RpkM":[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");e=require("./ImageWebGLRenderer"),r=require("./ImageCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":"vnTW","./ImageWebGLRenderer":"XYqw","./ImageCanvasRenderer":"flNU"}],"WGAg":[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("../components"),t=require("../GameObject"),r=require("./ImageRender"),s=new e({Extends:t,Mixins:[i.Alpha,i.BlendMode,i.Depth,i.Flip,i.GetBounds,i.Mask,i.Origin,i.Pipeline,i.ScrollFactor,i.Size,i.TextureCrop,i.Tint,i.Transform,i.Visible,r],initialize:function(e,i,r,s,n){t.call(this,e,"Image"),this._crop=this.resetCropObject(),this.setTexture(s,n),this.setPosition(i,r),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});module.exports=s;
},{"../../utils/Class":"Q4x4","../components":"PnJA","../GameObject":"YzbT","./ImageRender":"RpkM"}],"abbt":[function(require,module,exports) {
var i=require("../../utils/Class"),t=require("../../utils/object/GetFastValue"),e=new i({initialize:function(i,e,s,o,r){if("object"==typeof i){var n=i;i=t(n,"x",0),e=t(n,"y",0),s=t(n,"power",0),o=t(n,"epsilon",100),r=t(n,"gravity",50)}else void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=0),void 0===o&&(o=100),void 0===r&&(r=50);this.x=i,this.y=e,this.active=!0,this._gravity=r,this._power=0,this._epsilon=0,this.power=s,this.epsilon=o},update:function(i,t){var e=this.x-i.x,s=this.y-i.y,o=e*e+s*s;if(0!==o){var r=Math.sqrt(o);o<this._epsilon&&(o=this._epsilon);var n=this._power*t/(o*r)*100;i.velocityX+=e*n,i.velocityY+=s*n}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(i){this._epsilon=i*i}},power:{get:function(){return this._power/this._gravity},set:function(i){this._power=i*this._gravity}},gravity:{get:function(){return this._gravity},set:function(i){var t=this.power;this._gravity=i,this.power=t}}});module.exports=e;
},{"../../utils/Class":"Q4x4","../../utils/object/GetFastValue":"xbYy"}],"z92E":[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("../../math/DegToRad"),e=require("../../math/distance/DistanceBetween"),s=new t({initialize:function(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(t,s){var h=this.emitter;this.frame=h.getFrame(),h.emitZone&&h.emitZone.getPoint(this),void 0===t?(h.follow&&(this.x+=h.follow.x+h.followOffset.x),this.x+=h.x.onEmit(this,"x")):this.x+=t,void 0===s?(h.follow&&(this.y+=h.follow.y+h.followOffset.y),this.y+=h.y.onEmit(this,"y")):this.y+=s,this.life=h.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var a=h.speedX.onEmit(this,"speedX"),o=h.speedY?h.speedY.onEmit(this,"speedY"):a;if(h.radial){var l=i(h.angle.onEmit(this,"angle"));this.velocityX=Math.cos(l)*Math.abs(a),this.velocityY=Math.sin(l)*Math.abs(o)}else if(h.moveTo){var n=h.moveToX.onEmit(this,"moveToX"),c=h.moveToY?h.moveToY.onEmit(this,"moveToY"):n,r=Math.atan2(c-this.y,n-this.x),m=e(this.x,this.y,n,c)/(this.life/1e3);this.velocityX=Math.cos(r)*m,this.velocityY=Math.sin(r)*m}else this.velocityX=a,this.velocityY=o;h.acceleration&&(this.accelerationX=h.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=h.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=h.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=h.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=h.delay.onEmit(this,"delay"),this.scaleX=h.scaleX.onEmit(this,"scaleX"),this.scaleY=h.scaleY?h.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=h.rotate.onEmit(this,"rotate"),this.rotation=i(this.angle),this.bounce=h.bounce.onEmit(this,"bounce"),this.alpha=h.alpha.onEmit(this,"alpha"),this.tint=h.tint.onEmit(this,"tint")},computeVelocity:function(t,i,e,s){var h=this.velocityX,a=this.velocityY,o=this.accelerationX,l=this.accelerationY,n=this.maxVelocityX,c=this.maxVelocityY;h+=t.gravityX*e,a+=t.gravityY*e,o&&(h+=o*e),l&&(a+=l*e),h>n?h=n:h<-n&&(h=-n),a>c?a=c:a<-c&&(a=-c),this.velocityX=h,this.velocityY=a;for(var r=0;r<s.length;r++)s[r].update(this,i,e)},checkBounds:function(t){var i=t.bounds,e=-this.bounce;this.x<i.x&&t.collideLeft?(this.x=i.x,this.velocityX*=e):this.x>i.right&&t.collideRight&&(this.x=i.right,this.velocityX*=e),this.y<i.y&&t.collideTop?(this.y=i.y,this.velocityY*=e):this.y>i.bottom&&t.collideBottom&&(this.y=i.bottom,this.velocityY*=e)},update:function(t,e,s){if(this.delayCurrent>0)return this.delayCurrent-=t,!1;var h=this.emitter,a=1-this.lifeCurrent/this.life;return this.lifeT=a,this.computeVelocity(h,t,e,s),this.x+=this.velocityX*e,this.y+=this.velocityY*e,h.bounds&&this.checkBounds(h),h.deathZone&&h.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=h.scaleX.onUpdate(this,"scaleX",a,this.scaleX),h.scaleY?this.scaleY=h.scaleY.onUpdate(this,"scaleY",a,this.scaleY):this.scaleY=this.scaleX,this.angle=h.rotate.onUpdate(this,"rotate",a,this.angle),this.rotation=i(this.angle),this.alpha=h.alpha.onUpdate(this,"alpha",a,this.alpha),this.tint=h.tint.onUpdate(this,"tint",a,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0)}});module.exports=s;
},{"../../utils/Class":"Q4x4","../../math/DegToRad":"FzPC","../../math/distance/DistanceBetween":"akRU"}],"ykOf":[function(require,module,exports) {
var i=require("../../../utils/Class"),n=new i({initialize:function(i,n){this.source=i,this.killOnEnter=n},willKill:function(i){var n=this.source.contains(i.x,i.y);return n&&this.killOnEnter||!n&&!this.killOnEnter}});module.exports=n;
},{"../../../utils/Class":"Q4x4"}],"BTWJ":[function(require,module,exports) {
var t=require("../../../utils/Class"),i=new t({initialize:function(t,i,s,h,e){void 0===h&&(h=!1),void 0===e&&(e=!0),this.source=t,this.points=[],this.quantity=i,this.stepRate=s,this.yoyo=h,this.counter=-1,this.seamless=e,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var t=this.points[0],i=this.points[this.points.length-1];t.x===i.x&&t.y===i.y&&this.points.pop()}var s=this._length;return this._length=this.points.length,this._length<s&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(t){return this.source=t,this.updateSource()},getPoint:function(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var i=this.points[this.counter];i&&(t.x=i.x,t.y=i.y)}});module.exports=i;
},{"../../../utils/Class":"Q4x4"}],"VFtU":[function(require,module,exports) {
var e=require("../../math/easing/EaseMap"),r=require("../../utils/string/UppercaseFirst"),t=function(t,s){var n=e.Power0;if("string"==typeof t)if(e.hasOwnProperty(t))n=e[t];else{var i="";t.indexOf(".")&&("in"===(i=t.substr(t.indexOf(".")+1)).toLowerCase()?i="easeIn":"out"===i.toLowerCase()?i="easeOut":"inout"===i.toLowerCase()&&(i="easeInOut")),t=r(t.substr(0,t.indexOf(".")+1)+i),e.hasOwnProperty(t)&&(n=e[t])}else"function"==typeof t?n=t:Array.isArray(t)&&t.length;if(!s)return n;var a=s.slice(0);return a.unshift(0),function(e){return a[0]=e,n.apply(this,a)}};module.exports=t;
},{"../../math/easing/EaseMap":"XARF","../../utils/string/UppercaseFirst":"hy3t"}],"Y5MY":[function(require,module,exports) {
var t=require("../../utils/Class"),e=require("../../math/FloatBetween"),i=require("../../tweens/builders/GetEaseFunction"),s=require("../../utils/object/GetFastValue"),a=require("../../math/Wrap"),r=new t({initialize:function(t,e,i,s){void 0===s&&(s=!1),this.propertyKey=e,this.propertyValue=i,this.defaultValue=i,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=s,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function(t,e){void 0===t&&(t={}),e&&(this.propertyKey=e),this.propertyValue=s(t,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(t){return this.propertyValue=t,this.setMethods()},setMethods:function(){var t=this.propertyValue,e=typeof t;if("number"===e)this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(t))this.onEmit=this.randomStaticValueEmit;else if("function"===e)this.emitOnly?this.onEmit=t:this.onUpdate=t;else if("object"===e&&(this.has(t,"random")||this.hasBoth(t,"start","end")||this.hasBoth(t,"min","max"))){this.start=this.has(t,"start")?t.start:t.min,this.end=this.has(t,"end")?t.end:t.max;var s=this.hasBoth(t,"min","max")||!!t.random;if(s){var a=t.random;Array.isArray(a)&&(this.start=a[0],this.end=a[1]),this.onEmit=this.randomRangedValueEmit}if(this.has(t,"steps"))this.steps=t.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var r=this.has(t,"ease")?t.ease:"Linear";this.ease=i(r),s||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else"object"===e&&this.hasEither(t,"onEmit","onUpdate")&&(this.has(t,"onEmit")&&(this.onEmit=t.onEmit),this.has(t,"onUpdate")&&(this.onUpdate=t.onUpdate));return this},has:function(t,e){return t.hasOwnProperty(e)},hasBoth:function(t,e,i){return t.hasOwnProperty(e)&&t.hasOwnProperty(i)},hasEither:function(t,e,i){return t.hasOwnProperty(e)||t.hasOwnProperty(i)},defaultEmit:function(t,e,i){return i},defaultUpdate:function(t,e,i,s){return s},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[t]},randomRangedValueEmit:function(t,i){var s=e(this.start,this.end);return t&&t.data[i]&&(t.data[i].min=s),s},steppedEmit:function(){var t=this.counter,e=this.counter+(this.end-this.start)/this.steps;return this.counter=a(e,this.start,this.end),t},easedValueEmit:function(t,e){if(t&&t.data[e]){var i=t.data[e];i.min=this.start,i.max=this.end}return this.start},easeValueUpdate:function(t,e,i){var s=t.data[e];return(s.max-s.min)*this.ease(i)+s.min}});module.exports=r;
},{"../../utils/Class":"Q4x4","../../math/FloatBetween":"urL2","../../tweens/builders/GetEaseFunction":"VFtU","../../utils/object/GetFastValue":"xbYy","../../math/Wrap":"gwbj"}],"tnad":[function(require,module,exports) {
var r=function(r,e){for(var n=0;n<e.length;n++)if(r.hasOwnProperty(e[n]))return!0;return!1};module.exports=r;
},{}],"qdzY":[function(require,module,exports) {
var r=function(r,e){return r.hasOwnProperty(e)};module.exports=r;
},{}],"psqK":[function(require,module,exports) {
var e=require("../../../utils/Class"),t=require("../../../math/Vector2"),i=new e({initialize:function(e){this.source=e,this._tempVec=new t},getPoint:function(e){var t=this._tempVec;this.source.getRandomPoint(t),e.x=t.x,e.y=t.y}});module.exports=i;
},{"../../../utils/Class":"Q4x4","../../../math/Vector2":"xARF"}],"Q4IT":[function(require,module,exports) {
var t=require("../../renderer/BlendModes"),e=require("../../utils/Class"),i=require("../components"),s=require("./zones/DeathZone"),a=require("./zones/EdgeZone"),n=require("./EmitterOp"),r=require("../../utils/object/GetFastValue"),h=require("../../utils/array/GetRandom"),o=require("../../utils/object/HasAny"),l=require("../../utils/object/HasValue"),c=require("./Particle"),u=require("./zones/RandomZone"),f=require("../../geom/rectangle/Rectangle"),d=require("../../utils/array/StableSort"),m=require("../../math/Vector2"),p=require("../../math/Wrap"),g=new e({Mixins:[i.BlendMode,i.Mask,i.ScrollFactor,i.Visible],initialize:function(e,i){this.manager=e,this.texture=e.texture,this.frames=[e.defaultFrame],this.defaultFrame=e.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=c,this.x=new n(i,"x",0,!0),this.y=new n(i,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new n(i,"accelerationX",0,!0),this.accelerationY=new n(i,"accelerationY",0,!0),this.maxVelocityX=new n(i,"maxVelocityX",1e4,!0),this.maxVelocityY=new n(i,"maxVelocityY",1e4,!0),this.speedX=new n(i,"speedX",0,!0),this.speedY=new n(i,"speedY",0,!0),this.moveTo=!1,this.moveToX=new n(i,"moveToX",0,!0),this.moveToY=new n(i,"moveToY",0,!0),this.bounce=new n(i,"bounce",0,!0),this.scaleX=new n(i,"scaleX",1),this.scaleY=new n(i,"scaleY",1),this.tint=new n(i,"tint",4294967295),this.alpha=new n(i,"alpha",1),this.lifespan=new n(i,"lifespan",1e3,!0),this.angle=new n(i,"angle",{min:0,max:360},!0),this.rotate=new n(i,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new n(i,"quantity",1,!0),this.delay=new n(i,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=t.NORMAL,this.follow=null,this.followOffset=new m,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,i&&this.fromJSON(i)},fromJSON:function(t){if(!t)return this;var e=0,i="";for(e=0;e<this.configFastMap.length;e++)i=this.configFastMap[e],l(t,i)&&(this[i]=r(t,i));for(e=0;e<this.configOpMap.length;e++)i=this.configOpMap[e],l(t,i)&&this[i].loadConfig(t);if(this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,l(t,"speed")&&(this.speedX.loadConfig(t,"speed"),this.speedY=null),(o(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),l(t,"scale")&&(this.scaleX.loadConfig(t,"scale"),this.scaleY=null),l(t,"callbackScope")){var s=r(t,"callbackScope",null);this.emitCallbackScope=s,this.deathCallbackScope=s}return l(t,"emitZone")&&this.setEmitZone(t.emitZone),l(t,"deathZone")&&this.setDeathZone(t.deathZone),l(t,"bounds")&&this.setBounds(t.bounds),l(t,"followOffset")&&this.followOffset.setFromObject(r(t,"followOffset",0)),l(t,"frame")&&this.setFrame(t.frame),this},toJSON:function(t){void 0===t&&(t={});var e=0,i="";for(e=0;e<this.configFastMap.length;e++)t[i=this.configFastMap[e]]=this[i];for(e=0;e<this.configOpMap.length;e++)this[i=this.configOpMap[e]]&&(t[i]=this[i].toJSON());return this.speedY||(delete t.speedX,t.speed=this.speedX.toJSON()),this.scaleY||(delete t.scaleX,t.scale=this.scaleX.toJSON()),t},startFollow:function(t,e,i,s){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=!1),this.follow=t,this.followOffset.set(e,i),this.trackVisible=s,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return h(this.frames);var t=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=p(this.currentFrame+1,0,this._frameLength)),t},setFrame:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=1),this.randomFrame=e,this.frameQuantity=i,this.currentFrame=0,this._frameCounter=0;var s=typeof t;if(Array.isArray(t)||"string"===s||"number"===s)this.manager.setEmitterFrames(t,this);else if("object"===s){var a=t;(t=r(a,"frames",null))&&this.manager.setEmitterFrames(t,this);var n=r(a,"cycle",!1);this.randomFrame=!n,this.frameQuantity=r(a,"quantity",i)}return this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(t){return void 0===t&&(t=!0),this.radial=t,this},setPosition:function(t,e){return this.x.onChange(t),this.y.onChange(e),this},setBounds:function(t,e,i,s){if("object"==typeof t){var a=t;t=a.x,e=a.y,i=l(a,"w")?a.w:a.width,s=l(a,"h")?a.h:a.height}return this.bounds?this.bounds.setTo(t,e,i,s):this.bounds=new f(t,e,i,s),this},setSpeedX:function(t){return this.speedX.onChange(t),this.radial=!1,this},setSpeedY:function(t){return this.speedY&&(this.speedY.onChange(t),this.radial=!1),this},setSpeed:function(t){return this.speedX.onChange(t),this.speedY=null,this.radial=!0,this},setScaleX:function(t){return this.scaleX.onChange(t),this},setScaleY:function(t){return this.scaleY.onChange(t),this},setScale:function(t){return this.scaleX.onChange(t),this.scaleY=null,this},setGravityX:function(t){return this.gravityX=t,this},setGravityY:function(t){return this.gravityY=t,this},setGravity:function(t,e){return this.gravityX=t,this.gravityY=e,this},setAlpha:function(t){return this.alpha.onChange(t),this},setTint:function(t){return this.tint.onChange(t),this},setEmitterAngle:function(t){return this.angle.onChange(t),this},setAngle:function(t){return this.angle.onChange(t),this},setLifespan:function(t){return this.lifespan.onChange(t),this},setQuantity:function(t){return this.quantity.onChange(t),this},setFrequency:function(t,e){return this.frequency=t,this._counter=0,e&&this.quantity.onChange(e),this},setEmitZone:function(t){if(void 0===t)this.emitZone=null;else{var e=r(t,"type","random"),i=r(t,"source",null);switch(e){case"random":this.emitZone=new u(i);break;case"edge":var s=r(t,"quantity",1),n=r(t,"stepRate",0),h=r(t,"yoyo",!1),o=r(t,"seamless",!0);this.emitZone=new a(i,s,n,h,o)}}return this},setDeathZone:function(t){if(void 0===t)this.deathZone=null;else{var e=r(t,"type","onEnter"),i=r(t,"source",null);if(i&&"function"==typeof i.contains){var a="onEnter"===e;this.deathZone=new s(i,a)}}return this},reserve:function(t){for(var e=this.dead,i=0;i<t;i++)e.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(t,e){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof t&&(this.emitCallback=t,e&&(this.emitCallbackScope=e)),this},onParticleDeath:function(t,e){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof t&&(this.deathCallback=t,e&&(this.deathCallbackScope=e)),this},killAll:function(){for(var t=this.dead,e=this.alive;e.length>0;)t.push(e.pop());return this},forEachAlive:function(t,e){for(var i=this.alive,s=i.length,a=0;a<s;++a)t.call(e,i[a],this);return this},forEachDead:function(t,e){for(var i=this.dead,s=i.length,a=0;a<s;++a)t.call(e,i[a],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return d.inplace(this.alive,this.depthSortCallback),this},flow:function(t,e){return void 0===e&&(e=1),this.frequency=t,this.quantity.onChange(e),this.start()},explode:function(t,e,i){return this.frequency=-1,this.emitParticle(t,e,i)},emitParticleAt:function(t,e,i){return this.emitParticle(i,t,e)},emitParticle:function(t,e,i){if(!this.atLimit()){void 0===t&&(t=this.quantity.onEmit());for(var s=this.dead,a=0;a<t;a++){var n=s.pop();if(n||(n=new this.particleClass(this)),n.fire(e,i),this.particleBringToTop?this.alive.push(n):this.alive.unshift(n),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,n,this),this.atLimit())break}return n}},preUpdate:function(t,e){var i=(e*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var s=this.manager.getProcessors(),a=this.alive,n=this.dead,r=0,h=[],o=a.length;for(r=0;r<o;r++){var l=a[r];l.update(e,i,s)&&h.push({index:r,particle:l})}if((o=h.length)>0){var c=this.deathCallback,u=this.deathCallbackScope;for(r=o-1;r>=0;r--){var f=h[r];a.splice(f.index,1),n.push(f.particle),c&&c.call(u,f.particle),f.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():this.frequency>0&&(this._counter-=e,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(t,e){return t.y-e.y}});module.exports=g;
},{"../../renderer/BlendModes":"XeVZ","../../utils/Class":"Q4x4","../components":"PnJA","./zones/DeathZone":"ykOf","./zones/EdgeZone":"BTWJ","./EmitterOp":"Y5MY","../../utils/object/GetFastValue":"xbYy","../../utils/array/GetRandom":"kyCN","../../utils/object/HasAny":"tnad","../../utils/object/HasValue":"qdzY","./Particle":"z92E","./zones/RandomZone":"psqK","../../geom/rectangle/Rectangle":"ACYM","../../utils/array/StableSort":"G8Dq","../../math/Vector2":"xARF","../../math/Wrap":"gwbj"}],"fESJ":[function(require,module,exports) {
var e=require("../../renderer/webgl/Utils"),t=function(t,a,r,l,i){var o=a.emitters.list,s=o.length;if(0!==s){var n=this.pipeline,p=n._tempMatrix1.copyFrom(l.matrix),u=n._tempMatrix2,d=n._tempMatrix3,h=n._tempMatrix4.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);p.multiply(h),t.setPipeline(n);var m=l.roundPixels,v=a.defaultFrame.glTexture,g=e.getTintAppendFloatAlphaAndSwap;n.setTexture2D(v,0);for(var x=0;x<s;x++){var M=o[x],c=M.alive,f=c.length;if(M.visible&&0!==f){var y=l.scrollX*M.scrollFactorX,T=l.scrollY*M.scrollFactorY;i&&(p.multiplyWithOffset(i,-y,-T),y=0,T=0),t.setBlendMode(M.blendMode)&&n.setTexture2D(v,0),M.mask&&(M.mask.preRenderWebGL(t,M,l),n.setTexture2D(v,0));for(var X=0;X<f;X++){var Y=c[X],b=Y.alpha*l.alpha;if(!(b<=0)){var F=Y.frame,k=-F.halfWidth,D=-F.halfHeight,R=k+F.width,W=D+F.height;d.applyITRS(0,0,Y.rotation,Y.scaleX,Y.scaleY),d.e=Y.x-y,d.f=Y.y-T,p.multiply(d,u);var _=u.getX(k,D),w=u.getY(k,D),A=u.getX(k,W),S=u.getY(k,W),G=u.getX(R,W),I=u.getY(R,W),L=u.getX(R,D),P=u.getY(R,D);m&&(_=Math.round(_),w=Math.round(w),A=Math.round(A),S=Math.round(S),G=Math.round(G),I=Math.round(I),L=Math.round(L),P=Math.round(P));var q=g(Y.tint,b);n.batchQuad(_,w,A,S,G,I,L,P,F.u0,F.v0,F.u1,F.v1,q,q,q,q,0,v,0)}}M.mask&&(M.mask.postRenderWebGL(t,l),n.setTexture2D(v,0))}}}};module.exports=t;
},{"../../renderer/webgl/Utils":"mjFh"}],"gr58":[function(require,module,exports) {
var a=function(a,t,e,r,l){var o=t.emitters.list,i=o.length;if(0!==i){var s=a._tempMatrix1.copyFrom(r.matrix),h=a._tempMatrix2,n=a._tempMatrix3,p=a._tempMatrix4.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);s.multiply(p);var c=r.roundPixels,m=a.currentContext;m.save();for(var v=0;v<i;v++){var d=o[v],f=d.alive,x=f.length;if(d.visible&&0!==x){var g=r.scrollX*d.scrollFactorX,u=r.scrollY*d.scrollFactorY;l&&(s.multiplyWithOffset(l,-g,-u),g=0,u=0),m.globalCompositeOperation=a.blendModes[d.blendMode];for(var y=0;y<x;y++){var M=f[y],b=M.alpha*r.alpha;if(!(b<=0)){var X=M.frame,Y=X.canvasData,_=-X.halfWidth,w=-X.halfHeight;n.applyITRS(0,0,M.rotation,M.scaleX,M.scaleY),n.e=M.x-g,n.f=M.y-u,s.multiply(n,h),m.globalAlpha=b,m.save(),h.copyToContext(m),c&&(_=Math.round(_),w=Math.round(w)),m.imageSmoothingEnabled=!(!a.antialias||X.source.scaleMode),m.drawImage(X.source.image,Y.x,Y.y,Y.width,Y.height,_,w,Y.width,Y.height),m.restore()}}}}m.restore()}};module.exports=a;
},{}],"HnZe":[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");e=require("./ParticleManagerWebGLRenderer"),r=require("./ParticleManagerCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":"vnTW","./ParticleManagerWebGLRenderer":"fESJ","./ParticleManagerCanvasRenderer":"gr58"}],"nRsY":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../components"),r=require("../GameObject"),i=require("./GravityWell"),s=require("../../structs/List"),n=require("./ParticleEmitter"),a=require("./ParticleManagerRender"),u=new e({Extends:r,Mixins:[t.Depth,t.Mask,t.Pipeline,t.Transform,t.Visible,a],initialize:function(e,t,i,n){if(r.call(this,e,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===i||"object"!=typeof i&&!Array.isArray(i)||(n=i,i=null),this.setTexture(t,i),this.initPipeline(),this.emitters=new s(this),this.wells=new s(this),n){Array.isArray(n)||(n=[n]);for(var a=0;a<n.length;a++)this.createEmitter(n[a])}},setTexture:function(e,t){return this.texture=this.scene.sys.textures.get(e),this.setFrame(t)},setFrame:function(e){this.frame=this.texture.get(e);var t=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),r=[];return t.forEach(function(e){r.push(e.name)}),this.frameNames=r,this.defaultFrame=this.frame,this},setEmitterFrames:function(e,t){Array.isArray(e)||(e=[e]);var r=t.frames;r.length=0;for(var i=0;i<e.length;i++){var s=e[i];-1!==this.frameNames.indexOf(s)&&r.push(this.texture.get(s))}return r.length>0?t.defaultFrame=r[0]:t.defaultFrame=this.defaultFrame,this},addEmitter:function(e){return this.emitters.add(e)},createEmitter:function(e){return this.addEmitter(new n(this,e))},removeEmitter:function(e){return this.emitters.remove(e,!0)},addGravityWell:function(e){return this.wells.add(e)},createGravityWell:function(e){return this.addGravityWell(new i(e))},emitParticle:function(e,t,r){for(var i=this.emitters.list,s=0;s<i.length;s++){var n=i[s];n.active&&n.emitParticle(e,t,r)}return this},emitParticleAt:function(e,t,r){return this.emitParticle(r,e,t)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(e,t){t*=this.timeScale;for(var r=this.emitters.list,i=0;i<r.length;i++){var s=r[i];s.active&&s.preUpdate(e,t)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});module.exports=u;
},{"../../utils/Class":"Q4x4","../components":"PnJA","../GameObject":"YzbT","./GravityWell":"abbt","../../structs/List":"qQUc","./ParticleEmitter":"Q4IT","./ParticleManagerRender":"HnZe"}],"fh7b":[function(require,module,exports) {
module.exports={DeathZone:require("./DeathZone"),EdgeZone:require("./EdgeZone"),RandomZone:require("./RandomZone")};
},{"./DeathZone":"ykOf","./EdgeZone":"BTWJ","./RandomZone":"psqK"}],"t0vF":[function(require,module,exports) {
module.exports={GravityWell:require("./GravityWell"),Particle:require("./Particle"),ParticleEmitter:require("./ParticleEmitter"),ParticleEmitterManager:require("./ParticleEmitterManager"),Zones:require("./zones")};
},{"./GravityWell":"abbt","./Particle":"z92E","./ParticleEmitter":"Q4IT","./ParticleEmitterManager":"nRsY","./zones":"fh7b"}],"pMeK":[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("../components"),t=require("../sprite/Sprite"),s=new e({Extends:t,Mixins:[i.PathFollower],initialize:function(e,i,s,r,a,n){t.call(this,e,s,r,a,n),this.path=i},preUpdate:function(e,i){this.anims.update(e,i),this.pathUpdate(e)}});module.exports=s;
},{"../../utils/Class":"Q4x4","../components":"PnJA","../sprite/Sprite":"uRwE"}],"SAsD":[function(require,module,exports) {
var a=require("../../renderer/webgl/Utils"),t=function(t,l,i,e,r){var p=l.frame,n=p.width,h=p.height,s=a.getTintAppendFloatAlpha;this.pipeline.batchTexture(l,p.glTexture,n,h,l.x,l.y,n,h,l.scaleX,l.scaleY,l.rotation,l.flipX,!l.flipY,l.scrollFactorX,l.scrollFactorY,l.displayOriginX,l.displayOriginY,0,0,n,h,s(l._tintTL,e.alpha*l._alphaTL),s(l._tintTR,e.alpha*l._alphaTR),s(l._tintBL,e.alpha*l._alphaBL),s(l._tintBR,e.alpha*l._alphaBR),l._isTinted&&l.tintFill,0,0,e,r),t.setBlankTexture(!0)};module.exports=t;
},{"../../renderer/webgl/Utils":"mjFh"}],"nwaL":[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");e=require("./RenderTextureWebGLRenderer"),r=require("./RenderTextureCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":"vnTW","./RenderTextureWebGLRenderer":"SAsD","./RenderTextureCanvasRenderer":"flNU"}],"o2Et":[function(require,module,exports) {
var x=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var r=16*Math.random()|0;return("x"===x?r:3&r|8).toString(16)})};module.exports=x;
},{}],"FDlA":[function(require,module,exports) {
var e=require("../../renderer/BlendModes"),t=require("../../cameras/2d/BaseCamera"),r=require("../../display/canvas/CanvasPool"),i=require("../../utils/Class"),s=require("../components"),h=require("../../const"),a=require("../../textures/Frame"),n=require("../GameObject"),u=require("./RenderTextureRender"),c=require("../../renderer/webgl/Utils"),o=require("../../utils/string/UUID"),l=new i({Extends:n,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,u],initialize:function(e,i,s,a,u,c,l){void 0===i&&(i=0),void 0===s&&(s=0),void 0===a&&(a=32),void 0===u&&(u=32),n.call(this,e,"RenderTexture"),this.renderer=e.sys.game.renderer,this.textureManager=e.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.framebuffer=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,void 0===c?(this.canvas=r.create2D(this,a,u),this.texture=e.sys.textures.addCanvas(o(),this.canvas),this.frame=this.texture.get()):(this.texture=e.sys.textures.get(c),this.frame=this.texture.get(l),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new t(0,0,a,u),this.gl=null,this.glTexture=null;var d=this.renderer;if(d.type===h.WEBGL){var f=d.gl;this.gl=f,this.glTexture=this.frame.source.glTexture,this.drawGameObject=this.batchGameObjectWebGL,this.framebuffer=d.createFramebuffer(a,u,this.glTexture,!1)}else d.type===h.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas);this.camera.setScene(e),this.setPosition(i,s),void 0===c&&this.setSize(a,u),this.setOrigin(0,0),this.initPipeline()},setSize:function(e,t){return this.resize(e,t)},resize:function(e,t){if(void 0===t&&(t=e),e!==this.width||t!==this.height){if("__BASE"===this.frame.name){if(this.canvas.width=e,this.canvas.height=t,this.texture.width=e,this.texture.height=t,this.gl){var r=this.gl;this.renderer.deleteTexture(this.frame.source.glTexture),this.renderer.deleteFramebuffer(this.framebuffer);var i=this.renderer.createTexture2D(0,r.NEAREST,r.NEAREST,r.CLAMP_TO_EDGE,r.CLAMP_TO_EDGE,r.RGBA,null,e,t,!1);this.framebuffer=this.renderer.createFramebuffer(e,t,i,!1),this.frame.source.isRenderTexture=!0,this.frame.glTexture=i,this.glTexture=i}this.frame.source.width=e,this.frame.source.height=t,this.camera.setSize(e,t),this.frame.setSize(e,t),this.width=e,this.height=t}}else{var s=this.texture.getSourceImage();this.frame.cutX+e>s.width&&(e=s.width-this.frame.cutX),this.frame.cutY+t>s.height&&(t=s.height-this.frame.cutY),this.frame.setSize(e,t,this.frame.cutX,this.frame.cutY)}this.updateDisplayOrigin();var h=this.input;return h&&!h.customHitArea&&(h.hitArea.width=e,h.hitArea.height=t),this},setGlobalTint:function(e){return this.globalTint=e,this},setGlobalAlpha:function(e){return this.globalAlpha=e,this},saveTexture:function(e){return this.textureManager.renameTexture(this.texture.key,e),this._saved=!0,this.texture},fill:function(e,t,r,i,s,h){void 0===t&&(t=1),void 0===r&&(r=0),void 0===i&&(i=0),void 0===s&&(s=this.frame.cutWidth),void 0===h&&(h=this.frame.cutHeight);var a=255&(e>>16|0),n=255&(e>>8|0),u=255&(0|e),o=this.gl,l=this.frame;if(this.camera.preRender(1,1),o){var d=this.camera._cx,f=this.camera._cy,m=this.camera._cw,g=this.camera._ch;this.renderer.setFramebuffer(this.framebuffer,!1),this.renderer.pushScissor(d,f,m,g,g);var v=this.pipeline;v.projOrtho(0,this.texture.width,0,this.texture.height,-1e3,1e3),v.drawFillRect(r,i,s,h,c.getTintFromFloats(a/255,n/255,u/255,1),t),this.renderer.setFramebuffer(null,!1),this.renderer.popScissor(),v.projOrtho(0,v.width,v.height,0,-1e3,1e3)}else this.renderer.setContext(this.context),this.context.fillStyle="rgba("+a+","+n+","+u+","+t+")",this.context.fillRect(r+l.cutX,i+l.cutY,s,h),this.renderer.setContext();return this.dirty=!0,this},clear:function(){if(this.dirty){var e=this.gl;if(e){var t=this.renderer;t.setFramebuffer(this.framebuffer,!0),this.frame.cutWidth===this.canvas.width&&this.frame.cutHeight===this.canvas.height||e.scissor(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t.setFramebuffer(null,!0)}else{var r=this.context;r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),r.restore()}this.dirty=!1}return this},erase:function(t,r,i){this._eraseMode=!0;var s=this.renderer.currentBlendMode;return this.renderer.setBlendMode(e.ERASE),this.draw(t,r,i,1,16777215),this.renderer.setBlendMode(s),this._eraseMode=!1,this},draw:function(e,t,r,i,s){void 0===i&&(i=this.globalAlpha),s=void 0===s?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(s>>16)+(65280&s)+((255&s)<<16),Array.isArray(e)||(e=[e]);var h=this.gl;if(this.camera.preRender(1,1),h){var a=this.camera._cx,n=this.camera._cy,u=this.camera._cw,c=this.camera._ch;this.renderer.setFramebuffer(this.framebuffer,!1),this.renderer.pushScissor(a,n,u,c,c);var o=this.pipeline;o.projOrtho(0,this.texture.width,0,this.texture.height,-1e3,1e3),this.batchList(e,t,r,i,s),o.flush(),this.renderer.setFramebuffer(null,!1),this.renderer.popScissor(),o.projOrtho(0,o.width,o.height,0,-1e3,1e3)}else this.renderer.setContext(this.context),this.batchList(e,t,r,i,s),this.renderer.setContext();return this.dirty=!0,this},drawFrame:function(e,t,r,i,s,h){void 0===r&&(r=0),void 0===i&&(i=0),void 0===s&&(s=this.globalAlpha),h=void 0===h?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(h>>16)+(65280&h)+((255&h)<<16);var a=this.gl,n=this.textureManager.getFrame(e,t);if(n){if(this.camera.preRender(1,1),a){var u=this.camera._cx,c=this.camera._cy,o=this.camera._cw,l=this.camera._ch;this.renderer.setFramebuffer(this.framebuffer,!1),this.renderer.pushScissor(u,c,o,l,l);var d=this.pipeline;d.projOrtho(0,this.texture.width,0,this.texture.height,-1e3,1e3),d.batchTextureFrame(n,r+this.frame.cutX,i+this.frame.cutY,h,s,this.camera.matrix,null),d.flush(),this.renderer.setFramebuffer(null,!1),this.renderer.popScissor(),d.projOrtho(0,d.width,d.height,0,-1e3,1e3)}else this.batchTextureFrame(n,r+this.frame.cutX,i+this.frame.cutY,s,h);this.dirty=!0}return this},batchList:function(e,t,r,i,s){for(var h=0;h<e.length;h++){var n=e[h];n&&n!==this&&(n.renderWebGL||n.renderCanvas?this.drawGameObject(n,t,r):n.isParent||n.list?this.batchGroup(n.getChildren(),t,r):"string"==typeof n?this.batchTextureFrameKey(n,null,t,r,i,s):n instanceof a?this.batchTextureFrame(n,t,r,i,s):Array.isArray(n)&&this.batchList(n,t,r,i,s))}},batchGroup:function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0),t+=this.frame.cutX,r+=this.frame.cutY;for(var i=0;i<e.length;i++){var s=e[i];if(s.willRender()){var h=s.x+t,a=s.y+r;this.drawGameObject(s,h,a)}}},batchGameObjectWebGL:function(e,t,r){void 0===t&&(t=e.x),void 0===r&&(r=e.y);var i=e.x,s=e.y;this._eraseMode||this.renderer.setBlendMode(e.blendMode),e.setPosition(t+this.frame.cutX,r+this.frame.cutY),e.renderWebGL(this.renderer,e,0,this.camera,null),e.setPosition(i,s)},batchGameObjectCanvas:function(t,r,i){void 0===r&&(r=t.x),void 0===i&&(i=t.y);var s=t.x,h=t.y;if(this._eraseMode){var a=t.blendMode;t.blendMode=e.ERASE}t.setPosition(r+this.frame.cutX,i+this.frame.cutY),t.renderCanvas(this.renderer,t,0,this.camera,null),t.setPosition(s,h),this._eraseMode&&(t.blendMode=a)},batchTextureFrameKey:function(e,t,r,i,s,h){var a=this.textureManager.getFrame(e,t);a&&this.batchTextureFrame(a,r,i,s,h)},batchTextureFrame:function(e,t,r,i,s){if(void 0===t&&(t=0),void 0===r&&(r=0),t+=this.frame.cutX,r+=this.frame.cutY,this.gl)this.pipeline.batchTextureFrame(e,t,r,s,i,this.camera.matrix,null);else{var h=this.context,a=e.canvasData,n=e.source.image,u=this.camera.matrix;h.globalAlpha=this.globalAlpha,h.setTransform(u[0],u[1],u[2],u[3],u[4],u[5]),h.drawImage(n,a.x,a.y,a.width,a.height,t,r,a.width,a.height)}},snapshotArea:function(e,t,r,i,s,h,a){return this.gl?this.renderer.snapshotFramebuffer(this.framebuffer,this.width,this.height,s,!1,e,t,r,i,h,a):this.renderer.snapshotCanvas(this.canvas,s,!1,e,t,r,i,h,a),this},snapshot:function(e,t,r){return this.gl?this.renderer.snapshotFramebuffer(this.framebuffer,this.width,this.height,e,!1,0,0,this.width,this.height,t,r):this.renderer.snapshotCanvas(this.canvas,e,!1,0,0,this.width,this.height,t,r),this},snapshotPixel:function(e,t,r){return this.gl?this.renderer.snapshotFramebuffer(this.framebuffer,this.width,this.height,r,!0,e,t):this.renderer.snapshotCanvas(this.canvas,r,!0,e,t),this},preDestroy:function(){this._saved||(r.remove(this.canvas),this.gl&&this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.framebuffer=null,this.texture=null,this.glTexture=null)}});module.exports=l;
},{"../../renderer/BlendModes":"XeVZ","../../cameras/2d/BaseCamera":"ZcMy","../../display/canvas/CanvasPool":"Brmu","../../utils/Class":"Q4x4","../components":"PnJA","../../const":"ktri","../../textures/Frame":"qOsR","../GameObject":"YzbT","./RenderTextureRender":"nwaL","../../renderer/webgl/Utils":"mjFh","../../utils/string/UUID":"o2Et"}],"T0aB":[function(require,module,exports) {
var T={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"};module.exports=T;
},{}],"XwlF":[function(require,module,exports) {
var e=require("../../utils/object/GetValue"),t=function(t,r){var a=r.width,n=r.height,h=Math.floor(a/2),i=Math.floor(n/2),l=e(r,"chars","");if(""!==l){var o=e(r,"image",""),s=e(r,"offset.x",0),f=e(r,"offset.y",0),c=e(r,"spacing.x",0),g=e(r,"spacing.y",0),u=e(r,"lineSpacing",0),d=e(r,"charsPerRow",null);null===d&&(d=t.sys.textures.getFrame(o).width/a)>l.length&&(d=l.length);for(var x=s,v=f,y={retroFont:!0,font:o,size:a,lineHeight:n+u,chars:{}},m=0,p=0;p<l.length;p++){var w=l.charCodeAt(p);y.chars[w]={x:x,y:v,width:a,height:n,centerX:h,centerY:i,xOffset:0,yOffset:0,xAdvance:a,data:{},kerning:{}},++m===d?(m=0,x=s,v+=n+g):x+=a+c}return{data:y,frame:null,texture:o}}};module.exports=t;
},{"../../utils/object/GetValue":"FWyS"}],"qmoK":[function(require,module,exports) {
var e=require("./const"),r=require("../../utils/object/Extend"),t={Parse:require("./ParseRetroFont")};t=r(!1,t,e),module.exports=t;
},{"./const":"T0aB","../../utils/object/Extend":"CtVZ","./ParseRetroFont":"XwlF"}],"CNfp":[function(require,module,exports) {
var e=require("../../renderer/webgl/Utils"),r=function(r,l,t,a,o){var i=l.pipeline;r.setPipeline(i,l);var c=i._tempMatrix1,p=i._tempMatrix2,s=i._tempMatrix3;p.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),c.copyFrom(a.matrix),o?(c.multiplyWithOffset(o,-a.scrollX*l.scrollFactorX,-a.scrollY*l.scrollFactorY),p.e=l.x,p.f=l.y,c.multiply(p,s)):(p.e-=a.scrollX*l.scrollFactorX,p.f-=a.scrollY*l.scrollFactorY,c.multiply(p,s));var n=l.frame.glTexture,u=l.vertices,x=l.uv,v=l.colors,d=l.alphas,m=l.alpha,f=e.getTintAppendFloatAlphaAndSwap,h=a.roundPixels,y=u.length,F=Math.floor(.5*y);i.flush(),i.setTexture2D(n,0);var M=i.vertexViewF32,g=i.vertexViewU32,C=i.vertexCount*i.vertexComponentCount-1,X=0,Y=l.tintFill;l.dirty&&l.updateVertices();for(var b=l.debugCallback,w=[],T=0;T<y;T+=2){var A=u[T+0],V=u[T+1],_=A*s.a+V*s.c+s.e,P=A*s.b+V*s.d+s.f;h&&(_=Math.round(_),P=Math.round(P)),M[++C]=_,M[++C]=P,M[++C]=x[T+0],M[++C]=x[T+1],M[++C]=Y,g[++C]=f(v[X],a.alpha*(d[X]*m)),X++,b&&(w[T+0]=_,w[T+1]=P)}b&&b.call(l,l,y,w),i.vertexCount+=F};module.exports=r;
},{"../../renderer/webgl/Utils":"mjFh"}],"LtVo":[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");e=require("./RopeWebGLRenderer"),r=require("./RopeCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":"vnTW","./RopeWebGLRenderer":"CNfp","./RopeCanvasRenderer":"vnTW"}],"kFjg":[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("../components"),s=require("../GameObject"),e=require("./RopeRender"),r=require("../../math/Vector2"),h=new t({Extends:s,Mixins:[i.AlphaSingle,i.BlendMode,i.Depth,i.Flip,i.Mask,i.Pipeline,i.Size,i.Texture,i.Transform,i.Visible,i.ScrollFactor,e],initialize:function(t,e,h,n,l,a,o,u,f){void 0===n&&(n="__DEFAULT"),void 0===a&&(a=2),void 0===o&&(o=!0),s.call(this,t,"Rope"),this.anims=new i.Animation(this),this.points=a,this.vertices,this.uv,this.colors,this.alphas,this.tintFill="__DEFAULT"===n?2:0,this.dirty=!1,this.horizontal=o,this._flipX=!1,this._flipY=!1,this._perp=new r,this.debugCallback=null,this.debugGraphic=null,this.setTexture(n,l),this.setPosition(e,h),this.setSizeToFrame(),this.initPipeline("TextureTintStripPipeline"),Array.isArray(a)&&this.resizeArrays(a.length),this.setPoints(a,u,f),this.updateVertices()},preUpdate:function(t,i){var s=this.anims.currentFrame;this.anims.update(t,i),this.anims.currentFrame!==s&&(this.updateUVs(),this.updateVertices())},play:function(t,i,s){return this.anims.play(t,i,s),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(t,i,s){return void 0===t&&(t=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(t,i,s))},setVertical:function(t,i,s){return void 0===t&&(t=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(t,i,s)):this},setTintFill:function(t){return void 0===t&&(t=0),this.tintFill=t,this},setAlphas:function(t,i){var s=this.points.length;if(s<1)return this;var e,r=this.alphas;void 0===t?t=[1]:Array.isArray(t)||void 0!==i||(t=[t]);var h=0;if(void 0!==i)for(e=0;e<s;e++)r[h=2*e]=t,r[h+1]=i;else if(t.length===s)for(e=0;e<s;e++)r[h=2*e]=t[e],r[h+1]=t[e];else{var n=t[0];for(e=0;e<s;e++)h=2*e,t.length>h&&(n=t[h]),r[h]=n,t.length>h+1&&(n=t[h+1]),r[h+1]=n}return this},setColors:function(t){var i=this.points.length;if(i<1)return this;var s,e=this.colors;void 0===t?t=[16777215]:Array.isArray(t)||(t=[t]);var r=0;if(t.length===i)for(s=0;s<i;s++)e[r=2*s]=t[s],e[r+1]=t[s];else{var h=t[0];for(s=0;s<i;s++)r=2*s,t.length>r&&(h=t[r]),e[r]=h,t.length>r+1&&(h=t[r+1]),e[r+1]=h}return this},setPoints:function(t,i,s){if(void 0===t&&(t=2),"number"==typeof t){var e,r,h,n=t;if(n<2&&(n=2),t=[],this.horizontal)for(h=-this.frame.halfWidth,r=this.frame.width/(n-1),e=0;e<n;e++)t.push({x:h+e*r,y:0});else for(h=-this.frame.halfHeight,r=this.frame.height/(n-1),e=0;e<n;e++)t.push({x:0,y:h+e*r})}var l=t.length,a=this.points.length;return l<1?(console.warn("Rope: Not enough points given"),this):(1===l&&(t.unshift({x:0,y:0}),l++),a!==l&&this.resizeArrays(l),this.points=t,this.updateUVs(),null!=i&&this.setColors(i),null!=s&&this.setAlphas(s),this)},updateUVs:function(){for(var t=this.uv,i=this.points.length,s=this.frame.u0,e=this.frame.v0,r=this.frame.u1,h=this.frame.v1,n=(r-s)/(i-1),l=(h-e)/(i-1),a=0;a<i;a++){var o,u,f,p,c=4*a;this.horizontal?(this._flipX?(o=r-a*n,f=r-a*n):(o=s+a*n,f=s+a*n),this._flipY?(u=h,p=e):(u=e,p=h)):(this._flipX?(o=s,f=r):(o=r,f=s),this._flipY?(u=h-a*l,p=h-a*l):(u=e+a*l,p=e+a*l)),t[c+0]=o,t[c+1]=u,t[c+2]=f,t[c+3]=p}return this},resizeArrays:function(t){var i=this.colors,s=this.alphas;this.vertices=new Float32Array(4*t),this.uv=new Float32Array(4*t),i=new Uint32Array(2*t),s=new Float32Array(2*t);for(var e=0;e<2*t;e++)i[e]=16777215,s[e]=1;return this.colors=i,this.alphas=s,this.dirty=!0,this},updateVertices:function(){var t=this._perp,i=this.points,s=this.vertices,e=i.length;if(this.dirty=!1,!(e<1)){for(var r,h=i[0],n=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,l=0;l<e;l++){var a=i[l],o=4*l;r=l<e-1?i[l+1]:a,t.x=r.y-h.y,t.y=-(r.x-h.x);var u=t.length();t.x/=u,t.y/=u,t.x*=n,t.y*=n,s[o]=a.x+t.x,s[o+1]=a.y+t.y,s[o+2]=a.x-t.x,s[o+3]=a.y-t.y,h=a}return this}},setDebug:function(t,i){return this.debugGraphic=t,this.debugCallback=t||i?i||this.renderDebugVerts:null,this},renderDebugVerts:function(t,i,s){var e=t.debugGraphic,r=s[0],h=s[1],n=s[2],l=s[3];e.lineBetween(r,h,n,l);for(var a=4;a<i;a+=4){var o=s[a+0],u=s[a+1],f=s[a+2],p=s[a+3];e.lineBetween(r,h,o,u),e.lineBetween(n,l,f,p),e.lineBetween(n,l,o,u),e.lineBetween(o,u,f,p),r=o,h=u,n=f,l=p}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(t){return this._flipX=t,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(t){return this._flipY=t,this.updateUVs()}}});module.exports=h;
},{"../../utils/Class":"Q4x4","../components":"PnJA","../GameObject":"YzbT","./RopeRender":"LtVo","../../math/Vector2":"xARF"}],"Yulr":[function(require,module,exports) {
var e=function(e,n,t){var i=e.canvas,a=e.context,s=e.style,r=[],h=0,l=t.length;s.maxLines>0&&s.maxLines<t.length&&(l=s.maxLines),s.syncFont(i,a);for(var o=0;o<l;o++){var c=s.strokeThickness;c+=a.measureText(t[o]).width,s.wordWrap&&(c-=a.measureText(" ").width),r[o]=Math.ceil(c),h=Math.max(h,r[o])}var x=n.fontSize+s.strokeThickness,m=x*l,d=e.lineSpacing;return l>1&&(m+=d*(l-1)),{width:h,height:m,lines:l,lineWidths:r,lineSpacing:d,lineHeight:x}};module.exports=e;
},{}],"dSju":[function(require,module,exports) {
var t=require("../../../renderer/webgl/Utils"),i=function(i,l,a,e,r){if(0!==l.width&&0!==l.height){var p=l.frame,h=p.width,n=p.height,o=t.getTintAppendFloatAlpha;this.pipeline.batchTexture(l,p.glTexture,h,n,l.x,l.y,h/l.style.resolution,n/l.style.resolution,l.scaleX,l.scaleY,l.rotation,l.flipX,l.flipY,l.scrollFactorX,l.scrollFactorY,l.displayOriginX,l.displayOriginY,0,0,h,n,o(l._tintTL,e.alpha*l._alphaTL),o(l._tintTR,e.alpha*l._alphaTR),o(l._tintBL,e.alpha*l._alphaBL),o(l._tintBR,e.alpha*l._alphaBR),l._isTinted&&l.tintFill,0,0,e,r)}};module.exports=i;
},{"../../../renderer/webgl/Utils":"mjFh"}],"nkOG":[function(require,module,exports) {
var t=function(t,e,h,i,r){0!==e.width&&0!==e.height&&t.batchSprite(e,e.frame,i,r)};module.exports=t;
},{}],"S677":[function(require,module,exports) {
var e=require("../../../utils/NOOP"),r=require("../../../utils/NOOP");e=require("./TextWebGLRenderer"),r=require("./TextCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../../utils/NOOP":"vnTW","./TextWebGLRenderer":"dSju","./TextCanvasRenderer":"nkOG"}],"SRjI":[function(require,module,exports) {
var e=require("../../display/canvas/CanvasPool"),t=function(t){var a=e.create(this),n=a.getContext("2d");t.syncFont(a,n);var i=Math.ceil(n.measureText(t.testString).width*t.baselineX),r=i,s=2*r;r=r*t.baselineY|0,a.width=i,a.height=s,n.fillStyle="#f00",n.fillRect(0,0,i,s),n.font=t._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(t.testString,0,r);var f={ascent:0,descent:0,fontSize:0};if(!n.getImageData(0,0,i,s))return f.ascent=r,f.descent=r+6,f.fontSize=f.ascent+f.descent,e.remove(a),f;var l,o,c=n.getImageData(0,0,i,s).data,d=c.length,g=4*i,v=0,h=!1;for(l=0;l<r;l++){for(o=0;o<g;o+=4)if(255!==c[v+o]){h=!0;break}if(h)break;v+=g}for(f.ascent=r-l,v=d-g,h=!1,l=s;l>r;l--){for(o=0;o<g;o+=4)if(255!==c[v+o]){h=!0;break}if(h)break;v-=g}return f.descent=l-r,f.fontSize=f.ascent+f.descent,e.remove(a),f};module.exports=t;
},{"../../display/canvas/CanvasPool":"Brmu"}],"s4os":[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("../../utils/object/GetAdvancedValue"),s=require("../../utils/object/GetValue"),e=require("./MeasureText"),o={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃâ°qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},n=new t({initialize:function(t,i){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this._font,this.setStyle(i,!1,!0);var o=s(i,"metrics",!1);this.metrics=o?{ascent:s(o,"ascent",0),descent:s(o,"descent",0),fontSize:s(o,"fontSize",0)}:e(this)},setStyle:function(t,e,n){for(var r in void 0===e&&(e=!0),void 0===n&&(n=!1),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),o){var h=n?o[r][1]:this[r];this[r]="wordWrapCallback"===r||"wordWrapCallbackScope"===r?s(t,o[r][0],h):i(t,o[r][0],h)}var a=s(t,"font",null);null!==a&&this.setFont(a,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var d=s(t,"fill",null);return null!==d&&(this.color=d),e?this.update(!0):this.parent},syncFont:function(t,i){i.font=this._font},syncStyle:function(t,i){i.textBaseline="alphabetic",i.fillStyle=this.color,i.strokeStyle=this.stroke,i.lineWidth=this.strokeThickness,i.lineCap="round",i.lineJoin="round"},syncShadow:function(t,i){i?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=e(this)),this.parent.updateText()},setFont:function(t,i){void 0===i&&(i=!0);var e=t,o="",n="";if("string"!=typeof t)e=s(t,"fontFamily","Courier"),o=s(t,"fontSize","16px"),n=s(t,"fontStyle","");else{var r=t.split(" "),h=0;n=r.length>2?r[h++]:"",o=r[h++]||"16px",e=r[h++]||"Courier"}return e===this.fontFamily&&o===this.fontSize&&n===this.fontStyle||(this.fontFamily=e,this.fontSize=o,this.fontStyle=n,i&&this.update(!0)),this.parent},setFontFamily:function(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},setFontStyle:function(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},setFontSize:function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},setTestString:function(t){return this.testString=t,this.update(!0)},setFixedSize:function(t,i){return this.fixedWidth=t,this.fixedHeight=i,t&&(this.parent.width=t),i&&(this.parent.height=i),this.update(!1)},setBackgroundColor:function(t){return this.backgroundColor=t,this.update(!1)},setFill:function(t){return this.color=t,this.update(!1)},setColor:function(t){return this.color=t,this.update(!1)},setResolution:function(t){return this.resolution=t,this.update(!1)},setStroke:function(t,i){return void 0===i&&(i=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===i||(this.stroke=t,this.strokeThickness=i,this.update(!0)),this.parent},setShadow:function(t,i,s,e,o,n){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s="#000"),void 0===e&&(e=0),void 0===o&&(o=!1),void 0===n&&(n=!0),this.shadowOffsetX=t,this.shadowOffsetY=i,this.shadowColor=s,this.shadowBlur=e,this.shadowStroke=o,this.shadowFill=n,this.update(!1)},setShadowOffset:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.shadowOffsetX=t,this.shadowOffsetY=i,this.update(!1)},setShadowColor:function(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},setShadowBlur:function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},setShadowStroke:function(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function(t,i){return void 0===i&&(i=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=i,this.update(!1)},setWordWrapCallback:function(t,i){return void 0===i&&(i=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=i,this.update(!1)},setAlign:function(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},setMaxLines:function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},getTextMetrics:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function(){var t={};for(var i in o)t[i]=this[i];return t.metrics=this.getTextMetrics(),t},destroy:function(){this.parent=void 0}});module.exports=n;
},{"../../utils/Class":"Q4x4","../../utils/object/GetAdvancedValue":"YJ2h","../../utils/object/GetValue":"FWyS","./MeasureText":"SRjI"}],"PRWY":[function(require,module,exports) {
var t=require("../../../dom/AddToDOM"),e=require("../../../display/canvas/CanvasPool"),i=require("../../../utils/Class"),s=require("../../components"),r=require("../../../core/events"),n=require("../../GameObject"),h=require("../GetTextSize"),o=require("../../../utils/object/GetValue"),a=require("../../../dom/RemoveFromDOM"),l=require("./TextRender"),d=require("../TextStyle"),u=new i({Extends:n,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,l],initialize:function(t,i,s,h,o){void 0===i&&(i=0),void 0===s&&(s=0),n.call(this,t,"Text"),this.renderer=t.sys.game.renderer,this.setPosition(i,s),this.setOrigin(0,0),this.initPipeline(),this.canvas=e.create(this),this.context=this.canvas.getContext("2d"),this.style=new d(this,o),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=t.sys.game.config.resolution),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(h),o&&o.padding&&this.setPadding(o.padding),o&&o.lineSpacing&&this.setLineSpacing(o.lineSpacing),t.sys.game.events.on(r.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",t(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(t){var e=this.style;if(e.wordWrapCallback){var i=e.wordWrapCallback.call(e.wordWrapCallbackScope,t,this);return Array.isArray(i)&&(i=i.join("\n")),i}return e.wordWrapWidth?e.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function(t,e,i){for(var s="",r=t.replace(/ +/gi," ").split(this.splitRegExp),n=r.length,h=0;h<n;h++){var o=r[h],a="";if(o=o.replace(/^ *|\s*$/gi,""),e.measureText(o).width<i)s+=o+"\n";else{for(var l=i,d=o.split(" "),u=0;u<d.length;u++){var c=d[u],g=c+" ",p=e.measureText(g).width;if(p>l){if(0===u){for(var f=g;f.length&&(f=f.slice(0,-1),!((p=e.measureText(f).width)<=l)););if(!f.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var y=c.substr(f.length);d[u]=y,a+=f}var x=d[u].length?u:u+1,v=d.slice(x).join(" ").replace(/[ \n]*$/gi,"");r[h+1]=v+" "+(r[h+1]||""),n=r.length;break}a+=g,l-=p}s+=a.replace(/[ \n]*$/gi,"")+"\n"}}return s=s.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(t,e,i){for(var s="",r=t.split(this.splitRegExp),n=r.length-1,h=e.measureText(" ").width,o=0;o<=n;o++){for(var a=i,l=r[o].split(" "),d=l.length-1,u=0;u<=d;u++){var c=l[u],g=e.measureText(c).width,p=g+h;p>a&&u>0&&(s+="\n",a=i),s+=c,u<d?(s+=" ",a-=p):a-=g}o<n&&(s+="\n")}return s},getWrappedText:function(t){return void 0===t&&(t=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this},setStyle:function(t){return this.style.setStyle(t)},setFont:function(t){return this.style.setFont(t)},setFontFamily:function(t){return this.style.setFontFamily(t)},setFontSize:function(t){return this.style.setFontSize(t)},setFontStyle:function(t){return this.style.setFontStyle(t)},setFixedSize:function(t,e){return this.style.setFixedSize(t,e)},setBackgroundColor:function(t){return this.style.setBackgroundColor(t)},setFill:function(t){return this.style.setFill(t)},setColor:function(t){return this.style.setColor(t)},setStroke:function(t,e){return this.style.setStroke(t,e)},setShadow:function(t,e,i,s,r,n){return this.style.setShadow(t,e,i,s,r,n)},setShadowOffset:function(t,e){return this.style.setShadowOffset(t,e)},setShadowColor:function(t){return this.style.setShadowColor(t)},setShadowBlur:function(t){return this.style.setShadowBlur(t)},setShadowStroke:function(t){return this.style.setShadowStroke(t)},setShadowFill:function(t){return this.style.setShadowFill(t)},setWordWrapWidth:function(t,e){return this.style.setWordWrapWidth(t,e)},setWordWrapCallback:function(t,e){return this.style.setWordWrapCallback(t,e)},setAlign:function(t){return this.style.setAlign(t)},setResolution:function(t){return this.style.setResolution(t)},setLineSpacing:function(t){return this.lineSpacing=t,this.updateText()},setPadding:function(t,e,i,s){if("object"==typeof t){var r=t,n=o(r,"x",null);null!==n?(t=n,i=n):(t=o(r,"left",0),i=o(r,"right",t));var h=o(r,"y",null);null!==h?(e=h,s=h):(e=o(r,"top",0),s=o(r,"bottom",e))}else void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=t),void 0===s&&(s=e);return this.padding.left=t,this.padding.top=e,this.padding.right=i,this.padding.bottom=s,this.updateText()},setMaxLines:function(t){return this.style.setMaxLines(t)},updateText:function(){var t=this.canvas,e=this.context,i=this.style,s=i.resolution,r=i.metrics;i.syncFont(t,e);var n=this._text;(i.wordWrapWidth||i.wordWrapCallback)&&(n=this.runWordWrap(this._text));var o,a=n.split(this.splitRegExp),l=h(this,r,a),d=this.padding;0===i.fixedWidth?(this.width=l.width+d.left+d.right,o=l.width):(this.width=i.fixedWidth,(o=this.width-d.left-d.right)<l.width&&(o=l.width)),0===i.fixedHeight?this.height=l.height+d.top+d.bottom:this.height=i.fixedHeight;var u,c,g=this.width,p=this.height;this.updateDisplayOrigin(),g*=s,p*=s,g=Math.max(g,1),p=Math.max(p,1),t.width!==g||t.height!==p?(t.width=g,t.height=p,this.frame.setSize(g,p),i.syncFont(t,e)):e.clearRect(0,0,g,p),e.save(),e.scale(s,s),i.backgroundColor&&(e.fillStyle=i.backgroundColor,e.fillRect(0,0,g,p)),i.syncStyle(t,e),e.textBaseline="alphabetic",e.translate(d.left,d.top);for(var f=0;f<l.lines;f++){if(u=i.strokeThickness/2,c=i.strokeThickness/2+f*l.lineHeight+r.ascent,f>0&&(c+=l.lineSpacing*f),i.rtl)u=g-u;else if("right"===i.align)u+=o-l.lineWidths[f];else if("center"===i.align)u+=(o-l.lineWidths[f])/2;else if("justify"===i.align){if(l.lineWidths[f]/l.width>=.85){var y=l.width-l.lineWidths[f],x=e.measureText(" ").width,v=a[f].trim(),w=v.split(" ");y+=(a[f].length-v.length)*x;for(var S=Math.floor(y/x),W=0;S>0;)w[W]+=" ",W=(W+1)%(w.length-1||1),--S;a[f]=w.join(" ")}}this.autoRound&&(u=Math.round(u),c=Math.round(c)),i.strokeThickness&&(this.style.syncShadow(e,i.shadowStroke),e.strokeText(a[f],u,c)),i.color&&(this.style.syncShadow(e,i.shadowFill),e.fillText(a[f],u,c))}e.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var T=this.input;return T&&!T.customHitArea&&(T.hitArea.width=this.width,T.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(t){this.setText(t)}},toJSON:function(){var t=s.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t},preDestroy:function(){this.style.rtl&&a(this.canvas),e.remove(this.canvas),this.texture.destroy()}});module.exports=u;
},{"../../../dom/AddToDOM":"SMiB","../../../display/canvas/CanvasPool":"Brmu","../../../utils/Class":"Q4x4","../../components":"PnJA","../../../core/events":"ZroQ","../../GameObject":"YzbT","../GetTextSize":"Yulr","../../../utils/object/GetValue":"FWyS","../../../dom/RemoveFromDOM":"QPTS","./TextRender":"S677","../TextStyle":"s4os"}],"Y2TS":[function(require,module,exports) {
var i=require("../../renderer/webgl/Utils"),t=function(t,a,l,e,h){a.updateCanvas();var p=i.getTintAppendFloatAlpha;this.pipeline.batchTexture(a,a.fillPattern,a.displayFrame.width*a.tileScaleX,a.displayFrame.height*a.tileScaleY,a.x,a.y,a.width,a.height,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.originX*a.width,a.originY*a.height,0,0,a.width,a.height,p(a._tintTL,e.alpha*a._alphaTL),p(a._tintTR,e.alpha*a._alphaTR),p(a._tintBL,e.alpha*a._alphaBL),p(a._tintBR,e.alpha*a._alphaBR),a._isTinted&&a.tintFill,a.tilePositionX%a.displayFrame.width/a.displayFrame.width,a.tilePositionY%a.displayFrame.height/a.displayFrame.height,e,h)};module.exports=t;
},{"../../renderer/webgl/Utils":"mjFh"}],"ExMw":[function(require,module,exports) {
var a=function(a,e,t,r,n){e.updateCanvas(),a.batchSprite(e,e.frame,r,n)};module.exports=a;
},{}],"HuzX":[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");e=require("./TileSpriteWebGLRenderer"),r=require("./TileSpriteCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":"vnTW","./TileSpriteWebGLRenderer":"Y2TS","./TileSpriteCanvasRenderer":"ExMw"}],"SClv":[function(require,module,exports) {
var t=require("../../display/canvas/CanvasPool"),i=require("../../utils/Class"),e=require("../components"),s=require("../../core/events"),r=require("../GameObject"),h=require("../../math/pow2/GetPowerOfTwo"),n=require("../../display/canvas/Smoothing"),l=require("./TileSpriteRender"),a=require("../../math/Vector2"),o=8,d=new i({Extends:r,Mixins:[e.Alpha,e.BlendMode,e.ComputedSize,e.Crop,e.Depth,e.Flip,e.GetBounds,e.Mask,e.Origin,e.Pipeline,e.ScrollFactor,e.Tint,e.Transform,e.Visible,l],initialize:function(i,e,n,l,o,d,u){var c=i.sys.game.renderer;r.call(this,i,"TileSprite");var g=i.sys.textures.get(d),f=g.get(u);l&&o?(l=Math.floor(l),o=Math.floor(o)):(l=f.width,o=f.height),this._tilePosition=new a,this._tileScale=new a(1,1),this.dirty=!1,this.renderer=c,this.canvas=t.create(this,l,o),this.context=this.canvas.getContext("2d"),this.displayTexture=g,this.displayFrame=f,this._crop=this.resetCropObject(),this.texture=i.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=h(f.width),this.potHeight=h(f.height),this.fillCanvas=t.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(e,n),this.setSize(l,o),this.setFrame(u),this.setOriginFromFrame(),this.initPipeline(),i.sys.game.events.on(s.CONTEXT_RESTORED,function(t){var i=t.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=t.createTexture2D(0,i.LINEAR,i.LINEAR,i.REPEAT,i.REPEAT,i.RGBA,this.fillCanvas,this.potWidth,this.potHeight)},this)},setTexture:function(t,i){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function(t){var i=this.displayTexture.get(t);return this.potWidth=h(i.width),this.potHeight=h(i.height),this.canvas.width=0,i.cutWidth&&i.cutHeight?this.renderFlags|=o:this.renderFlags&=~o,this.displayFrame=i,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(t,i){return void 0!==t&&(this.tilePositionX=t),void 0!==i&&(this.tilePositionY=i),this},setTileScale:function(t,i){return void 0===t&&(t=this.tileScaleX),void 0===i&&(i=t),this.tileScaleX=t,this.tileScaleY=i,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var t=this.displayFrame;if(t.source.isRenderTexture||t.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var i=this.fillContext,e=this.fillCanvas,s=this.potWidth,r=this.potHeight;this.renderer.gl||(s=t.cutWidth,r=t.cutHeight),i.clearRect(0,0,s,r),e.width=s,e.height=r,i.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,s,r),this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(e,this.fillPattern):this.fillPattern=i.createPattern(e,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var t=this.canvas;if(t.width===this.width&&t.height===this.height||(t.width=this.width,t.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var i=this.context;this.scene.sys.game.config.antialias||n.disable(i);var e=this._tileScale.x,s=this._tileScale.y,r=this._tilePosition.x,h=this._tilePosition.y;i.clearRect(0,0,this.width,this.height),i.save(),i.scale(e,s),i.translate(-r,-h),i.fillStyle=this.fillPattern,i.fillRect(r,h,this.width/e,this.height/s),i.restore(),this.dirty=!1}},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),t.remove(this.canvas),t.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(t){this._tileScale.y=t,this.dirty=!0}}});module.exports=d;
},{"../../display/canvas/CanvasPool":"Brmu","../../utils/Class":"Q4x4","../components":"PnJA","../../core/events":"ZroQ","../GameObject":"YzbT","../../math/pow2/GetPowerOfTwo":"xUtk","../../display/canvas/Smoothing":"bmjb","./TileSpriteRender":"HuzX","../../math/Vector2":"xARF"}],"jeyq":[function(require,module,exports) {
var e=function(e,i,t,o,p){i.videoTexture&&this.pipeline.batchSprite(i,o,p)};module.exports=e;
},{}],"TivT":[function(require,module,exports) {
var e=function(e,r,t,o,a){r.videoTexture&&e.batchSprite(r,r.frame,o,a)};module.exports=e;
},{}],"vCtM":[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");e=require("./VideoWebGLRenderer"),r=require("./VideoCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":"vnTW","./VideoWebGLRenderer":"jeyq","./VideoCanvasRenderer":"TivT"}],"YodL":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../../math/Clamp"),i=require("../components"),s=require("../events"),r=require("../../core/events/"),h=require("../GameObject"),o=require("../../sound/events/"),n=require("../../utils/string/UUID"),d=require("./VideoRender"),a=require("../../math/const"),u=new e({Extends:h,Mixins:[i.Alpha,i.BlendMode,i.Depth,i.Flip,i.GetBounds,i.Mask,i.Origin,i.Pipeline,i.ScrollFactor,i.Size,i.TextureCrop,i.Tint,i.Transform,i.Visible,d],initialize:function(e,t,i,s){h.call(this,e,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=n(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=a.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(t,i),this.initPipeline(),s&&this.changeSource(s,!1);var d=e.sys.game.events;d.on(r.PAUSE,this.globalPause,this),d.on(r.RESUME,this.globalResume,this);var u=e.sys.sound;u&&u.on(o.GLOBAL_MUTE,this.globalMute,this)},play:function(e,t,i){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var s=this.video;if(!s)return console.warn("Video not loaded"),this;void 0===e&&(e=s.loop);var r=this.scene.sys.sound;r&&r.mute&&this.setMute(!0),isNaN(t)||(this._markerIn=t),!isNaN(i)&&i>t&&(this._markerOut=i),s.loop=e;var h=this._callbacks,o=s.play();return void 0!==o?o.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(s.addEventListener("playing",h.play,!0),s.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),s.addEventListener("ended",h.end,!0),s.addEventListener("timeupdate",h.time,!0),s.addEventListener("seeking",h.seeking,!0),s.addEventListener("seeked",h.seeked,!0),this},changeSource:function(e,t,i,r,h){void 0===t&&(t=!0),this.video&&this.stop();var o=this.scene.sys.cache.video.get(e);return o?(this.video=o,this._cacheKey=e,this._codePaused=o.paused,this._codeMuted=o.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,o,o.videoWidth,o.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,o.videoWidth,o.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(s.VIDEO_CREATED,this,o.videoWidth,o.videoHeight)):this.updateTexture(),o.currentTime=0,this._lastUpdate=0,t&&this.play(i,r,h)):this.video=null,this},addMarker:function(e,t,i){return!isNaN(t)&&t>=0&&!isNaN(i)&&(this.markers[e]=[t,i]),this},playMarker:function(e,t){var i=this.markers[e];return i&&this.play(t,i[0],i[1]),this},removeMarker:function(e){return delete this.markers[e],this},snapshot:function(e,t){return void 0===e&&(e=this.width),void 0===t&&(t=this.height),this.snapshotArea(0,0,this.width,this.height,e,t)},snapshotArea:function(e,t,i,s,r,h){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=this.width),void 0===s&&(s=this.height),void 0===r&&(r=i),void 0===h&&(h=s);var o=this.video,d=this.snapshotTexture;return d?(d.setSize(r,h),o&&d.context.drawImage(o,e,t,i,s,0,0,r,h)):(d=this.scene.sys.textures.createCanvas(n(),r,h),this.snapshotTexture=d,o&&d.context.drawImage(o,e,t,i,s,0,0,r,h)),d.update()},saveSnapshotTexture:function(e){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,e):this.snapshotTexture=this.scene.sys.textures.createCanvas(e,this.width,this.height),this.snapshotTexture},loadURL:function(e,t,i){void 0===t&&(t="loadeddata"),void 0===i&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var s=document.createElement("video");return s.controls=!1,i&&(s.muted=!0,s.defaultMuted=!0,s.setAttribute("autoplay","autoplay")),s.setAttribute("playsinline","playsinline"),s.setAttribute("preload","auto"),s.addEventListener("error",this._callbacks.error,!0),s.src=e,s.load(),this.video=s,this},playPromiseSuccessHandler:function(){this.touchLocked=!1,this.emit(s.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(e){this.scene.sys.input.once("pointerdown",this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(s.VIDEO_ERROR,this,e)},playHandler:function(){this.touchLocked=!1,this.emit(s.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(e){this.stop(),this.emit(s.VIDEO_ERROR,this,e)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(s.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(s.VIDEO_PLAY,this)},completeHandler:function(){this.emit(s.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(s.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var e=this.video;if(e){var t=e.currentTime;t!==this._lastUpdate&&(this._lastUpdate=t,this.updateTexture(),t>=this._markerOut&&(e.loop?(e.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=t,this.emit(s.VIDEO_LOOP,this)):(this.emit(s.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(s.VIDEO_TIMEOUT,this))},updateTexture:function(){var e=this.video,t=e.videoWidth,i=e.videoHeight;if(this.videoTexture){var r=this.videoTextureSource;r.source!==e&&(r.source=e,r.width=t,r.height=i),r.update()}else this.videoTexture=this.scene.sys.textures.create(this._key,e,t,i),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,t,i),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(s.VIDEO_CREATED,this,t,i)},getVideoKey:function(){return this._cacheKey},seekTo:function(e){var t=this.video;if(t){var i=t.duration;if(i!==1/0&&!isNaN(i)){var s=i*e;this.setCurrentTime(s)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(e){var t=this.video;if(t){if("string"==typeof e){var i=e[0],s=parseFloat(e.substr(1));"+"===i?e=t.currentTime+s:"-"===i&&(e=t.currentTime-s)}t.currentTime=e,this._lastUpdate=e}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(s.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(s.VIDEO_SEEKED,this),this.video&&this.updateTexture()},getProgress:function(){var e=this.video;if(e){var t=e.currentTime,i=e.duration;if(i!==1/0&&!isNaN(i))return t/i}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(e){void 0===e&&(e=!0),this._codeMuted=e;var t=this.video;return t&&(t.muted=!!this._systemMuted||e),this},isMuted:function(){return this._codeMuted},globalMute:function(e,t){this._systemMuted=t;var i=this.video;i&&(i.muted=!!this._codeMuted||t)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(e){void 0===e&&(e=!0);var t=this.video;return this._codePaused=e,t&&(e?t.paused||t.pause():e||t.paused&&!this._systemPaused&&t.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(e){return void 0===e&&(e=1),this.video&&(this.video.volume=t(e,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(e){return this.video&&(this.video.playbackRate=e),this},getLoop:function(){return!!this.video&&this.video.loop},setLoop:function(e){return void 0===e&&(e=!0),this.video&&(this.video.loop=e),this},isPlaying:function(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(e,t){return void 0===t&&(t=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,e),this._key=e,this.flipY=t,this.videoTextureSource&&this.videoTextureSource.setFlipY(t),this.videoTexture},stop:function(){var e=this.video;if(e){var t=this._callbacks;for(var i in t)e.removeEventListener(i,t[i],!0);e.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(s.VIDEO_STOP,this),this},removeVideoElement:function(){var e=this.video;if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("autoplay"),e.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var e=this.scene.sys.game.events;e.off(r.PAUSE,this.globalPause,this),e.off(r.RESUME,this.globalResume,this);var t=this.scene.sys.sound;t&&t.off(o.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});module.exports=u;
},{"../../utils/Class":"Q4x4","../../math/Clamp":"dPkx","../components":"PnJA","../events":"YK6V","../../core/events/":"ZroQ","../GameObject":"YzbT","../../sound/events/":"joJ3","../../utils/string/UUID":"o2Et","./VideoRender":"vCtM","../../math/const":"TJqb"}],"Vrk1":[function(require,module,exports) {
var i=require("../../utils/Class"),t=require("../components"),e=require("../GameObject"),s=require("../../geom/line/Line"),l=new i({Extends:e,Mixins:[t.AlphaSingle,t.BlendMode,t.ComputedSize,t.Depth,t.GetBounds,t.Mask,t.Origin,t.Pipeline,t.ScrollFactor,t.Transform,t.Visible],initialize:function(i,t,l){void 0===t&&(t="Shape"),e.call(this,i,t),this.geom=l,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new s,this.initPipeline()},setFillStyle:function(i,t){return void 0===t&&(t=1),void 0===i?this.isFilled=!1:(this.fillColor=i,this.fillAlpha=t,this.isFilled=!0),this},setStrokeStyle:function(i,t,e){return void 0===e&&(e=1),void 0===i?this.isStroked=!1:(this.lineWidth=i,this.strokeColor=t,this.strokeAlpha=e,this.isStroked=!0),this},setClosePath:function(i){return this.closePath=i,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]}});module.exports=l;
},{"../../utils/Class":"Q4x4","../components":"PnJA","../GameObject":"YzbT","../../geom/line/Line":"JM91"}],"AoPM":[function(require,module,exports) {
var e=require("../../renderer/webgl/Utils"),t=function(t,r,a,l,g,n){for(var i=e.getTintAppendFloatAlphaAndSwap(a.fillColor,a.fillAlpha*l),p=a.pathData,o=a.pathIndexes,f=0;f<o.length;f+=3){var h=2*o[f],d=2*o[f+1],s=2*o[f+2],u=p[h+0]-g,A=p[h+1]-n,c=p[d+0]-g,v=p[d+1]-n,x=p[s+0]-g,T=p[s+1]-n,X=r.getX(u,A),Y=r.getY(u,A),b=r.getX(c,v),w=r.getY(c,v),D=r.getX(x,T),m=r.getY(x,T);t.setTexture2D(),t.batchTri(X,Y,b,w,D,m,0,0,1,1,i,i,i,t.tintEffect)}};module.exports=t;
},{"../../renderer/webgl/Utils":"mjFh"}],"Lcgx":[function(require,module,exports) {
var e=require("../../renderer/webgl/Utils"),t=function(t,r,a,o,l){var n=t.strokeTint,h=e.getTintAppendFloatAlphaAndSwap(r.strokeColor,r.strokeAlpha*a);n.TL=h,n.TR=h,n.BL=h,n.BR=h;var i=r.pathData,s=i.length-1,p=r.lineWidth,d=p/2,v=i[0]-o,T=i[1]-l;r.closePath||(s-=2);for(var c=2;c<s;c+=2){var u=i[c]-o,A=i[c+1]-l;t.setTexture2D(),t.batchLine(v,T,u,A,d,d,p,c-2,!!r.closePath&&c===s-1),v=u,T=A}};module.exports=t;
},{"../../renderer/webgl/Utils":"mjFh"}],"BXOm":[function(require,module,exports) {
var l=require("../FillPathWebGL"),r=require("../StrokePathWebGL"),i=function(i,t,e,a,o){var s=this.pipeline,c=s._tempMatrix1,p=s._tempMatrix2,m=s._tempMatrix3;i.setPipeline(s),p.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),c.copyFrom(a.matrix),o?(c.multiplyWithOffset(o,-a.scrollX*t.scrollFactorX,-a.scrollY*t.scrollFactorY),p.e=t.x,p.f=t.y):(p.e-=a.scrollX*t.scrollFactorX,p.f-=a.scrollY*t.scrollFactorY),c.multiply(p,m);var y=t._displayOriginX,n=t._displayOriginY,x=a.alpha*t.alpha;t.isFilled&&l(s,m,t,x,y,n),t.isStroked&&r(s,t,x,y,n)};module.exports=i;
},{"../FillPathWebGL":"AoPM","../StrokePathWebGL":"Lcgx"}],"b8M0":[function(require,module,exports) {
var l=function(l,o,r,a){var f=r||o.fillColor,i=a||o.fillAlpha,e=(16711680&f)>>>16,t=(65280&f)>>>8,n=255&f;l.fillStyle="rgba("+e+","+t+","+n+","+i+")"};module.exports=l;
},{}],"UAwu":[function(require,module,exports) {
var e=function(e,o,r,t){var l=r||o.strokeColor,i=t||o.strokeAlpha,a=(16711680&l)>>>16,n=(65280&l)>>>8,s=255&l;e.strokeStyle="rgba("+a+","+n+","+s+","+i+")",e.lineWidth=o.lineWidth};module.exports=e;
},{}],"UX0G":[function(require,module,exports) {
var e=require("../../../math/DegToRad"),r=require("../FillStyleCanvas"),i=require("../LineStyleCanvas"),a=require("../../../renderer/canvas/utils/SetTransform"),t=function(t,n,l,s,o){var u=t.currentContext;if(a(t,u,n,s,o)){var c=n.radius;u.beginPath(),u.arc(c-n.originX*(2*c),c-n.originY*(2*c),c,e(n._startAngle),e(n._endAngle),n.anticlockwise),n.closePath&&u.closePath(),n.isFilled&&(r(u,n),u.fill()),n.isStroked&&(i(u,n),u.stroke()),u.restore()}};module.exports=t;
},{"../../../math/DegToRad":"FzPC","../FillStyleCanvas":"b8M0","../LineStyleCanvas":"UAwu","../../../renderer/canvas/utils/SetTransform":"Jz6d"}],"IoZ5":[function(require,module,exports) {
var e=require("../../../utils/NOOP"),r=require("../../../utils/NOOP");e=require("./ArcWebGLRenderer"),r=require("./ArcCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../../utils/NOOP":"vnTW","./ArcWebGLRenderer":"BXOm","./ArcCanvasRenderer":"UX0G"}],"yBln":[function(require,module,exports) {
var t=require("./ArcRender"),i=require("../../../utils/Class"),e=require("../../../math/DegToRad"),s=require("../../../geom/polygon/Earcut"),n=require("../../../geom/circle/Circle"),a=require("../../../math/const"),r=require("../Shape"),h=new i({Extends:r,Mixins:[t],initialize:function(t,i,e,s,a,h,o,u,c){void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=128),void 0===a&&(a=0),void 0===h&&(h=360),void 0===o&&(o=!1),r.call(this,t,"Arc",new n(0,0,s)),this._startAngle=a,this._endAngle=h,this._anticlockwise=o,this._iterations=.01,this.setPosition(i,e);var d=2*this.geom.radius;this.setSize(d,d),void 0!==u&&this.setFillStyle(u,c),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(t){this._iterations=t,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(t){this.geom.radius=t;var i=2*t;this.setSize(i,i),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(t){this._startAngle=t,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(t){this._endAngle=t,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(t){this._anticlockwise=t,this.updateData()}},setRadius:function(t){return this.radius=t,this},setIterations:function(t){return void 0===t&&(t=.01),this.iterations=t,this},setStartAngle:function(t,i){return this._startAngle=t,void 0!==i&&(this._anticlockwise=i),this.updateData()},setEndAngle:function(t,i){return this._endAngle=t,void 0!==i&&(this._anticlockwise=i),this.updateData()},updateData:function(){var t=this._iterations,i=t,n=this.geom.radius,r=e(this._startAngle),h=e(this._endAngle),o=n,u=n;h-=r,this._anticlockwise?h<-a.PI2?h=-a.PI2:h>0&&(h=-a.PI2+h%a.PI2):h>a.PI2?h=a.PI2:h<0&&(h=a.PI2+h%a.PI2);for(var c,d=[o+Math.cos(r)*n,u+Math.sin(r)*n];i<1;)c=h*i+r,d.push(o+Math.cos(c)*n,u+Math.sin(c)*n),i+=t;return c=h+r,d.push(o+Math.cos(c)*n,u+Math.sin(c)*n),d.push(o+Math.cos(r)*n,u+Math.sin(r)*n),this.pathIndexes=s(d),this.pathData=d,this}});module.exports=h;
},{"./ArcRender":"IoZ5","../../../utils/Class":"Q4x4","../../../math/DegToRad":"FzPC","../../../geom/polygon/Earcut":"zz3E","../../../geom/circle/Circle":"b8pw","../../../math/const":"TJqb","../Shape":"Vrk1"}],"seXo":[function(require,module,exports) {
var l=require("../FillPathWebGL"),r=require("../StrokePathWebGL"),e=function(e,i,t,a,o){var s=this.pipeline,c=s._tempMatrix1,p=s._tempMatrix2,u=s._tempMatrix3;e.setPipeline(s),p.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),c.copyFrom(a.matrix),o?(c.multiplyWithOffset(o,-a.scrollX*i.scrollFactorX,-a.scrollY*i.scrollFactorY),p.e=i.x,p.f=i.y):(p.e-=a.scrollX*i.scrollFactorX,p.f-=a.scrollY*i.scrollFactorY),c.multiply(p,u);var n=i._displayOriginX+i._curveBounds.x,y=i._displayOriginY+i._curveBounds.y,m=a.alpha*i.alpha;i.isFilled&&l(s,u,i,m,n,y),i.isStroked&&r(s,i,m,n,y)};module.exports=e;
},{"../FillPathWebGL":"AoPM","../StrokePathWebGL":"Lcgx"}],"Bh3s":[function(require,module,exports) {
var e=require("../FillStyleCanvas"),r=require("../LineStyleCanvas"),a=require("../../../renderer/canvas/utils/SetTransform"),i=function(i,t,l,n,o){var s=i.currentContext;if(a(i,s,t,n,o)){var u=t._displayOriginX+t._curveBounds.x,v=t._displayOriginY+t._curveBounds.y,c=t.pathData,d=c.length-1,h=c[0]-u,f=c[1]-v;s.beginPath(),s.moveTo(h,f),t.closePath||(d-=2);for(var y=2;y<d;y+=2){var g=c[y]-u,p=c[y+1]-v;s.lineTo(g,p)}t.closePath&&s.closePath(),t.isFilled&&(e(s,t),s.fill()),t.isStroked&&(r(s,t),s.stroke()),s.restore()}};module.exports=i;
},{"../FillStyleCanvas":"b8M0","../LineStyleCanvas":"UAwu","../../../renderer/canvas/utils/SetTransform":"Jz6d"}],"IfGK":[function(require,module,exports) {
var e=require("../../../utils/NOOP"),r=require("../../../utils/NOOP");e=require("./CurveWebGLRenderer"),r=require("./CurveCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../../utils/NOOP":"vnTW","./CurveWebGLRenderer":"seXo","./CurveCanvasRenderer":"Bh3s"}],"nutV":[function(require,module,exports) {
var t=require("../../../utils/Class"),s=require("./CurveRender"),e=require("../../../geom/polygon/Earcut"),i=require("../../../geom/rectangle/Rectangle"),h=require("../Shape"),o=new t({Extends:h,Mixins:[s],initialize:function(t,s,e,o,n,u){void 0===s&&(s=0),void 0===e&&(e=0),h.call(this,t,"Curve",o),this._smoothness=32,this._curveBounds=new i,this.closePath=!1,this.setPosition(s,e),void 0!==n&&this.setFillStyle(n,u),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){var t=this._curveBounds,s=this._smoothness;this.geom.getBounds(t,s),this.setSize(t.width,t.height),this.updateDisplayOrigin();for(var i=[],h=this.geom.getPoints(s),o=0;o<h.length;o++)i.push(h[o].x,h[o].y);return i.push(h[0].x,h[0].y),this.pathIndexes=e(i),this.pathData=i,this}});module.exports=o;
},{"../../../utils/Class":"Q4x4","./CurveRender":"IfGK","../../../geom/polygon/Earcut":"zz3E","../../../geom/rectangle/Rectangle":"ACYM","../Shape":"Vrk1"}],"n5ZK":[function(require,module,exports) {
var e=require("../FillStyleCanvas"),r=require("../LineStyleCanvas"),a=require("../../../renderer/canvas/utils/SetTransform"),i=function(i,t,l,n,o){var s=i.currentContext;if(a(i,s,t,n,o)){var v=t._displayOriginX,u=t._displayOriginY,d=t.pathData,c=d.length-1,f=d[0]-v,h=d[1]-u;s.beginPath(),s.moveTo(f,h),t.closePath||(c-=2);for(var g=2;g<c;g+=2){var p=d[g]-v,y=d[g+1]-u;s.lineTo(p,y)}s.closePath(),t.isFilled&&(e(s,t),s.fill()),t.isStroked&&(r(s,t),s.stroke()),s.restore()}};module.exports=i;
},{"../FillStyleCanvas":"b8M0","../LineStyleCanvas":"UAwu","../../../renderer/canvas/utils/SetTransform":"Jz6d"}],"jwUy":[function(require,module,exports) {
var e=require("../../../utils/NOOP"),r=require("../../../utils/NOOP");e=require("./EllipseWebGLRenderer"),r=require("./EllipseCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../../utils/NOOP":"vnTW","./EllipseWebGLRenderer":"BXOm","./EllipseCanvasRenderer":"n5ZK"}],"x48G":[function(require,module,exports) {
var t=require("../../../utils/Class"),s=require("../../../geom/polygon/Earcut"),e=require("./EllipseRender"),i=require("../../../geom/ellipse/Ellipse"),o=require("../Shape"),h=new t({Extends:o,Mixins:[e],initialize:function(t,s,e,h,n,a,u){void 0===s&&(s=0),void 0===e&&(e=0),void 0===h&&(h=128),void 0===n&&(n=128),o.call(this,t,"Ellipse",new i(h/2,n/2,h,n)),this._smoothness=64,this.setPosition(s,e),this.width=h,this.height=n,void 0!==a&&this.setFillStyle(a,u),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSize:function(t,s){return this.geom.setSize(t,s),this.updateData()},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){for(var t=[],e=this.geom.getPoints(this._smoothness),i=0;i<e.length;i++)t.push(e[i].x,e[i].y);return t.push(e[0].x,e[0].y),this.pathIndexes=s(t),this.pathData=t,this}});module.exports=h;
},{"../../../utils/Class":"Q4x4","../../../geom/polygon/Earcut":"zz3E","./EllipseRender":"jwUy","../../../geom/ellipse/Ellipse":"g0eY","../Shape":"Vrk1"}],"cxx1":[function(require,module,exports) {
var l=require("../../../renderer/webgl/Utils"),t=function(t,e,i,a,r){var o=this.pipeline,p=o._tempMatrix1,s=o._tempMatrix2,h=o._tempMatrix3;t.setPipeline(o),s.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),p.copyFrom(a.matrix),r?(p.multiplyWithOffset(r,-a.scrollX*e.scrollFactorX,-a.scrollY*e.scrollFactorY),s.e=e.x,s.f=e.y):(s.e-=a.scrollX*e.scrollFactorX,s.f-=a.scrollY*e.scrollFactorY),p.multiply(s,h),h.translate(-e._displayOriginX,-e._displayOriginY);var n,c,f=a.alpha*e.alpha,T=e.width,A=e.height,F=e.cellWidth,u=e.cellHeight,d=Math.ceil(T/F),x=Math.ceil(A/u),R=F,g=u,m=F-(d*F-T),w=u-(x*u-A),y=e.showCells,L=e.showAltCells,v=e.showOutline,B=0,X=0,Y=0,b=0,C=0;if(v&&(R--,g--,m===F&&m--,w===u&&w--),y&&e.fillAlpha>0)for(n=o.fillTint,c=l.getTintAppendFloatAlphaAndSwap(e.fillColor,e.fillAlpha*f),n.TL=c,n.TR=c,n.BL=c,n.BR=c,X=0;X<x;X++)for(L&&(Y=X%2),B=0;B<d;B++)L&&Y?Y=0:(Y++,b=B<d-1?R:m,C=X<x-1?g:w,o.setTexture2D(),o.batchFillRect(B*F,X*u,b,C));if(L&&e.altFillAlpha>0)for(n=o.fillTint,c=l.getTintAppendFloatAlphaAndSwap(e.altFillColor,e.altFillAlpha*f),n.TL=c,n.TR=c,n.BL=c,n.BR=c,X=0;X<x;X++)for(L&&(Y=X%2),B=0;B<d;B++)!L||Y?(Y=0,b=B<d-1?R:m,C=X<x-1?g:w,o.setTexture2D(),o.batchFillRect(B*F,X*u,b,C)):Y=1;if(v&&e.outlineFillAlpha>0){var M=o.strokeTint,_=l.getTintAppendFloatAlphaAndSwap(e.outlineFillColor,e.outlineFillAlpha*f);for(M.TL=_,M.TR=_,M.BL=_,M.BR=_,B=1;B<d;B++){var D=B*F;o.setTexture2D(),o.batchLine(D,0,D,A,1,1,1,0,!1)}for(X=1;X<x;X++){var O=X*u;o.setTexture2D(),o.batchLine(0,O,T,O,1,1,1,0,!1)}}};module.exports=t;
},{"../../../renderer/webgl/Utils":"mjFh"}],"CMCs":[function(require,module,exports) {
var l=require("../FillStyleCanvas"),e=require("../LineStyleCanvas"),i=require("../../../renderer/canvas/utils/SetTransform"),r=function(r,a,o,t,n){var h=r.currentContext;if(i(r,h,a,t,n)){var s=-a._displayOriginX,f=-a._displayOriginY,u=t.alpha*a.alpha,p=a.width,v=a.height,c=a.cellWidth,C=a.cellHeight,F=Math.ceil(p/c),d=Math.ceil(v/C),g=c,A=C,T=c-(F*c-p),m=C-(d*C-v),w=a.showCells,y=a.showAltCells,q=a.showOutline,O=0,S=0,b=0,k=0,x=0;if(q&&(g--,A--,T===c&&T--,m===C&&m--),w&&a.fillAlpha>0)for(l(h,a),S=0;S<d;S++)for(y&&(b=S%2),O=0;O<F;O++)y&&b?b=0:(b++,k=O<F-1?g:T,x=S<d-1?A:m,h.fillRect(s+O*c,f+S*C,k,x));if(y&&a.altFillAlpha>0)for(l(h,a,a.altFillColor,a.altFillAlpha*u),S=0;S<d;S++)for(y&&(b=S%2),O=0;O<F;O++)!y||b?(b=0,k=O<F-1?g:T,x=S<d-1?A:m,h.fillRect(s+O*c,f+S*C,k,x)):b=1;if(q&&a.outlineFillAlpha>0){for(e(h,a,a.outlineFillColor,a.outlineFillAlpha*u),O=1;O<F;O++){var M=O*c;h.beginPath(),h.moveTo(M+s,f),h.lineTo(M+s,v+f),h.stroke()}for(S=1;S<d;S++){var P=S*C;h.beginPath(),h.moveTo(s,P+f),h.lineTo(s+p,P+f),h.stroke()}}h.restore()}};module.exports=r;
},{"../FillStyleCanvas":"b8M0","../LineStyleCanvas":"UAwu","../../../renderer/canvas/utils/SetTransform":"Jz6d"}],"TOMd":[function(require,module,exports) {
var e=require("../../../utils/NOOP"),r=require("../../../utils/NOOP");e=require("./GridWebGLRenderer"),r=require("./GridCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../../utils/NOOP":"vnTW","./GridWebGLRenderer":"cxx1","./GridCanvasRenderer":"CMCs"}],"Z9SB":[function(require,module,exports) {
var i=require("../../../utils/Class"),l=require("../Shape"),t=require("./GridRender"),s=new i({Extends:l,Mixins:[t],initialize:function(i,t,s,e,h,o,n,r,u,d,a){void 0===t&&(t=0),void 0===s&&(s=0),void 0===e&&(e=128),void 0===h&&(h=128),void 0===o&&(o=32),void 0===n&&(n=32),l.call(this,i,"Grid",null),this.cellWidth=o,this.cellHeight=n,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(t,s),this.setSize(e,h),void 0!==r&&this.setFillStyle(r,u),void 0!==d&&this.setOutlineStyle(d,a),this.updateDisplayOrigin()},setFillStyle:function(i,l){return void 0===l&&(l=1),void 0===i?this.showCells=!1:(this.fillColor=i,this.fillAlpha=l,this.showCells=!0),this},setAltFillStyle:function(i,l){return void 0===l&&(l=1),void 0===i?this.showAltCells=!1:(this.altFillColor=i,this.altFillAlpha=l,this.showAltCells=!0),this},setOutlineStyle:function(i,l){return void 0===l&&(l=1),void 0===i?this.showOutline=!1:(this.outlineFillColor=i,this.outlineFillAlpha=l,this.showOutline=!0),this}});module.exports=s;
},{"../../../utils/Class":"Q4x4","../Shape":"Vrk1","./GridRender":"TOMd"}],"mD5E":[function(require,module,exports) {
var t=require("../../../renderer/webgl/Utils"),e=function(e,l,a,g,r){var i=this.pipeline,o=i._tempMatrix1,p=i._tempMatrix2,s=i._tempMatrix3;e.setPipeline(i),p.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),o.copyFrom(g.matrix),r?(o.multiplyWithOffset(r,-g.scrollX*l.scrollFactorX,-g.scrollY*l.scrollFactorY),p.e=l.x,p.f=l.y):(p.e-=g.scrollX*l.scrollFactorX,p.f-=g.scrollY*l.scrollFactorY),o.multiply(p,s);var c,h,X,Y,n,d,u,f,x,A=l.width,F=l.height,T=A/2,m=A/l.projection,w=g.alpha*l.alpha;l.isFilled&&(l.showTop&&(c=t.getTintAppendFloatAlphaAndSwap(l.fillTop,w),h=s.getX(-T,-F),X=s.getY(-T,-F),Y=s.getX(0,-m-F),n=s.getY(0,-m-F),d=s.getX(T,-F),u=s.getY(T,-F),f=s.getX(0,m-F),x=s.getY(0,m-F),i.setTexture2D(),i.batchQuad(h,X,Y,n,d,u,f,x,0,0,1,1,c,c,c,c,2)),l.showLeft&&(c=t.getTintAppendFloatAlphaAndSwap(l.fillLeft,w),h=s.getX(-T,0),X=s.getY(-T,0),Y=s.getX(0,m),n=s.getY(0,m),d=s.getX(0,m-F),u=s.getY(0,m-F),f=s.getX(-T,-F),x=s.getY(-T,-F),i.setTexture2D(),i.batchQuad(h,X,Y,n,d,u,f,x,0,0,1,1,c,c,c,c,2)),l.showRight&&(c=t.getTintAppendFloatAlphaAndSwap(l.fillRight,w),h=s.getX(T,0),X=s.getY(T,0),Y=s.getX(0,m),n=s.getY(0,m),d=s.getX(0,m-F),u=s.getY(0,m-F),f=s.getX(T,-F),x=s.getY(T,-F),i.setTexture2D(),i.batchQuad(h,X,Y,n,d,u,f,x,0,0,1,1,c,c,c,c,2)))};module.exports=e;
},{"../../../renderer/webgl/Utils":"mjFh"}],"EiqT":[function(require,module,exports) {
var e=require("../FillStyleCanvas"),i=require("../../../renderer/canvas/utils/SetTransform"),l=function(l,o,n,T,t){var r=l.currentContext;if(i(l,r,o,T,t)&&o.isFilled){var a=o.width,f=o.height,h=a/2,s=a/o.projection;o.showTop&&(e(r,o,o.fillTop),r.beginPath(),r.moveTo(-h,-f),r.lineTo(0,-s-f),r.lineTo(h,-f),r.lineTo(h,-1),r.lineTo(0,s-1),r.lineTo(-h,-1),r.lineTo(-h,-f),r.fill()),o.showLeft&&(e(r,o,o.fillLeft),r.beginPath(),r.moveTo(-h,0),r.lineTo(0,s),r.lineTo(0,s-f),r.lineTo(-h,-f),r.lineTo(-h,0),r.fill()),o.showRight&&(e(r,o,o.fillRight),r.beginPath(),r.moveTo(h,0),r.lineTo(0,s),r.lineTo(0,s-f),r.lineTo(h,-f),r.lineTo(h,0),r.fill()),r.restore()}};module.exports=l;
},{"../FillStyleCanvas":"b8M0","../../../renderer/canvas/utils/SetTransform":"Jz6d"}],"Zbk0":[function(require,module,exports) {
var e=require("../../../utils/NOOP"),r=require("../../../utils/NOOP");e=require("./IsoBoxWebGLRenderer"),r=require("./IsoBoxCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../../utils/NOOP":"vnTW","./IsoBoxWebGLRenderer":"mD5E","./IsoBoxCanvasRenderer":"EiqT"}],"JsDG":[function(require,module,exports) {
var i=require("./IsoBoxRender"),t=require("../../../utils/Class"),s=require("../Shape"),o=new t({Extends:s,Mixins:[i],initialize:function(i,t,o,e,h,l,n,r){void 0===t&&(t=0),void 0===o&&(o=0),void 0===e&&(e=48),void 0===h&&(h=32),void 0===l&&(l=15658734),void 0===n&&(n=10066329),void 0===r&&(r=13421772),s.call(this,i,"IsoBox",null),this.projection=4,this.fillTop=l,this.fillLeft=n,this.fillRight=r,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(t,o),this.setSize(e,h),this.updateDisplayOrigin()},setProjection:function(i){return this.projection=i,this},setFaces:function(i,t,s){return void 0===i&&(i=!0),void 0===t&&(t=!0),void 0===s&&(s=!0),this.showTop=i,this.showLeft=t,this.showRight=s,this},setFillStyle:function(i,t,s){return this.fillTop=i,this.fillLeft=t,this.fillRight=s,this.isFilled=!0,this}});module.exports=o;
},{"./IsoBoxRender":"Zbk0","../../../utils/Class":"Q4x4","../Shape":"Vrk1"}],"RyBX":[function(require,module,exports) {
var t=require("../../../renderer/webgl/Utils"),e=function(e,l,g,r,a){var i=this.pipeline,o=i._tempMatrix1,p=i._tempMatrix2,s=i._tempMatrix3;e.setPipeline(i),p.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),o.copyFrom(r.matrix),a?(o.multiplyWithOffset(a,-r.scrollX*l.scrollFactorX,-r.scrollY*l.scrollFactorY),p.e=l.x,p.f=l.y):(p.e-=r.scrollX*l.scrollFactorX,p.f-=r.scrollY*l.scrollFactorY),o.multiply(p,s);var X=l.width,Y=l.height,c=X/2,h=X/l.projection,n=l.isReversed,d=r.alpha*l.alpha;if(l.isFilled){var f,T,x,A,F,m,u;if(l.showTop&&n){f=t.getTintAppendFloatAlphaAndSwap(l.fillTop,d),T=s.getX(-c,-Y),x=s.getY(-c,-Y),A=s.getX(0,-h-Y),F=s.getY(0,-h-Y),m=s.getX(c,-Y),u=s.getY(c,-Y);var w=s.getX(0,h-Y),v=s.getY(0,h-Y);i.setTexture2D(),i.batchQuad(T,x,A,F,m,u,w,v,0,0,1,1,f,f,f,f,2)}l.showLeft&&(f=t.getTintAppendFloatAlphaAndSwap(l.fillLeft,d),n?(T=s.getX(-c,-Y),x=s.getY(-c,-Y),A=s.getX(0,h),F=s.getY(0,h),m=s.getX(0,h-Y),u=s.getY(0,h-Y)):(T=s.getX(-c,0),x=s.getY(-c,0),A=s.getX(0,h),F=s.getY(0,h),m=s.getX(0,h-Y),u=s.getY(0,h-Y)),i.batchTri(T,x,A,F,m,u,0,0,1,1,f,f,f,2)),l.showRight&&(f=t.getTintAppendFloatAlphaAndSwap(l.fillRight,d),n?(T=s.getX(c,-Y),x=s.getY(c,-Y),A=s.getX(0,h),F=s.getY(0,h),m=s.getX(0,h-Y),u=s.getY(0,h-Y)):(T=s.getX(c,0),x=s.getY(c,0),A=s.getX(0,h),F=s.getY(0,h),m=s.getX(0,h-Y),u=s.getY(0,h-Y)),i.setTexture2D(),i.batchTri(T,x,A,F,m,u,0,0,1,1,f,f,f,2))}};module.exports=e;
},{"../../../renderer/webgl/Utils":"mjFh"}],"dXen":[function(require,module,exports) {
var e=require("../FillStyleCanvas"),i=require("../../../renderer/canvas/utils/SetTransform"),o=function(o,l,n,r,t){var T=o.currentContext;if(i(o,T,l,r,t)&&l.isFilled){var s=l.width,a=l.height,f=s/2,h=s/l.projection,v=l.isReversed;l.showTop&&v&&(e(T,l,l.fillTop),T.beginPath(),T.moveTo(-f,-a),T.lineTo(0,-h-a),T.lineTo(f,-a),T.lineTo(0,h-a),T.fill()),l.showLeft&&(e(T,l,l.fillLeft),T.beginPath(),v?(T.moveTo(-f,-a),T.lineTo(0,h),T.lineTo(0,h-a)):(T.moveTo(-f,0),T.lineTo(0,h),T.lineTo(0,h-a)),T.fill()),l.showRight&&(e(T,l,l.fillRight),T.beginPath(),v?(T.moveTo(f,-a),T.lineTo(0,h),T.lineTo(0,h-a)):(T.moveTo(f,0),T.lineTo(0,h),T.lineTo(0,h-a)),T.fill()),T.restore()}};module.exports=o;
},{"../FillStyleCanvas":"b8M0","../../../renderer/canvas/utils/SetTransform":"Jz6d"}],"JioY":[function(require,module,exports) {
var e=require("../../../utils/NOOP"),r=require("../../../utils/NOOP");e=require("./IsoTriangleWebGLRenderer"),r=require("./IsoTriangleCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../../utils/NOOP":"vnTW","./IsoTriangleWebGLRenderer":"RyBX","./IsoTriangleCanvasRenderer":"dXen"}],"Iob3":[function(require,module,exports) {
var i=require("../../../utils/Class"),t=require("./IsoTriangleRender"),s=require("../Shape"),e=new i({Extends:s,Mixins:[t],initialize:function(i,t,e,o,h,l,n,r,d){void 0===t&&(t=0),void 0===e&&(e=0),void 0===o&&(o=48),void 0===h&&(h=32),void 0===l&&(l=!1),void 0===n&&(n=15658734),void 0===r&&(r=10066329),void 0===d&&(d=13421772),s.call(this,i,"IsoTriangle",null),this.projection=4,this.fillTop=n,this.fillLeft=r,this.fillRight=d,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=l,this.isFilled=!0,this.setPosition(t,e),this.setSize(o,h),this.updateDisplayOrigin()},setProjection:function(i){return this.projection=i,this},setReversed:function(i){return this.isReversed=i,this},setFaces:function(i,t,s){return void 0===i&&(i=!0),void 0===t&&(t=!0),void 0===s&&(s=!0),this.showTop=i,this.showLeft=t,this.showRight=s,this},setFillStyle:function(i,t,s){return this.fillTop=i,this.fillLeft=t,this.fillRight=s,this.isFilled=!0,this}});module.exports=e;
},{"../../../utils/Class":"Q4x4","./IsoTriangleRender":"JioY","../Shape":"Vrk1"}],"NxM0":[function(require,module,exports) {
var r=require("../../../renderer/webgl/Utils"),e=function(e,l,t,o,a){var i=this.pipeline,s=i._tempMatrix1,p=i._tempMatrix2;e.setPipeline(i),p.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),s.copyFrom(o.matrix),a?(s.multiplyWithOffset(a,-o.scrollX*l.scrollFactorX,-o.scrollY*l.scrollFactorY),p.e=l.x,p.f=l.y):(p.e-=o.scrollX*l.scrollFactorX,p.f-=o.scrollY*l.scrollFactorY);var c=l._displayOriginX,n=l._displayOriginY,d=o.alpha*l.alpha;if(l.isStroked){var m=i.strokeTint,h=r.getTintAppendFloatAlphaAndSwap(l.strokeColor,l.strokeAlpha*d);m.TL=h,m.TR=h,m.BL=h,m.BR=h;var x=l._startWidth,y=l._endWidth;i.setTexture2D(),i.batchLine(l.geom.x1-c,l.geom.y1-n,l.geom.x2-c,l.geom.y2-n,x,y,1,0,!1,p,s)}};module.exports=e;
},{"../../../renderer/webgl/Utils":"mjFh"}],"nNyH":[function(require,module,exports) {
var e=require("../LineStyleCanvas"),r=require("../../../renderer/canvas/utils/SetTransform"),i=function(i,o,n,t,a){var s=i.currentContext;if(r(i,s,o,t,a)){var g=o._displayOriginX,m=o._displayOriginY;o.isStroked&&(e(s,o),s.beginPath(),s.moveTo(o.geom.x1-g,o.geom.y1-m),s.lineTo(o.geom.x2-g,o.geom.y2-m),s.stroke()),s.restore()}};module.exports=i;
},{"../LineStyleCanvas":"UAwu","../../../renderer/canvas/utils/SetTransform":"Jz6d"}],"sKCv":[function(require,module,exports) {
var e=require("../../../utils/NOOP"),r=require("../../../utils/NOOP");e=require("./LineWebGLRenderer"),r=require("./LineCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../../utils/NOOP":"vnTW","./LineWebGLRenderer":"NxM0","./LineCanvasRenderer":"nNyH"}],"CTty":[function(require,module,exports) {
var i=require("../../../utils/Class"),t=require("../Shape"),e=require("../../../geom/line/Line"),s=require("./LineRender"),h=new i({Extends:t,Mixins:[s],initialize:function(i,s,h,o,n,d,r,l,u){void 0===s&&(s=0),void 0===h&&(h=0),void 0===o&&(o=0),void 0===n&&(n=0),void 0===d&&(d=128),void 0===r&&(r=0),t.call(this,i,"Line",new e(o,n,d,r));var a=this.geom.right-this.geom.left,v=this.geom.bottom-this.geom.top;this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(s,h),this.setSize(a,v),void 0!==l&&this.setStrokeStyle(1,l,u),this.updateDisplayOrigin()},setLineWidth:function(i,t){return void 0===t&&(t=i),this._startWidth=i,this._endWidth=t,this.lineWidth=i,this},setTo:function(i,t,e,s){return this.geom.setTo(i,t,e,s),this}});module.exports=h;
},{"../../../utils/Class":"Q4x4","../Shape":"Vrk1","../../../geom/line/Line":"JM91","./LineRender":"sKCv"}],"rMsg":[function(require,module,exports) {
var e=require("../../../utils/NOOP"),r=require("../../../utils/NOOP");e=require("./PolygonWebGLRenderer"),r=require("./PolygonCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../../utils/NOOP":"vnTW","./PolygonWebGLRenderer":"BXOm","./PolygonCanvasRenderer":"n5ZK"}],"pHDv":[function(require,module,exports) {
var t=require("../rectangle/Rectangle"),e=function(e,n){void 0===n&&(n=new t);for(var a,i=1/0,r=1/0,h=-i,o=-r,x=0;x<e.points.length;x++)a=e.points[x],i=Math.min(i,a.x),r=Math.min(r,a.y),h=Math.max(h,a.x),o=Math.max(o,a.y);return n.x=i,n.y=r,n.width=h-i,n.height=o-r,n};module.exports=e;
},{"../rectangle/Rectangle":"ACYM"}],"jGKY":[function(require,module,exports) {
var n=function(n,t,o){for(var i=!1,p=-1,r=n.points.length-1;++p<n.points.length;r=p){var s=n.points[p].x,e=n.points[p].y,a=n.points[r].x,l=n.points[r].y;(e<=o&&o<l||l<=o&&o<e)&&t<(a-s)*(o-e)/(l-e)+s&&(i=!i)}return i};module.exports=n;
},{}],"xp7s":[function(require,module,exports) {
var e=require("../line/Length"),n=require("../line/Line"),r=function(r){for(var i=r.points,t=0,l=0;l<i.length;l++){var o=i[l],u=i[(l+1)%i.length],a=new n(o.x,o.y,u.x,u.y);t+=e(a)}return t};module.exports=r;
},{"../line/Length":"fUqJ","../line/Line":"JM91"}],"Z3Vw":[function(require,module,exports) {
var e=require("../line/Length"),r=require("../line/Line"),i=require("./Perimeter"),n=function(n,t,o,a){void 0===a&&(a=[]);var u=n.points,v=i(n);!t&&o>0&&(t=v/o);for(var l=0;l<t;l++)for(var f=v*(l/t),g=0,h=0;h<u.length;h++){var p=u[h],q=u[(h+1)%u.length],s=new r(p.x,p.y,q.x,q.y),x=e(s);if(!(f<g||f>g+x)){var d=s.getPoint((f-g)/x);a.push(d);break}g+=x}return a};module.exports=n;
},{"../line/Length":"fUqJ","../line/Line":"JM91","./Perimeter":"xp7s"}],"df0Y":[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("./Contains"),s=require("./GetPoints"),r=require("../const"),e=new t({initialize:function(t){this.type=r.POLYGON,this.area=0,this.points=[],t&&this.setTo(t)},contains:function(t,s){return i(this,t,s)},setTo:function(t){if(this.area=0,this.points=[],"string"==typeof t&&(t=t.split(" ")),!Array.isArray(t))return this;for(var i,s=Number.MAX_VALUE,r=0;r<t.length;r++)i={x:0,y:0},"number"==typeof t[r]||"string"==typeof t[r]?(i.x=parseFloat(t[r]),i.y=parseFloat(t[r+1]),r++):Array.isArray(t[r])?(i.x=t[r][0],i.y=t[r][1]):(i.x=t[r].x,i.y=t[r].y),this.points.push(i),i.y<s&&(s=i.y);return this.calculateArea(s),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var t,i,s=0,r=0;r<this.points.length-1;r++)t=this.points[r],s+=((i=this.points[r+1]).x-t.x)*(t.y+i.y);return t=this.points[0],i=this.points[this.points.length-1],s+=(t.x-i.x)*(i.y+t.y),this.area=.5*-s,this.area},getPoints:function(t,i,r){return s(this,t,i,r)}});module.exports=e;
},{"../../utils/Class":"Q4x4","./Contains":"jGKY","./GetPoints":"Z3Vw","../const":"wRsF"}],"H2Gg":[function(require,module,exports) {
var n=function(n,t){return n[0]=t[0],n[1]=t[1],n},t=function(t){var r,e=[],h=t.points;for(r=0;r<h.length;r++)e.push([h[r].x,h[r].y]);var u=[];for(e.length>0&&u.push(n([0,0],e[0])),r=0;r<e.length-1;r++){var o=e[r],s=e[r+1],p=o[0],l=o[1],g=s[0],a=s[1];u.push([.85*p+.15*g,.85*l+.15*a]),u.push([.15*p+.85*g,.15*l+.85*a])}return e.length>1&&u.push(n([0,0],e[e.length-1])),t.setTo(u)};module.exports=t;
},{}],"YADn":[function(require,module,exports) {
var e=require("./PolygonRender"),t=require("../../../utils/Class"),i=require("../../../geom/polygon/Earcut"),o=require("../../../geom/polygon/GetAABB"),s=require("../../../geom/polygon/Polygon"),r=require("../Shape"),n=require("../../../geom/polygon/Smooth"),a=new t({Extends:r,Mixins:[e],initialize:function(e,t,i,n,a,h){void 0===t&&(t=0),void 0===i&&(i=0),r.call(this,e,"Polygon",new s(n));var u=o(this.geom);this.setPosition(t,i),this.setSize(u.width,u.height),void 0!==a&&this.setFillStyle(a,h),this.updateDisplayOrigin(),this.updateData()},smooth:function(e){void 0===e&&(e=1);for(var t=0;t<e;t++)n(this.geom);return this.updateData()},updateData:function(){for(var e=[],t=this.geom.points,o=0;o<t.length;o++)e.push(t[o].x,t[o].y);return e.push(t[0].x,t[0].y),this.pathIndexes=i(e),this.pathData=e,this}});module.exports=a;
},{"./PolygonRender":"rMsg","../../../utils/Class":"Q4x4","../../../geom/polygon/Earcut":"zz3E","../../../geom/polygon/GetAABB":"pHDv","../../../geom/polygon/Polygon":"df0Y","../Shape":"Vrk1","../../../geom/polygon/Smooth":"H2Gg"}],"EeKs":[function(require,module,exports) {
var l=require("../StrokePathWebGL"),r=require("../../../renderer/webgl/Utils"),i=function(i,t,e,a,o){var p=this.pipeline,s=p._tempMatrix1,c=p._tempMatrix2,n=p._tempMatrix3;i.setPipeline(p),c.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),s.copyFrom(a.matrix),o?(s.multiplyWithOffset(o,-a.scrollX*t.scrollFactorX,-a.scrollY*t.scrollFactorY),c.e=t.x,c.f=t.y):(c.e-=a.scrollX*t.scrollFactorX,c.f-=a.scrollY*t.scrollFactorY),s.multiply(c,n);var h=t._displayOriginX,d=t._displayOriginY,f=a.alpha*t.alpha;if(t.isFilled){var m=p.fillTint,x=r.getTintAppendFloatAlphaAndSwap(t.fillColor,t.fillAlpha*f);m.TL=x,m.TR=x,m.BL=x,m.BR=x,p.setTexture2D(),p.batchFillRect(-h,-d,t.width,t.height)}t.isStroked&&l(p,t,f,h,d)};module.exports=i;
},{"../StrokePathWebGL":"Lcgx","../../../renderer/webgl/Utils":"mjFh"}],"dF90":[function(require,module,exports) {
var e=require("../FillStyleCanvas"),r=require("../LineStyleCanvas"),i=require("../../../renderer/canvas/utils/SetTransform"),t=function(t,a,n,l,s){var d=t.currentContext;if(i(t,d,a,l,s)){var o=a._displayOriginX,h=a._displayOriginY;a.isFilled&&(e(d,a),d.fillRect(-o,-h,a.width,a.height)),a.isStroked&&(r(d,a),d.beginPath(),d.rect(-o,-h,a.width,a.height),d.stroke()),d.restore()}};module.exports=t;
},{"../FillStyleCanvas":"b8M0","../LineStyleCanvas":"UAwu","../../../renderer/canvas/utils/SetTransform":"Jz6d"}],"n2f3":[function(require,module,exports) {
var e=require("../../../utils/NOOP"),r=require("../../../utils/NOOP");e=require("./RectangleWebGLRenderer"),r=require("./RectangleCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../../utils/NOOP":"vnTW","./RectangleWebGLRenderer":"EeKs","./RectangleCanvasRenderer":"dF90"}],"bIiR":[function(require,module,exports) {
var e=require("../../../utils/Class"),i=require("../../../geom/rectangle/Rectangle"),t=require("../Shape"),s=require("./RectangleRender"),n=new e({Extends:t,Mixins:[s],initialize:function(e,s,n,a,h,r,u){void 0===s&&(s=0),void 0===n&&(n=0),void 0===a&&(a=128),void 0===h&&(h=128),t.call(this,e,"Rectangle",new i(0,0,a,h)),this.setPosition(s,n),this.setSize(a,h),void 0!==r&&this.setFillStyle(r,u),this.updateDisplayOrigin(),this.updateData()},updateData:function(){var e=[],i=this.geom,t=this._tempLine;return i.getLineA(t),e.push(t.x1,t.y1,t.x2,t.y2),i.getLineB(t),e.push(t.x2,t.y2),i.getLineC(t),e.push(t.x2,t.y2),i.getLineD(t),e.push(t.x2,t.y2),this.pathData=e,this}});module.exports=n;
},{"../../../utils/Class":"Q4x4","../../../geom/rectangle/Rectangle":"ACYM","../Shape":"Vrk1","./RectangleRender":"n2f3"}],"NSCK":[function(require,module,exports) {
var e=require("../../../utils/NOOP"),r=require("../../../utils/NOOP");e=require("./StarWebGLRenderer"),r=require("./StarCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../../utils/NOOP":"vnTW","./StarWebGLRenderer":"BXOm","./StarCanvasRenderer":"n5ZK"}],"P4KE":[function(require,module,exports) {
var t=require("./StarRender"),i=require("../../../utils/Class"),s=require("../../../geom/polygon/Earcut"),e=require("../Shape"),n=new i({Extends:e,Mixins:[t],initialize:function(t,i,s,n,a,u,r,h){void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=5),void 0===a&&(a=32),void 0===u&&(u=64),e.call(this,t,"Star",null),this._points=n,this._innerRadius=a,this._outerRadius=u,this.setPosition(i,s),this.setSize(2*u,2*u),void 0!==r&&this.setFillStyle(r,h),this.updateDisplayOrigin(),this.updateData()},setPoints:function(t){return this._points=t,this.updateData()},setInnerRadius:function(t){return this._innerRadius=t,this.updateData()},setOuterRadius:function(t){return this._outerRadius=t,this.updateData()},points:{get:function(){return this._points},set:function(t){this._points=t,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this.updateData()}},updateData:function(){var t=[],i=this._points,e=this._innerRadius,n=this._outerRadius,a=Math.PI/2*3,u=Math.PI/i,r=n,h=n;t.push(r,h+-n);for(var o=0;o<i;o++)t.push(r+Math.cos(a)*n,h+Math.sin(a)*n),a+=u,t.push(r+Math.cos(a)*e,h+Math.sin(a)*e),a+=u;return t.push(r,h+-n),this.pathIndexes=s(t),this.pathData=t,this}});module.exports=n;
},{"./StarRender":"NSCK","../../../utils/Class":"Q4x4","../../../geom/polygon/Earcut":"zz3E","../Shape":"Vrk1"}],"wKKV":[function(require,module,exports) {
var x=function(x,r,y){var e=x.x3-x.x1,n=x.y3-x.y1,o=x.x2-x.x1,t=x.y2-x.y1,u=r-x.x1,a=y-x.y1,v=e*e+n*n,c=e*o+n*t,d=e*u+n*a,f=o*o+t*t,i=o*u+t*a,l=v*f-c*c,m=0===l?0:1/l,p=(f*d-c*i)*m,s=(v*i-c*d)*m;return p>=0&&s>=0&&p+s<1};module.exports=x;
},{}],"EwIU":[function(require,module,exports) {
var e=require("../point/Point"),x=require("../line/Length"),y=function(y,n,r){void 0===r&&(r=new e);var i=y.getLineA(),t=y.getLineB(),o=y.getLineC();if(n<=0||n>=1)return r.x=i.x1,r.y=i.y1,r;var u=x(i),g=x(t),v=x(o),L=(u+g+v)*n,a=0;return L<u?(a=L/u,r.x=i.x1+(i.x2-i.x1)*a,r.y=i.y1+(i.y2-i.y1)*a):L>u+g?(a=(L-=u+g)/v,r.x=o.x1+(o.x2-o.x1)*a,r.y=o.y1+(o.y2-o.y1)*a):(a=(L-=u)/g,r.x=t.x1+(t.x2-t.x1)*a,r.y=t.y1+(t.y2-t.y1)*a),r};module.exports=y;
},{"../point/Point":"tZ6A","../line/Length":"fUqJ"}],"jUWM":[function(require,module,exports) {
var e=require("../line/Length"),x=require("../point/Point"),r=function(r,y,n,i){void 0===i&&(i=[]);var t=r.getLineA(),o=r.getLineB(),u=r.getLineC(),v=e(t),a=e(o),g=e(u),L=v+a+g;!y&&n>0&&(y=L/n);for(var p=0;p<y;p++){var d=L*(p/y),f=0,h=new x;d<v?(f=d/v,h.x=t.x1+(t.x2-t.x1)*f,h.y=t.y1+(t.y2-t.y1)*f):d>v+a?(f=(d-=v+a)/g,h.x=u.x1+(u.x2-u.x1)*f,h.y=u.y1+(u.y2-u.y1)*f):(f=(d-=v)/a,h.x=o.x1+(o.x2-o.x1)*f,h.y=o.y1+(o.y2-o.y1)*f),i.push(h)}return i};module.exports=r;
},{"../line/Length":"fUqJ","../point/Point":"tZ6A"}],"jTZL":[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("./Contains"),s=require("./GetPoint"),h=require("./GetPoints"),n=require("../const"),e=require("../line/Line"),o=require("./Random"),x=new t({initialize:function(t,i,s,h,e,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===h&&(h=0),void 0===e&&(e=0),void 0===o&&(o=0),this.type=n.TRIANGLE,this.x1=t,this.y1=i,this.x2=s,this.y2=h,this.x3=e,this.y3=o},contains:function(t,s){return i(this,t,s)},getPoint:function(t,i){return s(this,t,i)},getPoints:function(t,i,s){return h(this,t,i,s)},getRandomPoint:function(t){return o(this,t)},setTo:function(t,i,s,h,n,e){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===h&&(h=0),void 0===n&&(n=0),void 0===e&&(e=0),this.x1=t,this.y1=i,this.x2=s,this.y2=h,this.x3=n,this.y3=e,this},getLineA:function(t){return void 0===t&&(t=new e),t.setTo(this.x1,this.y1,this.x2,this.y2),t},getLineB:function(t){return void 0===t&&(t=new e),t.setTo(this.x2,this.y2,this.x3,this.y3),t},getLineC:function(t){return void 0===t&&(t=new e),t.setTo(this.x3,this.y3,this.x1,this.y1),t},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(t){var i=0;i=this.x1<=this.x2&&this.x1<=this.x3?this.x1-t:this.x2<=this.x1&&this.x2<=this.x3?this.x2-t:this.x3-t,this.x1-=i,this.x2-=i,this.x3-=i}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(t){var i=0;i=this.x1>=this.x2&&this.x1>=this.x3?this.x1-t:this.x2>=this.x1&&this.x2>=this.x3?this.x2-t:this.x3-t,this.x1-=i,this.x2-=i,this.x3-=i}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(t){var i=0;i=this.y1<=this.y2&&this.y1<=this.y3?this.y1-t:this.y2<=this.y1&&this.y2<=this.y3?this.y2-t:this.y3-t,this.y1-=i,this.y2-=i,this.y3-=i}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(t){var i=0;i=this.y1>=this.y2&&this.y1>=this.y3?this.y1-t:this.y2>=this.y1&&this.y2>=this.y3?this.y2-t:this.y3-t,this.y1-=i,this.y2-=i,this.y3-=i}}});module.exports=x;
},{"../../utils/Class":"Q4x4","./Contains":"wKKV","./GetPoint":"EwIU","./GetPoints":"jUWM","../const":"wRsF","../line/Line":"JM91","./Random":"Agdn"}],"wXGQ":[function(require,module,exports) {
var l=require("../StrokePathWebGL"),e=require("../../../renderer/webgl/Utils"),r=function(r,i,t,a,o){var p=this.pipeline,s=p._tempMatrix1,c=p._tempMatrix2,m=p._tempMatrix3;r.setPipeline(p),c.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),s.copyFrom(a.matrix),o?(s.multiplyWithOffset(o,-a.scrollX*i.scrollFactorX,-a.scrollY*i.scrollFactorY),c.e=i.x,c.f=i.y):(c.e-=a.scrollX*i.scrollFactorX,c.f-=a.scrollY*i.scrollFactorY),s.multiply(c,m);var n=i._displayOriginX,g=i._displayOriginY,x=a.alpha*i.alpha;if(i.isFilled){var y=p.fillTint,f=e.getTintAppendFloatAlphaAndSwap(i.fillColor,i.fillAlpha*x);y.TL=f,y.TR=f,y.BL=f,y.BR=f;var d=i.geom.x1-n,h=i.geom.y1-g,F=i.geom.x2-n,u=i.geom.y2-g,T=i.geom.x3-n,X=i.geom.y3-g;p.setTexture2D(),p.batchFillTriangle(d,h,F,u,T,X,c,s)}i.isStroked&&l(p,i,x,n,g)};module.exports=r;
},{"../StrokePathWebGL":"Lcgx","../../../renderer/webgl/Utils":"mjFh"}],"tHV2":[function(require,module,exports) {
var e=require("../FillStyleCanvas"),r=require("../LineStyleCanvas"),i=require("../../../renderer/canvas/utils/SetTransform"),o=function(o,l,n,a,t){var s=o.currentContext;if(i(o,s,l,a,t)){var g=l._displayOriginX,m=l._displayOriginY,u=l.geom.x1-g,v=l.geom.y1-m,y=l.geom.x2-g,d=l.geom.y2-m,x=l.geom.x3-g,c=l.geom.y3-m;s.beginPath(),s.moveTo(u,v),s.lineTo(y,d),s.lineTo(x,c),s.closePath(),l.isFilled&&(e(s,l),s.fill()),l.isStroked&&(r(s,l),s.stroke()),s.restore()}};module.exports=o;
},{"../FillStyleCanvas":"b8M0","../LineStyleCanvas":"UAwu","../../../renderer/canvas/utils/SetTransform":"Jz6d"}],"ogS6":[function(require,module,exports) {
var e=require("../../../utils/NOOP"),r=require("../../../utils/NOOP");e=require("./TriangleWebGLRenderer"),r=require("./TriangleCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../../utils/NOOP":"vnTW","./TriangleWebGLRenderer":"wXGQ","./TriangleCanvasRenderer":"tHV2"}],"A0MO":[function(require,module,exports) {
var i=require("../../../utils/Class"),t=require("../Shape"),e=require("../../../geom/triangle/Triangle"),s=require("./TriangleRender"),o=new i({Extends:t,Mixins:[s],initialize:function(i,s,o,a,n,r,h,u,d,g,l){void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===n&&(n=128),void 0===r&&(r=64),void 0===h&&(h=0),void 0===u&&(u=128),void 0===d&&(d=128),t.call(this,i,"Triangle",new e(a,n,r,h,u,d));var p=this.geom.right-this.geom.left,v=this.geom.bottom-this.geom.top;this.setPosition(s,o),this.setSize(p,v),void 0!==g&&this.setFillStyle(g,l),this.updateDisplayOrigin(),this.updateData()},setTo:function(i,t,e,s,o,a){return this.geom.setTo(i,t,e,s,o,a),this.updateData()},updateData:function(){var i=[],t=this.geom,e=this._tempLine;return t.getLineA(e),i.push(e.x1,e.y1,e.x2,e.y2),t.getLineB(e),i.push(e.x2,e.y2),t.getLineC(e),i.push(e.x2,e.y2),this.pathData=i,this}});module.exports=o;
},{"../../../utils/Class":"Q4x4","../Shape":"Vrk1","../../../geom/triangle/Triangle":"jTZL","./TriangleRender":"ogS6"}],"K0i8":[function(require,module,exports) {
var e=require("./Blitter"),r=require("../GameObjectFactory");r.register("blitter",function(r,t,i,s){return this.displayList.add(new e(this.scene,r,t,i,s))});
},{"./Blitter":"zIsB","../GameObjectFactory":"BKGz"}],"RgZn":[function(require,module,exports) {
var e=require("./Container"),r=require("../GameObjectFactory");r.register("container",function(r,i,t){return this.displayList.add(new e(this.scene,r,i,t))});
},{"./Container":"Vfu9","../GameObjectFactory":"BKGz"}],"lbuS":[function(require,module,exports) {
var e=require("./DOMElement"),t=require("../GameObjectFactory");t.register("dom",function(t,r,i,a,s){var d=new e(this.scene,t,r,i,a,s);return this.displayList.add(d),this.updateList.add(d),d});
},{"./DOMElement":"GzAZ","../GameObjectFactory":"BKGz"}],"lZH4":[function(require,module,exports) {
var e=require("./DynamicBitmapText"),i=require("../../GameObjectFactory");i.register("dynamicBitmapText",function(i,t,r,a,n){return this.displayList.add(new e(this.scene,i,t,r,a,n))});
},{"./DynamicBitmapText":"Wb3Y","../../GameObjectFactory":"BKGz"}],"leOv":[function(require,module,exports) {
var e=require("./Extern"),r=require("../GameObjectFactory");r.register("extern",function(){var r=new e(this.scene);return this.displayList.add(r),this.updateList.add(r),r});
},{"./Extern":"fdwf","../GameObjectFactory":"BKGz"}],"eICK":[function(require,module,exports) {
var e=require("./Graphics"),r=require("../GameObjectFactory");r.register("graphics",function(r){return this.displayList.add(new e(this.scene,r))});
},{"./Graphics":"LiUC","../GameObjectFactory":"BKGz"}],"Pc6q":[function(require,module,exports) {
var e=require("./Group"),r=require("../GameObjectFactory");r.register("group",function(r,t){return this.updateList.add(new e(this.scene,r,t))});
},{"./Group":"b7vI","../GameObjectFactory":"BKGz"}],"yfEu":[function(require,module,exports) {
var e=require("./Image"),r=require("../GameObjectFactory");r.register("image",function(r,i,t,a){return this.displayList.add(new e(this.scene,r,i,t,a))});
},{"./Image":"WGAg","../GameObjectFactory":"BKGz"}],"e8fc":[function(require,module,exports) {
var e=require("../GameObjectFactory"),r=require("./ParticleEmitterManager");e.register("particles",function(e,t,i){var a=new r(this.scene,e,t,i);return this.displayList.add(a),this.updateList.add(a),a});
},{"../GameObjectFactory":"BKGz","./ParticleEmitterManager":"nRsY"}],"QnHt":[function(require,module,exports) {
var e=require("../GameObjectFactory"),r=require("./PathFollower");e.register("follower",function(e,t,i,a,s){var d=new r(this.scene,e,t,i,a,s);return this.displayList.add(d),this.updateList.add(d),d});
},{"../GameObjectFactory":"BKGz","./PathFollower":"pMeK"}],"gbJi":[function(require,module,exports) {
var e=require("../GameObjectFactory"),r=require("./RenderTexture");e.register("renderTexture",function(e,t,i,n,s,u){return this.displayList.add(new r(this.scene,e,t,i,n,s,u))});
},{"../GameObjectFactory":"BKGz","./RenderTexture":"FDlA"}],"JyWN":[function(require,module,exports) {
var e=require("./Rope"),r=require("../GameObjectFactory");r.register("rope",function(r,t,i,a,s,d,n,u){var c=new e(this.scene,r,t,i,a,s,d,n,u);return this.displayList.add(c),this.updateList.add(c)});
},{"./Rope":"kFjg","../GameObjectFactory":"BKGz"}],"ui3a":[function(require,module,exports) {
var e=require("../GameObjectFactory"),r=require("./Sprite");e.register("sprite",function(e,t,i,s){var a=new r(this.scene,e,t,i,s);return this.displayList.add(a),this.updateList.add(a),a});
},{"../GameObjectFactory":"BKGz","./Sprite":"uRwE"}],"cjz7":[function(require,module,exports) {
var e=require("./BitmapText"),t=require("../../GameObjectFactory");t.register("bitmapText",function(t,i,r,a,s,n){return this.displayList.add(new e(this.scene,t,i,r,a,s,n))});
},{"./BitmapText":"es4n","../../GameObjectFactory":"BKGz"}],"Xq7w":[function(require,module,exports) {
var e=require("./Text"),t=require("../../GameObjectFactory");t.register("text",function(t,r,i,s){return this.displayList.add(new e(this.scene,t,r,i,s))});
},{"./Text":"PRWY","../../GameObjectFactory":"BKGz"}],"a257":[function(require,module,exports) {
var e=require("./TileSprite"),i=require("../GameObjectFactory");i.register("tileSprite",function(i,r,t,s,a,n){return this.displayList.add(new e(this.scene,i,r,t,s,a,n))});
},{"./TileSprite":"SClv","../GameObjectFactory":"BKGz"}],"VKGB":[function(require,module,exports) {
var e=require("./Zone"),r=require("../GameObjectFactory");r.register("zone",function(r,i,t,n){return this.displayList.add(new e(this.scene,r,i,t,n))});
},{"./Zone":"fuRQ","../GameObjectFactory":"BKGz"}],"kmNP":[function(require,module,exports) {
var e=require("./Video"),i=require("../GameObjectFactory");i.register("video",function(i,r,t){var a=new e(this.scene,i,r,t);return this.displayList.add(a),this.updateList.add(a),a});
},{"./Video":"YodL","../GameObjectFactory":"BKGz"}],"nypW":[function(require,module,exports) {
var e=require("./Arc"),r=require("../../GameObjectFactory");r.register("arc",function(r,i,t,s,c,n,a,d){return this.displayList.add(new e(this.scene,r,i,t,s,c,n,a,d))}),r.register("circle",function(r,i,t,s,c){return this.displayList.add(new e(this.scene,r,i,t,0,360,!1,s,c))});
},{"./Arc":"yBln","../../GameObjectFactory":"BKGz"}],"Wo8h":[function(require,module,exports) {
var e=require("../../GameObjectFactory"),r=require("./Curve");e.register("curve",function(e,i,t,s,u){return this.displayList.add(new r(this.scene,e,i,t,s,u))});
},{"../../GameObjectFactory":"BKGz","./Curve":"nutV"}],"vVN7":[function(require,module,exports) {
var e=require("./Ellipse"),i=require("../../GameObjectFactory");i.register("ellipse",function(i,r,s,t,a,l){return this.displayList.add(new e(this.scene,i,r,s,t,a,l))});
},{"./Ellipse":"x48G","../../GameObjectFactory":"BKGz"}],"AHLv":[function(require,module,exports) {
var e=require("../../GameObjectFactory"),r=require("./Grid");e.register("grid",function(e,i,t,s,a,d,n,c,u,g){return this.displayList.add(new r(this.scene,e,i,t,s,a,d,n,c,u,g))});
},{"../../GameObjectFactory":"BKGz","./Grid":"Z9SB"}],"qJtL":[function(require,module,exports) {
var e=require("../../GameObjectFactory"),r=require("./IsoBox");e.register("isobox",function(e,i,s,t,o,a,n){return this.displayList.add(new r(this.scene,e,i,s,t,o,a,n))});
},{"../../GameObjectFactory":"BKGz","./IsoBox":"JsDG"}],"g6Up":[function(require,module,exports) {
var e=require("../../GameObjectFactory"),r=require("./IsoTriangle");e.register("isotriangle",function(e,i,t,s,a,n,c,o){return this.displayList.add(new r(this.scene,e,i,t,s,a,n,c,o))});
},{"../../GameObjectFactory":"BKGz","./IsoTriangle":"Iob3"}],"Ne5K":[function(require,module,exports) {
var e=require("../../GameObjectFactory"),i=require("./Line");e.register("line",function(e,r,t,n,s,a,c,u){return this.displayList.add(new i(this.scene,e,r,t,n,s,a,c,u))});
},{"../../GameObjectFactory":"BKGz","./Line":"CTty"}],"lAdN":[function(require,module,exports) {
var e=require("../../GameObjectFactory"),r=require("./Polygon");e.register("polygon",function(e,i,t,n,o){return this.displayList.add(new r(this.scene,e,i,t,n,o))});
},{"../../GameObjectFactory":"BKGz","./Polygon":"YADn"}],"iSba":[function(require,module,exports) {
var e=require("../../GameObjectFactory"),r=require("./Rectangle");e.register("rectangle",function(e,t,i,a,n,c){return this.displayList.add(new r(this.scene,e,t,i,a,n,c))});
},{"../../GameObjectFactory":"BKGz","./Rectangle":"bIiR"}],"t4n0":[function(require,module,exports) {
var e=require("./Star"),r=require("../../GameObjectFactory");r.register("star",function(r,t,i,a,s,n,c){return this.displayList.add(new e(this.scene,r,t,i,a,s,n,c))});
},{"./Star":"P4KE","../../GameObjectFactory":"BKGz"}],"gGoy":[function(require,module,exports) {
var e=require("../../GameObjectFactory"),r=require("./Triangle");e.register("triangle",function(e,i,t,a,n,s,c,u,d,g){return this.displayList.add(new r(this.scene,e,i,t,a,n,s,c,u,d,g))});
},{"../../GameObjectFactory":"BKGz","./Triangle":"A0MO"}],"lJjt":[function(require,module,exports) {
var e=require("./Blitter"),r=require("../BuildGameObject"),t=require("../GameObjectCreator"),i=require("../../utils/object/GetAdvancedValue");t.register("blitter",function(t,u){void 0===t&&(t={});var a=i(t,"key",null),l=i(t,"frame",null),n=new e(this.scene,0,0,a,l);return void 0!==u&&(t.add=u),r(this.scene,n,t),n});
},{"./Blitter":"zIsB","../BuildGameObject":"irpS","../GameObjectCreator":"eYSd","../../utils/object/GetAdvancedValue":"YJ2h"}],"Q3ez":[function(require,module,exports) {
var e=require("../BuildGameObject"),r=require("./Container"),i=require("../GameObjectCreator"),t=require("../../utils/object/GetAdvancedValue");i.register("container",function(i,n){void 0===i&&(i={});var a=t(i,"x",0),u=t(i,"y",0),c=new r(this.scene,a,u);return void 0!==n&&(i.add=n),e(this.scene,c,i),c});
},{"../BuildGameObject":"irpS","./Container":"Vfu9","../GameObjectCreator":"eYSd","../../utils/object/GetAdvancedValue":"YJ2h"}],"qGtI":[function(require,module,exports) {
var e=require("./DynamicBitmapText"),t=require("../../BuildGameObject"),i=require("../../GameObjectCreator"),r=require("../../../utils/object/GetAdvancedValue");i.register("dynamicBitmapText",function(i,a){void 0===i&&(i={});var n=r(i,"font",""),c=r(i,"text",""),u=r(i,"size",!1),d=new e(this.scene,0,0,n,c,u);return void 0!==a&&(i.add=a),t(this.scene,d,i),d});
},{"./DynamicBitmapText":"Wb3Y","../../BuildGameObject":"irpS","../../GameObjectCreator":"eYSd","../../../utils/object/GetAdvancedValue":"YJ2h"}],"XNAu":[function(require,module,exports) {
var e=require("../GameObjectCreator"),r=require("./Graphics");e.register("graphics",function(e,i){void 0===e&&(e={}),void 0!==i&&(e.add=i);var s=new r(this.scene,e);return e.add&&this.scene.sys.displayList.add(s),s});
},{"../GameObjectCreator":"eYSd","./Graphics":"LiUC"}],"id6n":[function(require,module,exports) {
var e=require("../GameObjectCreator"),r=require("./Group");e.register("group",function(e){return new r(this.scene,null,e)});
},{"../GameObjectCreator":"eYSd","./Group":"b7vI"}],"RXeg":[function(require,module,exports) {
var e=require("../BuildGameObject"),r=require("../GameObjectCreator"),i=require("../../utils/object/GetAdvancedValue"),a=require("./Image");r.register("image",function(r,t){void 0===r&&(r={});var u=i(r,"key",null),n=i(r,"frame",null),c=new a(this.scene,0,0,u,n);return void 0!==t&&(r.add=t),e(this.scene,c,r),c});
},{"../BuildGameObject":"irpS","../GameObjectCreator":"eYSd","../../utils/object/GetAdvancedValue":"YJ2h","./Image":"WGAg"}],"cSaf":[function(require,module,exports) {
var e=require("../GameObjectCreator"),t=require("../../utils/object/GetAdvancedValue"),r=require("../../utils/object/GetFastValue"),i=require("./ParticleEmitterManager");e.register("particles",function(e,a){void 0===e&&(e={});var d=t(e,"key",null),u=t(e,"frame",null),l=r(e,"emitters",null),s=new i(this.scene,d,u,l);return void 0!==a&&(e.add=a),r(e,"add",!1)&&this.displayList.add(s),this.updateList.add(s),s});
},{"../GameObjectCreator":"eYSd","../../utils/object/GetAdvancedValue":"YJ2h","../../utils/object/GetFastValue":"xbYy","./ParticleEmitterManager":"nRsY"}],"Lx7P":[function(require,module,exports) {
var e=require("../BuildGameObject"),r=require("../GameObjectCreator"),i=require("../../utils/object/GetAdvancedValue"),t=require("./RenderTexture");r.register("renderTexture",function(r,d){void 0===r&&(r={});var u=i(r,"x",0),a=i(r,"y",0),n=i(r,"width",32),c=i(r,"height",32),o=i(r,"key",void 0),v=i(r,"frame",void 0),s=new t(this.scene,u,a,n,c,o,v);return void 0!==d&&(r.add=d),e(this.scene,s,r),s});
},{"../BuildGameObject":"irpS","../GameObjectCreator":"eYSd","../../utils/object/GetAdvancedValue":"YJ2h","./RenderTexture":"FDlA"}],"RJNB":[function(require,module,exports) {
var e=require("../BuildGameObject"),r=require("../GameObjectCreator"),i=require("../../utils/object/GetAdvancedValue"),o=require("../../utils/object/GetValue"),t=require("./Rope");r.register("rope",function(r,u){void 0===r&&(r={});var a=i(r,"key",null),l=i(r,"frame",null),n=i(r,"horizontal",!0),d=o(r,"points",void 0),s=o(r,"colors",void 0),c=o(r,"alphas",void 0),v=new t(this.scene,0,0,a,l,d,n,s,c);return void 0!==u&&(r.add=u),e(this.scene,v,r),v});
},{"../BuildGameObject":"irpS","../GameObjectCreator":"eYSd","../../utils/object/GetAdvancedValue":"YJ2h","../../utils/object/GetValue":"FWyS","./Rope":"kFjg"}],"D9Jj":[function(require,module,exports) {
var e=require("../BuildGameObject"),r=require("../BuildGameObjectAnimation"),i=require("../GameObjectCreator"),t=require("../../utils/object/GetAdvancedValue"),u=require("./Sprite");i.register("sprite",function(i,a){void 0===i&&(i={});var n=t(i,"key",null),c=t(i,"frame",null),d=new u(this.scene,0,0,n,c);return void 0!==a&&(i.add=a),e(this.scene,d,i),r(d,i),d});
},{"../BuildGameObject":"irpS","../BuildGameObjectAnimation":"OsWu","../GameObjectCreator":"eYSd","../../utils/object/GetAdvancedValue":"YJ2h","./Sprite":"uRwE"}],"FBiP":[function(require,module,exports) {
var e=require("./BitmapText"),t=require("../../BuildGameObject"),i=require("../../GameObjectCreator"),r=require("../../../utils/object/GetAdvancedValue"),a=require("../../../utils/object/GetValue");i.register("bitmapText",function(i,u){void 0===i&&(i={});var n=a(i,"font",""),c=r(i,"text",""),s=r(i,"size",!1),d=a(i,"align",0),o=new e(this.scene,0,0,n,c,s,d);return void 0!==u&&(i.add=u),t(this.scene,o,i),o});
},{"./BitmapText":"es4n","../../BuildGameObject":"irpS","../../GameObjectCreator":"eYSd","../../../utils/object/GetAdvancedValue":"YJ2h","../../../utils/object/GetValue":"FWyS"}],"Gxru":[function(require,module,exports) {
var e=require("../../BuildGameObject"),t=require("../../GameObjectCreator"),r=require("../../../utils/object/GetAdvancedValue"),u=require("./Text");t.register("text",function(t,i){void 0===t&&(t={});var n=r(t,"text",""),a=r(t,"style",null),d=r(t,"padding",null);null!==d&&(a.padding=d);var o=new u(this.scene,0,0,n,a);return void 0!==i&&(t.add=i),e(this.scene,o,t),o.autoRound=r(t,"autoRound",!0),o.resolution=r(t,"resolution",1),o});
},{"../../BuildGameObject":"irpS","../../GameObjectCreator":"eYSd","../../../utils/object/GetAdvancedValue":"YJ2h","./Text":"PRWY"}],"tyPP":[function(require,module,exports) {
var e=require("../BuildGameObject"),r=require("../GameObjectCreator"),i=require("../../utils/object/GetAdvancedValue"),t=require("./TileSprite");r.register("tileSprite",function(r,a){void 0===r&&(r={});var u=i(r,"x",0),d=i(r,"y",0),c=i(r,"width",512),n=i(r,"height",512),s=i(r,"key",""),h=i(r,"frame",""),l=new t(this.scene,u,d,c,n,s,h);return void 0!==a&&(r.add=a),e(this.scene,l,r),l});
},{"../BuildGameObject":"irpS","../GameObjectCreator":"eYSd","../../utils/object/GetAdvancedValue":"YJ2h","./TileSprite":"SClv"}],"HpVu":[function(require,module,exports) {
var e=require("../GameObjectCreator"),r=require("../../utils/object/GetAdvancedValue"),t=require("./Zone");e.register("zone",function(e){var i=r(e,"x",0),n=r(e,"y",0),u=r(e,"width",1),a=r(e,"height",u);return new t(this.scene,i,n,u,a)});
},{"../GameObjectCreator":"eYSd","../../utils/object/GetAdvancedValue":"YJ2h","./Zone":"fuRQ"}],"uXa7":[function(require,module,exports) {
var e=require("../BuildGameObject"),r=require("../GameObjectCreator"),i=require("../../utils/object/GetAdvancedValue"),t=require("./Video");r.register("video",function(r,u){void 0===r&&(r={});var d=i(r,"key",null),a=new t(this.scene,0,0,d);return void 0!==u&&(r.add=u),e(this.scene,a,r),a});
},{"../BuildGameObject":"irpS","../GameObjectCreator":"eYSd","../../utils/object/GetAdvancedValue":"YJ2h","./Video":"YodL"}],"L3hF":[function(require,module,exports) {
var e=require("../../renderer/webgl/Utils"),t=function(t,r,l,o,a){var i=this.pipeline;t.setPipeline(i,r);var s=i._tempMatrix1,c=i._tempMatrix2,p=i._tempMatrix3;c.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),s.copyFrom(o.matrix),a?(s.multiplyWithOffset(a,-o.scrollX*r.scrollFactorX,-o.scrollY*r.scrollFactorY),c.e=r.x,c.f=r.y,s.multiply(c,p)):(c.e-=o.scrollX*r.scrollFactorX,c.f-=o.scrollY*r.scrollFactorY,s.multiply(c,p));var n=r.frame.glTexture,u=r.vertices,x=r.uv,v=r.colors,m=r.alphas,f=u.length,h=Math.floor(.5*f);i.vertexCount+h>i.vertexCapacity&&i.flush(),i.setTexture2D(n,0);for(var y=i.vertexViewF32,F=i.vertexViewU32,d=i.vertexCount*i.vertexComponentCount-1,C=0,M=r.tintFill,X=0;X<f;X+=2){var Y=u[X+0],g=u[X+1],T=Y*p.a+g*p.c+p.e,w=Y*p.b+g*p.d+p.f;o.roundPixels&&(T=Math.round(T),w=Math.round(w)),y[++d]=T,y[++d]=w,y[++d]=x[X+0],y[++d]=x[X+1],y[++d]=M,F[++d]=e.getTintAppendFloatAlpha(v[C],o.alpha*m[C]),C++}i.vertexCount+=h};module.exports=t;
},{"../../renderer/webgl/Utils":"mjFh"}],"R3GZ":[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");e=require("./MeshWebGLRenderer"),r=require("./MeshCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":"vnTW","./MeshWebGLRenderer":"L3hF","./MeshCanvasRenderer":"vnTW"}],"NiQi":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../components"),r=require("../GameObject"),i=require("./MeshRender"),n=require("../../utils/NOOP"),s=new e({Extends:r,Mixins:[t.BlendMode,t.Depth,t.Mask,t.Pipeline,t.Size,t.Texture,t.Transform,t.Visible,t.ScrollFactor,i],initialize:function(e,t,i,n,s,h,o,l,a){if(r.call(this,e,"Mesh"),n.length!==s.length)throw new Error("Mesh Vertex count must match UV count");var u,c=n.length/2|0;if(h.length>0&&h.length<c)throw new Error("Mesh Color count must match Vertex count");if(o.length>0&&o.length<c)throw new Error("Mesh Alpha count must match Vertex count");if(0===h.length)for(u=0;u<c;++u)h[u]=16777215;if(0===o.length)for(u=0;u<c;++u)o[u]=1;this.vertices=new Float32Array(n),this.uv=new Float32Array(s),this.colors=new Uint32Array(h),this.alphas=new Float32Array(o),this.tintFill=!1,this.setTexture(l,a),this.setPosition(t,i),this.setSizeToFrame(),this.initPipeline()},setAlpha:n});module.exports=s;
},{"../../utils/Class":"Q4x4","../components":"PnJA","../GameObject":"YzbT","./MeshRender":"R3GZ","../../utils/NOOP":"vnTW"}],"o6Lb":[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("../mesh/Mesh"),s=new t({Extends:i,initialize:function(t,s,e,h,o){i.call(this,t,s,e,[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,0,0,1,1,1,0],[16777215,16777215,16777215,16777215,16777215,16777215],[1,1,1,1,1,1],h,o),this.resetPosition()},setFrame:function(t){return this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,t=this.frame,this.uv[0]=t.u0,this.uv[1]=t.v0,this.uv[2]=t.u0,this.uv[3]=t.v1,this.uv[4]=t.u1,this.uv[5]=t.v1,this.uv[6]=t.u0,this.uv[7]=t.v0,this.uv[8]=t.u1,this.uv[9]=t.v1,this.uv[10]=t.u1,this.uv[11]=t.v0,this},topLeftX:{get:function(){return this.x+this.vertices[0]},set:function(t){this.vertices[0]=t-this.x,this.vertices[6]=t-this.x}},topLeftY:{get:function(){return this.y+this.vertices[1]},set:function(t){this.vertices[1]=t-this.y,this.vertices[7]=t-this.y}},topRightX:{get:function(){return this.x+this.vertices[10]},set:function(t){this.vertices[10]=t-this.x}},topRightY:{get:function(){return this.y+this.vertices[11]},set:function(t){this.vertices[11]=t-this.y}},bottomLeftX:{get:function(){return this.x+this.vertices[2]},set:function(t){this.vertices[2]=t-this.x}},bottomLeftY:{get:function(){return this.y+this.vertices[3]},set:function(t){this.vertices[3]=t-this.y}},bottomRightX:{get:function(){return this.x+this.vertices[4]},set:function(t){this.vertices[4]=t-this.x,this.vertices[8]=t-this.x}},bottomRightY:{get:function(){return this.y+this.vertices[5]},set:function(t){this.vertices[5]=t-this.y,this.vertices[9]=t-this.y}},topLeftAlpha:{get:function(){return this.alphas[0]},set:function(t){this.alphas[0]=t,this.alphas[3]=t}},topRightAlpha:{get:function(){return this.alphas[5]},set:function(t){this.alphas[5]=t}},bottomLeftAlpha:{get:function(){return this.alphas[1]},set:function(t){this.alphas[1]=t}},bottomRightAlpha:{get:function(){return this.alphas[2]},set:function(t){this.alphas[2]=t,this.alphas[4]=t}},topLeftColor:{get:function(){return this.colors[0]},set:function(t){this.colors[0]=t,this.colors[3]=t}},topRightColor:{get:function(){return this.colors[5]},set:function(t){this.colors[5]=t}},bottomLeftColor:{get:function(){return this.colors[1]},set:function(t){this.colors[1]=t}},bottomRightColor:{get:function(){return this.colors[2]},set:function(t){this.colors[2]=t,this.colors[4]=t}},setTopLeft:function(t,i){return this.topLeftX=t,this.topLeftY=i,this},setTopRight:function(t,i){return this.topRightX=t,this.topRightY=i,this},setBottomLeft:function(t,i){return this.bottomLeftX=t,this.bottomLeftY=i,this},setBottomRight:function(t,i){return this.bottomRightX=t,this.bottomRightY=i,this},resetPosition:function(){var t=this.x,i=this.y,s=Math.floor(this.width/2),e=Math.floor(this.height/2);return this.setTopLeft(t-s,i-e),this.setTopRight(t+s,i-e),this.setBottomLeft(t-s,i+e),this.setBottomRight(t+s,i+e),this},resetAlpha:function(){var t=this.alphas;return t[0]=1,t[1]=1,t[2]=1,t[3]=1,t[4]=1,t[5]=1,this},resetColors:function(){var t=this.colors;return t[0]=16777215,t[1]=16777215,t[2]=16777215,t[3]=16777215,t[4]=16777215,t[5]=16777215,this},reset:function(){return this.resetPosition(),this.resetAlpha(),this.resetColors()}});module.exports=s;
},{"../../utils/Class":"Q4x4","../mesh/Mesh":"NiQi"}],"z5Uu":[function(require,module,exports) {
var r=function(r,e,n){if(!r||"number"==typeof r)return!1;if(r.hasOwnProperty(e))return r[e]=n,!0;if(-1!==e.indexOf(".")){for(var t=e.split("."),f=r,u=r,i=0;i<t.length;i++){if(!f.hasOwnProperty(t[i]))return!1;u=f,f=f[t[i]]}return u[t[t.length-1]]=n,!0}return!1};module.exports=r;
},{}],"mi5H":[function(require,module,exports) {
var r=function(r,e,l,t,i){if(e.shader){var o=r.currentPipeline;if(r.clearPipeline(),e.renderToTexture)e.load(),e.flush();else{var a=e._tempMatrix1,c=e._tempMatrix2,s=e._tempMatrix3;c.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),a.copyFrom(t.matrix),i?(a.multiplyWithOffset(i,-t.scrollX*e.scrollFactorX,-t.scrollY*e.scrollFactorY),c.e=e.x,c.f=e.y):(c.e-=t.scrollX*e.scrollFactorX,c.f-=t.scrollY*e.scrollFactorY),a.multiply(c,s),r.width===e._rendererWidth&&r.height===e._rendererHeight||e.projOrtho(0,r.width,r.height,0),e.load(s.matrix),e.flush()}r.rebindPipeline(o)}};module.exports=r;
},{}],"xIN8":[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");e=require("./ShaderWebGLRenderer"),r=require("./ShaderCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":"vnTW","./ShaderWebGLRenderer":"mi5H","./ShaderCanvasRenderer":"vnTW"}],"c12A":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../components"),r=require("../GameObject"),i=require("../../utils/object/GetFastValue"),s=require("../../utils/object/Extend"),a=require("../../utils/object/SetValue"),n=require("./ShaderRender"),h=require("../components/TransformMatrix"),u=new e({Extends:r,Mixins:[t.ComputedSize,t.Depth,t.GetBounds,t.Mask,t.Origin,t.ScrollFactor,t.Transform,t.Visible,n],initialize:function(e,t,i,s,a,n,u,o){void 0===i&&(i=0),void 0===s&&(s=0),void 0===a&&(a=128),void 0===n&&(n=128),r.call(this,e,"Shader"),this.blendMode=-1,this.shader;var l=e.sys.renderer;this.renderer=l,this.gl=l.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=l.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new h,this._tempMatrix2=new h,this._tempMatrix3=new h,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=l.width,this._rendererHeight=l.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(i,s),this.setSize(a,n),this.setOrigin(.5,.5),this.setShader(t,u,o)},willRender:function(e){return!!this.renderToTexture||!(r.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&e.id)},setRenderToTexture:function(e,t){if(void 0===t&&(t=!1),!this.renderToTexture){var r=this.width,i=this.height,s=this.renderer;this.glTexture=s.createTextureFromSource(null,r,i,0),this.glTexture.flipY=t,this.framebuffer=s.createFramebuffer(r,i,this.glTexture,!1),this._rendererWidth=r,this._rendererHeight=i,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),e&&(this.texture=this.scene.sys.textures.addGLTexture(e,this.glTexture,r,i))}if(this.shader){var a=s.currentPipeline;s.clearPipeline(),this.load(),this.flush(),s.rebindPipeline(a)}return this},setShader:function(e,t,r){if(void 0===t&&(t=[]),"string"==typeof e){var i=this.scene.sys.cache.shader;if(!i.has(e))return console.warn("Shader missing: "+e),this;this.shader=i.get(e)}else this.shader=e;var a=this.gl,n=this.renderer;this.program&&a.deleteProgram(this.program);var h=n.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);n.setMatrix4(h,"uViewMatrix",!1,this.viewMatrix),n.setMatrix4(h,"uProjectionMatrix",!1,this.projectionMatrix),n.setFloat2(h,"uResolution",this.width,this.height),this.program=h;var u=new Date,o={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[u.getFullYear(),u.getMonth(),u.getDate(),60*u.getHours()*60+60*u.getMinutes()+u.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=s(!0,{},this.shader.uniforms,o):this.uniforms=o;for(var l=0;l<4;l++)t[l]&&this.setSampler2D("iChannel"+l,t[l],l,r);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(e){return this.pointer=e,this},projOrtho:function(e,t,r,i){var s=1/(e-t),a=1/(r-i),n=this.projectionMatrix;n[0]=-2*s,n[5]=-2*a,n[10]=-.001,n[12]=(e+t)*s,n[13]=(i+r)*a,n[14]=-0;var h=this.program;this.renderer.setMatrix4(h,"uProjectionMatrix",!1,this.projectionMatrix),this._rendererWidth=t,this._rendererHeight=r},initUniforms:function(){var e=this.gl,t=this.renderer.glFuncMap,r=this.program;for(var i in this._textureCount=0,this.uniforms){var s=this.uniforms[i],a=s.type,n=t[a];s.uniformLocation=e.getUniformLocation(r,i),"sampler2D"!==a&&(s.glMatrix=n.matrix,s.glValueLength=n.length,s.glFunc=n.func)}},setSampler2DBuffer:function(e,t,r,i,s,a){void 0===s&&(s=0),void 0===a&&(a={});var n=this.uniforms[e];return n.value=t,a.width=r,a.height=i,n.textureData=a,this._textureCount=s,this.initSampler2D(n),this},setSampler2D:function(e,t,r,i){void 0===r&&(r=0);var s=this.scene.sys.textures;if(s.exists(t)){var a=s.getFrame(t),n=this.uniforms[e],h=a.source;n.textureKey=t,n.source=h.image,n.value=a.glTexture,h.isGLTexture&&(i||(i={}),i.width=h.width,i.height=h.height),i&&(n.textureData=i),this._textureCount=r,this.initSampler2D(n)}return this},setUniform:function(e,t){return a(this.uniforms,e,t),this},getUniform:function(e){return i(this.uniforms,e,null)},setChannel0:function(e,t){return this.setSampler2D("iChannel0",e,0,t)},setChannel1:function(e,t){return this.setSampler2D("iChannel1",e,1,t)},setChannel2:function(e,t){return this.setSampler2D("iChannel2",e,2,t)},setChannel3:function(e,t){return this.setSampler2D("iChannel3",e,3,t)},initSampler2D:function(e){if(e.value){var t=this.gl;t.activeTexture(t.TEXTURE0+this._textureCount),t.bindTexture(t.TEXTURE_2D,e.value);var r=e.textureData;if(r){var s=t[i(r,"magFilter","linear").toUpperCase()],a=t[i(r,"minFilter","linear").toUpperCase()],n=t[i(r,"wrapS","repeat").toUpperCase()],h=t[i(r,"wrapT","repeat").toUpperCase()],u=t[i(r,"format","rgba").toUpperCase()];if(r.repeat&&(n=t.REPEAT,h=t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!!r.flipY),r.width){var o=i(r,"width",512),l=i(r,"height",2),f=i(r,"border",0);t.texImage2D(t.TEXTURE_2D,0,u,o,l,f,u,t.UNSIGNED_BYTE,null)}else t.texImage2D(t.TEXTURE_2D,0,u,t.RGBA,t.UNSIGNED_BYTE,e.source);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,h)}this.renderer.setProgram(this.program),t.uniform1i(e.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var e,t,r,i,s,a=this.gl,n=this.uniforms,h=0;for(var u in n)r=(e=n[u]).glFunc,t=e.glValueLength,i=e.uniformLocation,null!==(s=e.value)&&(1===t?e.glMatrix?r.call(a,i,e.transpose,s):r.call(a,i,s):2===t?r.call(a,i,s.x,s.y):3===t?r.call(a,i,s.x,s.y,s.z):4===t?r.call(a,i,s.x,s.y,s.z,s.w):"sampler2D"===e.type&&(a.activeTexture(a["TEXTURE"+h]),a.bindTexture(a.TEXTURE_2D,s),a.uniform1i(i,h),h++))},load:function(e){var t=this.gl,r=this.width,i=this.height,s=this.renderer,a=this.program,n=this.viewMatrix;if(!this.renderToTexture){var h=-this._displayOriginX,u=-this._displayOriginY;n[0]=e[0],n[1]=e[1],n[4]=e[2],n[5]=e[3],n[8]=e[4],n[9]=e[5],n[12]=n[0]*h+n[4]*u,n[13]=n[1]*h+n[5]*u}t.useProgram(a),t.uniformMatrix4fv(t.getUniformLocation(a,"uViewMatrix"),!1,n),t.uniform2f(t.getUniformLocation(a,"uResolution"),this.width,this.height);var o=this.uniforms,l=o.resolution;l.value.x=r,l.value.y=i,o.time.value=s.game.loop.getDuration();var f=this.pointer;if(f){var d=o.mouse,m=f.x/r,x=1-f.y/i;d.value.x=m.toFixed(2),d.value.y=x.toFixed(2)}this.syncUniforms()},flush:function(){var e=this.width,t=this.height,r=this.program,i=this.gl,s=this.vertexBuffer,a=this.renderer,n=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(a.setFramebuffer(this.framebuffer),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT)),i.bindBuffer(i.ARRAY_BUFFER,s);var h=i.getAttribLocation(r,"inPosition");-1!==h&&(i.enableVertexAttribArray(h),i.vertexAttribPointer(h,2,i.FLOAT,!1,n,0));var u=this.vertexViewF32;u[3]=t,u[4]=e,u[5]=t,u[8]=e,u[9]=t,u[10]=e;i.bufferSubData(i.ARRAY_BUFFER,0,this.bytes.subarray(0,6*n)),i.drawArrays(i.TRIANGLES,0,6),this.renderToTexture&&a.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var e=this.gl;e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});module.exports=u;
},{"../../utils/Class":"Q4x4","../components":"PnJA","../GameObject":"YzbT","../../utils/object/GetFastValue":"xbYy","../../utils/object/Extend":"CtVZ","../../utils/object/SetValue":"z5Uu","./ShaderRender":"xIN8","../components/TransformMatrix":"hzKR"}],"bYNt":[function(require,module,exports) {
var e=require("./Mesh"),r=require("../GameObjectFactory");r.register("mesh",function(r,i,s,t,a,n,c,h){return this.displayList.add(new e(this.scene,r,i,s,t,a,n,c,h))});
},{"./Mesh":"NiQi","../GameObjectFactory":"BKGz"}],"R3Eg":[function(require,module,exports) {
var e=require("./Quad"),r=require("../GameObjectFactory");r.register("quad",function(r,i,t,a){return this.displayList.add(new e(this.scene,r,i,t,a))});
},{"./Quad":"o6Lb","../GameObjectFactory":"BKGz"}],"ultT":[function(require,module,exports) {
var e=require("./Shader"),r=require("../GameObjectFactory");r.register("shader",function(r,i,t,a,s,d,n){return this.displayList.add(new e(this.scene,r,i,t,a,s,d,n))});
},{"./Shader":"c12A","../GameObjectFactory":"BKGz"}],"azpu":[function(require,module,exports) {
var e=require("../BuildGameObject"),r=require("../GameObjectCreator"),i=require("../../utils/object/GetAdvancedValue"),t=require("../../utils/object/GetValue"),u=require("./Mesh");r.register("mesh",function(r,a){void 0===r&&(r={});var s=i(r,"key",null),l=i(r,"frame",null),c=t(r,"vertices",[]),n=t(r,"colors",[]),o=t(r,"alphas",[]),d=t(r,"uv",[]),v=new u(this.scene,0,0,c,d,n,o,s,l);return void 0!==a&&(r.add=a),e(this.scene,v,r),v});
},{"../BuildGameObject":"irpS","../GameObjectCreator":"eYSd","../../utils/object/GetAdvancedValue":"YJ2h","../../utils/object/GetValue":"FWyS","./Mesh":"NiQi"}],"eHnK":[function(require,module,exports) {
var e=require("../BuildGameObject"),r=require("../GameObjectCreator"),u=require("../../utils/object/GetAdvancedValue"),i=require("./Quad");r.register("quad",function(r,a){void 0===r&&(r={});var t=u(r,"x",0),d=u(r,"y",0),n=u(r,"key",null),c=u(r,"frame",null),l=new i(this.scene,t,d,n,c);return void 0!==a&&(r.add=a),e(this.scene,l,r),l});
},{"../BuildGameObject":"irpS","../GameObjectCreator":"eYSd","../../utils/object/GetAdvancedValue":"YJ2h","./Quad":"o6Lb"}],"Ixgm":[function(require,module,exports) {
var e=require("../BuildGameObject"),r=require("../GameObjectCreator"),i=require("../../utils/object/GetAdvancedValue"),t=require("./Shader");r.register("shader",function(r,a){void 0===r&&(r={});var d=i(r,"key",null),u=i(r,"x",0),n=i(r,"y",0),c=i(r,"width",128),h=i(r,"height",128),s=new t(this.scene,d,u,n,c,h);return void 0!==a&&(r.add=a),e(this.scene,s,r),s});
},{"../BuildGameObject":"irpS","../GameObjectCreator":"eYSd","../../utils/object/GetAdvancedValue":"YJ2h","./Shader":"c12A"}],"wCMN":[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("../../renderer/webgl/Utils"),s=new t({initialize:function(t,i,s,r,h,n,o){this.x=t,this.y=i,this.radius=s,this.r=r,this.g=h,this.b=n,this.intensity=o,this.scrollFactorX=1,this.scrollFactorY=1},set:function(t,i,s,r,h,n,o){return this.x=t,this.y=i,this.radius=s,this.r=r,this.g=h,this.b=n,this.intensity=o,this.scrollFactorX=1,this.scrollFactorY=1,this},setScrollFactor:function(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.scrollFactorX=t,this.scrollFactorY=i,this},setColor:function(t){var s=i.getFloatsFromUintRGB(t);return this.r=s[0],this.g=s[1],this.b=s[2],this},setIntensity:function(t){return this.intensity=t,this},setPosition:function(t,i){return this.x=t,this.y=i,this},setRadius:function(t){return this.radius=t,this}});module.exports=s;
},{"../../utils/Class":"Q4x4","../../renderer/webgl/Utils":"mjFh"}],"wUuW":[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("./Light"),h=require("../../renderer/webgl/Utils"),s=new t({initialize:function(){this.lightPool=[],this.lights=[],this.culledLights=[],this.ambientColor={r:.1,g:.1,b:.1},this.active=!1,this.maxLights=-1},enable:function(){return-1===this.maxLights&&(this.maxLights=this.scene.sys.game.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},cull:function(t){var i=this.lights,h=this.culledLights,s=i.length,e=t.x+t.width/2,o=t.y+t.height/2,r=(t.width+t.height)/2,l={x:0,y:0},n=t.matrix,g=this.systems.game.config.height;h.length=0;for(var u=0;u<s&&h.length<this.maxLights;u++){var a=i[u];n.transformPoint(a.x,a.y,l);var c=e-(l.x-t.scrollX*a.scrollFactorX*t.zoom),m=o-(g-(l.y-t.scrollY*a.scrollFactorY*t.zoom));Math.sqrt(c*c+m*m)<a.radius+r&&h.push(i[u])}return h},forEachLight:function(t){if(t){for(var i=this.lights,h=i.length,s=0;s<h;++s)t(i[s]);return this}},setAmbientColor:function(t){var i=h.getFloatsFromUintRGB(t);return this.ambientColor.r=i[0],this.ambientColor.g=i[1],this.ambientColor.b=i[2],this},getMaxVisibleLights:function(){return 10},getLightCount:function(){return this.lights.length},addLight:function(t,s,e,o,r){var l,n=null;return t=void 0===t?0:t,s=void 0===s?0:s,o=void 0===o?16777215:o,e=void 0===e?100:e,r=void 0===r?1:r,l=h.getFloatsFromUintRGB(o),n=null,this.lightPool.length>0?(n=this.lightPool.pop()).set(t,s,e,l[0],l[1],l[2],r):n=new i(t,s,e,l[0],l[1],l[2],r),this.lights.push(n),n},removeLight:function(t){var i=this.lights.indexOf(t);return i>=0&&(this.lightPool.push(t),this.lights.splice(i,1)),this},shutdown:function(){for(;this.lights.length>0;)this.lightPool.push(this.lights.pop());this.ambientColor={r:.1,g:.1,b:.1},this.culledLights.length=0,this.lights.length=0},destroy:function(){this.shutdown()}});module.exports=s;
},{"../../utils/Class":"Q4x4","./Light":"wCMN","../../renderer/webgl/Utils":"mjFh"}],"YJla":[function(require,module,exports) {
var s=require("../../utils/Class"),t=require("./LightsManager"),e=require("../../plugins/PluginCache"),i=require("../../scene/events"),n=new s({Extends:t,initialize:function(s){this.scene=s,this.systems=s.sys,s.sys.settings.isBooted||s.sys.events.once(i.BOOT,this.boot,this),t.call(this)},boot:function(){var s=this.systems.events;s.on(i.SHUTDOWN,this.shutdown,this),s.on(i.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});e.register("LightsPlugin",n,"lights"),module.exports=n;
},{"../../utils/Class":"Q4x4","./LightsManager":"wUuW","../../plugins/PluginCache":"vXV4","../../scene/events":"Zlz3"}],"gIjX":[function(require,module,exports) {
var e={Events:require("./events"),DisplayList:require("./DisplayList"),GameObjectCreator:require("./GameObjectCreator"),GameObjectFactory:require("./GameObjectFactory"),UpdateList:require("./UpdateList"),Components:require("./components"),BuildGameObject:require("./BuildGameObject"),BuildGameObjectAnimation:require("./BuildGameObjectAnimation"),GameObject:require("./GameObject"),BitmapText:require("./bitmaptext/static/BitmapText"),Blitter:require("./blitter/Blitter"),Container:require("./container/Container"),DOMElement:require("./domelement/DOMElement"),DynamicBitmapText:require("./bitmaptext/dynamic/DynamicBitmapText"),Extern:require("./extern/Extern.js"),Graphics:require("./graphics/Graphics.js"),Group:require("./group/Group"),Image:require("./image/Image"),Particles:require("./particles"),PathFollower:require("./pathfollower/PathFollower"),RenderTexture:require("./rendertexture/RenderTexture"),RetroFont:require("./bitmaptext/RetroFont"),Rope:require("./rope/Rope"),Sprite:require("./sprite/Sprite"),Text:require("./text/static/Text"),TileSprite:require("./tilesprite/TileSprite"),Zone:require("./zone/Zone"),Video:require("./video/Video"),Shape:require("./shape/Shape"),Arc:require("./shape/arc/Arc"),Curve:require("./shape/curve/Curve"),Ellipse:require("./shape/ellipse/Ellipse"),Grid:require("./shape/grid/Grid"),IsoBox:require("./shape/isobox/IsoBox"),IsoTriangle:require("./shape/isotriangle/IsoTriangle"),Line:require("./shape/line/Line"),Polygon:require("./shape/polygon/Polygon"),Rectangle:require("./shape/rectangle/Rectangle"),Star:require("./shape/star/Star"),Triangle:require("./shape/triangle/Triangle"),Factories:{Blitter:require("./blitter/BlitterFactory"),Container:require("./container/ContainerFactory"),DOMElement:require("./domelement/DOMElementFactory"),DynamicBitmapText:require("./bitmaptext/dynamic/DynamicBitmapTextFactory"),Extern:require("./extern/ExternFactory"),Graphics:require("./graphics/GraphicsFactory"),Group:require("./group/GroupFactory"),Image:require("./image/ImageFactory"),Particles:require("./particles/ParticleManagerFactory"),PathFollower:require("./pathfollower/PathFollowerFactory"),RenderTexture:require("./rendertexture/RenderTextureFactory"),Rope:require("./rope/RopeFactory"),Sprite:require("./sprite/SpriteFactory"),StaticBitmapText:require("./bitmaptext/static/BitmapTextFactory"),Text:require("./text/static/TextFactory"),TileSprite:require("./tilesprite/TileSpriteFactory"),Zone:require("./zone/ZoneFactory"),Video:require("./video/VideoFactory"),Arc:require("./shape/arc/ArcFactory"),Curve:require("./shape/curve/CurveFactory"),Ellipse:require("./shape/ellipse/EllipseFactory"),Grid:require("./shape/grid/GridFactory"),IsoBox:require("./shape/isobox/IsoBoxFactory"),IsoTriangle:require("./shape/isotriangle/IsoTriangleFactory"),Line:require("./shape/line/LineFactory"),Polygon:require("./shape/polygon/PolygonFactory"),Rectangle:require("./shape/rectangle/RectangleFactory"),Star:require("./shape/star/StarFactory"),Triangle:require("./shape/triangle/TriangleFactory")},Creators:{Blitter:require("./blitter/BlitterCreator"),Container:require("./container/ContainerCreator"),DynamicBitmapText:require("./bitmaptext/dynamic/DynamicBitmapTextCreator"),Graphics:require("./graphics/GraphicsCreator"),Group:require("./group/GroupCreator"),Image:require("./image/ImageCreator"),Particles:require("./particles/ParticleManagerCreator"),RenderTexture:require("./rendertexture/RenderTextureCreator"),Rope:require("./rope/RopeCreator"),Sprite:require("./sprite/SpriteCreator"),StaticBitmapText:require("./bitmaptext/static/BitmapTextCreator"),Text:require("./text/static/TextCreator"),TileSprite:require("./tilesprite/TileSpriteCreator"),Zone:require("./zone/ZoneCreator"),Video:require("./video/VideoCreator")}};e.Mesh=require("./mesh/Mesh"),e.Quad=require("./quad/Quad"),e.Shader=require("./shader/Shader"),e.Factories.Mesh=require("./mesh/MeshFactory"),e.Factories.Quad=require("./quad/QuadFactory"),e.Factories.Shader=require("./shader/ShaderFactory"),e.Creators.Mesh=require("./mesh/MeshCreator"),e.Creators.Quad=require("./quad/QuadCreator"),e.Creators.Shader=require("./shader/ShaderCreator"),e.Light=require("./lights/Light"),require("./lights/LightsManager"),require("./lights/LightsPlugin"),module.exports=e;
},{"./events":"YK6V","./DisplayList":"V3Gn","./GameObjectCreator":"eYSd","./GameObjectFactory":"BKGz","./UpdateList":"eGlM","./components":"PnJA","./BuildGameObject":"irpS","./BuildGameObjectAnimation":"OsWu","./GameObject":"YzbT","./bitmaptext/static/BitmapText":"es4n","./blitter/Blitter":"zIsB","./container/Container":"Vfu9","./domelement/DOMElement":"GzAZ","./bitmaptext/dynamic/DynamicBitmapText":"Wb3Y","./extern/Extern.js":"fdwf","./graphics/Graphics.js":"LiUC","./group/Group":"b7vI","./image/Image":"WGAg","./particles":"t0vF","./pathfollower/PathFollower":"pMeK","./rendertexture/RenderTexture":"FDlA","./bitmaptext/RetroFont":"qmoK","./rope/Rope":"kFjg","./sprite/Sprite":"uRwE","./text/static/Text":"PRWY","./tilesprite/TileSprite":"SClv","./zone/Zone":"fuRQ","./video/Video":"YodL","./shape/Shape":"Vrk1","./shape/arc/Arc":"yBln","./shape/curve/Curve":"nutV","./shape/ellipse/Ellipse":"x48G","./shape/grid/Grid":"Z9SB","./shape/isobox/IsoBox":"JsDG","./shape/isotriangle/IsoTriangle":"Iob3","./shape/line/Line":"CTty","./shape/polygon/Polygon":"YADn","./shape/rectangle/Rectangle":"bIiR","./shape/star/Star":"P4KE","./shape/triangle/Triangle":"A0MO","./blitter/BlitterFactory":"K0i8","./container/ContainerFactory":"RgZn","./domelement/DOMElementFactory":"lbuS","./bitmaptext/dynamic/DynamicBitmapTextFactory":"lZH4","./extern/ExternFactory":"leOv","./graphics/GraphicsFactory":"eICK","./group/GroupFactory":"Pc6q","./image/ImageFactory":"yfEu","./particles/ParticleManagerFactory":"e8fc","./pathfollower/PathFollowerFactory":"QnHt","./rendertexture/RenderTextureFactory":"gbJi","./rope/RopeFactory":"JyWN","./sprite/SpriteFactory":"ui3a","./bitmaptext/static/BitmapTextFactory":"cjz7","./text/static/TextFactory":"Xq7w","./tilesprite/TileSpriteFactory":"a257","./zone/ZoneFactory":"VKGB","./video/VideoFactory":"kmNP","./shape/arc/ArcFactory":"nypW","./shape/curve/CurveFactory":"Wo8h","./shape/ellipse/EllipseFactory":"vVN7","./shape/grid/GridFactory":"AHLv","./shape/isobox/IsoBoxFactory":"qJtL","./shape/isotriangle/IsoTriangleFactory":"g6Up","./shape/line/LineFactory":"Ne5K","./shape/polygon/PolygonFactory":"lAdN","./shape/rectangle/RectangleFactory":"iSba","./shape/star/StarFactory":"t4n0","./shape/triangle/TriangleFactory":"gGoy","./blitter/BlitterCreator":"lJjt","./container/ContainerCreator":"Q3ez","./bitmaptext/dynamic/DynamicBitmapTextCreator":"qGtI","./graphics/GraphicsCreator":"XNAu","./group/GroupCreator":"id6n","./image/ImageCreator":"RXeg","./particles/ParticleManagerCreator":"cSaf","./rendertexture/RenderTextureCreator":"Lx7P","./rope/RopeCreator":"RJNB","./sprite/SpriteCreator":"D9Jj","./bitmaptext/static/BitmapTextCreator":"FBiP","./text/static/TextCreator":"Gxru","./tilesprite/TileSpriteCreator":"tyPP","./zone/ZoneCreator":"HpVu","./video/VideoCreator":"uXa7","./mesh/Mesh":"NiQi","./quad/Quad":"o6Lb","./shader/Shader":"c12A","./mesh/MeshFactory":"bYNt","./quad/QuadFactory":"R3Eg","./shader/ShaderFactory":"ultT","./mesh/MeshCreator":"azpu","./quad/QuadCreator":"eHnK","./shader/ShaderCreator":"Ixgm","./lights/Light":"wCMN","./lights/LightsManager":"wUuW","./lights/LightsPlugin":"YJla"}],"k5rm":[function(require,module,exports) {
var r=function(r){return r.radius>0?Math.PI*r.radius*r.radius:0};module.exports=r;
},{}],"YE9g":[function(require,module,exports) {
var r=require("./Circle"),e=function(e){return new r(e.x,e.y,e.radius)};module.exports=e;
},{"./Circle":"b8pw"}],"WBmh":[function(require,module,exports) {
var r=require("./Contains"),e=function(e,n){return r(e,n.x,n.y)};module.exports=e;
},{"./Contains":"YD4D"}],"SmUS":[function(require,module,exports) {
var t=require("./Contains"),o=function(o,r){return t(o,r.x,r.y)&&t(o,r.right,r.y)&&t(o,r.x,r.bottom)&&t(o,r.right,r.bottom)};module.exports=o;
},{"./Contains":"YD4D"}],"lYT4":[function(require,module,exports) {
var r=function(r,e){return e.setTo(r.x,r.y,r.radius)};module.exports=r;
},{}],"sPmy":[function(require,module,exports) {
var r=function(r,u){return r.x===u.x&&r.y===u.y&&r.radius===u.radius};module.exports=r;
},{}],"UWob":[function(require,module,exports) {
var e=require("../rectangle/Rectangle"),t=function(t,r){return void 0===r&&(r=new e),r.x=t.left,r.y=t.top,r.width=t.diameter,r.height=t.diameter,r};module.exports=t;
},{"../rectangle/Rectangle":"ACYM"}],"JVQZ":[function(require,module,exports) {
var r=function(r,e,n){return r.x+=e,r.y+=n,r};module.exports=r;
},{}],"u3pZ":[function(require,module,exports) {
var r=function(r,e){return r.x+=e.x,r.y+=e.y,r};module.exports=r;
},{}],"VmC4":[function(require,module,exports) {
var e=require("./Circle");e.Area=require("./Area"),e.Circumference=require("./Circumference"),e.CircumferencePoint=require("./CircumferencePoint"),e.Clone=require("./Clone"),e.Contains=require("./Contains"),e.ContainsPoint=require("./ContainsPoint"),e.ContainsRect=require("./ContainsRect"),e.CopyFrom=require("./CopyFrom"),e.Equals=require("./Equals"),e.GetBounds=require("./GetBounds"),e.GetPoint=require("./GetPoint"),e.GetPoints=require("./GetPoints"),e.Offset=require("./Offset"),e.OffsetPoint=require("./OffsetPoint"),e.Random=require("./Random"),module.exports=e;
},{"./Circle":"b8pw","./Area":"k5rm","./Circumference":"KrH4","./CircumferencePoint":"mMwO","./Clone":"YE9g","./Contains":"YD4D","./ContainsPoint":"WBmh","./ContainsRect":"SmUS","./CopyFrom":"lYT4","./Equals":"sPmy","./GetBounds":"UWob","./GetPoint":"Wz4J","./GetPoints":"Cv5E","./Offset":"JVQZ","./OffsetPoint":"u3pZ","./Random":"LFnE"}],"r3jE":[function(require,module,exports) {
var t=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI};module.exports=t;
},{}],"pt1l":[function(require,module,exports) {
var e=require("./Ellipse"),r=function(r){return new e(r.x,r.y,r.width,r.height)};module.exports=r;
},{"./Ellipse":"g0eY"}],"IqME":[function(require,module,exports) {
var r=require("./Contains"),e=function(e,n){return r(e,n.x,n.y)};module.exports=e;
},{"./Contains":"fwc7"}],"uF5C":[function(require,module,exports) {
var t=require("./Contains"),o=function(o,r){return t(o,r.x,r.y)&&t(o,r.right,r.y)&&t(o,r.x,r.bottom)&&t(o,r.right,r.bottom)};module.exports=o;
},{"./Contains":"fwc7"}],"Ta4L":[function(require,module,exports) {
var t=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)};module.exports=t;
},{}],"j4vz":[function(require,module,exports) {
var t=function(t,h){return t.x===h.x&&t.y===h.y&&t.width===h.width&&t.height===h.height};module.exports=t;
},{}],"cHZz":[function(require,module,exports) {
var e=require("../rectangle/Rectangle"),t=function(t,i){return void 0===i&&(i=new e),i.x=t.left,i.y=t.top,i.width=t.width,i.height=t.height,i};module.exports=t;
},{"../rectangle/Rectangle":"ACYM"}],"jIkz":[function(require,module,exports) {
var e=require("./Ellipse");e.Area=require("./Area"),e.Circumference=require("./Circumference"),e.CircumferencePoint=require("./CircumferencePoint"),e.Clone=require("./Clone"),e.Contains=require("./Contains"),e.ContainsPoint=require("./ContainsPoint"),e.ContainsRect=require("./ContainsRect"),e.CopyFrom=require("./CopyFrom"),e.Equals=require("./Equals"),e.GetBounds=require("./GetBounds"),e.GetPoint=require("./GetPoint"),e.GetPoints=require("./GetPoints"),e.Offset=require("./Offset"),e.OffsetPoint=require("./OffsetPoint"),e.Random=require("./Random"),module.exports=e;
},{"./Ellipse":"g0eY","./Area":"r3jE","./Circumference":"T4aX","./CircumferencePoint":"CnKU","./Clone":"pt1l","./Contains":"fwc7","./ContainsPoint":"IqME","./ContainsRect":"uF5C","./CopyFrom":"Ta4L","./Equals":"j4vz","./GetBounds":"cHZz","./GetPoint":"Oewv","./GetPoints":"Axl9","./Offset":"JVQZ","./OffsetPoint":"u3pZ","./Random":"DzNa"}],"VmG8":[function(require,module,exports) {
var e=require("../../math/distance/DistanceBetween"),r=function(r,t){return e(r.x,r.y,t.x,t.y)<=r.radius+t.radius};module.exports=r;
},{"../../math/distance/DistanceBetween":"akRU"}],"Atz3":[function(require,module,exports) {
var r=function(r,a){var i=a.width/2,t=a.height/2,u=Math.abs(r.x-a.x-i),s=Math.abs(r.y-a.y-t),d=i+r.radius,e=t+r.radius;if(u>d||s>e)return!1;if(u<=i||s<=t)return!0;var h=u-i,n=s-t;return h*h+n*n<=r.radius*r.radius};module.exports=r;
},{}],"fq3Q":[function(require,module,exports) {
var r=require("../point/Point"),e=require("./CircleToCircle"),s=function(s,t,u){if(void 0===u&&(u=[]),e(s,t)){var i,n,h,a,p=s.x,o=s.y,q=s.radius,w=t.x,d=t.y,l=t.radius;if(o===d)0===(h=(n=-2*d)*n-4*(i=1)*(w*w+(a=(l*l-q*q-w*w+p*p)/(2*(p-w)))*a-2*w*a+d*d-l*l))?u.push(new r(a,-n/(2*i))):h>0&&(u.push(new r(a,(-n+Math.sqrt(h))/(2*i))),u.push(new r(a,(-n-Math.sqrt(h))/(2*i))));else{var v=(p-w)/(o-d),M=(l*l-q*q-w*w+p*p-d*d+o*o)/(2*(o-d));0===(h=(n=2*o*v-2*M*v-2*p)*n-4*(i=v*v+1)*(p*p+o*o+M*M-q*q-2*o*M))?(a=-n/(2*i),u.push(new r(a,M-a*v))):h>0&&(a=(-n+Math.sqrt(h))/(2*i),u.push(new r(a,M-a*v)),a=(-n-Math.sqrt(h))/(2*i),u.push(new r(a,M-a*v)))}}return u};module.exports=s;
},{"../point/Point":"tZ6A","./CircleToCircle":"VmG8"}],"HrNR":[function(require,module,exports) {
var r=require("../circle/Contains"),x=require("../point/Point"),y=new x,e=function(x,e,i){if(void 0===i&&(i=y),r(e,x.x1,x.y1))return i.x=x.x1,i.y=x.y1,!0;if(r(e,x.x2,x.y2))return i.x=x.x2,i.y=x.y2,!0;var n=x.x2-x.x1,t=x.y2-x.y1,o=e.x-x.x1,u=e.y-x.y1,a=n*n+t*t,f=n,v=t;if(a>0){var c=(o*n+u*t)/a;f*=c,v*=c}return i.x=x.x1+f,i.y=x.y1+v,f*f+v*v<=a&&f*n+v*t>=0&&r(e,i.x,i.y)};module.exports=e;
},{"../circle/Contains":"YD4D","../point/Point":"tZ6A"}],"P2pg":[function(require,module,exports) {
var r=require("../point/Point"),e=require("./LineToCircle"),i=function(i,n,t){if(void 0===t&&(t=[]),e(i,n)){var u,a,s=i.x1,o=i.y1,v=i.x2,h=i.y2,p=n.x,f=n.y,q=n.radius,x=v-s,d=h-o,l=s-p,w=o-f,y=x*x+d*d,c=2*(x*l+d*w),M=c*c-4*y*(l*l+w*w-q*q);if(0===M){var m=-c/(2*y);u=s+m*x,a=o+m*d,m>=0&&m<=1&&t.push(new r(u,a))}else if(M>0){var C=(-c-Math.sqrt(M))/(2*y);u=s+C*x,a=o+C*d,C>=0&&C<=1&&t.push(new r(u,a));var L=(-c+Math.sqrt(M))/(2*y);u=s+L*x,a=o+L*d,L>=0&&L<=1&&t.push(new r(u,a))}}return t};module.exports=i;
},{"../point/Point":"tZ6A","./LineToCircle":"HrNR"}],"NRAt":[function(require,module,exports) {
var e=require("./GetLineToCircle"),i=require("./CircleToRectangle"),r=function(r,n,t){if(void 0===t&&(t=[]),i(r,n)){var o=n.getLineA(),g=n.getLineB(),u=n.getLineC(),L=n.getLineD();e(o,r,t),e(g,r,t),e(u,r,t),e(L,r,t)}return t};module.exports=r;
},{"./GetLineToCircle":"P2pg","./CircleToRectangle":"Atz3"}],"fwRG":[function(require,module,exports) {
var r=require("../point/Point"),e=function(e,n,i){void 0===i&&(i=new r);var o=e.x1,t=e.y1,x=e.x2,u=e.y2,y=n.x1,v=n.y1,a=n.x2,d=n.y2,f=(d-v)*(x-o)-(a-y)*(u-t);if(0===f)return!1;var p=((a-y)*(t-v)-(d-v)*(o-y))/f,c=((x-o)*(t-v)-(u-t)*(o-y))/f;return p>=0&&p<=1&&c>=0&&c<=1&&(i.x=o+p*(x-o),i.y=t+p*(u-t),!0)};module.exports=e;
},{"../point/Point":"tZ6A"}],"iBdL":[function(require,module,exports) {
var r=function(r,e){var t=r.x1,i=r.y1,f=r.x2,n=r.y2,u=e.x,o=e.y,x=e.right,l=e.bottom,s=0;if(t>=u&&t<=x&&i>=o&&i<=l||f>=u&&f<=x&&n>=o&&n<=l)return!0;if(t<u&&f>=u){if((s=i+(n-i)*(u-t)/(f-t))>o&&s<=l)return!0}else if(t>x&&f<=x&&(s=i+(n-i)*(x-t)/(f-t))>=o&&s<=l)return!0;if(i<o&&n>=o){if((s=t+(f-t)*(o-i)/(n-i))>=u&&s<=x)return!0}else if(i>l&&n<=l&&(s=t+(f-t)*(l-i)/(n-i))>=u&&s<=x)return!0;return!1};module.exports=r;
},{}],"TbRD":[function(require,module,exports) {
var e=require("../point/Point"),n=require("./LineToLine"),i=require("./LineToRectangle"),r=function(r,t,o){if(void 0===o&&(o=[]),i(r,t))for(var u=t.getLineA(),L=t.getLineB(),g=t.getLineC(),w=t.getLineD(),a=[new e,new e,new e,new e],f=[n(u,r,a[0]),n(L,r,a[1]),n(g,r,a[2]),n(w,r,a[3])],p=0;p<4;p++)f[p]&&o.push(a[p]);return o};module.exports=r;
},{"../point/Point":"tZ6A","./LineToLine":"fwRG","./LineToRectangle":"iBdL"}],"d521":[function(require,module,exports) {
var t=function(t,h){return!(t.width<=0||t.height<=0||h.width<=0||h.height<=0)&&!(t.right<h.x||t.bottom<h.y||t.x>h.right||t.y>h.bottom)};module.exports=t;
},{}],"JwSY":[function(require,module,exports) {
var t=require("../rectangle/Rectangle"),e=require("./RectangleToRectangle"),a=function(a,r,i){return void 0===i&&(i=new t),e(a,r)&&(i.x=Math.max(a.x,r.x),i.y=Math.max(a.y,r.y),i.width=Math.min(a.right,r.right)-i.x,i.height=Math.min(a.bottom,r.bottom)-i.y),i};module.exports=a;
},{"../rectangle/Rectangle":"ACYM","./RectangleToRectangle":"d521"}],"MqPZ":[function(require,module,exports) {
var e=require("./GetLineToRectangle"),n=require("./RectangleToRectangle"),t=function(t,i,r){if(void 0===r&&(r=[]),n(t,i)){var g=t.getLineA(),o=t.getLineB(),a=t.getLineC(),u=t.getLineD();e(g,i,r),e(o,i,r),e(a,i,r),e(u,i,r)}return r};module.exports=t;
},{"./GetLineToRectangle":"TbRD","./RectangleToRectangle":"d521"}],"U9Gq":[function(require,module,exports) {
var x=function(x,y,o,r){void 0===o&&(o=!1),void 0===r&&(r=[]);for(var e,n,t,u,v,d,i=x.x3-x.x1,a=x.y3-x.y1,f=x.x2-x.x1,h=x.y2-x.y1,l=i*i+a*a,p=i*f+a*h,s=f*f+h*h,c=l*s-p*p,g=0===c?0:1/c,m=x.x1,b=x.y1,j=0;j<y.length&&(n=(l*(d=f*(t=y[j].x-m)+h*(u=y[j].y-b))-p*(v=i*t+a*u))*g,!((e=(s*v-p*d)*g)>=0&&n>=0&&e+n<1&&(r.push({x:y[j].x,y:y[j].y}),o)));j++);return r};module.exports=x;
},{}],"Xlmh":[function(require,module,exports) {
var t=function(t,o){return void 0===o&&(o=[]),o.push({x:t.x,y:t.y}),o.push({x:t.right,y:t.y}),o.push({x:t.right,y:t.bottom}),o.push({x:t.x,y:t.bottom}),o};module.exports=t;
},{}],"lG3X":[function(require,module,exports) {
var e=require("./LineToLine"),r=require("../rectangle/Contains"),t=require("../triangle/ContainsArray"),n=require("../rectangle/Decompose"),i=function(i,o){if(o.left>i.right||o.right<i.left||o.top>i.bottom||o.bottom<i.top)return!1;var u=o.getLineA(),g=o.getLineB(),a=o.getLineC();if(r(i,u.x1,u.y1)||r(i,u.x2,u.y2))return!0;if(r(i,g.x1,g.y1)||r(i,g.x2,g.y2))return!0;if(r(i,a.x1,a.y1)||r(i,a.x2,a.y2))return!0;var f=i.getLineA(),L=i.getLineB(),l=i.getLineC(),x=i.getLineD();if(e(u,f)||e(u,L)||e(u,l)||e(u,x))return!0;if(e(g,f)||e(g,L)||e(g,l)||e(g,x))return!0;if(e(a,f)||e(a,L)||e(a,l)||e(a,x))return!0;var y=n(i);return t(o,y,!0).length>0};module.exports=i;
},{"./LineToLine":"fwRG","../rectangle/Contains":"VQyb","../triangle/ContainsArray":"U9Gq","../rectangle/Decompose":"Xlmh"}],"IMlE":[function(require,module,exports) {
var e=require("./RectangleToTriangle"),i=require("./GetLineToRectangle"),n=function(n,r,t){if(void 0===t&&(t=[]),e(n,r)){var g=r.getLineA(),o=r.getLineB(),a=r.getLineC();i(g,n,t),i(o,n,t),i(a,n,t)}return t};module.exports=n;
},{"./RectangleToTriangle":"lG3X","./GetLineToRectangle":"TbRD"}],"CqOg":[function(require,module,exports) {
var e=require("./LineToCircle"),t=require("../triangle/Contains"),i=function(i,r){return!(i.left>r.right||i.right<r.left||i.top>r.bottom||i.bottom<r.top)&&(!!t(i,r.x,r.y)||(!!e(i.getLineA(),r)||(!!e(i.getLineB(),r)||!!e(i.getLineC(),r))))};module.exports=i;
},{"./LineToCircle":"HrNR","../triangle/Contains":"wKKV"}],"uF5f":[function(require,module,exports) {
var e=require("./GetLineToCircle"),i=require("./TriangleToCircle"),r=function(r,n,t){if(void 0===t&&(t=[]),i(r,n)){var o=r.getLineA(),u=r.getLineB(),g=r.getLineC();e(o,n,t),e(u,n,t),e(g,n,t)}return t};module.exports=r;
},{"./GetLineToCircle":"P2pg","./TriangleToCircle":"CqOg"}],"N4Nl":[function(require,module,exports) {
var e=require("../triangle/Contains"),n=require("./LineToLine"),i=function(i,t){return!(!e(i,t.getPointA())&&!e(i,t.getPointB()))||(!!n(i.getLineA(),t)||(!!n(i.getLineB(),t)||!!n(i.getLineC(),t)))};module.exports=i;
},{"../triangle/Contains":"wKKV","./LineToLine":"fwRG"}],"l3yQ":[function(require,module,exports) {
var e=require("../point/Point"),i=require("./TriangleToLine"),n=require("./LineToLine"),r=function(r,o,t){if(void 0===t&&(t=[]),i(r,o))for(var u=r.getLineA(),L=r.getLineB(),g=r.getLineC(),a=[new e,new e,new e],f=[n(u,o,a[0]),n(L,o,a[1]),n(g,o,a[2])],p=0;p<3;p++)f[p]&&t.push(a[p]);return t};module.exports=r;
},{"../point/Point":"tZ6A","./TriangleToLine":"N4Nl","./LineToLine":"fwRG"}],"QeZR":[function(require,module,exports) {
var x=function(x,u){return void 0===u&&(u=[]),u.push({x:x.x1,y:x.y1}),u.push({x:x.x2,y:x.y2}),u.push({x:x.x3,y:x.y3}),u};module.exports=x;
},{}],"xiic":[function(require,module,exports) {
var e=require("../triangle/ContainsArray"),t=require("../triangle/Decompose"),r=require("./LineToLine"),i=function(i,n){if(i.left>n.right||i.right<n.left||i.top>n.bottom||i.bottom<n.top)return!1;var o=i.getLineA(),g=i.getLineB(),u=i.getLineC(),L=n.getLineA(),a=n.getLineB(),f=n.getLineC();if(r(o,L)||r(o,a)||r(o,f))return!0;if(r(g,L)||r(g,a)||r(g,f))return!0;if(r(u,L)||r(u,a)||r(u,f))return!0;var l=t(i),h=e(n,l,!0);return h.length>0||(l=t(n),(h=e(i,l,!0)).length>0)};module.exports=i;
},{"../triangle/ContainsArray":"U9Gq","../triangle/Decompose":"QeZR","./LineToLine":"fwRG"}],"K01G":[function(require,module,exports) {
var e=require("./TriangleToTriangle"),i=require("./GetTriangleToLine"),r=function(r,n,t){if(void 0===t&&(t=[]),e(r,n)){var g=n.getLineA(),o=n.getLineB(),a=n.getLineC();i(r,g,t),i(r,o,t),i(r,a,t)}return t};module.exports=r;
},{"./TriangleToTriangle":"xiic","./GetTriangleToLine":"l3yQ"}],"XVzk":[function(require,module,exports) {
var r=function(r,t,a){void 0===a&&(a=1);var e=t.x1,n=t.y1,u=t.x2,i=t.y2,s=r.x,v=r.y,f=(u-e)*(u-e)+(i-n)*(i-n);if(0===f)return!1;var h=((s-e)*(u-e)+(v-n)*(i-n))/f;if(h<0)return Math.sqrt((e-s)*(e-s)+(n-v)*(n-v))<=a;if(h>=0&&h<=1){var o=((n-v)*(u-e)-(e-s)*(i-n))/f;return Math.abs(o)*Math.sqrt(f)<=a}return Math.sqrt((u-s)*(u-s)+(i-v)*(i-v))<=a};module.exports=r;
},{}],"o2Re":[function(require,module,exports) {
var r=require("./PointToLine"),t=function(t,x){if(!r(t,x))return!1;var a=Math.min(x.x1,x.x2),n=Math.max(x.x1,x.x2),e=Math.min(x.y1,x.y2),i=Math.max(x.y1,x.y2);return t.x>=a&&t.x<=n&&t.y>=e&&t.y<=i};module.exports=t;
},{"./PointToLine":"XVzk"}],"rPBD":[function(require,module,exports) {
var t=function(t,o,r,e,i,n){return void 0===n&&(n=0),!(o>t.right+n||r<t.left-n||e>t.bottom+n||i<t.top-n)};module.exports=t;
},{}],"ubjC":[function(require,module,exports) {
module.exports={CircleToCircle:require("./CircleToCircle"),CircleToRectangle:require("./CircleToRectangle"),GetCircleToCircle:require("./GetCircleToCircle"),GetCircleToRectangle:require("./GetCircleToRectangle"),GetLineToCircle:require("./GetLineToCircle"),GetLineToRectangle:require("./GetLineToRectangle"),GetRectangleIntersection:require("./GetRectangleIntersection"),GetRectangleToRectangle:require("./GetRectangleToRectangle"),GetRectangleToTriangle:require("./GetRectangleToTriangle"),GetTriangleToCircle:require("./GetTriangleToCircle"),GetTriangleToLine:require("./GetTriangleToLine"),GetTriangleToTriangle:require("./GetTriangleToTriangle"),LineToCircle:require("./LineToCircle"),LineToLine:require("./LineToLine"),LineToRectangle:require("./LineToRectangle"),PointToLine:require("./PointToLine"),PointToLineSegment:require("./PointToLineSegment"),RectangleToRectangle:require("./RectangleToRectangle"),RectangleToTriangle:require("./RectangleToTriangle"),RectangleToValues:require("./RectangleToValues"),TriangleToCircle:require("./TriangleToCircle"),TriangleToLine:require("./TriangleToLine"),TriangleToTriangle:require("./TriangleToTriangle")};
},{"./CircleToCircle":"VmG8","./CircleToRectangle":"Atz3","./GetCircleToCircle":"fq3Q","./GetCircleToRectangle":"NRAt","./GetLineToCircle":"P2pg","./GetLineToRectangle":"TbRD","./GetRectangleIntersection":"JwSY","./GetRectangleToRectangle":"MqPZ","./GetRectangleToTriangle":"IMlE","./GetTriangleToCircle":"uF5f","./GetTriangleToLine":"l3yQ","./GetTriangleToTriangle":"K01G","./LineToCircle":"HrNR","./LineToLine":"fwRG","./LineToRectangle":"iBdL","./PointToLine":"XVzk","./PointToLineSegment":"o2Re","./RectangleToRectangle":"d521","./RectangleToTriangle":"lG3X","./RectangleToValues":"rPBD","./TriangleToCircle":"CqOg","./TriangleToLine":"N4Nl","./TriangleToTriangle":"xiic"}],"xeG4":[function(require,module,exports) {
var t=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)};module.exports=t;
},{}],"PiuK":[function(require,module,exports) {
var r=function(r,x,y){var e=x-(r.x1+r.x2)/2,n=y-(r.y1+r.y2)/2;return r.x1+=e,r.y1+=n,r.x2+=e,r.y2+=n,r};module.exports=r;
},{}],"JiUe":[function(require,module,exports) {
var e=require("./Line"),r=function(r){return new e(r.x1,r.y1,r.x2,r.y2)};module.exports=r;
},{"./Line":"JM91"}],"rF6c":[function(require,module,exports) {
var e=function(e,o){return o.setTo(e.x1,e.y1,e.x2,e.y2)};module.exports=e;
},{}],"DVQ8":[function(require,module,exports) {
var x=function(x,r){return x.x1===r.x1&&x.y1===r.y1&&x.x2===r.x2&&x.y2===r.y2};module.exports=x;
},{}],"unDE":[function(require,module,exports) {
var r=require("./Length"),x=function(x,e,y){void 0===y&&(y=e);var n=r(x),o=x.x2-x.x1,t=x.y2-x.y1;return e&&(x.x1=x.x1-o/n*e,x.y1=x.y1-t/n*e),y&&(x.x2=x.x2+o/n*y,x.y2=x.y2+t/n*y),x};module.exports=x;
},{"./Length":"fUqJ"}],"bKgU":[function(require,module,exports) {
var e=require("../../math/distance/DistanceBetweenPoints"),r=require("../../tweens/builders/GetEaseFunction"),n=require("../point/Point"),t=function(t,i,u,o,s){void 0===o&&(o=0),void 0===s&&(s=[]);var a,p,h=[],v=t.x1,d=t.y1,c=t.x2-v,f=t.y2-d,l=r(i,s),w=u-1;for(a=0;a<w;a++)p=l(a/w),h.push(new n(v+c*p,d+f*p));if(p=l(1),h.push(new n(v+c*p,d+f*p)),o>0){var q=h[0],x=[q];for(a=1;a<h.length-1;a++){var g=h[a];e(q,g)>=o&&(x.push(g),q=g)}var m=h[h.length-1];return e(q,m)<o&&x.pop(),x.push(m),x}return h};module.exports=t;
},{"../../math/distance/DistanceBetweenPoints":"myKq","../../tweens/builders/GetEaseFunction":"VFtU","../point/Point":"tZ6A"}],"CyYv":[function(require,module,exports) {
var e=require("../point/Point"),n=function(n,o){return void 0===o&&(o=new e),o.x=(n.x1+n.x2)/2,o.y=(n.y1+n.y2)/2,o};module.exports=n;
},{"../point/Point":"tZ6A"}],"WBZW":[function(require,module,exports) {
var r=require("../point/Point"),e=function(e,n,i){void 0===i&&(i=new r);var o=e.x1,t=e.y1,u=e.x2,x=e.y2,v=(u-o)*(u-o)+(x-t)*(x-t);if(0===v)return i;var y=((n.x-o)*(u-o)+(n.y-t)*(x-t))/v;return i.x=o+y*(u-o),i.y=t+y*(x-t),i};module.exports=e;
},{"../point/Point":"tZ6A"}],"XWNz":[function(require,module,exports) {
var e=require("../../math/const"),r=require("./Angle"),n=require("../point/Point"),t=function(t,i){void 0===i&&(i=new n);var o=r(t)-e.TAU;return i.x=Math.cos(o),i.y=Math.sin(o),i};module.exports=t;
},{"../../math/const":"TJqb","./Angle":"xeG4","../point/Point":"tZ6A"}],"t9uc":[function(require,module,exports) {
var r=function(r,t){var a=r.x1,e=r.y1,n=r.x2,u=r.y2,x=(n-a)*(n-a)+(u-e)*(u-e);if(0===x)return!1;var o=((e-t.y)*(n-a)-(a-t.x)*(u-e))/x;return Math.abs(o)*Math.sqrt(x)};module.exports=r;
},{}],"Wvc6":[function(require,module,exports) {
var r=function(r){return Math.abs(r.y1-r.y2)};module.exports=r;
},{}],"tqS7":[function(require,module,exports) {
var r=require("../../math/const"),e=require("../../math/Wrap"),t=require("./Angle"),a=function(a){var u=t(a)-r.TAU;return e(u,-Math.PI,Math.PI)};module.exports=a;
},{"../../math/const":"TJqb","../../math/Wrap":"gwbj","./Angle":"xeG4"}],"LGEs":[function(require,module,exports) {
var e=require("../../math/const"),r=require("./Angle"),t=function(t){return Math.cos(r(t)-e.TAU)};module.exports=t;
},{"../../math/const":"TJqb","./Angle":"xeG4"}],"Ligh":[function(require,module,exports) {
var e=require("../../math/const"),r=require("./Angle"),n=function(n){return Math.sin(r(n)-e.TAU)};module.exports=n;
},{"../../math/const":"TJqb","./Angle":"xeG4"}],"Fama":[function(require,module,exports) {
var r=function(r,e,n){return r.x1+=e,r.y1+=n,r.x2+=e,r.y2+=n,r};module.exports=r;
},{}],"C8Fz":[function(require,module,exports) {
var r=function(r){return-(r.x2-r.x1)/(r.y2-r.y1)};module.exports=r;
},{}],"AFw8":[function(require,module,exports) {
var e=require("./Angle"),r=require("./NormalAngle"),n=function(n,u){return 2*r(u)-Math.PI-e(n)};module.exports=n;
},{"./Angle":"xeG4","./NormalAngle":"tqS7"}],"FODz":[function(require,module,exports) {
var r=function(r,t,x,a){var n=Math.cos(a),o=Math.sin(a),y=r.x1-t,e=r.y1-x;return r.x1=y*n-e*o+t,r.y1=y*o+e*n+x,y=r.x2-t,e=r.y2-x,r.x2=y*n-e*o+t,r.y2=y*o+e*n+x,r};module.exports=r;
},{}],"Vhes":[function(require,module,exports) {
var r=require("./RotateAroundXY"),e=function(e,o){var t=(e.x1+e.x2)/2,u=(e.y1+e.y2)/2;return r(e,t,u,o)};module.exports=e;
},{"./RotateAroundXY":"FODz"}],"OLLR":[function(require,module,exports) {
var r=require("./RotateAroundXY"),e=function(e,o,t){return r(e,o.x,o.y,t)};module.exports=e;
},{"./RotateAroundXY":"FODz"}],"ZQaR":[function(require,module,exports) {
var t=function(t,n,o,r,a){return t.x1=n,t.y1=o,t.x2=n+Math.cos(r)*a,t.y2=o+Math.sin(r)*a,t};module.exports=t;
},{}],"sRun":[function(require,module,exports) {
var r=function(r){return(r.y2-r.y1)/(r.x2-r.x1)};module.exports=r;
},{}],"nAZX":[function(require,module,exports) {
var r=function(r){return Math.abs(r.x1-r.x2)};module.exports=r;
},{}],"fke6":[function(require,module,exports) {
var e=require("./Line");e.Angle=require("./Angle"),e.BresenhamPoints=require("./BresenhamPoints"),e.CenterOn=require("./CenterOn"),e.Clone=require("./Clone"),e.CopyFrom=require("./CopyFrom"),e.Equals=require("./Equals"),e.Extend=require("./Extend"),e.GetEasedPoints=require("./GetEasedPoints"),e.GetMidPoint=require("./GetMidPoint"),e.GetNearestPoint=require("./GetNearestPoint"),e.GetNormal=require("./GetNormal"),e.GetPoint=require("./GetPoint"),e.GetPoints=require("./GetPoints"),e.GetShortestDistance=require("./GetShortestDistance"),e.Height=require("./Height"),e.Length=require("./Length"),e.NormalAngle=require("./NormalAngle"),e.NormalX=require("./NormalX"),e.NormalY=require("./NormalY"),e.Offset=require("./Offset"),e.PerpSlope=require("./PerpSlope"),e.Random=require("./Random"),e.ReflectAngle=require("./ReflectAngle"),e.Rotate=require("./Rotate"),e.RotateAroundPoint=require("./RotateAroundPoint"),e.RotateAroundXY=require("./RotateAroundXY"),e.SetToAngle=require("./SetToAngle"),e.Slope=require("./Slope"),e.Width=require("./Width"),module.exports=e;
},{"./Line":"JM91","./Angle":"xeG4","./BresenhamPoints":"EnRu","./CenterOn":"PiuK","./Clone":"JiUe","./CopyFrom":"rF6c","./Equals":"DVQ8","./Extend":"unDE","./GetEasedPoints":"bKgU","./GetMidPoint":"CyYv","./GetNearestPoint":"WBZW","./GetNormal":"XWNz","./GetPoint":"Axhg","./GetPoints":"xXoa","./GetShortestDistance":"t9uc","./Height":"Wvc6","./Length":"fUqJ","./NormalAngle":"tqS7","./NormalX":"LGEs","./NormalY":"Ligh","./Offset":"Fama","./PerpSlope":"C8Fz","./Random":"pD6t","./ReflectAngle":"AFw8","./Rotate":"Vhes","./RotateAroundPoint":"OLLR","./RotateAroundXY":"FODz","./SetToAngle":"ZQaR","./Slope":"sRun","./Width":"nAZX"}],"rSGC":[function(require,module,exports) {
var e=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};module.exports=e;
},{}],"dcMW":[function(require,module,exports) {
var e=require("./Point"),r=function(r){return new e(r.x,r.y)};module.exports=r;
},{"./Point":"tZ6A"}],"oVXE":[function(require,module,exports) {
var e=function(e,o){return o.setTo(e.x,e.y)};module.exports=e;
},{}],"J1ze":[function(require,module,exports) {
var r=function(r,e){return r.x===e.x&&r.y===e.y};module.exports=r;
},{}],"KG5s":[function(require,module,exports) {
var o=function(o){return o.setTo(Math.floor(o.x),Math.floor(o.y))};module.exports=o;
},{}],"auKA":[function(require,module,exports) {
var r=require("./Point"),e=function(e,t){if(void 0===t&&(t=new r),!Array.isArray(e))throw new Error("GetCentroid points argument must be an array");var n=e.length;if(n<1)throw new Error("GetCentroid points array must not be empty");if(1===n)t.x=e[0].x,t.y=e[0].y;else{for(var o=0;o<n;o++)t.x+=e[o].x,t.y+=e[o].y;t.x/=n,t.y/=n}return t};module.exports=e;
},{"./Point":"tZ6A"}],"stA6":[function(require,module,exports) {
var r=function(r){return Math.sqrt(r.x*r.x+r.y*r.y)};module.exports=r;
},{}],"KGOb":[function(require,module,exports) {
var r=function(r){return r.x*r.x+r.y*r.y};module.exports=r;
},{}],"FOhZ":[function(require,module,exports) {
var I=require("../rectangle/Rectangle"),e=function(e,r){void 0===r&&(r=new I);for(var N=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,T=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var x=e[n];x.x>N&&(N=x.x),x.x<t&&(t=x.x),x.y>u&&(u=x.y),x.y<T&&(T=x.y)}return r.x=t,r.y=T,r.width=N-t,r.height=u-T,r};module.exports=e;
},{"../rectangle/Rectangle":"ACYM"}],"td0A":[function(require,module,exports) {
var e=require("./Point"),o=function(o,r,i,n){return void 0===i&&(i=0),void 0===n&&(n=new e),n.x=o.x+(r.x-o.x)*i,n.y=o.y+(r.y-o.y)*i,n};module.exports=o;
},{"./Point":"tZ6A"}],"utx6":[function(require,module,exports) {
var e=function(e){return e.setTo(e.y,e.x)};module.exports=e;
},{}],"ad2s":[function(require,module,exports) {
var e=require("./Point"),o=function(o,r){return void 0===r&&(r=new e),r.setTo(-o.x,-o.y)};module.exports=o;
},{"./Point":"tZ6A"}],"vdO8":[function(require,module,exports) {
var e=require("./Point"),r=require("./GetMagnitudeSq"),i=function(i,n,t){void 0===t&&(t=new e);var u=(i.x*n.x+i.y*n.y)/r(n);return 0!==u&&(t.x=u*n.x,t.y=u*n.y),t};module.exports=i;
},{"./Point":"tZ6A","./GetMagnitudeSq":"KGOb"}],"LGar":[function(require,module,exports) {
var r=require("./Point"),e=function(e,n,o){void 0===o&&(o=new r);var x=e.x*n.x+e.y*n.y;return 0!==x&&(o.x=x*n.x,o.y=x*n.y),o};module.exports=e;
},{"./Point":"tZ6A"}],"zWx8":[function(require,module,exports) {
var e=require("./GetMagnitude"),r=function(r,t){if(0!==r.x||0!==r.y){var u=e(r);r.x/=u,r.y/=u}return r.x*=t,r.y*=t,r};module.exports=r;
},{"./GetMagnitude":"stA6"}],"CH13":[function(require,module,exports) {
var e=require("./Point");e.Ceil=require("./Ceil"),e.Clone=require("./Clone"),e.CopyFrom=require("./CopyFrom"),e.Equals=require("./Equals"),e.Floor=require("./Floor"),e.GetCentroid=require("./GetCentroid"),e.GetMagnitude=require("./GetMagnitude"),e.GetMagnitudeSq=require("./GetMagnitudeSq"),e.GetRectangleFromPoints=require("./GetRectangleFromPoints"),e.Interpolate=require("./Interpolate"),e.Invert=require("./Invert"),e.Negative=require("./Negative"),e.Project=require("./Project"),e.ProjectUnit=require("./ProjectUnit"),e.SetMagnitude=require("./SetMagnitude"),module.exports=e;
},{"./Point":"tZ6A","./Ceil":"rSGC","./Clone":"dcMW","./CopyFrom":"oVXE","./Equals":"J1ze","./Floor":"KG5s","./GetCentroid":"auKA","./GetMagnitude":"stA6","./GetMagnitudeSq":"KGOb","./GetRectangleFromPoints":"FOhZ","./Interpolate":"td0A","./Invert":"utx6","./Negative":"ad2s","./Project":"vdO8","./ProjectUnit":"LGar","./SetMagnitude":"zWx8"}],"coFW":[function(require,module,exports) {
var e=require("./Polygon"),n=function(n){return new e(n.points)};module.exports=n;
},{"./Polygon":"df0Y"}],"XeFB":[function(require,module,exports) {
var r=require("./Contains"),e=function(e,n){return r(e,n.x,n.y)};module.exports=e;
},{"./Contains":"jGKY"}],"nZn9":[function(require,module,exports) {
var o=function(o,n){void 0===n&&(n=[]);for(var t=0;t<o.points.length;t++)n.push(o.points[t].x),n.push(o.points[t].y);return n};module.exports=o;
},{}],"tnFw":[function(require,module,exports) {
var e=function(e){return e.points.reverse(),e};module.exports=e;
},{}],"pHWV":[function(require,module,exports) {
var e=require("./Polygon");e.Clone=require("./Clone"),e.Contains=require("./Contains"),e.ContainsPoint=require("./ContainsPoint"),e.GetAABB=require("./GetAABB"),e.GetNumberArray=require("./GetNumberArray"),e.GetPoints=require("./GetPoints"),e.Perimeter=require("./Perimeter"),e.Reverse=require("./Reverse"),e.Smooth=require("./Smooth"),module.exports=e;
},{"./Polygon":"df0Y","./Clone":"coFW","./Contains":"jGKY","./ContainsPoint":"XeFB","./GetAABB":"pHDv","./GetNumberArray":"nZn9","./GetPoints":"Z3Vw","./Perimeter":"xp7s","./Reverse":"tnFw","./Smooth":"H2Gg"}],"mEVq":[function(require,module,exports) {
var t=function(t){return t.width*t.height};module.exports=t;
},{}],"gxWf":[function(require,module,exports) {
var e=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};module.exports=e;
},{}],"kCf2":[function(require,module,exports) {
var t=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t};module.exports=t;
},{}],"EIKC":[function(require,module,exports) {
var e=require("./Rectangle"),r=function(r){return new e(r.x,r.y,r.width,r.height)};module.exports=r;
},{"./Rectangle":"ACYM"}],"m9XH":[function(require,module,exports) {
var r=require("./Contains"),e=function(e,n){return r(e,n.x,n.y)};module.exports=e;
},{"./Contains":"VQyb"}],"r2ZW":[function(require,module,exports) {
var t=function(t,o){return!(o.width*o.height>t.width*t.height)&&(o.x>t.x&&o.x<t.right&&o.right>t.x&&o.right<t.right&&o.y>t.y&&o.y<t.bottom&&o.bottom>t.y&&o.bottom<t.bottom)};module.exports=t;
},{}],"GZga":[function(require,module,exports) {
var t=function(t){return 0===t.height?NaN:t.width/t.height};module.exports=t;
},{}],"LYMS":[function(require,module,exports) {
var e=require("./GetAspectRatio"),t=function(t,i){var h=e(t);return h<e(i)?t.setSize(i.height*h,i.height):t.setSize(i.width,i.width/h),t.setPosition(i.centerX-t.width/2,i.centerY-t.height/2)};module.exports=t;
},{"./GetAspectRatio":"GZga"}],"SYAD":[function(require,module,exports) {
var e=require("./GetAspectRatio"),t=function(t,i){var h=e(t);return h>e(i)?t.setSize(i.height*h,i.height):t.setSize(i.width,i.width/h),t.setPosition(i.centerX-t.width/2,i.centerY-t.height/2)};module.exports=t;
},{"./GetAspectRatio":"GZga"}],"wYho":[function(require,module,exports) {
var o=function(o){return o.x=Math.floor(o.x),o.y=Math.floor(o.y),o};module.exports=o;
},{}],"TsC6":[function(require,module,exports) {
var o=function(o){return o.x=Math.floor(o.x),o.y=Math.floor(o.y),o.width=Math.floor(o.width),o.height=Math.floor(o.height),o};module.exports=o;
},{}],"AFOh":[function(require,module,exports) {
var e=require("./Rectangle"),t=function(t,a,n,r,i){return void 0===i&&(i=new e),i.setTo(Math.min(t,n),Math.min(a,r),Math.abs(t-n),Math.abs(a-r))};module.exports=t;
},{"./Rectangle":"ACYM"}],"VRwG":[function(require,module,exports) {
var e=require("../point/Point"),n=function(n,r){return void 0===r&&(r=new e),r.x=n.centerX,r.y=n.centerY,r};module.exports=n;
},{"../point/Point":"tZ6A"}],"d5Xb":[function(require,module,exports) {
var e=require("../point/Point"),i=function(i,t){return void 0===t&&(t=new e),t.x=i.width,t.y=i.height,t};module.exports=i;
},{"../point/Point":"tZ6A"}],"RMAT":[function(require,module,exports) {
var e=require("./CenterOn"),r=function(r,t,n){var i=r.centerX,u=r.centerY;return r.setSize(r.width+2*t,r.height+2*n),e(r,i,u)};module.exports=r;
},{"./CenterOn":"hbtX"}],"BVs4":[function(require,module,exports) {
var t=require("./Rectangle"),e=require("../intersects/RectangleToRectangle"),i=function(i,r,a){return void 0===a&&(a=new t),e(i,r)?(a.x=Math.max(i.x,r.x),a.y=Math.max(i.y,r.y),a.width=Math.min(i.right,r.right)-a.x,a.height=Math.min(i.bottom,r.bottom)-a.y):a.setEmpty(),a};module.exports=i;
},{"./Rectangle":"ACYM","../intersects/RectangleToRectangle":"d521"}],"HaiZ":[function(require,module,exports) {
var t=function(t,h){for(var a=t.x,r=t.right,x=t.y,i=t.bottom,m=0;m<h.length;m++)a=Math.min(a,h[m].x),r=Math.max(r,h[m].x),x=Math.min(x,h[m].y),i=Math.max(i,h[m].y);return t.x=a,t.y=x,t.width=r-a,t.height=i-x,t};module.exports=t;
},{}],"dwQu":[function(require,module,exports) {
var t=function(t,a){var h=Math.min(t.x,a.x),r=Math.max(t.right,a.right);t.x=h,t.width=r-h;var i=Math.min(t.y,a.y),m=Math.max(t.bottom,a.bottom);return t.y=i,t.height=m-i,t};module.exports=t;
},{}],"Ko8i":[function(require,module,exports) {
var t=function(t,a,h){var r=Math.min(t.x,a),i=Math.max(t.right,a);t.x=r,t.width=i-r;var m=Math.min(t.y,h),n=Math.max(t.bottom,h);return t.y=m,t.height=n-m,t};module.exports=t;
},{}],"iehV":[function(require,module,exports) {
var t=function(t,o){return t.x<o.right&&t.right>o.x&&t.y<o.bottom&&t.bottom>o.y};module.exports=t;
},{}],"ZSA9":[function(require,module,exports) {
var t=require("../point/Point"),e=require("../../math/DegToRad"),h=function(h,i,r){void 0===r&&(r=new t),i=e(i);var a=Math.sin(i),n=Math.cos(i),o=n>0?h.width/2:h.width/-2,d=a>0?h.height/2:h.height/-2;return Math.abs(o*a)<Math.abs(d*n)?d=o*a/n:o=d*n/a,r.x=o+h.centerX,r.y=d+h.centerY,r};module.exports=h;
},{"../point/Point":"tZ6A","../../math/DegToRad":"FzPC"}],"Znet":[function(require,module,exports) {
var t=require("../../math/Between"),a=require("./ContainsRect"),o=require("../point/Point"),r=function(r,e,n){if(void 0===n&&(n=new o),a(r,e))switch(t(0,3)){case 0:n.x=r.x+Math.random()*(e.right-r.x),n.y=r.y+Math.random()*(e.top-r.y);break;case 1:n.x=e.x+Math.random()*(r.right-e.x),n.y=e.bottom+Math.random()*(r.bottom-e.bottom);break;case 2:n.x=r.x+Math.random()*(e.x-r.x),n.y=e.y+Math.random()*(r.bottom-e.y);break;case 3:n.x=e.right+Math.random()*(r.right-e.right),n.y=r.y+Math.random()*(e.bottom-r.y)}return n};module.exports=r;
},{"../../math/Between":"rT52","./ContainsRect":"r2ZW","../point/Point":"tZ6A"}],"jUTe":[function(require,module,exports) {
var t=function(t,h){return t.width===h.width&&t.height===h.height};module.exports=t;
},{}],"I5ca":[function(require,module,exports) {
var t=function(t,e,i){return void 0===i&&(i=e),t.width*=e,t.height*=i,t};module.exports=t;
},{}],"Exb3":[function(require,module,exports) {
var e=require("./Rectangle");e.Area=require("./Area"),e.Ceil=require("./Ceil"),e.CeilAll=require("./CeilAll"),e.CenterOn=require("./CenterOn"),e.Clone=require("./Clone"),e.Contains=require("./Contains"),e.ContainsPoint=require("./ContainsPoint"),e.ContainsRect=require("./ContainsRect"),e.CopyFrom=require("./CopyFrom"),e.Decompose=require("./Decompose"),e.Equals=require("./Equals"),e.FitInside=require("./FitInside"),e.FitOutside=require("./FitOutside"),e.Floor=require("./Floor"),e.FloorAll=require("./FloorAll"),e.FromPoints=require("./FromPoints"),e.FromXY=require("./FromXY"),e.GetAspectRatio=require("./GetAspectRatio"),e.GetCenter=require("./GetCenter"),e.GetPoint=require("./GetPoint"),e.GetPoints=require("./GetPoints"),e.GetSize=require("./GetSize"),e.Inflate=require("./Inflate"),e.Intersection=require("./Intersection"),e.MarchingAnts=require("./MarchingAnts"),e.MergePoints=require("./MergePoints"),e.MergeRect=require("./MergeRect"),e.MergeXY=require("./MergeXY"),e.Offset=require("./Offset"),e.OffsetPoint=require("./OffsetPoint"),e.Overlaps=require("./Overlaps"),e.Perimeter=require("./Perimeter"),e.PerimeterPoint=require("./PerimeterPoint"),e.Random=require("./Random"),e.RandomOutside=require("./RandomOutside"),e.SameDimensions=require("./SameDimensions"),e.Scale=require("./Scale"),e.Union=require("./Union"),module.exports=e;
},{"./Rectangle":"ACYM","./Area":"mEVq","./Ceil":"gxWf","./CeilAll":"kCf2","./CenterOn":"hbtX","./Clone":"EIKC","./Contains":"VQyb","./ContainsPoint":"m9XH","./ContainsRect":"r2ZW","./CopyFrom":"Ta4L","./Decompose":"Xlmh","./Equals":"j4vz","./FitInside":"LYMS","./FitOutside":"SYAD","./Floor":"wYho","./FloorAll":"TsC6","./FromPoints":"mko9","./FromXY":"AFOh","./GetAspectRatio":"GZga","./GetCenter":"VRwG","./GetPoint":"As0Q","./GetPoints":"OGJr","./GetSize":"d5Xb","./Inflate":"RMAT","./Intersection":"BVs4","./MarchingAnts":"fiqx","./MergePoints":"HaiZ","./MergeRect":"dwQu","./MergeXY":"Ko8i","./Offset":"JVQZ","./OffsetPoint":"u3pZ","./Overlaps":"iehV","./Perimeter":"EoRj","./PerimeterPoint":"ZSA9","./Random":"ylKO","./RandomOutside":"Znet","./SameDimensions":"jUTe","./Scale":"I5ca","./Union":"Ke6y"}],"YxWy":[function(require,module,exports) {
var r=function(r){var a=r.x1,t=r.y1,x=r.x2,e=r.y2,n=r.x3,o=r.y3;return Math.abs(((n-a)*(e-t)-(x-a)*(o-t))/2)};module.exports=r;
},{}],"YU3U":[function(require,module,exports) {
var r=require("./Triangle"),e=function(e,n,t){var a=t*(Math.sqrt(3)/2);return new r(e,n,e+t/2,n+a,e-t/2,n+a)};module.exports=e;
},{"./Triangle":"jTZL"}],"MMGU":[function(require,module,exports) {
var r=require("../polygon/Earcut"),e=require("./Triangle"),o=function(o,i,n,u,l){void 0===i&&(i=null),void 0===n&&(n=1),void 0===u&&(u=1),void 0===l&&(l=[]);for(var v,d,t,a,g,p,c,f,h,q=r(o,i),s=0;s<q.length;s+=3)v=q[s],d=q[s+1],t=q[s+2],a=o[2*v]*n,g=o[2*v+1]*u,p=o[2*d]*n,c=o[2*d+1]*u,f=o[2*t]*n,h=o[2*t+1]*u,l.push(new e(a,g,p,c,f,h));return l};module.exports=o;
},{"../polygon/Earcut":"zz3E","./Triangle":"jTZL"}],"t5Vu":[function(require,module,exports) {
var e=require("./Triangle"),r=function(r,n,i,o){return void 0===o&&(o=i),new e(r,n,r,n-o,r+i,n)};module.exports=r;
},{"./Triangle":"jTZL"}],"pO39":[function(require,module,exports) {
var e=require("../point/Point"),n=function(n,o){return void 0===o&&(o=new e),o.x=(n.x1+n.x2+n.x3)/3,o.y=(n.y1+n.y2+n.y3)/3,o};module.exports=n;
},{"../point/Point":"tZ6A"}],"L0qc":[function(require,module,exports) {
var r=function(r,x,e){return r.x1+=x,r.y1+=e,r.x2+=x,r.y2+=e,r.x3+=x,r.y3+=e,r};module.exports=r;
},{}],"YaOj":[function(require,module,exports) {
var r=require("./Centroid"),e=require("./Offset"),i=function(i,o,t,u){void 0===u&&(u=r);var n=u(i),d=o-n.x,f=t-n.y;return e(i,d,f)};module.exports=i;
},{"./Centroid":"pO39","./Offset":"L0qc"}],"N3Aa":[function(require,module,exports) {
var r=require("../../math/Vector2");function e(r,e,n,t){return r*t-e*n}var n=function(n,t){void 0===t&&(t=new r);var o=n.x3,u=n.y3,x=n.x1-o,a=n.y1-u,i=n.x2-o,v=n.y2-u,y=2*e(x,a,i,v),c=e(a,x*x+a*a,v,i*i+v*v),d=e(x,x*x+a*a,i,i*i+v*v);return t.x=o-c/y,t.y=u+d/y,t};module.exports=n;
},{"../../math/Vector2":"xARF"}],"qoXb":[function(require,module,exports) {
var a=require("../circle/Circle"),r=function(r,t){void 0===t&&(t=new a);var e,i,x=r.x1,h=r.y1,s=r.x2,M=r.y2,n=r.x3,u=r.y3,y=s-x,m=M-h,c=n-x,d=u-h,l=y*(x+s)+m*(h+M),o=c*(x+n)+d*(h+u),v=2*(y*(u-M)-m*(n-s));if(Math.abs(v)<1e-6){var q=Math.min(x,s,n),f=Math.min(h,M,u);e=.5*(Math.max(x,s,n)-q),i=.5*(Math.max(h,M,u)-f),t.x=q+e,t.y=f+i,t.radius=Math.sqrt(e*e+i*i)}else t.x=(d*l-m*o)/v,t.y=(y*o-c*l)/v,e=t.x-x,i=t.y-h,t.radius=Math.sqrt(e*e+i*i);return t};module.exports=r;
},{"../circle/Circle":"b8pw"}],"GyCb":[function(require,module,exports) {
var e=require("./Triangle"),r=function(r){return new e(r.x1,r.y1,r.x2,r.y2,r.x3,r.y3)};module.exports=r;
},{"./Triangle":"jTZL"}],"gSSb":[function(require,module,exports) {
var r=require("./Contains"),e=function(e,n){return r(e,n.x,n.y)};module.exports=e;
},{"./Contains":"wKKV"}],"HuCb":[function(require,module,exports) {
var e=function(e,o){return o.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};module.exports=e;
},{}],"oLw2":[function(require,module,exports) {
var x=function(x,y){return x.x1===y.x1&&x.y1===y.y1&&x.x2===y.x2&&x.y2===y.y2&&x.x3===y.x3&&x.y3===y.y3};module.exports=x;
},{}],"ACLy":[function(require,module,exports) {
var r=require("../point/Point");function n(r,n,t,e){var o=r-t,i=n-e,u=o*o+i*i;return Math.sqrt(u)}var t=function(t,e){void 0===e&&(e=new r);var o=t.x1,i=t.y1,u=t.x2,a=t.y2,v=t.x3,x=t.y3,y=n(v,x,u,a),c=n(o,i,v,x),d=n(u,a,o,i),f=y+c+d;return e.x=(o*y+u*c+v*d)/f,e.y=(i*y+a*c+x*d)/f,e};module.exports=t;
},{"../point/Point":"tZ6A"}],"tu9x":[function(require,module,exports) {
var e=require("../line/Length"),n=function(n){var r=n.getLineA(),t=n.getLineB(),i=n.getLineC();return e(r)+e(t)+e(i)};module.exports=n;
},{"../line/Length":"fUqJ"}],"lB23":[function(require,module,exports) {
var x=function(x,y,r,t){var a=Math.cos(t),n=Math.sin(t),o=x.x1-y,e=x.y1-r;return x.x1=o*a-e*n+y,x.y1=o*n+e*a+r,o=x.x2-y,e=x.y2-r,x.x2=o*a-e*n+y,x.y2=o*n+e*a+r,o=x.x3-y,e=x.y3-r,x.x3=o*a-e*n+y,x.y3=o*n+e*a+r,x};module.exports=x;
},{}],"ZYt3":[function(require,module,exports) {
var r=require("./RotateAroundXY"),e=require("./InCenter"),n=function(n,t){var u=e(n);return r(n,u.x,u.y,t)};module.exports=n;
},{"./RotateAroundXY":"lB23","./InCenter":"ACLy"}],"AgNN":[function(require,module,exports) {
var r=require("./RotateAroundXY"),e=function(e,o,t){return r(e,o.x,o.y,t)};module.exports=e;
},{"./RotateAroundXY":"lB23"}],"Ke7g":[function(require,module,exports) {
var e=require("./Triangle");e.Area=require("./Area"),e.BuildEquilateral=require("./BuildEquilateral"),e.BuildFromPolygon=require("./BuildFromPolygon"),e.BuildRight=require("./BuildRight"),e.CenterOn=require("./CenterOn"),e.Centroid=require("./Centroid"),e.CircumCenter=require("./CircumCenter"),e.CircumCircle=require("./CircumCircle"),e.Clone=require("./Clone"),e.Contains=require("./Contains"),e.ContainsArray=require("./ContainsArray"),e.ContainsPoint=require("./ContainsPoint"),e.CopyFrom=require("./CopyFrom"),e.Decompose=require("./Decompose"),e.Equals=require("./Equals"),e.GetPoint=require("./GetPoint"),e.GetPoints=require("./GetPoints"),e.InCenter=require("./InCenter"),e.Perimeter=require("./Perimeter"),e.Offset=require("./Offset"),e.Random=require("./Random"),e.Rotate=require("./Rotate"),e.RotateAroundPoint=require("./RotateAroundPoint"),e.RotateAroundXY=require("./RotateAroundXY"),module.exports=e;
},{"./Triangle":"jTZL","./Area":"YxWy","./BuildEquilateral":"YU3U","./BuildFromPolygon":"MMGU","./BuildRight":"t5Vu","./CenterOn":"YaOj","./Centroid":"pO39","./CircumCenter":"N3Aa","./CircumCircle":"qoXb","./Clone":"GyCb","./Contains":"wKKV","./ContainsArray":"U9Gq","./ContainsPoint":"gSSb","./CopyFrom":"HuCb","./Decompose":"QeZR","./Equals":"oLw2","./GetPoint":"EwIU","./GetPoints":"jUWM","./InCenter":"ACLy","./Perimeter":"tu9x","./Offset":"L0qc","./Random":"Agdn","./Rotate":"ZYt3","./RotateAroundPoint":"AgNN","./RotateAroundXY":"lB23"}],"mWxN":[function(require,module,exports) {
var e=require("./const"),r=require("../utils/object/Extend"),i={Circle:require("./circle"),Ellipse:require("./ellipse"),Intersects:require("./intersects"),Line:require("./line"),Point:require("./point"),Polygon:require("./polygon"),Rectangle:require("./rectangle"),Triangle:require("./triangle")};i=r(!1,i,e),module.exports=i;
},{"./const":"wRsF","../utils/object/Extend":"CtVZ","./circle":"VmC4","./ellipse":"jIkz","./intersects":"ubjC","./line":"fke6","./point":"CH13","./polygon":"pHWV","./rectangle":"Exb3","./triangle":"Ke7g"}],"tOzC":[function(require,module,exports) {
var a=function(a,r,l){return{gameObject:a,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:r,hitAreaCallback:l,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};module.exports=a;
},{}],"oWIK":[function(require,module,exports) {
var t=require("../../utils/Class"),e=new t({initialize:function(t,e){this.pad=t,this.events=t.events,this.index=e,this.value=0,this.threshold=.1},update:function(t){this.value=t},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});module.exports=e;
},{"../../utils/Class":"Q4x4"}],"YJy4":[function(require,module,exports) {
module.exports="down";
},{}],"KITT":[function(require,module,exports) {
module.exports="up";
},{}],"Thwi":[function(require,module,exports) {
module.exports="connected";
},{}],"xKEc":[function(require,module,exports) {
module.exports="disconnected";
},{}],"KgKu":[function(require,module,exports) {
module.exports={BUTTON_DOWN:require("./BUTTON_DOWN_EVENT"),BUTTON_UP:require("./BUTTON_UP_EVENT"),CONNECTED:require("./CONNECTED_EVENT"),DISCONNECTED:require("./DISCONNECTED_EVENT"),GAMEPAD_BUTTON_DOWN:require("./GAMEPAD_BUTTON_DOWN_EVENT"),GAMEPAD_BUTTON_UP:require("./GAMEPAD_BUTTON_UP_EVENT")};
},{"./BUTTON_DOWN_EVENT":"YJy4","./BUTTON_UP_EVENT":"KITT","./CONNECTED_EVENT":"Thwi","./DISCONNECTED_EVENT":"xKEc","./GAMEPAD_BUTTON_DOWN_EVENT":"YJy4","./GAMEPAD_BUTTON_UP_EVENT":"KITT"}],"TV3U":[function(require,module,exports) {
var s=require("../../utils/Class"),t=require("./events"),e=new s({initialize:function(s,t){this.pad=s,this.events=s.manager,this.index=t,this.value=0,this.threshold=1,this.pressed=!1},update:function(s){this.value=s;var e=this.pad,i=this.index;s>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(t.BUTTON_DOWN,e,this,s),this.pad.emit(t.GAMEPAD_BUTTON_DOWN,i,s,this)):this.pressed&&(this.pressed=!1,this.events.emit(t.BUTTON_UP,e,this,s),this.pad.emit(t.GAMEPAD_BUTTON_UP,i,s,this))},destroy:function(){this.pad=null,this.events=null}});module.exports=e;
},{"../../utils/Class":"Q4x4","./events":"KgKu"}],"ncZt":[function(require,module,exports) {
var t=require("./Axis"),e=require("./Button"),i=require("../../utils/Class"),s=require("eventemitter3"),n=require("../../math/Vector2"),r=new i({Extends:s,initialize:function(i,r){s.call(this),this.manager=i,this.pad=r,this.id=r.id,this.index=r.index;for(var h=[],u=0;u<r.buttons.length;u++)h.push(new e(this,u));this.buttons=h;var o=[];for(u=0;u<r.axes.length;u++)o.push(new t(this,u));this.axes=o,this.vibration=r.vibrationActuator;var a={value:0,pressed:!1};this._LCLeft=h[14]?h[14]:a,this._LCRight=h[15]?h[15]:a,this._LCTop=h[12]?h[12]:a,this._LCBottom=h[13]?h[13]:a,this._RCLeft=h[2]?h[2]:a,this._RCRight=h[1]?h[1]:a,this._RCTop=h[3]?h[3]:a,this._RCBottom=h[0]?h[0]:a,this._FBLeftTop=h[4]?h[4]:a,this._FBLeftBottom=h[6]?h[6]:a,this._FBRightTop=h[5]?h[5]:a,this._FBRightBottom=h[7]?h[7]:a;var g={value:0};this._HAxisLeft=o[0]?o[0]:g,this._VAxisLeft=o[1]?o[1]:g,this._HAxisRight=o[2]?o[2]:g,this._VAxisRight=o[3]?o[3]:g,this.leftStick=new n,this.rightStick=new n},getAxisTotal:function(){return this.axes.length},getAxisValue:function(t){return this.axes[t].getValue()},setAxisThreshold:function(t){for(var e=0;e<this.axes.length;e++)this.axes[e].threshold=t},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(t){return this.buttons[t].value},isButtonDown:function(t){return this.buttons[t].pressed},update:function(t){var e,i=this.buttons,s=t.buttons,n=i.length;for(e=0;e<n;e++)i[e].update(s[e].value);var r=this.axes,h=t.axes;for(n=r.length,e=0;e<n;e++)r[e].update(h[e]);n>=2&&(this.leftStick.set(r[0].getValue(),r[1].getValue()),n>=4&&this.rightStick.set(r[2].getValue(),r[3].getValue()))},destroy:function(){var t;for(this.removeAllListeners(),this.manager=null,this.pad=null,t=0;t<this.buttons.length;t++)this.buttons[t].destroy();for(t=0;t<this.axes.length;t++)this.axes[t].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});module.exports=r;
},{"./Axis":"oWIK","./Button":"TV3U","../../utils/Class":"Q4x4","eventemitter3":"Clm3","../../math/Vector2":"xARF"}],"xheY":[function(require,module,exports) {
var e=require("../utils/object/GetValue"),n={},i={register:function(e,i,t,r,g){n[e]={plugin:i,mapping:t,settingsKey:r,configKey:g}},getPlugin:function(e){return n[e]},install:function(i){var t=i.scene.sys,r=t.settings.input,g=t.game.config;for(var s in n){var o=n[s].plugin,u=n[s].mapping,a=n[s].settingsKey,c=n[s].configKey;e(r,a,g[c])&&(i[u]=new o(i))}},remove:function(e){n.hasOwnProperty(e)&&delete n[e]}};module.exports=i;
},{"../utils/object/GetValue":"FWyS"}],"tuoQ":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("eventemitter3"),s=require("./events"),i=require("./Gamepad"),n=require("../../utils/object/GetValue"),a=require("../InputPluginCache"),d=require("../events"),h=new e({Extends:t,initialize:function(e){t.call(this),this.scene=e.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=e,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,e.pluginEvents.once(d.BOOT,this.boot,this),e.pluginEvents.on(d.START,this.start,this)},boot:function(){var e=this.scene.sys.game,t=this.settings.input,s=e.config;this.enabled=n(t,"gamepad",s.inputGamepad)&&e.device.input.gamepads,this.target=n(t,"gamepad.target",s.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(d.DESTROY,this.destroy,this)},start:function(){this.enabled&&this.startListeners(),this.sceneInputPlugin.pluginEvents.once(d.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var e=this,t=this.target,s=function(t){!t.defaultPrevented&&e.isActive()&&(e.refreshPads(),e.queue.push(t))};this.onGamepadHandler=s,t.addEventListener("gamepadconnected",s,!1),t.addEventListener("gamepaddisconnected",s,!1),this.sceneInputPlugin.pluginEvents.on(d.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(d.UPDATE,this.update)},disconnectAll:function(){for(var e=0;e<this.gamepads.length;e++)this.gamepads.connected=!1},refreshPads:function(){var e=navigator.getGamepads();if(e)for(var t=this.gamepads,s=0;s<e.length;s++){var n=e[s];if(n){var a=n.id,d=n.index,h=t[d];if(h)h.id!==a?(h.destroy(),t[d]=new i(this,n)):h.update(n);else{var r=new i(this,n);t[d]=r,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=r):this._pad3=r:this._pad2=r:this._pad1=r}}}else this.disconnectAll()},getAll:function(){for(var e=[],t=this.gamepads,s=0;s<t.length;s++)t[s]&&e.push(t[s]);return e},getPad:function(e){for(var t=this.gamepads,s=0;s<t.length;s++)if(t[s]&&t[s].index===e)return t[s]},update:function(){if(this.enabled){this.refreshPads();var e=this.queue.length;if(0!==e)for(var t=this.queue.splice(0,e),i=0;i<e;i++){var n=t[i],a=this.getPad(n.gamepad.index);"gamepadconnected"===n.type?this.emit(s.CONNECTED,a,n):"gamepaddisconnected"===n.type&&this.emit(s.DISCONNECTED,a,n)}}},shutdown:function(){this.stopListeners(),this.disconnectAll(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var e=0;e<this.gamepads.length;e++)this.gamepads[e]&&this.gamepads[e].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});a.register("GamepadPlugin",h,"gamepad","gamepad","inputGamepad"),module.exports=h;
},{"../../utils/Class":"Q4x4","eventemitter3":"Clm3","./events":"KgKu","./Gamepad":"ncZt","../../utils/object/GetValue":"FWyS","../InputPluginCache":"xheY","../events":"akNL"}],"JSvF":[function(require,module,exports) {
module.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3};
},{}],"dOOm":[function(require,module,exports) {
module.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5};
},{}],"ITai":[function(require,module,exports) {
module.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3};
},{}],"BA58":[function(require,module,exports) {
module.exports={DUALSHOCK_4:require("./Sony_PlayStation_DualShock_4"),SNES_USB:require("./SNES_USB_Controller"),XBOX_360:require("./XBox360_Controller")};
},{"./Sony_PlayStation_DualShock_4":"JSvF","./SNES_USB_Controller":"dOOm","./XBox360_Controller":"ITai"}],"JCpt":[function(require,module,exports) {
module.exports={Axis:require("./Axis"),Button:require("./Button"),Events:require("./events"),Gamepad:require("./Gamepad"),GamepadPlugin:require("./GamepadPlugin"),Configs:require("./configs/")};
},{"./Axis":"oWIK","./Button":"TV3U","./events":"KgKu","./Gamepad":"ncZt","./GamepadPlugin":"tuoQ","./configs/":"BA58"}],"Og5v":[function(require,module,exports) {
var e=function(e,r){return function(t,n,u,a){var o=e.getPixelAlpha(n,u,a.texture.key,a.frame.name);return o&&o>=r}};module.exports=e;
},{}],"OuX8":[function(require,module,exports) {
var t=require("../geom/circle/Circle"),e=require("../geom/circle/Contains"),i=require("../utils/Class"),n=require("./const"),r=require("./CreateInteractiveObject"),s=require("./CreatePixelPerfectHandler"),a=require("../math/distance/DistanceBetween"),o=require("../geom/ellipse/Ellipse"),h=require("../geom/ellipse/Contains"),l=require("./events"),u=require("eventemitter3"),c=require("../utils/object/GetFastValue"),g=require("../geom/const"),p=require("./InputPluginCache"),d=require("../utils/object/IsPlainObject"),m=require("../plugins/PluginCache"),v=require("../geom/rectangle/Rectangle"),E=require("../geom/rectangle/Contains"),f=require("../scene/events"),_=require("../geom/triangle/Triangle"),O=require("../geom/triangle/Contains"),T=new i({Extends:u,initialize:function(t){u.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new u,this.enabled=!0,this.displayList,this.cameras,p.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var e={cancelled:!1};this._eventContainer={stopPropagation:function(){e.cancelled=!0}},this._eventData=e,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(f.BOOT,this.boot,this),t.sys.events.on(f.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(f.DESTROY,this.destroy,this),this.pluginEvents.emit(l.BOOT)},start:function(){var t=this.systems.events;t.on(f.TRANSITION_START,this.transitionIn,this),t.on(f.TRANSITION_OUT,this.transitionOut,this),t.on(f.TRANSITION_COMPLETE,this.transitionComplete,this),t.on(f.PRE_UPDATE,this.preUpdate,this),t.once(f.SHUTDOWN,this.shutdown,this),this.manager.events.on(l.GAME_OUT,this.onGameOut,this),this.manager.events.on(l.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(l.START)},onGameOver:function(t){this.isActive()&&this.emit(l.GAME_OVER,t.timeStamp,t)},onGameOut:function(t){this.isActive()&&this.emit(l.GAME_OUT,t.timeStamp,t)},preUpdate:function(){this.pluginEvents.emit(l.PRE_UPDATE);var t=this._pendingRemoval,e=this._pendingInsertion,i=t.length,n=e.length;if(0!==i||0!==n){for(var r=this._list,s=0;s<i;s++){var a=t[s],o=r.indexOf(a);o>-1&&(r.splice(o,1),this.clear(a,!0))}t.length=0,this._pendingRemoval.length=0,this._list=r.concat(e.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(t,e){if(!this.isActive())return!1;if(this.pluginEvents.emit(l.UPDATE,t,e),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var i,n=this.manager,r=n.pointers,s=n.pointersTotal;for(i=0;i<s;i++)r[i].updateMotion();if(0===this._list.length)return!1;var a=this.pollRate;if(-1===a)return!1;if(a>0){if(this._pollTimer-=e,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var o=!1;for(i=0;i<s;i++){var h=0,u=r[i];this._tempZones=[],this._temp=this.hitTestPointer(u),this.sortGameObjects(this._temp),this.sortGameObjects(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),h+=this.processOverOutEvents(u),2===this.getDragState(u)&&this.processDragThresholdEvent(u,t),h>0&&(o=!0)}return o},update:function(t,e){if(!this.isActive())return!1;for(var i=e.length,r=!1,s=0;s<i;s++){var a=0,o=e[s];switch(this._tempZones=[],this._temp=this.hitTestPointer(o),this.sortGameObjects(this._temp),this.sortGameObjects(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),t){case n.MOUSE_DOWN:a+=this.processDragDownEvent(o),a+=this.processDownEvents(o),a+=this.processOverOutEvents(o);break;case n.MOUSE_UP:a+=this.processDragUpEvent(o),a+=this.processUpEvents(o),a+=this.processOverOutEvents(o);break;case n.TOUCH_START:a+=this.processDragDownEvent(o),a+=this.processDownEvents(o),a+=this.processOverEvents(o);break;case n.TOUCH_END:case n.TOUCH_CANCEL:a+=this.processDragUpEvent(o),a+=this.processUpEvents(o),a+=this.processOutEvents(o);break;case n.MOUSE_MOVE:case n.TOUCH_MOVE:a+=this.processDragMoveEvent(o),a+=this.processMoveEvents(o),a+=this.processOverOutEvents(o);break;case n.MOUSE_WHEEL:a+=this.processWheelEvent(o)}a>0&&(r=!0)}return this._updatedThisFrame=!0,r},clear:function(t,e){void 0===e&&(e=!1);var i=t.input;if(i){e||this.queueForRemoval(t),i.gameObject=void 0,i.target=void 0,i.hitArea=void 0,i.hitAreaCallback=void 0,i.callbackContext=void 0,this.manager.resetCursor(i),t.input=null;var n=this._draggable.indexOf(t);return n>-1&&this._draggable.splice(n,1),(n=this._drag[0].indexOf(t))>-1&&this._drag[0].splice(n,1),(n=this._over[0].indexOf(t))>-1&&this._over[0].splice(n,1),t}},disable:function(t){t.input.enabled=!1},enable:function(t,e,i,n){return void 0===n&&(n=!1),t.input?t.input.enabled=!0:this.setHitArea(t,e,i),t.input&&n&&!t.input.dropZone&&(t.input.dropZone=n),this},hitTestPointer:function(t){for(var e=this.cameras.getCamerasBelowPointer(t),i=0;i<e.length;i++){for(var n=e[i],r=this.manager.hitTest(t,this._list,n),s=0;s<r.length;s++){var a=r[s];a.input.dropZone&&this._tempZones.push(a)}if(r.length>0)return t.camera=n,r}return t.camera=e[0],[]},processDownEvents:function(t){var e=0,i=this._temp,n=this._eventData,r=this._eventContainer;n.cancelled=!1;for(var s=!1,a=0;a<i.length;a++){var o=i[a];if(o.input){if(e++,o.emit(l.GAMEOBJECT_POINTER_DOWN,t,o.input.localX,o.input.localY,r),n.cancelled||!o.input){s=!0;break}if(this.emit(l.GAMEOBJECT_DOWN,t,o,r),n.cancelled||!o.input){s=!0;break}}}return!s&&this.manager&&(t.downElement===this.manager.game.canvas?this.emit(l.POINTER_DOWN,t,i):this.emit(l.POINTER_DOWN_OUTSIDE,t)),e},getDragState:function(t){return this._dragState[t.id]},setDragState:function(t,e){this._dragState[t.id]=e},processDragThresholdEvent:function(t,e){var i=!1,n=this.dragTimeThreshold,r=this.dragDistanceThreshold;if(r>0&&a(t.x,t.y,t.downX,t.downY)>=r?i=!0:n>0&&e>=t.downTime+n&&(i=!0),i)return this.setDragState(t,3),this.processDragStartList(t)},processDragStartList:function(t){if(3!==this.getDragState(t))return 0;for(var e=this._drag[t.id],i=0;i<e.length;i++){var n=e[i],r=n.input;r.dragState=2,r.dragStartX=n.x,r.dragStartY=n.y,r.dragStartXGlobal=t.x,r.dragStartYGlobal=t.y,r.dragX=r.dragStartXGlobal-r.dragStartX,r.dragY=r.dragStartYGlobal-r.dragStartY,n.emit(l.GAMEOBJECT_DRAG_START,t,r.dragX,r.dragY),this.emit(l.DRAG_START,t,n)}return this.setDragState(t,4),e.length},processDragDownEvent:function(t){var e=this._temp;if(0===this._draggable.length||0===e.length||!t.primaryDown||0!==this.getDragState(t))return 0;this.setDragState(t,1);for(var i=[],n=0;n<e.length;n++){var r=e[n];r.input.draggable&&0===r.input.dragState&&i.push(r)}return 0===i.length?(this.setDragState(t,0),0):(i.length>1&&(this.sortGameObjects(i),this.topOnly&&i.splice(1)),this._drag[t.id]=i,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?(this.setDragState(t,3),this.processDragStartList(t)):(this.setDragState(t,2),0))},processDragMoveEvent:function(t){if(2===this.getDragState(t)&&this.processDragThresholdEvent(t,this.manager.game.loop.now),4!==this.getDragState(t))return 0;for(var e=this._tempZones,i=this._drag[t.id],n=0;n<i.length;n++){var r,s,a=i[n],o=a.input,h=o.target;if(h){var u=e.indexOf(h);0===u?(a.emit(l.GAMEOBJECT_DRAG_OVER,t,h),this.emit(l.DRAG_OVER,t,a,h)):u>0?(a.emit(l.GAMEOBJECT_DRAG_LEAVE,t,h),this.emit(l.DRAG_LEAVE,t,a,h),o.target=e[0],h=o.target,a.emit(l.GAMEOBJECT_DRAG_ENTER,t,h),this.emit(l.DRAG_ENTER,t,a,h)):(a.emit(l.GAMEOBJECT_DRAG_LEAVE,t,h),this.emit(l.DRAG_LEAVE,t,a,h),e[0]?(o.target=e[0],h=o.target,a.emit(l.GAMEOBJECT_DRAG_ENTER,t,h),this.emit(l.DRAG_ENTER,t,a,h)):o.target=null)}else!h&&e[0]&&(o.target=e[0],h=o.target,a.emit(l.GAMEOBJECT_DRAG_ENTER,t,h),this.emit(l.DRAG_ENTER,t,a,h));if(a.parentContainer){var c=t.x-o.dragStartXGlobal,g=t.y-o.dragStartYGlobal,p=a.getParentRotation(),d=c*Math.cos(p)+g*Math.sin(p),m=g*Math.cos(p)-c*Math.sin(p);d*=1/a.parentContainer.scaleX,m*=1/a.parentContainer.scaleY,r=d+o.dragStartX,s=m+o.dragStartY}else r=t.x-o.dragX,s=t.y-o.dragY;a.emit(l.GAMEOBJECT_DRAG,t,r,s),this.emit(l.DRAG,t,a,r,s)}return i.length},processDragUpEvent:function(t){for(var e=this._drag[t.id],i=0;i<e.length;i++){var n=e[i],r=n.input;if(r&&2===r.dragState){r.dragState=0,r.dragX=r.localX-n.displayOriginX,r.dragY=r.localY-n.displayOriginY;var s=!1,a=r.target;a&&(n.emit(l.GAMEOBJECT_DROP,t,a),this.emit(l.DROP,t,n,a),r.target=null,s=!0),n.input&&(n.emit(l.GAMEOBJECT_DRAG_END,t,r.dragX,r.dragY,s),this.emit(l.DRAG_END,t,n,s))}}return this.setDragState(t,0),e.splice(0),0},processMoveEvents:function(t){var e=0,i=this._temp,n=this._eventData,r=this._eventContainer;n.cancelled=!1;for(var s=!1,a=0;a<i.length;a++){var o=i[a];if(o.input){if(e++,o.emit(l.GAMEOBJECT_POINTER_MOVE,t,o.input.localX,o.input.localY,r),n.cancelled||!o.input){s=!0;break}if(this.emit(l.GAMEOBJECT_MOVE,t,o,r),n.cancelled||!o.input){s=!0;break}if(this.topOnly)break}}return s||this.emit(l.POINTER_MOVE,t,i),e},processWheelEvent:function(t){var e=0,i=this._temp,n=this._eventData,r=this._eventContainer;n.cancelled=!1;for(var s=!1,a=t.deltaX,o=t.deltaY,h=t.deltaZ,u=0;u<i.length;u++){var c=i[u];if(c.input){if(e++,c.emit(l.GAMEOBJECT_POINTER_WHEEL,t,a,o,h,r),n.cancelled||!c.input){s=!0;break}if(this.emit(l.GAMEOBJECT_WHEEL,t,c,a,o,h,r),n.cancelled||!c.input){s=!0;break}}}return s||this.emit(l.POINTER_WHEEL,t,i,a,o,h),e},processOverEvents:function(t){var e=this._temp,i=0,n=e.length,r=[];if(n>0){var s=this.manager,a=this._eventData,o=this._eventContainer;a.cancelled=!1;for(var h=!1,u=0;u<n;u++){var c=e[u];if(c.input){if(r.push(c),s.setCursor(c.input),c.emit(l.GAMEOBJECT_POINTER_OVER,t,c.input.localX,c.input.localY,o),i++,a.cancelled||!c.input){h=!0;break}if(this.emit(l.GAMEOBJECT_OVER,t,c,o),a.cancelled||!c.input){h=!0;break}}}h||this.emit(l.POINTER_OVER,t,r)}return this._over[t.id]=r,i},processOutEvents:function(t){var e=this._over[t.id],i=0,n=e.length;if(n>0){var r=this.manager,s=this._eventData,a=this._eventContainer;s.cancelled=!1;var o=!1;this.sortGameObjects(e);for(var h=0;h<n;h++){var u=e[h];for(h=0;h<n;h++)if((u=e[h]).input){if(r.resetCursor(u.input),u.emit(l.GAMEOBJECT_POINTER_OUT,t,a),i++,s.cancelled||!u.input){o=!0;break}if(this.emit(l.GAMEOBJECT_OUT,t,u,a),s.cancelled||!u.input){o=!0;break}}o||this.emit(l.POINTER_OUT,t,e)}this._over[t.id]=[]}return i},processOverOutEvents:function(t){var e,i,n=this._temp,r=[],s=[],a=[],o=this._over[t.id],h=this._drag[t.id],u=this.manager;for(e=0;e<o.length;e++)i=o[e],-1===n.indexOf(i)&&-1===h.indexOf(i)?r.push(i):a.push(i);for(e=0;e<n.length;e++)i=n[e],-1===o.indexOf(i)&&s.push(i);var c=r.length,g=0,p=this._eventData,d=this._eventContainer;p.cancelled=!1;var m=!1;if(c>0){for(this.sortGameObjects(r),e=0;e<c;e++)if((i=r[e]).input){if(u.resetCursor(i.input),i.emit(l.GAMEOBJECT_POINTER_OUT,t,d),g++,p.cancelled||!i.input){m=!0;break}if(this.emit(l.GAMEOBJECT_OUT,t,i,d),p.cancelled||!i.input){m=!0;break}}m||this.emit(l.POINTER_OUT,t,r)}if(c=s.length,p.cancelled=!1,m=!1,c>0){for(this.sortGameObjects(s),e=0;e<c;e++)if((i=s[e]).input){if(u.setCursor(i.input),i.emit(l.GAMEOBJECT_POINTER_OVER,t,i.input.localX,i.input.localY,d),g++,p.cancelled||!i.input){m=!0;break}if(this.emit(l.GAMEOBJECT_OVER,t,i,d),p.cancelled||!i.input){m=!0;break}}m||this.emit(l.POINTER_OVER,t,s)}return o=a.concat(s),this._over[t.id]=this.sortGameObjects(o),g},processUpEvents:function(t){var e=this._temp,i=this._eventData,n=this._eventContainer;i.cancelled=!1;for(var r=!1,s=0;s<e.length;s++){var a=e[s];if(a.input){if(a.emit(l.GAMEOBJECT_POINTER_UP,t,a.input.localX,a.input.localY,n),i.cancelled||!a.input){r=!0;break}if(this.emit(l.GAMEOBJECT_UP,t,a,n),i.cancelled||!a.input){r=!0;break}}}return!r&&this.manager&&(t.upElement===this.manager.game.canvas?this.emit(l.POINTER_UP,t,e):this.emit(l.POINTER_UP_OUTSIDE,t)),e.length},queueForInsertion:function(t){return-1===this._pendingInsertion.indexOf(t)&&-1===this._list.indexOf(t)&&this._pendingInsertion.push(t),this},queueForRemoval:function(t){return this._pendingRemoval.push(t),this},setDraggable:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];n.input.draggable=e;var r=this._draggable.indexOf(n);e&&-1===r?this._draggable.push(n):!e&&r>-1&&this._draggable.splice(r,1)}return this},makePixelPerfect:function(t){void 0===t&&(t=1);var e=this.systems.textures;return s(e,t)},setHitArea:function(t,e,i){if(void 0===e)return this.setHitAreaFromTexture(t);Array.isArray(t)||(t=[t]);var n=!1,s=!1,a=!1,o=!1,h=!1,l=!0;if(d(e)){var u=e;e=c(u,"hitArea",null),i=c(u,"hitAreaCallback",null),n=c(u,"draggable",!1),s=c(u,"dropZone",!1),a=c(u,"cursor",!1),o=c(u,"useHandCursor",!1),h=c(u,"pixelPerfect",!1);var g=c(u,"alphaTolerance",1);h&&(e={},i=this.makePixelPerfect(g)),e&&i||(this.setHitAreaFromTexture(t),l=!1)}else"function"!=typeof e||i||(i=e,e={});for(var p=0;p<t.length;p++){var m=t[p];if(h&&"Container"===m.type)console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");else{var v=m.input?m.input:r(m,e,i);v.customHitArea=l,v.dropZone=s,v.cursor=o?"pointer":a,m.input=v,n&&this.setDraggable(m),this.queueForInsertion(m)}}return this},setHitAreaCircle:function(i,n,r,s,a){void 0===a&&(a=e);var o=new t(n,r,s);return this.setHitArea(i,o,a)},setHitAreaEllipse:function(t,e,i,n,r,s){void 0===s&&(s=h);var a=new o(e,i,n,r);return this.setHitArea(t,a,s)},setHitAreaFromTexture:function(t,e){void 0===e&&(e=E),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i],s=n.frame,a=0,o=0;n.width?(a=n.width,o=n.height):s&&(a=s.realWidth,o=s.realHeight),"Container"!==n.type||0!==a&&0!==o?0!==a&&0!==o&&(n.input=r(n,new v(0,0,a,o),e),this.queueForInsertion(n)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(t,e,i,n,r,s){void 0===s&&(s=E);var a=new v(e,i,n,r);return this.setHitArea(t,a,s)},setHitAreaTriangle:function(t,e,i,n,r,s,a,o){void 0===o&&(o=O);var h=new _(e,i,n,r,s,a);return this.setHitArea(t,h,o)},enableDebug:function(t,e){void 0===e&&(e=65280);var i=t.input;if(!i||!i.hitArea)return this;var n=i.hitArea,r=n.type,s=i.hitAreaDebug,a=this.systems.add,o=this.systems.updateList;s&&(o.remove(s),s.destroy(),s=null);var h=0,l=0;switch(r){case g.CIRCLE:s=a.arc(0,0,n.radius),h=n.x-n.radius,l=n.y-n.radius;break;case g.ELLIPSE:s=a.ellipse(0,0,n.width,n.height),h=n.x-n.width/2,l=n.y-n.height/2;break;case g.LINE:s=a.line(0,0,n.x1,n.y1,n.x2,n.y2);break;case g.POLYGON:s=a.polygon(0,0,n.points);break;case g.RECTANGLE:s=a.rectangle(0,0,n.width,n.height),h=n.x,l=n.y;break;case g.TRIANGLE:s=a.triangle(0,0,n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)}return s&&(s.isFilled=!1,s.preUpdate=function(){s.setStrokeStyle(1/t.scale,e),s.setDisplayOrigin(t.displayOriginX,t.displayOriginY);var i=t.x,n=t.y,r=t.rotation,a=t.scaleX,o=t.scaleY;if(t.parentContainer){var u=t.getWorldTransformMatrix();i=u.tx,n=u.ty,r=u.rotation,a=u.scaleX,o=u.scaleY}s.setRotation(r),s.setScale(a,o),s.setPosition(i+h,n+l),s.setScrollFactor(t.scrollFactorX,t.scrollFactorY),s.setDepth(t.depth)},o.add(s),i.hitAreaDebug=s),this},removeDebug:function(t){var e=t.input;if(e&&e.hitAreaDebug){var i=e.hitAreaDebug;this.systems.updateList.remove(i),i.destroy(),e.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(t){return this.pollRate=t,this._pollTimer=0,this},setGlobalTopOnly:function(t){return this.manager.globalTopOnly=t,this},setTopOnly:function(t){return this.topOnly=t,this},sortGameObjects:function(t){return t.length<2?t:(this.scene.sys.depthSort(),t.sort(this.sortHandlerGO.bind(this)))},sortHandlerGO:function(t,e){if(t.parentContainer||e.parentContainer){if(t.parentContainer===e.parentContainer)return e.parentContainer.getIndex(e)-t.parentContainer.getIndex(t);if(t.parentContainer===e)return-1;if(e.parentContainer===t)return 1;for(var i=t.getIndexList(),n=e.getIndexList(),r=Math.min(i.length,n.length),s=0;s<r;s++){var a=i[s],o=n[s];if(a!==o)return o-a}return n.length-i.length}return this.displayList.getIndex(e)-this.displayList.getIndex(t)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(t){return this.manager.addPointer(t)},setDefaultCursor:function(t){return this.manager.setDefaultCursor(t),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(l.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var t=0;t<10;t++)this._drag[t]=[],this._over[t]=[];this.removeAllListeners();var e=this.systems.events;e.off(f.TRANSITION_START,this.transitionIn,this),e.off(f.TRANSITION_OUT,this.transitionOut,this),e.off(f.TRANSITION_COMPLETE,this.transitionComplete,this),e.off(f.PRE_UPDATE,this.preUpdate,this),this.manager.events.off(l.GAME_OUT,this.onGameOut,this),this.manager.events.off(l.GAME_OVER,this.onGameOver,this),e.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(l.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});m.register("InputPlugin",T,"input"),module.exports=T;
},{"../geom/circle/Circle":"b8pw","../geom/circle/Contains":"YD4D","../utils/Class":"Q4x4","./const":"YXWV","./CreateInteractiveObject":"tOzC","./CreatePixelPerfectHandler":"Og5v","../math/distance/DistanceBetween":"akRU","../geom/ellipse/Ellipse":"g0eY","../geom/ellipse/Contains":"fwc7","./events":"akNL","eventemitter3":"Clm3","../utils/object/GetFastValue":"xbYy","../geom/const":"wRsF","./InputPluginCache":"xheY","../utils/object/IsPlainObject":"TEos","../plugins/PluginCache":"vXV4","../geom/rectangle/Rectangle":"ACYM","../geom/rectangle/Contains":"VQyb","../scene/events":"Zlz3","../geom/triangle/Triangle":"jTZL","../geom/triangle/Contains":"wKKV"}],"Ja0W":[function(require,module,exports) {
module.exports="keydown";
},{}],"Bjm3":[function(require,module,exports) {
module.exports="keyup";
},{}],"TD7l":[function(require,module,exports) {
module.exports="keycombomatch";
},{}],"EODS":[function(require,module,exports) {
module.exports="keydown-";
},{}],"V7AD":[function(require,module,exports) {
module.exports="keyup-";
},{}],"OnBi":[function(require,module,exports) {
module.exports={ANY_KEY_DOWN:require("./ANY_KEY_DOWN_EVENT"),ANY_KEY_UP:require("./ANY_KEY_UP_EVENT"),COMBO_MATCH:require("./COMBO_MATCH_EVENT"),DOWN:require("./DOWN_EVENT"),KEY_DOWN:require("./KEY_DOWN_EVENT"),KEY_UP:require("./KEY_UP_EVENT"),UP:require("./UP_EVENT")};
},{"./ANY_KEY_DOWN_EVENT":"Ja0W","./ANY_KEY_UP_EVENT":"Bjm3","./COMBO_MATCH_EVENT":"TD7l","./DOWN_EVENT":"YJy4","./KEY_DOWN_EVENT":"EODS","./KEY_UP_EVENT":"V7AD","./UP_EVENT":"KITT"}],"NFlR":[function(require,module,exports) {
var t=require("../../../utils/Class"),i=require("eventemitter3"),s=require("../events"),e=new t({Extends:i,initialize:function(t,s){i.call(this),this.plugin=t,this.keyCode=s,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(t){return this.emitOnRepeat=t,this},onDown:function(t){this.originalEvent=t,this.enabled&&(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.location=t.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(s.DOWN,this,t):(this.isDown=!0,this.isUp=!1,this.timeDown=t.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(s.DOWN,this,t)))},onUp:function(t){this.originalEvent=t,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=t.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(s.UP,this,t))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});module.exports=e;
},{"../../../utils/Class":"Q4x4","eventemitter3":"Clm3","../events":"OnBi"}],"jznd":[function(require,module,exports) {
var e=function(e,t){return t.timeLastMatched=e.timeStamp,t.index++,t.index===t.size||(t.current=t.keyCodes[t.index],!1)};module.exports=e;
},{}],"OPfU":[function(require,module,exports) {
var e=require("./AdvanceKeyCombo"),t=function(t,a){if(a.matched)return!0;var r=!1,m=!1;if(t.keyCode===a.current)if(a.index>0&&a.maxKeyDelay>0){var i=a.timeLastMatched+a.maxKeyDelay;t.timeStamp<=i&&(m=!0,r=e(t,a))}else m=!0,r=e(t,a);return!m&&a.resetOnWrongKey&&(a.index=0,a.current=a.keyCodes[0]),r&&(a.timeLastMatched=t.timeStamp,a.matched=!0,a.timeMatched=t.timeStamp),r};module.exports=t;
},{"./AdvanceKeyCombo":"jznd"}],"q1UZ":[function(require,module,exports) {
var e=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};module.exports=e;
},{}],"z1k4":[function(require,module,exports) {
var e=require("../../../utils/Class"),t=require("../events"),s=require("../../../utils/object/GetFastValue"),i=require("./ProcessKeyCombo"),n=require("./ResetKeyCombo"),h=new e({initialize:function(e,h,r){if(void 0===r&&(r={}),h.length<2)return!1;this.manager=e,this.enabled=!0,this.keyCodes=[];for(var o=0;o<h.length;o++){var a=h[o];"string"==typeof a?this.keyCodes.push(a.toUpperCase().charCodeAt(0)):"number"==typeof a?this.keyCodes.push(a):a.hasOwnProperty("keyCode")&&this.keyCodes.push(a.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=s(r,"resetOnWrongKey",!0),this.maxKeyDelay=s(r,"maxKeyDelay",0),this.resetOnMatch=s(r,"resetOnMatch",!1),this.deleteOnMatch=s(r,"deleteOnMatch",!1);var d=this;this.onKeyDown=function(e){!d.matched&&d.enabled&&i(e,d)&&(d.manager.emit(t.COMBO_MATCH,d,e),d.resetOnMatch?n(d):d.deleteOnMatch&&d.destroy())},this.manager.on(t.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(t.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});module.exports=h;
},{"../../../utils/Class":"Q4x4","../events":"OnBi","../../../utils/object/GetFastValue":"xbYy","./ProcessKeyCombo":"OPfU","./ResetKeyCombo":"q1UZ"}],"AkgQ":[function(require,module,exports) {
var e=require("./KeyCodes"),r={};for(var o in e)r[e[o]]=o;module.exports=r;
},{"./KeyCodes":"JPxJ"}],"HapK":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("eventemitter3"),n=require("./events"),i=require("../../core/events"),s=require("../../utils/object/GetValue"),r=require("../events"),a=require("../InputPluginCache"),u=require("./keys/Key"),o=require("./keys/KeyCodes"),h=require("./combo/KeyCombo"),c=require("./keys/KeyMap"),l=require("../../math/snap/SnapFloor"),d=new e({Extends:t,initialize:function(e){t.call(this),this.game=e.systems.game,this.scene=e.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=e,this.manager=e.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],e.pluginEvents.once(r.BOOT,this.boot,this),e.pluginEvents.on(r.START,this.start,this)},boot:function(){var e=this.settings.input;this.enabled=s(e,"keyboard",!0);var t=s(e,"keyboard.capture",null);t&&this.addCaptures(t),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.useQueue?this.sceneInputPlugin.pluginEvents.on(r.UPDATE,this.update,this):this.sceneInputPlugin.manager.events.on(r.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this),this.game.events.on(i.BLUR,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(e){return this.manager.addCapture(e),this},removeCapture:function(e){return this.manager.removeCapture(e),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:o.UP,down:o.DOWN,left:o.LEFT,right:o.RIGHT,space:o.SPACE,shift:o.SHIFT})},addKeys:function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1);var i={};if("string"==typeof e){e=e.split(",");for(var s=0;s<e.length;s++){var r=e[s].trim();r&&(i[r]=this.addKey(r,t,n))}}else for(var a in e)i[a]=this.addKey(e[a],t,n);return i},addKey:function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1);var i=this.keys;if(e instanceof u){var s=i.indexOf(e);return s>-1?i[s]=e:i[e.keyCode]=e,t&&this.addCapture(e.keyCode),e.setEmitOnRepeat(n),e}return"string"==typeof e&&(e=o[e.toUpperCase()]),i[e]||(i[e]=new u(this,e),t&&this.addCapture(e),i[e].setEmitOnRepeat(n)),i[e]},removeKey:function(e,t){void 0===t&&(t=!1);var n,i=this.keys;if(e instanceof u){var s=i.indexOf(e);s>-1&&(n=this.keys[s],this.keys[s]=void 0)}else"string"==typeof e&&(e=o[e.toUpperCase()]);return i[e]&&(n=i[e],i[e]=void 0),n&&(n.plugin=null,t&&n.destroy()),this},createCombo:function(e,t){return new h(this,e,t)},checkDown:function(e,t){if(this.enabled&&e.isDown){var n=l(this.time-e.timeDown,t);if(n>e._tick)return e._tick=n,!0}return!1},update:function(){var e=this.manager.queue,t=e.length;if(this.isActive()&&0!==t)for(var i=this.keys,s=0;s<t;s++){var r=e[s],a=r.keyCode,u=i[a],o=!1;void 0===r.cancelled&&(r.cancelled=0,r.stopImmediatePropagation=function(){r.cancelled=1},r.stopPropagation=function(){r.cancelled=-1}),-1!==r.cancelled&&("keydown"===r.type?(u&&(o=u.isDown,u.onDown(r)),r.cancelled||u&&o||(c[a]&&(this.emit(n.KEY_DOWN+c[a],r),this.emit("keydown_"+c[a],r)),r.cancelled||this.emit(n.ANY_KEY_DOWN,r))):(u&&u.onUp(r),r.cancelled||(c[a]&&(this.emit(n.KEY_UP+c[a],r),this.emit("keyup_"+c[a],r)),r.cancelled||this.emit(n.ANY_KEY_UP,r))),1===r.cancelled&&(r.cancelled=0))}},resetKeys:function(){for(var e=this.keys,t=0;t<e.length;t++)e[t]&&e[t].reset();return this},shutdown:function(){this.resetKeys(),this.sceneInputPlugin.manager.useQueue?this.sceneInputPlugin.pluginEvents.off(r.UPDATE,this.update,this):this.sceneInputPlugin.manager.events.off(r.MANAGER_PROCESS,this.update,this),this.game.events.off(i.BLUR,this.resetKeys),this.removeAllListeners(),this.queue=[]},destroy:function(){this.shutdown();for(var e=this.keys,t=0;t<e.length;t++)e[t]&&e[t].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});a.register("KeyboardPlugin",d,"keyboard","keyboard","inputKeyboard"),module.exports=d;
},{"../../utils/Class":"Q4x4","eventemitter3":"Clm3","./events":"OnBi","../../core/events":"ZroQ","../../utils/object/GetValue":"FWyS","../events":"akNL","../InputPluginCache":"xheY","./keys/Key":"NFlR","./keys/KeyCodes":"JPxJ","./combo/KeyCombo":"z1k4","./keys/KeyMap":"AkgQ","../../math/snap/SnapFloor":"mSaS"}],"oAjh":[function(require,module,exports) {
var n=function(n){return!!n._justDown&&(n._justDown=!1,!0)};module.exports=n;
},{}],"BssW":[function(require,module,exports) {
var t=function(t){return!!t._justUp&&(t._justUp=!1,!0)};module.exports=t;
},{}],"vM5h":[function(require,module,exports) {
var o=function(o,e){void 0===e&&(e=50);var i=o.plugin.game.loop.time-o.timeDown;return o.isDown&&i<e};module.exports=o;
},{}],"RgqI":[function(require,module,exports) {
var e=function(e,i){void 0===i&&(i=50);var o=e.plugin.game.loop.time-e.timeUp;return e.isUp&&o<i};module.exports=e;
},{}],"UFFK":[function(require,module,exports) {
module.exports={Events:require("./events"),KeyboardManager:require("./KeyboardManager"),KeyboardPlugin:require("./KeyboardPlugin"),Key:require("./keys/Key"),KeyCodes:require("./keys/KeyCodes"),KeyCombo:require("./combo/KeyCombo"),JustDown:require("./keys/JustDown"),JustUp:require("./keys/JustUp"),DownDuration:require("./keys/DownDuration"),UpDuration:require("./keys/UpDuration")};
},{"./events":"OnBi","./KeyboardManager":"MB9P","./KeyboardPlugin":"HapK","./keys/Key":"NFlR","./keys/KeyCodes":"JPxJ","./combo/KeyCombo":"z1k4","./keys/JustDown":"oAjh","./keys/JustUp":"BssW","./keys/DownDuration":"vM5h","./keys/UpDuration":"RgqI"}],"lDDR":[function(require,module,exports) {
module.exports={MouseManager:require("./MouseManager")};
},{"./MouseManager":"eRjz"}],"yhpv":[function(require,module,exports) {
module.exports={TouchManager:require("./TouchManager")};
},{"./TouchManager":"H9m4"}],"hxcE":[function(require,module,exports) {
var e=require("./const"),r=require("../utils/object/Extend"),u={CreateInteractiveObject:require("./CreateInteractiveObject"),Events:require("./events"),Gamepad:require("./gamepad"),InputManager:require("./InputManager"),InputPlugin:require("./InputPlugin"),InputPluginCache:require("./InputPluginCache"),Keyboard:require("./keyboard"),Mouse:require("./mouse"),Pointer:require("./Pointer"),Touch:require("./touch")};u=r(!1,u,e),module.exports=u;
},{"./const":"YXWV","../utils/object/Extend":"CtVZ","./CreateInteractiveObject":"tOzC","./events":"akNL","./gamepad":"JCpt","./InputManager":"hfaV","./InputPlugin":"OuX8","./InputPluginCache":"xheY","./keyboard":"UFFK","./mouse":"lDDR","./Pointer":"FoB9","./touch":"yhpv"}],"l7Fg":[function(require,module,exports) {
var E={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};module.exports=E;
},{}],"GkbS":[function(require,module,exports) {
var t=function(t,r){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:r+t.url)};module.exports=t;
},{}],"ZCdv":[function(require,module,exports) {
var e=function(e,d,i,o,r,v){return void 0===e&&(e=""),void 0===d&&(d=!0),void 0===i&&(i=""),void 0===o&&(o=""),void 0===r&&(r=0),void 0===v&&(v=!1),{responseType:e,async:d,user:i,password:o,timeout:r,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:v}};module.exports=e;
},{}],"NKeK":[function(require,module,exports) {
var global = arguments[3];
var r=arguments[3],e=require("../utils/object/Extend"),i=require("./XHRSettings"),t=function(r,t){var n=void 0===r?i():e({},r);if(t)for(var o in t)void 0!==t[o]&&(n[o]=t[o]);return n};module.exports=t;
},{"../utils/object/Extend":"CtVZ","./XHRSettings":"ZCdv"}],"yBUk":[function(require,module,exports) {
var e=require("./MergeXHRSettings"),r=function(r,s){var t=e(s,r.xhrSettings),d=new XMLHttpRequest;if(d.open("GET",r.src,t.async,t.user,t.password),d.responseType=r.xhrSettings.responseType,d.timeout=t.timeout,t.headers)for(var i in t.headers)d.setRequestHeader(i,t.headers[i]);return t.header&&t.headerValue&&d.setRequestHeader(t.header,t.headerValue),t.requestedWith&&d.setRequestHeader("X-Requested-With",t.requestedWith),t.overrideMimeType&&d.overrideMimeType(t.overrideMimeType),t.withCredentials&&(d.withCredentials=!0),d.onload=r.onLoad.bind(r,d),d.onerror=r.onError.bind(r,d),d.onprogress=r.onProgress.bind(r),d.send(),d};module.exports=r;
},{"./MergeXHRSettings":"NKeK"}],"w4Yx":[function(require,module,exports) {
var t=require("../utils/Class"),e=require("./const"),i=require("./events"),s=require("../utils/object/GetFastValue"),r=require("./GetURL"),o=require("./MergeXHRSettings"),h=require("./XHRLoader"),n=require("./XHRSettings"),a=new t({initialize:function(t,i){this.loader=t,this.cache=s(i,"cache",!1),this.type=s(i,"type",!1),this.key=s(i,"key",!1);var r=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+r),!this.type||!this.key)throw new Error("Error calling 'Loader."+this.type+"' invalid key provided.");this.url=s(i,"url"),void 0===this.url?this.url=t.path+r+"."+s(i,"extension",""):"function"!=typeof this.url&&0!==this.url.indexOf("blob:")&&0!==this.url.indexOf("data:")&&(this.url=t.path+this.url),this.src="",this.xhrSettings=n(s(i,"responseType",void 0)),s(i,"xhrSettings",!1)&&(this.xhrSettings=o(this.xhrSettings,s(i,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?e.FILE_POPULATED:e.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=s(i,"config",{}),this.multiFile,this.linkFile},setLink:function(t){this.linkFile=t,t.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===e.FILE_POPULATED?this.loader.nextFile(this,!0):(this.src=r(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=h(this,this.loader.xhr))},onLoad:function(t,e){var i=t.responseURL&&0===t.responseURL.indexOf("file://")&&0===e.target.status,s=!(e.target&&200!==e.target.status)||i;4===t.readyState&&t.status>=400&&t.status<=599&&(s=!1),this.resetXHR(),this.loader.nextFile(this,s)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(i.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=e.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=e.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=e.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(t){void 0===t&&(t=this.data);var e=this.key,s=this.type;this.loader.emit(i.FILE_COMPLETE,e,s,t),this.loader.emit(i.FILE_KEY_COMPLETE+s+"-"+e,e,s,t),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});a.createObjectURL=function(t,e,i){if("function"==typeof URL)t.src=URL.createObjectURL(e);else{var s=new FileReader;s.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(e.type||i)+";base64,"+s.result.split(",")[1]},s.onerror=t.onerror,s.readAsDataURL(e)}},a.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},module.exports=a;
},{"../utils/Class":"Q4x4","./const":"l7Fg","./events":"bOrI","../utils/object/GetFastValue":"xbYy","./GetURL":"GkbS","./MergeXHRSettings":"NKeK","./XHRLoader":"yBUk","./XHRSettings":"ZCdv"}],"fKSs":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),s=require("../File"),i=require("../FileTypesManager"),r=require("../../utils/object/GetFastValue"),a=require("../../utils/object/GetValue"),n=require("../../utils/object/IsPlainObject"),o=new e({Extends:s,initialize:function(e,i,o,l,h){var u="json";if(n(i)){var c=i;i=r(c,"key"),o=r(c,"url"),l=r(c,"xhrSettings"),u=r(c,"extension",u),h=r(c,"dataKey",h)}var d={type:"json",cache:e.cacheManager.json,extension:u,responseType:"text",key:i,url:o,xhrSettings:l,config:h};s.call(this,e,d),n(o)&&(this.data=h?a(o,h):o,this.state=t.FILE_POPULATED)},onProcess:function(){if(this.state!==t.FILE_POPULATED){this.state=t.FILE_PROCESSING;var e=JSON.parse(this.xhrLoader.responseText),s=this.config;this.data="string"==typeof s?a(e,s,e):e}this.onProcessComplete()}});i.register("json",function(e,t,s,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new o(this,e[r]));else this.addFile(new o(this,e,t,i,s));return this}),module.exports=o;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../File":"w4Yx","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","../../utils/object/GetValue":"FWyS","../../utils/object/IsPlainObject":"TEos"}],"Ze3k":[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("../FileTypesManager"),t=require("./JSONFile.js"),s=require("../events"),n=new e({Extends:t,initialize:function(e,i,s,n,r){t.call(this,e,i,s,n,r),this.type="animationJSON"},onProcess:function(){this.loader.once(s.POST_PROCESS,this.onLoadComplete,this),t.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});i.register("animation",function(e,i,t,s){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new n(this,e[r]));else this.addFile(new n(this,e,i,s,t));return this}),module.exports=n;
},{"../../utils/Class":"Q4x4","../FileTypesManager":"KCw4","./JSONFile.js":"fKSs","../events":"bOrI"}],"DJw9":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),i=require("../File"),a=require("../FileTypesManager"),s=require("../../utils/object/GetFastValue"),r=require("../../utils/object/IsPlainObject"),n=new e({Extends:i,initialize:function e(t,a,n,o,h){var d,c="png";if(r(a)){var l=a;a=s(l,"key"),n=s(l,"url"),d=s(l,"normalMap"),o=s(l,"xhrSettings"),c=s(l,"extension",c),h=s(l,"frameConfig")}Array.isArray(n)&&(d=n[1],n=n[0]);var g={type:"image",cache:t.textureManager,extension:c,responseType:"blob",key:a,url:n,xhrSettings:o,config:h};if(i.call(this,t,g),d){var u=new e(t,this.key,d,o,h);u.type="normalMap",this.setLink(u),t.addFile(u)}},onProcess:function(){this.state=t.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var e=this;this.data.onload=function(){i.revokeObjectURL(e.data),e.onProcessComplete()},this.data.onerror=function(){i.revokeObjectURL(e.data),e.onProcessError()},i.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var e,i=this.linkFile;i&&i.state===t.FILE_COMPLETE?(e="image"===this.type?this.cache.addImage(this.key,this.data,i.data):this.cache.addImage(i.key,i.data,this.data),this.pendingDestroy(e),i.pendingDestroy(e)):i||(e=this.cache.addImage(this.key,this.data),this.pendingDestroy(e))}});a.register("image",function(e,t,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)this.addFile(new n(this,e[a]));else this.addFile(new n(this,e,t,i));return this}),module.exports=n;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../File":"w4Yx","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","../../utils/object/IsPlainObject":"TEos"}],"gd4K":[function(require,module,exports) {
var i=require("../utils/Class"),e=new i({initialize:function(i,e,t,s){this.loader=i,this.type=e,this.key=t,this.multiKeyIndex=i.multiKeyIndex++,this.files=s,this.complete=!1,this.pending=s.length,this.failed=0,this.config={},this.baseURL=i.baseURL,this.path=i.path,this.prefix=i.prefix;for(var n=0;n<s.length;n++)s[n].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(i){return this.files.push(i),i.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(i){-1!==this.files.indexOf(i)&&this.pending--},onFileFailed:function(i){-1!==this.files.indexOf(i)&&this.failed++}});module.exports=e;
},{"../utils/Class":"Q4x4"}],"Q44H":[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("../FileTypesManager"),t=require("../../utils/object/GetFastValue"),s=require("./ImageFile.js"),a=require("../../utils/object/IsPlainObject"),l=require("./JSONFile.js"),r=require("../MultiFile.js"),n=new e({Extends:r,initialize:function(e,i,n,u,o,h){var d,f;if(a(i)){var c=i;i=t(c,"key"),d=new s(e,{key:i,url:t(c,"textureURL"),extension:t(c,"textureExtension","png"),normalMap:t(c,"normalMap"),xhrSettings:t(c,"textureXhrSettings")}),f=new l(e,{key:i,url:t(c,"atlasURL"),extension:t(c,"atlasExtension","json"),xhrSettings:t(c,"atlasXhrSettings")})}else d=new s(e,i,n,o),f=new l(e,i,u,h);d.linkFile?r.call(this,e,"atlasjson",i,[d,f,d.linkFile]):r.call(this,e,"atlasjson",i,[d,f])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],i=this.files[1],t=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(e.key,e.data,i.data,t),i.addToCache(),this.complete=!0}}});i.register("atlas",function(e,i,t,s,a){var l;if(Array.isArray(e))for(var r=0;r<e.length;r++)l=new n(this,e[r]),this.addFile(l.files);else l=new n(this,e,i,t,s,a),this.addFile(l.files);return this}),module.exports=n;
},{"../../utils/Class":"Q4x4","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","./ImageFile.js":"DJw9","../../utils/object/IsPlainObject":"TEos","./JSONFile.js":"fKSs","../MultiFile.js":"gd4K"}],"PH8F":[function(require,module,exports) {
var e=require("../../utils/Class"),r=require("../const"),t=require("../File"),i=require("../FileTypesManager"),s=require("../../utils/object/GetFastValue"),n=require("../../utils/object/IsPlainObject"),a=require("../../dom/ParseXML"),l=new e({Extends:t,initialize:function(e,r,i,a){var l="xml";if(n(r)){var o=r;r=s(o,"key"),i=s(o,"url"),a=s(o,"xhrSettings"),l=s(o,"extension",l)}var h={type:"xml",cache:e.cacheManager.xml,extension:l,responseType:"text",key:r,url:i,xhrSettings:a};t.call(this,e,h)},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=a(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});i.register("xml",function(e,r,t){if(Array.isArray(e))for(var i=0;i<e.length;i++)this.addFile(new l(this,e[i]));else this.addFile(new l(this,e,r,t));return this}),module.exports=l;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../File":"w4Yx","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","../../utils/object/IsPlainObject":"TEos","../../dom/ParseXML":"CpwE"}],"iXHI":[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("../FileTypesManager"),t=require("../../utils/object/GetFastValue"),s=require("./ImageFile.js"),a=require("../../utils/object/IsPlainObject"),l=require("../MultiFile.js"),r=require("./XMLFile.js"),n=new e({Extends:l,initialize:function(e,i,n,u,h,o){var d,x;if(a(i)){var f=i;i=t(f,"key"),d=new s(e,{key:i,url:t(f,"textureURL"),extension:t(f,"textureExtension","png"),normalMap:t(f,"normalMap"),xhrSettings:t(f,"textureXhrSettings")}),x=new r(e,{key:i,url:t(f,"atlasURL"),extension:t(f,"atlasExtension","xml"),xhrSettings:t(f,"atlasXhrSettings")})}else d=new s(e,i,n,h),x=new r(e,i,u,o);d.linkFile?l.call(this,e,"atlasxml",i,[d,x,d.linkFile]):l.call(this,e,"atlasxml",i,[d,x])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],i=this.files[1],t=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(e.key,e.data,i.data,t),i.addToCache(),this.complete=!0}}});i.register("atlasXML",function(e,i,t,s,a){var l;if(Array.isArray(e))for(var r=0;r<e.length;r++)l=new n(this,e[r]),this.addFile(l.files);else l=new n(this,e,i,t,s,a),this.addFile(l.files);return this}),module.exports=n;
},{"../../utils/Class":"Q4x4","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","./ImageFile.js":"DJw9","../../utils/object/IsPlainObject":"TEos","../MultiFile.js":"gd4K","./XMLFile.js":"PH8F"}],"Vodb":[function(require,module,exports) {
var t=require("../../utils/Class"),e=require("../events"),i=require("../File"),s=require("../../utils/object/GetFastValue"),a=require("../GetURL"),o=require("../../utils/object/IsPlainObject"),l=new t({Extends:i,initialize:function(t,e,a,l){if(o(e)){var r=e;e=s(r,"key"),l=s(r,"config",l)}var n={type:"audio",cache:t.cacheManager.audio,extension:a.type,key:e,url:a.url,config:l};i.call(this,t,n),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];e.oncanplaythrough=null,e.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(t){var i=t.target;i.oncanplaythrough=null,i.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(e.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var t=this.config&&this.config.instances||1;this.filesTotal=t,this.filesLoaded=0,this.percentComplete=0;for(var e=0;e<t;e++){var i=new Audio;i.dataset||(i.dataset={}),i.dataset.name=this.key+("0"+e).slice(-2),i.dataset.used="false",this.locked?i.dataset.locked="true":(i.dataset.locked="false",i.preload="auto",i.oncanplaythrough=this.onProgress.bind(this),i.onerror=this.onError.bind(this)),this.data.push(i)}for(e=0;e<this.data.length;e++)(i=this.data[e]).src=a(this,this.loader.baseURL),this.locked||i.load();this.locked&&setTimeout(this.onLoad.bind(this))}});module.exports=l;
},{"../../utils/Class":"Q4x4","../events":"bOrI","../File":"w4Yx","../../utils/object/GetFastValue":"xbYy","../GetURL":"GkbS","../../utils/object/IsPlainObject":"TEos"}],"tcMb":[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("../const"),r=require("../File"),t=require("../FileTypesManager"),o=require("../../utils/object/GetFastValue"),a=require("./HTML5AudioFile"),n=require("../../utils/object/IsPlainObject"),s=new e({Extends:r,initialize:function(e,i,t,a,s){if(n(i)){var u=i;i=o(u,"key"),a=o(u,"xhrSettings"),s=o(u,"context",s)}var c={type:"audio",cache:e.cacheManager.audio,extension:t.type,responseType:"arraybuffer",key:i,url:t.url,xhrSettings:a,config:{context:s}};r.call(this,e,c)},onProcess:function(){this.state=i.FILE_PROCESSING;var e=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(i){e.data=i,e.onProcessComplete()},function(i){console.error("Error decoding audio: "+this.key+" - ",i?i.message:null),e.onProcessError()}),this.config.context=null}});s.create=function(e,i,r,t,u){var c=e.systems.game,d=c.config.audio,l=c.device.audio;n(i)&&(r=o(i,"url",[]),t=o(i,"config",{}));var f=s.getAudioURL(c,r);return f?!l.webAudio||d&&d.disableWebAudio?new a(e,i,f,t):new s(e,i,f,u,c.sound.context):null},s.getAudioURL=function(e,i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++){var t=o(i[r],"url",i[r]);if(0===t.indexOf("blob:")||0===t.indexOf("data:"))return{url:t,type:""};var a=t.match(/\.([a-zA-Z0-9]+)($|\?)/);if(a=o(i[r],"type",a?a[1]:"").toLowerCase(),e.device.audio[a])return{url:t,type:a}}return null},t.register("audio",function(e,i,r,t){var o,a=this.systems.game,n=a.config.audio,u=a.device.audio;if(n&&n.noAudio||!u.webAudio&&!u.audioData)return this;if(Array.isArray(e))for(var c=0;c<e.length;c++)(o=s.create(this,e[c]))&&this.addFile(o);else(o=s.create(this,e,i,r,t))&&this.addFile(o);return this}),module.exports=s;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../File":"w4Yx","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","./HTML5AudioFile":"Vodb","../../utils/object/IsPlainObject":"TEos"}],"JOsE":[function(require,module,exports) {
var i=require("./AudioFile.js"),e=require("../../utils/Class"),s=require("../FileTypesManager"),t=require("../../utils/object/GetFastValue"),a=require("../../utils/object/IsPlainObject"),o=require("./JSONFile.js"),r=require("../MultiFile.js"),n=new e({Extends:r,initialize:function(e,s,n,d,u,l,h){if(a(s)){var c=s;s=t(c,"key"),n=t(c,"jsonURL"),d=t(c,"audioURL"),u=t(c,"audioConfig"),l=t(c,"audioXhrSettings"),h=t(c,"jsonXhrSettings")}var f;if(d){var g=i.create(e,s,d,u,l);g&&(f=new o(e,s,n,h),r.call(this,e,"audiosprite",s,[g,f]),this.config.resourceLoad=!1)}else f=new o(e,s,n,h),r.call(this,e,"audiosprite",s,[f]),this.config.resourceLoad=!0,this.config.audioConfig=u,this.config.audioXhrSettings=l},onFileComplete:function(e){if(-1!==this.files.indexOf(e)&&(this.pending--,this.config.resourceLoad&&"json"===e.type&&e.data.hasOwnProperty("resources"))){var s=e.data.resources,a=t(this.config,"audioConfig"),o=t(this.config,"audioXhrSettings"),r=i.create(this.loader,e.key,s,a,o);r&&(this.addToMultiFile(r),this.loader.addFile(r))}},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],e=this.files[1];i.addToCache(),e.addToCache(),this.complete=!0}}});s.register("audioSprite",function(i,e,s,t,a,o){var r,d=this.systems.game,u=d.config.audio,l=d.device.audio;if(u&&u.noAudio||!l.webAudio&&!l.audioData)return this;if(Array.isArray(i))for(var h=0;h<i.length;h++)(r=new n(this,i[h])).files&&this.addFile(r.files);else(r=new n(this,i,e,s,t,a,o)).files&&this.addFile(r.files);return this});
},{"./AudioFile.js":"tcMb","../../utils/Class":"Q4x4","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","../../utils/object/IsPlainObject":"TEos","./JSONFile.js":"fKSs","../MultiFile.js":"gd4K"}],"JHAS":[function(require,module,exports) {
var e=require("../../utils/Class"),r=require("../const"),i=require("../File"),t=require("../FileTypesManager"),s=require("../../utils/object/GetFastValue"),a=require("../../utils/object/IsPlainObject"),n=new e({Extends:i,initialize:function(e,r,t,n,o){var h="bin";if(a(r)){var l=r;r=s(l,"key"),t=s(l,"url"),n=s(l,"xhrSettings"),h=s(l,"extension",h),o=s(l,"dataType",o)}var u={type:"binary",cache:e.cacheManager.binary,extension:h,responseType:"arraybuffer",key:r,url:t,xhrSettings:n,config:{dataType:o}};i.call(this,e,u)},onProcess:function(){this.state=r.FILE_PROCESSING;var e=this.config.dataType;this.data=e?new e(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});t.register("binary",function(e,r,i,t){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new n(this,e[s]));else this.addFile(new n(this,e,r,t,i));return this}),module.exports=n;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../File":"w4Yx","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","../../utils/object/IsPlainObject":"TEos"}],"WUMz":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../FileTypesManager"),i=require("../../utils/object/GetFastValue"),a=require("./ImageFile.js"),r=require("../../utils/object/IsPlainObject"),s=require("../MultiFile.js"),n=require("../../gameobjects/bitmaptext/ParseXMLBitmapFont.js"),l=require("./XMLFile.js"),o=new e({Extends:s,initialize:function(e,t,n,o,u,h){var d,f;if(r(t)){var c=t;t=i(c,"key"),d=new a(e,{key:t,url:i(c,"textureURL"),extension:i(c,"textureExtension","png"),normalMap:i(c,"normalMap"),xhrSettings:i(c,"textureXhrSettings")}),f=new l(e,{key:t,url:i(c,"fontDataURL"),extension:i(c,"fontDataExtension","xml"),xhrSettings:i(c,"fontDataXhrSettings")})}else d=new a(e,t,n,u),f=new l(e,t,o,h);d.linkFile?s.call(this,e,"bitmapfont",t,[d,f,d.linkFile]):s.call(this,e,"bitmapfont",t,[d,f])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1];e.addToCache(),t.addToCache(),this.loader.cacheManager.bitmapFont.add(e.key,{data:n(t.data),texture:e.key,frame:null}),this.complete=!0}}});t.register("bitmapFont",function(e,t,i,a,r){var s;if(Array.isArray(e))for(var n=0;n<e.length;n++)s=new o(this,e[n]),this.addFile(s.files);else s=new o(this,e,t,i,a,r),this.addFile(s.files);return this}),module.exports=o;
},{"../../utils/Class":"Q4x4","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","./ImageFile.js":"DJw9","../../utils/object/IsPlainObject":"TEos","../MultiFile.js":"gd4K","../../gameobjects/bitmaptext/ParseXMLBitmapFont.js":"UcRl","./XMLFile.js":"PH8F"}],"QIQP":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),s=require("../File"),i=require("../FileTypesManager"),r=require("../../utils/object/GetFastValue"),n=require("../../utils/object/IsPlainObject"),a=new e({Extends:s,initialize:function(e,t,i,a){var l="css";if(n(t)){var o=t;t=r(o,"key"),i=r(o,"url"),a=r(o,"xhrSettings"),l=r(o,"extension",l)}var h={type:"script",cache:!1,extension:l,responseType:"text",key:t,url:i,xhrSettings:a};s.call(this,e,h)},onProcess:function(){this.state=t.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});i.register("css",function(e,t,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)this.addFile(new a(this,e[i]));else this.addFile(new a(this,e,t,s));return this}),module.exports=a;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../File":"w4Yx","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","../../utils/object/IsPlainObject":"TEos"}],"hgm4":[function(require,module,exports) {
var e=require("../../utils/Class"),r=require("../const"),t=require("../File"),i=require("../FileTypesManager"),s=require("../../utils/object/GetFastValue"),a=require("../../utils/object/IsPlainObject"),n=require("../../display/shader/BaseShader"),h=new e({Extends:t,initialize:function(e,r,i,n,h){var o="glsl";if(a(r)){var c=r;r=s(c,"key"),i=s(c,"url"),n=s(c,"shaderType","fragment"),h=s(c,"xhrSettings"),o=s(c,"extension",o)}else void 0===n&&(n="fragment");var d={type:"glsl",cache:e.cacheManager.shader,extension:o,responseType:"text",key:r,url:i,config:{shaderType:n},xhrSettings:h};t.call(this,e,d)},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e=this.data.split("\n"),r=this.extractBlock(e,0);if(r)for(;r;){var t=this.getShaderName(r.header),i=this.getShaderType(r.header),s=this.getShaderUniforms(r.header),a=r.shader;if(this.cache.has(t)){var h=this.cache.get(t);"fragment"===i?h.fragmentSrc=a:h.vertexSrc=a,h.uniforms||(h.uniforms=s)}else"fragment"===i?this.cache.add(t,new n(t,a,"",s)):this.cache.add(t,new n(t,"",a,s));r=this.extractBlock(e,r.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new n(this.key,this.data)):this.cache.add(this.key,new n(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(e){for(var r=0;r<e.length;r++){var t=e[r].trim();if("name:"===t.substring(0,5))return t.substring(5).trim()}return this.key},getShaderType:function(e){for(var r=0;r<e.length;r++){var t=e[r].trim();if("type:"===t.substring(0,5))return t.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(e){for(var r={},t=0;t<e.length;t++){var i=e[t].trim();if("uniform."===i.substring(0,8)){var s=i.indexOf(":");if(s){var a=i.substring(8,s);try{r[a]=JSON.parse(i.substring(s+1))}catch(n){console.warn("Invalid uniform JSON: "+a)}}}}return r},extractBlock:function(e,r){for(var t=-1,i=-1,s=-1,a=!1,n=!1,h=[],o=[],c=r;c<e.length;c++){var d=e[c].trim();if("---"===d)if(-1===t)t=c,a=!0;else{if(!a){n=!1;break}i=c,a=!1,n=!0}else a?h.push(d):n&&(o.push(d),s=c)}return a||-1===i?null:{header:h,shader:o.join("\n"),offset:s}}});i.register("glsl",function(e,r,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new h(this,e[s]));else this.addFile(new h(this,e,r,t,i));return this}),module.exports=h;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../File":"w4Yx","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","../../utils/object/IsPlainObject":"TEos","../../display/shader/BaseShader":"SUyJ"}],"uYTf":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),i=require("../File"),r=require("../FileTypesManager"),s=require("../../utils/object/GetFastValue"),n=require("../../utils/object/IsPlainObject"),a=new e({Extends:i,initialize:function(e,t,r,a){var l="html";if(n(t)){var h=t;t=s(h,"key"),r=s(h,"url"),a=s(h,"xhrSettings"),l=s(h,"extension",l)}var o={type:"text",cache:e.cacheManager.html,extension:l,responseType:"text",key:t,url:r,xhrSettings:a};i.call(this,e,o)},onProcess:function(){this.state=t.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});r.register("html",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new a(this,e[r]));else this.addFile(new a(this,e,t,i));return this}),module.exports=a;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../File":"w4Yx","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","../../utils/object/IsPlainObject":"TEos"}],"JTII":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),i=require("../File"),s=require("../FileTypesManager"),r=require("../../utils/object/GetFastValue"),h=require("../../utils/object/IsPlainObject"),a=new e({Extends:i,initialize:function(e,t,s,a,n,o){void 0===a&&(a=512),void 0===n&&(n=512);var c="html";if(h(t)){var d=t;t=r(d,"key"),s=r(d,"url"),o=r(d,"xhrSettings"),c=r(d,"extension",c),a=r(d,"width",a),n=r(d,"height",n)}var u={type:"html",cache:e.textureManager,extension:c,responseType:"text",key:t,url:s,xhrSettings:o,config:{width:a,height:n}};i.call(this,e,u)},onProcess:function(){this.state=t.FILE_PROCESSING;var e=this.config.width,s=this.config.height,r=[];r.push('<svg width="'+e+'px" height="'+s+'px" viewBox="0 0 '+e+" "+s+'" xmlns="http://www.w3.org/2000/svg">'),r.push('<foreignObject width="100%" height="100%">'),r.push('<body xmlns="http://www.w3.org/1999/xhtml">'),r.push(this.xhrLoader.responseText),r.push("</body>"),r.push("</foreignObject>"),r.push("</svg>");var h=[r.join("\n")],a=this;try{var n=new window.Blob(h,{type:"image/svg+xml;charset=utf-8"})}catch(o){return a.state=t.FILE_ERRORED,void a.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){i.revokeObjectURL(a.data),a.onProcessComplete()},this.data.onerror=function(){i.revokeObjectURL(a.data),a.onProcessError()},i.createObjectURL(this.data,n,"image/svg+xml")},addToCache:function(){var e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}});s.register("htmlTexture",function(e,t,i,s,r){if(Array.isArray(e))for(var h=0;h<e.length;h++)this.addFile(new a(this,e[h]));else this.addFile(new a(this,e,t,i,s,r));return this}),module.exports=a;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../File":"w4Yx","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","../../utils/object/IsPlainObject":"TEos"}],"gx99":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../FileTypesManager"),i=require("../../utils/object/GetFastValue"),s=require("./ImageFile.js"),a=require("../../utils/object/IsPlainObject"),r=require("./JSONFile.js"),l=require("../MultiFile.js"),n=new e({Extends:l,initialize:function(e,t,s,n,h,u,f){if(a(t)){var o=t;t=i(o,"key"),s=i(o,"url",!1)?i(o,"url"):i(o,"atlasURL"),u=i(o,"xhrSettings"),n=i(o,"path"),h=i(o,"baseURL"),f=i(o,"textureXhrSettings")}var d=new r(e,t,s,u);l.call(this,e,"multiatlas",t,[d]),this.config.path=n,this.config.baseURL=h,this.config.textureXhrSettings=f},onFileComplete:function(e){if(-1!==this.files.indexOf(e)&&(this.pending--,"json"===e.type&&e.data.hasOwnProperty("textures"))){var t=e.data.textures,a=this.config,r=this.loader,l=r.baseURL,n=r.path,h=r.prefix,u=i(a,"baseURL",this.baseURL),f=i(a,"path",this.path),o=i(a,"prefix",this.prefix),d=i(a,"textureXhrSettings");r.setBaseURL(u),r.setPath(f),r.setPrefix(o);for(var p=0;p<t.length;p++){var g=t[p].image,x="MA"+this.multiKeyIndex+"_"+g,c=new s(r,x,g,d);if(this.addToMultiFile(c),r.addFile(c),t[p].normalMap){var y=new s(r,x,t[p].normalMap,d);y.type="normalMap",c.setLink(y),this.addToMultiFile(y),r.addFile(y)}}r.setBaseURL(l),r.setPath(n),r.setPrefix(h)}},addToCache:function(){if(this.isReadyToProcess()){for(var e=this.files[0],t=[],i=[],s=[],a=1;a<this.files.length;a++){var r=this.files[a];if("normalMap"!==r.type)for(var l=r.key.indexOf("_"),n=r.key.substr(l+1),h=r.data,u=0;u<e.data.textures.length;u++){var f=e.data.textures[u];if(f.image===n){i.push(h),t.push(f),r.linkFile&&s.push(r.linkFile.data);break}}}for(0===s.length&&(s=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,i,t,s),this.complete=!0,a=0;a<this.files.length;a++)this.files[a].pendingDestroy()}}});t.register("multiatlas",function(e,t,i,s,a){var r;if(Array.isArray(e))for(var l=0;l<e.length;l++)r=new n(this,e[l]),this.addFile(r.files);else r=new n(this,e,t,i,s,a),this.addFile(r.files);return this}),module.exports=n;
},{"../../utils/Class":"Q4x4","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","./ImageFile.js":"DJw9","../../utils/object/IsPlainObject":"TEos","./JSONFile.js":"fKSs","../MultiFile.js":"gd4K"}],"t4c2":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),i=require("../File"),s=require("../FileTypesManager"),r=require("../../utils/object/GetFastValue"),a=require("../../utils/object/IsPlainObject"),n=new e({Extends:i,initialize:function(e,t,s,n){var h="js";if(a(t)){var l=t;t=r(l,"key"),s=r(l,"url"),n=r(l,"xhrSettings"),h=r(l,"extension",h)}var o={type:"script",cache:!1,extension:h,responseType:"text",key:t,url:s,xhrSettings:n};i.call(this,e,o)},onProcess:function(){this.state=t.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});s.register("script",function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new n(this,e[s]));else this.addFile(new n(this,e,t,i));return this}),module.exports=n;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../File":"w4Yx","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","../../utils/object/IsPlainObject":"TEos"}],"m2JB":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../FileTypesManager"),i=require("../../utils/object/GetFastValue"),r=require("../../utils/object/IsPlainObject"),s=require("../MultiFile.js"),a=require("./ScriptFile.js"),n=new e({Extends:s,initialize:function(e,t,n,l){var o="js",u=[];if(r(t)){var c=t;t=i(c,"key"),n=i(c,"url"),l=i(c,"xhrSettings"),o=i(c,"extension",o)}Array.isArray(n)||(n=[n]);for(var d=0;d<n.length;d++){var h=new a(e,{key:t+"_"+d.toString(),url:n[d],extension:o,xhrSettings:l});h.onProcess=function(){this.onProcessComplete()},u.push(h)}s.call(this,e,"scripts",t,u)},addToCache:function(){if(this.isReadyToProcess()){for(var e=0;e<this.files.length;e++){var t=this.files[e];t.data=document.createElement("script"),t.data.language="javascript",t.data.type="text/javascript",t.data.defer=!1,t.data.text=t.xhrLoader.responseText,document.head.appendChild(t.data)}this.complete=!0}}});t.register("scripts",function(e,t,i){var r;if(Array.isArray(e))for(var s=0;s<e.length;s++)r=new n(this,e[s]),this.addFile(r.files);else r=new n(this,e,t,i),this.addFile(r.files);return this}),module.exports=n;
},{"../../utils/Class":"Q4x4","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","../../utils/object/IsPlainObject":"TEos","../MultiFile.js":"gd4K","./ScriptFile.js":"t4c2"}],"vHaY":[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("../const"),s=require("../FileTypesManager"),t=require("./JSONFile.js"),r=new e({Extends:t,initialize:function(e,i,s,r,a){t.call(this,e,i,s,r,a),this.type="packfile"},onProcess:function(){this.state!==i.FILE_POPULATED&&(this.state=i.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});s.register("pack",function(e,i,s,t){if(Array.isArray(e))for(var a=0;a<e.length;a++)this.addFile(new r(this,e[a]));else this.addFile(new r(this,e,i,t,s));return this}),module.exports=r;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../FileTypesManager":"KCw4","./JSONFile.js":"fKSs"}],"fMjR":[function(require,module,exports) {
var t=require("../../utils/Class"),e=require("../const"),s=require("../File"),i=require("../FileTypesManager"),a=require("../../utils/object/GetFastValue"),r=require("../../utils/object/IsPlainObject"),n=new t({Extends:s,initialize:function(t,i,n,l,h,o){var d="js";if(r(i)){var u=i;i=a(u,"key"),n=a(u,"url"),o=a(u,"xhrSettings"),d=a(u,"extension",d),l=a(u,"start"),h=a(u,"mapping")}var p={type:"plugin",cache:!1,extension:d,responseType:"text",key:i,url:n,xhrSettings:o,config:{start:l,mapping:h}};s.call(this,t,p),"function"==typeof n&&(this.data=n,this.state=e.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,s=this.config,i=a(s,"start",!1),r=a(s,"mapping",null);if(this.state===e.FILE_POPULATED)t.install(this.key,this.data,i,r);else{this.state=e.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var n=t.install(this.key,window[this.key],i,r);(i||r)&&(this.loader.systems[r]=n,this.loader.scene[r]=n)}this.onProcessComplete()}});i.register("plugin",function(t,e,s,i,a){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new n(this,t[r]));else this.addFile(new n(this,t,e,s,i,a));return this}),module.exports=n;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../File":"w4Yx","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","../../utils/object/IsPlainObject":"TEos"}],"Hetr":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),i=require("../File"),s=require("../FileTypesManager"),r=require("../../utils/object/GetFastValue"),n=require("../../utils/object/IsPlainObject"),a=new e({Extends:i,initialize:function(e,t,s,a){var l="js";if(n(t)){var o=t;t=r(o,"key"),s=r(o,"url"),a=r(o,"xhrSettings"),l=r(o,"extension",l)}var c={type:"text",cache:e.cacheManager.text,extension:l,responseType:"text",key:t,url:s,xhrSettings:a};i.call(this,e,c)},onProcess:function(){this.state=t.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),t=eval;this.loader.sceneManager.add(this.key,t(e)),this.complete=!0}});s.register("sceneFile",function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new a(this,e[s]));else this.addFile(new a(this,e,t,i));return this}),module.exports=a;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../File":"w4Yx","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","../../utils/object/IsPlainObject":"TEos"}],"eZDY":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),s=require("../File"),i=require("../FileTypesManager"),a=require("../../utils/object/GetFastValue"),n=require("../../utils/object/IsPlainObject"),r=new e({Extends:s,initialize:function(e,i,r,l,h,c){var o="js";if(n(i)){var u=i;i=a(u,"key"),r=a(u,"url"),c=a(u,"xhrSettings"),o=a(u,"extension",o),l=a(u,"systemKey"),h=a(u,"sceneKey")}var d={type:"scenePlugin",cache:!1,extension:o,responseType:"text",key:i,url:r,xhrSettings:c,config:{systemKey:l,sceneKey:h}};s.call(this,e,d),"function"==typeof r&&(this.data=r,this.state=t.FILE_POPULATED)},onProcess:function(){var e=this.loader.systems.plugins,s=this.config,i=this.key,n=a(s,"systemKey",i),r=a(s,"sceneKey",i);this.state===t.FILE_POPULATED?e.installScenePlugin(n,this.data,r,this.loader.scene,!0):(this.state=t.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),e.installScenePlugin(n,window[this.key],r,this.loader.scene,!0)),this.onProcessComplete()}});i.register("scenePlugin",function(e,t,s,i,a){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new r(this,e[n]));else this.addFile(new r(this,e,t,s,i,a));return this}),module.exports=r;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../File":"w4Yx","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","../../utils/object/IsPlainObject":"TEos"}],"HEad":[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("../FileTypesManager"),t=require("./ImageFile.js"),s=new e({Extends:t,initialize:function(e,i,s,r,a){t.call(this,e,i,s,a,r),this.type="spritesheet"},addToCache:function(){var e=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(e)}});i.register("spritesheet",function(e,i,t,r){if(Array.isArray(e))for(var a=0;a<e.length;a++)this.addFile(new s(this,e[a]));else this.addFile(new s(this,e,i,t,r));return this}),module.exports=s;
},{"../../utils/Class":"Q4x4","../FileTypesManager":"KCw4","./ImageFile.js":"DJw9"}],"pT0c":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),i=require("../File"),r=require("../FileTypesManager"),s=require("../../utils/object/GetFastValue"),a=require("../../utils/object/IsPlainObject"),n=new e({Extends:i,initialize:function(e,t,r,n,o){var h="svg";if(a(t)){var g=t;t=s(g,"key"),r=s(g,"url"),n=s(g,"svgConfig",{}),o=s(g,"xhrSettings"),h=s(g,"extension",h)}var c={type:"svg",cache:e.textureManager,extension:h,responseType:"text",key:t,url:r,xhrSettings:o,config:{width:s(n,"width"),height:s(n,"height"),scale:s(n,"scale")}};i.call(this,e,c)},onProcess:function(){this.state=t.FILE_PROCESSING;var e=this.xhrLoader.responseText,r=[e],s=this.config.width,a=this.config.height,n=this.config.scale;e:if(s&&a||n){var o=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("svg")[0],h=o.hasAttribute("viewBox"),g=parseFloat(o.getAttribute("width")),c=parseFloat(o.getAttribute("height"));if(!h&&g&&c)o.setAttribute("viewBox","0  0 "+g+" "+c);else if(h&&!g&&!c){var l=o.getAttribute("viewBox").split(/\s+|,/);g=l[2],c=l[3]}if(n){if(!g||!c)break e;s=g*n,a=c*n}o.setAttribute("width",s.toString()+"px"),o.setAttribute("height",a.toString()+"px"),r=[(new XMLSerializer).serializeToString(o)]}try{var d=new window.Blob(r,{type:"image/svg+xml;charset=utf-8"})}catch(f){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var u=this,v=!1;this.data.onload=function(){v||i.revokeObjectURL(u.data),u.onProcessComplete()},this.data.onerror=function(){v?u.onProcessError():(v=!0,i.revokeObjectURL(u.data),u.data.src="data:image/svg+xml,"+encodeURIComponent(r.join("")))},i.createObjectURL(this.data,d,"image/svg+xml")},addToCache:function(){var e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}});r.register("svg",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new n(this,e[s]));else this.addFile(new n(this,e,t,i,r));return this}),module.exports=n;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../File":"w4Yx","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","../../utils/object/IsPlainObject":"TEos"}],"sulP":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),i=require("../File"),r=require("../FileTypesManager"),s=require("../../utils/object/GetFastValue"),n=require("../../utils/object/IsPlainObject"),a=new e({Extends:i,initialize:function(e,t,r,a){var l="txt";if(n(t)){var o=t;t=s(o,"key"),r=s(o,"url"),a=s(o,"xhrSettings"),l=s(o,"extension",l)}var u={type:"text",cache:e.cacheManager.text,extension:l,responseType:"text",key:t,url:r,xhrSettings:a};i.call(this,e,u)},onProcess:function(){this.state=t.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});r.register("text",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new a(this,e[r]));else this.addFile(new a(this,e,t,i));return this}),module.exports=a;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../File":"w4Yx","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","../../utils/object/IsPlainObject":"TEos"}],"hRa9":[function(require,module,exports) {
module.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3};
},{}],"hFqX":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),i=require("../File"),r=require("../FileTypesManager"),s=require("../../utils/object/GetFastValue"),a=require("../../utils/object/IsPlainObject"),n=require("../../tilemaps/Formats"),o=new e({Extends:i,initialize:function(e,t,r,o){var l="csv";if(a(t)){var h=t;t=s(h,"key"),r=s(h,"url"),o=s(h,"xhrSettings"),l=s(h,"extension",l)}var c={type:"tilemapCSV",cache:e.cacheManager.tilemap,extension:l,responseType:"text",key:t,url:r,xhrSettings:o};i.call(this,e,c),this.tilemapFormat=n.CSV},onProcess:function(){this.state=t.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,e),this.pendingDestroy(e)}});r.register("tilemapCSV",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new o(this,e[r]));else this.addFile(new o(this,e,t,i));return this}),module.exports=o;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../File":"w4Yx","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","../../utils/object/IsPlainObject":"TEos","../../tilemaps/Formats":"hRa9"}],"QeZ0":[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("../FileTypesManager"),t=require("./JSONFile.js"),a=require("../../tilemaps/Formats"),r=new e({Extends:t,initialize:function(e,i,a,r){t.call(this,e,i,a,r),this.type="tilemapJSON",this.cache=e.cacheManager.tilemap},addToCache:function(){var e={format:a.WELTMEISTER,data:this.data};this.cache.add(this.key,e),this.pendingDestroy(e)}});i.register("tilemapImpact",function(e,i,t){if(Array.isArray(e))for(var a=0;a<e.length;a++)this.addFile(new r(this,e[a]));else this.addFile(new r(this,e,i,t));return this}),module.exports=r;
},{"../../utils/Class":"Q4x4","../FileTypesManager":"KCw4","./JSONFile.js":"fKSs","../../tilemaps/Formats":"hRa9"}],"imGf":[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("../FileTypesManager"),t=require("./JSONFile.js"),a=require("../../tilemaps/Formats"),r=new e({Extends:t,initialize:function(e,i,a,r){t.call(this,e,i,a,r),this.type="tilemapJSON",this.cache=e.cacheManager.tilemap},addToCache:function(){var e={format:a.TILED_JSON,data:this.data};this.cache.add(this.key,e),this.pendingDestroy(e)}});i.register("tilemapTiledJSON",function(e,i,t){if(Array.isArray(e))for(var a=0;a<e.length;a++)this.addFile(new r(this,e[a]));else this.addFile(new r(this,e,i,t));return this}),module.exports=r;
},{"../../utils/Class":"Q4x4","../FileTypesManager":"KCw4","./JSONFile.js":"fKSs","../../tilemaps/Formats":"hRa9"}],"AhF9":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../FileTypesManager"),i=require("../../utils/object/GetFastValue"),s=require("./ImageFile.js"),a=require("../../utils/object/IsPlainObject"),l=require("../MultiFile.js"),r=require("./TextFile.js"),n=new e({Extends:l,initialize:function(e,t,n,u,h,o){var d,x;if(a(t)){var f=t;t=i(f,"key"),d=new s(e,{key:t,url:i(f,"textureURL"),extension:i(f,"textureExtension","png"),normalMap:i(f,"normalMap"),xhrSettings:i(f,"textureXhrSettings")}),x=new r(e,{key:t,url:i(f,"atlasURL"),extension:i(f,"atlasExtension","txt"),xhrSettings:i(f,"atlasXhrSettings")})}else d=new s(e,t,n,h),x=new r(e,t,u,o);d.linkFile?l.call(this,e,"unityatlas",t,[d,x,d.linkFile]):l.call(this,e,"unityatlas",t,[d,x])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(e.key,e.data,t.data,i),t.addToCache(),this.complete=!0}}});t.register("unityAtlas",function(e,t,i,s,a){var l;if(Array.isArray(e))for(var r=0;r<e.length;r++)l=new n(this,e[r]),this.addFile(l.files);else l=new n(this,e,t,i,s,a),this.addFile(l.files);return this}),module.exports=n;
},{"../../utils/Class":"Q4x4","../FileTypesManager":"KCw4","../../utils/object/GetFastValue":"xbYy","./ImageFile.js":"DJw9","../../utils/object/IsPlainObject":"TEos","../MultiFile.js":"gd4K","./TextFile.js":"sulP"}],"RdeJ":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),r=require("../File"),i=require("../FileTypesManager"),a=require("../GetURL"),o=require("../../utils/object/GetFastValue"),n=require("../../utils/object/IsPlainObject"),s=new e({Extends:r,initialize:function(e,t,i,a,o,n,s){void 0===a&&(a="loadeddata"),void 0===o&&(o=!1),void 0===n&&(n=!1),"loadeddata"!==a&&"canplay"!==a&&"canplaythrough"!==a&&(a="loadeddata");var l={type:"video",cache:e.cacheManager.video,extension:i.type,responseType:"blob",key:t,url:i.url,xhrSettings:s,config:{loadEvent:a,asBlob:o,noAudio:n}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),r.call(this,e,l)},onProcess:function(){if(this.state=t.FILE_PROCESSING,this.config.asBlob){var e=this.createVideoElement();this.data=e;var i=this;this.data.onloadeddata=function(){i.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(i.data),i.onProcessError()},r.createObjectURL(e,this.xhrLoader.response,""),e.load()}else this.onProcessComplete()},createVideoElement:function(){var e=document.createElement("video");return e.controls=!1,e.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(e.muted=!0,e.defaultMuted=!0,e.setAttribute("autoplay","autoplay")),e.setAttribute("playsinline","playsinline"),e.setAttribute("preload","auto"),e},onVideoLoadHandler:function(e){var t=e.target;t.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),t.removeEventListener("error",this.onErrorCallback,!0),this.data=t,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(e){var t=e.target;t&&(t.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),t.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var e=this.config.loadEvent;if(this.config.asBlob)r.prototype.load.call(this);else{this.percentComplete=0;var t=this.createVideoElement();t.addEventListener(e,this.onLoadCallback,!0),t.addEventListener("error",this.onErrorCallback,!0),t.src=a(this,this.loader.baseURL),t.load()}}});s.create=function(e,t,r,i,a,l,d){var c=e.systems.game;n(t)&&(r=o(t,"url",[]),i=o(t,"loadEvent","loadeddata"),a=o(t,"asBlob",!1),l=o(t,"noAudio",!1),d=o(t,"xhrSettings"));var h=s.getVideoURL(c,r);if(h)return new s(e,t,h,i,a,l,d)},s.getVideoURL=function(e,t){Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var i,a=o(t[r],"url",t[r]);if(0===a.indexOf("blob:"))return{url:a,type:""};if(i=0===a.indexOf("data:")?a.split(",")[0].match(/\/(.*?);/):a.match(/\.([a-zA-Z0-9]+)($|\?)/),i=o(t[r],"type",i?i[1]:"").toLowerCase(),e.device.video[i])return{url:a,type:i}}return null},i.register("video",function(e,t,r,i,a,o){var n;if(Array.isArray(e))for(var l=0;l<e.length;l++)(n=s.create(this,e[l]))&&this.addFile(n);else(n=s.create(this,e,t,r,i,a,o))&&this.addFile(n);return this}),module.exports=s;
},{"../../utils/Class":"Q4x4","../const":"l7Fg","../File":"w4Yx","../FileTypesManager":"KCw4","../GetURL":"GkbS","../../utils/object/GetFastValue":"xbYy","../../utils/object/IsPlainObject":"TEos"}],"e7Af":[function(require,module,exports) {
module.exports={AnimationJSONFile:require("./AnimationJSONFile"),AtlasJSONFile:require("./AtlasJSONFile"),AtlasXMLFile:require("./AtlasXMLFile"),AudioFile:require("./AudioFile"),AudioSpriteFile:require("./AudioSpriteFile"),BinaryFile:require("./BinaryFile"),BitmapFontFile:require("./BitmapFontFile"),CSSFile:require("./CSSFile"),GLSLFile:require("./GLSLFile"),HTML5AudioFile:require("./HTML5AudioFile"),HTMLFile:require("./HTMLFile"),HTMLTextureFile:require("./HTMLTextureFile"),ImageFile:require("./ImageFile"),JSONFile:require("./JSONFile"),MultiAtlasFile:require("./MultiAtlasFile"),MultiScriptFile:require("./MultiScriptFile"),PackFile:require("./PackFile"),PluginFile:require("./PluginFile"),SceneFile:require("./SceneFile"),ScenePluginFile:require("./ScenePluginFile"),ScriptFile:require("./ScriptFile"),SpriteSheetFile:require("./SpriteSheetFile"),SVGFile:require("./SVGFile"),TextFile:require("./TextFile"),TilemapCSVFile:require("./TilemapCSVFile"),TilemapImpactFile:require("./TilemapImpactFile"),TilemapJSONFile:require("./TilemapJSONFile"),UnityAtlasFile:require("./UnityAtlasFile"),VideoFile:require("./VideoFile"),XMLFile:require("./XMLFile")};
},{"./AnimationJSONFile":"Ze3k","./AtlasJSONFile":"Q44H","./AtlasXMLFile":"iXHI","./AudioFile":"tcMb","./AudioSpriteFile":"JOsE","./BinaryFile":"JHAS","./BitmapFontFile":"WUMz","./CSSFile":"QIQP","./GLSLFile":"hgm4","./HTML5AudioFile":"Vodb","./HTMLFile":"uYTf","./HTMLTextureFile":"JTII","./ImageFile":"DJw9","./JSONFile":"fKSs","./MultiAtlasFile":"gx99","./MultiScriptFile":"m2JB","./PackFile":"vHaY","./PluginFile":"fMjR","./SceneFile":"Hetr","./ScenePluginFile":"eZDY","./ScriptFile":"t4c2","./SpriteSheetFile":"HEad","./SVGFile":"pT0c","./TextFile":"sulP","./TilemapCSVFile":"hFqX","./TilemapImpactFile":"QeZ0","./TilemapJSONFile":"imGf","./UnityAtlasFile":"AhF9","./VideoFile":"RdeJ","./XMLFile":"PH8F"}],"cPA3":[function(require,module,exports) {
var t=require("../utils/Class"),e=require("./const"),s=require("../structs/Set"),i=require("eventemitter3"),h=require("./events"),a=require("./FileTypesManager"),r=require("../utils/object/GetFastValue"),n=require("../plugins/PluginCache"),o=require("../scene/events"),l=require("./XHRSettings"),u=new t({Extends:i,initialize:function(t){i.call(this);var h=t.sys.game.config,n=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,a.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(r(n,"baseURL",h.loaderBaseURL)),this.setPath(r(n,"path",h.loaderPath)),this.setPrefix(r(n,"prefix",h.loaderPrefix)),this.maxParallelDownloads=r(n,"maxParallelDownloads",h.loaderMaxParallelDownloads),this.xhr=l(r(n,"responseType",h.loaderResponseType),r(n,"async",h.loaderAsync),r(n,"user",h.loaderUser),r(n,"password",h.loaderPassword),r(n,"timeout",h.loaderTimeout),r(n,"withCredentials",h.loaderWithCredentials)),this.crossOrigin=r(n,"crossOrigin",h.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new s,this.inflight=new s,this.queue=new s,this._deleteQueue=new s,this.totalFailed=0,this.totalComplete=0,this.state=e.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.pluginStart,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(o.SHUTDOWN,this.shutdown,this)},setBaseURL:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t,this},setPath:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this},setPrefix:function(t){return void 0===t&&(t=""),this.prefix=t,this},setCORS:function(t){return this.crossOrigin=t,this},addFile:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var s=t[e];this.keyExists(s)||(this.list.set(s),this.emit(h.ADD,s.key,s.type,this,s),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(t){var e=t.hasCacheConflict();return e||this.list.iterate(function(s){if(s.type===t.type&&s.key===t.key)return e=!0,!1}),!e&&this.isLoading()&&(this.inflight.iterate(function(s){if(s.type===t.type&&s.key===t.key)return e=!0,!1}),this.queue.iterate(function(s){if(s.type===t.type&&s.key===t.key)return e=!0,!1})),e},addPack:function(t,e){e&&t.hasOwnProperty(e)&&(t={packKey:t[e]});var s=0,i=this.baseURL,h=this.path,a=this.prefix;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=t[n],l=r(o,"baseURL",i),u=r(o,"path",h),c=r(o,"prefix",a),d=r(o,"files",null),f=r(o,"defaultType","void");if(Array.isArray(d)){this.setBaseURL(l),this.setPath(u),this.setPrefix(c);for(var p=0;p<d.length;p++){var y=d[p],g=y.hasOwnProperty("type")?y.type:f;this[g]&&(this[g](y),s++)}}}return this.setBaseURL(i),this.setPath(h),this.setPrefix(a),s>0},isLoading:function(){return this.state===e.LOADER_LOADING||this.state===e.LOADER_PROCESSING},isReady:function(){return this.state===e.LOADER_IDLE||this.state===e.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(h.START,this),0===this.list.size?this.loadComplete():(this.state=e.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(o.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(h.PROGRESS,this.progress)},update:function(){this.state===e.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(t){if((t.state===e.FILE_POPULATED||t.state===e.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(t,e){this.inflight&&(this.inflight.delete(t),this.updateProgress(),e?(this.totalComplete++,this.queue.set(t),this.emit(h.FILE_LOAD,t),t.onProcess()):(this.totalFailed++,this._deleteQueue.set(t),this.emit(h.FILE_LOAD_ERROR,t),this.fileProcessComplete(t)))},fileProcessComplete:function(t){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(t.state===e.FILE_ERRORED?t.multiFile&&t.multiFile.onFileFailed(t):t.state===e.FILE_COMPLETE&&(t.multiFile?t.multiFile.isReadyToProcess()&&t.multiFile.addToCache():t.addToCache()),this.queue.delete(t),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(h.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=e.LOADER_COMPLETE,this.systems.events.off(o.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(h.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(t){this._deleteQueue.set(t)},saveJSON:function(t,e){return this.save(JSON.stringify(t),e)},save:function(t,e,s){void 0===e&&(e="file.json"),void 0===s&&(s="application/json");var i=new Blob([t],{type:s}),h=URL.createObjectURL(i),a=document.createElement("a");return a.download=e,a.textContent="Download "+e,a.href=h,a.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var t=this.systems.game.config,s=this.systems.settings.loader;this.setBaseURL(r(s,"baseURL",t.loaderBaseURL)),this.setPath(r(s,"path",t.loaderPath)),this.setPrefix(r(s,"prefix",t.loaderPrefix)),this.state=e.LOADER_IDLE},shutdown:function(){this.reset(),this.state=e.LOADER_SHUTDOWN,this.systems.events.off(o.UPDATE,this.update,this),this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=e.LOADER_DESTROYED,this.systems.events.off(o.UPDATE,this.update,this),this.systems.events.off(o.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});n.register("Loader",u,"load"),module.exports=u;
},{"../utils/Class":"Q4x4","./const":"l7Fg","../structs/Set":"TNKn","eventemitter3":"Clm3","./events":"bOrI","./FileTypesManager":"KCw4","../utils/object/GetFastValue":"xbYy","../plugins/PluginCache":"vXV4","../scene/events":"Zlz3","./XHRSettings":"ZCdv"}],"DmST":[function(require,module,exports) {
var e=require("./const"),r=require("../utils/object/Extend"),i={Events:require("./events"),FileTypes:require("./filetypes"),File:require("./File"),FileTypesManager:require("./FileTypesManager"),GetURL:require("./GetURL"),LoaderPlugin:require("./LoaderPlugin"),MergeXHRSettings:require("./MergeXHRSettings"),MultiFile:require("./MultiFile"),XHRLoader:require("./XHRLoader"),XHRSettings:require("./XHRSettings")};i=r(!1,i,e),module.exports=i;
},{"./const":"l7Fg","../utils/object/Extend":"CtVZ","./events":"bOrI","./filetypes":"e7Af","./File":"w4Yx","./FileTypesManager":"KCw4","./GetURL":"GkbS","./LoaderPlugin":"cPA3","./MergeXHRSettings":"NKeK","./MultiFile":"gd4K","./XHRLoader":"yBUk","./XHRSettings":"ZCdv"}],"ObUI":[function(require,module,exports) {
var A={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};module.exports=A;
},{}],"diQ0":[function(require,module,exports) {
var t={setAcceleration:function(t,e){return this.body.acceleration.set(t,e),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}};module.exports=t;
},{}],"EFdv":[function(require,module,exports) {
var t={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}};module.exports=t;
},{}],"Ehz6":[function(require,module,exports) {
var t={setBounce:function(t,o){return this.body.bounce.set(t,o),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,o,e){return this.body.setCollideWorldBounds(t,o,e),this}};module.exports=t;
},{}],"uOv4":[function(require,module,exports) {
var o={setDebug:function(o,t,e){return this.debugShowBody=o,this.debugShowVelocity=t,this.debugBodyColor=e,this},setDebugBodyColor:function(o){return this.body.debugBodyColor=o,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(o){this.body.debugShowBody=o}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(o){this.body.debugShowVelocity=o}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(o){this.body.debugBodyColor=o}}};module.exports=o;
},{}],"oY8A":[function(require,module,exports) {
var t={setDrag:function(t,r){return this.body.drag.set(t,r),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}};module.exports=t;
},{}],"Ex1V":[function(require,module,exports) {
var e={enableBody:function(e,t,i,o,b){return e&&this.body.reset(t,i),o&&(this.body.gameObject.active=!0),b&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),t&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};module.exports=e;
},{}],"hC9D":[function(require,module,exports) {
var t={setFriction:function(t,i){return this.body.friction.set(t,i),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}};module.exports=t;
},{}],"ZpJC":[function(require,module,exports) {
var t={setGravity:function(t,i){return this.body.gravity.set(t,i),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}};module.exports=t;
},{}],"CsKy":[function(require,module,exports) {
var o={setImmovable:function(o){return void 0===o&&(o=!0),this.body.immovable=o,this}};module.exports=o;
},{}],"vXIU":[function(require,module,exports) {
var s={setMass:function(s){return this.body.mass=s,this}};module.exports=s;
},{}],"GWQR":[function(require,module,exports) {
var t={setOffset:function(t,e){return this.body.setOffset(t,e),this},setSize:function(t,e,s){return this.body.setSize(t,e,s),this},setCircle:function(t,e,s){return this.body.setCircle(t,e,s),this}};module.exports=t;
},{}],"c3l4":[function(require,module,exports) {
var t={setVelocity:function(t,e){return this.body.setVelocity(t,e),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,e){return this.body.maxVelocity.set(t,e),this}};module.exports=t;
},{}],"q0Tk":[function(require,module,exports) {
module.exports={Acceleration:require("./Acceleration"),Angular:require("./Angular"),Bounce:require("./Bounce"),Debug:require("./Debug"),Drag:require("./Drag"),Enable:require("./Enable"),Friction:require("./Friction"),Gravity:require("./Gravity"),Immovable:require("./Immovable"),Mass:require("./Mass"),Size:require("./Size"),Velocity:require("./Velocity")};
},{"./Acceleration":"diQ0","./Angular":"EFdv","./Bounce":"Ehz6","./Debug":"uOv4","./Drag":"oY8A","./Enable":"Ex1V","./Friction":"hC9D","./Gravity":"ZpJC","./Immovable":"CsKy","./Mass":"vXIU","./Size":"GWQR","./Velocity":"c3l4"}],"ZUyf":[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("./components"),a=require("../../gameobjects/image/Image"),n=new e({Extends:a,Mixins:[i.Acceleration,i.Angular,i.Bounce,i.Debug,i.Drag,i.Enable,i.Friction,i.Gravity,i.Immovable,i.Mass,i.Size,i.Velocity],initialize:function(e,i,n,l,r){a.call(this,e,i,n,l,r),this.body=null}});module.exports=n;
},{"../../utils/Class":"Q4x4","./components":"q0Tk","../../gameobjects/image/Image":"WGAg"}],"ch6Q":[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("./components"),r=require("../../gameobjects/sprite/Sprite"),t=new e({Extends:r,Mixins:[i.Acceleration,i.Angular,i.Bounce,i.Debug,i.Drag,i.Enable,i.Friction,i.Gravity,i.Immovable,i.Mass,i.Size,i.Velocity],initialize:function(e,i,t,n,l){r.call(this,e,i,t,n,l),this.body=null}});module.exports=t;
},{"../../utils/Class":"Q4x4","./components":"q0Tk","../../gameobjects/sprite/Sprite":"uRwE"}],"eyNj":[function(require,module,exports) {
var e=require("./ArcadeSprite"),l=require("../../utils/Class"),t=require("./const"),a=require("../../utils/object/GetFastValue"),r=require("../../gameobjects/group/Group"),i=require("../../utils/object/IsPlainObject"),o=new l({Extends:r,initialize:function(l,o,n,s){if(n||s)if(i(n))s=n,n=null,s.internalCreateCallback=this.createCallbackHandler,s.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(n)&&i(n[0])){s=n[0];var c=this;n.forEach(function(e){e.internalCreateCallback=c.createCallbackHandler,e.internalRemoveCallback=c.removeCallbackHandler})}else s={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else s={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=l,s.classType=a(s,"classType",e),this.physicsType=t.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:a(s,"collideWorldBounds",!1),setBoundsRectangle:a(s,"customBoundsRectangle",null),setAccelerationX:a(s,"accelerationX",0),setAccelerationY:a(s,"accelerationY",0),setAllowDrag:a(s,"allowDrag",!0),setAllowGravity:a(s,"allowGravity",!0),setAllowRotation:a(s,"allowRotation",!0),setBounceX:a(s,"bounceX",0),setBounceY:a(s,"bounceY",0),setDragX:a(s,"dragX",0),setDragY:a(s,"dragY",0),setEnable:a(s,"enable",!0),setGravityX:a(s,"gravityX",0),setGravityY:a(s,"gravityY",0),setFrictionX:a(s,"frictionX",0),setFrictionY:a(s,"frictionY",0),setVelocityX:a(s,"velocityX",0),setVelocityY:a(s,"velocityY",0),setAngularVelocity:a(s,"angularVelocity",0),setAngularAcceleration:a(s,"angularAcceleration",0),setAngularDrag:a(s,"angularDrag",0),setMass:a(s,"mass",1),setImmovable:a(s,"immovable",!1)},Array.isArray(n)&&(s=null),r.call(this,o,n,s),this.type="PhysicsGroup"},createCallbackHandler:function(e){e.body||this.world.enableBody(e,t.DYNAMIC_BODY);var l=e.body;for(var a in this.defaults)l[a](this.defaults[a])},removeCallbackHandler:function(e){e.body&&this.world.disableBody(e)},setVelocity:function(e,l,t){void 0===t&&(t=0);for(var a=this.getChildren(),r=0;r<a.length;r++)a[r].body.velocity.set(e+r*t,l+r*t);return this},setVelocityX:function(e,l){void 0===l&&(l=0);for(var t=this.getChildren(),a=0;a<t.length;a++)t[a].body.velocity.x=e+a*l;return this},setVelocityY:function(e,l){void 0===l&&(l=0);for(var t=this.getChildren(),a=0;a<t.length;a++)t[a].body.velocity.y=e+a*l;return this}});module.exports=o;
},{"./ArcadeSprite":"ch6Q","../../utils/Class":"Q4x4","./const":"ObUI","../../utils/object/GetFastValue":"xbYy","../../gameobjects/group/Group":"b7vI","../../utils/object/IsPlainObject":"TEos"}],"lteY":[function(require,module,exports) {
var e=require("./ArcadeSprite"),l=require("../../utils/Class"),a=require("./const"),r=require("../../utils/object/GetFastValue"),t=require("../../gameobjects/group/Group"),i=require("../../utils/object/IsPlainObject"),c=new l({Extends:t,initialize:function(l,c,s,n){s||n?i(s)?(n=s,s=null,n.internalCreateCallback=this.createCallbackHandler,n.internalRemoveCallback=this.removeCallbackHandler,n.createMultipleCallback=this.createMultipleCallbackHandler,n.classType=r(n,"classType",e)):Array.isArray(s)&&i(s[0])&&(n=s,s=null,n.forEach(function(l){l.internalCreateCallback=this.createCallbackHandler,l.internalRemoveCallback=this.removeCallbackHandler,l.createMultipleCallback=this.createMultipleCallbackHandler,l.classType=r(l,"classType",e)})):n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:e},this.world=l,this.physicsType=a.STATIC_BODY,t.call(this,c,s,n),this.type="StaticPhysicsGroup"},createCallbackHandler:function(e){e.body||this.world.enableBody(e,a.STATIC_BODY)},removeCallbackHandler:function(e){e.body&&this.world.disableBody(e)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var e=this.children.entries,l=0;l<e.length;l++)e[l].body.reset();return this}});module.exports=c;
},{"./ArcadeSprite":"ch6Q","../../utils/Class":"Q4x4","./const":"ObUI","../../utils/object/GetFastValue":"xbYy","../../gameobjects/group/Group":"b7vI","../../utils/object/IsPlainObject":"TEos"}],"WMTu":[function(require,module,exports) {
var s=require("./ArcadeImage"),e=require("./ArcadeSprite"),t=require("../../utils/Class"),i=require("./const"),r=require("./PhysicsGroup"),n=require("./StaticPhysicsGroup"),d=new t({initialize:function(s){this.world=s,this.scene=s.scene,this.sys=s.scene.sys},collider:function(s,e,t,i,r){return this.world.addCollider(s,e,t,i,r)},overlap:function(s,e,t,i,r){return this.world.addOverlap(s,e,t,i,r)},existing:function(s,e){var t=e?i.STATIC_BODY:i.DYNAMIC_BODY;return this.world.enableBody(s,t),s},staticImage:function(e,t,r,n){var d=new s(this.scene,e,t,r,n);return this.sys.displayList.add(d),this.world.enableBody(d,i.STATIC_BODY),d},image:function(e,t,r,n){var d=new s(this.scene,e,t,r,n);return this.sys.displayList.add(d),this.world.enableBody(d,i.DYNAMIC_BODY),d},staticSprite:function(s,t,r,n){var d=new e(this.scene,s,t,r,n);return this.sys.displayList.add(d),this.sys.updateList.add(d),this.world.enableBody(d,i.STATIC_BODY),d},sprite:function(s,t,r,n){var d=new e(this.scene,s,t,r,n);return this.sys.displayList.add(d),this.sys.updateList.add(d),this.world.enableBody(d,i.DYNAMIC_BODY),d},staticGroup:function(s,e){return this.sys.updateList.add(new n(this.world,this.world.scene,s,e))},group:function(s,e){return this.sys.updateList.add(new r(this.world,this.world.scene,s,e))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});module.exports=d;
},{"./ArcadeImage":"ZUyf","./ArcadeSprite":"ch6Q","../../utils/Class":"Q4x4","./const":"ObUI","./PhysicsGroup":"eyNj","./StaticPhysicsGroup":"lteY"}],"LGhg":[function(require,module,exports) {
var e=function(e,t,i,r,o,s,a){void 0===s&&(s=!0),void 0===a&&(a=!1);var n=[],c=[],m=e.treeMinMax;if(m.minX=t,m.minY=i,m.maxX=t+r,m.maxY=i+o,a&&(c=e.staticTree.search(m)),s&&e.useTree)n=e.tree.search(m);else if(s){var u=e.bodies,f={position:{x:t,y:i},left:t,top:i,right:t+r,bottom:i+o,isCircle:!1},v=e.intersects;u.iterate(function(e){v(e,f)&&n.push(e)})}return c.concat(n)};module.exports=e;
},{}],"JwdB":[function(require,module,exports) {
var e=require("./OverlapRect"),r=require("../../../geom/circle/Circle"),i=require("../../../geom/intersects/CircleToCircle"),t=require("../../../geom/intersects/CircleToRectangle"),c=function(c,n,l,o,u,s){var a=e(c,n-o,l-o,2*o,2*o,u,s);if(0===a.length)return a;for(var g=new r(n,l,o),h=new r,v=[],C=0;C<a.length;C++){var f=a[C];f.isCircle?(h.setTo(f.center.x,f.center.y,f.halfWidth),i(g,h)&&v.push(f)):t(g,f)&&v.push(f)}return v};module.exports=c;
},{"./OverlapRect":"LGhg","../../../geom/circle/Circle":"b8pw","../../../geom/intersects/CircleToCircle":"VmG8","../../../geom/intersects/CircleToRectangle":"Atz3"}],"xZtM":[function(require,module,exports) {
module.exports="collide";
},{}],"VA7r":[function(require,module,exports) {
module.exports="overlap";
},{}],"cS11":[function(require,module,exports) {
module.exports="tilecollide";
},{}],"Zp9u":[function(require,module,exports) {
module.exports="tileoverlap";
},{}],"PK9F":[function(require,module,exports) {
module.exports="worldbounds";
},{}],"RTje":[function(require,module,exports) {
module.exports="worldstep";
},{}],"hR2u":[function(require,module,exports) {
module.exports={COLLIDE:require("./COLLIDE_EVENT"),OVERLAP:require("./OVERLAP_EVENT"),PAUSE:require("./PAUSE_EVENT"),RESUME:require("./RESUME_EVENT"),TILE_COLLIDE:require("./TILE_COLLIDE_EVENT"),TILE_OVERLAP:require("./TILE_OVERLAP_EVENT"),WORLD_BOUNDS:require("./WORLD_BOUNDS_EVENT"),WORLD_STEP:require("./WORLD_STEP_EVENT")};
},{"./COLLIDE_EVENT":"xZtM","./OVERLAP_EVENT":"VA7r","./PAUSE_EVENT":"RNoC","./RESUME_EVENT":"eU0X","./TILE_COLLIDE_EVENT":"cS11","./TILE_OVERLAP_EVENT":"Zp9u","./WORLD_BOUNDS_EVENT":"PK9F","./WORLD_STEP_EVENT":"RTje"}],"z1iu":[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("./const"),s=require("./events"),e=require("../../math/RadToDeg"),h=require("../../geom/rectangle/Rectangle"),o=require("../../geom/rectangle/Contains"),n=require("../../math/Vector2"),r=new t({initialize:function(t,s){var e=s.displayWidth?s.displayWidth:64,o=s.displayHeight?s.displayHeight:64;this.world=t,this.gameObject=s,this.transform={x:s.x,y:s.y,rotation:s.angle,scaleX:s.scaleX,scaleY:s.scaleY,displayOriginX:s.displayOriginX,displayOriginY:s.displayOriginY},this.debugShowBody=t.defaults.debugShowBody,this.debugShowVelocity=t.defaults.debugShowVelocity,this.debugBodyColor=t.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new n,this.position=new n(s.x-s.scaleX*s.displayOriginX,s.y-s.scaleY*s.displayOriginY),this.prev=new n(s.x,s.y),this.prevFrame=new n(s.x,s.y),this.allowRotation=!0,this.rotation=s.angle,this.preRotation=s.angle,this.width=e,this.height=o,this.sourceWidth=e,this.sourceHeight=o,s.frame&&(this.sourceWidth=s.frame.realWidth,this.sourceHeight=s.frame.realHeight),this.halfWidth=Math.abs(e/2),this.halfHeight=Math.abs(o/2),this.center=new n(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new n,this.newVelocity=new n,this.deltaMax=new n,this.acceleration=new n,this.allowDrag=!0,this.drag=new n,this.allowGravity=!0,this.gravity=new n,this.bounce=new n,this.worldBounce=null,this.customBoundsRectangle=t.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new n(1e4,1e4),this.maxSpeed=-1,this.friction=new n(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=i.FACING_NONE,this.immovable=!1,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=i.DYNAMIC_BODY,this._sx=s.scaleX,this._sy=s.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new h},updateBounds:function(){var t=this.gameObject,i=this.transform;if(t.parentContainer){var s=t.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);i.x=s.tx,i.y=s.ty,i.rotation=e(s.rotation),i.scaleX=s.scaleX,i.scaleY=s.scaleY,i.displayOriginX=t.displayOriginX,i.displayOriginY=t.displayOriginY}else i.x=t.x,i.y=t.y,i.rotation=t.angle,i.scaleX=t.scaleX,i.scaleY=t.scaleY,i.displayOriginX=t.displayOriginX,i.displayOriginY=t.displayOriginY;var h=!1;if(this.syncBounds){var o=t.getBounds(this._bounds);this.width=o.width,this.height=o.height,h=!0}else{var n=Math.abs(i.scaleX),r=Math.abs(i.scaleY);this._sx===n&&this._sy===r||(this.width=this.sourceWidth*n,this.height=this.sourceHeight*r,this._sx=n,this._sy=r,h=!0)}h&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},resetFlags:function(){var t=this.wasTouching,i=this.touching,s=this.blocked;t.none=i.none,t.up=i.up,t.down=i.down,t.left=i.left,t.right=i.right,i.none=!0,i.up=!1,i.down=!1,i.left=!1,i.right=!1,s.none=!0,s.up=!1,s.down=!1,s.left=!1,s.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(t,i){t&&this.resetFlags(),this.updateBounds();var s=this.transform;this.position.x=s.x+s.scaleX*(this.offset.x-s.displayOriginX),this.position.y=s.y+s.scaleY*(this.offset.y-s.displayOriginY),this.updateCenter(),this.rotation=s.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),t&&this.update(i)},update:function(t){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,t);var i=this.velocity.x,e=this.velocity.y;this.newVelocity.set(i*t,e*t),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(e,i),this.speed=Math.sqrt(i*i+e*e),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(s.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var t=this.position.x-this.prevFrame.x,s=this.position.y-this.prevFrame.y;if(this.moves){var e=this.deltaMax.x,h=this.deltaMax.y;0!==e&&0!==t&&(t<0&&t<-e?t=-e:t>0&&t>e&&(t=e)),0!==h&&0!==s&&(s<0&&s<-h?s=-h:s>0&&s>h&&(s=h)),this.gameObject.x+=t,this.gameObject.y+=s}t<0?this.facing=i.FACING_LEFT:t>0&&(this.facing=i.FACING_RIGHT),s<0?this.facing=i.FACING_UP:s>0&&(this.facing=i.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=t,this._ty=s},setBoundsRectangle:function(t){return this.customBoundsRectangle=t||this.world.bounds,this},checkWorldBounds:function(){var t=this.position,i=this.customBoundsRectangle,s=this.world.checkCollision,e=this.worldBounce?-this.worldBounce.x:-this.bounce.x,h=this.worldBounce?-this.worldBounce.y:-this.bounce.y,o=!1;return t.x<i.x&&s.left?(t.x=i.x,this.velocity.x*=e,this.blocked.left=!0,o=!0):this.right>i.right&&s.right&&(t.x=i.right-this.width,this.velocity.x*=e,this.blocked.right=!0,o=!0),t.y<i.y&&s.up?(t.y=i.y,this.velocity.y*=h,this.blocked.up=!0,o=!0):this.bottom>i.bottom&&s.down&&(t.y=i.bottom-this.height,this.velocity.y*=h,this.blocked.down=!0,o=!0),o&&(this.blocked.none=!1),o},setOffset:function(t,i){return void 0===i&&(i=t),this.offset.set(t,i),this.updateCenter(),this},setSize:function(t,i,s){void 0===s&&(s=!0);var e=this.gameObject;if(!t&&e.frame&&(t=e.frame.realWidth),!i&&e.frame&&(i=e.frame.realHeight),this.sourceWidth=t,this.sourceHeight=i,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),s&&e.getCenter){var h=(e.width-t)/2,o=(e.height-i)/2;this.offset.set(h,o)}return this.isCircle=!1,this.radius=0,this},setCircle:function(t,i,s){return void 0===i&&(i=this.offset.x),void 0===s&&(s=this.offset.y),t>0?(this.isCircle=!0,this.radius=t,this.sourceWidth=2*t,this.sourceHeight=2*t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(i,s),this.updateCenter()):this.isCircle=!1,this},reset:function(t,i){this.stop();var s=this.gameObject;s.setPosition(t,i),s.getTopLeft?s.getTopLeft(this.position):this.position.set(t,i),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=s.angle,this.preRotation=s.angle,this.updateBounds(),this.updateCenter()},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,i){return this.isCircle?this.radius>0&&t>=this.left&&t<=this.right&&i>=this.top&&i<=this.bottom&&(this.center.x-t)*(this.center.x-t)+(this.center.y-i)*(this.center.y-i)<=this.radius*this.radius:o(this,t,i)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(t){var i=this.position,s=i.x+this.halfWidth,e=i.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor),this.isCircle?t.strokeCircle(s,e,this.width/2):(this.checkCollision.up&&t.lineBetween(i.x,i.y,i.x+this.width,i.y),this.checkCollision.right&&t.lineBetween(i.x+this.width,i.y,i.x+this.width,i.y+this.height),this.checkCollision.down&&t.lineBetween(i.x,i.y+this.height,i.x+this.width,i.y+this.height),this.checkCollision.left&&t.lineBetween(i.x,i.y,i.x,i.y+this.height))),this.debugShowVelocity&&(t.lineStyle(t.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),t.lineBetween(s,e,s+this.velocity.x/2,e+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(t,i,s){void 0===t&&(t=!0),this.collideWorldBounds=t;var e=void 0!==i,h=void 0!==s;return(e||h)&&(this.worldBounce||(this.worldBounce=new n),e&&(this.worldBounce.x=i),h&&(this.worldBounce.y=s)),this},setVelocity:function(t,i){return this.velocity.set(t,i),t=this.velocity.x,i=this.velocity.y,this.speed=Math.sqrt(t*t+i*i),this},setVelocityX:function(t){this.velocity.x=t;var i=t,s=this.velocity.y;return this.speed=Math.sqrt(i*i+s*s),this},setVelocityY:function(t){this.velocity.y=t;var i=this.velocity.x,s=t;return this.speed=Math.sqrt(i*i+s*s),this},setMaxVelocity:function(t,i){return this.maxVelocity.set(t,i),this},setMaxSpeed:function(t){return this.maxSpeed=t,this},setBounce:function(t,i){return this.bounce.set(t,i),this},setBounceX:function(t){return this.bounce.x=t,this},setBounceY:function(t){return this.bounce.y=t,this},setAcceleration:function(t,i){return this.acceleration.set(t,i),this},setAccelerationX:function(t){return this.acceleration.x=t,this},setAccelerationY:function(t){return this.acceleration.y=t,this},setAllowDrag:function(t){return void 0===t&&(t=!0),this.allowDrag=t,this},setAllowGravity:function(t){return void 0===t&&(t=!0),this.allowGravity=t,this},setAllowRotation:function(t){return void 0===t&&(t=!0),this.allowRotation=t,this},setDrag:function(t,i){return this.drag.set(t,i),this},setDragX:function(t){return this.drag.x=t,this},setDragY:function(t){return this.drag.y=t,this},setGravity:function(t,i){return this.gravity.set(t,i),this},setGravityX:function(t){return this.gravity.x=t,this},setGravityY:function(t){return this.gravity.y=t,this},setFriction:function(t,i){return this.friction.set(t,i),this},setFrictionX:function(t){return this.friction.x=t,this},setFrictionY:function(t){return this.friction.y=t,this},setAngularVelocity:function(t){return this.angularVelocity=t,this},setAngularAcceleration:function(t){return this.angularAcceleration=t,this},setAngularDrag:function(t){return this.angularDrag=t,this},setMass:function(t){return this.mass=t,this},setImmovable:function(t){return void 0===t&&(t=!0),this.immovable=t,this},setEnable:function(t){return void 0===t&&(t=!0),this.enable=t,this},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});module.exports=r;
},{"../../utils/Class":"Q4x4","./const":"ObUI","./events":"hR2u","../../math/RadToDeg":"T4as","../../geom/rectangle/Rectangle":"ACYM","../../geom/rectangle/Contains":"VQyb","../../math/Vector2":"xARF"}],"DSn7":[function(require,module,exports) {
var t=require("../../utils/Class"),l=new t({initialize:function(t,l,i,s,e,c,o){this.world=t,this.name="",this.active=!0,this.overlapOnly=l,this.object1=i,this.object2=s,this.collideCallback=e,this.processCallback=c,this.callbackContext=o},setName:function(t){return this.name=t,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});module.exports=l;
},{"../../utils/Class":"Q4x4"}],"iwgo":[function(require,module,exports) {
var e=require("./const"),o=function(o,n,c,i){var t=0,l=o.deltaAbsX()+n.deltaAbsX()+i;return 0===o._dx&&0===n._dx?(o.embedded=!0,n.embedded=!0):o._dx>n._dx?(t=o.right-n.x)>l&&!c||!1===o.checkCollision.right||!1===n.checkCollision.left?t=0:(o.touching.none=!1,o.touching.right=!0,n.touching.none=!1,n.touching.left=!0,n.physicsType===e.STATIC_BODY&&(o.blocked.none=!1,o.blocked.right=!0),o.physicsType===e.STATIC_BODY&&(n.blocked.none=!1,n.blocked.left=!0)):o._dx<n._dx&&(-(t=o.x-n.width-n.x)>l&&!c||!1===o.checkCollision.left||!1===n.checkCollision.right?t=0:(o.touching.none=!1,o.touching.left=!0,n.touching.none=!1,n.touching.right=!0,n.physicsType===e.STATIC_BODY&&(o.blocked.none=!1,o.blocked.left=!0),o.physicsType===e.STATIC_BODY&&(n.blocked.none=!1,n.blocked.right=!0))),o.overlapX=t,n.overlapX=t,t};module.exports=o;
},{"./const":"ObUI"}],"BDqg":[function(require,module,exports) {
var o=require("./const"),e=function(e,n,c,d){var i=0,l=e.deltaAbsY()+n.deltaAbsY()+d;return 0===e._dy&&0===n._dy?(e.embedded=!0,n.embedded=!0):e._dy>n._dy?(i=e.bottom-n.y)>l&&!c||!1===e.checkCollision.down||!1===n.checkCollision.up?i=0:(e.touching.none=!1,e.touching.down=!0,n.touching.none=!1,n.touching.up=!0,n.physicsType===o.STATIC_BODY&&(e.blocked.none=!1,e.blocked.down=!0),e.physicsType===o.STATIC_BODY&&(n.blocked.none=!1,n.blocked.up=!0)):e._dy<n._dy&&(-(i=e.y-n.bottom)>l&&!c||!1===e.checkCollision.up||!1===n.checkCollision.down?i=0:(e.touching.none=!1,e.touching.up=!0,n.touching.none=!1,n.touching.down=!0,n.physicsType===o.STATIC_BODY&&(e.blocked.none=!1,e.blocked.up=!0),e.physicsType===o.STATIC_BODY&&(n.blocked.none=!1,n.blocked.down=!0))),e.overlapY=i,n.overlapY=i,i};module.exports=e;
},{"./const":"ObUI"}],"eVvT":[function(require,module,exports) {
var l=function(l,a){return l.collisionCallback?!l.collisionCallback.call(l.collisionCallbackContext,a,l):!l.layer.callbacks[l.index]||!l.layer.callbacks[l.index].callback.call(l.layer.callbacks[l.index].callbackContext,a,l)};module.exports=l;
},{}],"Bm7E":[function(require,module,exports) {
var t=require("../utils/array/QuickSelect");function i(t){if(!(this instanceof i))return new i(t,[".left",".top",".right",".bottom"]);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function n(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function r(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,h){h||(h=x(null)),h.minX=1/0,h.minY=1/0,h.maxX=-1/0,h.maxY=-1/0;for(var a,o=i;o<n;o++)a=t.children[o],e(h,t.leaf?r(a):a);return h}function e(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function a(t,i){return t.minX-i.minX}function o(t,i){return t.minY-i.minY}function s(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function l(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function u(t,i){var n=Math.max(t.minX,i.minX),r=Math.max(t.minY,i.minY),h=Math.min(t.maxX,i.maxX),e=Math.min(t.maxY,i.maxY);return Math.max(0,h-n)*Math.max(0,e-r)}function c(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function f(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function x(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,h,e){for(var a,o=[n,r];o.length;)(r=o.pop())-(n=o.pop())<=h||(a=n+Math.ceil((r-n)/h/2)*h,t(i,a,n,r,e),o.push(n,a,a,r))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var i=this.data,n=[],r=this.toBBox;if(!f(t,i))return n;for(var h,e,a,o,s=[];i;){for(h=0,e=i.children.length;h<e;h++)a=i.children[h],f(t,o=i.leaf?r(a):a)&&(i.leaf?n.push(a):c(t,o)?this._all(a,n):s.push(a));i=s.pop()}return n},collides:function(t){var i=this.data,n=this.toBBox;if(!f(t,i))return!1;for(var r,h,e,a,o=[];i;){for(r=0,h=i.children.length;r<h;r++)if(e=i.children[r],f(t,a=i.leaf?n(e):e)){if(i.leaf||c(t,a))return!0;o.push(e)}i=o.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var h=this.data;this.data=r,r=h}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=x([]),this},remove:function(t,i){if(!t)return this;for(var r,h,e,a,o=this.data,s=this.toBBox(t),l=[],m=[];o||l.length;){if(o||(o=l.pop(),h=l[l.length-1],r=m.pop(),a=!0),o.leaf&&-1!==(e=n(t,o.children,i)))return o.children.splice(e,1),l.push(o),this._condense(l),this;a||o.leaf||!c(o,s)?h?(r++,o=h.children[r],a=!1):o=null:(l.push(o),m.push(r),r=0,h=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:a,compareMinY:o,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},_build:function(t,i,n,h){var e,a=n-i+1,o=this._maxEntries;if(a<=o)return r(e=x(t.slice(i,n+1)),this.toBBox),e;h||(h=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,h-1))),(e=x([])).leaf=!1,e.height=h;var s,l,m,u,c=Math.ceil(a/o),f=c*Math.ceil(Math.sqrt(o));for(d(t,i,n,f,this.compareMinX),s=i;s<=n;s+=f)for(d(t,s,m=Math.min(s+f-1,n),c,this.compareMinY),l=s;l<=m;l+=c)u=Math.min(l+c-1,m),e.children.push(this._build(t,l,u,h-1));return r(e,this.toBBox),e},_chooseSubtree:function(t,i,n,r){for(var h,e,a,o,l,u,c,f;r.push(i),!i.leaf&&r.length-1!==n;){for(c=f=1/0,h=0,e=i.children.length;h<e;h++)l=s(a=i.children[h]),(u=m(t,a)-l)<f?(f=u,c=l<c?l:c,o=a):u===f&&l<c&&(c=l,o=a);i=o||i.children[0]}return i},_insert:function(t,i,n){var r=this.toBBox,h=n?t:r(t),a=[],o=this._chooseSubtree(h,this.data,i,a);for(o.children.push(t),e(o,h);i>=0&&a[i].children.length>this._maxEntries;)this._split(a,i),i--;this._adjustParentBBoxes(h,a,i)},_split:function(t,i){var n=t[i],h=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,h);var a=this._chooseSplitIndex(n,e,h),o=x(n.children.splice(a,n.children.length-a));o.height=n.height,o.leaf=n.leaf,r(n,this.toBBox),r(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},_splitRoot:function(t,i){this.data=x([t,i]),this.data.height=t.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},_chooseSplitIndex:function(t,i,n){var r,e,a,o,l,m,c,f;for(m=c=1/0,r=i;r<=n-i;r++)o=u(e=h(t,0,r,this.toBBox),a=h(t,r,n,this.toBBox)),l=s(e)+s(a),o<m?(m=o,f=r,c=l<c?l:c):o===m&&l<c&&(c=l,f=r);return f},_chooseSplitAxis:function(t,i,n){var r=t.leaf?this.compareMinX:a,h=t.leaf?this.compareMinY:o;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,h)&&t.children.sort(r)},_allDistMargin:function(t,i,n,r){t.children.sort(r);var a,o,s=this.toBBox,m=h(t,0,i,s),u=h(t,n-i,n,s),c=l(m)+l(u);for(a=i;a<n-i;a++)o=t.children[a],e(m,t.leaf?s(o):o),c+=l(m);for(a=n-i-1;a>=i;a--)o=t.children[a],e(u,t.leaf?s(o):o),c+=l(u);return c},_adjustParentBBoxes:function(t,i,n){for(var r=n;r>=0;r--)e(i[r],t)},_condense:function(t){for(var i,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():r(t[n],this.toBBox)},compareMinX:function(t,i){return t.left-i.left},compareMinY:function(t,i){return t.top-i.top},toBBox:function(t){return{minX:t.left,minY:t.top,maxX:t.right,maxY:t.bottom}}},module.exports=i;
},{"../utils/array/QuickSelect":"zxF2"}],"mlHm":[function(require,module,exports) {
var o=function(o,e){e<0?(o.blocked.none=!1,o.blocked.left=!0):e>0&&(o.blocked.none=!1,o.blocked.right=!0),o.position.x-=e,0===o.bounce.x?o.velocity.x=0:o.velocity.x=-o.velocity.x*o.bounce.x};module.exports=o;
},{}],"MnML":[function(require,module,exports) {
var e=require("./ProcessTileSeparationX"),t=function(t,i,l,r,o,a){var c=0,h=i.faceLeft,f=i.faceRight,n=i.collideLeft,s=i.collideRight;return a||(h=!0,f=!0,n=!0,s=!0),t.deltaX()<0&&s&&t.checkCollision.left?f&&t.x<r&&(c=t.x-r)<-o&&(c=0):t.deltaX()>0&&n&&t.checkCollision.right&&h&&t.right>l&&(c=t.right-l)>o&&(c=0),0!==c&&(t.customSeparateX?t.overlapX=c:e(t,c)),c};module.exports=t;
},{"./ProcessTileSeparationX":"mlHm"}],"gfHr":[function(require,module,exports) {
var o=function(o,e){e<0?(o.blocked.none=!1,o.blocked.up=!0):e>0&&(o.blocked.none=!1,o.blocked.down=!0),o.position.y-=e,0===o.bounce.y?o.velocity.y=0:o.velocity.y=-o.velocity.y*o.bounce.y};module.exports=o;
},{}],"H4XV":[function(require,module,exports) {
var o=require("./ProcessTileSeparationY"),e=function(e,t,l,a,c,r){var i=0,n=t.faceTop,p=t.faceBottom,d=t.collideUp,s=t.collideDown;return r||(n=!0,p=!0,d=!0,s=!0),e.deltaY()<0&&s&&e.checkCollision.up?p&&e.y<a&&(i=e.y-a)<-c&&(i=0):e.deltaY()>0&&d&&e.checkCollision.down&&n&&e.bottom>l&&(i=e.bottom-l)>c&&(i=0),0!==i&&(e.customSeparateY?e.overlapY=i:o(e,i)),i};module.exports=e;
},{"./ProcessTileSeparationY":"gfHr"}],"xMrH":[function(require,module,exports) {
var t=function(t,o){return!(o.right<=t.left||o.bottom<=t.top||o.position.x>=t.right||o.position.y>=t.bottom)};module.exports=t;
},{}],"DYvR":[function(require,module,exports) {
var t=require("./TileCheckX"),e=require("./TileCheckY"),a=require("./TileIntersectsBody"),r=function(r,i,o,s,l,f,h){var n=s.left,b=s.top,u=s.right,c=s.bottom,d=o.faceLeft||o.faceRight,m=o.faceTop||o.faceBottom;if(h||(d=!0,m=!0),!d&&!m)return!1;var M=0,p=0,A=0,T=1;if(i.deltaAbsX()>i.deltaAbsY()?A=-1:i.deltaAbsX()<i.deltaAbsY()&&(T=-1),0!==i.deltaX()&&0!==i.deltaY()&&d&&m&&(A=Math.min(Math.abs(i.position.x-u),Math.abs(i.right-n)),T=Math.min(Math.abs(i.position.y-c),Math.abs(i.bottom-b))),A<T){if(d&&0!==(M=t(i,o,n,u,f,h))&&!a(s,i))return!0;m&&(p=e(i,o,b,c,f,h))}else{if(m&&0!==(p=e(i,o,b,c,f,h))&&!a(s,i))return!0;d&&(M=t(i,o,n,u,f,h))}return 0!==M||0!==p};module.exports=r;
},{"./TileCheckX":"MnML","./TileCheckY":"H4XV","./TileIntersectsBody":"xMrH"}],"HzvS":[function(require,module,exports) {
var e=require("./GetOverlapX"),o=function(o,m,t,a){var r=e(o,m,t,a);if(t||0===r||o.immovable&&m.immovable||o.customSeparateX||m.customSeparateX)return 0!==r||o.embedded&&m.embedded;var v=o.velocity.x,i=m.velocity.x;if(o.immovable||m.immovable)o.immovable?(m.x+=r,m.velocity.x=v-i*m.bounce.x,o.moves&&(m.y+=(o.y-o.prev.y)*o.friction.y)):(o.x-=r,o.velocity.x=i-v*o.bounce.x,m.moves&&(o.y+=(m.y-m.prev.y)*m.friction.y));else{r*=.5,o.x-=r,m.x+=r;var s=Math.sqrt(i*i*m.mass/o.mass)*(i>0?1:-1),c=Math.sqrt(v*v*o.mass/m.mass)*(v>0?1:-1),x=.5*(s+c);s-=x,c-=x,o.velocity.x=x+s*o.bounce.x,m.velocity.x=x+c*m.bounce.x}return!0};module.exports=o;
},{"./GetOverlapX":"iwgo"}],"ZlqU":[function(require,module,exports) {
var e=require("./GetOverlapY"),o=function(o,m,t,a){var r=e(o,m,t,a);if(t||0===r||o.immovable&&m.immovable||o.customSeparateY||m.customSeparateY)return 0!==r||o.embedded&&m.embedded;var v=o.velocity.y,y=m.velocity.y;if(o.immovable||m.immovable)o.immovable?(m.y+=r,m.velocity.y=v-y*m.bounce.y,o.moves&&(m.x+=(o.x-o.prev.x)*o.friction.x)):(o.y-=r,o.velocity.y=y-v*o.bounce.y,m.moves&&(o.x+=(m.x-m.prev.x)*m.friction.x));else{r*=.5,o.y-=r,m.y+=r;var i=Math.sqrt(y*y*m.mass/o.mass)*(y>0?1:-1),s=Math.sqrt(v*v*o.mass/m.mass)*(v>0?1:-1),c=.5*(i+s);i-=c,s-=c,o.velocity.y=c+i*o.bounce.y,m.velocity.y=c+s*m.bounce.y}return!0};module.exports=o;
},{"./GetOverlapY":"BDqg"}],"FaoS":[function(require,module,exports) {
var t=require("../../geom/circle/Contains"),i=require("../../utils/Class"),s=require("./const"),e=require("../../geom/rectangle/Contains"),h=require("../../math/Vector2"),o=new i({initialize:function(t,i){var e=i.displayWidth?i.displayWidth:64,o=i.displayHeight?i.displayHeight:64;this.world=t,this.gameObject=i,this.debugShowBody=t.defaults.debugShowStaticBody,this.debugBodyColor=t.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new h,this.position=new h(i.x-i.displayOriginX,i.y-i.displayOriginY),this.width=e,this.height=o,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new h(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=h.ZERO,this.allowGravity=!1,this.gravity=h.ZERO,this.bounce=h.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=s.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(t,i){return t&&t!==this.gameObject&&(this.gameObject.body=null,t.body=this,this.gameObject=t),i&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var t=this.gameObject;return t.getTopLeft(this.position),this.width=t.displayWidth,this.height=t.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(t,i){return void 0===i&&(i=t),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(t,i),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(t,i,s){void 0===s&&(s=!0);var e=this.gameObject;if(!t&&e.frame&&(t=e.frame.realWidth),!i&&e.frame&&(i=e.frame.realHeight),this.world.staticTree.remove(this),this.width=t,this.height=i,this.halfWidth=Math.floor(t/2),this.halfHeight=Math.floor(i/2),s&&e.getCenter){var h=e.displayWidth/2,o=e.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(h-this.halfWidth,o-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(t,i,s){return void 0===i&&(i=this.offset.x),void 0===s&&(s=this.offset.y),t>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=t,this.width=2*t,this.height=2*t,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(i,s),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(t,i){var s=this.gameObject;void 0===t&&(t=s.x),void 0===i&&(i=s.y),this.world.staticTree.remove(this),s.setPosition(t,i),s.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(i,s){return this.isCircle?t(this,i,s):e(this,i,s)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(t){var i=this.position,s=i.x+this.halfWidth,e=i.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?t.strokeCircle(s,e,this.width/2):t.strokeRect(i.x,i.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(t){return t<=0&&(t=.1),this.mass=t,this},x:{get:function(){return this.position.x},set:function(t){this.world.staticTree.remove(this),this.position.x=t,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(t){this.world.staticTree.remove(this),this.position.y=t,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});module.exports=o;
},{"../../geom/circle/Contains":"YD4D","../../utils/Class":"Q4x4","./const":"ObUI","../../geom/rectangle/Contains":"VQyb","../../math/Vector2":"xARF"}],"nmG1":[function(require,module,exports) {
var e=require("./Body"),i=require("../../math/Clamp"),t=require("../../utils/Class"),r=require("./Collider"),s=require("./const"),o=require("../../math/distance/DistanceBetween"),l=require("eventemitter3"),a=require("./events"),n=require("../../math/fuzzy/Equal"),h=require("../../math/fuzzy/GreaterThan"),c=require("../../math/fuzzy/LessThan"),d=require("./GetOverlapX"),u=require("./GetOverlapY"),y=require("../../utils/object/GetValue"),p=require("../../structs/ProcessQueue"),m=require("./tilemap/ProcessTileCallbacks"),b=require("../../geom/rectangle/Rectangle"),v=require("../../structs/RTree"),f=require("./tilemap/SeparateTile"),g=require("./SeparateX"),x=require("./SeparateY"),C=require("../../structs/Set"),T=require("./StaticBody"),S=require("./tilemap/TileIntersectsBody"),w=require("../../gameobjects/components/TransformMatrix"),O=require("../../math/Vector2"),B=require("../../math/Wrap"),_=new t({Extends:l,initialize:function(e,i){l.call(this),this.scene=e,this.bodies=new C,this.staticBodies=new C,this.pendingDestroy=new C,this.colliders=new p,this.gravity=new O(y(i,"gravity.x",0),y(i,"gravity.y",0)),this.bounds=new b(y(i,"x",0),y(i,"y",0),y(i,"width",e.sys.scale.width),y(i,"height",e.sys.scale.height)),this.checkCollision={up:y(i,"checkCollision.up",!0),down:y(i,"checkCollision.down",!0),left:y(i,"checkCollision.left",!0),right:y(i,"checkCollision.right",!0)},this.fps=y(i,"fps",60),this.fixedStep=!0,this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=y(i,"timeScale",1),this.OVERLAP_BIAS=y(i,"overlapBias",4),this.TILE_BIAS=y(i,"tileBias",16),this.forceX=y(i,"forceX",!1),this.isPaused=y(i,"isPaused",!1),this._total=0,this.drawDebug=y(i,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:y(i,"debugShowBody",!0),debugShowStaticBody:y(i,"debugShowStaticBody",!0),debugShowVelocity:y(i,"debugShowVelocity",!0),bodyDebugColor:y(i,"debugBodyColor",16711935),staticBodyDebugColor:y(i,"debugStaticBodyColor",255),velocityDebugColor:y(i,"debugVelocityColor",65280)},this.maxEntries=y(i,"maxEntries",16),this.useTree=y(i,"useTree",!0),this.tree=new v(this.maxEntries),this.staticTree=new v(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new w,this._tempMatrix2=new w,this.drawDebug&&this.createDebugGraphic()},enable:function(e,i){void 0===i&&(i=s.DYNAMIC_BODY),Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var r=e[t];if(r.isParent)for(var o=r.getChildren(),l=0;l<o.length;l++){var a=o[l];a.isParent?this.enable(a,i):this.enableBody(a,i)}else this.enableBody(r,i)}},enableBody:function(i,t){return void 0===t&&(t=s.DYNAMIC_BODY),i.body||(t===s.DYNAMIC_BODY?i.body=new e(this,i):t===s.STATIC_BODY&&(i.body=new T(this,i))),this.add(i.body),i},add:function(e){return e.physicsType===s.DYNAMIC_BODY?this.bodies.set(e):e.physicsType===s.STATIC_BODY&&(this.staticBodies.set(e),this.staticTree.insert(e)),e.enable=!0,e},disable:function(e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var t=e[i];if(t.isParent)for(var r=t.getChildren(),s=0;s<r.length;s++){var o=r[s];o.isParent?this.disable(o):this.disableBody(o.body)}else this.disableBody(t.body)}},disableBody:function(e){this.remove(e),e.enable=!1},remove:function(e){e.physicsType===s.DYNAMIC_BODY?(this.tree.remove(e),this.bodies.delete(e)):e.physicsType===s.STATIC_BODY&&(this.staticBodies.delete(e),this.staticTree.remove(e))},createDebugGraphic:function(){var e=this.scene.sys.add.graphics({x:0,y:0});return e.setDepth(Number.MAX_VALUE),this.debugGraphic=e,this.drawDebug=!0,e},setBounds:function(e,i,t,r,s,o,l,a){return this.bounds.setTo(e,i,t,r),void 0!==s&&this.setBoundsCollision(s,o,l,a),this},setBoundsCollision:function(e,i,t,r){return void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===t&&(t=!0),void 0===r&&(r=!0),this.checkCollision.left=e,this.checkCollision.right=i,this.checkCollision.up=t,this.checkCollision.down=r,this},pause:function(){return this.isPaused=!0,this.emit(a.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(a.RESUME),this},addCollider:function(e,i,t,s,o){void 0===t&&(t=null),void 0===s&&(s=null),void 0===o&&(o=t);var l=new r(this,!1,e,i,t,s,o);return this.colliders.add(l),l},addOverlap:function(e,i,t,s,o){void 0===t&&(t=null),void 0===s&&(s=null),void 0===o&&(o=t);var l=new r(this,!0,e,i,t,s,o);return this.colliders.add(l),l},removeCollider:function(e){return this.colliders.remove(e),this},setFPS:function(e){return this.fps=e,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(e,i){if(!this.isPaused&&0!==this.bodies.size){var t,r,s=this._frameTime,o=this._frameTimeMS*this.timeScale;this._elapsed+=i;var l=this.bodies.entries,n=this._elapsed>=o;for(this.fixedStep||(s=.001*i,n=!0,this._elapsed=0),t=0;t<l.length;t++)(r=l[t]).enable&&r.preUpdate(n,s);if(n){this._elapsed-=o,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(l));var h=this.colliders.update();for(t=0;t<h.length;t++){var c=h[t];c.active&&c.update()}this.emit(a.WORLD_STEP)}for(;this._elapsed>=o;)this._elapsed-=o,this.step(s)}},step:function(e){var i,t,r=this.bodies.entries,s=r.length;for(i=0;i<s;i++)(t=r[i]).enable&&t.update(e);this.useTree&&(this.tree.clear(),this.tree.load(r));var o=this.colliders.update();for(i=0;i<o.length;i++){var l=o[i];l.active&&l.update()}this.emit(a.WORLD_STEP),this.stepsLastFrame++},postUpdate:function(){var e,i,t=this.bodies.entries,r=t.length,o=this.bodies,l=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,e=0;e<r;e++)(i=t[e]).enable&&i.postUpdate();if(this.drawDebug){var a=this.debugGraphic;for(a.clear(),e=0;e<r;e++)(i=t[e]).willDrawDebug()&&i.drawDebug(a);for(r=(t=l.entries).length,e=0;e<r;e++)(i=t[e]).willDrawDebug()&&i.drawDebug(a)}var n=this.pendingDestroy;if(n.size>0){var h=this.tree,c=this.staticTree;for(r=(t=n.entries).length,e=0;e<r;e++)(i=t[e]).physicsType===s.DYNAMIC_BODY?(h.remove(i),o.delete(i)):i.physicsType===s.STATIC_BODY&&(c.remove(i),l.delete(i)),i.world=void 0,i.gameObject=void 0;n.clear()}},updateMotion:function(e,i){e.allowRotation&&this.computeAngularVelocity(e,i),this.computeVelocity(e,i)},computeAngularVelocity:function(e,t){var r=e.angularVelocity,s=e.angularAcceleration,o=e.angularDrag,l=e.maxAngular;s?r+=s*t:e.allowDrag&&o&&(h(r-(o*=t),0,.1)?r-=o:c(r+o,0,.1)?r+=o:r=0);var a=(r=i(r,-l,l))-e.angularVelocity;e.angularVelocity+=a,e.rotation+=e.angularVelocity*t},computeVelocity:function(e,t){var r=e.velocity.x,s=e.acceleration.x,o=e.drag.x,l=e.maxVelocity.x,a=e.velocity.y,d=e.acceleration.y,u=e.drag.y,y=e.maxVelocity.y,p=e.speed,m=e.maxSpeed,b=e.allowDrag,v=e.useDamping;e.allowGravity&&(r+=(this.gravity.x+e.gravity.x)*t,a+=(this.gravity.y+e.gravity.y)*t),s?r+=s*t:b&&o&&(v?(r*=o,p=Math.sqrt(r*r+a*a),n(p,0,.001)&&(r=0)):h(r-(o*=t),0,.01)?r-=o:c(r+o,0,.01)?r+=o:r=0),d?a+=d*t:b&&u&&(v?(a*=u,p=Math.sqrt(r*r+a*a),n(p,0,.001)&&(a=0)):h(a-(u*=t),0,.01)?a-=u:c(a+u,0,.01)?a+=u:a=0),r=i(r,-l,l),a=i(a,-y,y),e.velocity.set(r,a),m>-1&&p>m&&(e.velocity.normalize().scale(m),p=m),e.speed=p},separate:function(e,i,t,r,s){if(!e.enable||!i.enable||e.checkCollision.none||i.checkCollision.none||!this.intersects(e,i))return!1;if(t&&!1===t.call(r,e.gameObject,i.gameObject))return!1;if(e.isCircle&&i.isCircle)return this.separateCircle(e,i,s);if(e.isCircle!==i.isCircle){var o=e.isCircle?i:e,l=e.isCircle?e:i,n={x:o.x,y:o.y,right:o.right,bottom:o.bottom},h=l.center;if((h.y<n.y||h.y>n.bottom)&&(h.x<n.x||h.x>n.right))return this.separateCircle(e,i,s)}var c=!1,d=!1;this.forceX||Math.abs(this.gravity.y+e.gravity.y)<Math.abs(this.gravity.x+e.gravity.x)?(c=g(e,i,s,this.OVERLAP_BIAS),this.intersects(e,i)&&(d=x(e,i,s,this.OVERLAP_BIAS))):(d=x(e,i,s,this.OVERLAP_BIAS),this.intersects(e,i)&&(c=g(e,i,s,this.OVERLAP_BIAS)));var u=c||d;return u&&(s?(e.onOverlap||i.onOverlap)&&this.emit(a.OVERLAP,e.gameObject,i.gameObject,e,i):(e.onCollide||i.onCollide)&&this.emit(a.COLLIDE,e.gameObject,i.gameObject,e,i)),u},separateCircle:function(e,i,t,r){d(e,i,!1,r),u(e,i,!1,r);var s=0;if(e.isCircle!==i.isCircle){var l={x:i.isCircle?e.position.x:i.position.x,y:i.isCircle?e.position.y:i.position.y,right:i.isCircle?e.right:i.right,bottom:i.isCircle?e.bottom:i.bottom},n={x:e.isCircle?e.center.x:i.center.x,y:e.isCircle?e.center.y:i.center.y,radius:e.isCircle?e.halfWidth:i.halfWidth};n.y<l.y?n.x<l.x?s=o(n.x,n.y,l.x,l.y)-n.radius:n.x>l.right&&(s=o(n.x,n.y,l.right,l.y)-n.radius):n.y>l.bottom&&(n.x<l.x?s=o(n.x,n.y,l.x,l.bottom)-n.radius:n.x>l.right&&(s=o(n.x,n.y,l.right,l.bottom)-n.radius)),s*=-1}else s=e.halfWidth+i.halfWidth-o(e.center.x,e.center.y,i.center.x,i.center.y);if(t||0===s||e.immovable&&i.immovable||e.customSeparateX||i.customSeparateX)return 0!==s&&(e.onOverlap||i.onOverlap)&&this.emit(a.OVERLAP,e.gameObject,i.gameObject,e,i),0!==s;var h=e.center.x-i.center.x,c=e.center.y-i.center.y,y=Math.sqrt(Math.pow(h,2)+Math.pow(c,2)),p=(i.center.x-e.center.x)/y||0,m=(i.center.y-e.center.y)/y||0,b=2*(e.velocity.x*p+e.velocity.y*m-i.velocity.x*p-i.velocity.y*m)/(e.mass+i.mass);e.immovable||(e.velocity.x=e.velocity.x-b*e.mass*p,e.velocity.y=e.velocity.y-b*e.mass*m),i.immovable||(i.velocity.x=i.velocity.x+b*i.mass*p,i.velocity.y=i.velocity.y+b*i.mass*m);var v=i.velocity.x-e.velocity.x,f=i.velocity.y-e.velocity.y,g=Math.atan2(f,v),x=this._frameTime;return e.immovable||i.immovable||(s/=2),e.immovable||(e.x+=e.velocity.x*x-s*Math.cos(g),e.y+=e.velocity.y*x-s*Math.sin(g)),i.immovable||(i.x+=i.velocity.x*x+s*Math.cos(g),i.y+=i.velocity.y*x+s*Math.sin(g)),e.velocity.x*=e.bounce.x,e.velocity.y*=e.bounce.y,i.velocity.x*=i.bounce.x,i.velocity.y*=i.bounce.y,(e.onCollide||i.onCollide)&&this.emit(a.COLLIDE,e.gameObject,i.gameObject,e,i),!0},intersects:function(e,i){return e!==i&&(e.isCircle||i.isCircle?e.isCircle?i.isCircle?o(e.center.x,e.center.y,i.center.x,i.center.y)<=e.halfWidth+i.halfWidth:this.circleBodyIntersects(e,i):this.circleBodyIntersects(i,e):!(e.right<=i.position.x||e.bottom<=i.position.y||e.position.x>=i.right||e.position.y>=i.bottom))},circleBodyIntersects:function(e,t){var r=i(e.center.x,t.left,t.right),s=i(e.center.y,t.top,t.bottom);return(e.center.x-r)*(e.center.x-r)+(e.center.y-s)*(e.center.y-s)<=e.halfWidth*e.halfWidth},overlap:function(e,i,t,r,s){return void 0===t&&(t=null),void 0===r&&(r=null),void 0===s&&(s=t),this.collideObjects(e,i,t,r,s,!0)},collide:function(e,i,t,r,s){return void 0===t&&(t=null),void 0===r&&(r=null),void 0===s&&(s=t),this.collideObjects(e,i,t,r,s,!1)},collideObjects:function(e,i,t,r,s,o){var l,a;e.isParent&&void 0===e.physicsType&&(e=e.children.entries),i&&i.isParent&&void 0===i.physicsType&&(i=i.children.entries);var n=Array.isArray(e),h=Array.isArray(i);if(this._total=0,n||h)if(!n&&h)for(l=0;l<i.length;l++)this.collideHandler(e,i[l],t,r,s,o);else if(n&&!h)if(i)for(l=0;l<e.length;l++)this.collideHandler(e[l],i,t,r,s,o);else for(l=0;l<e.length;l++){var c=e[l];for(a=l+1;a<e.length;a++)l!==a&&this.collideHandler(c,e[a],t,r,s,o)}else for(l=0;l<e.length;l++)for(a=0;a<i.length;a++)this.collideHandler(e[l],i[a],t,r,s,o);else this.collideHandler(e,i,t,r,s,o);return this._total>0},collideHandler:function(e,i,t,r,s,o){if(void 0===i&&e.isParent)return this.collideGroupVsGroup(e,e,t,r,s,o);if(!e||!i)return!1;if(e.body){if(i.body)return this.collideSpriteVsSprite(e,i,t,r,s,o);if(i.isParent)return this.collideSpriteVsGroup(e,i,t,r,s,o);if(i.isTilemap)return this.collideSpriteVsTilemapLayer(e,i,t,r,s,o)}else if(e.isParent){if(i.body)return this.collideSpriteVsGroup(i,e,t,r,s,o);if(i.isParent)return this.collideGroupVsGroup(e,i,t,r,s,o);if(i.isTilemap)return this.collideGroupVsTilemapLayer(e,i,t,r,s,o)}else if(e.isTilemap){if(i.body)return this.collideSpriteVsTilemapLayer(i,e,t,r,s,o);if(i.isParent)return this.collideGroupVsTilemapLayer(i,e,t,r,s,o)}},collideSpriteVsSprite:function(e,i,t,r,s,o){return!(!e.body||!i.body)&&(this.separate(e.body,i.body,r,s,o)&&(t&&t.call(s,e,i),this._total++),!0)},collideSpriteVsGroup:function(e,i,t,r,o,l){var a,n,h,c=e.body;if(0!==i.length&&c&&c.enable&&!c.checkCollision.none)if(this.useTree){var d=this.treeMinMax;d.minX=c.left,d.minY=c.top,d.maxX=c.right,d.maxY=c.bottom;var u=i.physicsType===s.DYNAMIC_BODY?this.tree.search(d):this.staticTree.search(d);for(n=u.length,a=0;a<n;a++)c!==(h=u[a])&&h.enable&&!h.checkCollision.none&&i.contains(h.gameObject)&&this.separate(c,h,r,o,l)&&(t&&t.call(o,c.gameObject,h.gameObject),this._total++)}else{var y=i.getChildren(),p=i.children.entries.indexOf(e);for(n=y.length,a=0;a<n;a++)(h=y[a].body)&&a!==p&&h.enable&&this.separate(c,h,r,o,l)&&(t&&t.call(o,c.gameObject,h.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(e,i,t,r,s,o){var l=e.getChildren();if(0===l.length)return!1;for(var a=!1,n=0;n<l.length;n++)l[n].body&&this.collideSpriteVsTilemapLayer(l[n],i,t,r,s,o)&&(a=!0);return a},collideTiles:function(e,i,t,r,s){return!(!e.body.enable||0===i.length)&&this.collideSpriteVsTilesHandler(e,i,t,r,s,!1,!1)},overlapTiles:function(e,i,t,r,s){return!(!e.body.enable||0===i.length)&&this.collideSpriteVsTilesHandler(e,i,t,r,s,!0,!1)},collideSpriteVsTilemapLayer:function(e,i,t,r,s,o){var l=e.body;if(!l.enable||l.checkCollision.none)return!1;var a=l.position.x,n=l.position.y,h=l.width,c=l.height,d=i.layer;if(d.tileWidth>d.baseTileWidth){var u=(d.tileWidth-d.baseTileWidth)*i.scaleX;a-=u,h+=u}d.tileHeight>d.baseTileHeight&&(c+=(d.tileHeight-d.baseTileHeight)*i.scaleY);var y=i.getTilesWithinWorldXY(a,n,h,c);return 0!==y.length&&this.collideSpriteVsTilesHandler(e,y,t,r,s,o,!0)},collideSpriteVsTilesHandler:function(e,i,t,r,s,o,l){for(var n,h,c=e.body,d={left:0,right:0,top:0,bottom:0},u=!1,y=0;y<i.length;y++)h=(n=i[y]).tilemapLayer,d.left=h.tileToWorldX(n.x),d.top=h.tileToWorldY(n.y),n.baseHeight!==n.height&&(d.top-=(n.height-n.baseHeight)*h.scaleY),d.right=d.left+n.width*h.scaleX,d.bottom=d.top+n.height*h.scaleY,S(d,c)&&(!r||r.call(s,e,n))&&m(n,e)&&(o||f(y,c,n,d,h,this.TILE_BIAS,l))&&(this._total++,u=!0,t&&t.call(s,e,n),o&&c.onOverlap?this.emit(a.TILE_OVERLAP,e,n,c):c.onCollide&&this.emit(a.TILE_COLLIDE,e,n,c));return u},collideGroupVsGroup:function(e,i,t,r,s,o){if(0!==e.length&&0!==i.length)for(var l=e.getChildren(),a=0;a<l.length;a++)this.collideSpriteVsGroup(l[a],i,t,r,s,o)},wrap:function(e,i){e.body?this.wrapObject(e,i):e.getChildren?this.wrapArray(e.getChildren(),i):Array.isArray(e)?this.wrapArray(e,i):this.wrapObject(e,i)},wrapArray:function(e,i){for(var t=0;t<e.length;t++)this.wrapObject(e[t],i)},wrapObject:function(e,i){void 0===i&&(i=0),e.x=B(e.x,this.bounds.left-i,this.bounds.right+i),e.y=B(e.y,this.bounds.top-i,this.bounds.bottom+i)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});module.exports=_;
},{"./Body":"z1iu","../../math/Clamp":"dPkx","../../utils/Class":"Q4x4","./Collider":"DSn7","./const":"ObUI","../../math/distance/DistanceBetween":"akRU","eventemitter3":"Clm3","./events":"hR2u","../../math/fuzzy/Equal":"FGft","../../math/fuzzy/GreaterThan":"bfWd","../../math/fuzzy/LessThan":"tTB8","./GetOverlapX":"iwgo","./GetOverlapY":"BDqg","../../utils/object/GetValue":"FWyS","../../structs/ProcessQueue":"mKHj","./tilemap/ProcessTileCallbacks":"eVvT","../../geom/rectangle/Rectangle":"ACYM","../../structs/RTree":"Bm7E","./tilemap/SeparateTile":"DYvR","./SeparateX":"HzvS","./SeparateY":"ZlqU","../../structs/Set":"TNKn","./StaticBody":"FaoS","./tilemap/TileIntersectsBody":"xMrH","../../gameobjects/components/TransformMatrix":"hzKR","../../math/Vector2":"xARF","../../math/Wrap":"gwbj"}],"wCF2":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../../math/DegToRad"),s=require("../../math/distance/DistanceBetween"),i=require("../../math/distance/DistanceSquared"),o=require("./Factory"),r=require("../../utils/object/GetFastValue"),n=require("../../utils/object/Merge"),l=require("./components/OverlapCirc"),c=require("./components/OverlapRect"),d=require("../../plugins/PluginCache"),u=require("../../scene/events"),h=require("../../math/Vector2"),a=require("./World"),v=new e({initialize:function(e){this.scene=e,this.systems=e.sys,this.config=this.getConfig(),this.world,this.add,e.sys.events.once(u.BOOT,this.boot,this),e.sys.events.on(u.START,this.start,this)},boot:function(){this.world=new a(this.scene,this.config),this.add=new o(this.world),this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new a(this.scene,this.config),this.add=new o(this.world));var e=this.systems.events;e.on(u.UPDATE,this.world.update,this.world),e.on(u.POST_UPDATE,this.world.postUpdate,this.world),e.once(u.SHUTDOWN,this.shutdown,this)},getConfig:function(){var e=this.systems.game.config.physics,t=this.systems.settings.physics;return n(r(t,"arcade",{}),r(e,"arcade",{}))},overlap:function(e,t,s,i,o){return void 0===s&&(s=null),void 0===i&&(i=null),void 0===o&&(o=s),this.world.collideObjects(e,t,s,i,o,!0)},collide:function(e,t,s,i,o){return void 0===s&&(s=null),void 0===i&&(i=null),void 0===o&&(o=s),this.world.collideObjects(e,t,s,i,o,!1)},collideTiles:function(e,t,s,i,o){return this.world.collideTiles(e,t,s,i,o)},overlapTiles:function(e,t,s,i,o){return this.world.overlapTiles(e,t,s,i,o)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(e,t,s,i,o,r){void 0===i&&(i=60);var n=Math.atan2(s-e.y,t-e.x);return e.body.acceleration.setToPolar(n,i),void 0!==o&&void 0!==r&&e.body.maxVelocity.set(o,r),n},accelerateToObject:function(e,t,s,i,o){return this.accelerateTo(e,t.x,t.y,s,i,o)},closest:function(e,t){t||(t=this.world.bodies.entries);for(var s=Number.MAX_VALUE,o=null,r=e.x,n=e.y,l=t.length,c=0;c<l;c++){var d=t[c],u=d.body||d;if(e!==d&&e!==u&&e!==u.gameObject&&e!==u.center){var h=i(r,n,u.center.x,u.center.y);h<s&&(o=d,s=h)}}return o},furthest:function(e,t){t||(t=this.world.bodies.entries);for(var s=-1,o=null,r=e.x,n=e.y,l=t.length,c=0;c<l;c++){var d=t[c],u=d.body||d;if(e!==d&&e!==u&&e!==u.gameObject&&e!==u.center){var h=i(r,n,u.center.x,u.center.y);h>s&&(o=d,s=h)}}return o},moveTo:function(e,t,i,o,r){void 0===o&&(o=60),void 0===r&&(r=0);var n=Math.atan2(i-e.y,t-e.x);return r>0&&(o=s(e.x,e.y,t,i)/(r/1e3)),e.body.velocity.setToPolar(n,o),n},moveToObject:function(e,t,s,i){return this.moveTo(e,t.x,t.y,s,i)},velocityFromAngle:function(e,s,i){return void 0===s&&(s=60),void 0===i&&(i=new h),i.setToPolar(t(e),s)},velocityFromRotation:function(e,t,s){return void 0===t&&(t=60),void 0===s&&(s=new h),s.setToPolar(e,t)},overlapRect:function(e,t,s,i,o,r){return c(this.world,e,t,s,i,o,r)},overlapCirc:function(e,t,s,i,o){return l(this.world,e,t,s,i,o)},shutdown:function(){if(this.world){var e=this.systems.events;e.off(u.UPDATE,this.world.update,this.world),e.off(u.POST_UPDATE,this.world.postUpdate,this.world),e.off(u.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});d.register("ArcadePhysics",v,"arcadePhysics"),module.exports=v;
},{"../../utils/Class":"Q4x4","../../math/DegToRad":"FzPC","../../math/distance/DistanceBetween":"akRU","../../math/distance/DistanceSquared":"e7qD","./Factory":"WMTu","../../utils/object/GetFastValue":"xbYy","../../utils/object/Merge":"J7IV","./components/OverlapCirc":"JwdB","./components/OverlapRect":"LGhg","../../plugins/PluginCache":"vXV4","../../scene/events":"Zlz3","../../math/Vector2":"xARF","./World":"nmG1"}],"mtQ7":[function(require,module,exports) {
var e=require("./const"),r=require("../../utils/object/Extend"),i={ArcadePhysics:require("./ArcadePhysics"),Body:require("./Body"),Collider:require("./Collider"),Components:require("./components"),Events:require("./events"),Factory:require("./Factory"),Group:require("./PhysicsGroup"),Image:require("./ArcadeImage"),Sprite:require("./ArcadeSprite"),StaticBody:require("./StaticBody"),StaticGroup:require("./StaticPhysicsGroup"),World:require("./World")};i=r(!1,i,e),module.exports=i;
},{"./const":"ObUI","../../utils/object/Extend":"CtVZ","./ArcadePhysics":"wCF2","./Body":"z1iu","./Collider":"DSn7","./components":"q0Tk","./events":"hR2u","./Factory":"WMTu","./PhysicsGroup":"eyNj","./ArcadeImage":"ZUyf","./ArcadeSprite":"ch6Q","./StaticBody":"FaoS","./StaticPhysicsGroup":"lteY","./World":"nmG1"}],"tc5o":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../../math/Vector2"),n=new e({initialize:function(){this.boundsCenter=new t,this.centerDiff=new t},parseBody:function(e){if(!(e=e.hasOwnProperty("body")?e.body:e).hasOwnProperty("bounds")||!e.hasOwnProperty("centerOfMass"))return!1;var t=this.boundsCenter,n=this.centerDiff,r=e.bounds.max.x-e.bounds.min.x,i=e.bounds.max.y-e.bounds.min.y,o=r*e.centerOfMass.x,s=i*e.centerOfMass.y;return t.set(r/2,i/2),n.set(o-t.x,s-t.y),!0},getTopLeft:function(e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=0),this.parseBody(e)){var i=this.boundsCenter,o=this.centerDiff;return new t(n+i.x+o.x,r+i.y+o.y)}return!1},getTopCenter:function(e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=0),this.parseBody(e)){var i=this.boundsCenter,o=this.centerDiff;return new t(n+o.x,r+i.y+o.y)}return!1},getTopRight:function(e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=0),this.parseBody(e)){var i=this.boundsCenter,o=this.centerDiff;return new t(n-(i.x-o.x),r+i.y+o.y)}return!1},getLeftCenter:function(e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=0),this.parseBody(e)){var i=this.boundsCenter,o=this.centerDiff;return new t(n+i.x+o.x,r+o.y)}return!1},getCenter:function(e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=0),this.parseBody(e)){var i=this.centerDiff;return new t(n+i.x,r+i.y)}return!1},getRightCenter:function(e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=0),this.parseBody(e)){var i=this.boundsCenter,o=this.centerDiff;return new t(n-(i.x-o.x),r+o.y)}return!1},getBottomLeft:function(e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=0),this.parseBody(e)){var i=this.boundsCenter,o=this.centerDiff;return new t(n+i.x+o.x,r-(i.y-o.y))}return!1},getBottomCenter:function(e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=0),this.parseBody(e)){var i=this.boundsCenter,o=this.centerDiff;return new t(n+o.x,r-(i.y-o.y))}return!1},getBottomRight:function(e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=0),this.parseBody(e)){var i=this.boundsCenter,o=this.centerDiff;return new t(n-(i.x-o.x),r-(i.y-o.y))}return!1}});module.exports=n;
},{"../../utils/Class":"Q4x4","../../math/Vector2":"xARF"}],"T2ej":[function(require,module,exports) {
var n={};module.exports=n,n.create=function(n,t){return{x:n||0,y:t||0}},n.clone=function(n){return{x:n.x,y:n.y}},n.magnitude=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},n.magnitudeSquared=function(n){return n.x*n.x+n.y*n.y},n.rotate=function(n,t,r){var e=Math.cos(t),x=Math.sin(t);r||(r={});var y=n.x*e-n.y*x;return r.y=n.x*x+n.y*e,r.x=y,r},n.rotateAbout=function(n,t,r,e){var x=Math.cos(t),y=Math.sin(t);e||(e={});var u=r.x+((n.x-r.x)*x-(n.y-r.y)*y);return e.y=r.y+((n.x-r.x)*y+(n.y-r.y)*x),e.x=u,e},n.normalise=function(t){var r=n.magnitude(t);return 0===r?{x:0,y:0}:{x:t.x/r,y:t.y/r}},n.dot=function(n,t){return n.x*t.x+n.y*t.y},n.cross=function(n,t){return n.x*t.y-n.y*t.x},n.cross3=function(n,t,r){return(t.x-n.x)*(r.y-n.y)-(t.y-n.y)*(r.x-n.x)},n.add=function(n,t,r){return r||(r={}),r.x=n.x+t.x,r.y=n.y+t.y,r},n.sub=function(n,t,r){return r||(r={}),r.x=n.x-t.x,r.y=n.y-t.y,r},n.mult=function(n,t){return{x:n.x*t,y:n.y*t}},n.div=function(n,t){return{x:n.x/t,y:n.y/t}},n.perp=function(n,t){return{x:(t=!0===t?-1:1)*-n.y,y:t*n.x}},n.neg=function(n){return{x:-n.x,y:-n.y}},n.angle=function(n,t){return Math.atan2(t.y-n.y,t.x-n.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()];
},{}],"PO6A":[function(require,module,exports) {
var n={};module.exports=n,function(){n._nextId=0,n._seed=0,n._nowStartTime=+new Date,n.extend=function(e,t){var r,o;"boolean"==typeof t?(r=2,o=t):(r=1,o=!0);for(var c=r;c<arguments.length;c++){var i=arguments[c];if(i)for(var a in i)o&&i[a]&&i[a].constructor===Object?e[a]&&e[a].constructor!==Object?e[a]=i[a]:(e[a]=e[a]||{},n.extend(e[a],o,i[a])):e[a]=i[a]}return e},n.clone=function(e,t){return n.extend({},t,e)},n.keys=function(n){if(Object.keys)return Object.keys(n);var e=[];for(var t in n)e.push(t);return e},n.values=function(n){var e=[];if(Object.keys){for(var t=Object.keys(n),r=0;r<t.length;r++)e.push(n[t[r]]);return e}for(var o in n)e.push(n[o]);return e},n.get=function(n,e,t,r){e=e.split(".").slice(t,r);for(var o=0;o<e.length;o+=1)n=n[e[o]];return n},n.set=function(e,t,r,o,c){var i=t.split(".").slice(o,c);return n.get(e,t,0,-1)[i[i.length-1]]=r,r},n.shuffle=function(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(n.random()*(t+1)),o=e[t];e[t]=e[r],e[r]=o}return e},n.choose=function(e){return e[Math.floor(n.random()*e.length)]},n.isElement=function(n){return"undefined"!=typeof HTMLElement?n instanceof HTMLElement:!!(n&&n.nodeType&&n.nodeName)},n.isArray=function(n){return"[object Array]"===Object.prototype.toString.call(n)},n.isFunction=function(n){return"function"==typeof n},n.isPlainObject=function(n){return"object"==typeof n&&n.constructor===Object},n.isString=function(n){return"[object String]"===Object.prototype.toString.call(n)},n.clamp=function(n,e,t){return n<e?e:n>t?t:n},n.sign=function(n){return n<0?-1:1},n.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-n._nowStartTime},n.random=function(n,t){return t=void 0!==t?t:1,(n=void 0!==n?n:0)+e()*(t-n)};var e=function(){return n._seed=(9301*n._seed+49297)%233280,n._seed/233280};n.colorToNumber=function(n){return 3==(n=n.replace("#","")).length&&(n=n.charAt(0)+n.charAt(0)+n.charAt(1)+n.charAt(1)+n.charAt(2)+n.charAt(2)),parseInt(n,16)},n.logLevel=1,n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.nextId=function(){return n._nextId++},n.indexOf=function(n,e){if(n.indexOf)return n.indexOf(e);for(var t=0;t<n.length;t++)if(n[t]===e)return t;return-1},n.map=function(n,e){if(n.map)return n.map(e);for(var t=[],r=0;r<n.length;r+=1)t.push(e(n[r]));return t},n.topologicalSort=function(e){var t=[],r=[],o=[];for(var c in e)r[c]||o[c]||n._topologicalSort(c,r,o,e,t);return t},n._topologicalSort=function(e,t,r,o,c){var i=o[e]||[];r[e]=!0;for(var a=0;a<i.length;a+=1){var u=i[a];r[u]||(t[u]||n._topologicalSort(u,t,r,o,c))}r[e]=!1,t[e]=!0,c.push(e)},n.chain=function(){for(var n=[],e=0;e<arguments.length;e+=1){var t=arguments[e];t._chained?n.push.apply(n,t._chained):n.push(t)}var r=function(){for(var e,t=new Array(arguments.length),r=0,o=arguments.length;r<o;r++)t[r]=arguments[r];for(r=0;r<n.length;r+=1){var c=n[r].apply(e,t);void 0!==c&&(e=c)}return e};return r._chained=n,r},n.chainPathBefore=function(e,t,r){return n.set(e,t,n.chain(r,n.get(e,t)))},n.chainPathAfter=function(e,t,r){return n.set(e,t,n.chain(n.get(e,t),r))}}();
},{}],"DMKW":[function(require,module,exports) {
var r={};module.exports=r;var t=require("../geometry/Vector"),n=require("../core/Common");r.create=function(r,t){for(var n=[],e=0;e<r.length;e++){var o=r[e],a={x:o.x,y:o.y,index:e,body:t,isInternal:!1,contact:null,offset:null};a.contact={vertex:a,normalImpulse:0,tangentImpulse:0},n.push(a)}return n},r.fromPath=function(t,n){var e=[];return t.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,function(r,t,n){e.push({x:parseFloat(t),y:parseFloat(n)})}),r.create(e,n)},r.centre=function(n){for(var e,o,a,l=r.area(n,!0),u={x:0,y:0},f=0;f<n.length;f++)a=(f+1)%n.length,e=t.cross(n[f],n[a]),o=t.mult(t.add(n[f],n[a]),e),u=t.add(u,o);return t.div(u,6*l)},r.mean=function(r){for(var n={x:0,y:0},e=0;e<r.length;e++)n.x+=r[e].x,n.y+=r[e].y;return t.div(n,r.length)},r.area=function(r,t){for(var n=0,e=r.length-1,o=0;o<r.length;o++)n+=(r[e].x-r[o].x)*(r[e].y+r[o].y),e=o;return t?n/2:Math.abs(n)/2},r.inertia=function(r,n){for(var e,o,a=0,l=0,u=r,f=0;f<u.length;f++)o=(f+1)%u.length,a+=(e=Math.abs(t.cross(u[o],u[f])))*(t.dot(u[o],u[o])+t.dot(u[o],u[f])+t.dot(u[f],u[f])),l+=e;return n/6*(a/l)},r.translate=function(r,t,n){var e;if(n)for(e=0;e<r.length;e++)r[e].x+=t.x*n,r[e].y+=t.y*n;else for(e=0;e<r.length;e++)r[e].x+=t.x,r[e].y+=t.y;return r},r.rotate=function(r,t,n){if(0!==t){for(var e=Math.cos(t),o=Math.sin(t),a=0;a<r.length;a++){var l=r[a],u=l.x-n.x,f=l.y-n.y;l.x=n.x+(u*e-f*o),l.y=n.y+(u*o+f*e)}return r}},r.contains=function(r,t){for(var n=0;n<r.length;n++){var e=r[n],o=r[(n+1)%r.length];if((t.x-e.x)*(o.y-e.y)+(t.y-e.y)*(e.x-o.x)>0)return!1}return!0},r.scale=function(n,e,o,a){if(1===e&&1===o)return n;var l,u;a=a||r.centre(n);for(var f=0;f<n.length;f++)l=n[f],u=t.sub(l,a),n[f].x=a.x+u.x*e,n[f].y=a.y+u.y*o;return n},r.chamfer=function(r,e,o,a,l){e="number"==typeof e?[e]:e||[8],o=void 0!==o?o:-1,a=a||2,l=l||14;for(var u=[],f=0;f<r.length;f++){var h=r[f-1>=0?f-1:r.length-1],c=r[f],s=r[(f+1)%r.length],i=e[f<e.length?f:e.length-1];if(0!==i){var x=t.normalise({x:c.y-h.y,y:h.x-c.x}),y=t.normalise({x:s.y-c.y,y:c.x-s.x}),g=Math.sqrt(2*Math.pow(i,2)),v=t.mult(n.clone(x),i),p=t.normalise(t.mult(t.add(x,y),.5)),d=t.sub(c,t.mult(p,g)),m=o;-1===o&&(m=1.75*Math.pow(i,.32)),(m=n.clamp(m,a,l))%2==1&&(m+=1);for(var M=Math.acos(t.dot(x,y))/m,b=0;b<m;b++)u.push(t.add(t.rotate(v,M*b),d))}else u.push(c)}return u},r.clockwiseSort=function(n){var e=r.mean(n);return n.sort(function(r,n){return t.angle(e,r)-t.angle(e,n)}),n},r.isConvex=function(r){var t,n,e,o,a=0,l=r.length;if(l<3)return null;for(t=0;t<l;t++)if(e=(t+2)%l,o=(r[n=(t+1)%l].x-r[t].x)*(r[e].y-r[n].y),(o-=(r[n].y-r[t].y)*(r[e].x-r[n].x))<0?a|=1:o>0&&(a|=2),3===a)return!1;return 0!==a||null},r.hull=function(r){var n,e,o=[],a=[];for((r=r.slice(0)).sort(function(r,t){var n=r.x-t.x;return 0!==n?n:r.y-t.y}),e=0;e<r.length;e+=1){for(n=r[e];a.length>=2&&t.cross3(a[a.length-2],a[a.length-1],n)<=0;)a.pop();a.push(n)}for(e=r.length-1;e>=0;e-=1){for(n=r[e];o.length>=2&&t.cross3(o[o.length-2],o[o.length-1],n)<=0;)o.pop();o.push(n)}return o.pop(),a.pop(),o.concat(a)};
},{"../geometry/Vector":"T2ej","../core/Common":"PO6A"}],"RHVv":[function(require,module,exports) {
var e={};module.exports=e;var n=require("./Common");e.on=function(e,n,t){for(var r,s=n.split(" "),o=0;o<s.length;o++)r=s[o],e.events=e.events||{},e.events[r]=e.events[r]||[],e.events[r].push(t);return t},e.off=function(e,t,r){if(t){"function"==typeof t&&(r=t,t=n.keys(e.events).join(" "));for(var s=t.split(" "),o=0;o<s.length;o++){var v=e.events[s[o]],f=[];if(r&&v)for(var i=0;i<v.length;i++)v[i]!==r&&f.push(v[i]);e.events[s[o]]=f}}else e.events={}},e.trigger=function(e,t,r){var s,o,v,f,i=e.events;if(i&&n.keys(i).length>0){r||(r={}),s=t.split(" ");for(var l=0;l<s.length;l++)if(v=i[o=s[l]]){(f=n.clone(r,!1)).name=o,f.source=e;for(var a=0;a<v.length;a++)v[a].apply(e,[f])}}};
},{"./Common":"PO6A"}],"ynnK":[function(require,module,exports) {
var e={};module.exports=e;var i=require("./Events");e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(i,o){for(var s=o*o*o,n=0;n<i.length;n++){var t=i[n],r=t.speed*t.speed+t.angularSpeed*t.angularSpeed;if(0===t.force.x&&0===t.force.y){var l=Math.min(t.motion,r),p=Math.max(t.motion,r);t.motion=e._minBias*l+(1-e._minBias)*p,t.sleepThreshold>0&&t.motion<e._motionSleepThreshold*s?(t.sleepCounter+=1,t.sleepCounter>=t.sleepThreshold&&e.set(t,!0)):t.sleepCounter>0&&(t.sleepCounter-=1)}else e.set(t,!1)}},e.afterCollisions=function(i,o){for(var s=o*o*o,n=0;n<i.length;n++){var t=i[n];if(t.isActive){var r=t.collision,l=r.bodyA.parent,p=r.bodyB.parent;if(!(l.isSleeping&&p.isSleeping||l.isStatic||p.isStatic)&&(l.isSleeping||p.isSleeping)){var a=l.isSleeping&&!l.isStatic?l:p,g=a===l?p:l;!a.isStatic&&g.motion>e._motionWakeThreshold*s&&e.set(a,!1)}}}},e.set=function(e,o){var s=e.isSleeping;o?(e.isSleeping=!0,e.sleepCounter=e.sleepThreshold,e.positionImpulse.x=0,e.positionImpulse.y=0,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.anglePrev=e.angle,e.speed=0,e.angularSpeed=0,e.motion=0,s||i.trigger(e,"sleepStart")):(e.isSleeping=!1,e.sleepCounter=0,s&&i.trigger(e,"sleepEnd"))};
},{"./Events":"RHVv"}],"FjIP":[function(require,module,exports) {
var x={};module.exports=x,x.create=function(m){var n={min:{x:0,y:0},max:{x:0,y:0}};return m&&x.update(n,m),n},x.update=function(x,m,n){x.min.x=1/0,x.max.x=-1/0,x.min.y=1/0,x.max.y=-1/0;for(var y=0;y<m.length;y++){var a=m[y];a.x>x.max.x&&(x.max.x=a.x),a.x<x.min.x&&(x.min.x=a.x),a.y>x.max.y&&(x.max.y=a.y),a.y<x.min.y&&(x.min.y=a.y)}n&&(n.x>0?x.max.x+=n.x:x.min.x+=n.x,n.y>0?x.max.y+=n.y:x.min.y+=n.y)},x.contains=function(x,m){return m.x>=x.min.x&&m.x<=x.max.x&&m.y>=x.min.y&&m.y<=x.max.y},x.overlaps=function(x,m){return x.min.x<=m.max.x&&x.max.x>=m.min.x&&x.max.y>=m.min.y&&x.min.y<=m.max.y},x.translate=function(x,m){x.min.x+=m.x,x.max.x+=m.x,x.min.y+=m.y,x.max.y+=m.y},x.shift=function(x,m){var n=x.max.x-x.min.x,y=x.max.y-x.min.y;x.min.x=m.x,x.max.x=m.x+n,x.min.y=m.y,x.max.y=m.y+y};
},{}],"aon4":[function(require,module,exports) {
var r={};module.exports=r;var e=require("../geometry/Vector"),o=require("../core/Common");r.fromVertices=function(r){for(var t={},n=0;n<r.length;n++){var a=(n+1)%r.length,i=e.normalise({x:r[a].y-r[n].y,y:r[n].x-r[a].x}),x=0===i.y?1/0:i.x/i.y;t[x=x.toFixed(3).toString()]=i}return o.values(t)},r.rotate=function(r,e){if(0!==e)for(var o=Math.cos(e),t=Math.sin(e),n=0;n<r.length;n++){var a,i=r[n];a=i.x*o-i.y*t,i.y=i.x*t+i.y*o,i.x=a}};
},{"../geometry/Vector":"T2ej","../core/Common":"PO6A"}],"kNiP":[function(require,module,exports) {
var e={};module.exports=e;var i=require("../geometry/Vertices"),t=require("../geometry/Vector"),n=require("../core/Sleeping"),s=require("../core/Common"),r=require("../geometry/Bounds"),a=require("../geometry/Axes");!function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(e){var t={id:s.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!e.hasOwnProperty("position")&&e.hasOwnProperty("vertices")?e.position=i.centre(e.vertices):e.hasOwnProperty("vertices")||(t.vertices=i.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var n=s.extend(t,e);return o(n,e),n.setOnCollideWith=function(e,i){return i?this.onCollideWith[e.id]=i:delete this.onCollideWith[e.id],this},n},e.nextGroup=function(i){return i?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var o=function(n,s){s=s||{},e.set(n,{bounds:n.bounds||r.create(n.vertices),positionPrev:n.positionPrev||t.clone(n.position),anglePrev:n.anglePrev||n.angle,vertices:n.vertices,parts:n.parts||[n],isStatic:n.isStatic,isSleeping:n.isSleeping,parent:n.parent||n});var o=n.bounds;if(i.rotate(n.vertices,n.angle,n.position),a.rotate(n.axes,n.angle),r.update(o,n.vertices,n.velocity),e.set(n,{axes:s.axes||n.axes,area:s.area||n.area,mass:s.mass||n.mass,inertia:s.inertia||n.inertia}),1===n.parts.length){var l=n.centerOfMass,c=n.centerOffset,p=o.max.x-o.min.x,y=o.max.y-o.min.y;l.x=-(o.min.x-n.position.x)/p,l.y=-(o.min.y-n.position.y)/y,c.x=p*l.x,c.y=y*l.y}};e.set=function(i,t,s){var r;for(r in"string"==typeof t&&(r=t,(t={})[r]=s),t)if(Object.prototype.hasOwnProperty.call(t,r))switch(s=t[r],r){case"isStatic":e.setStatic(i,s);break;case"isSleeping":n.set(i,s);break;case"mass":e.setMass(i,s);break;case"density":e.setDensity(i,s);break;case"inertia":e.setInertia(i,s);break;case"vertices":e.setVertices(i,s);break;case"position":e.setPosition(i,s);break;case"angle":e.setAngle(i,s);break;case"velocity":e.setVelocity(i,s);break;case"angularVelocity":e.setAngularVelocity(i,s);break;case"parts":e.setParts(i,s);break;case"centre":e.setCentre(i,s);break;default:i[r]=s}},e.setStatic=function(e,i){for(var t=0;t<e.parts.length;t++){var n=e.parts[t];n.isStatic=i,i?(n._original={restitution:n.restitution,friction:n.friction,mass:n.mass,inertia:n.inertia,density:n.density,inverseMass:n.inverseMass,inverseInertia:n.inverseInertia},n.restitution=0,n.friction=1,n.mass=n.inertia=n.density=1/0,n.inverseMass=n.inverseInertia=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.angularVelocity=0,n.speed=0,n.angularSpeed=0,n.motion=0):n._original&&(n.restitution=n._original.restitution,n.friction=n._original.friction,n.mass=n._original.mass,n.inertia=n._original.inertia,n.density=n._original.density,n.inverseMass=n._original.inverseMass,n.inverseInertia=n._original.inverseInertia,n._original=null)}},e.setMass=function(e,i){var t=e.inertia/(e.mass/6);e.inertia=t*(i/6),e.inverseInertia=1/e.inertia,e.mass=i,e.inverseMass=1/e.mass,e.density=e.mass/e.area},e.setDensity=function(i,t){e.setMass(i,t*i.area),i.density=t},e.setInertia=function(e,i){e.inertia=i,e.inverseInertia=1/e.inertia},e.setVertices=function(t,n){n[0].body===t?t.vertices=n:t.vertices=i.create(n,t),t.axes=a.fromVertices(t.vertices),t.area=i.area(t.vertices),e.setMass(t,t.density*t.area);var s=i.centre(t.vertices);i.translate(t.vertices,s,-1),e.setInertia(t,e._inertiaScale*i.inertia(t.vertices,t.mass)),i.translate(t.vertices,t.position),r.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,n,s){var a;for(n=n.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,a=0;a<n.length;a++){var o=n[a];o!==t&&(o.parent=t,t.parts.push(o))}if(1!==t.parts.length){if(s=void 0===s||s){var l=[];for(a=0;a<n.length;a++)l=l.concat(n[a].vertices);i.clockwiseSort(l);var c=i.hull(l),p=i.centre(c);e.setVertices(t,c),i.translate(t.vertices,p)}var y=e._totalProperties(t),v=y.centre.x,u=y.centre.y,x=t.bounds,g=t.centerOfMass,d=t.centerOffset;r.update(x,t.vertices,t.velocity),g.x=-(x.min.x-v)/(x.max.x-x.min.x),g.y=-(x.min.y-u)/(x.max.y-x.min.y),d.x=v,d.y=u,t.area=y.area,t.parent=t,t.position.x=v,t.position.y=u,t.positionPrev.x=v,t.positionPrev.y=u,e.setMass(t,y.mass),e.setInertia(t,y.inertia),e.setPosition(t,y.centre)}},e.setCentre=function(e,i,t){t?(e.positionPrev.x+=i.x,e.positionPrev.y+=i.y,e.position.x+=i.x,e.position.y+=i.y):(e.positionPrev.x=i.x-(e.position.x-e.positionPrev.x),e.positionPrev.y=i.y-(e.position.y-e.positionPrev.y),e.position.x=i.x,e.position.y=i.y)},e.setPosition=function(e,n){var s=t.sub(n,e.position);e.positionPrev.x+=s.x,e.positionPrev.y+=s.y;for(var a=0;a<e.parts.length;a++){var o=e.parts[a];o.position.x+=s.x,o.position.y+=s.y,i.translate(o.vertices,s),r.update(o.bounds,o.vertices,e.velocity)}},e.setAngle=function(e,n){var s=n-e.angle;e.anglePrev+=s;for(var o=0;o<e.parts.length;o++){var l=e.parts[o];l.angle+=s,i.rotate(l.vertices,s,e.position),a.rotate(l.axes,s),r.update(l.bounds,l.vertices,e.velocity),o>0&&t.rotateAbout(l.position,s,e.position,l.position)}},e.setVelocity=function(e,i){e.positionPrev.x=e.position.x-i.x,e.positionPrev.y=e.position.y-i.y,e.velocity.x=i.x,e.velocity.y=i.y,e.speed=t.magnitude(e.velocity)},e.setAngularVelocity=function(e,i){e.anglePrev=e.angle-i,e.angularVelocity=i,e.angularSpeed=Math.abs(e.angularVelocity)},e.translate=function(i,n){e.setPosition(i,t.add(i.position,n))},e.rotate=function(i,t,n){if(n){var s=Math.cos(t),r=Math.sin(t),a=i.position.x-n.x,o=i.position.y-n.y;e.setPosition(i,{x:n.x+(a*s-o*r),y:n.y+(a*r+o*s)}),e.setAngle(i,i.angle+t)}else e.setAngle(i,i.angle+t)},e.scale=function(t,n,s,o){var l=0,c=0;o=o||t.position;for(var p=0;p<t.parts.length;p++){var y=t.parts[p];y.scale.x=n,y.scale.y=s,i.scale(y.vertices,n,s,o),y.axes=a.fromVertices(y.vertices),y.area=i.area(y.vertices),e.setMass(y,t.density*y.area),i.translate(y.vertices,{x:-y.position.x,y:-y.position.y}),e.setInertia(y,e._inertiaScale*i.inertia(y.vertices,y.mass)),i.translate(y.vertices,{x:y.position.x,y:y.position.y}),p>0&&(l+=y.area,c+=y.inertia),y.position.x=o.x+(y.position.x-o.x)*n,y.position.y=o.y+(y.position.y-o.y)*s,r.update(y.bounds,y.vertices,t.velocity)}t.parts.length>1&&(t.area=l,t.isStatic||(e.setMass(t,t.density*l),e.setInertia(t,c))),t.circleRadius&&(n===s?t.circleRadius*=n:t.circleRadius=null)},e.update=function(e,n,s,o){var l=Math.pow(n*s*e.timeScale,2),c=1-e.frictionAir*s*e.timeScale,p=e.position.x-e.positionPrev.x,y=e.position.y-e.positionPrev.y;e.velocity.x=p*c*o+e.force.x/e.mass*l,e.velocity.y=y*c*o+e.force.y/e.mass*l,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.angularVelocity=(e.angle-e.anglePrev)*c*o+e.torque/e.inertia*l,e.anglePrev=e.angle,e.angle+=e.angularVelocity,e.speed=t.magnitude(e.velocity),e.angularSpeed=Math.abs(e.angularVelocity);for(var v=0;v<e.parts.length;v++){var u=e.parts[v];i.translate(u.vertices,e.velocity),v>0&&(u.position.x+=e.velocity.x,u.position.y+=e.velocity.y),0!==e.angularVelocity&&(i.rotate(u.vertices,e.angularVelocity,e.position),a.rotate(u.axes,e.angularVelocity),v>0&&t.rotateAbout(u.position,e.angularVelocity,e.position,u.position)),r.update(u.bounds,u.vertices,e.velocity)}},e.applyForce=function(e,i,t){e.force.x+=t.x,e.force.y+=t.y;var n=i.x-e.position.x,s=i.y-e.position.y;e.torque+=n*t.y-s*t.x},e._totalProperties=function(e){for(var i={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=1===e.parts.length?0:1;n<e.parts.length;n++){var s=e.parts[n],r=s.mass!==1/0?s.mass:1;i.mass+=r,i.area+=s.area,i.inertia+=s.inertia,i.centre=t.add(i.centre,t.mult(s.position,r))}return i.centre=t.div(i.centre,i.mass),i}}();
},{"../geometry/Vertices":"DMKW","../geometry/Vector":"T2ej","../core/Sleeping":"ynnK","../core/Common":"PO6A","../geometry/Bounds":"FjIP","../geometry/Axes":"aon4"}],"tcCB":[function(require,module,exports) {
function r(r,n,t){t=t||0;var e,u,f,o,i,h,l,a=[0,0];return e=r[1][1]-r[0][1],u=r[0][0]-r[1][0],f=e*r[0][0]+u*r[0][1],o=n[1][1]-n[0][1],i=n[0][0]-n[1][0],h=o*n[0][0]+i*n[0][1],U(l=e*i-o*u,0,t)||(a[0]=(i*f-u*h)/l,a[1]=(e*h-o*f)/l),a}function n(r,n,t,e){var u=n[0]-r[0],f=n[1]-r[1],o=e[0]-t[0],i=e[1]-t[1];if(o*f-i*u==0)return!1;var h=(u*(t[1]-r[1])+f*(r[0]-t[0]))/(o*f-i*u),l=(o*(r[1]-t[1])+i*(t[0]-r[0]))/(i*u-o*f);return h>=0&&h<=1&&l>=0&&l<=1}function t(r,n,t){return(n[0]-r[0])*(t[1]-r[1])-(t[0]-r[0])*(n[1]-r[1])}function e(r,n,e){return t(r,n,e)>0}function u(r,n,e){return t(r,n,e)>=0}function f(r,n,e){return t(r,n,e)<0}function o(r,n,e){return t(r,n,e)<=0}module.exports={decomp:x,quickDecomp:E,isSimple:C,removeCollinearPoints:L,removeDuplicatePoints:N,makeCCW:s};var i=[],h=[];function l(r,n,e,u){if(u){var f=i,o=h;f[0]=n[0]-r[0],f[1]=n[1]-r[1],o[0]=e[0]-n[0],o[1]=e[1]-n[1];var l=f[0]*o[0]+f[1]*o[1],a=Math.sqrt(f[0]*f[0]+f[1]*f[1]),c=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return Math.acos(l/(a*c))<u}return 0===t(r,n,e)}function a(r,n){var t=n[0]-r[0],e=n[1]-r[1];return t*t+e*e}function c(r,n){var t=r.length;return r[n<0?n%t+t:n%t]}function g(r){r.length=0}function v(r,n,t,e){for(var u=t;u<e;u++)r.push(n[u])}function s(r){for(var n=0,t=r,u=1;u<r.length;++u)(t[u][1]<t[n][1]||t[u][1]===t[n][1]&&t[u][0]>t[n][0])&&(n=u);return!e(c(r,n-1),c(r,n),c(r,n+1))&&(p(r),!0)}function p(r){for(var n=[],t=r.length,e=0;e!==t;e++)n.push(r.pop());for(e=0;e!==t;e++)r[e]=n[e]}function m(r,n){return f(c(r,n-1),c(r,n),c(r,n+1))}var A=[],M=[];function d(n,t,e){var f,i,h=A,l=M;if(u(c(n,t+1),c(n,t),c(n,e))&&o(c(n,t-1),c(n,t),c(n,e)))return!1;i=a(c(n,t),c(n,e));for(var g=0;g!==n.length;++g)if((g+1)%n.length!==t&&g!==t&&u(c(n,t),c(n,e),c(n,g+1))&&o(c(n,t),c(n,e),c(n,g))&&(h[0]=c(n,t),h[1]=c(n,e),l[0]=c(n,g),l[1]=c(n,g+1),f=r(h,l),a(c(n,t),f)<i))return!1;return!0}function b(r,t,e){for(var u=0;u!==r.length;++u)if(u!==t&&u!==e&&(u+1)%r.length!==t&&(u+1)%r.length!==e&&n(c(r,t),c(r,e),c(r,u),c(r,u+1)))return!1;return!0}function k(r,n,t,e){var u=e||[];if(g(u),n<t)for(var f=n;f<=t;f++)u.push(r[f]);else{for(f=0;f<=t;f++)u.push(r[f]);for(f=n;f<r.length;f++)u.push(r[f])}return u}function q(r){for(var n=[],t=[],e=[],u=[],f=Number.MAX_VALUE,o=0;o<r.length;++o)if(m(r,o))for(var i=0;i<r.length;++i)if(d(r,o,i)){t=q(k(r,o,i,u)),e=q(k(r,i,o,u));for(var h=0;h<e.length;h++)t.push(e[h]);t.length<f&&(n=t,f=t.length,n.push([c(r,o),c(r,i)]))}return n}function x(r){var n=q(r);return n.length>0?y(r,n):[r]}function y(r,n){if(0===n.length)return[r];if(n instanceof Array&&n.length&&n[0]instanceof Array&&2===n[0].length&&n[0][0]instanceof Array){for(var t=[r],e=0;e<n.length;e++)for(var u=n[e],f=0;f<t.length;f++){var o=y(t[f],u);if(o){t.splice(f,1),t.push(o[0],o[1]);break}}return t}u=n,e=r.indexOf(u[0]),f=r.indexOf(u[1]);return-1!==e&&-1!==f&&[k(r,e,f),k(r,f,e)]}function C(r){var t,e=r;for(t=0;t<e.length-1;t++)for(var u=0;u<t-1;u++)if(n(e[t],e[t+1],e[u],e[u+1]))return!1;for(t=1;t<e.length-2;t++)if(n(e[0],e[e.length-1],e[t],e[t+1]))return!1;return!0}function D(r,n,t,e,u){u=u||0;var f=n[1]-r[1],o=r[0]-n[0],i=f*r[0]+o*r[1],h=e[1]-t[1],l=t[0]-e[0],a=h*t[0]+l*t[1],c=f*l-h*o;return U(c,0,u)?[0,0]:[(l*i-o*a)/c,(f*a-h*i)/c]}function E(r,n,t,i,h,l,g){l=l||100,g=g||0,h=h||25,n=void 0!==n?n:[],t=t||[],i=i||[];var s=[0,0],p=[0,0],A=[0,0],M=0,d=0,k=0,q=0,x=0,y=0,C=0,L=[],N=[],U=r,V=r;if(V.length<3)return n;if(++g>l)return console.warn("quickDecomp: max level ("+l+") reached."),n;for(var X=0;X<r.length;++X)if(m(U,X)){t.push(U[X]),M=d=Number.MAX_VALUE;for(var _=0;_<r.length;++_)e(c(U,X-1),c(U,X),c(U,_))&&o(c(U,X-1),c(U,X),c(U,_-1))&&(A=D(c(U,X-1),c(U,X),c(U,_),c(U,_-1)),f(c(U,X+1),c(U,X),A)&&(k=a(U[X],A))<d&&(d=k,p=A,y=_)),e(c(U,X+1),c(U,X),c(U,_+1))&&o(c(U,X+1),c(U,X),c(U,_))&&(A=D(c(U,X+1),c(U,X),c(U,_),c(U,_+1)),e(c(U,X-1),c(U,X),A)&&(k=a(U[X],A))<M&&(M=k,s=A,x=_));if(y===(x+1)%r.length)A[0]=(p[0]+s[0])/2,A[1]=(p[1]+s[1])/2,i.push(A),X<x?(v(L,U,X,x+1),L.push(A),N.push(A),0!==y&&v(N,U,y,U.length),v(N,U,0,X+1)):(0!==X&&v(L,U,X,U.length),v(L,U,0,x+1),L.push(A),N.push(A),v(N,U,y,X+1));else{if(y>x&&(x+=r.length),q=Number.MAX_VALUE,x<y)return n;for(_=y;_<=x;++_)u(c(U,X-1),c(U,X),c(U,_))&&o(c(U,X+1),c(U,X),c(U,_))&&(k=a(c(U,X),c(U,_)))<q&&b(U,X,_)&&(q=k,C=_%r.length);X<C?(v(L,U,X,C+1),0!==C&&v(N,U,C,V.length),v(N,U,0,X+1)):(0!==X&&v(L,U,X,V.length),v(L,U,0,C+1),v(N,U,C,X+1))}return L.length<N.length?(E(L,n,t,i,h,l,g),E(N,n,t,i,h,l,g)):(E(N,n,t,i,h,l,g),E(L,n,t,i,h,l,g)),n}return n.push(r),n}function L(r,n){for(var t=0,e=r.length-1;r.length>3&&e>=0;--e)l(c(r,e-1),c(r,e),c(r,e+1),n)&&(r.splice(e%r.length,1),t++);return t}function N(r,n){for(var t=r.length-1;t>=1;--t)for(var e=r[t],u=t-1;u>=0;--u)V(e,r[u],n)&&r.splice(t,1)}function U(r,n,t){return t=t||0,Math.abs(r-n)<=t}function V(r,n,t){return U(r[0],n[0],t)&&U(r[1],n[1],t)}
},{}],"Mw0C":[function(require,module,exports) {
var e={};module.exports=e;var r=require("../geometry/Vertices"),t=require("../core/Common"),i=require("../body/Body"),a=require("../geometry/Bounds"),o=require("../geometry/Vector"),n=require("../../poly-decomp");e.rectangle=function(e,a,o,n,c){c=c||{};var l={label:"Rectangle Body",position:{x:e,y:a},vertices:r.fromPath("L 0 0 L "+o+" 0 L "+o+" "+n+" L 0 "+n)};if(c.chamfer){var s=c.chamfer;l.vertices=r.chamfer(l.vertices,s.radius,s.quality,s.qualityMin,s.qualityMax),delete c.chamfer}return i.create(t.extend({},l,c))},e.trapezoid=function(e,a,o,n,c,l){l=l||{};var s,u=o*(c*=.5),v=u+(1-2*c)*o,d=v+u;s=c<.5?"L 0 0 L "+u+" "+-n+" L "+v+" "+-n+" L "+d+" 0":"L 0 0 L "+v+" "+-n+" L "+d+" 0";var f={label:"Trapezoid Body",position:{x:e,y:a},vertices:r.fromPath(s)};if(l.chamfer){var h=l.chamfer;f.vertices=r.chamfer(f.vertices,h.radius,h.quality,h.qualityMin,h.qualityMax),delete l.chamfer}return i.create(t.extend({},f,l))},e.circle=function(r,i,a,o,n){o=o||{};var c={label:"Circle Body",circleRadius:a};n=n||25;var l=Math.ceil(Math.max(10,Math.min(n,a)));return l%2==1&&(l+=1),e.polygon(r,i,l,a,t.extend({},c,o))},e.polygon=function(a,o,n,c,l){if(l=l||{},n<3)return e.circle(a,o,c,l);for(var s=2*Math.PI/n,u="",v=.5*s,d=0;d<n;d+=1){var f=v+d*s,h=Math.cos(f)*c,m=Math.sin(f)*c;u+="L "+h.toFixed(3)+" "+m.toFixed(3)+" "}var y={label:"Polygon Body",position:{x:a,y:o},vertices:r.fromPath(u)};if(l.chamfer){var g=l.chamfer;y.vertices=r.chamfer(y.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete l.chamfer}return i.create(t.extend({},y,l))},e.fromVertices=function(a,o,c,l,s,u,v){var d,f,h,m,y,g;for(l=l||{},f=[],s=void 0!==s&&s,u=void 0!==u?u:.01,v=void 0!==v?v:10,n||t.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),t.isArray(c[0])||(c=[c]),g=0;g<c.length;g+=1)if(m=c[g],(h=r.isConvex(m))||!n)m=h?r.clockwiseSort(m):r.hull(m),f.push({position:{x:a,y:o},vertices:m});else{var p=m.map(function(e){return[e.x,e.y]});n.makeCCW(p),!1!==u&&n.removeCollinearPoints(p,u);var x=n.quickDecomp(p);for(y=0;y<x.length;y++){var q=x[y].map(function(e){return{x:e[0],y:e[1]}});v>0&&r.area(q)<v||f.push({position:r.centre(q),vertices:q})}}for(y=0;y<f.length;y++)f[y]=i.create(t.extend(f[y],l));return s&&e.flagCoincidentParts(f,5),f.length>1?(d=i.create(t.extend({parts:f.slice(0)},l)),i.setPosition(d,{x:a,y:o}),d):f[0]},e.flagCoincidentParts=function(e,r){void 0===r&&(r=5);for(var t=0;t<e.length;t++)for(var i=e[t],n=t+1;n<e.length;n++){var c=e[n];if(a.overlaps(i.bounds,c.bounds))for(var l=i.vertices,s=c.vertices,u=0;u<i.vertices.length;u++)for(var v=0;v<c.vertices.length;v++){var d=o.magnitudeSquared(o.sub(l[(u+1)%l.length],s[v])),f=o.magnitudeSquared(o.sub(l[u],s[(v+1)%s.length]));d<r&&f<r&&(l[u].isInternal=!0,s[v].isInternal=!0)}}return e};
},{"../geometry/Vertices":"DMKW","../core/Common":"PO6A","../body/Body":"kNiP","../geometry/Bounds":"FjIP","../geometry/Vector":"T2ej","../../poly-decomp":"tcCB"}],"XuSr":[function(require,module,exports) {
var e={};module.exports=e;var o=require("../core/Events"),t=require("../core/Common"),i=require("../geometry/Bounds"),n=require("./Body");e.create=function(e){return t.extend({id:t.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},e)},e.setModified=function(t,i,n,r){if(o.trigger(t,"compositeModified",t),t.isModified=i,n&&t.parent&&e.setModified(t.parent,i,n,r),r)for(var s=0;s<t.composites.length;s++){var a=t.composites[s];e.setModified(a,i,n,r)}},e.add=function(i,n){var r=[].concat(n);o.trigger(i,"beforeAdd",{object:n});for(var s=0;s<r.length;s++){var a=r[s];switch(a.type){case"body":if(a.parent!==a){t.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(i,a);break;case"constraint":e.addConstraint(i,a);break;case"composite":e.addComposite(i,a);break;case"mouseConstraint":e.addConstraint(i,a.constraint)}}return o.trigger(i,"afterAdd",{object:n}),i},e.remove=function(t,i,n){var r=[].concat(i);o.trigger(t,"beforeRemove",{object:i});for(var s=0;s<r.length;s++){var a=r[s];switch(a.type){case"body":e.removeBody(t,a,n);break;case"constraint":e.removeConstraint(t,a,n);break;case"composite":e.removeComposite(t,a,n);break;case"mouseConstraint":e.removeConstraint(t,a.constraint)}}return o.trigger(t,"afterRemove",{object:i}),t},e.addComposite=function(o,t){return o.composites.push(t),t.parent=o,e.setModified(o,!0,!0,!1),o},e.removeComposite=function(o,t,i){var n=o.composites.indexOf(t);if(-1!==n&&(e.removeCompositeAt(o,n),e.setModified(o,!0,!0,!1)),i)for(var r=0;r<o.composites.length;r++)e.removeComposite(o.composites[r],t,!0);return o},e.removeCompositeAt=function(o,t){return o.composites.splice(t,1),e.setModified(o,!0,!0,!1),o},e.addBody=function(o,t){return o.bodies.push(t),e.setModified(o,!0,!0,!1),o},e.removeBody=function(o,t,i){var n=o.bodies.indexOf(t);if(-1!==n&&(e.removeBodyAt(o,n),e.setModified(o,!0,!0,!1)),i)for(var r=0;r<o.composites.length;r++)e.removeBody(o.composites[r],t,!0);return o},e.removeBodyAt=function(o,t){return o.bodies.splice(t,1),e.setModified(o,!0,!0,!1),o},e.addConstraint=function(o,t){return o.constraints.push(t),e.setModified(o,!0,!0,!1),o},e.removeConstraint=function(o,t,i){var n=o.constraints.indexOf(t);if(-1!==n&&e.removeConstraintAt(o,n),i)for(var r=0;r<o.composites.length;r++)e.removeConstraint(o.composites[r],t,!0);return o},e.removeConstraintAt=function(o,t){return o.constraints.splice(t,1),e.setModified(o,!0,!0,!1),o},e.clear=function(o,t,i){if(i)for(var n=0;n<o.composites.length;n++)e.clear(o.composites[n],t,!0);return t?o.bodies=o.bodies.filter(function(e){return e.isStatic}):o.bodies.length=0,o.constraints.length=0,o.composites.length=0,e.setModified(o,!0,!0,!1),o},e.allBodies=function(o){for(var t=[].concat(o.bodies),i=0;i<o.composites.length;i++)t=t.concat(e.allBodies(o.composites[i]));return t},e.allConstraints=function(o){for(var t=[].concat(o.constraints),i=0;i<o.composites.length;i++)t=t.concat(e.allConstraints(o.composites[i]));return t},e.allComposites=function(o){for(var t=[].concat(o.composites),i=0;i<o.composites.length;i++)t=t.concat(e.allComposites(o.composites[i]));return t},e.get=function(o,t,i){var n,r;switch(i){case"body":n=e.allBodies(o);break;case"constraint":n=e.allConstraints(o);break;case"composite":n=e.allComposites(o).concat(o)}return n?0===(r=n.filter(function(e){return e.id.toString()===t.toString()})).length?null:r[0]:null},e.move=function(o,t,i){return e.remove(o,t),e.add(i,t),o},e.rebase=function(o){for(var i=e.allBodies(o).concat(e.allConstraints(o)).concat(e.allComposites(o)),n=0;n<i.length;n++)i[n].id=t.nextId();return e.setModified(o,!0,!0,!1),o},e.translate=function(o,t,i){for(var r=i?e.allBodies(o):o.bodies,s=0;s<r.length;s++)n.translate(r[s],t);return e.setModified(o,!0,!0,!1),o},e.rotate=function(o,t,i,r){for(var s=Math.cos(t),a=Math.sin(t),c=r?e.allBodies(o):o.bodies,d=0;d<c.length;d++){var f=c[d],u=f.position.x-i.x,l=f.position.y-i.y;n.setPosition(f,{x:i.x+(u*s-l*a),y:i.y+(u*a+l*s)}),n.rotate(f,t)}return e.setModified(o,!0,!0,!1),o},e.scale=function(o,t,i,r,s){for(var a=s?e.allBodies(o):o.bodies,c=0;c<a.length;c++){var d=a[c],f=d.position.x-r.x,u=d.position.y-r.y;n.setPosition(d,{x:r.x+f*t,y:r.y+u*i}),n.scale(d,t,i)}return e.setModified(o,!0,!0,!1),o},e.bounds=function(o){for(var t=e.allBodies(o),n=[],r=0;r<t.length;r+=1){var s=t[r];n.push(s.bounds.min,s.bounds.max)}return i.create(n)};
},{"../core/Events":"RHVv","../core/Common":"PO6A","../geometry/Bounds":"FjIP","./Body":"kNiP"}],"e36s":[function(require,module,exports) {
var n={};module.exports=n;var i=require("../geometry/Vertices"),e=require("../geometry/Vector"),o=require("../core/Sleeping"),t=require("../geometry/Bounds"),s=require("../geometry/Axes"),a=require("../core/Common");n._warming=.4,n._torqueDampen=1,n._minLength=1e-6,n.create=function(n){var i=n;i.bodyA&&!i.pointA&&(i.pointA={x:0,y:0}),i.bodyB&&!i.pointB&&(i.pointB={x:0,y:0});var o=i.bodyA?e.add(i.bodyA.position,i.pointA):i.pointA,t=i.bodyB?e.add(i.bodyB.position,i.pointB):i.pointB,s=e.magnitude(e.sub(o,t));i.length=void 0!==i.length?i.length:s,i.id=i.id||a.nextId(),i.label=i.label||"Constraint",i.type="constraint",i.stiffness=i.stiffness||(i.length>0?1:.7),i.damping=i.damping||0,i.angularStiffness=i.angularStiffness||0,i.angleA=i.bodyA?i.bodyA.angle:i.angleA,i.angleB=i.bodyB?i.bodyB.angle:i.angleB,i.plugin={};var r={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return 0===i.length&&i.stiffness>.1?(r.type="pin",r.anchors=!1):i.stiffness<.9&&(r.type="spring"),i.render=a.extend(r,i.render),i},n.preSolveAll=function(n){for(var i=0;i<n.length;i+=1){var e=n[i],o=e.constraintImpulse;e.isStatic||0===o.x&&0===o.y&&0===o.angle||(e.position.x+=o.x,e.position.y+=o.y,e.angle+=o.angle)}},n.solveAll=function(i,e){for(var o=0;o<i.length;o+=1){var t=i[o],s=!t.bodyA||t.bodyA&&t.bodyA.isStatic,a=!t.bodyB||t.bodyB&&t.bodyB.isStatic;(s||a)&&n.solve(i[o],e)}for(o=0;o<i.length;o+=1)s=!(t=i[o]).bodyA||t.bodyA&&t.bodyA.isStatic,a=!t.bodyB||t.bodyB&&t.bodyB.isStatic,s||a||n.solve(i[o],e)},n.solve=function(i,o){var t=i.bodyA,s=i.bodyB,a=i.pointA,r=i.pointB;if(t||s){t&&!t.isStatic&&(e.rotate(a,t.angle-i.angleA,a),i.angleA=t.angle),s&&!s.isStatic&&(e.rotate(r,s.angle-i.angleB,r),i.angleB=s.angle);var l=a,p=r;if(t&&(l=e.add(t.position,a)),s&&(p=e.add(s.position,r)),l&&p){var y=e.sub(l,p),g=e.magnitude(y);g<n._minLength&&(g=n._minLength);var d,u,v,c,b,f=(g-i.length)/g,m=i.stiffness<1?i.stiffness*o:i.stiffness,A=e.mult(y,f*m),x=(t?t.inverseMass:0)+(s?s.inverseMass:0),B=x+((t?t.inverseInertia:0)+(s?s.inverseInertia:0));if(i.damping){var h=e.create();v=e.div(y,g),b=e.sub(s&&e.sub(s.position,s.positionPrev)||h,t&&e.sub(t.position,t.positionPrev)||h),c=e.dot(v,b)}t&&!t.isStatic&&(u=t.inverseMass/x,t.constraintImpulse.x-=A.x*u,t.constraintImpulse.y-=A.y*u,t.position.x-=A.x*u,t.position.y-=A.y*u,i.damping&&(t.positionPrev.x-=i.damping*v.x*c*u,t.positionPrev.y-=i.damping*v.y*c*u),d=e.cross(a,A)/B*n._torqueDampen*t.inverseInertia*(1-i.angularStiffness),t.constraintImpulse.angle-=d,t.angle-=d),s&&!s.isStatic&&(u=s.inverseMass/x,s.constraintImpulse.x+=A.x*u,s.constraintImpulse.y+=A.y*u,s.position.x+=A.x*u,s.position.y+=A.y*u,i.damping&&(s.positionPrev.x+=i.damping*v.x*c*u,s.positionPrev.y+=i.damping*v.y*c*u),d=e.cross(r,A)/B*n._torqueDampen*s.inverseInertia*(1-i.angularStiffness),s.constraintImpulse.angle+=d,s.angle+=d)}}},n.postSolveAll=function(a){for(var r=0;r<a.length;r++){var l=a[r],p=l.constraintImpulse;if(!(l.isStatic||0===p.x&&0===p.y&&0===p.angle)){o.set(l,!1);for(var y=0;y<l.parts.length;y++){var g=l.parts[y];i.translate(g.vertices,p),y>0&&(g.position.x+=p.x,g.position.y+=p.y),0!==p.angle&&(i.rotate(g.vertices,p.angle,l.position),s.rotate(g.axes,p.angle),y>0&&e.rotateAbout(g.position,p.angle,l.position,g.position)),t.update(g.bounds,g.vertices,l.velocity)}p.angle*=n._warming,p.x*=n._warming,p.y*=n._warming}}},n.pointAWorld=function(n){return{x:(n.bodyA?n.bodyA.position.x:0)+n.pointA.x,y:(n.bodyA?n.bodyA.position.y:0)+n.pointA.y}},n.pointBWorld=function(n){return{x:(n.bodyB?n.bodyB.position.x:0)+n.pointB.x,y:(n.bodyB?n.bodyB.position.y:0)+n.pointB.y}};
},{"../geometry/Vertices":"DMKW","../geometry/Vector":"T2ej","../core/Sleeping":"ynnK","../geometry/Bounds":"FjIP","../geometry/Axes":"aon4","../core/Common":"PO6A"}],"UDHQ":[function(require,module,exports) {
var n={};module.exports=n;var e=require("../body/Composite"),r=require("../constraint/Constraint"),o=require("../core/Common"),t=require("../body/Body"),a=require("./Bodies");n.stack=function(n,r,o,a,d,i,s){for(var c,u=e.create({label:"Stack"}),y=n,b=r,l=0,x=0;x<a;x++){for(var f=0,m=0;m<o;m++){var B=s(y,b,m,x,c,l);if(B){var C=B.bounds.max.y-B.bounds.min.y,p=B.bounds.max.x-B.bounds.min.x;C>f&&(f=C),t.translate(B,{x:.5*p,y:.5*C}),y=B.bounds.max.x+d,e.addBody(u,B),c=B,l+=1}else y+=d}b+=f+i,y=n}return u},n.chain=function(n,t,a,d,i,s){for(var c=n.bodies,u=1;u<c.length;u++){var y=c[u-1],b=c[u],l=y.bounds.max.y-y.bounds.min.y,x=y.bounds.max.x-y.bounds.min.x,f=b.bounds.max.y-b.bounds.min.y,m={bodyA:y,pointA:{x:x*t,y:l*a},bodyB:b,pointB:{x:(b.bounds.max.x-b.bounds.min.x)*d,y:f*i}},B=o.extend(m,s);e.addConstraint(n,r.create(B))}return n.label+=" Chain",n},n.mesh=function(n,t,a,d,i){var s,c,u,y,b,l=n.bodies;for(s=0;s<a;s++){for(c=1;c<t;c++)u=l[c-1+s*t],y=l[c+s*t],e.addConstraint(n,r.create(o.extend({bodyA:u,bodyB:y},i)));if(s>0)for(c=0;c<t;c++)u=l[c+(s-1)*t],y=l[c+s*t],e.addConstraint(n,r.create(o.extend({bodyA:u,bodyB:y},i))),d&&c>0&&(b=l[c-1+(s-1)*t],e.addConstraint(n,r.create(o.extend({bodyA:b,bodyB:y},i)))),d&&c<t-1&&(b=l[c+1+(s-1)*t],e.addConstraint(n,r.create(o.extend({bodyA:b,bodyB:y},i))))}return n.label+=" Mesh",n},n.pyramid=function(e,r,o,a,d,i,s){return n.stack(e,r,o,a,d,i,function(n,r,i,c,u,y){var b=Math.min(a,Math.ceil(o/2)),l=u?u.bounds.max.x-u.bounds.min.x:0;if(!(c>b||i<(c=b-c)||i>o-1-c))return 1===y&&t.translate(u,{x:(i+(o%2==1?1:-1))*l,y:0}),s(e+(u?i*l:0)+i*d,r,i,c,u,y)})},n.newtonsCradle=function(n,o,t,d,i){for(var s=e.create({label:"Newtons Cradle"}),c=0;c<t;c++){var u=a.circle(n+c*(1.9*d),o+i,d,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),y=r.create({pointA:{x:n+c*(1.9*d),y:o},bodyB:u});e.addBody(s,u),e.addConstraint(s,y)}return s},n.car=function(n,o,d,i,s){var c=t.nextGroup(!0),u=.5*-d+20,y=.5*d-20,b=e.create({label:"Car"}),l=a.rectangle(n,o,d,i,{collisionFilter:{group:c},chamfer:{radius:.5*i},density:2e-4}),x=a.circle(n+u,o+0,s,{collisionFilter:{group:c},friction:.8}),f=a.circle(n+y,o+0,s,{collisionFilter:{group:c},friction:.8}),m=r.create({bodyB:l,pointB:{x:u,y:0},bodyA:x,stiffness:1,length:0}),B=r.create({bodyB:l,pointB:{x:y,y:0},bodyA:f,stiffness:1,length:0});return e.addBody(b,l),e.addBody(b,x),e.addBody(b,f),e.addConstraint(b,m),e.addConstraint(b,B),b},n.softBody=function(e,r,t,d,i,s,c,u,y,b){y=o.extend({inertia:1/0},y),b=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},b);var l=n.stack(e,r,t,d,i,s,function(n,e){return a.circle(n,e,u,y)});return n.mesh(l,t,d,c,b),l.label="Soft Body",l};
},{"../body/Composite":"XuSr","../constraint/Constraint":"e36s","../core/Common":"PO6A","../body/Body":"kNiP","./Bodies":"Mw0C"}],"pQ2x":[function(require,module,exports) {
var e={};module.exports=e;var t=require("../geometry/Bounds"),a=require("../core/Common");e.pathToVertices=function(t,r){"undefined"==typeof window||"SVGPathSeg"in window||a.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,s,o,i,n,g,h,S,p,b,l,u=[],m=0,y=0,f=0;r=r||15;var A=function(e,t,a){var r=a%2==1&&a>1;if(!p||e!=p.x||t!=p.y){p&&r?(b=p.x,l=p.y):(b=0,l=0);var c={x:b+e,y:l+t};!r&&p||(p=c),u.push(c),y=b+e,f=l+t}},v=function(e){var t=e.pathSegTypeAsLetter.toUpperCase();if("Z"!==t){switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":y=e.x,f=e.y;break;case"H":y=e.x;break;case"V":f=e.y}A(y,f,e.pathSegType)}};for(e._svgPathToAbsolute(t),o=t.getTotalLength(),g=[],c=0;c<t.pathSegList.numberOfItems;c+=1)g.push(t.pathSegList.getItem(c));for(h=g.concat();m<o;){if((n=g[t.getPathSegAtLength(m)])!=S){for(;h.length&&h[0]!=n;)v(h.shift());S=n}switch(n.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":i=t.getPointAtLength(m),A(i.x,i.y,0)}m+=r}for(c=0,s=h.length;c<s;++c)v(h[c]);return u},e._svgPathToAbsolute=function(e){for(var t,a,r,c,s,o,i=e.pathSegList,n=0,g=0,h=i.numberOfItems,S=0;S<h;++S){var p=i.getItem(S),b=p.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(b))"x"in p&&(n=p.x),"y"in p&&(g=p.y);else switch("x1"in p&&(r=n+p.x1),"x2"in p&&(s=n+p.x2),"y1"in p&&(c=g+p.y1),"y2"in p&&(o=g+p.y2),"x"in p&&(n+=p.x),"y"in p&&(g+=p.y),b){case"m":i.replaceItem(e.createSVGPathSegMovetoAbs(n,g),S);break;case"l":i.replaceItem(e.createSVGPathSegLinetoAbs(n,g),S);break;case"h":i.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(n),S);break;case"v":i.replaceItem(e.createSVGPathSegLinetoVerticalAbs(g),S);break;case"c":i.replaceItem(e.createSVGPathSegCurvetoCubicAbs(n,g,r,c,s,o),S);break;case"s":i.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(n,g,s,o),S);break;case"q":i.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(n,g,r,c),S);break;case"t":i.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(n,g),S);break;case"a":i.replaceItem(e.createSVGPathSegArcAbs(n,g,p.r1,p.r2,p.angle,p.largeArcFlag,p.sweepFlag),S);break;case"z":case"Z":n=t,g=a}"M"!=b&&"m"!=b||(t=n,a=g)}};
},{"../geometry/Bounds":"FjIP","../core/Common":"PO6A"}],"S3HY":[function(require,module,exports) {
var t={setBounce:function(t){return this.body.restitution=t,this}};module.exports=t;
},{}],"aAwN":[function(require,module,exports) {
var i={setCollisionCategory:function(i){return this.body.collisionFilter.category=i,this},setCollisionGroup:function(i){return this.body.collisionFilter.group=i,this},setCollidesWith:function(i){var t=0;if(Array.isArray(i))for(var o=0;o<i.length;o++)t|=i[o];else t=i;return this.body.collisionFilter.mask=t,this},setOnCollide:function(i){return this.body.onCollideCallback=i,this},setOnCollideEnd:function(i){return this.body.onCollideEndCallback=i,this},setOnCollideActive:function(i){return this.body.onCollideActiveCallback=i,this},setOnCollideWith:function(i,t){Array.isArray(i)||(i=[i]);for(var o=0;o<i.length;o++){var l=i[o].hasOwnProperty("body")?i[o].body:i[o];this.body.setOnCollideWith(l,t)}return this}};module.exports=i;
},{}],"HGd8":[function(require,module,exports) {
var t=require("../lib/body/Body"),i={applyForce:function(i){return this._tempVec2.set(this.body.position.x,this.body.position.y),t.applyForce(this.body,this._tempVec2,i),this},applyForceFrom:function(i,s){return t.applyForce(this.body,i,s),this},thrust:function(i){var s=this.body.angle;return this._tempVec2.set(i*Math.cos(s),i*Math.sin(s)),t.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(i){var s=this.body.angle-Math.PI/2;return this._tempVec2.set(i*Math.cos(s),i*Math.sin(s)),t.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(i){var s=this.body.angle+Math.PI/2;return this._tempVec2.set(i*Math.cos(s),i*Math.sin(s)),t.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(i){var s=this.body.angle-Math.PI;return this._tempVec2.set(i*Math.cos(s),i*Math.sin(s)),t.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};module.exports=i;
},{"../lib/body/Body":"kNiP"}],"jFmW":[function(require,module,exports) {
var i={setFriction:function(i,t,o){return this.body.friction=i,void 0!==t&&(this.body.frictionAir=t),void 0!==o&&(this.body.frictionStatic=o),this},setFrictionAir:function(i){return this.body.frictionAir=i,this},setFrictionStatic:function(i){return this.body.frictionStatic=i,this}};module.exports=i;
},{}],"TYuP":[function(require,module,exports) {
var r={setIgnoreGravity:function(r){return this.body.ignoreGravity=r,this}};module.exports=r;
},{}],"C6qK":[function(require,module,exports) {
var t=require("../lib/body/Body"),e=require("../../../math/Vector2"),s={setMass:function(e){return t.setMass(this.body,e),this},setDensity:function(e){return t.setDensity(this.body,e),this},centerOfMass:{get:function(){return new e(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};module.exports=s;
},{"../lib/body/Body":"kNiP","../../../math/Vector2":"xARF"}],"WslA":[function(require,module,exports) {
var t=require("../lib/body/Body"),i={setStatic:function(i){return t.setStatic(this.body,i),this},isStatic:function(){return this.body.isStatic}};module.exports=i;
},{"../lib/body/Body":"kNiP"}],"tUuK":[function(require,module,exports) {
var s={setSensor:function(s){return this.body.isSensor=s,this},isSensor:function(){return this.body.isSensor}};module.exports=s;
},{}],"VuH9":[function(require,module,exports) {
var e=require("./lib/factory/Bodies"),r=require("./lib/body/Body"),t=require("./lib/core/Common"),i=require("../../utils/object/GetFastValue"),c=require("./lib/geometry/Vertices"),s={parseBody:function(e,c,s,o){void 0===o&&(o={});for(var l=i(s,"fixtures",[]),a=[],n=0;n<l.length;n++)for(var u=this.parseFixture(l[n]),d=0;d<u.length;d++)a.push(u[d]);var v=t.clone(s,!0);t.extend(v,o,!0),delete v.fixtures,delete v.type;var f=r.create(v);return r.setParts(f,a),r.setPosition(f,{x:e,y:c}),f},parseFixture:function(r){var c,s=t.extend({},!1,r);if(delete s.circle,delete s.vertices,r.circle){var o=i(r.circle,"x"),l=i(r.circle,"y"),a=i(r.circle,"radius");c=[e.circle(o,l,a,s)]}else r.vertices&&(c=this.parseVertices(r.vertices,s));return c},parseVertices:function(i,s){void 0===s&&(s={});for(var o=[],l=0;l<i.length;l++)c.clockwiseSort(i[l]),o.push(r.create(t.extend({position:c.centre(i[l]),vertices:i[l]},s)));return e.flagCoincidentParts(o)}};module.exports=s;
},{"./lib/factory/Bodies":"Mw0C","./lib/body/Body":"kNiP","./lib/core/Common":"PO6A","../../utils/object/GetFastValue":"xbYy","./lib/geometry/Vertices":"DMKW"}],"dFIj":[function(require,module,exports) {
var e=require("./lib/factory/Bodies"),r=require("./lib/body/Body"),t={parseBody:function(t,a,i,o){var s;void 0===o&&(o={});var l=i.vertices;if(1===l.length)o.vertices=l[0],s=r.create(o),e.flagCoincidentParts(s.parts);else{for(var c=[],n=0;n<l.length;n++){var v=r.create({vertices:l[n]});c.push(v)}e.flagCoincidentParts(c),o.parts=c,s=r.create(o)}return s.label=i.label,r.setPosition(s,{x:t,y:a}),s}};module.exports=t;
},{"./lib/factory/Bodies":"Mw0C","./lib/body/Body":"kNiP"}],"JzUf":[function(require,module,exports) {
var e=require("../lib/factory/Bodies"),t=require("../lib/body/Body"),r=require("../../../math/fuzzy/Equal"),i=require("../../../utils/object/GetFastValue"),s=require("../PhysicsEditorParser"),o=require("../PhysicsJSONParser"),a=require("../lib/geometry/Vertices"),d={setRectangle:function(e,t,r){return this.setBody({type:"rectangle",width:e,height:t},r)},setCircle:function(e,t){return this.setBody({type:"circle",radius:e},t)},setPolygon:function(e,t,r){return this.setBody({type:"polygon",sides:t,radius:e},r)},setTrapezoid:function(e,t,r,i){return this.setBody({type:"trapezoid",width:e,height:t,slope:r},i)},setExistingBody:function(e,t){void 0===t&&(t=!0),this.body&&this.world.remove(this.body,!0),this.body=e;for(var i=0;i<e.parts.length;i++)e.parts[i].gameObject=this;var s=this;if(e.destroy=function(){s.world.remove(s.body,!0),s.body.gameObject=null},t&&(this.world.has(e)&&this.world.remove(e,!0),this.world.add(e)),this._originComponent){var o=e.render.sprite.xOffset,a=e.render.sprite.yOffset,d=e.centerOfMass.x,h=e.centerOfMass.y;if(r(d,.5)&&r(h,.5))this.setOrigin(o+.5,a+.5);else{var n=e.centerOffset.x,y=e.centerOffset.y;this.setOrigin(o+n/this.displayWidth,a+y/this.displayHeight)}}return this},setBody:function(r,d){if(!r)return this;var h;"string"==typeof r&&(r={type:r});var n=i(r,"type","rectangle"),y=i(r,"x",this._tempVec2.x),c=i(r,"y",this._tempVec2.y),l=i(r,"width",this.width),f=i(r,"height",this.height);switch(n){case"rectangle":h=e.rectangle(y,c,l,f,d);break;case"circle":var u=i(r,"radius",Math.max(l,f)/2),p=i(r,"maxSides",25);h=e.circle(y,c,u,d,p);break;case"trapezoid":var g=i(r,"slope",.5);h=e.trapezoid(y,c,l,f,g,d);break;case"polygon":var m=i(r,"sides",5),b=i(r,"radius",Math.max(l,f)/2);h=e.polygon(y,c,m,b,d);break;case"fromVertices":case"fromVerts":var v=i(r,"verts",null);if(v)if("string"==typeof v&&(v=a.fromPath(v)),this.body&&!this.body.hasOwnProperty("temp"))t.setVertices(this.body,v),h=this.body;else{var O=i(r,"flagInternal",!1),w=i(r,"removeCollinear",.01),x=i(r,"minimumArea",10);h=e.fromVertices(y,c,v,d,O,w,x)}break;case"fromPhysicsEditor":h=s.parseBody(y,c,r,d);break;case"fromPhysicsTracer":h=o.parseBody(y,c,r,d)}return h&&this.setExistingBody(h,r.addToWorld),this}};module.exports=d;
},{"../lib/factory/Bodies":"Mw0C","../lib/body/Body":"kNiP","../../../math/fuzzy/Equal":"FGft","../../../utils/object/GetFastValue":"xbYy","../PhysicsEditorParser":"VuH9","../PhysicsJSONParser":"dFIj","../lib/geometry/Vertices":"DMKW"}],"iQb1":[function(require,module,exports) {
module.exports="afteradd";
},{}],"Wd2L":[function(require,module,exports) {
module.exports="afterremove";
},{}],"ASF3":[function(require,module,exports) {
module.exports="afterupdate";
},{}],"Fh0N":[function(require,module,exports) {
module.exports="beforeadd";
},{}],"tzV6":[function(require,module,exports) {
module.exports="beforeremove";
},{}],"JCHj":[function(require,module,exports) {
module.exports="beforeupdate";
},{}],"xeHM":[function(require,module,exports) {
module.exports="collisionactive";
},{}],"PYCd":[function(require,module,exports) {
module.exports="collisionend";
},{}],"Iyo0":[function(require,module,exports) {
module.exports="collisionstart";
},{}],"Zi2U":[function(require,module,exports) {
module.exports="sleepend";
},{}],"gKyN":[function(require,module,exports) {
module.exports="sleepstart";
},{}],"Lgcd":[function(require,module,exports) {
module.exports={AFTER_ADD:require("./AFTER_ADD_EVENT"),AFTER_REMOVE:require("./AFTER_REMOVE_EVENT"),AFTER_UPDATE:require("./AFTER_UPDATE_EVENT"),BEFORE_ADD:require("./BEFORE_ADD_EVENT"),BEFORE_REMOVE:require("./BEFORE_REMOVE_EVENT"),BEFORE_UPDATE:require("./BEFORE_UPDATE_EVENT"),COLLISION_ACTIVE:require("./COLLISION_ACTIVE_EVENT"),COLLISION_END:require("./COLLISION_END_EVENT"),COLLISION_START:require("./COLLISION_START_EVENT"),DRAG_END:require("./DRAG_END_EVENT"),DRAG:require("./DRAG_EVENT"),DRAG_START:require("./DRAG_START_EVENT"),PAUSE:require("./PAUSE_EVENT"),RESUME:require("./RESUME_EVENT"),SLEEP_END:require("./SLEEP_END_EVENT"),SLEEP_START:require("./SLEEP_START_EVENT")};
},{"./AFTER_ADD_EVENT":"iQb1","./AFTER_REMOVE_EVENT":"Wd2L","./AFTER_UPDATE_EVENT":"ASF3","./BEFORE_ADD_EVENT":"Fh0N","./BEFORE_REMOVE_EVENT":"tzV6","./BEFORE_UPDATE_EVENT":"JCHj","./COLLISION_ACTIVE_EVENT":"xeHM","./COLLISION_END_EVENT":"PYCd","./COLLISION_START_EVENT":"Iyo0","./DRAG_END_EVENT":"c2L9","./DRAG_EVENT":"ttxB","./DRAG_START_EVENT":"hzGM","./PAUSE_EVENT":"RNoC","./RESUME_EVENT":"eU0X","./SLEEP_END_EVENT":"Zi2U","./SLEEP_START_EVENT":"gKyN"}],"rnFd":[function(require,module,exports) {
var e=require("../events"),t=require("../lib/core/Sleeping"),s=require("../lib/core/Events"),i={setToSleep:function(){t.set(this.body,!0)},setAwake:function(){t.set(this.body,!1)},setSleepThreshold:function(e){return void 0===e&&(e=60),this.body.sleepThreshold=e,this},setSleepEvents:function(e,t){return this.setSleepStartEvent(e),this.setSleepEndEvent(t),this},setSleepStartEvent:function(t){if(t){var i=this.world;s.on(this.body,"sleepStart",function(t){i.emit(e.SLEEP_START,t,this)})}else s.off(this.body,"sleepStart");return this},setSleepEndEvent:function(t){if(t){var i=this.world;s.on(this.body,"sleepEnd",function(t){i.emit(e.SLEEP_END,t,this)})}else s.off(this.body,"sleepEnd");return this}};module.exports=i;
},{"../events":"Lgcd","../lib/core/Sleeping":"ynnK","../lib/core/Events":"RHVv"}],"jm4c":[function(require,module,exports) {
var t=require("../lib/body/Body"),s=require("../../../math/const"),e=require("../../../math/angle/Wrap"),i=require("../../../math/angle/WrapDegrees"),n=4,o={x:{get:function(){return this.body.position.x},set:function(s){this._tempVec2.set(s,this.y),t.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(s){this._tempVec2.set(this.x,s),t.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(s){var e=1/this._scaleX,i=1/this._scaleY;this._scaleX=s,0===this._scaleX?this.renderFlags&=~n:this.renderFlags|=n,t.scale(this.body,e,i),t.scale(this.body,s,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(s){var e=1/this._scaleX,i=1/this._scaleY;this._scaleY=s,0===this._scaleY?this.renderFlags&=~n:this.renderFlags|=n,t.scale(this.body,e,i),t.scale(this.body,this._scaleX,s)}},angle:{get:function(){return i(this.body.angle*s.RAD_TO_DEG)},set:function(t){this.rotation=i(t)*s.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(s){this._rotation=e(s),t.setAngle(this.body,this._rotation)}},setPosition:function(s,e){return void 0===s&&(s=0),void 0===e&&(e=s),this._tempVec2.set(s,e),t.setPosition(this.body,this._tempVec2),this},setRotation:function(s){return void 0===s&&(s=0),this._rotation=e(s),t.setAngle(this.body,s),this},setFixedRotation:function(){return t.setInertia(this.body,1/0),this},setAngle:function(s){return void 0===s&&(s=0),this.angle=s,t.setAngle(this.body,this.rotation),this},setScale:function(s,e,i){void 0===s&&(s=1),void 0===e&&(e=s);var n=1/this._scaleX,o=1/this._scaleY;return this._scaleX=s,this._scaleY=e,t.scale(this.body,n,o,i),t.scale(this.body,s,e,i),this}};module.exports=o;
},{"../lib/body/Body":"kNiP","../../../math/const":"TJqb","../../../math/angle/Wrap":"SPah","../../../math/angle/WrapDegrees":"lSyh"}],"IrQY":[function(require,module,exports) {
var t=require("../lib/body/Body"),e={setAngularVelocity:function(e){return t.setAngularVelocity(this.body,e),this},setVelocityX:function(e){return this._tempVec2.set(e,this.body.velocity.y),t.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(e){return this._tempVec2.set(this.body.velocity.x,e),t.setVelocity(this.body,this._tempVec2),this},setVelocity:function(e,i){return this._tempVec2.set(e,i),t.setVelocity(this.body,this._tempVec2),this}};module.exports=e;
},{"../lib/body/Body":"kNiP"}],"wPkb":[function(require,module,exports) {
module.exports={Bounce:require("./Bounce"),Collision:require("./Collision"),Force:require("./Force"),Friction:require("./Friction"),Gravity:require("./Gravity"),Mass:require("./Mass"),Static:require("./Static"),Sensor:require("./Sensor"),SetBody:require("./SetBody"),Sleep:require("./Sleep"),Transform:require("./Transform"),Velocity:require("./Velocity")};
},{"./Bounce":"S3HY","./Collision":"aAwN","./Force":"HGd8","./Friction":"jFmW","./Gravity":"TYuP","./Mass":"C6qK","./Static":"WslA","./Sensor":"tUuK","./SetBody":"JzUf","./Sleep":"rnFd","./Transform":"jm4c","./Velocity":"IrQY"}],"Bvh1":[function(require,module,exports) {
var e=require("./components"),t=require("../../utils/object/GetFastValue"),o=require("../../math/Vector2");function r(e){return!!e.get&&"function"==typeof e.get||!!e.set&&"function"==typeof e.set}var n=function(n,i,s,a){void 0===s&&(s={}),void 0===a&&(a=!0);var c=i.x,u=i.y;if(i.body={temp:!0,position:{x:c,y:u}},[e.Bounce,e.Collision,e.Force,e.Friction,e.Gravity,e.Mass,e.Sensor,e.SetBody,e.Sleep,e.Static,e.Transform,e.Velocity].forEach(function(e){for(var t in e)r(e[t])?Object.defineProperty(i,t,{get:e[t].get,set:e[t].set}):Object.defineProperty(i,t,{value:e[t]})}),i.world=n,i._tempVec2=new o(c,u),s.hasOwnProperty("type")&&"body"===s.type)i.setExistingBody(s,a);else{var y=t(s,"shape",null);y||(y="rectangle"),s.addToWorld=a,i.setBody(y,s)}return i};module.exports=n;
},{"./components":"wPkb","../../utils/object/GetFastValue":"xbYy","../../math/Vector2":"xARF"}],"XVoW":[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("./components"),t=require("../../gameobjects/GameObject"),s=require("../../utils/object/GetFastValue"),r=require("../../gameobjects/image/Image"),n=require("../../gameobjects/components/Pipeline"),o=require("../../math/Vector2"),a=new e({Extends:r,Mixins:[i.Bounce,i.Collision,i.Force,i.Friction,i.Gravity,i.Mass,i.Sensor,i.SetBody,i.Sleep,i.Static,i.Transform,i.Velocity,n],initialize:function(e,i,r,n,a,l){t.call(this,e.scene,"Image"),this.setTexture(n,a),this.setSizeToFrame(),this.setOrigin(),this.world=e,this._tempVec2=new o(i,r);var c=s(l,"shape",null);c?this.setBody(c,l):this.setRectangle(this.width,this.height,l),this.setPosition(i,r),this.initPipeline("TextureTintPipeline")}});module.exports=a;
},{"../../utils/Class":"Q4x4","./components":"wPkb","../../gameobjects/GameObject":"YzbT","../../utils/object/GetFastValue":"xbYy","../../gameobjects/image/Image":"WGAg","../../gameobjects/components/Pipeline":"B6Pt","../../math/Vector2":"xARF"}],"OZjb":[function(require,module,exports) {
var e=require("../../gameobjects/components/Animation"),i=require("../../utils/Class"),t=require("./components"),s=require("../../gameobjects/GameObject"),r=require("../../utils/object/GetFastValue"),n=require("../../gameobjects/components/Pipeline"),o=require("../../gameobjects/sprite/Sprite"),a=require("../../math/Vector2"),c=new i({Extends:o,Mixins:[t.Bounce,t.Collision,t.Force,t.Friction,t.Gravity,t.Mass,t.Sensor,t.SetBody,t.Sleep,t.Static,t.Transform,t.Velocity,n],initialize:function(i,t,n,o,c,h){s.call(this,i.scene,"Sprite"),this.anims=new e(this),this.setTexture(o,c),this.setSizeToFrame(),this.setOrigin(),this.world=i,this._tempVec2=new a(t,n);var l=r(h,"shape",null);l?this.setBody(l,h):this.setRectangle(this.width,this.height,h),this.setPosition(t,n),this.initPipeline("TextureTintPipeline")}});module.exports=c;
},{"../../gameobjects/components/Animation":"bZon","../../utils/Class":"Q4x4","./components":"wPkb","../../gameobjects/GameObject":"YzbT","../../utils/object/GetFastValue":"xbYy","../../gameobjects/components/Pipeline":"B6Pt","../../gameobjects/sprite/Sprite":"uRwE","../../math/Vector2":"xARF"}],"tPzQ":[function(require,module,exports) {
var e=require("./lib/factory/Bodies"),t=require("./lib/body/Body"),i=require("../../utils/Class"),o=require("./components"),s=require("eventemitter3"),r=require("../../utils/object/GetFastValue"),l=require("../../utils/object/HasValue"),d=require("./lib/geometry/Vertices"),h=new i({Extends:s,Mixins:[o.Bounce,o.Collision,o.Friction,o.Gravity,o.Mass,o.Sensor,o.Sleep,o.Static],initialize:function(e,t,i){s.call(this),this.tile=t,this.world=e,t.physics.matterBody&&t.physics.matterBody.destroy(),t.physics.matterBody=this;var o=r(i,"body",null),l=r(i,"addToWorld",!0);if(o)this.setBody(o,l);else{var d=t.getCollisionGroup();r(d,"objects",[]).length>0?this.setFromTileCollision(i):this.setFromTileRectangle(i)}},setFromTileRectangle:function(t){void 0===t&&(t={}),l(t,"isStatic")||(t.isStatic=!0),l(t,"addToWorld")||(t.addToWorld=!0);var i=this.tile.getBounds(),o=i.x+i.width/2,s=i.y+i.height/2,r=e.rectangle(o,s,i.width,i.height,t);return this.setBody(r,t.addToWorld),this},setFromTileCollision:function(i){void 0===i&&(i={}),l(i,"isStatic")||(i.isStatic=!0),l(i,"addToWorld")||(i.addToWorld=!0);for(var o=this.tile.tilemapLayer.scaleX,s=this.tile.tilemapLayer.scaleY,h=this.tile.getLeft(),n=this.tile.getTop(),a=this.tile.getCollisionGroup(),y=r(a,"objects",[]),c=[],u=0;u<y.length;u++){var g=y[u],m=h+g.x*o,p=n+g.y*s,v=g.width*o,b=g.height*s,B=null;if(g.rectangle)B=e.rectangle(m+v/2,p+b/2,v,b,i);else if(g.ellipse)B=e.circle(m+v/2,p+b/2,v/2,i);else if(g.polygon||g.polyline){var f=(g.polygon?g.polygon:g.polyline).map(function(e){return{x:e.x*o,y:e.y*s}}),T=d.create(f),q=d.centre(T);m+=q.x,p+=q.y,B=e.fromVertices(m,p,T,i)}B&&c.push(B)}return 1===c.length?this.setBody(c[0],i.addToWorld):c.length>1&&(i.parts=c,this.setBody(t.create(i),i.addToWorld)),this},setBody:function(e,t){return void 0===t&&(t=!0),this.body&&this.removeBody(),this.body=e,this.body.gameObject=this,t&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});module.exports=h;
},{"./lib/factory/Bodies":"Mw0C","./lib/body/Body":"kNiP","../../utils/Class":"Q4x4","./components":"wPkb","eventemitter3":"Clm3","../../utils/object/GetFastValue":"xbYy","../../utils/object/HasValue":"qdzY","./lib/geometry/Vertices":"DMKW"}],"YHml":[function(require,module,exports) {
var e={};module.exports=e;var r=require("../geometry/Vertices"),o=require("../geometry/Vector");e.collides=function(t,i,a){var n,s,p,d,l=!1;if(a){var x=t.parent,v=i.parent,u=x.speed*x.speed+x.angularSpeed*x.angularSpeed+v.speed*v.speed+v.angularSpeed*v.angularSpeed;l=a&&a.collided&&u<.2,d=a}else d={collided:!1,bodyA:t,bodyB:i};if(a&&l){var c=d.axisBody,y=c===t?i:t,m=[c.axes[a.axisNumber]];if(p=e._overlapAxes(c.vertices,y.vertices,m),d.reused=!0,p.overlap<=0)return d.collided=!1,d}else{if((n=e._overlapAxes(t.vertices,i.vertices,t.axes)).overlap<=0)return d.collided=!1,d;if((s=e._overlapAxes(i.vertices,t.vertices,i.axes)).overlap<=0)return d.collided=!1,d;n.overlap<s.overlap?(p=n,d.axisBody=t):(p=s,d.axisBody=i),d.axisNumber=p.axisNumber}d.bodyA=t.id<i.id?t:i,d.bodyB=t.id<i.id?i:t,d.collided=!0,d.depth=p.overlap,d.parentA=d.bodyA.parent,d.parentB=d.bodyB.parent,t=d.bodyA,i=d.bodyB,o.dot(p.axis,o.sub(i.position,t.position))<0?d.normal={x:p.axis.x,y:p.axis.y}:d.normal={x:-p.axis.x,y:-p.axis.y},d.tangent=o.perp(d.normal),d.penetration=d.penetration||{},d.penetration.x=d.normal.x*d.depth,d.penetration.y=d.normal.y*d.depth;var f=e._findSupports(t,i,d.normal),g=[];if(r.contains(t.vertices,f[0])&&g.push(f[0]),r.contains(t.vertices,f[1])&&g.push(f[1]),g.length<2){var h=e._findSupports(i,t,o.neg(d.normal));r.contains(i.vertices,h[0])&&g.push(h[0]),g.length<2&&r.contains(i.vertices,h[1])&&g.push(h[1])}return g.length<1&&(g=[f[0]]),d.supports=g,d},e._overlapAxes=function(r,t,i){for(var a,n,s=o._temp[0],p=o._temp[1],d={overlap:Number.MAX_VALUE},l=0;l<i.length;l++){if(n=i[l],e._projectToAxis(s,r,n),e._projectToAxis(p,t,n),(a=Math.min(s.max-p.min,p.max-s.min))<=0)return d.overlap=a,d;a<d.overlap&&(d.overlap=a,d.axis=n,d.axisNumber=l)}return d},e._projectToAxis=function(e,r,t){for(var i=o.dot(r[0],t),a=i,n=1;n<r.length;n+=1){var s=o.dot(r[n],t);s>a?a=s:s<i&&(i=s)}e.min=i,e.max=a},e._findSupports=function(e,r,t){for(var i,a,n,s,p=Number.MAX_VALUE,d=o._temp[0],l=r.vertices,x=e.position,v=0;v<l.length;v++)a=l[v],d.x=a.x-x.x,d.y=a.y-x.y,(i=-o.dot(t,d))<p&&(p=i,n=a);return a=l[n.index-1>=0?n.index-1:l.length-1],d.x=a.x-x.x,d.y=a.y-x.y,p=-o.dot(t,d),s=a,a=l[(n.index+1)%l.length],d.x=a.x-x.x,d.y=a.y-x.y,(i=-o.dot(t,d))<p&&(s=a),[n,s]};
},{"../geometry/Vertices":"DMKW","../geometry/Vector":"T2ej"}],"qcG8":[function(require,module,exports) {
var t={};module.exports=t,t.create=function(i,e){var n=i.bodyA,s=i.bodyB,o={id:t.id(n,s),bodyA:n,bodyB:s,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:n.isSensor||s.isSensor,timeCreated:e,timeUpdated:e,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return t.update(o,i,e),o},t.update=function(i,e,n){if(i.collision=e,e.collided){var s=e.supports,o=i.activeContacts,a=e.parentA,r=e.parentB;i.inverseMass=a.inverseMass+r.inverseMass,i.friction=Math.min(a.friction,r.friction),i.frictionStatic=Math.max(a.frictionStatic,r.frictionStatic),i.restitution=Math.max(a.restitution,r.restitution),i.slop=Math.max(a.slop,r.slop);for(var c=0;c<s.length;c++)o[c]=s[c].contact;var d=s.length;d<o.length&&(o.length=d),i.separation=e.depth,t.setActive(i,!0,n)}else!0===i.isActive&&t.setActive(i,!1,n)},t.setActive=function(t,i,e){i?(t.isActive=!0,t.timeUpdated=e):(t.isActive=!1,t.activeContacts.length=0)},t.id=function(t,i){return t.id<i.id?"A"+t.id+"B"+i.id:"A"+i.id+"B"+t.id};
},{}],"tvlp":[function(require,module,exports) {
var r={};module.exports=r;var e=require("./SAT"),s=require("./Pair"),o=require("../geometry/Bounds");r.collisions=function(i,a){for(var t=[],l=a.pairs.table,n=a.metrics,u=0;u<i.length;u++){var p=i[u][0],c=i[u][1];if((!p.isStatic&&!p.isSleeping||!c.isStatic&&!c.isSleeping)&&r.canCollide(p.collisionFilter,c.collisionFilter)&&(n.midphaseTests+=1,o.overlaps(p.bounds,c.bounds)))for(var d=p.parts.length>1?1:0;d<p.parts.length;d++)for(var g=p.parts[d],v=c.parts.length>1?1:0;v<c.parts.length;v++){var h=c.parts[v];if(g===p&&h===c||o.overlaps(g.bounds,h.bounds)){var f,m=l[s.id(g,h)];f=m&&m.isActive?m.collision:null;var b=e.collides(g,h,f);n.narrowphaseTests+=1,b.reused&&(n.narrowReuseCount+=1),b.collided&&(t.push(b),n.narrowDetections+=1)}}}return t},r.canCollide=function(r,e){return r.group===e.group&&0!==r.group?r.group>0:0!=(r.mask&e.category)&&0!=(e.mask&r.category)};
},{"./SAT":"YHml","./Pair":"qcG8","../geometry/Bounds":"FjIP"}],"FVbR":[function(require,module,exports) {
var t=require("./lib/geometry/Bounds"),i=require("../../utils/Class"),s=require("./lib/body/Composite"),n=require("./lib/constraint/Constraint"),o=require("./lib/collision/Detector"),e=require("./events"),r=require("../../input/events"),l=require("../../utils/object/Merge"),h=require("./lib/core/Sleeping"),a=require("../../math/Vector2"),u=require("./lib/geometry/Vertices"),p=new i({initialize:function(t,i,s){void 0===s&&(s={});this.scene=t,this.world=i,this.camera=null,this.pointer=null,this.active=!0,this.position=new a,this.body=null,this.part=null,this.constraint=n.create(l(s,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(e.BEFORE_UPDATE,this.update,this),t.sys.input.on(r.POINTER_DOWN,this.onDown,this),t.sys.input.on(r.POINTER_UP,this.onUp,this)},onDown:function(t){this.pointer||(this.pointer=t,this.camera=t.camera)},onUp:function(t){t===this.pointer&&(this.pointer=null)},getBody:function(i){var n=this.position,r=this.constraint;this.camera.getWorldPoint(i.x,i.y,n);for(var l=s.allBodies(this.world.localWorld),h=0;h<l.length;h++){var a=l[h];if(!a.ignorePointer&&t.contains(a.bounds,n)&&o.canCollide(a.collisionFilter,r.collisionFilter)&&this.hitTestBody(a,n))return this.world.emit(e.DRAG_START,a,this.part,this),!0}return!1},hitTestBody:function(t,i){for(var s=this.constraint,n=t.parts.length,o=n>1?1:0;o<n;o++){var e=t.parts[o];if(u.contains(e.vertices,i))return s.pointA=i,s.pointB={x:i.x-t.position.x,y:i.y-t.position.y},s.bodyB=t,s.angleB=t.angle,h.set(t,!1),this.part=e,this.body=t,!0}return!1},update:function(){var t=this.pointer,i=this.body;if(this.active&&t)if(t.isDown||!i){if(t.isDown){if(!i&&!this.getBody(t))return;i=this.body;var s=this.position,n=this.constraint;this.camera.getWorldPoint(t.x,t.y,s),n.pointA.x=s.x,n.pointA.y=s.y,h.set(i,!1),this.world.emit(e.DRAG,i,this)}}else this.stopDrag();else i&&this.stopDrag()},stopDrag:function(){var t=this.body,i=this.constraint;i.bodyB=null,i.pointB=null,this.pointer=null,this.body=null,this.part=null,t&&this.world.emit(e.DRAG_END,t,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(e.BEFORE_UPDATE,this.update),this.scene.sys.input.off(r.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(r.POINTER_UP,this.onUp,this)}});module.exports=p;
},{"./lib/geometry/Bounds":"FjIP","../../utils/Class":"Q4x4","./lib/body/Composite":"XuSr","./lib/constraint/Constraint":"e36s","./lib/collision/Detector":"tvlp","./events":"Lgcd","../../input/events":"akNL","../../utils/object/Merge":"J7IV","./lib/core/Sleeping":"ynnK","../../math/Vector2":"xARF","./lib/geometry/Vertices":"DMKW"}],"GB5F":[function(require,module,exports) {
var r=require("./lib/factory/Bodies"),t=require("../../utils/Class"),i=require("./lib/factory/Composites"),e=require("./lib/constraint/Constraint"),n=require("./lib/geometry/Svg"),o=require("./MatterGameObject"),s=require("./MatterImage"),d=require("./MatterSprite"),a=require("./MatterTileBody"),u=require("./PhysicsEditorParser"),c=require("./PhysicsJSONParser"),l=require("./PointerConstraint"),h=require("./lib/geometry/Vertices"),f=new t({initialize:function(r){this.world=r,this.scene=r.scene,this.sys=r.scene.sys},rectangle:function(t,i,e,n,o){var s=r.rectangle(t,i,e,n,o);return this.world.add(s),s},trapezoid:function(t,i,e,n,o,s){var d=r.trapezoid(t,i,e,n,o,s);return this.world.add(d),d},circle:function(t,i,e,n,o){var s=r.circle(t,i,e,n,o);return this.world.add(s),s},polygon:function(t,i,e,n,o){var s=r.polygon(t,i,e,n,o);return this.world.add(s),s},fromVertices:function(t,i,e,n,o,s,d){"string"==typeof e&&(e=h.fromPath(e));var a=r.fromVertices(t,i,e,n,o,s,d);return this.world.add(a),a},fromPhysicsEditor:function(r,t,i,e,n){void 0===n&&(n=!0);var o=u.parseBody(r,t,i,e);return n&&!this.world.has(o)&&this.world.add(o),o},fromSVG:function(t,i,e,o,s,d){void 0===o&&(o=1),void 0===s&&(s={}),void 0===d&&(d=!0);for(var a=e.getElementsByTagName("path"),u=[],c=0;c<a.length;c++){var l=n.pathToVertices(a[c],30);1!==o&&h.scale(l,o,o),u.push(l)}var f=r.fromVertices(t,i,u,s);return d&&this.world.add(f),f},fromJSON:function(r,t,i,e,n){void 0===e&&(e={}),void 0===n&&(n=!0);var o=c.parseBody(r,t,i,e);return o&&n&&this.world.add(o),o},imageStack:function(r,t,e,n,o,d,a,u,c){void 0===a&&(a=0),void 0===u&&(u=0),void 0===c&&(c={});var l=this.world,h=this.sys.displayList;c.addToWorld=!1;var f=i.stack(e,n,o,d,a,u,function(i,e){var n=new s(l,i,e,r,t,c);return h.add(n),n.body});return l.add(f),f},stack:function(r,t,e,n,o,s,d){var a=i.stack(r,t,e,n,o,s,d);return this.world.add(a),a},pyramid:function(r,t,e,n,o,s,d){var a=i.pyramid(r,t,e,n,o,s,d);return this.world.add(a),a},chain:function(r,t,e,n,o,s){return i.chain(r,t,e,n,o,s)},mesh:function(r,t,e,n,o){return i.mesh(r,t,e,n,o)},newtonsCradle:function(r,t,e,n,o){var s=i.newtonsCradle(r,t,e,n,o);return this.world.add(s),s},car:function(r,t,e,n,o){var s=i.car(r,t,e,n,o);return this.world.add(s),s},softBody:function(r,t,e,n,o,s,d,a,u,c){var l=i.softBody(r,t,e,n,o,s,d,a,u,c);return this.world.add(l),l},joint:function(r,t,i,e,n){return this.constraint(r,t,i,e,n)},spring:function(r,t,i,e,n){return this.constraint(r,t,i,e,n)},constraint:function(r,t,i,n,o){void 0===n&&(n=1),void 0===o&&(o={}),o.bodyA="body"===r.type?r:r.body,o.bodyB="body"===t.type?t:t.body,isNaN(i)||(o.length=i),o.stiffness=n;var s=e.create(o);return this.world.add(s),s},worldConstraint:function(r,t,i,n){void 0===i&&(i=1),void 0===n&&(n={}),n.bodyB="body"===r.type?r:r.body,isNaN(t)||(n.length=t),n.stiffness=i;var o=e.create(n);return this.world.add(o),o},mouseSpring:function(r){return this.pointerConstraint(r)},pointerConstraint:function(r){void 0===r&&(r={}),r.hasOwnProperty("render")||(r.render={visible:!1});var t=new l(this.scene,this.world,r);return this.world.add(t.constraint),t},image:function(r,t,i,e,n){var o=new s(this.world,r,t,i,e,n);return this.sys.displayList.add(o),o},tileBody:function(r,t){return new a(this.world,r,t)},sprite:function(r,t,i,e,n){var o=new d(this.world,r,t,i,e,n);return this.sys.displayList.add(o),this.sys.updateList.add(o),o},gameObject:function(r,t,i){return o(this.world,r,t,i)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});module.exports=f;
},{"./lib/factory/Bodies":"Mw0C","../../utils/Class":"Q4x4","./lib/factory/Composites":"UDHQ","./lib/constraint/Constraint":"e36s","./lib/geometry/Svg":"pQ2x","./MatterGameObject":"Bvh1","./MatterImage":"XVoW","./MatterSprite":"OZjb","./MatterTileBody":"tPzQ","./PhysicsEditorParser":"VuH9","./PhysicsJSONParser":"dFIj","./PointerConstraint":"FVbR","./lib/geometry/Vertices":"DMKW"}],"DXtm":[function(require,module,exports) {
var e={};module.exports=e;var n=require("./Common");e._registry={},e.register=function(r){if(e.isPlugin(r)||n.warn("Plugin.register:",e.toString(r),"does not implement all required fields."),r.name in e._registry){var i=e._registry[r.name],t=e.versionParse(r.version).number,s=e.versionParse(i.version).number;t>s?(n.warn("Plugin.register:",e.toString(i),"was upgraded to",e.toString(r)),e._registry[r.name]=r):t<s?n.warn("Plugin.register:",e.toString(i),"can not be downgraded to",e.toString(r)):r!==i&&n.warn("Plugin.register:",e.toString(r),"is already registered to different plugin object")}else e._registry[r.name]=r;return r},e.resolve=function(n){return e._registry[e.dependencyParse(n).name]},e.toString=function(e){return"string"==typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")},e.isPlugin=function(e){return e&&e.name&&e.version&&e.install},e.isUsed=function(e,n){return e.used.indexOf(n)>-1},e.isFor=function(n,r){var i=n.for&&e.dependencyParse(n.for);return!n.for||r.name===i.name&&e.versionSatisfies(r.version,i.range)},e.use=function(r,i){if(r.uses=(r.uses||[]).concat(i||[]),0!==r.uses.length){for(var t=e.dependencies(r),s=n.topologicalSort(t),a=[],o=0;o<s.length;o+=1)if(s[o]!==r.name){var u=e.resolve(s[o]);u?e.isUsed(r,u.name)||(e.isFor(u,r)||(n.warn("Plugin.use:",e.toString(u),"is for",u.for,"but installed on",e.toString(r)+"."),u._warned=!0),u.install?u.install(r):(n.warn("Plugin.use:",e.toString(u),"does not specify an install function."),u._warned=!0),u._warned?(a.push("ð¶ "+e.toString(u)),delete u._warned):a.push("â "+e.toString(u)),r.used.push(u.name)):a.push("â "+s[o])}a.length>0&&!u.silent&&n.info(a.join("  "))}else n.warn("Plugin.use:",e.toString(r),"does not specify any dependencies to install.")},e.dependencies=function(r,i){var t=e.dependencyParse(r),s=t.name;if(!(s in(i=i||{}))){r=e.resolve(r)||r,i[s]=n.map(r.uses||[],function(i){e.isPlugin(i)&&e.register(i);var s=e.dependencyParse(i),a=e.resolve(i);return a&&!e.versionSatisfies(a.version,s.range)?(n.warn("Plugin.dependencies:",e.toString(a),"does not satisfy",e.toString(s),"used by",e.toString(t)+"."),a._warned=!0,r._warned=!0):a||(n.warn("Plugin.dependencies:",e.toString(i),"used by",e.toString(t),"could not be resolved."),r._warned=!0),s.name});for(var a=0;a<i[s].length;a+=1)e.dependencies(i[s][a],i);return i}},e.dependencyParse=function(e){return n.isString(e)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(e)||n.warn("Plugin.dependencyParse:",e,"is not a valid dependency string."),{name:e.split("@")[0],range:e.split("@")[1]||"*"}):{name:e.name,range:e.range||e.version}},e.versionParse=function(e){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(e)||n.warn("Plugin.versionParse:",e,"is not a valid version or range.");var r=e.split("-");e=r[0];var i=isNaN(Number(e[0])),t=i?e.substr(1):e,s=n.map(t.split("."),function(e){return Number(e)});return{isRange:i,version:t,range:e,operator:i?e[0]:"",parts:s,prerelease:r[1],number:1e8*s[0]+1e4*s[1]+s[2]}},e.versionSatisfies=function(n,r){r=r||"*";var i=e.versionParse(r),t=i.parts,s=e.versionParse(n),a=s.parts;if(i.isRange){if("*"===i.operator||"*"===n)return!0;if("~"===i.operator)return a[0]===t[0]&&a[1]===t[1]&&a[2]>=t[2];if("^"===i.operator)return t[0]>0?a[0]===t[0]&&s.number>=i.number:t[1]>0?a[1]===t[1]&&a[2]>=t[2]:a[2]===t[2]}return n===r||"*"===n};
},{"./Common":"PO6A"}],"Mdfl":[function(require,module,exports) {
var e={};module.exports=e;var r=require("./Plugin"),t=require("./Common");e.name="matter-js",e.version="0.14.2",e.uses=[],e.used=[],e.use=function(){r.use(e,Array.prototype.slice.call(arguments))},e.before=function(r,a){return r=r.replace(/^Matter./,""),t.chainPathBefore(e,r,a)},e.after=function(r,a){return r=r.replace(/^Matter./,""),t.chainPathAfter(e,r,a)};
},{"./Plugin":"DXtm","./Common":"PO6A"}],"pEW4":[function(require,module,exports) {
var e={};module.exports=e;var r=require("./Composite"),o=require("../constraint/Constraint"),t=require("../core/Common");e.create=function(e){var o=r.create(),a={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return t.extend(o,a,e)};
},{"./Composite":"XuSr","../constraint/Constraint":"e36s","../core/Common":"PO6A"}],"W1BO":[function(require,module,exports) {
var e={};module.exports=e;var t=require("./Pair"),r=require("./Detector"),o=require("../core/Common");e.create=function(t){var i={controller:e,detector:r.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(i,t)},e.update=function(t,r,o,i){var n,a,s,u,d,c=o.world,g=t.buckets,l=!1,f=o.metrics;for(f.broadphaseTests=0,n=0;n<r.length;n++){var b=r[n];if((!b.isSleeping||i)&&!(b.bounds.max.x<c.bounds.min.x||b.bounds.min.x>c.bounds.max.x||b.bounds.max.y<c.bounds.min.y||b.bounds.min.y>c.bounds.max.y)){var h=e._getRegion(t,b);if(!b.region||h.id!==b.region.id||i){f.broadphaseTests+=1,b.region&&!i||(b.region=h);var m=e._regionUnion(h,b.region);for(a=m.startCol;a<=m.endCol;a++)for(s=m.startRow;s<=m.endRow;s++){u=g[d=e._getBucketId(a,s)];var v=a>=h.startCol&&a<=h.endCol&&s>=h.startRow&&s<=h.endRow,R=a>=b.region.startCol&&a<=b.region.endCol&&s>=b.region.startRow&&s<=b.region.endRow;!v&&R&&R&&u&&e._bucketRemoveBody(t,u,b),(b.region===h||v&&!R||i)&&(u||(u=e._createBucket(g,d)),e._bucketAddBody(t,u,b))}b.region=h,l=!0}}}l&&(t.pairsList=e._createActivePairsList(t))},e.clear=function(e){e.buckets={},e.pairs={},e.pairsList=[]},e._regionUnion=function(t,r){var o=Math.min(t.startCol,r.startCol),i=Math.max(t.endCol,r.endCol),n=Math.min(t.startRow,r.startRow),a=Math.max(t.endRow,r.endRow);return e._createRegion(o,i,n,a)},e._getRegion=function(t,r){var o=r.bounds,i=Math.floor(o.min.x/t.bucketWidth),n=Math.floor(o.max.x/t.bucketWidth),a=Math.floor(o.min.y/t.bucketHeight),s=Math.floor(o.max.y/t.bucketHeight);return e._createRegion(i,n,a,s)},e._createRegion=function(e,t,r,o){return{id:e+","+t+","+r+","+o,startCol:e,endCol:t,startRow:r,endRow:o}},e._getBucketId=function(e,t){return"C"+e+"R"+t},e._createBucket=function(e,t){return e[t]=[]},e._bucketAddBody=function(e,r,o){for(var i=0;i<r.length;i++){var n=r[i];if(!(o.id===n.id||o.isStatic&&n.isStatic)){var a=t.id(o,n),s=e.pairs[a];s?s[2]+=1:e.pairs[a]=[o,n,1]}}r.push(o)},e._bucketRemoveBody=function(e,r,o){r.splice(r.indexOf(o),1);for(var i=0;i<r.length;i++){var n=r[i],a=t.id(o,n),s=e.pairs[a];s&&(s[2]-=1)}},e._createActivePairsList=function(e){var t,r,i=[];t=o.keys(e.pairs);for(var n=0;n<t.length;n++)(r=e.pairs[t[n]])[2]>0?i.push(r):delete e.pairs[t[n]];return i};
},{"./Pair":"qcG8","./Detector":"tvlp","../core/Common":"PO6A"}],"qiy4":[function(require,module,exports) {
var e={};module.exports=e;var i=require("./Pair"),t=require("../core/Common");e._pairMaxIdleLife=1e3,e.create=function(e){return t.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},e.update=function(e,t,l){var o,n,c,r,s=e.list,d=e.table,a=e.collisionStart,h=e.collisionEnd,u=e.collisionActive;for(a.length=0,h.length=0,u.length=0,r=0;r<s.length;r++)s[r].confirmedActive=!1;for(r=0;r<t.length;r++)(o=t[r]).collided&&((c=d[n=i.id(o.bodyA,o.bodyB)])?(c.isActive?u.push(c):a.push(c),i.update(c,o,l),c.confirmedActive=!0):(c=i.create(o,l),d[n]=c,a.push(c),s.push(c)));for(r=0;r<s.length;r++)(c=s[r]).isActive&&!c.confirmedActive&&(i.setActive(c,!1,l),h.push(c))},e.removeOld=function(i,t){var l,o,n,c,r=i.list,s=i.table,d=[];for(c=0;c<r.length;c++)(o=(l=r[c]).collision).bodyA.isSleeping||o.bodyB.isSleeping?l.timeUpdated=t:t-l.timeUpdated>e._pairMaxIdleLife&&d.push(c);for(c=0;c<d.length;c++)delete s[(l=r[n=d[c]-c]).id],r.splice(n,1)},e.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e};
},{"./Pair":"qcG8","../core/Common":"PO6A"}],"Kw35":[function(require,module,exports) {
var r={};module.exports=r;var e=require("../geometry/Vector"),o=require("./SAT"),n=require("../geometry/Bounds"),t=require("../factory/Bodies"),a=require("../geometry/Vertices");r.collides=function(r,e){for(var t=[],a=0;a<e.length;a++){var s=e[a];if(r!==s&&n.overlaps(s.bounds,r.bounds))for(var i=1===s.parts.length?0:1;i<s.parts.length;i++){var u=s.parts[i];if(n.overlaps(u.bounds,r.bounds)){var l=o.collides(u,r);if(l.collided){t.push(l);break}}}}return t},r.ray=function(o,n,a,s){s=s||1e-100;for(var i=e.angle(n,a),u=e.magnitude(e.sub(n,a)),l=.5*(a.x+n.x),d=.5*(a.y+n.y),v=t.rectangle(l,d,u,s,{angle:i}),c=r.collides(v,o),f=0;f<c.length;f+=1){var g=c[f];g.body=g.bodyB=g.bodyA}return c},r.region=function(r,e,o){for(var t=[],a=0;a<r.length;a++){var s=r[a],i=n.overlaps(s.bounds,e);(i&&!o||!i&&o)&&t.push(s)}return t},r.point=function(r,e){for(var o=[],t=0;t<r.length;t++){var s=r[t];if(n.contains(s.bounds,e))for(var i=1===s.parts.length?0:1;i<s.parts.length;i++){var u=s.parts[i];if(n.contains(u.bounds,e)&&a.contains(u.vertices,e)){o.push(s);break}}}return o};
},{"../geometry/Vector":"T2ej","./SAT":"YHml","../geometry/Bounds":"FjIP","../factory/Bodies":"Mw0C","../geometry/Vertices":"DMKW"}],"mYJb":[function(require,module,exports) {
var i={};module.exports=i;var e=require("../geometry/Vertices"),t=require("../geometry/Vector"),o=require("../core/Common"),s=require("../geometry/Bounds");i._restingThresh=4,i._restingThreshTangent=6,i._positionDampen=.9,i._positionWarming=.8,i._frictionNormalMultiplier=5,i.preSolvePosition=function(i){var e,t,o;for(e=0;e<i.length;e++)(t=i[e]).isActive&&(o=t.activeContacts.length,t.collision.parentA.totalContacts+=o,t.collision.parentB.totalContacts+=o)},i.solvePosition=function(e,t,o){var s,n,r,p,a,l,v,m,c,u,y,g,I,x,P,f,h=o*i._positionDampen;for(s=0;s<t.length;s++){var S=t[s];S.previousPositionImpulse.x=S.positionImpulse.x,S.previousPositionImpulse.y=S.positionImpulse.y}for(s=0;s<e.length;s++)(p=e[s]).isActive&&!p.isSensor&&(l=(a=p.collision).parentA,v=a.parentB,m=a.normal,y=l.previousPositionImpulse,g=v.previousPositionImpulse,u=a.penetration,x=g.x-y.x+u.x,P=g.y-y.y+u.y,c=(n=m.x)*x+(r=m.y)*P,p.separation=c,f=(c-p.slop)*h,(l.isStatic||v.isStatic)&&(f*=2),l.isStatic||l.isSleeping||(I=f/l.totalContacts,l.positionImpulse.x+=n*I,l.positionImpulse.y+=r*I),v.isStatic||v.isSleeping||(I=f/v.totalContacts,v.positionImpulse.x-=n*I,v.positionImpulse.y-=r*I))},i.postSolvePosition=function(o){for(var n=0;n<o.length;n++){var r=o[n];if(r.totalContacts=0,0!==r.positionImpulse.x||0!==r.positionImpulse.y){for(var p=0;p<r.parts.length;p++){var a=r.parts[p];e.translate(a.vertices,r.positionImpulse),s.update(a.bounds,a.vertices,r.velocity),a.position.x+=r.positionImpulse.x,a.position.y+=r.positionImpulse.y}r.positionPrev.x+=r.positionImpulse.x,r.positionPrev.y+=r.positionImpulse.y,t.dot(r.positionImpulse,r.velocity)<0?(r.positionImpulse.x=0,r.positionImpulse.y=0):(r.positionImpulse.x*=i._positionWarming,r.positionImpulse.y*=i._positionWarming)}}},i.preSolveVelocity=function(i){var e,o,s,n,r,p,a,l,v,m,c,u,y,g,I=t._temp[0],x=t._temp[1];for(e=0;e<i.length;e++)if((s=i[e]).isActive&&!s.isSensor)for(n=s.activeContacts,p=(r=s.collision).parentA,a=r.parentB,l=r.normal,v=r.tangent,o=0;o<n.length;o++)c=(m=n[o]).vertex,u=m.normalImpulse,y=m.tangentImpulse,0===u&&0===y||(I.x=l.x*u+v.x*y,I.y=l.y*u+v.y*y,p.isStatic||p.isSleeping||(g=t.sub(c,p.position,x),p.positionPrev.x+=I.x*p.inverseMass,p.positionPrev.y+=I.y*p.inverseMass,p.anglePrev+=t.cross(g,I)*p.inverseInertia),a.isStatic||a.isSleeping||(g=t.sub(c,a.position,x),a.positionPrev.x-=I.x*a.inverseMass,a.positionPrev.y-=I.y*a.inverseMass,a.anglePrev-=t.cross(g,I)*a.inverseInertia))},i.solveVelocity=function(e,s){for(var n=s*s,r=t._temp[0],p=t._temp[1],a=t._temp[2],l=t._temp[3],v=t._temp[4],m=t._temp[5],c=0;c<e.length;c++){var u=e[c];if(u.isActive&&!u.isSensor){var y=u.collision,g=y.parentA,I=y.parentB,x=y.normal,P=y.tangent,f=u.activeContacts,h=1/f.length;g.velocity.x=g.position.x-g.positionPrev.x,g.velocity.y=g.position.y-g.positionPrev.y,I.velocity.x=I.position.x-I.positionPrev.x,I.velocity.y=I.position.y-I.positionPrev.y,g.angularVelocity=g.angle-g.anglePrev,I.angularVelocity=I.angle-I.anglePrev;for(var S=0;S<f.length;S++){var _=f[S],M=_.vertex,d=t.sub(M,g.position,p),C=t.sub(M,I.position,a),A=t.add(g.velocity,t.mult(t.perp(d),g.angularVelocity),l),V=t.add(I.velocity,t.mult(t.perp(C),I.angularVelocity),v),b=t.sub(A,V,m),T=t.dot(x,b),B=t.dot(P,b),q=Math.abs(B),W=o.sign(B),D=(1+u.restitution)*T,N=o.clamp(u.separation+T,0,1)*i._frictionNormalMultiplier,j=B,k=1/0;q>u.friction*u.frictionStatic*N*n&&(k=q,j=o.clamp(u.friction*W*n,-k,k));var w=t.cross(d,x),z=t.cross(C,x),E=h/(g.inverseMass+I.inverseMass+g.inverseInertia*w*w+I.inverseInertia*z*z);if(D*=E,j*=E,T<0&&T*T>i._restingThresh*n)_.normalImpulse=0;else{var F=_.normalImpulse;_.normalImpulse=Math.min(_.normalImpulse+D,0),D=_.normalImpulse-F}if(B*B>i._restingThreshTangent*n)_.tangentImpulse=0;else{var G=_.tangentImpulse;_.tangentImpulse=o.clamp(_.tangentImpulse+j,-k,k),j=_.tangentImpulse-G}r.x=x.x*D+P.x*j,r.y=x.y*D+P.y*j,g.isStatic||g.isSleeping||(g.positionPrev.x+=r.x*g.inverseMass,g.positionPrev.y+=r.y*g.inverseMass,g.anglePrev+=t.cross(d,r)*g.inverseInertia),I.isStatic||I.isSleeping||(I.positionPrev.x-=r.x*I.inverseMass,I.positionPrev.y-=r.y*I.inverseMass,I.anglePrev-=t.cross(C,r)*I.inverseInertia)}}}};
},{"../geometry/Vertices":"DMKW","../geometry/Vector":"T2ej","../core/Common":"PO6A","../geometry/Bounds":"FjIP"}],"ckMm":[function(require,module,exports) {
var e={};module.exports=e;var s=require("../body/Composite"),r=require("./Common");e.create=function(e){return r.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,e)},e.reset=function(e){e.extended&&(e.narrowDetections=0,e.narrowphaseTests=0,e.narrowReuse=0,e.narrowReuseCount=0,e.midphaseTests=0,e.broadphaseTests=0,e.narrowEff=0,e.midEff=0,e.broadEff=0,e.collisions=0,e.buckets=0,e.pairs=0,e.bodies=0)},e.update=function(e,r){if(e.extended){var o=r.world,t=s.allBodies(o);e.collisions=e.narrowDetections,e.pairs=r.pairs.list.length,e.bodies=t.length,e.midEff=(e.narrowDetections/(e.midphaseTests||1)).toFixed(2),e.narrowEff=(e.narrowDetections/(e.narrowphaseTests||1)).toFixed(2),e.broadEff=(1-e.broadphaseTests/(t.length||1)).toFixed(2),e.narrowReuse=(e.narrowReuseCount/(e.narrowphaseTests||1)).toFixed(2)}};
},{"../body/Composite":"XuSr","./Common":"PO6A"}],"EydM":[function(require,module,exports) {
var e={};module.exports=e;var r=require("../body/World"),i=require("./Sleeping"),t=require("../collision/Resolver"),o=require("../collision/Pairs"),l=require("./Metrics"),a=require("../collision/Grid"),s=require("./Events"),n=require("../body/Composite"),c=require("../constraint/Constraint"),d=require("./Common"),p=require("../body/Body");e.create=function(e,i){i=(i=d.isElement(e)?i:e)||{},((e=d.isElement(e)?e:null)||i.render)&&d.warn("Engine.create: engine.render is deprecated (see docs)");var t={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:a}},s=d.extend(t,i);return s.world=i.world||r.create(s.world),s.pairs=o.create(),s.broadphase=s.broadphase.controller.create(s.broadphase),s.metrics=s.metrics||{extended:!1},s.metrics=l.create(s.metrics),s},e.update=function(r,a,d){a=a||1e3/60,d=d||1;var p,v=r.world,m=r.timing,g=r.broadphase,u=[];m.timestamp+=a*m.timeScale;var f={timestamp:m.timestamp};s.trigger(r,"beforeUpdate",f);var S=n.allBodies(v),y=n.allConstraints(v);for(l.reset(r.metrics),r.enableSleeping&&i.update(S,m.timeScale),e._bodiesApplyGravity(S,v.gravity),e._bodiesUpdate(S,a,m.timeScale,d,v.bounds),c.preSolveAll(S),p=0;p<r.constraintIterations;p++)c.solveAll(y,m.timeScale);c.postSolveAll(S),g.controller?(v.isModified&&g.controller.clear(g),g.controller.update(g,S,r,v.isModified),u=g.pairsList):u=S,v.isModified&&n.setModified(v,!1,!1,!0);var b=g.detector(u,r),h=r.pairs,q=m.timestamp;for(o.update(h,b,q),o.removeOld(h,q),r.enableSleeping&&i.afterCollisions(h.list,m.timeScale),h.collisionStart.length>0&&s.trigger(r,"collisionStart",{pairs:h.collisionStart}),t.preSolvePosition(h.list),p=0;p<r.positionIterations;p++)t.solvePosition(h.list,S,m.timeScale);for(t.postSolvePosition(S),c.preSolveAll(S),p=0;p<r.constraintIterations;p++)c.solveAll(y,m.timeScale);for(c.postSolveAll(S),t.preSolveVelocity(h.list),p=0;p<r.velocityIterations;p++)t.solveVelocity(h.list,m.timeScale);return h.collisionActive.length>0&&s.trigger(r,"collisionActive",{pairs:h.collisionActive}),h.collisionEnd.length>0&&s.trigger(r,"collisionEnd",{pairs:h.collisionEnd}),l.update(r.metrics,r),e._bodiesClearForces(S),s.trigger(r,"afterUpdate",f),r},e.merge=function(r,t){if(d.extend(r,t),t.world){r.world=t.world,e.clear(r);for(var o=n.allBodies(r.world),l=0;l<o.length;l++){var a=o[l];i.set(a,!1),a.id=d.nextId()}}},e.clear=function(e){var r=e.world;o.clear(e.pairs);var i=e.broadphase;if(i.controller){var t=n.allBodies(r);i.controller.clear(i),i.controller.update(i,t,e,!0)}},e._bodiesClearForces=function(e){for(var r=0;r<e.length;r++){var i=e[r];i.force.x=0,i.force.y=0,i.torque=0}},e._bodiesApplyGravity=function(e,r){var i=void 0!==r.scale?r.scale:.001;if((0!==r.x||0!==r.y)&&0!==i)for(var t=0;t<e.length;t++){var o=e[t];o.ignoreGravity||o.isStatic||o.isSleeping||(o.force.x+=o.mass*r.x*i*o.gravityScale.x,o.force.y+=o.mass*r.y*i*o.gravityScale.y)}},e._bodiesUpdate=function(e,r,i,t,o){for(var l=0;l<e.length;l++){var a=e[l];a.isStatic||a.isSleeping||p.update(a,r,i,t)}};
},{"../body/World":"pEW4","./Sleeping":"ynnK","../collision/Resolver":"mYJb","../collision/Pairs":"qiy4","./Metrics":"ckMm","../collision/Grid":"W1BO","./Events":"RHVv","../body/Composite":"XuSr","../constraint/Constraint":"e36s","./Common":"PO6A","../body/Body":"kNiP"}],"ZeOD":[function(require,module,exports) {
var e=require("./lib/core/Matter");e.Body=require("./lib/body/Body"),e.Composite=require("./lib/body/Composite"),e.World=require("./lib/body/World"),e.Detector=require("./lib/collision/Detector"),e.Grid=require("./lib/collision/Grid"),e.Pairs=require("./lib/collision/Pairs"),e.Pair=require("./lib/collision/Pair"),e.Query=require("./lib/collision/Query"),e.Resolver=require("./lib/collision/Resolver"),e.SAT=require("./lib/collision/SAT"),e.Constraint=require("./lib/constraint/Constraint"),e.Common=require("./lib/core/Common"),e.Engine=require("./lib/core/Engine"),e.Events=require("./lib/core/Events"),e.Sleeping=require("./lib/core/Sleeping"),e.Plugin=require("./lib/core/Plugin"),e.Bodies=require("./lib/factory/Bodies"),e.Composites=require("./lib/factory/Composites"),e.Axes=require("./lib/geometry/Axes"),e.Bounds=require("./lib/geometry/Bounds"),e.Svg=require("./lib/geometry/Svg"),e.Vector=require("./lib/geometry/Vector"),e.Vertices=require("./lib/geometry/Vertices"),e.World.add=e.Composite.add,e.World.remove=e.Composite.remove,e.World.addComposite=e.Composite.addComposite,e.World.addBody=e.Composite.addBody,e.World.addConstraint=e.Composite.addConstraint,e.World.clear=e.Composite.clear,module.exports=e;
},{"./lib/core/Matter":"Mdfl","./lib/body/Body":"kNiP","./lib/body/Composite":"XuSr","./lib/body/World":"pEW4","./lib/collision/Detector":"tvlp","./lib/collision/Grid":"W1BO","./lib/collision/Pairs":"qiy4","./lib/collision/Pair":"qcG8","./lib/collision/Query":"Kw35","./lib/collision/Resolver":"mYJb","./lib/collision/SAT":"YHml","./lib/constraint/Constraint":"e36s","./lib/core/Common":"PO6A","./lib/core/Engine":"EydM","./lib/core/Events":"RHVv","./lib/core/Sleeping":"ynnK","./lib/core/Plugin":"DXtm","./lib/factory/Bodies":"Mw0C","./lib/factory/Composites":"UDHQ","./lib/geometry/Axes":"aon4","./lib/geometry/Bounds":"FjIP","./lib/geometry/Svg":"pQ2x","./lib/geometry/Vector":"T2ej","./lib/geometry/Vertices":"DMKW"}],"s2ph":[function(require,module,exports) {
var t=require("../../CustomMain"),o={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Body.create",function(){o.Body.init(this)}),t.before("Engine.update",function(t){o.Engine.update(t)})},Body:{init:function(t){t.plugin.attractors=t.plugin.attractors||[]}},Engine:{update:function(o){for(var n=o.world,r=t.Composite.allBodies(n),i=0;i<r.length;i+=1){var a=r[i],e=a.plugin.attractors;if(e&&e.length>0)for(var s=i+1;s<r.length;s+=1)for(var c=r[s],u=0;u<e.length;u+=1){var l=e[u],p=l;t.Common.isFunction(l)&&(p=l(a,c)),p&&t.Body.applyForce(c,c.position,p)}}}},Attractors:{gravityConstant:.001,gravity:function(n,r){var i=t.Vector.sub(r.position,n.position),a=t.Vector.magnitudeSquared(i)||1e-4,e=t.Vector.normalise(i),s=-o.Attractors.gravityConstant*(n.mass*r.mass/a),c=t.Vector.mult(e,s);t.Body.applyForce(n,n.position,t.Vector.neg(c)),t.Body.applyForce(r,r.position,c)}}};module.exports=o;
},{"../../CustomMain":"ZeOD"}],"y8q8":[function(require,module,exports) {
var e={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(e){e.after("Engine.create",function(){e.Events.on(this,"collisionStart",function(l){l.pairs.map(function(l){var i=l.bodyA,o=l.bodyB;i.gameObject&&i.gameObject.emit("collide",i,o,l),o.gameObject&&o.gameObject.emit("collide",o,i,l),e.Events.trigger(i,"onCollide",{pair:l}),e.Events.trigger(o,"onCollide",{pair:l}),i.onCollideCallback&&i.onCollideCallback(l),o.onCollideCallback&&o.onCollideCallback(l),i.onCollideWith[o.id]&&i.onCollideWith[o.id](o,l),o.onCollideWith[i.id]&&o.onCollideWith[i.id](i,l)})}),e.Events.on(this,"collisionActive",function(l){l.pairs.map(function(l){var i=l.bodyA,o=l.bodyB;i.gameObject&&i.gameObject.emit("collideActive",i,o,l),o.gameObject&&o.gameObject.emit("collideActive",o,i,l),e.Events.trigger(i,"onCollideActive",{pair:l}),e.Events.trigger(o,"onCollideActive",{pair:l}),i.onCollideActiveCallback&&i.onCollideActiveCallback(l),o.onCollideActiveCallback&&o.onCollideActiveCallback(l)})}),e.Events.on(this,"collisionEnd",function(l){l.pairs.map(function(l){var i=l.bodyA,o=l.bodyB;i.gameObject&&i.gameObject.emit("collideEnd",i,o,l),o.gameObject&&o.gameObject.emit("collideEnd",o,i,l),e.Events.trigger(i,"onCollideEnd",{pair:l}),e.Events.trigger(o,"onCollideEnd",{pair:l}),i.onCollideEndCallback&&i.onCollideEndCallback(l),o.onCollideEndCallback&&o.onCollideEndCallback(l)})})})}};module.exports=e;
},{}],"FOuy":[function(require,module,exports) {
var n=require("../../CustomMain"),o={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(n){n.after("Engine.update",function(){o.Engine.update(this)})},Engine:{update:function(a){for(var i=a.world,r=n.Composite.allBodies(i),t=n.Composite.allComposites(i),e=0;e<r.length;e+=1){var m=r[e];m.plugin.wrap&&o.Body.wrap(m,m.plugin.wrap)}for(e=0;e<t.length;e+=1){var u=t[e];u.plugin.wrap&&o.Composite.wrap(u,u.plugin.wrap)}}},Bounds:{wrap:function(n,o){var a=null,i=null;if(void 0!==o.min.x&&void 0!==o.max.x&&(n.min.x>o.max.x?a=o.min.x-n.max.x:n.max.x<o.min.x&&(a=o.max.x-n.min.x)),void 0!==o.min.y&&void 0!==o.max.y&&(n.min.y>o.max.y?i=o.min.y-n.max.y:n.max.y<o.min.y&&(i=o.max.y-n.min.y)),null!==a||null!==i)return{x:a||0,y:i||0}}},Body:{wrap:function(a,i){var r=o.Bounds.wrap(a.bounds,i);return r&&n.Body.translate(a,r),r}},Composite:{bounds:function(o){for(var a=n.Composite.allBodies(o),i=[],r=0;r<a.length;r+=1){var t=a[r];i.push(t.bounds.min,t.bounds.max)}return n.Bounds.create(i)},wrap:function(a,i){var r=o.Bounds.wrap(o.Composite.bounds(a),i);return r&&n.Composite.translate(a,r),r}}};module.exports=o;
},{"../../CustomMain":"ZeOD"}],"S1wO":[function(require,module,exports) {
var e=require("./lib/factory/Bodies"),i=require("./lib/body/Body"),t=require("../../utils/Class"),o=require("./lib/core/Common"),n=require("./lib/body/Composite"),r=require("./lib/core/Engine"),l=require("eventemitter3"),s=require("./events"),a=require("../../utils/object/GetFastValue"),h=require("../../utils/object/GetValue"),d=require("./lib/body/Body"),c=require("./lib/core/Events"),u=require("./MatterTileBody"),y=require("./lib/body/World"),p=require("./lib/geometry/Vector"),v=new t({Extends:l,initialize:function(e,i){l.call(this),this.scene=e,this.engine=r.create(i),this.localWorld=this.engine.world;var t=h(i,"gravity",null);t?this.setGravity(t.x,t.y,t.scale):!1===t&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=h(i,"enabled",!0),this.correction=h(i,"correction",1),this.getDelta=h(i,"getDelta",this.update60Hz);var o=a(i,"runner",{}),n=a(o,"fps",!1),s=a(o,"fps",60),d=a(o,"delta",1e3/s),c=a(o,"deltaMin",1e3/s),u=a(o,"deltaMax",1e3/(.5*s));n||(s=1e3/d),this.runner={fps:s,correction:a(o,"correction",1),deltaSampleSize:a(o,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:a(o,"isFixed",!1),delta:d,deltaMin:c,deltaMax:u},this.autoUpdate=h(i,"autoUpdate",!0);var y=h(i,"debug",!1);if(this.drawDebug="object"==typeof y||y,this.debugGraphic,this.debugConfig={showAxes:a(y,"showAxes",!1),showAngleIndicator:a(y,"showAngleIndicator",!1),angleColor:a(y,"angleColor",15208787),showBroadphase:a(y,"showBroadphase",!1),broadphaseColor:a(y,"broadphaseColor",16757760),showBounds:a(y,"showBounds",!1),boundsColor:a(y,"boundsColor",16777215),showVelocity:a(y,"showVelocity",!1),velocityColor:a(y,"velocityColor",44783),showCollisions:a(y,"showCollisions",!1),collisionColor:a(y,"collisionColor",16094476),showSeparations:a(y,"showSeparations",!1),separationColor:a(y,"separationColor",16753920),showBody:a(y,"showBody",!0),showStaticBody:a(y,"showStaticBody",!0),showInternalEdges:a(y,"showInternalEdges",!1),renderFill:a(y,"renderFill",!1),renderLine:a(y,"renderLine",!0),fillColor:a(y,"fillColor",1075465),fillOpacity:a(y,"fillOpacity",1),lineColor:a(y,"lineColor",2678297),lineOpacity:a(y,"lineOpacity",1),lineThickness:a(y,"lineThickness",1),staticFillColor:a(y,"staticFillColor",857979),staticLineColor:a(y,"staticLineColor",1255396),showSleeping:a(y,"showSleeping",!1),staticBodySleepOpacity:a(y,"staticBodySleepOpacity",.7),sleepFillColor:a(y,"sleepFillColor",4605510),sleepLineColor:a(y,"sleepLineColor",10066585),showSensors:a(y,"showSensors",!0),sensorFillColor:a(y,"sensorFillColor",857979),sensorLineColor:a(y,"sensorLineColor",1255396),showPositions:a(y,"showPositions",!0),positionSize:a(y,"positionSize",4),positionColor:a(y,"positionColor",14697178),showJoint:a(y,"showJoint",!0),jointColor:a(y,"jointColor",14737474),jointLineOpacity:a(y,"jointLineOpacity",1),jointLineThickness:a(y,"jointLineThickness",2),pinSize:a(y,"pinSize",4),pinColor:a(y,"pinColor",4382944),springColor:a(y,"springColor",14697184),anchorColor:a(y,"anchorColor",15724527),anchorSize:a(y,"anchorSize",4),showConvexHulls:a(y,"showConvexHulls",!1),hullColor:a(y,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),a(i,"setBounds",!1)){var p=i.setBounds;if("boolean"==typeof p)this.setBounds();else{var v=a(p,"x",0),f=a(p,"y",0),C=a(p,"width",e.sys.scale.width),g=a(p,"height",e.sys.scale.height),b=a(p,"thickness",64),S=a(p,"left",!0),x=a(p,"right",!0),m=a(p,"top",!0),w=a(p,"bottom",!0);this.setBounds(v,f,C,g,b,S,x,m,w)}}},setCompositeRenderStyle:function(e){var i,t,o,n=e.bodies,r=e.constraints,l=e.composites;for(i=0;i<n.length;i++)o=(t=n[i]).render,this.setBodyRenderStyle(t,o.lineColor,o.lineOpacity,o.lineThickness,o.fillColor,o.fillOpacity);for(i=0;i<r.length;i++)o=(t=r[i]).render,this.setConstraintRenderStyle(t,o.lineColor,o.lineOpacity,o.lineThickness,o.pinSize,o.anchorColor,o.anchorSize);for(i=0;i<l.length;i++)t=l[i],this.setCompositeRenderStyle(t);return this},setBodyRenderStyle:function(e,i,t,o,n,r){var l=e.render,s=this.debugConfig;return l?(null==i&&(i=e.isStatic?s.staticLineColor:s.lineColor),null==t&&(t=s.lineOpacity),null==o&&(o=s.lineThickness),null==n&&(n=e.isStatic?s.staticFillColor:s.fillColor),null==r&&(r=s.fillOpacity),!1!==i&&(l.lineColor=i),!1!==t&&(l.lineOpacity=t),!1!==o&&(l.lineThickness=o),!1!==n&&(l.fillColor=n),!1!==r&&(l.fillOpacity=r),this):this},setConstraintRenderStyle:function(e,i,t,o,n,r,l){var s=e.render,a=this.debugConfig;if(!s)return this;if(null==i){var h=s.type;"line"===h?i=a.jointColor:"pin"===h?i=a.pinColor:"spring"===h&&(i=a.springColor)}return null==t&&(t=a.jointLineOpacity),null==o&&(o=a.jointLineThickness),null==n&&(n=a.pinSize),null==r&&(r=a.anchorColor),null==l&&(l=a.anchorSize),!1!==i&&(s.lineColor=i),!1!==t&&(s.lineOpacity=t),!1!==o&&(s.lineThickness=o),!1!==n&&(s.pinSize=n),!1!==r&&(s.anchorColor=r),!1!==l&&(s.anchorSize=l),this},setEventsProxy:function(){var e=this,i=this.engine,t=this.localWorld;this.drawDebug&&(c.on(t,"compositeModified",function(i){e.setCompositeRenderStyle(i)}),c.on(t,"beforeAdd",function(i){for(var t=[].concat(i.object),o=0;o<t.length;o++){var n=t[o],r=n.render;"body"===n.type?e.setBodyRenderStyle(n,r.lineColor,r.lineOpacity,r.lineThickness,r.fillColor,r.fillOpacity):"composite"===n.type?e.setCompositeRenderStyle(n):"constraint"===n.type&&e.setConstraintRenderStyle(n,r.lineColor,r.lineOpacity,r.lineThickness,r.pinSize,r.anchorColor,r.anchorSize)}})),c.on(t,"beforeAdd",function(i){e.emit(s.BEFORE_ADD,i)}),c.on(t,"afterAdd",function(i){e.emit(s.AFTER_ADD,i)}),c.on(t,"beforeRemove",function(i){e.emit(s.BEFORE_REMOVE,i)}),c.on(t,"afterRemove",function(i){e.emit(s.AFTER_REMOVE,i)}),c.on(i,"beforeUpdate",function(i){e.emit(s.BEFORE_UPDATE,i)}),c.on(i,"afterUpdate",function(i){e.emit(s.AFTER_UPDATE,i)}),c.on(i,"collisionStart",function(i){var t,o,n=i.pairs;n.length>0&&(t=n[0].bodyA,o=n[0].bodyB),e.emit(s.COLLISION_START,i,t,o)}),c.on(i,"collisionActive",function(i){var t,o,n=i.pairs;n.length>0&&(t=n[0].bodyA,o=n[0].bodyB),e.emit(s.COLLISION_ACTIVE,i,t,o)}),c.on(i,"collisionEnd",function(i){var t,o,n=i.pairs;n.length>0&&(t=n[0].bodyA,o=n[0].bodyB),e.emit(s.COLLISION_END,i,t,o)})},setBounds:function(e,i,t,o,n,r,l,s,a){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===t&&(t=this.scene.sys.scale.width),void 0===o&&(o=this.scene.sys.scale.height),void 0===n&&(n=64),void 0===r&&(r=!0),void 0===l&&(l=!0),void 0===s&&(s=!0),void 0===a&&(a=!0),this.updateWall(r,"left",e-n,i-n,n,o+2*n),this.updateWall(l,"right",e+t,i-n,n,o+2*n),this.updateWall(s,"top",e,i-n,t,n),this.updateWall(a,"bottom",e,i+o,t,n),this},updateWall:function(e,i,t,o,n,r){var l=this.walls[i];e?(l&&y.remove(this.localWorld,l),t+=n/2,o+=r/2,this.walls[i]=this.create(t,o,n,r,{isStatic:!0,friction:0,frictionStatic:0})):(l&&y.remove(this.localWorld,l),this.walls[i]=null)},createDebugGraphic:function(){var e=this.scene.sys.add.graphics({x:0,y:0});return e.setDepth(Number.MAX_VALUE),this.debugGraphic=e,this.drawDebug=!0,e},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(e,i,t){return void 0===e&&(e=0),void 0===i&&(i=1),this.localWorld.gravity.x=e,this.localWorld.gravity.y=i,void 0!==t&&(this.localWorld.gravity.scale=t),this},create:function(i,t,o,n,r){var l=e.rectangle(i,t,o,n,r);return y.add(this.localWorld,l),l},add:function(e){return y.add(this.localWorld,e),this},remove:function(e,i){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var o=e[t],r=o.body?o.body:o;n.remove(this.localWorld,r,i)}return this},removeConstraint:function(e,i){return n.remove(this.localWorld,e,i),this},convertTilemapLayer:function(e,i){var t=e.layer,o=e.getTilesWithin(0,0,t.width,t.height,{isColliding:!0});return this.convertTiles(o,i),this},convertTiles:function(e,i){if(0===e.length)return this;for(var t=0;t<e.length;t++)new u(this,e[t],i);return this},nextGroup:function(e){return d.nextGroup(e)},nextCategory:function(){return d.nextCategory()},pause:function(){return this.enabled=!1,this.emit(s.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(s.RESUME),this},update:function(e,i){if(this.enabled&&this.autoUpdate){var t=this.engine,o=this.runner,n=t.timing,l=this.correction;o.isFixed?i=this.getDelta(e,i):(i=e-o.timePrev||o.delta,o.timePrev=e,o.deltaHistory.push(i),o.deltaHistory=o.deltaHistory.slice(-o.deltaSampleSize),l=(i=(i=(i=Math.min.apply(null,o.deltaHistory))<o.deltaMin?o.deltaMin:i)>o.deltaMax?o.deltaMax:i)/o.delta,o.delta=i),0!==o.timeScalePrev&&(l*=n.timeScale/o.timeScalePrev),0===n.timeScale&&(l=0),o.timeScalePrev=n.timeScale,o.correction=l,o.frameCounter+=1,e-o.counterTimestamp>=1e3&&(o.fps=o.frameCounter*((e-o.counterTimestamp)/1e3),o.counterTimestamp=e,o.frameCounter=0),r.update(t,i,l)}},step:function(e,i){r.update(this.engine,e,i)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(e){var i=e.hasOwnProperty("body")?e.body:e;return null!==n.get(this.localWorld,i.id,i.type)},getAllBodies:function(){return n.allBodies(this.localWorld)},getAllConstraints:function(){return n.allConstraints(this.localWorld)},getAllComposites:function(){return n.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var e=this.debugConfig,i=this.engine,t=this.debugGraphic,o=n.allBodies(this.localWorld);this.debugGraphic.clear(),e.showBroadphase&&i.broadphase.controller&&this.renderGrid(i.broadphase,t,e.broadphaseColor,.5),e.showBounds&&this.renderBodyBounds(o,t,e.boundsColor,.5),(e.showBody||e.showStaticBody)&&this.renderBodies(o),e.showJoint&&this.renderJoints(),(e.showAxes||e.showAngleIndicator)&&this.renderBodyAxes(o,t,e.showAxes,e.angleColor,.5),e.showVelocity&&this.renderBodyVelocity(o,t,e.velocityColor,1,2),e.showSeparations&&this.renderSeparations(i.pairs.list,t,e.separationColor),e.showCollisions&&this.renderCollisions(i.pairs.list,t,e.collisionColor)}},renderGrid:function(e,i,t,n){i.lineStyle(1,t,n);for(var r=o.keys(e.buckets),l=0;l<r.length;l++){var s=r[l];if(!(e.buckets[s].length<2)){var a=s.split(/C|R/);i.strokeRect(parseInt(a[1],10)*e.bucketWidth,parseInt(a[2],10)*e.bucketHeight,e.bucketWidth,e.bucketHeight)}}return this},renderSeparations:function(e,i,t){i.lineStyle(1,t,1);for(var o=0;o<e.length;o++){var n=e[o];if(n.isActive){var r=n.collision,l=r.bodyA,s=r.bodyB,a=l.position,h=s.position,d=r.penetration,c=l.isStatic||s.isStatic?1:4;s.isStatic&&(c=0),i.lineBetween(h.x,h.y,h.x-d.x*c,h.y-d.y*c),c=l.isStatic||s.isStatic?1:4,l.isStatic&&(c=0),i.lineBetween(a.x,a.y,a.x-d.x*c,a.y-d.y*c)}}return this},renderCollisions:function(e,i,t){var o,n;for(i.lineStyle(1,t,.5),i.fillStyle(t,1),o=0;o<e.length;o++)if((n=e[o]).isActive)for(var r=0;r<n.activeContacts.length;r++){var l=n.activeContacts[r].vertex;i.fillRect(l.x-2,l.y-2,5,5)}for(o=0;o<e.length;o++)if((n=e[o]).isActive){var s=n.collision,a=n.activeContacts;if(a.length>0){var h=a[0].vertex.x,d=a[0].vertex.y;2===a.length&&(h=(a[0].vertex.x+a[1].vertex.x)/2,d=(a[0].vertex.y+a[1].vertex.y)/2),s.bodyB===s.supports[0].body||s.bodyA.isStatic?i.lineBetween(h-8*s.normal.x,d-8*s.normal.y,h,d):i.lineBetween(h+8*s.normal.x,d+8*s.normal.y,h,d)}}return this},renderBodyBounds:function(e,i,t,o){i.lineStyle(1,t,o);for(var n=0;n<e.length;n++){var r=e[n];if(r.render.visible){var l=r.bounds;if(l)i.strokeRect(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y);else for(var s=r.parts,a=s.length>1?1:0;a<s.length;a++){var h=s[a];i.strokeRect(h.bounds.min.x,h.bounds.min.y,h.bounds.max.x-h.bounds.min.x,h.bounds.max.y-h.bounds.min.y)}}}return this},renderBodyAxes:function(e,i,t,o,n){i.lineStyle(1,o,n);for(var r=0;r<e.length;r++){var l,s,a,h=e[r],d=h.parts;if(h.render.visible)if(t)for(s=d.length>1?1:0;s<d.length;s++)for(l=d[s],a=0;a<l.axes.length;a++){var c=l.axes[a];i.lineBetween(l.position.x,l.position.y,l.position.x+20*c.x,l.position.y+20*c.y)}else for(s=d.length>1?1:0;s<d.length;s++)for(l=d[s],a=0;a<l.axes.length;a++)i.lineBetween(l.position.x,l.position.y,(l.vertices[0].x+l.vertices[l.vertices.length-1].x)/2,(l.vertices[0].y+l.vertices[l.vertices.length-1].y)/2)}return this},renderBodyVelocity:function(e,i,t,o,n){i.lineStyle(n,t,o);for(var r=0;r<e.length;r++){var l=e[r];l.render.visible&&i.lineBetween(l.position.x,l.position.y,l.position.x+2*(l.position.x-l.positionPrev.x),l.position.y+2*(l.position.y-l.positionPrev.y))}return this},renderBodies:function(e){for(var i=this.debugGraphic,t=this.debugConfig,o=t.showBody,n=t.showStaticBody,r=t.showSleeping,l=t.showInternalEdges,s=t.showConvexHulls,a=t.renderFill,h=t.renderLine,d=t.staticBodySleepOpacity,c=t.sleepFillColor,u=t.sleepLineColor,y=t.hullColor,p=0;p<e.length;p++){var v=e[p];if(v.render.visible&&((n||!v.isStatic)&&(o||v.isStatic))){var f=v.render.lineColor,C=v.render.lineOpacity,g=v.render.lineThickness,b=v.render.fillColor,S=v.render.fillOpacity;r&&v.isSleeping&&(v.isStatic?(C*=d,S*=d):(f=u,b=c)),a||(b=null),h||(f=null),this.renderBody(v,i,l,f,C,g,b,S);var x=v.parts.length;s&&x>1&&this.renderConvexHull(v,i,y,g)}}},renderBody:function(e,i,t,o,n,r,l,s){void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=1),void 0===l&&(l=null),void 0===s&&(s=null);for(var a=this.debugConfig,h=a.sensorFillColor,d=a.sensorLineColor,c=e.parts,u=c.length,y=u>1?1:0;y<u;y++){var p=c[y],v=p.render,f=v.opacity;if(v.visible&&0!==f&&(!p.isSensor||a.showSensors)){var C=p.circleRadius;if(i.beginPath(),p.isSensor?(null!==l&&i.fillStyle(h,s*f),null!==o&&i.lineStyle(r,d,n*f)):(null!==l&&i.fillStyle(l,s*f),null!==o&&i.lineStyle(r,o,n*f)),C)i.arc(p.position.x,p.position.y,C,0,2*Math.PI);else{var g=p.vertices,b=g.length;i.moveTo(g[0].x,g[0].y);for(var S=1;S<b;S++){var x=g[S];if(!g[S-1].isInternal||t?i.lineTo(x.x,x.y):i.moveTo(x.x,x.y),S<b&&x.isInternal&&!t){var m=(S+1)%b;i.moveTo(g[m].x,g[m].y)}}i.closePath()}null!==l&&i.fillPath(),null!==o&&i.strokePath()}}if(a.showPositions&&!e.isStatic){var w=e.position.x,B=e.position.y,A=Math.ceil(a.positionSize/2);i.fillStyle(a.positionColor,1),i.fillRect(w-A,B-A,a.positionSize,a.positionSize)}return this},renderConvexHull:function(e,i,t,o){if(void 0===o&&(o=1),e.parts.length>1){var n=e.vertices;i.lineStyle(o,t),i.beginPath(),i.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)i.lineTo(n[r].x,n[r].y);i.lineTo(n[0].x,n[0].y),i.strokePath()}return this},renderJoints:function(){for(var e=this.debugGraphic,i=n.allConstraints(this.localWorld),t=0;t<i.length;t++){var o=i[t].render,r=o.lineColor,l=o.lineOpacity,s=o.lineThickness,a=o.pinSize,h=o.anchorColor,d=o.anchorSize;this.renderConstraint(i[t],e,r,l,s,a,h,d)}},renderConstraint:function(e,i,t,n,r,l,s,a){var h=e.render;if(!h.visible||!e.pointA||!e.pointB)return this;i.lineStyle(r,t,n);var d,c,u=e.bodyA,y=e.bodyB;if(d=u?p.add(u.position,e.pointA):e.pointA,"pin"===h.type)i.strokeCircle(d.x,d.y,l);else{if(c=y?p.add(y.position,e.pointB):e.pointB,i.beginPath(),i.moveTo(d.x,d.y),"spring"===h.type)for(var v,f=p.sub(c,d),C=p.perp(p.normalise(f)),g=Math.ceil(o.clamp(e.length/5,12,20)),b=1;b<g;b+=1)v=b%2==0?1:-1,i.lineTo(d.x+f.x*(b/g)+C.x*v*4,d.y+f.y*(b/g)+C.y*v*4);i.lineTo(c.x,c.y)}return i.strokePath(),h.anchors&&a>0&&(i.fillStyle(s),i.fillCircle(d.x,d.y,a),i.fillCircle(c.x,c.y,a)),this},resetCollisionIDs:function(){return i._nextCollidingGroupId=1,i._nextNonCollidingGroupId=-1,i._nextCategory=1,this},shutdown:function(){c.off(this.engine),this.removeAllListeners(),y.clear(this.localWorld,!1),r.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});module.exports=v;
},{"./lib/factory/Bodies":"Mw0C","./lib/body/Body":"kNiP","../../utils/Class":"Q4x4","./lib/core/Common":"PO6A","./lib/body/Composite":"XuSr","./lib/core/Engine":"EydM","eventemitter3":"Clm3","./events":"Lgcd","../../utils/object/GetFastValue":"xbYy","../../utils/object/GetValue":"FWyS","./lib/core/Events":"RHVv","./MatterTileBody":"tPzQ","./lib/body/World":"pEW4","./lib/geometry/Vector":"T2ej"}],"R9dO":[function(require,module,exports) {
var t=require("../../display/align/const"),e=require("./lib/geometry/Axes"),i=require("./lib/factory/Bodies"),s=require("./lib/body/Body"),o=require("./BodyBounds"),r=require("./lib/geometry/Bounds"),n=require("../../utils/Class"),h=require("./lib/body/Composite"),a=require("./lib/factory/Composites"),l=require("./lib/constraint/Constraint"),u=require("./lib/collision/Detector"),c=require("../../math/distance/DistanceBetween"),d=require("./Factory"),y=require("../../utils/object/GetFastValue"),g=require("../../utils/object/GetValue"),f=require("./lib/collision/Grid"),p=require("./lib/plugins/MatterAttractors"),b=require("./lib/plugins/MatterCollisionEvents"),B=require("./lib/core/Matter"),T=require("./lib/plugins/MatterWrap"),v=require("../../utils/object/Merge"),m=require("./lib/collision/Pair"),w=require("./lib/collision/Pairs"),E=require("./lib/core/Plugin"),M=require("../../plugins/PluginCache"),q=require("./lib/collision/Query"),A=require("./lib/collision/Resolver"),P=require("./lib/collision/SAT"),O=require("../../scene/events"),_=require("./lib/geometry/Svg"),C=require("./lib/geometry/Vector"),x=require("./lib/geometry/Vertices"),R=require("./World"),V=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=s,this.composite=h,this.detector=u,this.grid=f,this.pair=m,this.pairs=w,this.query=q,this.resolver=A,this.sat=P,this.constraint=l,this.bodies=i,this.composites=a,this.axes=e,this.bounds=r,this.svg=_,this.vector=C,this.vertices=x,this.verts=x,this._tempVec2=C.create(),g(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),g(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),g(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),A._restingThresh=g(this.config,"restingThresh",4),A._restingThreshTangent=g(this.config,"restingThreshTangent",6),A._positionDampen=g(this.config,"positionDampen",.9),A._positionWarming=g(this.config,"positionWarming",.8),A._frictionNormalMultiplier=g(this.config,"frictionNormalMultiplier",5),t.sys.events.once(O.BOOT,this.boot,this),t.sys.events.on(O.START,this.start,this)},boot:function(){this.world=new R(this.scene,this.config),this.add=new d(this.world),this.bodyBounds=new o,this.systems.events.once(O.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new R(this.scene,this.config),this.add=new d(this.world));var t=this.systems.events;t.on(O.UPDATE,this.world.update,this.world),t.on(O.POST_UPDATE,this.world.postUpdate,this.world),t.once(O.SHUTDOWN,this.shutdown,this)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return v(y(e,"matter",{}),y(t,"matter",{}))},enableAttractorPlugin:function(){return E.register(p),E.use(B,p),this},enableWrapPlugin:function(){return E.register(T),E.use(B,T),this},enableCollisionEventsPlugin:function(){return E.register(b),E.use(B,b),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(t,e){this.world.step(t,e)},containsPoint:function(t,e,i){t=this.getMatterBodies(t);var s=C.create(e,i);return q.point(t,s).length>0},intersectPoint:function(t,e,i){i=this.getMatterBodies(i);var s=C.create(t,e),o=[];return q.point(i,s).forEach(function(t){-1===o.indexOf(t)&&o.push(t)}),o},intersectRect:function(t,e,i,s,o,r){void 0===o&&(o=!1),r=this.getMatterBodies(r);var n={min:{x:t,y:e},max:{x:t+i,y:e+s}},h=[];return q.region(r,n,o).forEach(function(t){-1===h.indexOf(t)&&h.push(t)}),h},intersectRay:function(t,e,i,s,o,r){void 0===o&&(o=1),r=this.getMatterBodies(r);for(var n=[],h=q.ray(r,C.create(t,e),C.create(i,s),o),a=0;a<h.length;a++)n.push(h[a].body);return n},intersectBody:function(t,e){e=this.getMatterBodies(e);for(var i=[],s=q.collides(t,e),o=0;o<s.length;o++){var r=s[o];r.bodyA===t?i.push(r.bodyB):i.push(r.bodyA)}return i},overlap:function(t,e,i,s,o){void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=i),Array.isArray(t)||(t=[t]),t=this.getMatterBodies(t),e=this.getMatterBodies(e);for(var r=!1,n=0;n<t.length;n++)for(var h=t[n],a=q.collides(h,e),l=0;l<a.length;l++){var u=a[l],c=u.bodyA.id===h.id?u.bodyB:u.bodyA;if(!s||s.call(o,h,c,u))if(r=!0,i)i.call(o,h,c,u);else if(!s)return!0}return r},setCollisionCategory:function(t,e){return(t=this.getMatterBodies(t)).forEach(function(t){t.collisionFilter.category=e}),this},setCollisionGroup:function(t,e){return(t=this.getMatterBodies(t)).forEach(function(t){t.collisionFilter.group=e}),this},setCollidesWith:function(t,e){t=this.getMatterBodies(t);var i=0;if(Array.isArray(e))for(var s=0;s<e.length;s++)i|=e[s];else i=e;return t.forEach(function(t){t.collisionFilter.mask=i}),this},getMatterBodies:function(t){if(!t)return this.world.getAllBodies();Array.isArray(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++){var s=t[i].hasOwnProperty("body")?t[i].body:t[i];e.push(s)}return e},setVelocity:function(t,e,i){t=this.getMatterBodies(t);var o=this._tempVec2;return o.x=e,o.y=i,t.forEach(function(t){s.setVelocity(t,o)}),this},setVelocityX:function(t,e){t=this.getMatterBodies(t);var i=this._tempVec2;return i.x=e,t.forEach(function(t){i.y=t.velocity.y,s.setVelocity(t,i)}),this},setVelocityY:function(t,e){t=this.getMatterBodies(t);var i=this._tempVec2;return i.y=e,t.forEach(function(t){i.x=t.velocity.x,s.setVelocity(t,i)}),this},setAngularVelocity:function(t,e){return(t=this.getMatterBodies(t)).forEach(function(t){s.setAngularVelocity(t,e)}),this},applyForce:function(t,e){t=this.getMatterBodies(t);var i=this._tempVec2;return t.forEach(function(t){i.x=t.position.x,i.y=t.position.y,s.applyForce(t,i,e)}),this},applyForceFromPosition:function(t,e,i,o){t=this.getMatterBodies(t);var r=this._tempVec2;return t.forEach(function(t){void 0===o&&(o=t.angle),r.x=i*Math.cos(o),r.y=i*Math.sin(o),s.applyForce(t,e,r)}),this},applyForceFromAngle:function(t,e,i){t=this.getMatterBodies(t);var o=this._tempVec2;return t.forEach(function(t){void 0===i&&(i=t.angle),o.x=e*Math.cos(i),o.y=e*Math.sin(i),s.applyForce(t,{x:t.position.x,y:t.position.y},o)}),this},getConstraintLength:function(t){var e=t.pointA.x,i=t.pointA.y,s=t.pointB.x,o=t.pointB.y;return t.bodyA&&(e+=t.bodyA.position.x,i+=t.bodyA.position.y),t.bodyB&&(s+=t.bodyB.position.x,o+=t.bodyB.position.y),c(e,i,s,o)},alignBody:function(e,i,o,r){var n;switch(e=e.hasOwnProperty("body")?e.body:e,r){case t.TOP_LEFT:case t.LEFT_TOP:n=this.bodyBounds.getTopLeft(e,i,o);break;case t.TOP_CENTER:n=this.bodyBounds.getTopCenter(e,i,o);break;case t.TOP_RIGHT:case t.RIGHT_TOP:n=this.bodyBounds.getTopRight(e,i,o);break;case t.LEFT_CENTER:n=this.bodyBounds.getLeftCenter(e,i,o);break;case t.CENTER:n=this.bodyBounds.getCenter(e,i,o);break;case t.RIGHT_CENTER:n=this.bodyBounds.getRightCenter(e,i,o);break;case t.LEFT_BOTTOM:case t.BOTTOM_LEFT:n=this.bodyBounds.getBottomLeft(e,i,o);break;case t.BOTTOM_CENTER:n=this.bodyBounds.getBottomCenter(e,i,o);break;case t.BOTTOM_RIGHT:case t.RIGHT_BOTTOM:n=this.bodyBounds.getBottomRight(e,i,o)}return n&&s.setPosition(e,n),this},shutdown:function(){var t=this.systems.events;this.world&&(t.off(O.UPDATE,this.world.update,this.world),t.off(O.POST_UPDATE,this.world.postUpdate,this.world)),t.off(O.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(O.START,this.start,this),this.scene=null,this.systems=null}});M.register("MatterPhysics",V,"matterPhysics"),module.exports=V;
},{"../../display/align/const":"Jy6T","./lib/geometry/Axes":"aon4","./lib/factory/Bodies":"Mw0C","./lib/body/Body":"kNiP","./BodyBounds":"tc5o","./lib/geometry/Bounds":"FjIP","../../utils/Class":"Q4x4","./lib/body/Composite":"XuSr","./lib/factory/Composites":"UDHQ","./lib/constraint/Constraint":"e36s","./lib/collision/Detector":"tvlp","../../math/distance/DistanceBetween":"akRU","./Factory":"GB5F","../../utils/object/GetFastValue":"xbYy","../../utils/object/GetValue":"FWyS","./lib/collision/Grid":"W1BO","./lib/plugins/MatterAttractors":"s2ph","./lib/plugins/MatterCollisionEvents":"y8q8","./lib/core/Matter":"Mdfl","./lib/plugins/MatterWrap":"FOuy","../../utils/object/Merge":"J7IV","./lib/collision/Pair":"qcG8","./lib/collision/Pairs":"qiy4","./lib/core/Plugin":"DXtm","../../plugins/PluginCache":"vXV4","./lib/collision/Query":"Kw35","./lib/collision/Resolver":"mYJb","./lib/collision/SAT":"YHml","../../scene/events":"Zlz3","./lib/geometry/Svg":"pQ2x","./lib/geometry/Vector":"T2ej","./lib/geometry/Vertices":"DMKW","./World":"S1wO"}],"qBm5":[function(require,module,exports) {
module.exports={BodyBounds:require("./BodyBounds"),Factory:require("./Factory"),Image:require("./MatterImage"),Matter:require("./CustomMain"),MatterPhysics:require("./MatterPhysics"),PolyDecomp:require("./poly-decomp"),Sprite:require("./MatterSprite"),TileBody:require("./MatterTileBody"),PhysicsEditorParser:require("./PhysicsEditorParser"),PhysicsJSONParser:require("./PhysicsJSONParser"),World:require("./World")};
},{"./BodyBounds":"tc5o","./Factory":"GB5F","./MatterImage":"XVoW","./CustomMain":"ZeOD","./MatterPhysics":"R9dO","./poly-decomp":"tcCB","./MatterSprite":"OZjb","./MatterTileBody":"tPzQ","./PhysicsEditorParser":"VuH9","./PhysicsJSONParser":"dFIj","./World":"S1wO"}],"hKLf":[function(require,module,exports) {
module.exports={Arcade:require("./arcade"),Matter:require("./matter-js")};
},{"./arcade":"mtQ7","./matter-js":"qBm5"}],"GgTV":[function(require,module,exports) {
var n=require("../utils/Class"),i=new n({initialize:function(n){this.pluginManager=n,this.game=n.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});module.exports=i;
},{"../utils/Class":"Q4x4"}],"uVtQ":[function(require,module,exports) {
var s=require("./BasePlugin"),e=require("../utils/Class"),t=require("../scene/events"),i=new e({Extends:s,initialize:function(e,i){s.call(this,i),this.scene=e,this.systems=e.sys,e.sys.events.once(t.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});module.exports=i;
},{"./BasePlugin":"GgTV","../utils/Class":"Q4x4","../scene/events":"Zlz3"}],"NYKE":[function(require,module,exports) {
module.exports={BasePlugin:require("./BasePlugin"),DefaultPlugins:require("./DefaultPlugins"),PluginCache:require("./PluginCache"),PluginManager:require("./PluginManager"),ScenePlugin:require("./ScenePlugin")};
},{"./BasePlugin":"GgTV","./DefaultPlugins":"L6E0","./PluginCache":"vXV4","./PluginManager":"CwAX","./ScenePlugin":"uVtQ"}],"BVyi":[function(require,module,exports) {
module.exports={CanvasRenderer:require("./CanvasRenderer"),GetBlendModes:require("./utils/GetBlendModes"),SetTransform:require("./utils/SetTransform")};
},{"./CanvasRenderer":"Uqk3","./utils/GetBlendModes":"k2xT","./utils/SetTransform":"Jz6d"}],"H5wY":[function(require,module,exports) {
module.exports={Canvas:require("./CanvasSnapshot"),WebGL:require("./WebGLSnapshot")};
},{"./CanvasSnapshot":"sBaW","./WebGLSnapshot":"zdkt"}],"A6VB":[function(require,module,exports) {
module.exports={BitmapMaskPipeline:require("./BitmapMaskPipeline"),ForwardDiffuseLightPipeline:require("./ForwardDiffuseLightPipeline"),TextureTintPipeline:require("./TextureTintPipeline"),TextureTintStripPipeline:require("./TextureTintStripPipeline"),ModelViewProjection:require("./components/ModelViewProjection")};
},{"./BitmapMaskPipeline":"BD6f","./ForwardDiffuseLightPipeline":"fuar","./TextureTintPipeline":"w8xl","./TextureTintStripPipeline":"ByRZ","./components/ModelViewProjection":"VByf"}],"Ozas":[function(require,module,exports) {
module.exports={Utils:require("./Utils"),WebGLPipeline:require("./WebGLPipeline"),WebGLRenderer:require("./WebGLRenderer"),Pipelines:require("./pipelines"),BYTE:0,SHORT:1,UNSIGNED_BYTE:2,UNSIGNED_SHORT:3,FLOAT:4};
},{"./Utils":"mjFh","./WebGLPipeline":"EVZ4","./WebGLRenderer":"FVKV","./pipelines":"A6VB"}],"tKoY":[function(require,module,exports) {
module.exports={Canvas:require("./canvas"),Snapshot:require("./snapshot"),WebGL:require("./webgl")};
},{"./canvas":"BVyi","./snapshot":"H5wY","./webgl":"Ozas"}],"UC2W":[function(require,module,exports) {
var e=require("../utils/object/Extend"),r=require("./const"),O={Center:require("./const/CENTER_CONST"),Events:require("./events"),Orientation:require("./const/ORIENTATION_CONST"),ScaleManager:require("./ScaleManager"),ScaleModes:require("./const/SCALE_MODE_CONST"),Zoom:require("./const/ZOOM_CONST")};O=e(!1,O,r.CENTER),O=e(!1,O,r.ORIENTATION),O=e(!1,O,r.SCALE_MODE),O=e(!1,O,r.ZOOM),module.exports=O;
},{"../utils/object/Extend":"CtVZ","./const":"Spu2","./const/CENTER_CONST":"Ylke","./events":"r6hq","./const/ORIENTATION_CONST":"BGdD","./ScaleManager":"UoJ6","./const/SCALE_MODE_CONST":"z4L3","./const/ZOOM_CONST":"WDRA"}],"ijy0":[function(require,module,exports) {
var t=require("../math/Clamp"),s=require("../utils/Class"),e=require("./events"),i=require("../utils/object/GetFastValue"),n=require("../plugins/PluginCache"),r=new s({initialize:function(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(e.BOOT,this.boot,this),t.sys.events.on(e.START,this.pluginStart,this)},boot:function(){this.systems.events.once(e.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(e.SHUTDOWN,this.shutdown,this)},start:function(t,s){return void 0===t&&(t=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",t,s),this},restart:function(t){var s=this.key;return this.manager.queueOp("stop",s),this.manager.queueOp("start",s,t),this},transition:function(t){void 0===t&&(t={});var s=i(t,"target",!1),n=this.manager.getScene(s);if(!s||!this.checkValidTransition(n))return!1;var r=i(t,"duration",1e3);this._elapsed=0,this._target=n,this._duration=r,this._willSleep=i(t,"sleep",!1),this._willRemove=i(t,"remove",!1);var h=i(t,"onUpdate",null);h&&(this._onUpdate=h,this._onUpdateScope=i(t,"onUpdateScope",this.scene));var o=i(t,"allowInput",!1);this.settings.transitionAllowInput=o;var a=n.sys.settings;return a.isTransition=!0,a.transitionFrom=this.scene,a.transitionDuration=r,a.transitionAllowInput=o,i(t,"moveAbove",!1)?this.manager.moveAbove(this.key,s):i(t,"moveBelow",!1)&&this.manager.moveBelow(this.key,s),n.sys.isSleeping()?n.sys.wake(i(t,"data")):this.manager.start(s,i(t,"data")),this.systems.events.emit(e.TRANSITION_OUT,n,r),this.systems.events.on(e.UPDATE,this.step,this),!0},checkValidTransition:function(t){return!(!t||t.sys.isActive()||t.sys.isTransitioning()||t===this.scene||this.systems.isTransitioning())},step:function(s,e){this._elapsed+=e,this.transitionProgress=t(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var t=this._target.sys,s=this._target.sys.settings;this.systems.events.off(e.UPDATE,this.step,this),t.events.emit(e.TRANSITION_COMPLETE,this.scene),s.isTransition=!1,s.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(t,s,e,i){return this.manager.add(t,s,e,i)},launch:function(t,s){return t&&t!==this.key&&this.manager.queueOp("start",t,s),this},run:function(t,s){return t&&t!==this.key&&this.manager.queueOp("run",t,s),this},pause:function(t,s){return void 0===t&&(t=this.key),this.manager.queueOp("pause",t,s),this},resume:function(t,s){return void 0===t&&(t=this.key),this.manager.queueOp("resume",t,s),this},sleep:function(t,s){return void 0===t&&(t=this.key),this.manager.queueOp("sleep",t,s),this},wake:function(t,s){return void 0===t&&(t=this.key),this.manager.queueOp("wake",t,s),this},switch:function(t){return t!==this.key&&this.manager.queueOp("switch",this.key,t),this},stop:function(t,s){return void 0===t&&(t=this.key),this.manager.queueOp("stop",t,s),this},setActive:function(t,s,e){void 0===s&&(s=this.key);var i=this.manager.getScene(s);return i&&i.sys.setActive(t,e),this},setVisible:function(t,s){void 0===s&&(s=this.key);var e=this.manager.getScene(s);return e&&e.sys.setVisible(t),this},isSleeping:function(t){return void 0===t&&(t=this.key),this.manager.isSleeping(t)},isActive:function(t){return void 0===t&&(t=this.key),this.manager.isActive(t)},isPaused:function(t){return void 0===t&&(t=this.key),this.manager.isPaused(t)},isVisible:function(t){return void 0===t&&(t=this.key),this.manager.isVisible(t)},swapPosition:function(t,s){return void 0===s&&(s=this.key),t!==s&&this.manager.swapPosition(t,s),this},moveAbove:function(t,s){return void 0===s&&(s=this.key),t!==s&&this.manager.moveAbove(t,s),this},moveBelow:function(t,s){return void 0===s&&(s=this.key),t!==s&&this.manager.moveBelow(t,s),this},remove:function(t){return void 0===t&&(t=this.key),this.manager.remove(t),this},moveUp:function(t){return void 0===t&&(t=this.key),this.manager.moveUp(t),this},moveDown:function(t){return void 0===t&&(t=this.key),this.manager.moveDown(t),this},bringToTop:function(t){return void 0===t&&(t=this.key),this.manager.bringToTop(t),this},sendToBack:function(t){return void 0===t&&(t=this.key),this.manager.sendToBack(t),this},get:function(t){return this.manager.getScene(t)},getIndex:function(t){return void 0===t&&(t=this.key),this.manager.getIndex(t)},shutdown:function(){var t=this.systems.events;t.off(e.SHUTDOWN,this.shutdown,this),t.off(e.POST_UPDATE,this.step,this),t.off(e.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(e.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});n.register("ScenePlugin",r,"scenePlugin"),module.exports=r;
},{"../math/Clamp":"dPkx","../utils/Class":"Q4x4","./events":"Zlz3","../utils/object/GetFastValue":"xbYy","../plugins/PluginCache":"vXV4"}],"bgBY":[function(require,module,exports) {
var e=require("./const"),r=require("../utils/object/Extend"),n={Events:require("./events"),SceneManager:require("./SceneManager"),ScenePlugin:require("./ScenePlugin"),Settings:require("./Settings"),Systems:require("./Systems")};n=r(!1,n,e),module.exports=n;
},{"./const":"o8LK","../utils/object/Extend":"CtVZ","./events":"Zlz3","./SceneManager":"nhQn","./ScenePlugin":"ijy0","./Settings":"pdM0","./Systems":"FQkz"}],"F4W1":[function(require,module,exports) {
module.exports={List:require("./List"),Map:require("./Map"),ProcessQueue:require("./ProcessQueue"),RTree:require("./RTree"),Set:require("./Set"),Size:require("./Size")};
},{"./List":"qQUc","./Map":"t7Q5","./ProcessQueue":"mKHj","./RTree":"Bm7E","./Set":"TNKn","./Size":"nBZT"}],"pEaY":[function(require,module,exports) {
var E={LINEAR:0,NEAREST:1};module.exports=E;
},{}],"xQEn":[function(require,module,exports) {
var e=require("../utils/object/Extend"),r=require("./const"),u={CanvasTexture:require("./CanvasTexture"),Events:require("./events"),FilterMode:r,Frame:require("./Frame"),Parsers:require("./parsers"),Texture:require("./Texture"),TextureManager:require("./TextureManager"),TextureSource:require("./TextureSource")};u=e(!1,u,r),module.exports=u;
},{"../utils/object/Extend":"CtVZ","./const":"pEaY","./CanvasTexture":"iCi3","./events":"KB6D","./Frame":"qOsR","./parsers":"VrY0","./Texture":"ylmY","./TextureManager":"xZ5N","./TextureSource":"vpxx"}],"CT0u":[function(require,module,exports) {
var t=function(t,e,r){return t>=0&&t<r.width&&e>=0&&e<r.height};module.exports=t;
},{}],"yQ4L":[function(require,module,exports) {
var n=require("./IsInLayerBounds"),l=function(l,u,r,e){if(void 0===r&&(r=!1),n(l,u,e)){var a=e.data[u][l]||null;return null===a?null:-1===a.index?r?a:null:a}return null};module.exports=l;
},{"./IsInLayerBounds":"CT0u"}],"ZfEg":[function(require,module,exports) {
var e=require("./GetTileAt"),c=function(c,o,t){var f=e(c,o,!0,t),a=e(c,o-1,!0,t),l=e(c,o+1,!0,t),i=e(c-1,o,!0,t),s=e(c+1,o,!0,t),r=f&&f.collides;return r&&(f.faceTop=!0,f.faceBottom=!0,f.faceLeft=!0,f.faceRight=!0),a&&a.collides&&(r&&(f.faceTop=!1),a.faceBottom=!r),l&&l.collides&&(r&&(f.faceBottom=!1),l.faceTop=!r),i&&i.collides&&(r&&(f.faceLeft=!1),i.faceRight=!r),s&&s.collides&&(r&&(f.faceRight=!1),s.faceLeft=!r),f&&!f.collides&&f.resetFaces(),f};module.exports=c;
},{"./GetTileAt":"yQ4L"}],"lHB6":[function(require,module,exports) {
var i=require("../../utils/object/GetFastValue"),t=function(t,e,a,n,o,h){void 0===t&&(t=0),void 0===e&&(e=0),void 0===a&&(a=h.width),void 0===n&&(n=h.height);var r=i(o,"isNotEmpty",!1),d=i(o,"isColliding",!1),s=i(o,"hasInterestingFace",!1);t<0&&(a+=t,t=0),e<0&&(n+=e,e=0),t+a>h.width&&(a=Math.max(h.width-t,0)),e+n>h.height&&(n=Math.max(h.height-e,0));for(var u=[],l=e;l<e+n;l++)for(var v=t;v<t+a;v++){var c=h.data[l][v];if(null!==c){if(r&&-1===c.index)continue;if(d&&!c.collides)continue;if(s&&!c.hasInterestingFace)continue;u.push(c)}}return u};module.exports=t;
},{"../../utils/object/GetFastValue":"xbYy"}],"bLEW":[function(require,module,exports) {
var e=require("./GetTileAt"),l=require("./GetTilesWithin"),i=function(i,o,t,c,r){for(var n=null,s=null,u=null,a=null,f=l(i,o,t,c,null,r),d=0;d<f.length;d++){var x=f[d];x&&(x.collides?(n=e(x.x,x.y-1,!0,r),s=e(x.x,x.y+1,!0,r),u=e(x.x-1,x.y,!0,r),a=e(x.x+1,x.y,!0,r),x.faceTop=!n||!n.collides,x.faceBottom=!s||!s.collides,x.faceLeft=!u||!u.collides,x.faceRight=!a||!a.collides):x.resetFaces())}};module.exports=i;
},{"./GetTileAt":"yQ4L","./GetTilesWithin":"lHB6"}],"QIXy":[function(require,module,exports) {
var e=require("./GetTilesWithin"),i=require("./CalculateFacesWithin"),t=function(t,a,r,l,h,n,o,u){t<0&&(t=0),a<0&&(a=0),void 0===o&&(o=!0);for(var d=e(t,a,r,l,null,u),c=h-t,v=n-a,s=0;s<d.length;s++){var f=d[s].x+c,g=d[s].y+v;f>=0&&f<u.width&&g>=0&&g<u.height&&u.data[g][f]&&u.data[g][f].copy(d[s])}o&&i(h-1,n-1,r+2,l+2,u)};module.exports=t;
},{"./GetTilesWithin":"lHB6","./CalculateFacesWithin":"bLEW"}],"lOY6":[function(require,module,exports) {
var e=function(e,a,r){var l=r.baseTileWidth,c=r.tilemapLayer,o=0;return c&&(void 0===a&&(a=c.scene.cameras.main),o=c.x+a.scrollX*(1-c.scrollFactorX),l*=c.scaleX),o+e*l};module.exports=e;
},{}],"uwgp":[function(require,module,exports) {
var e=function(e,a,r){var l=r.baseTileHeight,c=r.tilemapLayer,o=0;return c&&(void 0===a&&(a=c.scene.cameras.main),o=c.y+a.scrollY*(1-c.scrollFactorY),l*=c.scaleY),o+e*l};module.exports=e;
},{}],"hErb":[function(require,module,exports) {
var e=require("./GetTilesWithin"),i=function(i,n,r,l,t,o,u){for(var d=e(r,l,t,o,null,u),x=0;x<d.length;x++)d[x]&&d[x].index===i&&(d[x].index=n)};module.exports=i;
},{"./GetTilesWithin":"lHB6"}],"fGCB":[function(require,module,exports) {
var e=require("./TileToWorldX"),r=require("./TileToWorldY"),i=require("./GetTilesWithin"),t=require("./ReplaceByIndex"),a=function(a,h,l,n,o,d){void 0===l&&(l={}),Array.isArray(a)||(a=[a]);var u=d.tilemapLayer;void 0===n&&(n=u.scene),void 0===o&&(o=n.cameras.main);var f,s=i(0,0,d.width,d.height,null,d),y=[];for(f=0;f<s.length;f++){var v=s[f];if(-1!==a.indexOf(v.index)){l.x=e(v.x,o,d),l.y=r(v.y,o,d);var g=n.make.sprite(l);y.push(g)}}if("number"==typeof h)for(f=0;f<a.length;f++)t(a[f],h,0,0,d.width,d.height,d);else if(Array.isArray(h))for(f=0;f<a.length;f++)t(a[f],h[f],0,0,d.width,d.height,d);return y};module.exports=a;
},{"./TileToWorldX":"lOY6","./TileToWorldY":"uwgp","./GetTilesWithin":"lHB6","./ReplaceByIndex":"hErb"}],"KfbT":[function(require,module,exports) {
var i=require("../../math/snap/SnapFloor"),l=require("../../math/snap/SnapCeil"),a=function(a,e,r,t){void 0===r&&(r=[]),void 0===t&&(t=0),r.length=0;var o,h,d,s=a.tilemapLayer.tilemap,n=a.tilemapLayer,p=a.data,f=a.width,u=a.height,c=Math.floor(s.tileWidth*n.scaleX),m=Math.floor(s.tileHeight*n.scaleY),w=0,x=f,g=0,v=u;if(!n.skipCull&&1===n.scrollFactorX&&1===n.scrollFactorY){var M=i(e.worldView.x-n.x,c,0,!0)-n.cullPaddingX,b=l(e.worldView.right-n.x,c,0,!0)+n.cullPaddingX,y=i(e.worldView.y-n.y,m,0,!0)-n.cullPaddingY,P=l(e.worldView.bottom-n.y,m,0,!0)+n.cullPaddingY;w=Math.max(0,M),x=Math.min(f,b),g=Math.max(0,y),v=Math.min(u,P)}if(0===t)for(h=g;h<v;h++)for(o=w;p[h]&&o<x;o++)(d=p[h][o])&&-1!==d.index&&d.visible&&0!==d.alpha&&r.push(d);else if(1===t)for(h=g;h<v;h++)for(o=x;p[h]&&o>=w;o--)(d=p[h][o])&&-1!==d.index&&d.visible&&0!==d.alpha&&r.push(d);else if(2===t)for(h=v;h>=g;h--)for(o=w;p[h]&&o<x;o++)(d=p[h][o])&&-1!==d.index&&d.visible&&0!==d.alpha&&r.push(d);else if(3===t)for(h=v;h>=g;h--)for(o=x;p[h]&&o>=w;o--)(d=p[h][o])&&-1!==d.index&&d.visible&&0!==d.alpha&&r.push(d);return n.tilesDrawn=r.length,n.tilesTotal=f*u,r};module.exports=a;
},{"../../math/snap/SnapFloor":"mSaS","../../math/snap/SnapCeil":"M09I"}],"qjwk":[function(require,module,exports) {
var o=function(o,e){e?o.setCollision(!0,!0,!0,!0,!1):o.resetCollision(!1)};module.exports=o;
},{}],"Psgo":[function(require,module,exports) {
var e=require("./GetTilesWithin"),i=require("./CalculateFacesWithin"),l=require("./SetTileCollision"),n=function(n,r,t,o,u,a,d){for(var s=-1!==d.collideIndexes.indexOf(n),c=e(r,t,o,u,null,d),x=0;x<c.length;x++)c[x].index=n,l(c[x],s);a&&i(r-1,t-1,o+2,u+2,d)};module.exports=n;
},{"./GetTilesWithin":"lHB6","./CalculateFacesWithin":"bLEW","./SetTileCollision":"qjwk"}],"ES87":[function(require,module,exports) {
var e=require("./GetTilesWithin"),r=function(r,i,t,n,u,l,o,f){return e(t,n,u,l,o,f).filter(r,i)};module.exports=r;
},{"./GetTilesWithin":"lHB6"}],"hvTq":[function(require,module,exports) {
var i=function(i,r,e,t){void 0===r&&(r=0),void 0===e&&(e=!1);var f,d,o,n=0;if(e){for(d=t.height-1;d>=0;d--)for(f=t.width-1;f>=0;f--)if((o=t.data[d][f])&&o.index===i){if(n===r)return o;n+=1}}else for(d=0;d<t.height;d++)for(f=0;f<t.width;f++)if((o=t.data[d][f])&&o.index===i){if(n===r)return o;n+=1}return null};module.exports=i;
},{}],"nxPX":[function(require,module,exports) {
var e=require("./GetTilesWithin"),i=function(i,n,r,t,u,l,o,d){return e(r,t,u,l,o,d).find(i,n)||null};module.exports=i;
},{"./GetTilesWithin":"lHB6"}],"rOCh":[function(require,module,exports) {
var e=require("./GetTilesWithin"),i=function(i,r,o,t,n,u,a,c){e(o,t,n,u,a,c).forEach(i,r)};module.exports=i;
},{"./GetTilesWithin":"lHB6"}],"U7fU":[function(require,module,exports) {
var a=function(a,e,r,o){void 0===e&&(e=!0);var l=o.baseTileWidth,c=o.tilemapLayer;return c&&(void 0===r&&(r=c.scene.cameras.main),a-=c.x+r.scrollX*(1-c.scrollFactorX),l*=c.scaleX),e?Math.floor(a/l):a/l};module.exports=a;
},{}],"NMOn":[function(require,module,exports) {
var e=function(e,a,r,o){void 0===a&&(a=!0);var l=o.baseTileHeight,c=o.tilemapLayer;return c&&(void 0===r&&(r=c.scene.cameras.main),e-=c.y+r.scrollY*(1-c.scrollFactorY),l*=c.scaleY),a?Math.floor(e/l):e/l};module.exports=e;
},{}],"aVDq":[function(require,module,exports) {
var e=require("./GetTileAt"),r=require("./WorldToTileX"),i=require("./WorldToTileY"),o=function(o,l,u,t,T){var d=r(o,!0,t,T),n=i(l,!0,t,T);return e(d,n,u,T)};module.exports=o;
},{"./GetTileAt":"yQ4L","./WorldToTileX":"U7fU","./WorldToTileY":"NMOn"}],"PoFc":[function(require,module,exports) {
var e=require("../../geom/"),r=require("./GetTilesWithin"),i=require("../../geom/intersects/"),t=require("../../utils/NOOP"),l=require("./TileToWorldX"),a=require("./TileToWorldY"),n=require("./WorldToTileX"),o=require("./WorldToTileY"),c=function(e,r){return i.RectangleToTriangle(r,e)},u=function(u,T,g,s){if(void 0===u)return[];var h=t;u instanceof e.Circle?h=i.CircleToRectangle:u instanceof e.Rectangle?h=i.RectangleToRectangle:u instanceof e.Triangle?h=c:u instanceof e.Line&&(h=i.LineToRectangle);var f=n(u.left,!0,g,s),m=o(u.top,!0,g,s),q=Math.ceil(n(u.right,!1,g,s)),d=Math.ceil(o(u.bottom,!1,g,s)),R=Math.max(q-f,1),p=Math.max(d-m,1),v=r(f,m,R,p,T,s),W=s.tileWidth,x=s.tileHeight;s.tilemapLayer&&(W*=s.tilemapLayer.scaleX,x*=s.tilemapLayer.scaleY);for(var y=[],L=new e.Rectangle(0,0,W,x),M=0;M<v.length;M++){var X=v[M];L.x=l(X.x,g,s),L.y=a(X.y,g,s),h(u,L)&&y.push(X)}return y};module.exports=u;
},{"../../geom/":"mWxN","./GetTilesWithin":"lHB6","../../geom/intersects/":"ubjC","../../utils/NOOP":"vnTW","./TileToWorldX":"lOY6","./TileToWorldY":"uwgp","./WorldToTileX":"U7fU","./WorldToTileY":"NMOn"}],"xhPW":[function(require,module,exports) {
var e=require("./GetTilesWithin"),r=require("./WorldToTileX"),i=require("./WorldToTileY"),l=function(l,o,t,u,T,a,n){var c=r(l,!0,a,n),d=i(o,!0,a,n),h=Math.ceil(r(l+t,!1,a,n)),q=Math.ceil(i(o+u,!1,a,n));return e(c,d,h-c,q-d,T,n)};module.exports=l;
},{"./GetTilesWithin":"lHB6","./WorldToTileX":"U7fU","./WorldToTileY":"NMOn"}],"A2Zw":[function(require,module,exports) {
var r=require("./IsInLayerBounds"),e=function(e,n,u){if(r(e,n,u)){var a=u.data[n][e];return null!==a&&a.index>-1}return!1};module.exports=e;
},{"./IsInLayerBounds":"CT0u"}],"bKaY":[function(require,module,exports) {
var r=require("./HasTileAt"),e=require("./WorldToTileX"),i=require("./WorldToTileY"),o=function(o,l,u,T){var t=e(o,!0,u,T),a=i(l,!0,u,T);return r(t,a,T)};module.exports=o;
},{"./HasTileAt":"A2Zw","./WorldToTileX":"U7fU","./WorldToTileY":"NMOn"}],"AstB":[function(require,module,exports) {
var t=require("../utils/Class"),i=require("../gameobjects/components"),e=require("../geom/rectangle"),s=new t({Mixins:[i.Alpha,i.Flip,i.Visible],initialize:function(t,i,e,s,h,l,o,n){this.layer=t,this.index=i,this.x=e,this.y=s,this.width=h,this.height=l,this.baseWidth=void 0!==o?o:h,this.baseHeight=void 0!==n?n:l,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=null,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(t,i){return!(t<this.pixelX||i<this.pixelY||t>this.right||i>this.bottom)},copy:function(t){return this.index=t.index,this.alpha=t.alpha,this.properties=t.properties,this.visible=t.visible,this.setFlip(t.flipX,t.flipY),this.tint=t.tint,this.rotation=t.rotation,this.collideUp=t.collideUp,this.collideDown=t.collideDown,this.collideLeft=t.collideLeft,this.collideRight=t.collideRight,this.collisionCallback=t.collisionCallback,this.collisionCallbackContext=t.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(t){var i=this.tilemapLayer;return i?i.tileToWorldX(this.x,t):this.x*this.baseWidth},getRight:function(t){var i=this.tilemapLayer;return i?this.getLeft(t)+this.width*i.scaleX:this.getLeft(t)+this.width},getTop:function(t){var i=this.tilemapLayer;return i?i.tileToWorldY(this.y,t)-(this.height-this.baseHeight)*i.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(t){var i=this.tilemapLayer;return i?this.getTop(t)+this.height*i.scaleY:this.getTop(t)+this.height},getBounds:function(t,i){return void 0===i&&(i=new e),i.x=this.getLeft(),i.y=this.getTop(),i.width=this.getRight()-i.x,i.height=this.getBottom()-i.y,i},getCenterX:function(t){return(this.getLeft(t)+this.getRight(t))/2},getCenterY:function(t){return(this.getTop(t)+this.getBottom(t))/2},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},intersects:function(t,i,e,s){return!(e<=this.pixelX||s<=this.pixelY||t>=this.right||i>=this.bottom)},isInteresting:function(t,i){return t&&i?this.canCollide||this.hasInterestingFace:t?this.collides:!!i&&this.hasInterestingFace},resetCollision:function(t){(void 0===t&&(t=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,t)&&(this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y));return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(t,i,e,s,h){(void 0===i&&(i=t),void 0===e&&(e=t),void 0===s&&(s=t),void 0===h&&(h=!0),this.collideLeft=t,this.collideRight=i,this.collideUp=e,this.collideDown=s,this.faceLeft=t,this.faceRight=i,this.faceTop=e,this.faceBottom=s,h)&&(this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y));return this},setCollisionCallback:function(t,i){return null===t?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=t,this.collisionCallbackContext=i),this},setSize:function(t,i,e,s){return void 0!==t&&(this.width=t),void 0!==i&&(this.height=i),void 0!==e&&(this.baseWidth=e),void 0!==s&&(this.baseHeight=s),this.updatePixelXY(),this},updatePixelXY:function(){return this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight,this},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var t=this.layer.tilemapLayer;if(t){var i=t.gidMap[this.index];if(i)return i}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var t=this.tilemapLayer;return t?t.tilemap:null}}});module.exports=s;
},{"../utils/Class":"Q4x4","../gameobjects/components":"PnJA","../geom/rectangle":"Exb3"}],"mmJW":[function(require,module,exports) {
var e=require("../Tile"),i=require("./IsInLayerBounds"),a=require("./CalculateFacesAt"),l=require("./SetTileCollision"),t=function(t,d,n,r,u){if(!i(d,n,u))return null;void 0===r&&(r=!0);var o=u.data[n][d],s=o&&o.collides;if(t instanceof e)null===u.data[n][d]&&(u.data[n][d]=new e(u,t.index,d,n,t.width,t.height)),u.data[n][d].copy(t);else{var c=t;null===u.data[n][d]?u.data[n][d]=new e(u,c,d,n,u.tileWidth,u.tileHeight):u.data[n][d].index=c}var x=u.data[n][d],f=-1!==u.collideIndexes.indexOf(x.index);return l(x,f),r&&s!==x.collides&&a(d,n,u),x};module.exports=t;
},{"../Tile":"AstB","./IsInLayerBounds":"CT0u","./CalculateFacesAt":"ZfEg","./SetTileCollision":"qjwk"}],"u3jZ":[function(require,module,exports) {
var r=require("./PutTileAt"),e=require("./WorldToTileX"),i=require("./WorldToTileY"),o=function(o,u,l,t,T,d){var n=e(u,!0,T,d),q=i(l,!0,T,d);return r(o,n,q,t,d)};module.exports=o;
},{"./PutTileAt":"mmJW","./WorldToTileX":"U7fU","./WorldToTileY":"NMOn"}],"WFBz":[function(require,module,exports) {
var r=require("./CalculateFacesWithin"),e=require("./PutTileAt"),a=function(a,i,t,l,u){if(!Array.isArray(a))return null;void 0===l&&(l=!0),Array.isArray(a[0])||(a=[a]);for(var n=a.length,o=a[0].length,v=0;v<n;v++)for(var A=0;A<o;A++){var f=a[v][A];e(f,i+A,t+v,!1,u)}l&&r(i-1,t-1,o+2,n+2,u)};module.exports=a;
},{"./CalculateFacesWithin":"bLEW","./PutTileAt":"mmJW"}],"tG9D":[function(require,module,exports) {
var e=require("./GetTilesWithin"),i=require("../../utils/array/GetRandom"),n=function(n,r,t,d,l,o){var u,a=e(n,r,t,d,null,o);if(void 0===l)for(l=[],u=0;u<a.length;u++)-1===l.indexOf(a[u].index)&&l.push(a[u].index);for(u=0;u<a.length;u++)a[u].index=i(l)};module.exports=n;
},{"./GetTilesWithin":"lHB6","../../utils/array/GetRandom":"kyCN"}],"aXnM":[function(require,module,exports) {
var e=require("../Tile"),r=require("./IsInLayerBounds"),l=require("./CalculateFacesAt"),u=function(u,i,a,n,t){if(void 0===a&&(a=!1),void 0===n&&(n=!0),!r(u,i,t))return null;var d=t.data[i][u];return d?(t.data[i][u]=a?null:new e(t,-1,u,i,d.width,d.height),n&&d&&d.collides&&l(u,i,t),d):null};module.exports=u;
},{"../Tile":"AstB","./IsInLayerBounds":"CT0u","./CalculateFacesAt":"ZfEg"}],"U06o":[function(require,module,exports) {
var e=require("./RemoveTileAt"),r=require("./WorldToTileX"),o=require("./WorldToTileY"),i=function(i,l,u,T,t,d){var n=r(i,!0,t,d),q=o(l,!0,t,d);return e(n,q,u,T,d)};module.exports=i;
},{"./RemoveTileAt":"aXnM","./WorldToTileX":"U7fU","./WorldToTileY":"NMOn"}],"uYiG":[function(require,module,exports) {
var e=require("./GetTilesWithin"),l=require("../../display/color"),i=new l(105,210,231,150),a=new l(243,134,48,200),o=new l(40,39,37,150),t=function(l,t,n){void 0===t&&(t={});var r=void 0!==t.tileColor?t.tileColor:i,c=void 0!==t.collidingTileColor?t.collidingTileColor:a,d=void 0!==t.faceColor?t.faceColor:o,f=e(0,0,n.width,n.height,null,n);l.translateCanvas(n.tilemapLayer.x,n.tilemapLayer.y),l.scaleCanvas(n.tilemapLayer.scaleX,n.tilemapLayer.scaleY);for(var h=0;h<f.length;h++){var p=f[h],s=p.width,v=p.height,w=p.pixelX,y=p.pixelY,C=p.collides?c:r;null!==C&&(l.fillStyle(C.color,C.alpha/255),l.fillRect(w,y,s,v)),w+=1,y+=1,s-=2,v-=2,null!==d&&(l.lineStyle(1,d.color,d.alpha/255),p.faceTop&&l.lineBetween(w,y,w+s,y),p.faceRight&&l.lineBetween(w+s,y,w+s,y+v),p.faceBottom&&l.lineBetween(w,y+v,w+s,y+v),p.faceLeft&&l.lineBetween(w,y,w,y+v))}};module.exports=t;
},{"./GetTilesWithin":"lHB6","../../display/color":"oO41"}],"rIqa":[function(require,module,exports) {
var e=function(e,d,l){var i=l.collideIndexes.indexOf(e);d&&-1===i?l.collideIndexes.push(e):d||-1===i||l.collideIndexes.splice(i,1)};module.exports=e;
},{}],"N88e":[function(require,module,exports) {
var i=require("./SetTileCollision"),e=require("./CalculateFacesWithin"),r=require("./SetLayerCollisionIndex"),a=function(a,o,t,d,l){void 0===o&&(o=!0),void 0===t&&(t=!0),Array.isArray(a)||(a=[a]),void 0===l&&(l=!0);for(var n=0;n<a.length;n++)r(a[n],o,d);if(l)for(var h=0;h<d.height;h++)for(var v=0;v<d.width;v++){var f=d.data[h][v];f&&-1!==a.indexOf(f.index)&&i(f,o)}t&&e(0,0,d.width,d.height,d)};module.exports=a;
},{"./SetTileCollision":"qjwk","./CalculateFacesWithin":"bLEW","./SetLayerCollisionIndex":"rIqa"}],"EIcE":[function(require,module,exports) {
var i=require("./SetTileCollision"),e=require("./CalculateFacesWithin"),r=require("./SetLayerCollisionIndex"),o=function(o,a,t,d,l,n){if(void 0===t&&(t=!0),void 0===d&&(d=!0),void 0===n&&(n=!0),!(o>a)){for(var v=o;v<=a;v++)r(v,t,l);if(n)for(var h=0;h<l.height;h++)for(var f=0;f<l.width;f++){var u=l.data[h][f];u&&u.index>=o&&u.index<=a&&i(u,t)}d&&e(0,0,l.width,l.height,l)}};module.exports=o;
},{"./SetTileCollision":"qjwk","./CalculateFacesWithin":"bLEW","./SetLayerCollisionIndex":"rIqa"}],"btWy":[function(require,module,exports) {
var i=require("./SetTileCollision"),e=require("./CalculateFacesWithin"),r=require("./SetLayerCollisionIndex"),a=function(a,o,t,d){void 0===o&&(o=!0),void 0===t&&(t=!0),Array.isArray(a)||(a=[a]);for(var n=0;n<d.height;n++)for(var l=0;l<d.width;l++){var h=d.data[n][l];h&&-1===a.indexOf(h.index)&&(i(h,o),r(h.index,o,d))}t&&e(0,0,d.width,d.height,d)};module.exports=a;
},{"./SetTileCollision":"qjwk","./CalculateFacesWithin":"bLEW","./SetLayerCollisionIndex":"rIqa"}],"r5ON":[function(require,module,exports) {
var r=require("./SetTileCollision"),i=require("./CalculateFacesWithin"),e=require("../../utils/object/HasValue"),a=function(a,t,o,l){void 0===t&&(t=!0),void 0===o&&(o=!0);for(var v=0;v<l.height;v++)for(var h=0;h<l.width;h++){var s=l.data[v][h];if(s)for(var u in a)if(e(s.properties,u)){var f=a[u];Array.isArray(f)||(f=[f]);for(var d=0;d<f.length;d++)s.properties[u]===f[d]&&r(s,t)}}o&&i(0,0,l.width,l.height,l)};module.exports=a;
},{"./SetTileCollision":"qjwk","./CalculateFacesWithin":"bLEW","../../utils/object/HasValue":"qdzY"}],"nAu5":[function(require,module,exports) {
var i=require("./SetTileCollision"),e=require("./CalculateFacesWithin"),o=function(o,t,r){void 0===o&&(o=!0),void 0===t&&(t=!0);for(var a=0;a<r.height;a++)for(var l=0;l<r.width;l++){var h=r.data[a][l];if(h){var v=h.getCollisionGroup();v&&v.objects&&v.objects.length>0&&i(h,o)}}t&&e(0,0,r.width,r.height,r)};module.exports=o;
},{"./SetTileCollision":"qjwk","./CalculateFacesWithin":"bLEW"}],"NHLf":[function(require,module,exports) {
var l=function(l,a,c,e){if("number"==typeof l)e.callbacks[l]=null!==a?{callback:a,callbackContext:c}:void 0;else for(var o=0,n=l.length;o<n;o++)e.callbacks[l[o]]=null!==a?{callback:a,callbackContext:c}:void 0};module.exports=l;
},{}],"d6AN":[function(require,module,exports) {
var l=require("./GetTilesWithin"),e=function(e,i,n,o,r,t,a){for(var s=l(e,i,n,o,null,a),u=0;u<s.length;u++)s[u].setCollisionCallback(r,t)};module.exports=e;
},{"./GetTilesWithin":"lHB6"}],"vG54":[function(require,module,exports) {
var e=require("./GetTilesWithin"),r=require("../../utils/array/Shuffle"),i=function(i,n,u,t,l){var a=e(i,n,u,t,null,l),f=a.map(function(e){return e.index});r(f);for(var o=0;o<a.length;o++)a[o].index=f[o]};module.exports=i;
},{"./GetTilesWithin":"lHB6","../../utils/array/Shuffle":"NCMc"}],"H4Gd":[function(require,module,exports) {
var e=require("./GetTilesWithin"),i=function(i,n,r,d,l,t,x){for(var o=e(r,d,l,t,null,x),u=0;u<o.length;u++)o[u]&&(o[u].index===i?o[u].index=n:o[u].index===n&&(o[u].index=i))};module.exports=i;
},{"./GetTilesWithin":"lHB6"}],"xp0i":[function(require,module,exports) {
var e=require("./TileToWorldX"),r=require("./TileToWorldY"),o=require("../../math/Vector2"),i=function(i,u,l,t,d){return void 0===l&&(l=new o(0,0)),l.x=e(i,t,d),l.y=r(u,t,d),l};module.exports=i;
},{"./TileToWorldX":"lOY6","./TileToWorldY":"uwgp","../../math/Vector2":"xARF"}],"E5pn":[function(require,module,exports) {
var r=require("./GetTilesWithin"),e=function(e,i,t,a,n,o){if(void 0!==n){var h,l=r(e,i,t,a,null,o),f=0;for(h=0;h<n.length;h++)f+=n[h].weight;if(!(f<=0))for(h=0;h<l.length;h++){for(var d=Math.random()*f,g=0,v=-1,u=0;u<n.length;u++)if(d<=(g+=n[u].weight)){var m=n[u].index;v=Array.isArray(m)?m[Math.floor(Math.random()*m.length)]:m;break}l[h].index=v}}};module.exports=e;
},{"./GetTilesWithin":"lHB6"}],"ydgE":[function(require,module,exports) {
var e=require("./WorldToTileX"),r=require("./WorldToTileY"),o=require("../../math/Vector2"),i=function(i,u,l,t,d,n){return void 0===t&&(t=new o(0,0)),t.x=e(i,l,d,n),t.y=r(u,l,d,n),t};module.exports=i;
},{"./WorldToTileX":"U7fU","./WorldToTileY":"NMOn","../../math/Vector2":"xARF"}],"vJ62":[function(require,module,exports) {
module.exports={CalculateFacesAt:require("./CalculateFacesAt"),CalculateFacesWithin:require("./CalculateFacesWithin"),Copy:require("./Copy"),CreateFromTiles:require("./CreateFromTiles"),CullTiles:require("./CullTiles"),Fill:require("./Fill"),FilterTiles:require("./FilterTiles"),FindByIndex:require("./FindByIndex"),FindTile:require("./FindTile"),ForEachTile:require("./ForEachTile"),GetTileAt:require("./GetTileAt"),GetTileAtWorldXY:require("./GetTileAtWorldXY"),GetTilesWithin:require("./GetTilesWithin"),GetTilesWithinShape:require("./GetTilesWithinShape"),GetTilesWithinWorldXY:require("./GetTilesWithinWorldXY"),HasTileAt:require("./HasTileAt"),HasTileAtWorldXY:require("./HasTileAtWorldXY"),IsInLayerBounds:require("./IsInLayerBounds"),PutTileAt:require("./PutTileAt"),PutTileAtWorldXY:require("./PutTileAtWorldXY"),PutTilesAt:require("./PutTilesAt"),Randomize:require("./Randomize"),RemoveTileAt:require("./RemoveTileAt"),RemoveTileAtWorldXY:require("./RemoveTileAtWorldXY"),RenderDebug:require("./RenderDebug"),ReplaceByIndex:require("./ReplaceByIndex"),SetCollision:require("./SetCollision"),SetCollisionBetween:require("./SetCollisionBetween"),SetCollisionByExclusion:require("./SetCollisionByExclusion"),SetCollisionByProperty:require("./SetCollisionByProperty"),SetCollisionFromCollisionGroup:require("./SetCollisionFromCollisionGroup"),SetTileIndexCallback:require("./SetTileIndexCallback"),SetTileLocationCallback:require("./SetTileLocationCallback"),Shuffle:require("./Shuffle"),SwapByIndex:require("./SwapByIndex"),TileToWorldX:require("./TileToWorldX"),TileToWorldXY:require("./TileToWorldXY"),TileToWorldY:require("./TileToWorldY"),WeightedRandomize:require("./WeightedRandomize"),WorldToTileX:require("./WorldToTileX"),WorldToTileXY:require("./WorldToTileXY"),WorldToTileY:require("./WorldToTileY")};
},{"./CalculateFacesAt":"ZfEg","./CalculateFacesWithin":"bLEW","./Copy":"QIXy","./CreateFromTiles":"fGCB","./CullTiles":"KfbT","./Fill":"Psgo","./FilterTiles":"ES87","./FindByIndex":"hvTq","./FindTile":"nxPX","./ForEachTile":"rOCh","./GetTileAt":"yQ4L","./GetTileAtWorldXY":"aVDq","./GetTilesWithin":"lHB6","./GetTilesWithinShape":"PoFc","./GetTilesWithinWorldXY":"xhPW","./HasTileAt":"A2Zw","./HasTileAtWorldXY":"bKaY","./IsInLayerBounds":"CT0u","./PutTileAt":"mmJW","./PutTileAtWorldXY":"u3jZ","./PutTilesAt":"WFBz","./Randomize":"tG9D","./RemoveTileAt":"aXnM","./RemoveTileAtWorldXY":"U06o","./RenderDebug":"uYiG","./ReplaceByIndex":"hErb","./SetCollision":"N88e","./SetCollisionBetween":"EIcE","./SetCollisionByExclusion":"btWy","./SetCollisionByProperty":"r5ON","./SetCollisionFromCollisionGroup":"nAu5","./SetTileIndexCallback":"NHLf","./SetTileLocationCallback":"d6AN","./Shuffle":"vG54","./SwapByIndex":"H4Gd","./TileToWorldX":"lOY6","./TileToWorldXY":"xp0i","./TileToWorldY":"uwgp","./WeightedRandomize":"E5pn","./WorldToTileX":"U7fU","./WorldToTileXY":"ydgE","./WorldToTileY":"NMOn"}],"bIuv":[function(require,module,exports) {
var i=require("../../utils/Class"),e=require("../../utils/object/GetFastValue"),t=new i({initialize:function(i){void 0===i&&(i={}),this.name=e(i,"name","layer"),this.x=e(i,"x",0),this.y=e(i,"y",0),this.width=e(i,"width",0),this.height=e(i,"height",0),this.tileWidth=e(i,"tileWidth",0),this.tileHeight=e(i,"tileHeight",0),this.baseTileWidth=e(i,"baseTileWidth",this.tileWidth),this.baseTileHeight=e(i,"baseTileHeight",this.tileHeight),this.widthInPixels=e(i,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=e(i,"heightInPixels",this.height*this.baseTileHeight),this.alpha=e(i,"alpha",1),this.visible=e(i,"visible",!0),this.properties=e(i,"properties",[]),this.indexes=e(i,"indexes",[]),this.collideIndexes=e(i,"collideIndexes",[]),this.callbacks=e(i,"callbacks",[]),this.bodies=e(i,"bodies",[]),this.data=e(i,"data",[]),this.tilemapLayer=e(i,"tilemapLayer",null)}});module.exports=t;
},{"../../utils/Class":"Q4x4","../../utils/object/GetFastValue":"xbYy"}],"l5Y4":[function(require,module,exports) {
var i=require("../../utils/Class"),t=require("../../utils/object/GetFastValue"),e=new i({initialize:function(i){void 0===i&&(i={}),this.name=t(i,"name","map"),this.width=t(i,"width",0),this.height=t(i,"height",0),this.infinite=t(i,"infinite",!1),this.tileWidth=t(i,"tileWidth",0),this.tileHeight=t(i,"tileHeight",0),this.widthInPixels=t(i,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=t(i,"heightInPixels",this.height*this.tileHeight),this.format=t(i,"format",null),this.orientation=t(i,"orientation","orthogonal"),this.renderOrder=t(i,"renderOrder","right-down"),this.version=t(i,"version","1"),this.properties=t(i,"properties",{}),this.layers=t(i,"layers",[]),this.images=t(i,"images",[]),this.objects=t(i,"objects",{}),this.collision=t(i,"collision",{}),this.tilesets=t(i,"tilesets",[]),this.imageCollections=t(i,"imageCollections",[]),this.tiles=t(i,"tiles",[])}});module.exports=e;
},{"../../utils/Class":"Q4x4","../../utils/object/GetFastValue":"xbYy"}],"WZJH":[function(require,module,exports) {
var e=require("../Formats"),t=require("../mapdata/LayerData"),i=require("../mapdata/MapData"),a=require("../Tile"),r=function(r,h,n,l,d){for(var g=new t({tileWidth:n,tileHeight:l}),s=new i({name:r,tileWidth:n,tileHeight:l,format:e.ARRAY_2D,layers:[g]}),u=[],w=h.length,o=0,m=0;m<h.length;m++){u[m]=[];for(var p=h[m],x=0;x<p.length;x++){var I=parseInt(p[x],10);isNaN(I)||-1===I?u[m][x]=d?null:new a(g,-1,x,m,n,l):u[m][x]=new a(g,I,x,m,n,l)}0===o&&(o=p.length)}return s.width=g.width=o,s.height=g.height=w,s.widthInPixels=g.widthInPixels=o*n,s.heightInPixels=g.heightInPixels=w*l,g.data=u,s};module.exports=r;
},{"../Formats":"hRa9","../mapdata/LayerData":"bIuv","../mapdata/MapData":"l5Y4","../Tile":"AstB"}],"H8C0":[function(require,module,exports) {
var r=require("../Formats"),t=require("./Parse2DArray"),e=function(e,a,i,n,u){var o=a.trim().split("\n").map(function(r){return r.split(",")}),m=t(e,o,i,n,u);return m.format=r.CSV,m};module.exports=e;
},{"../Formats":"hRa9","./Parse2DArray":"WZJH"}],"vdF0":[function(require,module,exports) {
var r=function(r){for(var o=window.atob(r),e=o.length,t=new Array(e/4),a=0;a<e;a+=4)t[a/4]=(o.charCodeAt(a)|o.charCodeAt(a+1)<<8|o.charCodeAt(a+2)<<16|o.charCodeAt(a+3)<<24)>>>0;return t};module.exports=r;
},{}],"pDXb":[function(require,module,exports) {
var a=2147483648,o=1073741824,t=536870912,e=function(e){var i=Boolean(e&a),l=Boolean(e&o),n=Boolean(e&t);e&=~(a|o|t);var p=0,r=!1;return i&&l&&n?(p=Math.PI/2,r=!0):i&&l&&!n?(p=Math.PI,r=!1):i&&!l&&n?(p=Math.PI/2,r=!1):!i||l||n?!i&&l&&n?(p=3*Math.PI/2,r=!1):i||!l||n?i||l||!n?i||l||n||(p=0,r=!1):(p=3*Math.PI/2,r=!0):(p=Math.PI,r=!0):(p=0,r=!0),{gid:e,flippedHorizontal:i,flippedVertical:l,flippedAntiDiagonal:n,rotation:p,flipped:r}};module.exports=e;
},{}],"YOiV":[function(require,module,exports) {
var e=require("../../../utils/object/GetFastValue"),i=function(i,t,a){if(!t)return{i:0,layers:i.layers,name:"",opacity:1,visible:!0,x:0,y:0};var r=t.x+e(t,"startx",0)*i.tilewidth+e(t,"offsetx",0),s=t.y+e(t,"starty",0)*i.tileheight+e(t,"offsety",0);return{i:0,layers:t.layers,name:a.name+t.name+"/",opacity:a.opacity*t.opacity,visible:a.visible&&t.visible,x:a.x+r,y:a.y+s}};module.exports=i;
},{"../../../utils/object/GetFastValue":"xbYy"}],"dFwx":[function(require,module,exports) {
var e=require("./Base64Decode"),i=require("../../../utils/object/GetFastValue"),t=require("../../mapdata/LayerData"),a=require("./ParseGID"),r=require("../../Tile"),l=require("./CreateGroupLayer"),h=function(h,n){for(var s=i(h,"infinite",!1),o=[],p=[],d=l(h);d.i<d.layers.length||p.length>0;)if(d.i>=d.layers.length){if(p.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}d=p.pop()}else{var g=d.layers[d.i];if(d.i++,"tilelayer"===g.type)if(g.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+g.name+"'");else{if(g.encoding&&"base64"===g.encoding){if(g.chunks)for(var u=0;u<g.chunks.length;u++)g.chunks[u].data=e(g.chunks[u].data);g.data&&(g.data=e(g.data)),delete g.encoding}var f,y,w,c,v=[],m=0;if(s){var x=i(g,"startx",0)+g.x,b=i(g,"starty",0)+g.y;f=new t({name:d.name+g.name,x:d.x+i(g,"offsetx",0)+x*h.tilewidth,y:d.y+i(g,"offsety",0)+b*h.tileheight,width:g.width,height:g.height,tileWidth:h.tilewidth,tileHeight:h.tileheight,alpha:d.opacity*g.opacity,visible:d.visible&&g.visible,properties:i(g,"properties",[])});for(var k=0;k<g.height;k++){v.push([null]);for(var q=0;q<g.width;q++)v[k][q]=null}for(k=0,S=g.chunks.length;k<S;k++)for(var T=g.chunks[k],D=T.x-x,G=T.y-b,L=0,P=0,H=T.data.length;P<H;P++){var I=m+D,J=L+G;(y=a(T.data[P])).gid>0?((w=new r(f,y.gid,I,J,h.tilewidth,h.tileheight)).rotation=y.rotation,w.flipX=y.flipped,v[J][I]=w):(c=n?null:new r(f,-1,I,J,h.tilewidth,h.tileheight),v[J][I]=c),++m===T.width&&(L++,m=0)}}else{f=new t({name:d.name+g.name,x:d.x+i(g,"offsetx",0)+g.x,y:d.y+i(g,"offsety",0)+g.y,width:g.width,height:g.height,tileWidth:h.tilewidth,tileHeight:h.tileheight,alpha:d.opacity*g.opacity,visible:d.visible&&g.visible,properties:i(g,"properties",[])});for(var N=[],O=0,S=g.data.length;O<S;O++)(y=a(g.data[O])).gid>0?((w=new r(f,y.gid,m,v.length,h.tilewidth,h.tileheight)).rotation=y.rotation,w.flipX=y.flipped,N.push(w)):(c=n?null:new r(f,-1,m,v.length,h.tilewidth,h.tileheight),N.push(c)),++m===g.width&&(v.push(N),m=0,N=[])}f.data=v,o.push(f)}else if("group"===g.type){var W=l(h,g,d);p.push(d),d=W}}return o};module.exports=h;
},{"./Base64Decode":"vdF0","../../../utils/object/GetFastValue":"xbYy","../../mapdata/LayerData":"bIuv","./ParseGID":"pDXb","../../Tile":"AstB","./CreateGroupLayer":"YOiV"}],"QpcK":[function(require,module,exports) {
var e=require("../../../utils/object/GetFastValue"),r=require("./CreateGroupLayer"),a=function(a){for(var i=[],t=[],l=r(a);l.i<l.layers.length||t.length>0;)if(l.i>=l.layers.length){if(t.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}l=t.pop()}else{var s=l.layers[l.i];if(l.i++,"imagelayer"===s.type){var p=e(s,"offsetx",0)+e(s,"startx",0),o=e(s,"offsety",0)+e(s,"starty",0);i.push({name:l.name+s.name,image:s.image,x:l.x+p+s.x,y:l.y+o+s.y,alpha:l.opacity*s.opacity,visible:l.visible&&s.visible,properties:e(s,"properties",{})})}else if("group"===s.type){var y=r(a,s,l);t.push(l),l=y}}return i};module.exports=a;
},{"../../../utils/object/GetFastValue":"xbYy","./CreateGroupLayer":"YOiV"}],"dvuk":[function(require,module,exports) {
var i=require("../utils/Class"),t=new i({initialize:function(i,t,e,s,h,n,l,a){(void 0===e||e<=0)&&(e=32),(void 0===s||s<=0)&&(s=32),void 0===h&&(h=0),void 0===n&&(n=0),void 0===l&&(l={}),void 0===a&&(a={}),this.name=i,this.firstgid=t,this.tileWidth=e,this.tileHeight=s,this.tileMargin=h,this.tileSpacing=n,this.tileProperties=l,this.tileData=a,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(i){return this.containsTileIndex(i)?this.tileProperties[i-this.firstgid]:null},getTileData:function(i){return this.containsTileIndex(i)?this.tileData[i-this.firstgid]:null},getTileCollisionGroup:function(i){var t=this.getTileData(i);return t&&t.objectgroup?t.objectgroup:null},containsTileIndex:function(i){return i>=this.firstgid&&i<this.firstgid+this.total},getTileTextureCoordinates:function(i){return this.containsTileIndex(i)?this.texCoordinates[i-this.firstgid]:null},setImage:function(i){return this.image=i,this.glTexture=i.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(i,t){return void 0!==i&&(this.tileWidth=i),void 0!==t&&(this.tileHeight=t),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(i,t){return void 0!==i&&(this.tileMargin=i),void 0!==t&&(this.tileSpacing=t),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(i,t){var e=(t-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),s=(i-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);e%1==0&&s%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),e=Math.floor(e),s=Math.floor(s),this.rows=e,this.columns=s,this.total=e*s,this.texCoordinates.length=0;for(var h=this.tileMargin,n=this.tileMargin,l=0;l<this.rows;l++){for(var a=0;a<this.columns;a++)this.texCoordinates.push({x:h,y:n}),h+=this.tileWidth+this.tileSpacing;h=this.tileMargin,n+=this.tileHeight+this.tileSpacing}return this}});module.exports=t;
},{"../utils/Class":"Q4x4"}],"N3KJ":[function(require,module,exports) {
var i=require("../utils/Class"),t=new i({initialize:function(i,t,s,e,a,h,g){(void 0===s||s<=0)&&(s=32),(void 0===e||e<=0)&&(e=32),void 0===a&&(a=0),void 0===h&&(h=0),this.name=i,this.firstgid=0|t,this.imageWidth=0|s,this.imageHeight=0|e,this.imageMargin=0|a,this.imageSpacing=0|h,this.properties=g||{},this.images=[],this.total=0},containsImageIndex:function(i){return i>=this.firstgid&&i<this.firstgid+this.total},addImage:function(i,t){return this.images.push({gid:i,image:t}),this.total++,this}});module.exports=t;
},{"../utils/Class":"Q4x4"}],"KZv8":[function(require,module,exports) {
var r=require("./HasValue"),e=function(e,a){for(var u={},n=0;n<a.length;n++){var o=a[n];r(e,o)&&(u[o]=e[o])}return u};module.exports=e;
},{"./HasValue":"qdzY"}],"VN5B":[function(require,module,exports) {
var i=require("../../../utils/object/Pick"),e=require("./ParseGID"),l=function(i){return{x:i.x,y:i.y}},p=["id","name","type","rotation","properties","visible","x","y","width","height"],t=function(t,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var r=i(t,p);if(r.x+=o,r.y+=n,t.gid){var a=e(t.gid);r.gid=a.gid,r.flippedHorizontal=a.flippedHorizontal,r.flippedVertical=a.flippedVertical,r.flippedAntiDiagonal=a.flippedAntiDiagonal}else t.polyline?r.polyline=t.polyline.map(l):t.polygon?r.polygon=t.polygon.map(l):t.ellipse?r.ellipse=t.ellipse:t.text?r.text=t.text:t.point?r.point=!0:r.rectangle=!0;return r};module.exports=t;
},{"../../../utils/object/Pick":"KZv8","./ParseGID":"pDXb"}],"cAGJ":[function(require,module,exports) {
var e=require("../../Tileset"),t=require("../../ImageCollection"),i=require("./ParseObject"),r=function(r){for(var a,o=[],s=[],n=null,l=0;l<r.tilesets.length;l++){var p=r.tilesets[l];if(p.source)console.warn("Phaser can't load external tilesets. Use the Embed Tileset button and then export the map again.");else if(p.image){var g=new e(p.name,p.firstgid,p.tilewidth,p.tileheight,p.margin,p.spacing);if(r.version>1){if(Array.isArray(p.tiles)){for(var c={},u={},m=0;m<p.tiles.length;m++){var d=p.tiles[m];if(d.properties){var f={};d.properties.forEach(function(e){f[e.name]=e.value}),u[d.id]=f}if(d.objectgroup&&(c[d.id]={objectgroup:d.objectgroup},d.objectgroup.objects)){var h=d.objectgroup.objects.map(function(e){return i(e)});c[d.id].objectgroup.objects=h}d.animation&&(c.hasOwnProperty(d.id)?c[d.id].animation=d.animation:c[d.id]={animation:d.animation})}g.tileData=c,g.tileProperties=u}}else if(p.tileproperties&&(g.tileProperties=p.tileproperties),p.tiles)for(a in g.tileData=p.tiles,g.tileData){var b=g.tileData[a].objectgroup;if(b&&b.objects){var j=b.objects.map(function(e){return i(e)});g.tileData[a].objectgroup.objects=j}}g.updateTileData(p.imagewidth,p.imageheight),o.push(g)}else{var v=new t(p.name,p.firstgid,p.tilewidth,p.tileheight,p.margin,p.spacing,p.properties);for(a in p.tiles){var w=p.tiles[a].image,D=p.firstgid+parseInt(a,10);v.addImage(D,w)}s.push(v)}n&&(n.lastgid=p.firstgid-1),n=p}return{tilesets:o,imageCollections:s}};module.exports=r;
},{"../../Tileset":"dvuk","../../ImageCollection":"N3KJ","./ParseObject":"VN5B"}],"g1HG":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../../utils/object/GetFastValue"),i=new e({initialize:function(e){void 0===e&&(e={}),this.name=t(e,"name","object layer"),this.opacity=t(e,"opacity",1),this.properties=t(e,"properties",{}),this.propertyTypes=t(e,"propertytypes",{}),this.type=t(e,"type","objectgroup"),this.visible=t(e,"visible",!0),this.objects=t(e,"objects",[])}});module.exports=i;
},{"../../utils/Class":"Q4x4","../../utils/object/GetFastValue":"xbYy"}],"IaUV":[function(require,module,exports) {
var e=require("../../../utils/object/GetFastValue"),r=require("./ParseObject"),a=require("../../mapdata/ObjectLayer"),t=require("./CreateGroupLayer"),i=function(i){for(var s=[],l=[],o=t(i);o.i<o.layers.length||l.length>0;)if(o.i>=o.layers.length){if(l.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}o=l.pop()}else{var p=o.layers[o.i];if(o.i++,p.opacity*=o.opacity,p.visible=o.visible&&p.visible,"objectgroup"===p.type){p.name=o.name+p.name;for(var u=o.x+e(p,"startx",0)+e(p,"offsetx",0),n=o.y+e(p,"starty",0)+e(p,"offsety",0),y=[],c=0;c<p.objects.length;c++){var b=r(p.objects[c],u,n);y.push(b)}var f=new a(p);f.objects=y,s.push(f)}else if("group"===p.type){var v=t(i,p,o);l.push(o),o=v}}return s};module.exports=i;
},{"../../../utils/object/GetFastValue":"xbYy","./ParseObject":"VN5B","../../mapdata/ObjectLayer":"g1HG","./CreateGroupLayer":"YOiV"}],"SV8j":[function(require,module,exports) {
var i=require("../../Tileset"),e=function(e){var t,a,l=[];for(t=0;t<e.imageCollections.length;t++)for(var g=e.imageCollections[t],r=g.images,s=0;s<r.length;s++){var n=r[s];(a=new i(n.image,n.gid,g.imageWidth,g.imageHeight,0,0)).updateTileData(g.imageWidth,g.imageHeight),e.tilesets.push(a)}for(t=0;t<e.tilesets.length;t++)for(var o=(a=e.tilesets[t]).tileMargin,h=a.tileMargin,m=0,d=0,f=0,u=a.firstgid;u<a.firstgid+a.total&&(l[u]=[o,h,t],o+=a.tileWidth+a.tileSpacing,++m!==a.total)&&(++d!==a.columns||(o=a.tileMargin,h+=a.tileHeight+a.tileSpacing,d=0,++f!==a.rows));u++);return l};module.exports=e;
},{"../../Tileset":"dvuk"}],"rTO6":[function(require,module,exports) {
var e=require("../../../utils/object/Extend"),t=function(t){for(var i,r,l,s,d,n=0;n<t.layers.length;n++){i=t.layers[n],s=null;for(var o=0;o<i.data.length;o++){d=i.data[o];for(var a=0;a<d.length;a++)null===(r=d[a])||r.index<0||(l=t.tiles[r.index][2],s=t.tilesets[l],r.width=s.tileWidth,r.height=s.tileHeight,s.tileProperties&&s.tileProperties[r.index-s.firstgid]&&(r.properties=e(r.properties,s.tileProperties[r.index-s.firstgid])))}}};module.exports=t;
},{"../../../utils/object/Extend":"CtVZ"}],"Kg0n":[function(require,module,exports) {
var e=require("../../Formats"),r=require("../../mapdata/MapData"),i=require("./ParseTileLayers"),t=require("./ParseImageLayers"),s=require("./ParseTilesets"),a=require("./ParseObjectLayers"),o=require("./BuildTilesetIndex"),n=require("./AssignTileProperties"),l=function(l,h,u){if("orthogonal"!==h.orientation)return console.warn("Only orthogonal map types are supported in this version of Phaser"),null;var d=new r({width:h.width,height:h.height,name:l,tileWidth:h.tilewidth,tileHeight:h.tileheight,orientation:h.orientation,format:e.TILED_JSON,version:h.version,properties:h.properties,renderOrder:h.renderorder,infinite:h.infinite});d.layers=i(h,u),d.images=t(h);var p=s(h);return d.tilesets=p.tilesets,d.imageCollections=p.imageCollections,d.objects=a(h),d.tiles=o(d),n(d),d};module.exports=l;
},{"../../Formats":"hRa9","../../mapdata/MapData":"l5Y4","./ParseTileLayers":"dFwx","./ParseImageLayers":"QpcK","./ParseTilesets":"cAGJ","./ParseObjectLayers":"IaUV","./BuildTilesetIndex":"SV8j","./AssignTileProperties":"rTO6"}],"pmQa":[function(require,module,exports) {
var e=require("../../mapdata/LayerData"),i=require("../../Tile"),t=function(t,a){for(var l=[],r=0;r<t.layer.length;r++){for(var h=t.layer[r],n=new e({name:h.name,width:h.width,height:h.height,tileWidth:h.tilesize,tileHeight:h.tilesize,visible:1===h.visible}),s=[],d=[],u=0;u<h.data.length;u++){for(var v=0;v<h.data[u].length;v++){var g,o=h.data[u][v]-1;g=o>-1?new i(n,o,v,u,h.tilesize,h.tilesize):a?null:new i(n,-1,v,u,h.tilesize,h.tilesize),s.push(g)}d.push(s),s=[]}n.data=d,l.push(n)}return l};module.exports=t;
},{"../../mapdata/LayerData":"bIuv","../../Tile":"AstB"}],"wbJk":[function(require,module,exports) {
var e=require("../../Tileset"),r=function(r){for(var i=[],t=[],l=0;l<r.layer.length;l++){var s=r.layer[l],a=s.tilesetName;""!==a&&-1===t.indexOf(a)&&(t.push(a),i.push(new e(a,0,s.tilesize,s.tilesize,0,0)))}return i};module.exports=r;
},{"../../Tileset":"dvuk"}],"q4Jx":[function(require,module,exports) {
var e=require("../../Formats"),r=require("../../mapdata/MapData"),t=require("./ParseTileLayers"),a=require("./ParseTilesets"),i=function(i,l,s){if(0===l.layer.length)return console.warn("No layers found in the Weltmeister map: "+i),null;for(var h=0,n=0,y=0;y<l.layer.length;y++)l.layer[y].width>h&&(h=l.layer[y].width),l.layer[y].height>n&&(n=l.layer[y].height);var o=new r({width:h,height:n,name:i,tileWidth:l.layer[0].tilesize,tileHeight:l.layer[0].tilesize,format:e.WELTMEISTER});return o.layers=t(l,s),o.tilesets=a(l),o};module.exports=i;
},{"../../Formats":"hRa9","../../mapdata/MapData":"l5Y4","./ParseTileLayers":"pmQa","./ParseTilesets":"wbJk"}],"sIN0":[function(require,module,exports) {
var e=require("../Formats"),r=require("./Parse2DArray"),a=require("./ParseCSV"),i=require("./tiled/ParseJSONTiled"),s=require("./impact/ParseWeltmeister"),t=function(t,u,c,l,n,o){var d;switch(u){case e.ARRAY_2D:d=r(t,c,l,n,o);break;case e.CSV:d=a(t,c,l,n,o);break;case e.TILED_JSON:d=i(t,c,o);break;case e.WELTMEISTER:d=s(t,c,o);break;default:console.warn("Unrecognized tilemap data format: "+u),d=null}return d};module.exports=t;
},{"../Formats":"hRa9","./Parse2DArray":"WZJH","./ParseCSV":"H8C0","./tiled/ParseJSONTiled":"Kg0n","./impact/ParseWeltmeister":"q4Jx"}],"n2wt":[function(require,module,exports) {
module.exports={ParseTileLayers:require("./ParseTileLayers"),ParseTilesets:require("./ParseTilesets"),ParseWeltmeister:require("./ParseWeltmeister")};
},{"./ParseTileLayers":"pmQa","./ParseTilesets":"wbJk","./ParseWeltmeister":"q4Jx"}],"m4qO":[function(require,module,exports) {
module.exports={AssignTileProperties:require("./AssignTileProperties"),Base64Decode:require("./Base64Decode"),BuildTilesetIndex:require("./BuildTilesetIndex"),ParseGID:require("./ParseGID"),ParseImageLayers:require("./ParseImageLayers"),ParseJSONTiled:require("./ParseJSONTiled"),ParseObject:require("./ParseObject"),ParseObjectLayers:require("./ParseObjectLayers"),ParseTileLayers:require("./ParseTileLayers"),ParseTilesets:require("./ParseTilesets")};
},{"./AssignTileProperties":"rTO6","./Base64Decode":"vdF0","./BuildTilesetIndex":"SV8j","./ParseGID":"pDXb","./ParseImageLayers":"QpcK","./ParseJSONTiled":"Kg0n","./ParseObject":"VN5B","./ParseObjectLayers":"IaUV","./ParseTileLayers":"dFwx","./ParseTilesets":"cAGJ"}],"tkL6":[function(require,module,exports) {
module.exports={Parse:require("./Parse"),Parse2DArray:require("./Parse2DArray"),ParseCSV:require("./ParseCSV"),Impact:require("./impact/"),Tiled:require("./tiled/")};
},{"./Parse":"sIN0","./Parse2DArray":"WZJH","./ParseCSV":"H8C0","./impact/":"n2wt","./tiled/":"m4qO"}],"YAqq":[function(require,module,exports) {
var e=require("../../renderer/webgl/Utils"),l=function(l,i,t,a){i.cull(a);var r=i.culledTiles,h=r.length,n=a.alpha*i.alpha;if(!(0===h||n<=0))for(var p=i.gidMap,o=i.pipeline,d=e.getTintAppendFloatAlphaAndSwap,g=i.scrollFactorX,c=i.scrollFactorY,u=i.x,x=i.y,s=i.scaleX,f=i.scaleY,v=i.tileset,w=0;w<v.length;w++)for(var T=v[w],X=T.glTexture,Y=0;Y<h;Y++){var A=r[Y],F=p[A.index];if(F===T){var b=F.getTileTextureCoordinates(A.index);if(null!==b){var y=A.width,m=A.height,q=b.x,C=b.y,M=.5*A.width,S=.5*A.height,U=d(A.tint,n*A.alpha);o.batchTexture(i,X,X.width,X.height,u+(M+A.pixelX)*s,x+(S+A.pixelY)*f,A.width,A.height,s,f,A.rotation,A.flipX,A.flipY,g,c,M,S,q,C,y,m,U,U,U,U,!1,0,0,a,null,!0)}}}};module.exports=l;
},{"../../renderer/webgl/Utils":"mjFh"}],"XGEg":[function(require,module,exports) {
var a=function(a,l,t,e,r){l.cull(e);var o=l.culledTiles,i=o.length;if(0!==i){var c=a._tempMatrix1,s=a._tempMatrix2,p=a._tempMatrix3;s.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),c.copyFrom(e.matrix);var n=a.currentContext,h=l.gidMap;n.save(),r?(c.multiplyWithOffset(r,-e.scrollX*l.scrollFactorX,-e.scrollY*l.scrollFactorY),s.e=l.x,s.f=l.y,c.multiply(s,p),p.copyToContext(n)):(s.e-=e.scrollX*l.scrollFactorX,s.f-=e.scrollY*l.scrollFactorY,s.copyToContext(n));var x=e.alpha*l.alpha;(!a.antialias||l.scaleX>1||l.scaleY>1)&&(n.imageSmoothingEnabled=!1);for(var f=0;f<i;f++){var g=o[f],m=h[g.index];if(m){var d=m.image.getSourceImage(),v=m.getTileTextureCoordinates(g.index);if(v){var u=g.width/2,y=g.height/2;n.save(),n.translate(g.pixelX+u,g.pixelY+y),0!==g.rotation&&n.rotate(g.rotation),(g.flipX||g.flipY)&&n.scale(g.flipX?-1:1,g.flipY?-1:1),n.globalAlpha=x*g.alpha,n.drawImage(d,v.x,v.y,g.width,g.height,-u,-y,g.width,g.height),n.restore()}}}n.restore()}};module.exports=a;
},{}],"Hxat":[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");e=require("./DynamicTilemapLayerWebGLRenderer"),r=require("./DynamicTilemapLayerCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":"vnTW","./DynamicTilemapLayerWebGLRenderer":"YAqq","./DynamicTilemapLayerCanvasRenderer":"XGEg"}],"AijC":[function(require,module,exports) {
var i=require("../../utils/Class"),t=require("../../gameobjects/components"),e=require("./DynamicTilemapLayerRender"),l=require("../../gameobjects/GameObject"),r=require("../components"),n=new i({Extends:l,Mixins:[t.Alpha,t.BlendMode,t.ComputedSize,t.Depth,t.Flip,t.GetBounds,t.Origin,t.Pipeline,t.Transform,t.Visible,t.ScrollFactor,e],initialize:function(i,t,e,n,s,o){l.call(this,i,"DynamicTilemapLayer"),this.isTilemap=!0,this.tilemap=t,this.layerIndex=e,this.layer=t.layers[e],this.layer.tilemapLayer=this,this.tileset=[],this.culledTiles=[],this.skipCull=!1,this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=r.CullTiles,this._renderOrder=0,this.gidMap=[],this.setTilesets(n),this.setAlpha(this.layer.alpha),this.setPosition(s,o),this.setOrigin(),this.setSize(t.tileWidth*this.layer.width,t.tileHeight*this.layer.height),this.initPipeline("TextureTintPipeline")},setTilesets:function(i){var t=[],e=[],l=this.tilemap;Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++){var n=i[r];if("string"==typeof n&&(n=l.getTileset(n)),n){e.push(n);for(var s=n.firstgid,o=0;o<n.total;o++)t[s+o]=n}}this.gidMap=t,this.tileset=e},setRenderOrder:function(i){return"string"==typeof i&&(i=["right-down","left-down","right-up","left-up"].indexOf(i)),i>=0&&i<4&&(this._renderOrder=i),this},calculateFacesAt:function(i,t){return r.CalculateFacesAt(i,t,this.layer),this},calculateFacesWithin:function(i,t,e,l){return r.CalculateFacesWithin(i,t,e,l,this.layer),this},createFromTiles:function(i,t,e,l,n){return r.CreateFromTiles(i,t,e,l,n,this.layer)},cull:function(i){return this.cullCallback(this.layer,i,this.culledTiles,this._renderOrder)},copy:function(i,t,e,l,n,s,o){return r.Copy(i,t,e,l,n,s,o,this.layer),this},destroy:function(i){void 0===i&&(i=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),i&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],l.prototype.destroy.call(this))},fill:function(i,t,e,l,n,s){return r.Fill(i,t,e,l,n,s,this.layer),this},filterTiles:function(i,t,e,l,n,s,o){return r.FilterTiles(i,t,e,l,n,s,o,this.layer)},findByIndex:function(i,t,e){return r.FindByIndex(i,t,e,this.layer)},findTile:function(i,t,e,l,n,s,o){return r.FindTile(i,t,e,l,n,s,o,this.layer)},forEachTile:function(i,t,e,l,n,s,o){return r.ForEachTile(i,t,e,l,n,s,o,this.layer),this},getTileAt:function(i,t,e){return r.GetTileAt(i,t,e,this.layer)},getTileAtWorldXY:function(i,t,e,l){return r.GetTileAtWorldXY(i,t,e,l,this.layer)},getTilesWithin:function(i,t,e,l,n){return r.GetTilesWithin(i,t,e,l,n,this.layer)},getTilesWithinShape:function(i,t,e){return r.GetTilesWithinShape(i,t,e,this.layer)},getTilesWithinWorldXY:function(i,t,e,l,n,s){return r.GetTilesWithinWorldXY(i,t,e,l,n,s,this.layer)},hasTileAt:function(i,t){return r.HasTileAt(i,t,this.layer)},hasTileAtWorldXY:function(i,t,e){return r.HasTileAtWorldXY(i,t,e,this.layer)},putTileAt:function(i,t,e,l){return r.PutTileAt(i,t,e,l,this.layer)},putTileAtWorldXY:function(i,t,e,l,n){return r.PutTileAtWorldXY(i,t,e,l,n,this.layer)},putTilesAt:function(i,t,e,l){return r.PutTilesAt(i,t,e,l,this.layer),this},randomize:function(i,t,e,l,n){return r.Randomize(i,t,e,l,n,this.layer),this},removeTileAt:function(i,t,e,l){return r.RemoveTileAt(i,t,e,l,this.layer)},removeTileAtWorldXY:function(i,t,e,l,n){return r.RemoveTileAtWorldXY(i,t,e,l,n,this.layer)},renderDebug:function(i,t){return r.RenderDebug(i,t,this.layer),this},replaceByIndex:function(i,t,e,l,n,s){return r.ReplaceByIndex(i,t,e,l,n,s,this.layer),this},setSkipCull:function(i){return void 0===i&&(i=!0),this.skipCull=i,this},setCullPadding:function(i,t){return void 0===i&&(i=1),void 0===t&&(t=1),this.cullPaddingX=i,this.cullPaddingY=t,this},setCollision:function(i,t,e,l){return r.SetCollision(i,t,e,this.layer,l),this},setCollisionBetween:function(i,t,e,l){return r.SetCollisionBetween(i,t,e,l,this.layer),this},setCollisionByProperty:function(i,t,e){return r.SetCollisionByProperty(i,t,e,this.layer),this},setCollisionByExclusion:function(i,t,e){return r.SetCollisionByExclusion(i,t,e,this.layer),this},setCollisionFromCollisionGroup:function(i,t){return r.SetCollisionFromCollisionGroup(i,t,this.layer),this},setTileIndexCallback:function(i,t,e){return r.SetTileIndexCallback(i,t,e,this.layer),this},setTileLocationCallback:function(i,t,e,l,n,s){return r.SetTileLocationCallback(i,t,e,l,n,s,this.layer),this},shuffle:function(i,t,e,l){return r.Shuffle(i,t,e,l,this.layer),this},swapByIndex:function(i,t,e,l,n,s){return r.SwapByIndex(i,t,e,l,n,s,this.layer),this},tileToWorldX:function(i,t){return r.TileToWorldX(i,t,this.layer)},tileToWorldY:function(i,t){return r.TileToWorldY(i,t,this.layer)},tileToWorldXY:function(i,t,e,l){return r.TileToWorldXY(i,t,e,l,this.layer)},weightedRandomize:function(i,t,e,l,n){return r.WeightedRandomize(i,t,e,l,n,this.layer),this},worldToTileX:function(i,t,e){return r.WorldToTileX(i,t,e,this.layer)},worldToTileY:function(i,t,e){return r.WorldToTileY(i,t,e,this.layer)},worldToTileXY:function(i,t,e,l,n){return r.WorldToTileXY(i,t,e,l,n,this.layer)}});module.exports=n;
},{"../../utils/Class":"Q4x4","../../gameobjects/components":"PnJA","./DynamicTilemapLayerRender":"Hxat","../../gameobjects/GameObject":"YzbT","../components":"vJ62"}],"RBSQ":[function(require,module,exports) {
var e=function(e,r,t,l){var o=r.tileset,i=r.pipeline,n=i.vertexBuffer;e.setPipeline(i),i.modelIdentity(),i.modelTranslate(r.x-l.scrollX*r.scrollFactorX,r.y-l.scrollY*r.scrollFactorY,0),i.modelScale(r.scaleX,r.scaleY,1),i.viewLoad2D(l.matrix.matrix);for(var a=0;a<o.length;a++)r.upload(l,a),r.vertexCount[a]>0&&(e.currentPipeline&&e.currentPipeline.vertexCount>0&&e.flush(),i.vertexBuffer=r.vertexBuffer[a],e.setPipeline(i),e.setTexture2D(o[a].glTexture,0),e.gl.drawArrays(i.topology,0,r.vertexCount[a]));i.vertexBuffer=n,i.viewIdentity(),i.modelIdentity()};module.exports=e;
},{}],"FvWS":[function(require,module,exports) {
var l=function(l,a,e,t,r){a.cull(t);var o=a.culledTiles,i=o.length;if(0!==i){var c=l._tempMatrix1,s=l._tempMatrix2,p=l._tempMatrix3;s.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),c.copyFrom(t.matrix);var n=l.currentContext,x=a.gidMap;n.save(),r?(c.multiplyWithOffset(r,-t.scrollX*a.scrollFactorX,-t.scrollY*a.scrollFactorY),s.e=a.x,s.f=a.y,c.multiply(s,p),p.copyToContext(n)):(s.e-=t.scrollX*a.scrollFactorX,s.f-=t.scrollY*a.scrollFactorY,s.copyToContext(n));var f=t.alpha*a.alpha;(!l.antialias||a.scaleX>1||a.scaleY>1)&&(n.imageSmoothingEnabled=!1);for(var m=0;m<i;m++){var g=o[m],v=x[g.index];if(v){var d=v.image.getSourceImage(),h=v.getTileTextureCoordinates(g.index);if(h){var u=v.tileWidth,y=v.tileHeight,X=u/2,Y=y/2;n.save(),n.translate(g.pixelX+X,g.pixelY+Y),0!==g.rotation&&n.rotate(g.rotation),(g.flipX||g.flipY)&&n.scale(g.flipX?-1:1,g.flipY?-1:1),n.globalAlpha=f*g.alpha,n.drawImage(d,h.x,h.y,u,y,-X,-Y,u,y),n.restore()}}}n.restore()}};module.exports=l;
},{}],"u8to":[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");e=require("./StaticTilemapLayerWebGLRenderer"),r=require("./StaticTilemapLayerCanvasRenderer"),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":"vnTW","./StaticTilemapLayerWebGLRenderer":"RBSQ","./StaticTilemapLayerCanvasRenderer":"FvWS"}],"AoUz":[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../../gameobjects/components"),i=require("../../core/events"),r=require("../../gameobjects/GameObject"),l=require("./StaticTilemapLayerRender"),s=require("../components"),n=require("../../gameobjects/components/TransformMatrix"),h=require("../../renderer/webgl/Utils"),a=new e({Extends:r,Mixins:[t.Alpha,t.BlendMode,t.ComputedSize,t.Depth,t.Flip,t.GetBounds,t.Origin,t.Pipeline,t.Transform,t.Visible,t.ScrollFactor,l],initialize:function(e,t,l,h,a,o){r.call(this,e,"StaticTilemapLayer"),this.isTilemap=!0,this.tilemap=t,this.layerIndex=l,this.layer=t.layers[l],this.layer.tilemapLayer=this,this.tileset=[],this.culledTiles=[],this.skipCull=!1,this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=s.CullTiles,this.renderer=e.sys.game.renderer,this.vertexBuffer=[],this.bufferData=[],this.vertexViewF32=[],this.vertexViewU32=[],this.dirty=[],this.vertexCount=[],this._renderOrder=0,this._tempMatrix=new n,this.gidMap=[],this.setTilesets(h),this.setAlpha(this.layer.alpha),this.setPosition(a,o),this.setOrigin(),this.setSize(t.tileWidth*this.layer.width,t.tileHeight*this.layer.height),this.updateVBOData(),this.initPipeline("TextureTintPipeline"),e.sys.game.events.on(i.CONTEXT_RESTORED,function(){this.updateVBOData()},this)},setTilesets:function(e){var t=[],i=[],r=this.tilemap;Array.isArray(e)||(e=[e]);for(var l=0;l<e.length;l++){var s=e[l];if("string"==typeof s&&(s=r.getTileset(s)),s){i.push(s);for(var n=s.firstgid,h=0;h<s.total;h++)t[n+h]=s}}this.gidMap=t,this.tileset=i},updateVBOData:function(){for(var e=0;e<this.tileset.length;e++)this.dirty[e]=!0,this.vertexCount[e]=0,this.vertexBuffer[e]=null,this.bufferData[e]=null,this.vertexViewF32[e]=null,this.vertexViewU32[e]=null;return this},upload:function(e,t){var i=this.renderer,r=i.gl,l=i.pipelines.TextureTintPipeline;if(this.dirty[t]){var s,n,h,a=this.tileset[t],o=this.layer.width,u=this.layer.height,d=a.image.source[0].width,f=a.image.source[0].height,c=this.layer.data,y=this._renderOrder,T=a.firstgid,p=a.firstgid+a.total,g=this.vertexBuffer[t],x=this.bufferData[t],v=-1,C=o*u*l.vertexSize*6;if(this.vertexCount[t]=0,null===x&&(x=new ArrayBuffer(C),this.bufferData[t]=x,this.vertexViewF32[t]=new Float32Array(x),this.vertexViewU32[t]=new Uint32Array(x)),0===y)for(n=0;n<u;n++)for(h=0;h<o;h++)!(s=c[n][h])||s.index<T||s.index>p||!s.visible||(v=this.batchTile(v,s,a,d,f,e,t));else if(1===y)for(n=0;n<u;n++)for(h=o-1;h>=0;h--)!(s=c[n][h])||s.index<T||s.index>p||!s.visible||(v=this.batchTile(v,s,a,d,f,e,t));else if(2===y)for(n=u-1;n>=0;n--)for(h=0;h<o;h++)!(s=c[n][h])||s.index<T||s.index>p||!s.visible||(v=this.batchTile(v,s,a,d,f,e,t));else if(3===y)for(n=u-1;n>=0;n--)for(h=o-1;h>=0;h--)!(s=c[n][h])||s.index<T||s.index>p||!s.visible||(v=this.batchTile(v,s,a,d,f,e,t));this.dirty[t]=!1,null===g?(g=i.createVertexBuffer(x,r.STATIC_DRAW),this.vertexBuffer[t]=g):(i.setVertexBuffer(g),r.bufferSubData(r.ARRAY_BUFFER,0,x))}return this},batchTile:function(e,t,i,r,l,s,n){var a=i.getTileTextureCoordinates(t.index);if(!a)return e;var o=i.tileWidth,u=i.tileHeight,d=o/2,f=u/2,c=a.x/r,y=a.y/l,T=(a.x+o)/r,p=(a.y+u)/l,g=this._tempMatrix,x=-d,v=-f;t.flipX&&(o*=-1,x+=i.tileWidth),t.flipY&&(u*=-1,v+=i.tileHeight);var C=x+o,m=v+u;g.applyITRS(d+t.pixelX,f+t.pixelY,t.rotation,1,1);var b=h.getTintAppendFloatAlpha(16777215,s.alpha*this.alpha*t.alpha),w=g.getX(x,v),W=g.getY(x,v),A=g.getX(x,m),F=g.getY(x,m),X=g.getX(C,m),Y=g.getY(C,m),B=g.getX(C,v),S=g.getY(C,v);s.roundPixels&&(w=Math.round(w),W=Math.round(W),A=Math.round(A),F=Math.round(F),X=Math.round(X),Y=Math.round(Y),B=Math.round(B),S=Math.round(S));var M=this.vertexViewF32[n],V=this.vertexViewU32[n];return M[++e]=w,M[++e]=W,M[++e]=c,M[++e]=y,M[++e]=0,V[++e]=b,M[++e]=A,M[++e]=F,M[++e]=c,M[++e]=p,M[++e]=0,V[++e]=b,M[++e]=X,M[++e]=Y,M[++e]=T,M[++e]=p,M[++e]=0,V[++e]=b,M[++e]=w,M[++e]=W,M[++e]=c,M[++e]=y,M[++e]=0,V[++e]=b,M[++e]=X,M[++e]=Y,M[++e]=T,M[++e]=p,M[++e]=0,V[++e]=b,M[++e]=B,M[++e]=S,M[++e]=T,M[++e]=y,M[++e]=0,V[++e]=b,this.vertexCount[n]+=6,e},setRenderOrder:function(e){if("string"==typeof e&&(e=["right-down","left-down","right-up","left-up"].indexOf(e)),e>=0&&e<4){this._renderOrder=e;for(var t=0;t<this.tileset.length;t++)this.dirty[t]=!0}return this},calculateFacesAt:function(e,t){return s.CalculateFacesAt(e,t,this.layer),this},calculateFacesWithin:function(e,t,i,r){return s.CalculateFacesWithin(e,t,i,r,this.layer),this},createFromTiles:function(e,t,i,r,l){return s.CreateFromTiles(e,t,i,r,l,this.layer)},cull:function(e){return this.cullCallback(this.layer,e,this.culledTiles)},setSkipCull:function(e){return void 0===e&&(e=!0),this.skipCull=e,this},setCullPadding:function(e,t){return void 0===e&&(e=1),void 0===t&&(t=1),this.cullPaddingX=e,this.cullPaddingY=t,this},findByIndex:function(e,t,i){return s.FindByIndex(e,t,i,this.layer)},findTile:function(e,t,i,r,l,n,h){return s.FindTile(e,t,i,r,l,n,h,this.layer)},filterTiles:function(e,t,i,r,l,n,h){return s.FilterTiles(e,t,i,r,l,n,h,this.layer)},forEachTile:function(e,t,i,r,l,n,h){return s.ForEachTile(e,t,i,r,l,n,h,this.layer),this},getTileAt:function(e,t,i){return s.GetTileAt(e,t,i,this.layer)},getTileAtWorldXY:function(e,t,i,r){return s.GetTileAtWorldXY(e,t,i,r,this.layer)},getTilesWithin:function(e,t,i,r,l){return s.GetTilesWithin(e,t,i,r,l,this.layer)},getTilesWithinWorldXY:function(e,t,i,r,l,n){return s.GetTilesWithinWorldXY(e,t,i,r,l,n,this.layer)},getTilesWithinShape:function(e,t,i){return s.GetTilesWithinShape(e,t,i,this.layer)},hasTileAt:function(e,t){return s.HasTileAt(e,t,this.layer)},hasTileAtWorldXY:function(e,t,i){return s.HasTileAtWorldXY(e,t,i,this.layer)},renderDebug:function(e,t){return s.RenderDebug(e,t,this.layer),this},setCollision:function(e,t,i,r){return s.SetCollision(e,t,i,this.layer,r),this},setCollisionBetween:function(e,t,i,r){return s.SetCollisionBetween(e,t,i,r,this.layer),this},setCollisionByProperty:function(e,t,i){return s.SetCollisionByProperty(e,t,i,this.layer),this},setCollisionByExclusion:function(e,t,i){return s.SetCollisionByExclusion(e,t,i,this.layer),this},setTileIndexCallback:function(e,t,i){return s.SetTileIndexCallback(e,t,i,this.layer),this},setCollisionFromCollisionGroup:function(e,t){return s.SetCollisionFromCollisionGroup(e,t,this.layer),this},setTileLocationCallback:function(e,t,i,r,l,n){return s.SetTileLocationCallback(e,t,i,r,l,n,this.layer),this},tileToWorldX:function(e,t){return s.TileToWorldX(e,t,this.layer)},tileToWorldY:function(e,t){return s.TileToWorldY(e,t,this.layer)},tileToWorldXY:function(e,t,i,r){return s.TileToWorldXY(e,t,i,r,this.layer)},worldToTileX:function(e,t,i){return s.WorldToTileX(e,t,i,this.layer)},worldToTileY:function(e,t,i){return s.WorldToTileY(e,t,i,this.layer)},worldToTileXY:function(e,t,i,r,l){return s.WorldToTileXY(e,t,i,r,l,this.layer)},destroy:function(e){if(void 0===e&&(e=!0),this.tilemap){this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),e&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null;for(var t=0;t<this.tileset.length;t++)this.dirty[t]=!0,this.vertexCount[t]=0,this.vertexBuffer[t]=null,this.bufferData[t]=null,this.vertexViewF32[t]=null,this.vertexViewU32[t]=null;this.gidMap=[],this.tileset=[],r.prototype.destroy.call(this)}}});module.exports=a;
},{"../../utils/Class":"Q4x4","../../gameobjects/components":"PnJA","../../core/events":"ZroQ","../../gameobjects/GameObject":"YzbT","./StaticTilemapLayerRender":"u8to","../components":"vJ62","../../gameobjects/components/TransformMatrix":"hzKR","../../renderer/webgl/Utils":"mjFh"}],"TB5t":[function(require,module,exports) {
var e=require("../utils/Class"),t=require("../math/DegToRad"),i=require("./dynamiclayer/DynamicTilemapLayer"),n=require("../utils/object/Extend"),r=require("./Formats"),l=require("./mapdata/LayerData"),s=require("../math/Rotate"),a=require("../utils/array/SpliceOne"),u=require("./staticlayer/StaticTilemapLayer"),o=require("./Tile"),h=require("./components"),y=require("./Tileset"),d=new e({initialize:function(e,t){this.scene=e,this.tileWidth=t.tileWidth,this.tileHeight=t.tileHeight,this.width=t.width,this.height=t.height,this.orientation=t.orientation,this.renderOrder=t.renderOrder,this.format=t.format,this.version=t.version,this.properties=t.properties,this.widthInPixels=t.widthInPixels,this.heightInPixels=t.heightInPixels,this.imageCollections=t.imageCollections,this.images=t.images,this.layers=t.layers,this.tilesets=t.tilesets,this.objects=t.objects,this.currentLayerIndex=0},setRenderOrder:function(e){var t=["right-down","left-down","right-up","left-up"];return"number"==typeof e&&(e=t[e]),t.indexOf(e)>-1&&(this.renderOrder=e),this},addTilesetImage:function(e,t,i,n,l,s,a){if(void 0===e)return null;if(null==t&&(t=e),!this.scene.sys.textures.exists(t))return console.warn("Invalid Tileset Image: "+t),null;var u=this.scene.sys.textures.get(t),o=this.getTilesetIndex(e);if(null===o&&this.format===r.TILED_JSON)return console.warn("No data found for Tileset: "+e),null;var h=this.tilesets[o];return h?(h.setTileSize(i,n),h.setSpacing(l,s),h.setImage(u),h):(void 0===i&&(i=this.tileWidth),void 0===n&&(n=this.tileHeight),void 0===l&&(l=0),void 0===s&&(s=0),void 0===a&&(a=0),(h=new y(e,a,i,n,l,s)).setImage(u),this.tilesets.push(h),h)},convertLayerToStatic:function(e){if(null===(e=this.getLayer(e)))return null;var t=e.tilemapLayer;if(!(t&&t instanceof i))return null;var n=new u(t.scene,t.tilemap,t.layerIndex,t.tileset,t.x,t.y);return this.scene.sys.displayList.add(n),t.destroy(),n},copy:function(e,t,i,n,r,l,s,a){return a=this.getLayer(a),this._isStaticCall(a,"copy")?this:null!==a?(h.Copy(e,t,i,n,r,l,s,a),this):null},createBlankDynamicLayer:function(e,t,n,r,s,a,u,h){if(void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=this.width),void 0===a&&(a=this.height),void 0===u&&(u=this.tileWidth),void 0===h&&(h=this.tileHeight),null!==this.getLayerIndex(e))return console.warn("Invalid Tilemap Layer ID: "+e),null;for(var y,d=new l({name:e,tileWidth:u,tileHeight:h,width:s,height:a}),c=0;c<a;c++){y=[];for(var f=0;f<s;f++)y.push(new o(d,-1,f,c,u,h,this.tileWidth,this.tileHeight));d.data.push(y)}this.layers.push(d),this.currentLayerIndex=this.layers.length-1;var g=new i(this.scene,this,this.currentLayerIndex,t,n,r);return g.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(g),g},createDynamicLayer:function(e,t,n,r){var l=this.getLayerIndex(e);if(null===l)return console.warn("Invalid Tilemap Layer ID: "+e),"string"==typeof e&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;var s=this.layers[l];if(s.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+e),null;this.currentLayerIndex=l,void 0===n&&(n=s.x),void 0===r&&(r=s.y);var a=new i(this.scene,this,l,t,n,r);return a.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(a),a},createFromObjects:function(e,i,r,l){void 0===r&&(r={}),void 0===l&&(l=this.scene);var a=this.getObjectLayer(e);if(!a)return console.warn("Cannot create from object. Invalid objectgroup name given: "+e),"string"==typeof layerID&&console.warn("Valid objectgroup names:\n\t"+this.getObjectLayerNames().join(",\n\t")),null;for(var u=a.objects,o=[],h=0;h<u.length;h++){var y=!1,d=u[h];if((void 0!==d.gid&&"number"==typeof i&&d.gid===i||void 0!==d.id&&"number"==typeof i&&d.id===i||void 0!==d.name&&"string"==typeof i&&d.name===i)&&(y=!0),y){var c=n({},r,d.properties);c.x=d.x,c.y=d.y;var f=l.make.sprite(c);f.name=d.name,d.width&&(f.displayWidth=d.width),d.height&&(f.displayHeight=d.height);var g={x:f.originX*d.width,y:(f.originY-1)*d.height};if(d.rotation){var L=t(d.rotation);s(g,L),f.rotation=L}for(var m in f.x+=g.x,f.y+=g.y,void 0===d.flippedHorizontal&&void 0===d.flippedVertical||f.setFlip(d.flippedHorizontal,d.flippedVertical),d.visible||(f.visible=!1),d.properties)f.hasOwnProperty(m)||f.setData(m,d.properties[m]);o.push(f)}}return o},createFromTiles:function(e,t,i,n,r,l){return null===(l=this.getLayer(l))?null:h.CreateFromTiles(e,t,i,n,r,l)},createStaticLayer:function(e,t,i,n){var r=this.getLayerIndex(e);if(null===r)return console.warn("Invalid Tilemap Layer ID: "+e),"string"==typeof e&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;if(this.layers[r].tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+e),null;this.currentLayerIndex=r,void 0===i&&this.layers[r].x&&(i=this.layers[r].x),void 0===n&&this.layers[r].y&&(n=this.layers[r].y);var l=new u(this.scene,this,r,t,i,n);return l.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(l),l},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=void 0},fill:function(e,t,i,n,r,l,s){return null===(s=this.getLayer(s))?null:this._isStaticCall(s,"fill")?this:(h.Fill(e,t,i,n,r,l,s),this)},filterObjects:function(e,t,i){if("string"==typeof e){var n=e;if(!(e=this.getObjectLayer(e)))return console.warn("No object layer found with the name: "+n),null}return e.objects.filter(t,i)},filterTiles:function(e,t,i,n,r,l,s,a){return null===(a=this.getLayer(a))?null:h.FilterTiles(e,t,i,n,r,l,s,a)},findByIndex:function(e,t,i,n){return null===(n=this.getLayer(n))?null:h.FindByIndex(e,t,i,n)},findObject:function(e,t,i){if("string"==typeof e){var n=e;if(!(e=this.getObjectLayer(e)))return console.warn("No object layer found with the name: "+n),null}return e.objects.find(t,i)||null},findTile:function(e,t,i,n,r,l,s,a){return null===(a=this.getLayer(a))?null:h.FindTile(e,t,i,n,r,l,s,a)},forEachTile:function(e,t,i,n,r,l,s,a){return null===(a=this.getLayer(a))?null:(h.ForEachTile(e,t,i,n,r,l,s,a),this)},getImageIndex:function(e){return this.getIndex(this.images,e)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map(function(e){return e.name}):[]},getIndex:function(e,t){for(var i=0;i<e.length;i++)if(e[i].name===t)return i;return null},getLayer:function(e){var t=this.getLayerIndex(e);return null!==t?this.layers[t]:null},getObjectLayer:function(e){var t=this.getIndex(this.objects,e);return null!==t?this.objects[t]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map(function(e){return e.name}):[]},getLayerIndex:function(e){return void 0===e?this.currentLayerIndex:"string"==typeof e?this.getLayerIndexByName(e):"number"==typeof e&&e<this.layers.length?e:e instanceof u||e instanceof i?e.layerIndex:null},getLayerIndexByName:function(e){return this.getIndex(this.layers,e)},getTileAt:function(e,t,i,n){return null===(n=this.getLayer(n))?null:h.GetTileAt(e,t,i,n)},getTileAtWorldXY:function(e,t,i,n,r){return null===(r=this.getLayer(r))?null:h.GetTileAtWorldXY(e,t,i,n,r)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map(function(e){return e.name}):[]},getTilesWithin:function(e,t,i,n,r,l){return null===(l=this.getLayer(l))?null:h.GetTilesWithin(e,t,i,n,r,l)},getTilesWithinShape:function(e,t,i,n){return null===(n=this.getLayer(n))?null:h.GetTilesWithinShape(e,t,i,n)},getTilesWithinWorldXY:function(e,t,i,n,r,l,s){return null===(s=this.getLayer(s))?null:h.GetTilesWithinWorldXY(e,t,i,n,r,l,s)},getTileset:function(e){var t=this.getIndex(this.tilesets,e);return null!==t?this.tilesets[t]:null},getTilesetIndex:function(e){return this.getIndex(this.tilesets,e)},hasTileAt:function(e,t,i){return null===(i=this.getLayer(i))?null:h.HasTileAt(e,t,i)},hasTileAtWorldXY:function(e,t,i,n){return null===(n=this.getLayer(n))?null:h.HasTileAtWorldXY(e,t,i,n)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(e){this.setLayer(e)}},putTileAt:function(e,t,i,n,r){return r=this.getLayer(r),this._isStaticCall(r,"putTileAt")?null:null===r?null:h.PutTileAt(e,t,i,n,r)},putTileAtWorldXY:function(e,t,i,n,r,l){return l=this.getLayer(l),this._isStaticCall(l,"putTileAtWorldXY")?null:null===l?null:h.PutTileAtWorldXY(e,t,i,n,r,l)},putTilesAt:function(e,t,i,n,r){return r=this.getLayer(r),this._isStaticCall(r,"putTilesAt")?this:null===r?null:(h.PutTilesAt(e,t,i,n,r),this)},randomize:function(e,t,i,n,r,l){return l=this.getLayer(l),this._isStaticCall(l,"randomize")?this:null===l?null:(h.Randomize(e,t,i,n,r,l),this)},calculateFacesAt:function(e,t,i){return null===(i=this.getLayer(i))?null:(h.CalculateFacesAt(e,t,i),this)},calculateFacesWithin:function(e,t,i,n,r){return null===(r=this.getLayer(r))?null:(h.CalculateFacesWithin(e,t,i,n,r),this)},removeLayer:function(e){var t=this.getLayerIndex(e);if(null!==t){a(this.layers,t);for(var i=t;i<this.layers.length;i++)this.layers[i].tilemapLayer&&this.layers[i].tilemapLayer.layerIndex--;return this.currentLayerIndex===t&&(this.currentLayerIndex=0),this}return null},destroyLayer:function(e){var t=this.getLayerIndex(e);return null!==t?((e=this.layers[t]).destroy(),a(this.layers,t),this.currentLayerIndex===t&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var e=this.layers,t=0;t<e.length;t++)e[t].tilemapLayer&&e[t].tilemapLayer.destroy(!1);return e.length=0,this.currentLayerIndex=0,this},removeTile:function(e,t,i){void 0===t&&(t=-1),void 0===i&&(i=!0);var n=[];Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var l=e[r];n.push(this.removeTileAt(l.x,l.y,!0,i,l.tilemapLayer)),t>-1&&this.putTileAt(t,l.x,l.y,i,l.tilemapLayer)}return n},removeTileAt:function(e,t,i,n,r){return r=this.getLayer(r),this._isStaticCall(r,"removeTileAt")?null:null===r?null:h.RemoveTileAt(e,t,i,n,r)},removeTileAtWorldXY:function(e,t,i,n,r,l){return l=this.getLayer(l),this._isStaticCall(l,"removeTileAtWorldXY")?null:null===l?null:h.RemoveTileAtWorldXY(e,t,i,n,r,l)},renderDebug:function(e,t,i){return null===(i=this.getLayer(i))?null:(h.RenderDebug(e,t,i),this)},renderDebugFull:function(e,t){for(var i=this.layers,n=0;n<i.length;n++)h.RenderDebug(e,t,i[n]);return this},replaceByIndex:function(e,t,i,n,r,l,s){return s=this.getLayer(s),this._isStaticCall(s,"replaceByIndex")?this:null===s?null:(h.ReplaceByIndex(e,t,i,n,r,l,s),this)},setCollision:function(e,t,i,n,r){return null===(n=this.getLayer(n))?null:(h.SetCollision(e,t,i,n,r),this)},setCollisionBetween:function(e,t,i,n,r){return null===(r=this.getLayer(r))?null:(h.SetCollisionBetween(e,t,i,n,r),this)},setCollisionByProperty:function(e,t,i,n){return null===(n=this.getLayer(n))?null:(h.SetCollisionByProperty(e,t,i,n),this)},setCollisionByExclusion:function(e,t,i,n){return null===(n=this.getLayer(n))?null:(h.SetCollisionByExclusion(e,t,i,n),this)},setCollisionFromCollisionGroup:function(e,t,i){return null===(i=this.getLayer(i))?null:(h.SetCollisionFromCollisionGroup(e,t,i),this)},setTileIndexCallback:function(e,t,i,n){return null===(n=this.getLayer(n))?null:(h.SetTileIndexCallback(e,t,i,n),this)},setTileLocationCallback:function(e,t,i,n,r,l,s){return null===(s=this.getLayer(s))?null:(h.SetTileLocationCallback(e,t,i,n,r,l,s),this)},setLayer:function(e){var t=this.getLayerIndex(e);return null!==t&&(this.currentLayerIndex=t),this},setBaseTileSize:function(e,t){this.tileWidth=e,this.tileHeight=t,this.widthInPixels=this.width*e,this.heightInPixels=this.height*t;for(var i=0;i<this.layers.length;i++){this.layers[i].baseTileWidth=e,this.layers[i].baseTileHeight=t;for(var n=this.layers[i].data,r=this.layers[i].width,l=this.layers[i].height,s=0;s<l;s++)for(var a=0;a<r;a++){var u=n[s][a];null!==u&&u.setSize(void 0,void 0,e,t)}}return this},setLayerTileSize:function(e,t,i){if(null===(i=this.getLayer(i)))return this;i.tileWidth=e,i.tileHeight=t;for(var n=i.data,r=i.width,l=i.height,s=0;s<l;s++)for(var a=0;a<r;a++){var u=n[s][a];null!==u&&u.setSize(e,t)}return this},shuffle:function(e,t,i,n,r){return r=this.getLayer(r),this._isStaticCall(r,"shuffle")?this:null===r?null:(h.Shuffle(e,t,i,n,r),this)},swapByIndex:function(e,t,i,n,r,l,s){return s=this.getLayer(s),this._isStaticCall(s,"swapByIndex")?this:null===s?null:(h.SwapByIndex(e,t,i,n,r,l,s),this)},tileToWorldX:function(e,t,i){return null===(i=this.getLayer(i))?null:h.TileToWorldX(e,t,i)},tileToWorldY:function(e,t,i){return null===(i=this.getLayer(i))?null:h.TileToWorldY(e,t,i)},tileToWorldXY:function(e,t,i,n,r){return null===(r=this.getLayer(r))?null:h.TileToWorldXY(e,t,i,n,r)},weightedRandomize:function(e,t,i,n,r,l){return l=this.getLayer(l),this._isStaticCall(l,"weightedRandomize")?this:null===l?null:(h.WeightedRandomize(e,t,i,n,r,l),this)},worldToTileX:function(e,t,i,n){return null===(n=this.getLayer(n))?null:h.WorldToTileX(e,t,i,n)},worldToTileY:function(e,t,i,n){return null===(n=this.getLayer(n))?null:h.WorldToTileY(e,t,i,n)},worldToTileXY:function(e,t,i,n,r,l){return null===(l=this.getLayer(l))?null:h.WorldToTileXY(e,t,i,n,r,l)},_isStaticCall:function(e,t){return e.tilemapLayer instanceof u&&(console.warn(t+": You cannot change the tiles in a static tilemap layer"),!0)}});module.exports=d;
},{"../utils/Class":"Q4x4","../math/DegToRad":"FzPC","./dynamiclayer/DynamicTilemapLayer":"AijC","../utils/object/Extend":"CtVZ","./Formats":"hRa9","./mapdata/LayerData":"bIuv","../math/Rotate":"TnWp","../utils/array/SpliceOne":"kAni","./staticlayer/StaticTilemapLayer":"AoUz","./Tile":"AstB","./components":"vJ62","./Tileset":"dvuk"}],"NExT":[function(require,module,exports) {
var e=require("./Formats"),a=require("./mapdata/MapData"),r=require("./parsers/Parse"),i=require("./Tilemap"),o=function(o,t,d,l,n,u,v,m){void 0===d&&(d=32),void 0===l&&(l=32),void 0===n&&(n=10),void 0===u&&(u=10),void 0===m&&(m=!1);var p=null;if(Array.isArray(v))p=r(void 0!==t?t:"map",e.ARRAY_2D,v,d,l,m);else if(void 0!==t){var s=o.cache.tilemap.get(t);s?p=r(t,s.format,s.data,d,l,m):console.warn("No map data found for key "+t)}return null===p&&(p=new a({tileWidth:d,tileHeight:l,width:n,height:u})),new i(o,p)};module.exports=o;
},{"./Formats":"hRa9","./mapdata/MapData":"l5Y4","./parsers/Parse":"sIN0","./Tilemap":"TB5t"}],"gN2N":[function(require,module,exports) {
var e=require("../gameobjects/GameObjectCreator"),t=require("./ParseToTilemap");e.register("tilemap",function(e){var i=void 0!==e?e:{};return t(this.scene,i.key,i.tileWidth,i.tileHeight,i.width,i.height,i.data,i.insertNull)});
},{"../gameobjects/GameObjectCreator":"eYSd","./ParseToTilemap":"NExT"}],"JEuG":[function(require,module,exports) {
var e=require("../gameobjects/GameObjectFactory"),i=require("./ParseToTilemap");e.register("tilemap",function(e,l,r,n,o,u,t){return null===e&&(e=void 0),null===l&&(l=void 0),null===r&&(r=void 0),null===n&&(n=void 0),null===o&&(o=void 0),i(this.scene,e,l,r,n,o,u,t)});
},{"../gameobjects/GameObjectFactory":"BKGz","./ParseToTilemap":"NExT"}],"xEyR":[function(require,module,exports) {
module.exports={Components:require("./components"),Parsers:require("./parsers"),Formats:require("./Formats"),ImageCollection:require("./ImageCollection"),ParseToTilemap:require("./ParseToTilemap"),Tile:require("./Tile"),Tilemap:require("./Tilemap"),TilemapCreator:require("./TilemapCreator"),TilemapFactory:require("./TilemapFactory"),Tileset:require("./Tileset"),LayerData:require("./mapdata/LayerData"),MapData:require("./mapdata/MapData"),ObjectLayer:require("./mapdata/ObjectLayer"),DynamicTilemapLayer:require("./dynamiclayer/DynamicTilemapLayer"),StaticTilemapLayer:require("./staticlayer/StaticTilemapLayer")};
},{"./components":"vJ62","./parsers":"tkL6","./Formats":"hRa9","./ImageCollection":"N3KJ","./ParseToTilemap":"NExT","./Tile":"AstB","./Tilemap":"TB5t","./TilemapCreator":"gN2N","./TilemapFactory":"JEuG","./Tileset":"dvuk","./mapdata/LayerData":"bIuv","./mapdata/MapData":"l5Y4","./mapdata/ObjectLayer":"g1HG","./dynamiclayer/DynamicTilemapLayer":"AijC","./staticlayer/StaticTilemapLayer":"AoUz"}],"qtmq":[function(require,module,exports) {
var t=require("../utils/Class"),e=require("../utils/object/GetFastValue"),s=new t({initialize:function(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function(t){return this.delay=e(t,"delay",0),this.repeat=e(t,"repeat",0),this.loop=e(t,"loop",!1),this.callback=e(t,"callback",void 0),this.callbackScope=e(t,"callbackScope",this.callback),this.args=e(t,"args",[]),this.timeScale=e(t,"timeScale",1),this.startAt=e(t,"startAt",0),this.paused=e(t,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var t=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/t}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return.001*this.elapsed},remove:function(t){void 0===t&&(t=!1),this.elapsed=this.delay,this.hasDispatched=!t,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});module.exports=s;
},{"../utils/Class":"Q4x4","../utils/object/GetFastValue":"xbYy"}],"cFru":[function(require,module,exports) {
var e=require("../utils/Class"),t=require("../plugins/PluginCache"),s=require("../scene/events"),i=require("./TimerEvent"),n=new e({initialize:function(e){this.scene=e,this.systems=e.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],e.sys.events.once(s.BOOT,this.boot,this),e.sys.events.on(s.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(s.PRE_UPDATE,this.preUpdate,this),e.on(s.UPDATE,this.update,this),e.once(s.SHUTDOWN,this.shutdown,this)},addEvent:function(e){var t=new i(e);return this._pendingInsertion.push(t),t},delayedCall:function(e,t,s,i){return this.addEvent({delay:e,callback:t,args:s,callbackScope:i})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var e=this._pendingRemoval.length,t=this._pendingInsertion.length;if(0!==e||0!==t){var s,i;for(s=0;s<e;s++){i=this._pendingRemoval[s];var n=this._active.indexOf(i);n>-1&&this._active.splice(n,1),i.destroy()}for(s=0;s<t;s++)i=this._pendingInsertion[s],this._active.push(i);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(e,t){if(this.now=e,!this.paused){t*=this.timeScale;for(var s=0;s<this._active.length;s++){var i=this._active[s];if(!i.paused&&(i.elapsed+=t*i.timeScale,i.elapsed>=i.delay)){var n=i.elapsed-i.delay;i.elapsed=i.delay,!i.hasDispatched&&i.callback&&(i.hasDispatched=!0,i.callback.apply(i.callbackScope,i.args)),i.repeatCount>0?(i.repeatCount--,i.elapsed=n,i.hasDispatched=!1):this._pendingRemoval.push(i)}}}},shutdown:function(){var e;for(e=0;e<this._pendingInsertion.length;e++)this._pendingInsertion[e].destroy();for(e=0;e<this._active.length;e++)this._active[e].destroy();for(e=0;e<this._pendingRemoval.length;e++)this._pendingRemoval[e].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var t=this.systems.events;t.off(s.PRE_UPDATE,this.preUpdate,this),t.off(s.UPDATE,this.update,this),t.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});t.register("Clock",n,"time"),module.exports=n;
},{"../utils/Class":"Q4x4","../plugins/PluginCache":"vXV4","../scene/events":"Zlz3","./TimerEvent":"qtmq"}],"ZwqS":[function(require,module,exports) {
module.exports={Clock:require("./Clock"),TimerEvent:require("./TimerEvent")};
},{"./Clock":"cFru","./TimerEvent":"qtmq"}],"FjAX":[function(require,module,exports) {
var n=function(n,t,r){var o;n.hasOwnProperty(t)?o="function"===typeof n[t]?function(r,o,u,e,f,c){return n[t](r,o,u,e,f,c)}:function(){return n[t]}:o="function"==typeof r?r:function(){return r};return o};module.exports=n;
},{}],"UWox":[function(require,module,exports) {
module.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"];
},{}],"K172":[function(require,module,exports) {
var e=require("../tween/ReservedProps"),r=function(r){var s,p=[];if(r.hasOwnProperty("props"))for(s in r.props)"_"!==s.substr(0,1)&&p.push({key:s,value:r.props[s]});else for(s in r)-1===e.indexOf(s)&&"_"!==s.substr(0,1)&&p.push({key:s,value:r[s]});return p};module.exports=r;
},{"../tween/ReservedProps":"UWox"}],"IWIN":[function(require,module,exports) {
var r=require("../../utils/object/GetValue"),e=function(e){var t=r(e,"targets",null);return null===t?t:("function"==typeof t&&(t=t.call()),Array.isArray(t)||(t=[t]),t)};module.exports=e;
},{"../../utils/object/GetValue":"FWyS"}],"alGr":[function(require,module,exports) {
var e=require("../../utils/object/GetValue"),r=function(r){var l=e(r,"tweens",null);return null===l?[]:("function"==typeof l&&(l=l.call()),Array.isArray(l)||(l=[l]),l)};module.exports=r;
},{"../../utils/object/GetValue":"FWyS"}],"N3aY":[function(require,module,exports) {
function t(t){return!!t.getActive&&"function"==typeof t.getActive}function e(t){return!!t.getStart&&"function"==typeof t.getStart}function n(t){return!!t.getEnd&&"function"==typeof t.getEnd}function r(r){return e(r)||n(r)||t(r)}var u=function(o,f){var i,a=function(t,e,n){return n},c=function(t,e,n){return n},s=null,g=typeof f;if("number"===g)a=function(){return f};else if("string"===g){var l=f[0],v=parseFloat(f.substr(2));switch(l){case"+":a=function(t,e,n){return n+v};break;case"-":a=function(t,e,n){return n-v};break;case"*":a=function(t,e,n){return n*v};break;case"/":a=function(t,e,n){return n/v};break;default:a=function(){return parseFloat(f)}}}else if("function"===g)a=f;else if("object"===g)if(r(f))t(f)&&(s=f.getActive),n(f)&&(a=f.getEnd),e(f)&&(c=f.getStart);else if(f.hasOwnProperty("value"))i=u(o,f.value);else{var p=f.hasOwnProperty("to"),d=f.hasOwnProperty("from"),y=f.hasOwnProperty("start");if(p&&(d||y)){if(i=u(o,f.to),y){var b=u(o,f.start);i.getActive=b.getEnd}if(d){var E=u(o,f.from);i.getStart=E.getEnd}}}return i||(i={getActive:s,getEnd:a,getStart:c}),i};module.exports=u;
},{}],"XlC7":[function(require,module,exports) {
var e={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};module.exports=e;
},{}],"ZBiR":[function(require,module,exports) {
module.exports="active";
},{}],"sW9Y":[function(require,module,exports) {
module.exports="yoyo";
},{}],"HkkW":[function(require,module,exports) {
module.exports={TIMELINE_COMPLETE:require("./TIMELINE_COMPLETE_EVENT"),TIMELINE_LOOP:require("./TIMELINE_LOOP_EVENT"),TIMELINE_PAUSE:require("./TIMELINE_PAUSE_EVENT"),TIMELINE_RESUME:require("./TIMELINE_RESUME_EVENT"),TIMELINE_START:require("./TIMELINE_START_EVENT"),TIMELINE_UPDATE:require("./TIMELINE_UPDATE_EVENT"),TWEEN_ACTIVE:require("./TWEEN_ACTIVE_EVENT"),TWEEN_COMPLETE:require("./TWEEN_COMPLETE_EVENT"),TWEEN_LOOP:require("./TWEEN_LOOP_EVENT"),TWEEN_REPEAT:require("./TWEEN_REPEAT_EVENT"),TWEEN_START:require("./TWEEN_START_EVENT"),TWEEN_UPDATE:require("./TWEEN_UPDATE_EVENT"),TWEEN_YOYO:require("./TWEEN_YOYO_EVENT")};
},{"./TIMELINE_COMPLETE_EVENT":"RxkH","./TIMELINE_LOOP_EVENT":"VycB","./TIMELINE_PAUSE_EVENT":"RNoC","./TIMELINE_RESUME_EVENT":"eU0X","./TIMELINE_START_EVENT":"jUZf","./TIMELINE_UPDATE_EVENT":"xWP0","./TWEEN_ACTIVE_EVENT":"ZBiR","./TWEEN_COMPLETE_EVENT":"RxkH","./TWEEN_LOOP_EVENT":"VycB","./TWEEN_REPEAT_EVENT":"fvwy","./TWEEN_START_EVENT":"jUZf","./TWEEN_UPDATE_EVENT":"xWP0","./TWEEN_YOYO_EVENT":"sW9Y"}],"DRAu":[function(require,module,exports) {
var t=require("../../utils/Class"),e=require("eventemitter3"),s=require("../events"),a=require("../../gameobjects/GameObjectCreator"),i=require("../../gameobjects/GameObjectFactory"),r=require("./const"),n=require("../../math/const"),h=new t({Extends:e,initialize:function(t,s,a){e.call(this),this.parent=t,this.parentIsTimeline=t.hasOwnProperty("isTimeline"),this.data=s,this.totalData=s.length,this.targets=a,this.totalTargets=a.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=r.PENDING_ADD,this._pausedState=r.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(t){return void 0===t&&(t=0),this.data[t].current},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===r.ACTIVE},isPaused:function(){return this.state===r.PAUSED},hasTarget:function(t){return-1!==this.targets.indexOf(t)},updateTo:function(t,e,s){void 0===s&&(s=!1);for(var a=0;a<this.totalData;a++){var i=this.data[a];i.key===t&&(i.end=e,s&&(i.start=i.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===r.ACTIVE?this.seek(0):this.state===r.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===r.PENDING_ADD?this:this.play()},calcDuration:function(){for(var t=0,e=n.MAX_SAFE_INTEGER,s=this.data,a=0;a<this.totalData;a++){var i=s[a];i.t1=i.duration+i.hold,i.yoyo&&(i.t1+=i.duration),i.t2=i.t1+i.repeatDelay,i.totalDuration=i.delay+i.t1,-1===i.repeat?i.totalDuration+=999999999999*i.t2:i.repeat>0&&(i.totalDuration+=i.t2*i.repeat),i.totalDuration>t&&(t=i.totalDuration),i.delay<e&&(e=i.delay)}this.duration=Math.max(t,.001),this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=e},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=r.PENDING_ADD,this._pausedState=r.INIT,!1;for(var t=this.data,e=this.totalTargets,s=0;s<this.totalData;s++){var a=t[s],i=a.target,n=a.gen,h=a.key,o=a.index;a.delay=n.delay(i,h,0,o,e,this),a.duration=Math.max(n.duration(i,h,0,o,e,this),.001),a.hold=n.hold(i,h,0,o,e,this),a.repeat=n.repeat(i,h,0,o,e,this),a.repeatDelay=n.repeatDelay(i,h,0,o,e,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=r.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(s.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=r.LOOP_DELAY):(this.state=r.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=r.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===r.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=r.PAUSED,this)},play:function(t){void 0===t&&(t=!1);var e=this.state;return e!==r.INIT||this.parentIsTimeline?e===r.ACTIVE||e===r.PENDING_ADD&&this._pausedState===r.PENDING_ADD?this:this.parentIsTimeline||e!==r.PENDING_REMOVE&&e!==r.REMOVED?(this.parentIsTimeline?(this.resetTweenData(t),0===this.calculatedOffset?this.state=r.ACTIVE:(this.countdown=this.calculatedOffset,this.state=r.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(t),this.state=r.ACTIVE,this.makeActive()),this):(this.seek(0),this.parent.makeActive(this),this):(this.resetTweenData(!1),this.state=r.ACTIVE,this)},resetTweenData:function(t){for(var e=this.data,s=this.totalData,a=this.totalTargets,i=0;i<s;i++){var n=e[i],h=n.target,o=n.key,l=n.index;n.progress=0,n.elapsed=0,n.repeatCounter=-1===n.repeat?999999999999:n.repeat,t?(n.start=n.getStartValue(h,o,n.start,l,a,this),n.end=n.getEndValue(h,o,n.end,l,a,this),n.current=n.start,n.state=r.PLAYING_FORWARD):n.state=r.PENDING_RENDER,n.delay>0&&(n.elapsed=n.delay,n.state=r.DELAY),n.getActiveValue&&(h[o]=n.getActiveValue(n.target,n.key,n.start))}},resume:function(){return this.state===r.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(t,e){if(void 0===e&&(e=16.6),this.totalDuration>=36e5)return console.warn("Tween.seek duration too long"),this;this.state===r.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var s=this.data,a=this.totalTargets,i=0;i<this.totalData;i++){var n=s[i],h=n.target,o=n.gen,l=n.key,p=n.index;n.progress=0,n.elapsed=0,n.repeatCounter=-1===n.repeat?999999999999:n.repeat,n.delay=o.delay(h,l,0,p,a,this),n.duration=Math.max(o.duration(h,l,0,p,a,this),.001),n.hold=o.hold(h,l,0,p,a,this),n.repeat=o.repeat(h,l,0,p,a,this),n.repeatDelay=o.repeatDelay(h,l,0,p,a,this),n.current=n.start,n.state=r.PLAYING_FORWARD,this.updateTweenData(this,n,0,p,a),n.delay>0&&(n.elapsed=n.delay,n.state=r.DELAY)}this.calcDuration();var u=!1;this.state===r.PAUSED&&(u=!0,this.state=r.ACTIVE),this.isSeeking=!0;do{this.update(0,e)}while(this.totalProgress<t);return this.isSeeking=!1,u&&(this.state=r.PAUSED),this},setCallback:function(t,e,s,a){return this.callbacks[t]={func:e,scope:a,params:s},this},complete:function(t){return void 0===t&&(t=0),t?(this.state=r.COMPLETE_DELAY,this.countdown=t):(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(t){return this.state===r.ACTIVE&&void 0!==t&&this.seek(t),this.state!==r.REMOVED&&(this.state!==r.PAUSED&&this.state!==r.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.removeAllListeners(),this.state=r.PENDING_REMOVE),this},update:function(t,e){if(this.state===r.PAUSED)return!1;switch(this.useFrames&&(e=1*this.parent.timeScale),e*=this.timeScale,this.elapsed+=e,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=e,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case r.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=e,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(s.TWEEN_START,this.callbacks.onStart)));for(var a=!1,i=0;i<this.totalData;i++){var n=this.data[i];this.updateTweenData(this,n,e)&&(a=!0)}a||this.nextState();break;case r.LOOP_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=r.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop));break;case r.OFFSET_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=r.ACTIVE);break;case r.COMPLETE_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===r.PENDING_REMOVE},dispatchTweenDataEvent:function(t,e,s){this.isSeeking||(this.emit(t,this,s.key,s.target,s.current,s.previous),e&&(e.params[1]=s.target,e.func.apply(e.scope,e.params)))},dispatchTweenEvent:function(t,e){this.isSeeking||(this.emit(t,this,this.targets),e&&(e.params[1]=this.targets,e.func.apply(e.scope,e.params)))},setStateFromEnd:function(t,e,a){return e.yoyo?(e.elapsed=a,e.progress=a/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),this.dispatchTweenDataEvent(s.TWEEN_YOYO,t.callbacks.onYoyo,e),e.start=e.getStartValue(e.target,e.key,e.start,e.index,t.totalTargets,t),r.PLAYING_BACKWARD):e.repeatCounter>0?(e.repeatCounter--,e.elapsed=a,e.progress=a/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),e.start=e.getStartValue(e.target,e.key,e.start,e.index,t.totalTargets,t),e.end=e.getEndValue(e.target,e.key,e.start,e.index,t.totalTargets,t),e.repeatDelay>0?(e.elapsed=e.repeatDelay-a,e.current=e.start,e.target[e.key]=e.current,r.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,t.callbacks.onRepeat,e),r.PLAYING_FORWARD)):r.COMPLETE},setStateFromStart:function(t,e,a){return e.repeatCounter>0?(e.repeatCounter--,e.elapsed=a,e.progress=a/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),e.end=e.getEndValue(e.target,e.key,e.start,e.index,t.totalTargets,t),e.repeatDelay>0?(e.elapsed=e.repeatDelay-a,e.current=e.start,e.target[e.key]=e.current,r.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,t.callbacks.onRepeat,e),r.PLAYING_FORWARD)):r.COMPLETE},updateTweenData:function(t,e,a){var i=e.target;switch(e.state){case r.PLAYING_FORWARD:case r.PLAYING_BACKWARD:if(!i){e.state=r.COMPLETE;break}var n=e.elapsed,h=e.duration,o=0;(n+=a)>h&&(o=n-h,n=h);var l=e.state===r.PLAYING_FORWARD,p=n/h;if(e.elapsed=n,e.progress=p,e.previous=e.current,1===p)l?(e.current=e.end,i[e.key]=e.end,e.hold>0?(e.elapsed=e.hold-o,e.state=r.HOLD_DELAY):e.state=this.setStateFromEnd(t,e,o)):(e.current=e.start,i[e.key]=e.start,e.state=this.setStateFromStart(t,e,o));else{var u=l?e.ease(p):e.ease(1-p);e.current=e.start+(e.end-e.start)*u,i[e.key]=e.current}this.dispatchTweenDataEvent(s.TWEEN_UPDATE,t.callbacks.onUpdate,e);break;case r.DELAY:e.elapsed-=a,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=r.PENDING_RENDER);break;case r.REPEAT_DELAY:e.elapsed-=a,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=r.PLAYING_FORWARD,this.dispatchTweenDataEvent(s.TWEEN_REPEAT,t.callbacks.onRepeat,e));break;case r.HOLD_DELAY:e.elapsed-=a,e.elapsed<=0&&(e.state=this.setStateFromEnd(t,e,Math.abs(e.elapsed)));break;case r.PENDING_RENDER:i?(e.start=e.getStartValue(i,e.key,i[e.key],e.index,t.totalTargets,t),e.end=e.getEndValue(i,e.key,e.start,e.index,t.totalTargets,t),e.current=e.start,i[e.key]=e.start,e.state=r.PLAYING_FORWARD):e.state=r.COMPLETE}return e.state!==r.COMPLETE}});h.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onUpdate","onYoyo"],i.register("tween",function(t){return this.scene.sys.tweens.add(t)}),a.register("tween",function(t){return this.scene.sys.tweens.create(t)}),module.exports=h;
},{"../../utils/Class":"Q4x4","eventemitter3":"Clm3","../events":"HkkW","../../gameobjects/GameObjectCreator":"eYSd","../../gameobjects/GameObjectFactory":"BKGz","./const":"l3E3","../../math/const":"TJqb"}],"tqBF":[function(require,module,exports) {
var e=function(e,t,a,r,l,o,n,u,d,p,i,s,y,g,c){return{target:e,index:t,key:a,getActiveValue:o,getEndValue:r,getStartValue:l,ease:n,duration:0,totalDuration:0,delay:0,yoyo:p,hold:0,repeat:0,repeatDelay:0,flipX:g,flipY:c,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:u,duration:d,hold:i,repeat:s,repeatDelay:y},state:0}};module.exports=e;
},{}],"YvWU":[function(require,module,exports) {
var e=require("../tween/Defaults"),a=require("../../utils/object/GetAdvancedValue"),r=require("./GetBoolean"),t=require("./GetEaseFunction"),o=require("./GetNewValue"),l=require("../../utils/object/GetValue"),u=require("./GetValueOp"),n=require("../tween/Tween"),s=require("../tween/TweenData"),i=function(i,p,c){void 0===c&&(c=e);var d=l(p,"from",0),v=l(p,"to",1),y=[{value:d}],f=o(p,"delay",c.delay),m=o(p,"duration",c.duration),q=l(p,"easeParams",c.easeParams),D=t(l(p,"ease",c.ease),q),w=o(p,"hold",c.hold),h=o(p,"repeat",c.repeat),G=o(p,"repeatDelay",c.repeatDelay),b=r(p,"yoyo",c.yoyo),g=[],P=u("value",v),S=s(y[0],0,"value",P.getEnd,P.getStart,P.getActive,D,f,m,b,w,h,G,!1,!1);S.start=d,S.current=d,S.to=v,g.push(S);var V=new n(i,g,y);V.offset=a(p,"offset",null),V.completeDelay=a(p,"completeDelay",0),V.loop=Math.round(a(p,"loop",0)),V.loopDelay=Math.round(a(p,"loopDelay",0)),V.paused=r(p,"paused",!1),V.useFrames=r(p,"useFrames",!1);for(var E=l(p,"callbackScope",V),F=[V,null],T=n.TYPES,j=0;j<T.length;j++){var k=T[j],A=l(p,k,!1);if(A){var M=l(p,k+"Scope",E),x=l(p,k+"Params",[]);V.setCallback(k,A,F.concat(x),M)}}return V};module.exports=i;
},{"../tween/Defaults":"XlC7","../../utils/object/GetAdvancedValue":"YJ2h","./GetBoolean":"pdce","./GetEaseFunction":"VFtU","./GetNewValue":"FjAX","../../utils/object/GetValue":"FWyS","./GetValueOp":"N3aY","../tween/Tween":"DRAu","../tween/TweenData":"tqBF"}],"ogvK":[function(require,module,exports) {
var r=require("./GetEaseFunction"),a=require("../../utils/object/GetValue"),t=require("../../math/const"),e=function(e,o){void 0===o&&(o={});var n=a(o,"start",0),u=a(o,"ease",null),l=a(o,"grid",null),s=a(o,"from",0),i="first"===s,f="center"===s,v="last"===s,c="number"==typeof s,h=Array.isArray(e),M=h?parseFloat(e[0]):parseFloat(e),m=h?parseFloat(e[1]):0,p=Math.max(M,m);if(h&&(n+=M),l){var F=l[0],b=l[1],q=0,E=0,d=0,y=0,A=[];v?(q=F-1,E=b-1):c?(q=s%F,E=Math.floor(s/F)):f&&(q=(F-1)/2,E=(b-1)/2);for(var G=t.MIN_SAFE_INTEGER,x=0;x<b;x++){A[x]=[];for(var I=0;I<F;I++){d=q-I,y=E-x;var N=Math.sqrt(d*d+y*y);N>G&&(G=N),A[x][I]=N}}}var _=u?r(u):null;return l?function(r,a,t,e){var o,u=0,l=e%F,s=Math.floor(e/F);if(l>=0&&l<F&&s>=0&&s<b&&(u=A[s][l]),h){var i=m-M;o=_?u/G*i*_(u/G):u/G*i}else o=_?u*M*_(u/G):u*M;return o+n}:function(r,a,t,e,o){var u,l,F;(o--,i?u=e:f?u=Math.abs(o/2-e):v?u=o-e:c&&(u=Math.abs(s-e)),h)?(F=f?(m-M)/o*(2*u):(m-M)/o*u,l=_?F*_(u/o):F):l=_?o*p*_(u/o):u*M;return l+n}};module.exports=e;
},{"./GetEaseFunction":"VFtU","../../utils/object/GetValue":"FWyS","../../math/const":"TJqb"}],"wZ2V":[function(require,module,exports) {
var e=require("../tween/Defaults"),a=require("../../utils/object/GetAdvancedValue"),r=require("./GetBoolean"),t=require("./GetEaseFunction"),l=require("./GetNewValue"),o=require("./GetProps"),u=require("./GetTargets"),i=require("../../utils/object/GetValue"),s=require("./GetValueOp"),p=require("../tween/Tween"),n=require("../tween/TweenData"),d=function(d,y,f){void 0===f&&(f=e);for(var c=f.targets?f.targets:u(y),v=o(y),q=l(y,"delay",f.delay),g=l(y,"duration",f.duration),h=i(y,"easeParams",f.easeParams),D=t(i(y,"ease",f.ease),h),m=l(y,"hold",f.hold),G=l(y,"repeat",f.repeat),w=l(y,"repeatDelay",f.repeatDelay),P=r(y,"yoyo",f.yoyo),b=r(y,"flipX",f.flipX),S=r(y,"flipY",f.flipY),T=[],V=0;V<v.length;V++)for(var Y=v[V].key,k=v[V].value,E=0;E<c.length;E++){var F=s(Y,k),X=n(c[E],E,Y,F.getEnd,F.getStart,F.getActive,t(i(k,"ease",D),h),l(k,"delay",q),l(k,"duration",g),r(k,"yoyo",P),l(k,"hold",m),l(k,"repeat",G),l(k,"repeatDelay",w),r(k,"flipX",b),r(k,"flipY",S));T.push(X)}var j=new p(d,T,c);j.offset=a(y,"offset",null),j.completeDelay=a(y,"completeDelay",0),j.loop=Math.round(a(y,"loop",0)),j.loopDelay=Math.round(a(y,"loopDelay",0)),j.paused=r(y,"paused",!1),j.useFrames=r(y,"useFrames",!1);for(var A=i(y,"callbackScope",j),M=[j,null],x=p.TYPES,B=0;B<x.length;B++){var C=x[B],N=i(y,C,!1);if(N){var O=i(y,C+"Scope",A),z=i(y,C+"Params",[]);j.setCallback(C,N,M.concat(z),O)}}return j};module.exports=d;
},{"../tween/Defaults":"XlC7","../../utils/object/GetAdvancedValue":"YJ2h","./GetBoolean":"pdce","./GetEaseFunction":"VFtU","./GetNewValue":"FjAX","./GetProps":"K172","./GetTargets":"IWIN","../../utils/object/GetValue":"FWyS","./GetValueOp":"N3aY","../tween/Tween":"DRAu","../tween/TweenData":"tqBF"}],"YESr":[function(require,module,exports) {
var t=require("../utils/Class"),s=require("eventemitter3"),e=require("./events"),i=require("./builders/TweenBuilder"),a=require("./tween/const"),o=new t({Extends:s,initialize:function(t){s.call(this),this.manager=t,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=a.PENDING_ADD,this._pausedState=a.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(t,s){this.emit(t,this),s&&s.func.apply(s.scope,s.params)},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===a.ACTIVE},add:function(t){return this.queue(i(this,t))},queue:function(t){return this.isPlaying()||(t.parent=this,t.parentIsTimeline=!0,this.data.push(t),this.totalData=this.data.length),this},hasOffset:function(t){return null!==t.offset},isOffsetAbsolute:function(t){return"number"==typeof t},isOffsetRelative:function(t){if("string"===typeof t){var s=t[0];if("-"===s||"+"===s)return!0}return!1},getRelativeOffset:function(t,s){var e=t[0],i=parseFloat(t.substr(2)),a=s;switch(e){case"+":a+=i;break;case"-":a-=i}return Math.max(0,a)},calcDuration:function(){for(var t=0,s=0,e=0,i=0;i<this.totalData;i++){var a=this.data[i];a.init(),this.hasOffset(a)?this.isOffsetAbsolute(a.offset)?(a.calculatedOffset=a.offset,0===a.offset&&(e=0)):this.isOffsetRelative(a.offset)&&(a.calculatedOffset=this.getRelativeOffset(a.offset,t)):a.calculatedOffset=e,t=a.totalDuration+a.calculatedOffset,s+=a.totalDuration,e+=a.totalDuration}this.duration=s,this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=a.PAUSED,!1)},resetTweens:function(t){for(var s=0;s<this.totalData;s++){this.data[s].play(t)}},setCallback:function(t,s,e,i){return-1!==o.TYPES.indexOf(t)&&(this.callbacks[t]={func:s,scope:i,params:e}),this},makeActive:function(t){return this.manager.makeActive(t)},play:function(){if(this.state!==a.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=a.ACTIVE,this.dispatchTimelineEvent(e.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=a.LOOP_DELAY):(this.state=a.ACTIVE,this.dispatchTimelineEvent(e.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=a.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=a.PENDING_REMOVE,this.dispatchTimelineEvent(e.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(t,s){if(this.state!==a.PAUSED){switch(this.useFrames&&(s=1*this.manager.timeScale),s*=this.timeScale,this.elapsed+=s,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=s,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case a.ACTIVE:for(var i=this.totalData,o=0;o<this.totalData;o++){this.data[o].update(t,s)&&i--}this.dispatchTimelineEvent(e.TIMELINE_UPDATE,this.callbacks.onUpdate),0===i&&this.nextState();break;case a.LOOP_DELAY:this.countdown-=s,this.countdown<=0&&(this.state=a.ACTIVE,this.dispatchTimelineEvent(e.TIMELINE_LOOP,this.callbacks.onLoop));break;case a.COMPLETE_DELAY:this.countdown-=s,this.countdown<=0&&(this.state=a.PENDING_REMOVE,this.dispatchTimelineEvent(e.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===a.PENDING_REMOVE}},stop:function(){this.state=a.PENDING_REMOVE},pause:function(){if(this.state!==a.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=a.PAUSED,this.emit(e.TIMELINE_PAUSE,this),this},resume:function(){return this.state===a.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(e.TIMELINE_RESUME,this)),this},hasTarget:function(t){for(var s=0;s<this.data.length;s++)if(this.data[s].hasTarget(t))return!0;return!1},destroy:function(){for(var t=0;t<this.data.length;t++)this.data[t].stop()}});o.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],module.exports=o;
},{"../utils/Class":"Q4x4","eventemitter3":"Clm3","./events":"HkkW","./builders/TweenBuilder":"wZ2V","./tween/const":"l3E3"}],"tCNc":[function(require,module,exports) {
var e=require("../../utils/object/Clone"),a=require("../tween/Defaults"),o=require("../../utils/object/GetAdvancedValue"),r=require("./GetBoolean"),t=require("./GetEaseFunction"),l=require("./GetNewValue"),n=require("./GetTargets"),p=require("./GetTweens"),u=require("../../utils/object/GetValue"),s=require("../Timeline"),i=require("./TweenBuilder"),c=function(c,d){var y=new s(c),m=p(d);if(0===m.length)return y.paused=!0,y;var f=e(a);f.targets=n(d);var v=o(d,"totalDuration",0);f.duration=v>0?Math.floor(v/m.length):l(d,"duration",f.duration),f.delay=l(d,"delay",f.delay),f.easeParams=u(d,"easeParams",f.easeParams),f.ease=t(u(d,"ease",f.ease),f.easeParams),f.hold=l(d,"hold",f.hold),f.repeat=l(d,"repeat",f.repeat),f.repeatDelay=l(d,"repeatDelay",f.repeatDelay),f.yoyo=r(d,"yoyo",f.yoyo),f.flipX=r(d,"flipX",f.flipX),f.flipY=r(d,"flipY",f.flipY);for(var q=0;q<m.length;q++)y.queue(i(y,m[q],f));y.completeDelay=o(d,"completeDelay",0),y.loop=Math.round(o(d,"loop",0)),y.loopDelay=Math.round(o(d,"loopDelay",0)),y.paused=r(d,"paused",!1),y.useFrames=r(d,"useFrames",!1);var C=u(d,"callbackScope",y),S=[y],b=u(d,"onStart",!1);if(b){var h=u(d,"onStartScope",C),D=u(d,"onStartParams",[]);y.setCallback("onStart",b,S.concat(D),h)}var P=u(d,"onUpdate",!1);if(P){var G=u(d,"onUpdateScope",C),Y=u(d,"onUpdateParams",[]);y.setCallback("onUpdate",P,S.concat(Y),G)}var k=u(d,"onLoop",!1);if(k){var g=u(d,"onLoopScope",C),w=u(d,"onLoopParams",[]);y.setCallback("onLoop",k,S.concat(w),g)}var L=u(d,"onYoyo",!1);if(L){var T=u(d,"onYoyoScope",C),U=u(d,"onYoyoParams",[]);y.setCallback("onYoyo",L,S.concat(null,U),T)}var j=u(d,"onComplete",!1);if(j){var F=u(d,"onCompleteScope",C),M=u(d,"onCompleteParams",[]);y.setCallback("onComplete",j,S.concat(M),F)}return y};module.exports=c;
},{"../../utils/object/Clone":"y1cc","../tween/Defaults":"XlC7","../../utils/object/GetAdvancedValue":"YJ2h","./GetBoolean":"pdce","./GetEaseFunction":"VFtU","./GetNewValue":"FjAX","./GetTargets":"IWIN","./GetTweens":"alGr","../../utils/object/GetValue":"FWyS","../Timeline":"YESr","./TweenBuilder":"wZ2V"}],"Ny2y":[function(require,module,exports) {
module.exports={GetBoolean:require("./GetBoolean"),GetEaseFunction:require("./GetEaseFunction"),GetNewValue:require("./GetNewValue"),GetProps:require("./GetProps"),GetTargets:require("./GetTargets"),GetTweens:require("./GetTweens"),GetValueOp:require("./GetValueOp"),NumberTweenBuilder:require("./NumberTweenBuilder"),StaggerBuilder:require("./StaggerBuilder"),TimelineBuilder:require("./TimelineBuilder"),TweenBuilder:require("./TweenBuilder")};
},{"./GetBoolean":"pdce","./GetEaseFunction":"VFtU","./GetNewValue":"FjAX","./GetProps":"K172","./GetTargets":"IWIN","./GetTweens":"alGr","./GetValueOp":"N3aY","./NumberTweenBuilder":"YvWU","./StaggerBuilder":"ogvK","./TimelineBuilder":"tCNc","./TweenBuilder":"wZ2V"}],"Q500":[function(require,module,exports) {
var t=require("../utils/array/Remove"),e=require("../utils/Class"),s=require("./builders/NumberTweenBuilder"),i=require("../plugins/PluginCache"),n=require("../scene/events"),r=require("./builders/StaggerBuilder"),h=require("./builders/TimelineBuilder"),u=require("./tween/const"),a=require("./builders/TweenBuilder"),o=new e({initialize:function(t){this.scene=t,this.systems=t.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,t.sys.events.once(n.BOOT,this.boot,this),t.sys.events.on(n.START,this.start,this)},boot:function(){this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(n.PRE_UPDATE,this.preUpdate,this),t.on(n.UPDATE,this.update,this),t.once(n.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(t){return h(this,t)},timeline:function(t){var e=h(this,t);return e.paused||(this._add.push(e),this._toProcess++),e},create:function(t){return a(this,t)},add:function(t){var e=a(this,t);return this._add.push(e),this._toProcess++,e},existing:function(t){return this._add.push(t),this._toProcess++,this},addCounter:function(t){var e=s(this,t);return this._add.push(e),this._toProcess++,e},stagger:function(t,e){return r(t,e)},preUpdate:function(){if(0!==this._toProcess){var t,e,s=this._destroy,i=this._active,n=this._pending;for(t=0;t<s.length;t++){e=s[t];var r=i.indexOf(e);-1===r?(r=n.indexOf(e))>-1&&(e.state=u.REMOVED,n.splice(r,1)):(e.state=u.REMOVED,i.splice(r,1))}for(s.length=0,s=this._add,t=0;t<s.length;t++)(e=s[t]).state===u.PENDING_ADD&&(e.init()?(e.play(),this._active.push(e)):this._pending.push(e));s.length=0,this._toProcess=0}},update:function(t,e){var s,i=this._active;e*=this.timeScale;for(var n=0;n<i.length;n++)(s=i[n]).update(t,e)&&(this._destroy.push(s),this._toProcess++)},remove:function(e){return t(this._add,e),t(this._pending,e),t(this._active,e),t(this._destroy,e),e.state=u.REMOVED,this},makeActive:function(t){if(-1!==this._add.indexOf(t)||-1!==this._active.indexOf(t))return this;var e=this._pending.indexOf(t);return-1!==e&&this._pending.splice(e,1),this._add.push(t),t.state=u.PENDING_ADD,this._toProcess++,this},each:function(t,e){for(var s=[null],i=1;i<arguments.length;i++)s.push(arguments[i]);for(var n in this.list)s[0]=this.list[n],t.apply(e,s)},getAllTweens:function(){for(var t=this._active,e=[],s=0;s<t.length;s++)e.push(t[s]);return e},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(t){var e,s,i=this._active,n=[];if(Array.isArray(t))for(s=0;s<i.length;s++){e=i[s];for(var r=0;r<t.length;r++)e.hasTarget(t[r])&&n.push(e)}else for(s=0;s<i.length;s++)(e=i[s]).hasTarget(t)&&n.push(e);return n},isTweening:function(t){for(var e,s=this._active,i=0;i<s.length;i++)if((e=s[i]).hasTarget(t)&&e.isPlaying())return!0;return!1},killAll:function(){for(var t=this.getAllTweens(),e=0;e<t.length;e++)t[e].stop();return this},killTweensOf:function(t){for(var e=this.getTweensOf(t),s=0;s<e.length;s++)e[s].stop();return this},pauseAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].pause();return this},resumeAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].resume();return this},setGlobalTimeScale:function(t){return this.timeScale=t,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var t=this.systems.events;t.off(n.PRE_UPDATE,this.preUpdate,this),t.off(n.UPDATE,this.update,this),t.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});i.register("TweenManager",o,"tweens"),module.exports=o;
},{"../utils/array/Remove":"WDn7","../utils/Class":"Q4x4","./builders/NumberTweenBuilder":"YvWU","../plugins/PluginCache":"vXV4","../scene/events":"Zlz3","./builders/StaggerBuilder":"ogvK","./builders/TimelineBuilder":"tCNc","./tween/const":"l3E3","./builders/TweenBuilder":"wZ2V"}],"ZZyT":[function(require,module,exports) {
var e=require("./tween/const"),r=require("../utils/object/Extend"),n={Builders:require("./builders"),Events:require("./events"),TweenManager:require("./TweenManager"),Tween:require("./tween/Tween"),TweenData:require("./tween/TweenData"),Timeline:require("./Timeline")};n=r(!1,n,e),module.exports=n;
},{"./tween/const":"l3E3","../utils/object/Extend":"CtVZ","./builders":"Ny2y","./events":"HkkW","./TweenManager":"Q500","./tween/Tween":"DRAu","./tween/TweenData":"tqBF","./Timeline":"YESr"}],"aLWE":[function(require,module,exports) {
var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(r,t){for(var e=new Uint8Array(r),a=e.length,s=t?"data:"+t+";base64,":"",g=0;g<a;g+=3)s+=n[e[g]>>2],s+=n[(3&e[g])<<4|e[g+1]>>4],s+=n[(15&e[g+1])<<2|e[g+2]>>6],s+=n[63&e[g+2]];return a%3==2?s=s.substring(0,s.length-1)+"=":a%3==1&&(s=s.substring(0,s.length-2)+"=="),s};module.exports=r;
},{}],"fycW":[function(require,module,exports) {
module.exports={ArrayBufferToBase64:require("./ArrayBufferToBase64"),Base64ToArrayBuffer:require("./Base64ToArrayBuffer")};
},{"./ArrayBufferToBase64":"aLWE","./Base64ToArrayBuffer":"emFm"}],"ir50":[function(require,module,exports) {
var e=require("./GetValue"),r=require("../../math/Clamp"),u=function(u,a,t,i,o){void 0===o&&(o=t);var l=e(u,a,o);return r(l,t,i)};module.exports=u;
},{"./GetValue":"FWyS","../../math/Clamp":"dPkx"}],"PNhn":[function(require,module,exports) {
var r=function(r,e){for(var n=0;n<e.length;n++)if(!r.hasOwnProperty(e[n]))return!1;return!0};module.exports=r;
},{}],"gePd":[function(require,module,exports) {
var r=require("./Clone"),e=function(e,n){var o=r(e);for(var a in n)o.hasOwnProperty(a)&&(o[a]=n[a]);return o};module.exports=e;
},{"./Clone":"y1cc"}],"ZPfB":[function(require,module,exports) {
module.exports={Clone:require("./Clone"),Extend:require("./Extend"),GetAdvancedValue:require("./GetAdvancedValue"),GetFastValue:require("./GetFastValue"),GetMinMaxValue:require("./GetMinMaxValue"),GetValue:require("./GetValue"),HasAll:require("./HasAll"),HasAny:require("./HasAny"),HasValue:require("./HasValue"),IsPlainObject:require("./IsPlainObject"),Merge:require("./Merge"),MergeRight:require("./MergeRight"),Pick:require("./Pick"),SetValue:require("./SetValue")};
},{"./Clone":"y1cc","./Extend":"CtVZ","./GetAdvancedValue":"YJ2h","./GetFastValue":"xbYy","./GetMinMaxValue":"ir50","./GetValue":"FWyS","./HasAll":"PNhn","./HasAny":"tnad","./HasValue":"qdzY","./IsPlainObject":"TEos","./Merge":"J7IV","./MergeRight":"gePd","./Pick":"KZv8","./SetValue":"z5Uu"}],"ZKlR":[function(require,module,exports) {
var r=function(r,e){return r.replace(/%([0-9]+)/g,function(r,n){return e[Number(n)-1]})};module.exports=r;
},{}],"uctV":[function(require,module,exports) {
var e=function(e){return e.split("").reverse().join("")};module.exports=e;
},{}],"OEh2":[function(require,module,exports) {
module.exports={Format:require("./Format"),Pad:require("./Pad"),Reverse:require("./Reverse"),UppercaseFirst:require("./UppercaseFirst"),UUID:require("./UUID")};
},{"./Format":"ZKlR","./Pad":"KR4z","./Reverse":"uctV","./UppercaseFirst":"hy3t","./UUID":"o2Et"}],"KuSL":[function(require,module,exports) {
module.exports={Array:require("./array/"),Base64:require("./base64/"),Objects:require("./object/"),String:require("./string/")};
},{"./array/":"BpeF","./base64/":"fycW","./object/":"ZPfB","./string/":"OEh2"}],"LufU":[function(require,module,exports) {
module.exports={SoundManagerCreator:require("./SoundManagerCreator"),Events:require("./events"),BaseSound:require("./BaseSound"),BaseSoundManager:require("./BaseSoundManager"),WebAudioSound:require("./webaudio/WebAudioSound"),WebAudioSoundManager:require("./webaudio/WebAudioSoundManager"),HTML5AudioSound:require("./html5/HTML5AudioSound"),HTML5AudioSoundManager:require("./html5/HTML5AudioSoundManager"),NoAudioSound:require("./noaudio/NoAudioSound"),NoAudioSoundManager:require("./noaudio/NoAudioSoundManager")};
},{"./SoundManagerCreator":"NW4I","./events":"joJ3","./BaseSound":"BDpY","./BaseSoundManager":"eyaX","./webaudio/WebAudioSound":"FWbP","./webaudio/WebAudioSoundManager":"eu9A","./html5/HTML5AudioSound":"wmfv","./html5/HTML5AudioSoundManager":"CmN3","./noaudio/NoAudioSound":"DVV6","./noaudio/NoAudioSoundManager":"DHOV"}],"aKpH":[function(require,module,exports) {
var i=require("../../../../src/utils/Class"),t=require("../../../../src/gameobjects/GameObject"),e=require("../../../../src/gameobjects/sprite/Sprite"),s=require("../../../../src/math/Vector2"),n=require("../../../../src/math/Vector4"),c=new i({Extends:t,initialize:function(i,c,h,o,r,a){t.call(this,i,"Sprite3D"),this.gameObject=new e(i,0,0,r,a),this.position=new n(c,h,o),this.size=new s(this.gameObject.width,this.gameObject.height),this.scale=new s(1,1),this.adjustScaleX=!0,this.adjustScaleY=!0,this._visible=!0},project:function(i){var t=this.position,e=this.gameObject;i.project(t,e),i.getPointSize(t,this.size,this.scale),this.scale.x<=0||this.scale.y<=0?e.setVisible(!1):(e.visible||e.setVisible(!0),this.adjustScaleX&&(e.scaleX=this.scale.x),this.adjustScaleY&&(e.scaleY=this.scale.y),e.setDepth(-1*e.z))},setVisible:function(i){return this.visible=i,this},visible:{get:function(){return this._visible},set:function(i){this._visible=i,this.gameObject.visible=i}},x:{get:function(){return this.position.x},set:function(i){this.position.x=i}},y:{get:function(){return this.position.y},set:function(i){this.position.y=i}},z:{get:function(){return this.position.z},set:function(i){this.position.z=i}}});module.exports=c;
},{"../../../../src/utils/Class":"Q4x4","../../../../src/gameobjects/GameObject":"YzbT","../../../../src/gameobjects/sprite/Sprite":"uRwE","../../../../src/math/Vector2":"xARF","../../../../src/math/Vector4":"SD5N"}],"q1RM":[function(require,module,exports) {
var t=require("../../../src/utils/Class"),i=require("../../../src/math/Matrix4"),e=require("../../../src/math/RandomXYZ"),r=require("../../../src/math/RandomXYZW"),s=require("../../../src/math/RotateVec3"),n=require("../../../src/structs/Set"),o=require("./sprite3d/Sprite3D"),h=require("../../../src/math/Vector2"),a=require("../../../src/math/Vector3"),u=require("../../../src/math/Vector4"),c=new a,d=new u,p=new a,l=new a,f=new i,v=new t({initialize:function(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,this.name="",this.direction=new a(0,0,-1),this.up=new a(0,1,0),this.position=new a,this.pixelScale=128,this.projection=new i,this.view=new i,this.combined=new i,this.invProjectionView=new i,this.near=1,this.far=100,this.ray={origin:new a,direction:new a},this.viewportWidth=0,this.viewportHeight=0,this.billboardMatrixDirty=!0,this.children=new n},setPosition:function(t,i,e){return this.position.set(t,i,e),this.update()},setScene:function(t){return this.scene=t,this},setPixelScale:function(t){return this.pixelScale=t,this.update()},add:function(t){return this.children.set(t),this.displayList.add(t.gameObject),this.updateList.add(t.gameObject),this.updateChildren(),t},remove:function(t){return this.displayList.remove(t.gameObject),this.updateList.remove(t.gameObject),this.children.delete(t),this},clear:function(){for(var t=this.getChildren(),i=0;i<t.length;i++)this.remove(t[i]);return this},getChildren:function(){return this.children.entries},create:function(t,i,e,r,s,n){void 0===n&&(n=!0);var h=new o(this.scene,t,i,e,r,s);return this.displayList.add(h.gameObject),this.updateList.add(h.gameObject),h.visible=n,this.children.set(h),this.updateChildren(),h},createMultiple:function(t,i,e,r){void 0===r&&(r=!0);for(var s=[],n=0;n<t;n++){var h=new o(this.scene,0,0,0,i,e);this.displayList.add(h.gameObject),this.updateList.add(h.gameObject),h.visible=r,this.children.set(h),s.push(h)}return s},createRect:function(t,i,e,r){"number"==typeof t&&(t={x:t,y:t,z:t}),"number"==typeof i&&(i={x:i,y:i,z:i});for(var s=t.x*t.y*t.z,n=this.createMultiple(s,e,r),o=0,h=.5-t.z/2;h<t.z/2;h++)for(var a=.5-t.y/2;a<t.y/2;a++)for(var u=.5-t.x/2;u<t.x/2;u++){var c=u*i.x,d=a*i.y,p=h*i.z;n[o].position.set(c,d,p),o++}return this.update(),n},randomSphere:function(t,i){void 0===i&&(i=this.getChildren());for(var r=0;r<i.length;r++)e(i[r].position,t);return this.update()},randomCube:function(t,i){void 0===i&&(i=this.getChildren());for(var e=0;e<i.length;e++)r(i[e].position,t);return this.update()},translateChildren:function(t,i){void 0===i&&(i=this.getChildren());for(var e=0;e<i.length;e++)i[e].position.add(t);return this.update()},transformChildren:function(t,i){void 0===i&&(i=this.getChildren());for(var e=0;e<i.length;e++)i[e].position.transformMat4(t);return this.update()},setViewport:function(t,i){return this.viewportWidth=t,this.viewportHeight=i,this.update()},translate:function(t,i,e){return"object"==typeof t?(this.position.x+=t.x||0,this.position.y+=t.y||0,this.position.z+=t.z||0):(this.position.x+=t||0,this.position.y+=i||0,this.position.z+=e||0),this.update()},lookAt:function(t,i,e){var r=this.direction,s=this.up;return"object"==typeof t?r.copy(t):r.set(t,i,e),r.subtract(this.position).normalize(),c.copy(r).cross(s).normalize(),s.copy(c).cross(r).normalize(),this.update()},rotate:function(t,i){return s(this.direction,i,t),s(this.up,i,t),this.update()},rotateAround:function(t,i,e){return c.copy(t).subtract(this.position),this.translate(c),this.rotate(i,e),this.translate(c.negate()),this.update()},project:function(t,i){void 0===i&&(i=new u);var e=this.viewportWidth,r=this.viewportHeight,s=v.NEAR_RANGE,n=v.FAR_RANGE;return d.set(t.x,t.y,t.z,1),d.transformMat4(this.combined),0===d.w&&(d.w=1),d.x=d.x/d.w,d.y=d.y/d.w,d.z=d.z/d.w,i.x=e/2*d.x+(0+e/2),i.y=r/2*d.y+(0+r/2),i.z=(n-s)/2*d.z+(n+s)/2,(0===i.w||i.w)&&(i.w=1/d.w),i},unproject:function(t,i){void 0===i&&(i=new a);var e=d.set(0,0,this.viewportWidth,this.viewportHeight);return i.copy(t).unproject(e,this.invProjectionView)},getPickRay:function(t,i){var e=this.ray.origin.set(t,i,0),r=this.ray.direction.set(t,i,1),s=d.set(0,0,this.viewportWidth,this.viewportHeight),n=this.invProjectionView;return e.unproject(s,n),r.unproject(s,n),r.subtract(e).normalize(),this.ray},updateChildren:function(){for(var t=this.children.entries,i=0;i<t.length;i++)t[i].project(this);return this},update:function(){return this.updateChildren()},updateBillboardMatrix:function(){var t=p.set(this.direction).negate(),i=l.set(this.up).cross(t).normalize(),e=c.set(t).cross(i).normalize(),r=f.val;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=0,r[4]=e.x,r[5]=e.y,r[6]=e.z,r[7]=0,r[8]=t.x,r[9]=t.y,r[10]=t.z,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this.billboardMatrixDirty=!1},getPointSize:function(t,i,e){void 0===e&&(e=new h),this.billboardMatrixDirty&&this.updateBillboardMatrix();var r=c,s=i.x/this.pixelScale/2,n=i.y/this.pixelScale/2;r.set(-s,-n,0).transformMat4(f).add(t),this.project(r,r);var o=r.x,a=r.y;r.set(s,n,0).transformMat4(f).add(t),this.project(r,r);var u=r.x-o,d=r.y-a;return e.set(u,d)},destroy:function(){this.children.clear(),this.scene=void 0,this.children=void 0},setX:function(t){return this.position.x=t,this.update()},setY:function(t){return this.position.y=t,this.update()},setZ:function(t){return this.position.z=t,this.update()},x:{get:function(){return this.position.x},set:function(t){this.position.x=t,this.update()}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t,this.update()}},z:{get:function(){return this.position.z},set:function(t){this.position.z=t,this.update()}}});v.FAR_RANGE=1,v.NEAR_RANGE=0,module.exports=v;
},{"../../../src/utils/Class":"Q4x4","../../../src/math/Matrix4":"SO9Y","../../../src/math/RandomXYZ":"HJhl","../../../src/math/RandomXYZW":"KVeE","../../../src/math/RotateVec3":"YZ7U","../../../src/structs/Set":"TNKn","./sprite3d/Sprite3D":"aKpH","../../../src/math/Vector2":"xARF","../../../src/math/Vector3":"E0QN","../../../src/math/Vector4":"SD5N"}],"MYPQ":[function(require,module,exports) {
var i=require("./Camera"),t=require("../../../src/utils/Class"),o=require("../../../src/math/Vector3"),s=new o,e=new t({Extends:i,initialize:function(t,o,s){void 0===o&&(o=0),void 0===s&&(s=0),i.call(this,t),this.viewportWidth=o,this.viewportHeight=s,this._zoom=1,this.near=0,this.update()},setToOrtho:function(i,t,o){void 0===t&&(t=this.viewportWidth),void 0===o&&(o=this.viewportHeight);var s=this.zoom;return this.up.set(0,i?-1:1,0),this.direction.set(0,0,i?1:-1),this.position.set(s*t/2,s*o/2,0),this.viewportWidth=t,this.viewportHeight=o,this.update()},update:function(){var i=this.viewportWidth,t=this.viewportHeight,o=Math.abs(this.near),e=Math.abs(this.far),h=this.zoom;return 0===i||0===t?this:(this.projection.ortho(h*-i/2,h*i/2,h*-t/2,h*t/2,o,e),s.copy(this.position).add(this.direction),this.view.lookAt(this.position,s,this.up),this.combined.copy(this.projection).multiply(this.view),this.invProjectionView.copy(this.combined).invert(),this.billboardMatrixDirty=!0,this.updateChildren(),this)},zoom:{get:function(){return this._zoom},set:function(i){this._zoom=i,this.update()}}});module.exports=e;
},{"./Camera":"q1RM","../../../src/utils/Class":"Q4x4","../../../src/math/Vector3":"E0QN"}],"xCoj":[function(require,module,exports) {
var i=require("./Camera"),t=require("../../../src/utils/Class"),e=require("../../../src/math/Vector3"),s=new e,h=new t({Extends:i,initialize:function(t,e,s,h){void 0===e&&(e=80),void 0===s&&(s=0),void 0===h&&(h=0),i.call(this,t),this.viewportWidth=s,this.viewportHeight=h,this.fieldOfView=e*Math.PI/180,this.update()},setFOV:function(i){return this.fieldOfView=i*Math.PI/180,this},update:function(){var i=this.viewportWidth/this.viewportHeight;return this.projection.perspective(this.fieldOfView,i,Math.abs(this.near),Math.abs(this.far)),s.copy(this.position).add(this.direction),this.view.lookAt(this.position,s,this.up),this.combined.copy(this.projection).multiply(this.view),this.invProjectionView.copy(this.combined).invert(),this.billboardMatrixDirty=!0,this.updateChildren(),this}});module.exports=h;
},{"./Camera":"q1RM","../../../src/utils/Class":"Q4x4","../../../src/math/Vector3":"E0QN"}],"zD8Q":[function(require,module,exports) {
var s=require("../../../src/utils/Class"),t=require("./OrthographicCamera"),e=require("./PerspectiveCamera"),i=require("../../../src/plugins/PluginCache"),r=new s({initialize:function(s){this.scene=s,this.systems=s.sys,this.cameras=[],s.sys.events.once("boot",this.boot,this),s.sys.events.on("start",this.start,this)},boot:function(){this.systems.events.once("destroy",this.destroy,this)},start:function(){var s=this.systems.events;s.on("update",this.update,this),s.once("shutdown",this.shutdown,this)},add:function(s,t,e){return this.addPerspectiveCamera(s,t,e)},addOrthographicCamera:function(s,e){var i=this.scene.sys.game.config;void 0===s&&(s=i.width),void 0===e&&(e=i.height);var r=new t(this.scene,s,e);return this.cameras.push(r),r},addPerspectiveCamera:function(s,t,i){var r=this.scene.sys.game.config;void 0===s&&(s=80),void 0===t&&(t=r.width),void 0===i&&(i=r.height);var a=new e(this.scene,s,t,i);return this.cameras.push(a),a},getCamera:function(s){for(var t=0;t<this.cameras.length;t++)if(this.cameras[t].name===s)return this.cameras[t];return null},removeCamera:function(s){var t=this.cameras.indexOf(s);-1!==t&&this.cameras.splice(t,1)},removeAll:function(){for(;this.cameras.length>0;){this.cameras.pop().destroy()}return this.main},update:function(s,t){for(var e=0,i=this.cameras.length;e<i;++e)this.cameras[e].update(s,t)},shutdown:function(){var s=this.systems.events;s.off("update",this.update,this),s.off("shutdown",this.shutdown,this),this.removeAll()},destroy:function(){this.shutdown(),this.scene.sys.events.off("start",this.start,this),this.scene=null,this.systems=null}});i.register("CameraManager3D",r,"cameras3d"),module.exports=r;
},{"../../../src/utils/Class":"Q4x4","./OrthographicCamera":"MYPQ","./PerspectiveCamera":"xCoj","../../../src/plugins/PluginCache":"vXV4"}],"uTCG":[function(require,module,exports) {
module.exports={Camera:require("./Camera"),CameraManager:require("./CameraManager"),OrthographicCamera:require("./OrthographicCamera"),PerspectiveCamera:require("./PerspectiveCamera")};
},{"./Camera":"q1RM","./CameraManager":"zD8Q","./OrthographicCamera":"MYPQ","./PerspectiveCamera":"xCoj"}],"Q3B0":[function(require,module,exports) {
var e=require("./Sprite3D"),t=require("../../../../src/gameobjects/GameObjectFactory");t.register("sprite3D",function(t,r,i,a,s){var c=new e(this.scene,t,r,i,a,s);return this.displayList.add(c.gameObject),this.updateList.add(c.gameObject),c});
},{"./Sprite3D":"aKpH","../../../../src/gameobjects/GameObjectFactory":"BKGz"}],"sLMB":[function(require,module,exports) {
var e=require("../../../../src/gameobjects/BuildGameObject"),r=require("../../../../src/gameobjects/BuildGameObjectAnimation"),i=require("../../../../src/gameobjects/GameObjectCreator"),t=require("../../../../src/utils/object/GetAdvancedValue"),c=require("./Sprite3D");i.register("sprite3D",function(i,a){void 0===i&&(i={});var s=t(i,"key",null),u=t(i,"frame",null),n=new c(this.scene,0,0,s,u);return void 0!==a&&(i.add=a),e(this.scene,n,i),r(n,i),n});
},{"../../../../src/gameobjects/BuildGameObject":"irpS","../../../../src/gameobjects/BuildGameObjectAnimation":"OsWu","../../../../src/gameobjects/GameObjectCreator":"eYSd","../../../../src/utils/object/GetAdvancedValue":"YJ2h","./Sprite3D":"aKpH"}],"Yefz":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];require("./polyfills");var r=require("./const"),i=require("./utils/object/Extend"),s={Actions:require("./actions"),Animations:require("./animations"),BlendModes:require("./renderer/BlendModes"),Cache:require("./cache"),Cameras:require("./cameras"),Core:require("./core"),Class:require("./utils/Class"),Create:require("./create"),Curves:require("./curves"),Data:require("./data"),Display:require("./display"),DOM:require("./dom"),Events:require("./events"),Game:require("./core/Game"),GameObjects:require("./gameobjects"),Geom:require("./geom"),Input:require("./input"),Loader:require("./loader"),Math:require("./math"),Physics:require("./physics"),Plugins:require("./plugins"),Renderer:require("./renderer"),Scale:require("./scale"),ScaleModes:require("./renderer/ScaleModes"),Scene:require("./scene/Scene"),Scenes:require("./scene"),Structs:require("./structs"),Textures:require("./textures"),Tilemaps:require("./tilemaps"),Time:require("./time"),Tweens:require("./tweens"),Utils:require("./utils")};s.Sound=require("./sound"),s.Cameras.Sprite3D=require("../plugins/camera3d/src"),s.GameObjects.Sprite3D=require("../plugins/camera3d/src/sprite3d/Sprite3D"),s.GameObjects.Factories.Sprite3D=require("../plugins/camera3d/src/sprite3d/Sprite3DFactory"),s.GameObjects.Creators.Sprite3D=require("../plugins/camera3d/src/sprite3d/Sprite3DCreator"),s.FacebookInstantGamesPlugin=require("../plugins/fbinstant/src/FacebookInstantGamesPlugin"),s=i(!1,s,r),module.exports=s,e.Phaser=s;
},{"./polyfills":"DHzS","./const":"ktri","./utils/object/Extend":"CtVZ","./actions":"ehJJ","./animations":"u6Tx","./renderer/BlendModes":"XeVZ","./cache":"KyqC","./cameras":"Swla","./core":"flTz","./utils/Class":"Q4x4","./create":"b5BM","./curves":"Qwkw","./data":"vtWA","./display":"EJqx","./dom":"rW5S","./events":"goTv","./core/Game":"b9L8","./gameobjects":"gIjX","./geom":"mWxN","./input":"hxcE","./loader":"DmST","./math":"N0aO","./physics":"hKLf","./plugins":"NYKE","./renderer":"tKoY","./scale":"UC2W","./renderer/ScaleModes":"boNA","./scene/Scene":"dryH","./scene":"bgBY","./structs":"F4W1","./textures":"xQEn","./tilemaps":"xEyR","./time":"ZwqS","./tweens":"ZZyT","./utils":"KuSL","./sound":"LufU","../plugins/camera3d/src":"uTCG","../plugins/camera3d/src/sprite3d/Sprite3D":"aKpH","../plugins/camera3d/src/sprite3d/Sprite3DFactory":"Q3B0","../plugins/camera3d/src/sprite3d/Sprite3DCreator":"sLMB","../plugins/fbinstant/src/FacebookInstantGamesPlugin":"UF5h"}],"t18c":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof e&&e.amd?e(n):(t=t||self).Mustache=n()}(this,function(){"use strict";var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function n(e){return"function"==typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"==typeof e&&t in e}var o=RegExp.prototype.test;var a=/\S/;function s(e){return!function(e,t){return o.call(e,t)}(a,e)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var u=/\s*/,p=/\s+/,l=/\s*=/,h=/\s*\}/,f=/#|\^|\/|>|\{|&|=|!/;function d(e){this.string=e,this.tail=e,this.pos=0}function v(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function g(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},d.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},v.prototype.push=function(e){return new v(e,this)},v.prototype.lookup=function(e){var t,r,o,a=this.cache;if(a.hasOwnProperty(e))t=a[e];else{for(var s,c,u,p=this,l=!1;p;){if(e.indexOf(".")>0)for(s=p.view,c=e.split("."),u=0;null!=s&&u<c.length;)u===c.length-1&&(l=i(s,c[u])||(r=s,o=c[u],null!=r&&"object"!=typeof r&&r.hasOwnProperty&&r.hasOwnProperty(o))),s=s[c[u++]];else s=p.view[e],l=i(p.view,e);if(l){t=s;break}p=p.parent}a[e]=t}return n(t)&&(t=t.call(this.view)),t},g.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},g.prototype.parse=function(e,n){var i=this.templateCache,o=e+":"+(n||y.tags).join(":"),a=void 0!==i,c=a?i.get(o):void 0;return null==c&&(c=function(e,n){if(!e)return[];var i,o,a,c=!1,v=[],g=[],w=[],m=!1,b=!1,k="",x=0;function C(){if(m&&!b)for(;w.length;)delete g[w.pop()];else w=[];m=!1,b=!1}function E(e){if("string"==typeof e&&(e=e.split(p,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);i=new RegExp(r(e[0])+"\\s*"),o=new RegExp("\\s*"+r(e[1])),a=new RegExp("\\s*"+r("}"+e[1]))}E(n||y.tags);for(var U,j,T,P,S,V,O=new d(e);!O.eos();){if(U=O.pos,T=O.scanUntil(i))for(var A=0,I=T.length;A<I;++A)s(P=T.charAt(A))?(w.push(g.length),k+=P):(b=!0,c=!0,k+=" "),g.push(["text",P,U,U+1]),U+=1,"\n"===P&&(C(),k="",x=0,c=!1);if(!O.scan(i))break;if(m=!0,j=O.scan(f)||"name",O.scan(u),"="===j?(T=O.scanUntil(l),O.scan(l),O.scanUntil(o)):"{"===j?(T=O.scanUntil(a),O.scan(h),O.scanUntil(o),j="&"):T=O.scanUntil(o),!O.scan(o))throw new Error("Unclosed tag at "+O.pos);if(S=">"==j?[j,T,U,O.pos,k,x,c]:[j,T,U,O.pos],x++,g.push(S),"#"===j||"^"===j)v.push(S);else if("/"===j){if(!(V=v.pop()))throw new Error('Unopened section "'+T+'" at '+U);if(V[1]!==T)throw new Error('Unclosed section "'+V[1]+'" at '+U)}else"name"===j||"{"===j||"&"===j?b=!0:"="===j&&E(T)}if(C(),V=v.pop())throw new Error('Unclosed section "'+V[1]+'" at '+O.pos);return function(e){for(var t,n=[],r=n,i=[],o=0,a=e.length;o<a;++o)switch((t=e[o])[0]){case"#":case"^":r.push(t),i.push(t),r=t[4]=[];break;case"/":i.pop()[5]=t[2],r=i.length>0?i[i.length-1][4]:n;break;default:r.push(t)}return n}(function(e){for(var t,n,r=[],i=0,o=e.length;i<o;++i)(t=e[i])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}(g))}(e,n),a&&i.set(o,c)),c},g.prototype.render=function(e,t,n,r){var i=this.parse(e,r),o=t instanceof v?t:new v(t,void 0);return this.renderTokens(i,o,n,e,r)},g.prototype.renderTokens=function(e,t,n,r,i){for(var o,a,s,c="",u=0,p=e.length;u<p;++u)s=void 0,"#"===(a=(o=e[u])[0])?s=this.renderSection(o,t,n,r):"^"===a?s=this.renderInverted(o,t,n,r):">"===a?s=this.renderPartial(o,t,n,i):"&"===a?s=this.unescapedValue(o,t):"name"===a?s=this.escapedValue(o,t):"text"===a&&(s=this.rawValue(o)),void 0!==s&&(c+=s);return c},g.prototype.renderSection=function(e,r,i,o){var a=this,s="",c=r.lookup(e[1]);if(c){if(t(c))for(var u=0,p=c.length;u<p;++u)s+=this.renderTokens(e[4],r.push(c[u]),i,o);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)s+=this.renderTokens(e[4],r.push(c),i,o);else if(n(c)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(c=c.call(r.view,o.slice(e[3],e[5]),function(e){return a.render(e,r,i)}))&&(s+=c)}else s+=this.renderTokens(e[4],r,i,o);return s}},g.prototype.renderInverted=function(e,n,r,i){var o=n.lookup(e[1]);if(!o||t(o)&&0===o.length)return this.renderTokens(e[4],n,r,i)},g.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),i=e.split("\n"),o=0;o<i.length;o++)i[o].length&&(o>0||!n)&&(i[o]=r+i[o]);return i.join("\n")},g.prototype.renderPartial=function(e,t,r,i){if(r){var o=n(r)?r(e[1]):r[e[1]];if(null!=o){var a=e[6],s=e[5],c=e[4],u=o;return 0==s&&c&&(u=this.indentPartial(o,c,a)),this.renderTokens(this.parse(u,i),t,r,u,i)}}},g.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},g.prototype.escapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return y.escape(n)},g.prototype.rawValue=function(e){return e[1]};var y={name:"mustache.js",version:"4.0.1",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){w.templateCache=e},get templateCache(){return w.templateCache}},w=new g;return y.clearCache=function(){return w.clearCache()},y.parse=function(e,t){return w.parse(e,t)},y.render=function(e,n,r,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(t(o=e)?"array":typeof o)+'" was given as the first argument for mustache#render(template, view, partials)');var o;return w.render(e,n,r,i)},y.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return c[e]})},y.Scanner=d,y.Context=v,y.Writer=g,y});
},{}],"DiEs":[function(require,module,exports) {
function t(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then}module.exports=t;
},{}],"vVLw":[function(require,module,exports) {
const t=require("is-promise"),e="function"==typeof Symbol?Symbol("--[[await-event-emitter]]--"):"--[[await-event-emitter]]--";function n(t){if("string"!=typeof t&&"symbol"!=typeof t)throw new TypeError("type is not type of string or symbol!")}function s(t){if("function"!=typeof t)throw new TypeError("fn is not type of Function!")}function i(t){return{[e]:"always",fn:t}}function o(t){return{[e]:"once",fn:t}}function r(){this._events={}}function p(t,e){return n(t),s(e),this._events[t]=this._events[t]||[],this._events[t].push(i(e)),this}function f(t,e){return n(t),s(e),this._events[t]=this._events[t]||[],this._events[t].unshift(i(e)),this}function h(t,e){return n(t),s(e),this._events[t]=this._events[t]||[],this._events[t].unshift(o(e)),this}function u(t){return(this._events[t]||[]).map(t=>t.fn)}function c(t,e){return n(t),s(e),this._events[t]=this._events[t]||[],this._events[t].push(o(e)),this}function y(t,e){n(t);const s=this.listeners(t);if("function"==typeof e){let n,i=!1;for(;(n=s.indexOf(e))>=0;)s.splice(n,1),this._events[t].splice(n,1),i=!0;return i}return delete this._events[t]}async function l(s,...i){n(s);const o=this.listeners(s),r=[];if(o&&o.length){for(let n=0;n<o.length;n++){const p=o[n],f=p.apply(this,i);t(f)&&await f,"once"===this._events[s][n][e]&&r.push(p)}return r.forEach(t=>this.removeListener(s,t)),!0}return!1}function v(t,...s){n(t);const i=this.listeners(t),o=[];if(i&&i.length){for(let n=0;n<i.length;n++){const r=i[n];r.apply(this,s),"once"===this._events[t][n][e]&&o.push(r)}return o.forEach(e=>this.removeListener(t,e)),!0}return!1}r.prototype.on=r.prototype.addListener=p,r.prototype.once=c,r.prototype.prependListener=f,r.prototype.prependOnceListener=h,r.prototype.off=r.prototype.removeListener=y,r.prototype.emit=l,r.prototype.emitSync=v,r.prototype.listeners=u,"undefined"!=typeof module&&(module.exports=r);
},{"is-promise":"DiEs"}],"tkxq":[function(require,module,exports) {
var e=require("await-event-emitter");module.exports=new e;
},{"await-event-emitter":"vVLw"}],"G94A":[function(require,module,exports) {
function n(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function e(n,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function r(n,r,o){return r&&e(n.prototype,r),o&&e(n,o),n}var o=function(){function e(){n(this,e)}return r(e,[{key:"error",value:function(n){throw new Error(n)}}]),e}();module.exports=new o;
},{}],"r7rn":[function(require,module,exports) {
function n(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function e(n,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function o(n,o,r){return o&&e(n.prototype,o),r&&e(n,r),n}var r=function(){function e(){n(this,e)}return o(e,[{key:"info",value:function(n){console.log("INFO -",n)}},{key:"error",value:function(n){console.log("ERROR -",n)}}]),e}();module.exports=new r;
},{}],"nQnG":[function(require,module,exports) {
module.exports={EventsManager:require("./lib/events-manager"),ErrorManager:require("./lib/error-manager"),Logger:require("./lib/logger")};
},{"./lib/events-manager":"tkxq","./lib/error-manager":"G94A","./lib/logger":"r7rn"}],"tl8K":[function(require,module,exports) {
"use strict";var e=a(require("@babel/runtime-corejs3/helpers/classCallCheck")),r=a(require("@babel/runtime-corejs3/helpers/createClass")),t=a(require("@babel/runtime-corejs3/helpers/possibleConstructorReturn")),i=a(require("@babel/runtime-corejs3/helpers/getPrototypeOf")),n=a(require("@babel/runtime-corejs3/helpers/inherits"));function a(e){return e&&e.__esModule?e:{default:e}}var u=require("phaser"),l=u.Game,s=require("mustache"),c=require("@reldens/utils"),o=c.EventsManager,h=function(a){function u(r){var n;return(0,e.default)(this,u),(n=(0,t.default)(this,(0,i.default)(u).call(this,r))).uiScene=!1,n.TemplateEngine=s,o.on("reldens.beforeReconnectGameClient",function(){n.clearTarget()}),n}return(0,n.default)(u,a),(0,r.default)(u,[{key:"parseTemplate",value:function(e,r,t,i){return this.TemplateEngine.render(e,r,t,i)}},{key:"showTarget",value:function(e){({}).hasOwnProperty.call(this.uiScene,"uiTarget")&&(this.uiScene.uiTarget.getChildByID("box-target").style.display="block",this.uiScene.uiTarget.getChildByID("target-container").innerHTML=e)}},{key:"clearTarget",value:function(){({}).hasOwnProperty.call(this.uiScene,"uiTarget")&&(this.uiScene.gameManager.activeRoomEvents.getActiveScene().player.currentTarget=!1,this.uiScene.uiTarget.getChildByID("box-target").style.display="none",this.uiScene.uiTarget.getChildByID("target-container").innerHTML="")}}]),u}(l);module.exports.GameEngine=h;
},{"@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@babel/runtime-corejs3/helpers/createClass":"bMeU","@babel/runtime-corejs3/helpers/possibleConstructorReturn":"yM8b","@babel/runtime-corejs3/helpers/getPrototypeOf":"ZyuO","@babel/runtime-corejs3/helpers/inherits":"DB6z","phaser":"Yefz","mustache":"t18c","@reldens/utils":"nQnG"}],"p7jN":[function(require,module,exports) {
var r=require("../internals/descriptors"),e=require("../internals/fails"),n=require("../internals/has"),t=Object.defineProperty,i={},u=function(r){throw r};module.exports=function(a,l){if(n(i,a))return i[a];l||(l={});var o=[][a],s=!!n(l,"ACCESSORS")&&l.ACCESSORS,f=n(l,0)?l[0]:u,c=n(l,1)?l[1]:void 0;return i[a]=!!o&&!e(function(){if(s&&!r)return!0;var e={length:-1};s?t(e,1,{enumerable:!0,get:u}):e[1]=1,o.call(e,f,c)})};
},{"../internals/descriptors":"E7QI","../internals/fails":"XSQS","../internals/has":"LNKr"}],"tlFj":[function(require,module,exports) {
"use strict";var r=require("../internals/export"),e=require("../internals/array-iteration").map,t=require("../internals/array-method-has-species-support"),a=require("../internals/array-method-uses-to-length"),i=t("map"),n=a("map");r({target:"Array",proto:!0,forced:!i||!n},{map:function(r){return e(this,r,arguments.length>1?arguments[1]:void 0)}});
},{"../internals/export":"qpO1","../internals/array-iteration":"DfAY","../internals/array-method-has-species-support":"fN92","../internals/array-method-uses-to-length":"p7jN"}],"BGWD":[function(require,module,exports) {
var r=require("../internals/path");module.exports=function(e){return r[e+"Prototype"]};
},{"../internals/path":"COdq"}],"sAwP":[function(require,module,exports) {
require("../../../modules/es.array.map");var r=require("../../../internals/entry-virtual");module.exports=r("Array").map;
},{"../../../modules/es.array.map":"tlFj","../../../internals/entry-virtual":"BGWD"}],"J3Gh":[function(require,module,exports) {
var r=require("../array/virtual/map"),a=Array.prototype;module.exports=function(e){var t=e.map;return e===a||e instanceof Array&&t===a.map?r:t};
},{"../array/virtual/map":"sAwP"}],"okLI":[function(require,module,exports) {
var e=require("../../es/instance/map");module.exports=e;
},{"../../es/instance/map":"J3Gh"}],"mE3f":[function(require,module,exports) {
module.exports=require("core-js-pure/stable/instance/map");
},{"core-js-pure/stable/instance/map":"okLI"}],"gIeR":[function(require,module,exports) {
module.exports.GameConst={START_GAME:"s",CHANGED_SCENE:"cs",RECONNECT:"r",ROOM_GAME:"room_game",SCENE_PRELOADER:"ScenePreloader",PLAYER_STATS:"ps",ICON_STATS:"player-stats",CLIENT_JOINED:"cj",UI:"ui",TYPE_PLAYER:"pj",GAME_OVER:"go",BUTTON_OPTION:"btn-opt",UP:"up",LEFT:"left",DOWN:"down",RIGHT:"right",STOP:"stop",ACTION:"action",BULLET:"attack-bullet",POINTER:"mp",ARROW_DOWN:"ard",COL_PLAYER:Math.pow(2,0),COL_ENEMY:Math.pow(2,1),COL_GROUND:Math.pow(2,2),FADE_DURATION:1e3,SPEED_SERVER:180,IMAGE_PLAYER:"player",ATTACK:"attack",HIT:"hit",DEATH:"death"};
},{}],"lw7A":[function(require,module,exports) {
"use strict";var e=r(require("@babel/runtime-corejs3/core-js-stable/object/keys")),i=r(require("@babel/runtime-corejs3/core-js-stable/instance/map")),t=r(require("@babel/runtime-corejs3/core-js-stable/object/assign")),a=r(require("@babel/runtime-corejs3/helpers/classCallCheck")),s=r(require("@babel/runtime-corejs3/helpers/createClass"));function r(e){return e&&e.__esModule?e:{default:e}}var n=require("@reldens/utils"),l=n.Logger,o=require("../../game/constants"),h=o.GameConst,u=function(){function r(e,i,t,s){(0,a.default)(this,r),this.scene=e,this.config=t.config,this.gameManager=t,this.username=i.username,this.roomName=i.state.scene,this.state=i.state,this.room=s,this.playerId=s.sessionId,this.players={},this.mov=!1,this.dir=!1,this.currentTarget=!1,this.animationBasedOnPress=this.config.get("client/players/animations/basedOnPress"),this.topOff=this.gameManager.config.get("client/players/size/topOffset"),this.leftOff=this.gameManager.config.get("client/players/size/leftOffset")}return(0,s.default)(r,[{key:"create",value:function(){var e=(0,t.default)({username:this.username},this.state);this.addPlayer(this.playerId,e);var a=this.config.get("client/players/animations/fadeDuration")||h.FADE_DURATION;this.scene.cameras.main.fadeFrom(a),this.scene.scene.setVisible(!0,this.roomName),this.scene.physics.world.setBounds(0,0,(0,i.default)(this.scene).widthInPixels,(0,i.default)(this.scene).heightInPixels),this.scene.cameras.main.setBounds(0,0,(0,i.default)(this.scene).widthInPixels,(0,i.default)(this.scene).heightInPixels),this.scene.cameras.main.startFollow(this.players[this.playerId],!0),this.players[this.playerId].setCollideWorldBounds(!0),this.createHealthBar()}},{key:"addPlayer",value:function(e,i){var t=this;return this.players[e]=this.scene.physics.add.sprite(i.x,i.y,h.IMAGE_PLAYER),this.players[e].username=i.username,this.players[e].anims.play(i.dir),this.players[e].anims.stop(),this.players[e].setInteractive({useHandCursor:!0}).on("pointerdown",function(i){if("CANVAS"!==i.downElement.nodeName)return!1;t.gameManager.gameEngine.showTarget(t.players[e].username),t.currentTarget={id:e,type:h.TYPE_PLAYER}}),this.players[e].moveSprites={},this.players[e]}},{key:"createHealthBar",value:function(){if(this.gameManager.config.get("client/ui/uiLifeBar/enabled")){var e=this.gameManager.getActiveScenePreloader();if(this.gameManager.config.get("client/ui/uiLifeBar/fixedPosition")||(e=this.gameManager.getActiveScene()),e.uiLifeBar)return;this.uiLifeBar=e.add.graphics(),this.redrawLifeBar()}}},{key:"redrawLifeBar",value:function(){if(this.uiLifeBar){var e=this.gameManager.config.get("client/ui/uiLifeBar/height"),i=this.gameManager.config.get("client/ui/uiLifeBar/width"),t=this.gameManager.config.initialStats.hp,a=this.gameManager.playerData.stats.hp*i/t,s=this.gameManager.config.get("client/ui/uiLifeBar/x"),r=this.gameManager.config.get("client/ui/uiLifeBar/y");if(!this.gameManager.config.get("client/ui/uiLifeBar/fixedPosition")){var n=this.gameManager.getCurrentPlayer().state;s=n.x-i/2,r=n.y-e-this.gameManager.config.get("client/players/size/height")/2}this.uiLifeBar.clear(),this.uiLifeBar.fillStyle(16711680,1),this.uiLifeBar.fillRect(s,r,a,e),this.uiLifeBar.lineStyle(1,16777215),this.uiLifeBar.strokeRect(s,r,i,e),this.uiLifeBar.alpha=.6,this.uiLifeBar.setDepth(1e5)}}},{key:"runPlayerAnimation",value:function(i,t){var a=this.players[i];if(a.anims||l.error("PlayerSprite animation not defined."),this.playPlayerAnimation(a,t),a.x=t.state.x-this.leftOff,a.y=t.state.y-this.topOff,a.setDepth(a.y+a.body.height),t.state.mov||(a.anims.stop(),a.mov=t.state.mov),this.gameManager.config.get("client/ui/uiLifeBar/enabled")&&this.redrawLifeBar(),(0,e.default)(a.moveSprites).length)for(var s=0,r=(0,e.default)(a.moveSprites);s<r.length;s++){var n=r[s],o=a.moveSprites[n];o.x=a.x,o.y=a.y}}},{key:"playPlayerAnimation",value:function(e,i){this.animationBasedOnPress?e.anims.play(i.state.dir,!0):(i.state.x!==e.x&&(i.state.x<e.x?e.anims.play(h.LEFT,!0):e.anims.play(h.RIGHT,!0)),i.state.y!==e.y&&(i.state.y<e.y?e.anims.play(h.UP,!0):e.anims.play(h.DOWN,!0)))}},{key:"removePlayer",value:function(e){this.players[e].destroy(),delete this.players[e]}},{key:"left",value:function(){this.room.send({dir:h.LEFT})}},{key:"right",value:function(){this.room.send({dir:h.RIGHT})}},{key:"up",value:function(){this.room.send({dir:h.UP})}},{key:"down",value:function(){this.room.send({dir:h.DOWN})}},{key:"stop",value:function(){this.room.send({act:h.STOP})}},{key:"runActions",value:function(){this.room.send({act:h.ACTION,target:this.currentTarget})}},{key:"moveToPointer",value:function(e){var i={act:h.POINTER,column:e.worldColumn,row:e.worldRow,x:e.worldX+this.leftOff,y:e.worldY+this.topOff};this.room.send(i)}}]),r}();module.exports.PlayerEngine=u;
},{"@babel/runtime-corejs3/core-js-stable/object/keys":"Jibu","@babel/runtime-corejs3/core-js-stable/instance/map":"mE3f","@babel/runtime-corejs3/core-js-stable/object/assign":"t1mS","@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@babel/runtime-corejs3/helpers/createClass":"bMeU","@reldens/utils":"nQnG","../../game/constants":"gIeR"}],"j6G8":[function(require,module,exports) {
"use strict";var n=require("../internals/fails");module.exports=function(r,t){var u=[][r];return!!u&&n(function(){u.call(null,t||function(){throw 1},1)})};
},{"../internals/fails":"XSQS"}],"Z1hg":[function(require,module,exports) {
"use strict";var e=require("../internals/export"),r=require("../internals/array-includes").indexOf,i=require("../internals/array-method-is-strict"),t=require("../internals/array-method-uses-to-length"),n=[].indexOf,a=!!n&&1/[1].indexOf(1,-0)<0,s=i("indexOf"),d=t("indexOf",{ACCESSORS:!0,1:0});e({target:"Array",proto:!0,forced:a||!s||!d},{indexOf:function(e){return a?n.apply(this,arguments)||0:r(this,e,arguments.length>1?arguments[1]:void 0)}});
},{"../internals/export":"qpO1","../internals/array-includes":"lYMG","../internals/array-method-is-strict":"j6G8","../internals/array-method-uses-to-length":"p7jN"}],"Z7tv":[function(require,module,exports) {
require("../../../modules/es.array.index-of");var r=require("../../../internals/entry-virtual");module.exports=r("Array").indexOf;
},{"../../../modules/es.array.index-of":"Z1hg","../../../internals/entry-virtual":"BGWD"}],"tuBI":[function(require,module,exports) {
var r=require("../array/virtual/index-of"),e=Array.prototype;module.exports=function(a){var n=a.indexOf;return a===e||a instanceof Array&&n===e.indexOf?r:n};
},{"../array/virtual/index-of":"Z7tv"}],"BV7T":[function(require,module,exports) {
var e=require("../../es/instance/index-of");module.exports=e;
},{"../../es/instance/index-of":"tuBI"}],"b0gU":[function(require,module,exports) {
module.exports=require("core-js-pure/stable/instance/index-of");
},{"core-js-pure/stable/instance/index-of":"BV7T"}],"ip9L":[function(require,module,exports) {
"use strict";var n=require("../internals/a-function"),t=require("../internals/is-object"),r=[].slice,e={},i=function(n,t,r){if(!(t in e)){for(var i=[],o=0;o<t;o++)i[o]="a["+o+"]";e[t]=Function("C,a","return new C("+i.join(",")+")")}return e[t](n,r)};module.exports=Function.bind||function(e){var o=n(this),a=r.call(arguments,1),c=function(){var n=a.concat(r.call(arguments));return this instanceof c?i(o,n.length,n):o.apply(e,n)};return t(o.prototype)&&(c.prototype=o.prototype),c};
},{"../internals/a-function":"CKzo","../internals/is-object":"LaSR"}],"IkNr":[function(require,module,exports) {
var n=require("../internals/export"),r=require("../internals/function-bind");n({target:"Function",proto:!0},{bind:r});
},{"../internals/export":"qpO1","../internals/function-bind":"ip9L"}],"uTK7":[function(require,module,exports) {
require("../../../modules/es.function.bind");var e=require("../../../internals/entry-virtual");module.exports=e("Function").bind;
},{"../../../modules/es.function.bind":"IkNr","../../../internals/entry-virtual":"BGWD"}],"lbPU":[function(require,module,exports) {
var n=require("../function/virtual/bind"),i=Function.prototype;module.exports=function(t){var o=t.bind;return t===i||t instanceof Function&&o===i.bind?n:o};
},{"../function/virtual/bind":"uTK7"}],"yMJd":[function(require,module,exports) {
var e=require("../../es/instance/bind");module.exports=e;
},{"../../es/instance/bind":"lbPU"}],"FPFX":[function(require,module,exports) {
module.exports=require("core-js-pure/stable/instance/bind");
},{"core-js-pure/stable/instance/bind":"yMJd"}],"dSkb":[function(require,module,exports) {

var e=require("../internals/export"),n=require("../internals/global"),t=require("../internals/engine-user-agent"),r=[].slice,i=/MSIE .\./.test(t),l=function(e){return function(n,t){var i=arguments.length>2,l=i?r.call(arguments,2):void 0;return e(i?function(){("function"==typeof n?n:Function(n)).apply(this,l)}:n,t)}};e({global:!0,bind:!0,forced:i},{setTimeout:l(n.setTimeout),setInterval:l(n.setInterval)});
},{"../internals/export":"qpO1","../internals/global":"akRO","../internals/engine-user-agent":"IVyy"}],"wQKO":[function(require,module,exports) {
require("../modules/web.timers");var e=require("../internals/path");module.exports=e.setTimeout;
},{"../modules/web.timers":"dSkb","../internals/path":"COdq"}],"CHT5":[function(require,module,exports) {
module.exports=require("core-js-pure/stable/set-timeout");
},{"core-js-pure/stable/set-timeout":"wQKO"}],"MMJB":[function(require,module,exports) {
"use strict";var r=require("../internals/to-integer"),e=require("../internals/require-object-coercible");module.exports="".repeat||function(t){var i=String(e(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(i+=i))1&o&&(n+=i);return n};
},{"../internals/to-integer":"nLes","../internals/require-object-coercible":"NaQW"}],"djKL":[function(require,module,exports) {
var r=require("../internals/export"),e=require("../internals/string-repeat");r({target:"String",proto:!0},{repeat:e});
},{"../internals/export":"qpO1","../internals/string-repeat":"MMJB"}],"fkZj":[function(require,module,exports) {
require("../../../modules/es.string.repeat");var e=require("../../../internals/entry-virtual");module.exports=e("String").repeat;
},{"../../../modules/es.string.repeat":"djKL","../../../internals/entry-virtual":"BGWD"}],"LXjH":[function(require,module,exports) {
var r=require("../string/virtual/repeat"),t=String.prototype;module.exports=function(e){var n=e.repeat;return"string"==typeof e||e===t||e instanceof String&&n===t.repeat?r:n};
},{"../string/virtual/repeat":"fkZj"}],"NlAN":[function(require,module,exports) {
var e=require("../../es/instance/repeat");module.exports=e;
},{"../../es/instance/repeat":"LXjH"}],"duBw":[function(require,module,exports) {
module.exports=require("core-js-pure/stable/instance/repeat");
},{"core-js-pure/stable/instance/repeat":"NlAN"}],"iSc6":[function(require,module,exports) {
"use strict";var e=n(require("@babel/runtime-corejs3/core-js-stable/instance/bind")),t=n(require("@babel/runtime-corejs3/core-js-stable/set-timeout")),r=n(require("@babel/runtime-corejs3/core-js-stable/instance/repeat")),i=n(require("@babel/runtime-corejs3/core-js/get-iterator")),a=n(require("@babel/runtime-corejs3/core-js-stable/object/keys")),s=n(require("@babel/runtime-corejs3/helpers/classCallCheck")),l=n(require("@babel/runtime-corejs3/helpers/createClass"));function n(e){return e&&e.__esModule?e:{default:e}}var u=function(){function n(){(0,s.default)(this,n)}return(0,l.default)(n,[{key:"register",value:function(e,t){this.animations=[],this.registered={},this.layer=null,this.layer=e;for(var r=0,i=0,s=(0,a.default)(t);i<s.length;i++){var l=s[i],n=t[l];n.id=r++,n.init=l,this.animations.push(n)}}},{key:"start",value:function(){var e=!0,t=!1,a=void 0;try{for(var s,l=(0,i.default)(this.animations);!(e=(s=l.next()).done);e=!0){var n,u=s.value;(0,r.default)(n=this).call(n,u.id,u.animation,u.init,0)}}catch(o){t=!0,a=o}finally{try{e||null==l.return||l.return()}finally{if(t)throw a}}}},{key:"repeat",value:function(i,a,s,l){var n;this.registered[i]&&(this.registered[i]=null),this.layer.replaceByIndex(s,a[l].tileid+1);var u=a.length,o=a[l].duration,c=(l+1)%u,d=a[l%u].tileid+1;this.registered[i]=(0,t.default)((0,e.default)(n=(0,r.default)(this)).call(n,this,i,a,d,c),o)}},{key:"destroy",value:function(){for(var e=0,t=(0,a.default)(this.registered);e<t.length;e++){var r=t[e];this.registered[r]&&clearTimeout(this.registered[r])}}}]),n}();module.exports.TilesetAnimation=u;
},{"@babel/runtime-corejs3/core-js-stable/instance/bind":"FPFX","@babel/runtime-corejs3/core-js-stable/set-timeout":"CHT5","@babel/runtime-corejs3/core-js-stable/instance/repeat":"duBw","@babel/runtime-corejs3/core-js/get-iterator":"dtXd","@babel/runtime-corejs3/core-js-stable/object/keys":"Jibu","@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@babel/runtime-corejs3/helpers/createClass":"bMeU"}],"Mpt2":[function(require,module,exports) {
"use strict";var e=h(require("@babel/runtime-corejs3/core-js/get-iterator")),t=h(require("@babel/runtime-corejs3/core-js-stable/instance/index-of")),i=h(require("@babel/runtime-corejs3/core-js-stable/object/keys")),a=h(require("@babel/runtime-corejs3/core-js-stable/instance/map")),r=h(require("@babel/runtime-corejs3/helpers/classCallCheck")),n=h(require("@babel/runtime-corejs3/helpers/createClass")),s=h(require("@babel/runtime-corejs3/helpers/possibleConstructorReturn")),o=h(require("@babel/runtime-corejs3/helpers/getPrototypeOf")),l=h(require("@babel/runtime-corejs3/helpers/inherits"));function h(e){return e&&e.__esModule?e:{default:e}}var u=require("phaser"),c=u.Scene,d=u.Input,y=require("./tileset-animation"),m=y.TilesetAnimation,p=require("@reldens/utils"),f=p.EventsManager,g=require("../../game/constants"),b=g.GameConst,k=function(h){function u(e,t,i){var a;return(0,r.default)(this,u),(a=(0,s.default)(this,(0,o.default)(u).call(this,{key:e}))).key=e,a.params=t,a.gameManager=i,a.configManager=i.config,a.layers={},a.transition=!0,a.useTsAnimation=!1,a.arrowSprite=!1,a.objectsAnimationsData=!1,a.objectsAnimations={},a.configuredFrameRate=a.gameManager.config.get("client/general/animations/frameRate")||10,a}return(0,l.default)(u,h),(0,n.default)(u,[{key:"init",value:function(){this.scene.setVisible(!1,this.key),this.input.keyboard.removeAllListeners()}},{key:"create",value:function(){var e=this;f.emit("reldens.beforeSceneDynamicCreate",this),this.keyLeft=this.input.keyboard.addKey(d.Keyboard.KeyCodes.LEFT),this.keyRight=this.input.keyboard.addKey(d.Keyboard.KeyCodes.RIGHT),this.keyUp=this.input.keyboard.addKey(d.Keyboard.KeyCodes.UP),this.keyDown=this.input.keyboard.addKey(d.Keyboard.KeyCodes.DOWN),this.input.keyboard.on("keydown",function(t){32===t.keyCode&&"input"!==document.activeElement.tagName.toLowerCase()&&e.player.runActions(),27===t.keyCode&&e.gameManager.gameEngine.clearTarget()}),this.map=this.add.tilemap(this.params.roomMap),this.input.on("pointerdown",function(t,i){i.length||(e.appendRowAndColumn(t),e.player.moveToPointer(t),e.updatePointerObject(t))}),this.useTsAnimation=this.hasTsAnimation(),this.tileset=(0,a.default)(this).addTilesetImage(this.params.roomMap),this.registerLayers();for(var r=0,n=(0,i.default)(this.layers);r<n.length;r++){var s,o=n[r],l=this.layers[o];-1!==(0,t.default)(s=l.layer.name).call(s,"animations")&&this.registerTilesetAnimation(l)}this.cameras.main.on("camerafadeincomplete",function(){e.transition=!1,e.gameManager.isChangingScene=!1,e.input.keyboard.on("keyup",function(t){t.keyCode>=37&&t.keyCode<=40&&e.player.stop()})}),f.emit("reldens.afterSceneDynamicCreate",this)}},{key:"update",value:function(e,t){!1!==this.transition||this.gameManager.isChangingScene||(this.keyLeft.isDown?this.player.left():this.keyRight.isDown&&this.player.right(),this.keyUp.isDown?this.player.up():this.keyDown.isDown&&this.player.down())}},{key:"changeScene",value:function(){this.objectsAnimations={},this.objectsAnimationsData=!1,this.useTsAnimation&&this.tilesetAnimation.destroy()}},{key:"hasTsAnimation",value:function(){var i=!1,r=!0,n=!1,s=void 0;try{for(var o,l=(0,e.default)((0,a.default)(this).layers);!(r=(o=l.next()).done);r=!0){var h,u=o.value;if(-1!==(0,t.default)(h=u.name).call(h,"animations")){i=!0;break}}}catch(c){n=!0,s=c}finally{try{r||null==l.return||l.return()}finally{if(n)throw s}}return i}},{key:"registerLayers",value:function(){var i=0,r=!0,n=!1,s=void 0;try{for(var o,l=(0,e.default)((0,a.default)(this).layers);!(r=(o=l.next()).done);r=!0){var h=o.value,u=this.configManager.get("client/general/tileData/margin"),c=this.configManager.get("client/general/tileData/spacing"),d=h.name;this.useTsAnimation?this.layers[i]=(0,a.default)(this).createDynamicLayer(d,this.tileset,u,c):this.layers[i]=(0,a.default)(this).createStaticLayer(d,this.tileset,u,c),-1!==(0,t.default)(d).call(d,"below-player")&&this.layers[i].setDepth(this.configManager.get("client/map/layersDepth/belowPlayer")),-1!==(0,t.default)(d).call(d,"over-player")&&this.layers[i].setDepth(i*(0,a.default)(this).height*(0,a.default)(this).tileHeight),-1!==(0,t.default)(d).call(d,"change-points")&&this.layers[i].setDepth(this.configManager.get("client/map/layersDepth/changePoints")),i++}}catch(y){n=!0,s=y}finally{try{r||null==l.return||l.return()}finally{if(n)throw s}}}},{key:"registerTilesetAnimation",value:function(e){this.tilesetAnimation=new m,this.tilesetAnimation.register(e,this.tileset.tileData),this.tilesetAnimation.start()}},{key:"appendRowAndColumn",value:function(e){var t=(0,a.default)(this).tileWidth,i=(0,a.default)(this).tileHeight,r=Math.round(e.worldX/t),n=Math.round(e.worldY/i);e.worldColumn=r,e.worldRow=n}},{key:"updatePointerObject",value:function(e){var t=this;this.configManager.get("client/ui/pointer/show")&&(this.arrowSprite&&this.arrowSprite.destroy(),this.arrowSprite=this.physics.add.sprite(e.worldX,e.worldY,b.ARROW_DOWN),this.arrowSprite.setDepth(2e6),this.arrowSprite.anims.play(b.ARROW_DOWN,!0).on("animationcomplete",function(){t.arrowSprite.destroy()}))}}]),u}(c);module.exports.SceneDynamic=k;
},{"@babel/runtime-corejs3/core-js/get-iterator":"dtXd","@babel/runtime-corejs3/core-js-stable/instance/index-of":"b0gU","@babel/runtime-corejs3/core-js-stable/object/keys":"Jibu","@babel/runtime-corejs3/core-js-stable/instance/map":"mE3f","@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@babel/runtime-corejs3/helpers/createClass":"bMeU","@babel/runtime-corejs3/helpers/possibleConstructorReturn":"yM8b","@babel/runtime-corejs3/helpers/getPrototypeOf":"ZyuO","@babel/runtime-corejs3/helpers/inherits":"DB6z","phaser":"Yefz","./tileset-animation":"iSc6","@reldens/utils":"nQnG","../../game/constants":"gIeR"}],"lQgA":[function(require,module,exports) {
module.exports="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff";
},{}],"a0v0":[function(require,module,exports) {
var e=require("../internals/require-object-coercible"),r=require("../internals/whitespaces"),t="["+r+"]",n=RegExp("^"+t+t+"*"),i=RegExp(t+t+"*$"),a=function(r){return function(t){var a=String(e(t));return 1&r&&(a=a.replace(n,"")),2&r&&(a=a.replace(i,"")),a}};module.exports={start:a(1),end:a(2),trim:a(3)};
},{"../internals/require-object-coercible":"NaQW","../internals/whitespaces":"lQgA"}],"waFN":[function(require,module,exports) {

var r=require("../internals/global"),e=require("../internals/string-trim").trim,t=require("../internals/whitespaces"),i=r.parseInt,n=/^[+-]?0[Xx]/,s=8!==i(t+"08")||22!==i(t+"0x16");module.exports=s?function(r,t){var s=e(String(r));return i(s,t>>>0||(n.test(s)?16:10))}:i;
},{"../internals/global":"akRO","../internals/string-trim":"a0v0","../internals/whitespaces":"lQgA"}],"cMBk":[function(require,module,exports) {
var r=require("../internals/export"),e=require("../internals/number-parse-int");r({global:!0,forced:parseInt!=e},{parseInt:e});
},{"../internals/export":"qpO1","../internals/number-parse-int":"waFN"}],"AD9S":[function(require,module,exports) {
require("../modules/es.parse-int");var e=require("../internals/path");module.exports=e.parseInt;
},{"../modules/es.parse-int":"cMBk","../internals/path":"COdq"}],"UXJ4":[function(require,module,exports) {
var e=require("../es/parse-int");module.exports=e;
},{"../es/parse-int":"AD9S"}],"ovQ7":[function(require,module,exports) {
module.exports=require("core-js-pure/stable/parse-int");
},{"core-js-pure/stable/parse-int":"UXJ4"}],"rgt5":[function(require,module,exports) {
"use strict";var e=g(require("@babel/runtime-corejs3/core-js-stable/parse-int")),t=g(require("@babel/runtime-corejs3/core-js-stable/set-timeout")),a=g(require("@babel/runtime-corejs3/core-js-stable/instance/repeat")),i=g(require("@babel/runtime-corejs3/core-js/get-iterator")),s=g(require("@babel/runtime-corejs3/core-js-stable/instance/map")),r=g(require("@babel/runtime-corejs3/helpers/classCallCheck")),n=g(require("@babel/runtime-corejs3/helpers/createClass")),o=g(require("@babel/runtime-corejs3/helpers/possibleConstructorReturn")),l=g(require("@babel/runtime-corejs3/helpers/getPrototypeOf")),h=g(require("@babel/runtime-corejs3/helpers/inherits"));function g(e){return e&&e.__esModule?e:{default:e}}var c=require("phaser"),d=c.Scene,u=c.Geom,m=require("@reldens/utils"),p=m.Logger,f=m.EventsManager,y=require("../constants"),v=y.GameConst,T=function(g){function c(e){var t;return(0,r.default)(this,c),(t=(0,o.default)(this,(0,l.default)(c).call(this,{key:e.name}))).holdTimer=null,t.progressBar=null,t.progressCompleteRect=null,t.progressRect=null,t.objectsUi={},t.userInterfaces={},t.preloaderName=e.name,t.preloadMapKey=(0,s.default)(e),t.preloadImages=e.images,t.uiScene=e.uiScene,t.gameManager=e.gameManager,t.preloadAssets=e.preloadAssets,t.gameManager.activeRoomEvents.getActiveScene().objectsAnimationsData=e.objectsAnimationsData,t}return(0,h.default)(c,g),(0,n.default)(c,[{key:"preload",value:function(){var e=this.uiScene?this:this.gameManager.gameEngine.uiScene;if(f.emit("reldens.beforePreload",this,e),this.uiScene&&(f.emit("reldens.beforePreloadUiScene",this),this.gameManager.config.get("client/ui/playerName/enabled")&&this.load.html("uiPlayer","assets/html/ui-player.html"),this.gameManager.config.get("client/ui/controls/enabled")&&this.load.html("uiControls","assets/html/ui-controls.html"),this.gameManager.config.get("client/ui/sceneLabel/enabled")&&this.load.html("uiSceneLabel","assets/html/ui-scene-label.html"),this.gameManager.config.get("client/ui/playerStats/enabled")&&(this.load.html("uiPlayerStats","assets/html/ui-player-stats.html"),this.load.html("playerStats","assets/html/player-stats.html")),this.load.html("uiTarget","assets/html/ui-target.html"),this.load.html("uiOptionButton","assets/html/ui-option-button.html"),this.load.html("uiOptionIcon","assets/html/ui-option-icon.html"),this.load.html("uiOptionsContainer","assets/html/ui-options-container.html"),f.emit("reldens.preloadUiScene",this)),this.preloadMapKey&&this.load.tilemapTiledJSON(this.preloadMapKey,"assets/maps/".concat(this.preloadMapKey,".json")),this.preloadImages){var t={frameWidth:this.gameManager.config.get("client/general/tileData/width")||16,frameHeight:this.gameManager.config.get("client/general/tileData/height")||16,margin:this.gameManager.config.get("client/general/tileData/margin")||1,spacing:this.gameManager.config.get("client/general/tileData/spacing")||2},a=this.preloadImages.split(","),s=!0,r=!1,n=void 0;try{for(var o,l=(0,i.default)(a);!(s=(o=l.next()).done);s=!0){var h=o.value,g="assets/maps/".concat(h,".png");this.load.spritesheet(h,g,t)}}catch(S){r=!0,n=S}finally{try{s||null==l.return||l.return()}finally{if(r)throw n}}}if(this.preloadAssets){var c=!0,d=!1,u=void 0;try{for(var m,y=(0,i.default)(this.preloadAssets);!(c=(m=y.next()).done);c=!0){var T=m.value;if("spritesheet"===T.asset_type){var b="assets/custom/sprites/".concat(T.file_1,".png"),C=!!T.extra_params&&JSON.parse(T.extra_params);C?this.load.spritesheet(T.asset_key,b,C):p.error(["Missing spritesheet params:",T])}}}catch(S){d=!0,u=S}finally{try{c||null==y.return||y.return()}finally{if(d)throw u}}}var M={frameWidth:this.gameManager.config.get("client/players/size/width")||52,frameHeight:this.gameManager.config.get("client/players/size/height")||71};if(this.load.spritesheet(v.IMAGE_PLAYER,"assets/sprites/player-1.png",M),this.load.spritesheet(v.ATTACK,"assets/sprites/weapons-1.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet(v.HIT,"assets/sprites/impact-1.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet(v.DEATH,"assets/sprites/object-1.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet(v.BULLET,"assets/sprites/earth-1.png",{frameWidth:64,frameHeight:64}),this.gameManager.config.get("client/ui/pointer/show")){this.load.spritesheet(v.ARROW_DOWN,"assets/sprites/arrow-w-down.png",{frameWidth:32,frameHeight:32})}this.load.image(v.ICON_STATS,"assets/icons/book.png"),this.load.on("fileprogress",this.onFileProgress,this),this.load.on("progress",this.onLoadProgress,this),this.load.on("complete",this.onLoadComplete,this),this.configuredFrameRate=this.gameManager.config.get("client/general/animations/frameRate")||10,this.createProgressBar()}},{key:"create",value:function(){var e=this,t=this.uiScene?this:this.gameManager.gameEngine.uiScene;if(f.emit("reldens.createPreload",this,t),this.uiScene){f.emit("reldens.beforeCreateUiScene",this);var a=this.getUiConfig("playerName");if(a.enabled)this.uiPlayer=this.add.dom(a.uiX,a.uiY).createFromCache("uiPlayer"),this.uiPlayer.getChildByProperty("id","logout").addEventListener("click",function(){window.location.reload()});var i=this.getUiConfig("uiTarget");if(i.enabled)this.uiTarget=this.add.dom(i.uiX,i.uiY).createFromCache("uiTarget"),this.uiTarget.getChildByProperty("className","close-target").addEventListener("click",function(){e.gameManager.gameEngine.clearTarget()});var s=this.getUiConfig("sceneLabel");s.enabled&&(this.uiSceneLabel=this.add.dom(s.uiX,s.uiY).createFromCache("uiSceneLabel"));var r=this.getUiConfig("controls");r.enabled&&(this.uiControls=this.add.dom(r.uiX,r.uiY).createFromCache("uiControls"),this.registerControllers(this.uiControls));var n=this.getUiConfig("playerStats");if(n.enabled){this.uiPlayerStats=this.add.dom(n.uiX,n.uiY).createFromCache("uiPlayerStats");var o=this.uiPlayerStats.getChildByProperty("id","player-stats-close"),l=this.uiPlayerStats.getChildByProperty("id","player-stats-open");o&&l&&(o.addEventListener("click",function(){e.uiPlayerStats.getChildByProperty("id","player-stats-ui").style.display="none",l.style.display="block",e.uiPlayerStats.setDepth(1)}),l.addEventListener("click",function(){e.uiPlayerStats.getChildByProperty("id","player-stats-ui").style.display="block",l.style.display="none",e.uiPlayerStats.setDepth(4)}));var h=this.uiPlayerStats.getChildByProperty("id","player-stats-container"),g=this.cache.html.get("playerStats");h.innerHTML=this.gameManager.gameEngine.parseTemplate(g,{stats:this.gameManager.playerData.stats})}f.emit("reldens.createUiScene",this)}this.createPlayerAnimations()}},{key:"getUiConfig",value:function(e){return{enabled:this.gameManager.config.get("client/ui/"+e+"/enabled"),uiX:this.gameManager.config.get("client/ui/"+e+"/x"),uiY:this.gameManager.config.get("client/ui/"+e+"/y")}}},{key:"createPlayerAnimations",value:function(){var e=[{k:v.LEFT,img:v.IMAGE_PLAYER,start:3,end:5,repeat:-1,hide:!1},{k:v.RIGHT,img:v.IMAGE_PLAYER,start:6,end:8,repeat:-1,hide:!1},{k:v.UP,img:v.IMAGE_PLAYER,start:9,end:11,repeat:-1,hide:!1},{k:v.DOWN,img:v.IMAGE_PLAYER,start:0,end:2,repeat:-1,hide:!1},{k:v.ATTACK,img:v.ATTACK,start:25,end:29,repeat:0},{k:v.HIT,img:v.HIT,start:17,end:19,repeat:0},{k:v.DEATH,img:v.DEATH,start:10,end:11,repeat:0,rate:1},{k:v.BULLET,img:v.BULLET,start:1,end:2,repeat:-1,rate:1}];if(this.gameManager.config.get("client/ui/pointer/show")){var t={k:v.ARROW_DOWN,img:v.ARROW_DOWN,start:1,end:4,repeat:3,rate:6};e.push(t)}for(var i=0,s=e;i<s.length;i++){var r=s[i];this.anims.create({key:r.k,frames:this.anims.generateFrameNumbers(r.img,{start:r.start,end:r.end}),frameRate:{}.hasOwnProperty.call(r,"rate")?r.rate:this.configuredFrameRate,repeat:(0,a.default)(r),hideOnComplete:!{}.hasOwnProperty.call(r,"hide")||r.hide})}}},{key:"registerControllers",value:function(e){this.setupDirButtonInBox(v.UP,e),this.setupDirButtonInBox(v.DOWN,e),this.setupDirButtonInBox(v.LEFT,e),this.setupDirButtonInBox(v.RIGHT,e),this.setupActionButtonInBox(v.ACTION,e),this.setupActionButtonInBox(v.BULLET,e)}},{key:"setupDirButtonInBox",value:function(e,t){var a=t.getChildByProperty("id",e);a&&this.hold(a,{dir:e})}},{key:"setupActionButtonInBox",value:function(e,t){var a=this,i=t.getChildByProperty("id",e);i&&(this.gameManager.config.get("client/general/controls/action_button_hold")?this.hold(i,e):i.addEventListener("click",function(){var t=a.gameManager.activeRoomEvents.getActiveScene(),i={act:v.ACTION,target:t.player.currentTarget,type:e};a.gameManager.activeRoomEvents.room.send(i)}))}},{key:"hold",value:function(e,t){var a=this;e.addEventListener("mousedown",function(i){a.startHold(i,e,t)}),e.addEventListener("mouseup",function(t){a.endHold(t,e)}),e.addEventListener("mouseout",function(t){a.endHold(t,e)}),e.addEventListener("touchstart",function(i){a.startHold(i,e,t)}),e.addEventListener("touchend",function(t){a.endHold(t,e)})}},{key:"startHold",value:function(e,t,a){e.preventDefault(),t.style.opacity="1";var i=this.gameManager.activeRoomEvents.getActiveScene(),s=a;({}).hasOwnProperty.call(a,"dir")||(s={act:a,target:i.player.currentTarget,type:v.ACTION}),this.repeatHold(s)}},{key:"endHold",value:function(e,t){e.preventDefault(),t.style.opacity="0.8",clearTimeout(this.holdTimer),this.gameManager.activeRoomEvents.room.send({act:v.STOP})}},{key:"repeatHold",value:function(e){var a=this;this.gameManager.activeRoomEvents.room.send(e),this.holdTimer=(0,t.default)(function(){a.repeatHold(e)},this.timeout||0)}},{key:"createProgressBar",value:function(){var e=u.Rectangle,t=e.Clone(this.cameras.main);this.progressRect=new e(0,0,t.width/2,50),e.CenterOn(this.progressRect,t.centerX,t.centerY),this.progressCompleteRect=u.Rectangle.Clone(this.progressRect),this.progressBar=this.add.graphics();var a=this.cameras.main.width,i=this.cameras.main.height,s=this.gameManager.config.get("client/ui/loading/font"),r=this.gameManager.config.get("client/ui/loading/fontSize"),n=this.gameManager.config.get("client/ui/loading/assetsSize");this.loadingText=this.add.text(a/2,i/2-50,"Loading...",{fontFamily:s,fontSize:r}),this.loadingText.setOrigin(.5,.5),this.loadingText.setFill(this.gameManager.config.get("client/ui/loading/loadingColor")),this.percentText=this.add.text(a/2,i/2-5,"0%",{fontFamily:s,fontSize:n}),this.percentText.setOrigin(.5,.5),this.percentText.setFill(this.gameManager.config.get("client/ui/loading/percentColor")),this.assetText=this.add.text(a/2,i/2+50,"",{fontFamily:s,fontSize:n}),this.assetText.setFill(this.gameManager.config.get("client/ui/loading/assetsColor")),this.assetText.setOrigin(.5,.5)}},{key:"onLoadComplete",value:function(){var e=!0,t=!1,a=void 0;try{for(var s,r=(0,i.default)(this.children.list);!(e=(s=r.next()).done);e=!0){s.value.destroy()}}catch(n){t=!0,a=n}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}this.loadingText.destroy(),this.assetText.destroy(),this.percentText.destroy(),this.scene.shutdown()}},{key:"onFileProgress",value:function(e){this.gameManager.config.get("client/ui/loading/showAssets")&&this.assetText.setText("Loading asset: "+e.key)}},{key:"onLoadProgress",value:function(t){var a=(0,e.default)(100*t)+"%";this.percentText.setText(a);this.progressRect.width=t*this.progressCompleteRect.width,this.progressBar.clear().fillStyle(2236962).fillRectShape(this.progressCompleteRect).fillStyle(16777215).fillRectShape(this.progressRect)}}]),c}(d);module.exports.ScenePreloader=T;
},{"@babel/runtime-corejs3/core-js-stable/parse-int":"ovQ7","@babel/runtime-corejs3/core-js-stable/set-timeout":"CHT5","@babel/runtime-corejs3/core-js-stable/instance/repeat":"duBw","@babel/runtime-corejs3/core-js/get-iterator":"dtXd","@babel/runtime-corejs3/core-js-stable/instance/map":"mE3f","@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@babel/runtime-corejs3/helpers/createClass":"bMeU","@babel/runtime-corejs3/helpers/possibleConstructorReturn":"yM8b","@babel/runtime-corejs3/helpers/getPrototypeOf":"ZyuO","@babel/runtime-corejs3/helpers/inherits":"DB6z","phaser":"Yefz","@reldens/utils":"nQnG","../constants":"gIeR"}],"h1Dt":[function(require,module,exports) {
"use strict";var e=n(require("@babel/runtime-corejs3/core-js-stable/object/keys")),a=n(require("@babel/runtime-corejs3/helpers/classCallCheck")),t=n(require("@babel/runtime-corejs3/helpers/createClass"));function n(e){return e&&e.__esModule?e:{default:e}}var s=require("../../users/client/player-engine"),i=s.PlayerEngine,r=require("./scene-dynamic"),o=r.SceneDynamic,c=require("./scene-preloader"),l=c.ScenePreloader,m=require("../constants"),g=m.GameConst,h=require("@reldens/utils"),y=h.EventsManager,d=function(){function n(e,t){(0,a.default)(this,n),this.room=!1,this.sceneData=!1,this.scenePreloader=!1,this.playersQueue={},this.gameManager=t,this.gameEngine=t.gameEngine,this.roomName=e,this.objectsUi={}}return(0,t.default)(n,[{key:"activateRoom",value:function(e){var a=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];y.emit("reldens.activateRoom",e,this.gameManager),this.room=e,this.room.state.players.onAdd=function(e,n){!a.room.state||a.sceneData&&a.room.state===a.sceneData||a.prepareScene(),a.playersOnAdd(e,n,t)},this.room.state.players.onChange=function(e,t){a.playersOnChange(e,t)},this.room.state.players.onRemove=function(e,t){a.playersOnRemove(e,t)},this.room.onMessage(function(e){a.roomOnMessage(e)}),this.room.onLeave(function(e){a.roomOnLeave(e)})}},{key:"playersOnAdd",value:function(a,t,n){if(y.emit("reldens.playersOnAdd",a,t,n,this),t===this.room.sessionId){this.engineStarted=!0,this.startEngineScene(a,this.room,n);var s=this.getActiveScene();if(s.key===a.state.scene&&s.player&&s.player.players)for(var i=0,r=(0,e.default)(this.playersQueue);i<r.length;i++){var o=r[i],c=this.playersQueue[o],l=c.x,m=c.y,g=c.dir,h=c.username;s.player.addPlayer(o,{x:l,y:m,dir:g,username:h})}}else if(this.engineStarted){var d=this.getActiveScene();if(d.key===a.state.scene&&d.player&&d.player.players){var u=a.state,p=u.x,v=u.y,f=u.dir;d.player.addPlayer(t,{x:p,y:v,dir:f,username:a.username})}}else{var S=a.state,E=S.x,P=S.y,A=S.dir;this.playersQueue[t]={x:E,y:P,dir:A,username:a.username}}}},{key:"prepareScene",value:function(){if(this.sceneData=JSON.parse(this.room.state.sceneData),!this.gameEngine.scene.getScene(this.roomName)){var e=this.createSceneInstance(this.roomName,this.sceneData,this.gameManager);this.gameEngine.scene.add(this.roomName,e,!1)}}},{key:"playersOnChange",value:function(e,a){if(e.state.scene===this.roomName){var t=this.getActiveScene();t.player&&{}.hasOwnProperty.call(t.player.players,a)&&t.player.runPlayerAnimation(a,e)}}},{key:"playersOnRemove",value:function(e,a){if(y.emit("reldens.playersOnRemove",e,a,this),a===this.room.sessionId)this.gameManager.gameOver||alert("Your session ended, please login again."),window.location.reload();else{var t=this.getActiveScene();t.player&&{}.hasOwnProperty.call(t.player.players,a)&&t.player.removePlayer(a)}}},{key:"roomOnMessage",value:function(e){if(e.act===g.GAME_OVER&&(y.emit("reldens.gameOver",e,this),this.gameManager.gameOver=!0,alert("You died!")),e.act===g.CHANGED_SCENE&&e.scene===this.room.name&&this.room.sessionId!==e.id){y.emit("reldens.changedScene",e,this);var a=this.getActiveScene(),t=e.id,n=e.x,s=e.y,i=e.dir,r=e.username,o=this.gameManager.config.get("client/players/size/topOffset"),c=this.gameManager.config.get("client/players/size/leftOffset");a.player.addPlayer(t,{x:n-c,y:s-o,dir:i,username:r})}if(e.act===g.RECONNECT&&(y.emit("reldens.beforeReconnectGameClient",e,this),this.gameManager.reconnectGameClient(e,this.room)),e.act===g.PLAYER_STATS&&(y.emit("reldens.playerStatsUpdate",e,this),this.updatePlayerStats(e)),e.act===g.UI&&e.id&&(y.emit("reldens.initUi",e,this),this.initUi(e)),e.act===g.ATTACK){y.emit("reldens.playerAttack",e,this);var l=this.getActiveScene();if(!l.player)return;var m=!1,h=!1;if(!{}.hasOwnProperty.call(e,"type")||"pvp"===e.type?(m=l.player.players[e.atk],h=l.player.players[e.def]):({}.hasOwnProperty.call(l.objectsAnimations,e.atk)&&(m=l.objectsAnimations[e.atk].sceneSprite,h=l.player.players[e.def]),{}.hasOwnProperty.call(l.objectsAnimations,e.def)&&(h=l.objectsAnimations[e.def].sceneSprite,m=l.player.players[e.atk])),m){var d=l.physics.add.sprite(m.x,m.y,g.ATTACK);d.setDepth(2e5),d.anims.play(g.ATTACK,!0).on("animationcomplete",function(){d.destroy()})}h&&this.runHitAnimation(h.x,h.y)}e.act===g.HIT&&this.runHitAnimation(e.x,e.y)}},{key:"runHitAnimation",value:function(e,a){var t=this.getActiveScene().physics.add.sprite(e,a,g.HIT);t.setDepth(2e5),t.anims.play(g.HIT,!0).on("animationcomplete",function(){t.destroy()})}},{key:"roomOnLeave",value:function(e){e>1e3&&(this.gameManager.gameOver||alert("There was a connection error."),window.location.reload())}},{key:"updatePlayerStats",value:function(e){var a=this.getActiveScene();if(a.player&&{}.hasOwnProperty.call(a.player.players,this.room.sessionId)){a.player.players[this.room.sessionId].stats=e.stats,this.gameManager.playerData.stats=e.stats;var t=this.gameEngine.uiScene;if(t&&{}.hasOwnProperty.call(t,"uiPlayerStats")){var n=t.uiPlayerStats.getChildByProperty("id","player-stats-container");if(n){var s=t.cache.html.get("playerStats");n.innerHTML=this.gameManager.gameEngine.parseTemplate(s,{stats:e.stats})}}this.gameManager.config.get("client/ui/uiLifeBar/enabled")&&a.player.redrawLifeBar()}}},{key:"initUi",value:function(a){var t=this,n=this.gameEngine.uiScene;if(n&&{}.hasOwnProperty.call(n.userInterfaces,a.id)){var s=n.userInterfaces[a.id];if(a.title){var i=s.getChildByProperty("className","box-title");i&&(i.innerHTML=a.title)}if(a.content){var r=s.getChildByProperty("className","box-content");if(r&&(r.innerHTML=a.content,a.options)){var o=n.cache.html.get("uiOptionsContainer"),c=this.gameManager.gameEngine.parseTemplate(o,{id:"ui-"+a.id});r.innerHTML+=c;for(var l=0,m=(0,e.default)(a.options);l<m.length;l++){var h=m[l],y=a.options[h],d=y.label,u=y.value,p=y.icon,v=p?"Icon":"Button",f=n.cache.html.get("uiOption"+v),S={id:h,object_id:a.id,label:d,value:u,icon:"/assets/custom/items/"+p+".png"},E=this.gameManager.gameEngine.parseTemplate(f,S);this.gameManager.gameDom.appendToElement("#ui-"+a.id,E),this.gameManager.gameDom.getElement("#opt-"+h+"-"+a.id).on("click",function(e){var n={id:a.id,act:g.BUTTON_OPTION,value:e.target.getAttribute("data-option-value")};t.room.send(n)})}}}s.getChildByID("box-"+a.id).style.display="block",s.setDepth(2),this.gameManager.config.get("client/ui/uiTarget/hideOnDialog")&&this.gameEngine.clearTarget()}}},{key:"startEngineScene",value:function(e,a){var t=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];y.emit("reldens.startEngineScene",this,e,a,n);var s=!1;this.gameEngine.uiScene||(s=!0);var i=g.SCENE_PRELOADER+this.sceneData.roomName;if(this.gameEngine.scene.getScene(i)){this.getActiveScene().objectsAnimationsData=this.sceneData.objectsAnimationsData,this.scenePreloader=this.gameEngine.scene.getScene(i),y.emit("reldens.createdPreloaderRecurring",this,this.scenePreloader),this.createEngineScene(e,a,n)}else{this.scenePreloader=this.createPreloaderInstance({name:i,map:this.sceneData.roomMap,images:this.sceneData.sceneImages,uiScene:s,gameManager:this.gameManager,preloadAssets:this.sceneData.preloadAssets,objectsAnimationsData:this.sceneData.objectsAnimationsData}),this.gameEngine.scene.add(i,this.scenePreloader,!0),y.emit("reldens.createdPreloaderInstance",this,this.scenePreloader);var r=this.gameEngine.scene.getScene(i);r.load.on("complete",function(){if(!t.gameEngine.uiScene&&(t.gameEngine.uiScene=r,r.uiPlayer)){var s=r.uiPlayer.getChildByProperty("className","player-name");s&&(s.innerHTML=e.username)}t.createEngineScene(e,a,n)})}}},{key:"createEngineScene",value:function(a,t,n){y.emit("reldens.createEngineScene",a,t,n,this),this.gameManager.room?n&&this.gameEngine.scene.getScene(n)&&(this.gameEngine.scene.getScene(n).changeScene(),this.gameEngine.scene.stop(n),this.gameEngine.scene.start(a.state.scene)):this.gameEngine.scene.start(a.state.scene),this.gameManager.room=t;var s=this.gameEngine.scene.getScene(a.state.scene);if(s.player=this.createPlayerEngineInstance(s,a,this.gameManager,t),s.player.create(),t.state.players)for(var i=0,r=(0,e.default)(t.state.players);i<r.length;i++){var o=r[i],c=t.state.players[o];if(c.sessionId&&c.sessionId!==t.sessionId){var l=c.state,m=l.x,h=l.y,d=l.dir;s.player.addPlayer(c.sessionId,{x:m,y:h,dir:d,username:c.username})}}var u=this.gameEngine.uiScene;if({}.hasOwnProperty.call(u,"uiSceneLabel")){var p=u.uiSceneLabel.getChildByProperty("className","scene-label");p&&(p.innerHTML=this.sceneData.roomTitle)}this.room.send({act:g.PLAYER_STATS}),this.room.send({act:g.CLIENT_JOINED})}},{key:"getActiveScene",value:function(){return this.gameEngine.scene.getScene(this.roomName)}},{key:"createSceneInstance",value:function(e,a,t){return new o(e,a,t)}},{key:"createPlayerEngineInstance",value:function(e,a,t,n){return new i(e,a,t,n)}},{key:"createPreloaderInstance",value:function(e){return new l(e)}}]),n}();module.exports.RoomEvents=d;
},{"@babel/runtime-corejs3/core-js-stable/object/keys":"Jibu","@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@babel/runtime-corejs3/helpers/createClass":"bMeU","../../users/client/player-engine":"lw7A","./scene-dynamic":"Mpt2","./scene-preloader":"rgt5","../constants":"gIeR","@reldens/utils":"nQnG"}],"DD3g":[function(require,module,exports) {
var e=require("../internals/fails"),r=require("../internals/whitespaces"),n="âÂá ";module.exports=function(i){return e(function(){return!!r[i]()||n[i]()!=n||r[i].name!==i})};
},{"../internals/fails":"XSQS","../internals/whitespaces":"lQgA"}],"qEaC":[function(require,module,exports) {
"use strict";var r=require("../internals/export"),t=require("../internals/string-trim").trim,i=require("../internals/string-trim-forced");r({target:"String",proto:!0,forced:i("trim")},{trim:function(){return t(this)}});
},{"../internals/export":"qpO1","../internals/string-trim":"a0v0","../internals/string-trim-forced":"DD3g"}],"OyPU":[function(require,module,exports) {
require("../../../modules/es.string.trim");var r=require("../../../internals/entry-virtual");module.exports=r("String").trim;
},{"../../../modules/es.string.trim":"qEaC","../../../internals/entry-virtual":"BGWD"}],"X99L":[function(require,module,exports) {
var r=require("../string/virtual/trim"),t=String.prototype;module.exports=function(i){var n=i.trim;return"string"==typeof i||i===t||i instanceof String&&n===t.trim?r:n};
},{"../string/virtual/trim":"OyPU"}],"NAMd":[function(require,module,exports) {
var e=require("../../es/instance/trim");module.exports=e;
},{"../../es/instance/trim":"X99L"}],"Gm6b":[function(require,module,exports) {
module.exports=require("core-js-pure/stable/instance/trim");
},{"core-js-pure/stable/instance/trim":"NAMd"}],"V6Bn":[function(require,module,exports) {
module.exports.ChatConst={CHAT_ACTION:"c",CHAT_MESSAGE:"m",CHAT_FROM:"f",CHAT_TO:"t",CHAT_FORM:"chat-form",CHAT_MESSAGES:"chat-messages",CHAT_INPUT:"chat-input",CHAT_SEND_BUTTON:"chat-send",CHAT_CLOSE_BUTTON:"chat-close",CHAT_OPEN_BUTTON:"chat-open",CHAT_GLOBAL:"chat",CHAT_JOINED:"j",CHAT_TYPE_NORMAL:"ctn",CHAT_TYPE_PRIVATE_FROM:"ctpf",CHAT_TYPE_PRIVATE_TO:"ctpt",CHAT_TYPE_GLOBAL:"ctg",CHAT_TYPE_SYSTEM:"cts",CHAT_TYPE_SYSTEM_ERROR:"ctse",colors:{ctn:"#ffffff",ctpf:"#f39c12",ctpt:"#00afff",ctg:"#ffff00",cts:"#2ecc71",ctse:"#ff0000"}};
},{}],"fRWL":[function(require,module,exports) {
"use strict";var e=n(require("@babel/runtime-corejs3/core-js-stable/instance/index-of")),t=n(require("@babel/runtime-corejs3/core-js-stable/instance/trim")),a=n(require("@babel/runtime-corejs3/helpers/classCallCheck")),i=n(require("@babel/runtime-corejs3/helpers/createClass"));function n(e){return e&&e.__esModule?e:{default:e}}var r=require("phaser"),u=r.Input,s=require("../constants"),l=s.ChatConst,c=require("@reldens/utils"),o=c.Logger,d=function(){function n(e){(0,a.default)(this,n),this.uiScene=e,this.gameManager=this.uiScene.gameManager}return(0,i.default)(n,[{key:"createUi",value:function(){var e=this,t=this.gameManager.config.get("client/chat/position/x"),a=this.gameManager.config.get("client/chat/position/y");this.uiScene.uiChat=this.uiScene.add.dom(t,a).createFromCache("uiChat");var i=this.uiScene.uiChat.getChildByProperty("id",l.CHAT_INPUT),n=this.uiScene.uiChat.getChildByProperty("id",l.CHAT_SEND_BUTTON),r=this.uiScene.uiChat.getChildByProperty("id",l.CHAT_CLOSE_BUTTON),s=this.uiScene.uiChat.getChildByProperty("id",l.CHAT_OPEN_BUTTON);i&&(this.uiScene.input.keyboard.on("keyup_ENTER",function(){document.activeElement===i||i.focus()}),n&&n.addEventListener("click",function(t){t.preventDefault(),e.sendChatMessage(i,e.gameManager.activeRoomEvents),i.focus()}),r&&s&&(r.addEventListener("click",function(){e.uiScene.uiChat.getChildByProperty("id","chat-ui").style.display="none",s.style.display="block",e.uiScene.uiChat.setDepth(1)}),s.addEventListener("click",function(){e.uiScene.uiChat.getChildByProperty("id","chat-ui").style.display="block",s.style.display="none",e.uiScene.uiChat.setDepth(4)})),i.addEventListener("keyup",function(t){t.keyCode===u.Keyboard.KeyCodes.ENTER&&(t.preventDefault(),e.sendChatMessage(i,e.gameManager.activeRoomEvents))}))}},{key:"sendChatMessage",value:function(a,i){var n,r,u;if(!a.value||0===(0,t.default)(n=a.value.replace("#","").replace("@","")).call(n).length)return!1;var s=0===(0,e.default)(r=a.value).call(r,"#")||0===(0,e.default)(u=a.value).call(u,"@"),c={act:l.CHAT_ACTION,m:a.value};if(s)if(i.gameManager.joinedRooms[l.CHAT_GLOBAL]){var d,h=i.gameManager.joinedRooms[l.CHAT_GLOBAL];if(0===(0,e.default)(d=a.value).call(d,"@")){var C,g=a.value.substring(1,(0,e.default)(C=a.value).call(C," "));"@"!==g&&(c.t=g,h.send(c))}else h.send(c)}else o.error("Global chat room not found.");else i.room.send(c);a.value=""}}]),n}();module.exports.ChatUi=d;
},{"@babel/runtime-corejs3/core-js-stable/instance/index-of":"b0gU","@babel/runtime-corejs3/core-js-stable/instance/trim":"Gm6b","@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@babel/runtime-corejs3/helpers/createClass":"bMeU","phaser":"Yefz","../constants":"V6Bn","@reldens/utils":"nQnG"}],"YUwl":[function(require,module,exports) {
"use strict";var e=a(require("@babel/runtime-corejs3/helpers/classCallCheck")),t=a(require("@babel/runtime-corejs3/helpers/createClass"));function a(e){return e&&e.__esModule?e:{default:e}}var r=require("./chat-ui"),s=r.ChatUi,n=require("../constants"),i=n.ChatConst,o=require("@reldens/utils"),l=o.Logger,u=o.EventsManager,c=function(){function a(){var t=this;(0,e.default)(this,a),this.joinRooms=[i.CHAT_GLOBAL],u.on("reldens.joinedRoom",function(e,a){t.listenMessages(e,a)}),u.on("reldens.preloadUiScene",function(e){e.load.html("uiChat","assets/features/chat/templates/ui-chat.html"),e.load.html("uiChatMessage","assets/features/chat/templates/message.html")}),u.on("reldens.createUiScene",function(e){t.uiCreate=new s(e),t.uiCreate.createUi()})}return(0,t.default)(a,[{key:"listenMessages",value:function(e,t){e.onMessage(function(e){if(e.act===i.CHAT_ACTION){var a=t.gameEngine.uiScene;if({}.hasOwnProperty.call(a,"uiChat")){var r=a.uiChat.getChildByProperty("id",i.CHAT_MESSAGES);if(r){var s=a.cache.html.get("uiChatMessage"),n=t.gameEngine.parseTemplate(s,{from:e[i.CHAT_FROM],color:i.colors[e.t],message:e[i.CHAT_MESSAGE]});r.innerHTML+=n,r.scrollTo(0,r.scrollHeight)}else l.error("Chat UI not found.")}else l.error("Chat interface not found.")}})}}]),a}();module.exports.Chat=c;
},{"@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@babel/runtime-corejs3/helpers/createClass":"bMeU","./chat-ui":"fRWL","../constants":"V6Bn","@reldens/utils":"nQnG"}],"Digp":[function(require,module,exports) {
module.exports.ObjectsConst={OBJECT_ANIMATION:"oa",OBJECT_INTERACTION:"oi",TYPE_OBJECT:"o1",TYPE_ANIMATION:"o2",TYPE_NPC:"o3",TYPE_ENEMY:"o4"};
},{}],"aThl":[function(require,module,exports) {
"use strict";var e=r(require("@babel/runtime-corejs3/core-js-stable/set-timeout")),t=r(require("@babel/runtime-corejs3/core-js-stable/instance/repeat")),i=r(require("@babel/runtime-corejs3/helpers/classCallCheck")),s=r(require("@babel/runtime-corejs3/helpers/createClass"));function r(e){return e&&e.__esModule?e:{default:e}}var a=require("@reldens/utils"),n=a.Logger,o=require("../constants"),h=o.ObjectsConst,m=function(){function r(e,s,a){(0,i.default)(this,r),this.currentPreloader=a,this.gameManager=e,this.enabled=s.enabled||!1,this.key=s.key,this.id=s.id,this.asset_key=s.asset_key||s.key,this.type=s.type||!1,this.ui=s.ui||!1,this.targetName=s.targetName,this.frameRate=s.frameRate||!1,this.frameStart=s.frameStart||0,this.frameEnd=s.frameEnd||0,this.x=s.x||0,this.y=s.y||0,this.repeat=isNaN((0,t.default)(s))?-1:(0,t.default)(s),this.hideOnComplete=s.hideOnComplete||!1,this.destroyOnComplete=s.destroyOnComplete||!1,this.autoStart=s.autoStart||!1,this.layerName=s.layerName||!1,this.positionFix=s.positionFix||!1,this.zeroPad=s.zeroPad||!1,this.prefix=s.prefix||!1,this.isInteractive=s.isInteractive||!1,this.restartTime=!!{}.hasOwnProperty.call(s,"restartTime")&&s.restartTime,this.calculateAnimPosition()}return(0,s.default)(r,[{key:"calculateAnimPosition",value:function(){this.animPos={x:this.x,y:this.y},this.positionFix&&({}.hasOwnProperty.call(this.positionFix,"x")&&(this.animPos.x=this.x+this.positionFix.x),{}.hasOwnProperty.call(this.positionFix,"y")&&(this.animPos.y=this.y+this.positionFix.y))}},{key:"createAnimation",value:function(){var i=this;if(this.enabled){var s=this.gameManager.activeRoomEvents.getActiveScene();if(s){var r={start:this.frameStart,end:this.frameEnd};!1!==this.prefix&&(r.prefix=this.prefix),!1!==this.zeroPad&&(r.zeroPad=this.zeroPad),this.frameNumbers=this.currentPreloader.anims.generateFrameNumbers(this.asset_key,r);var a={key:this.key,frames:this.frameNumbers,frameRate:this.frameRate,repeat:(0,t.default)(this),hideOnComplete:this.hideOnComplete};this.currentAnimation=this.currentPreloader.anims.create(a),this.sceneSprite=s.physics.add.sprite(this.animPos.x,this.animPos.y,this.asset_key),this.autoStart&&this.sceneSprite.anims.play(this.key,!0),this.isInteractive&&this.sceneSprite.setInteractive({useHandCursor:!0}).on("pointerdown",function(e){if("CANVAS"!==e.downElement.nodeName)return!1;var t=i.key===i.asset_key?i.id:i.key;i.gameManager.activeRoomEvents.room.send({act:h.OBJECT_INTERACTION,id:t,type:i.type}),i.targetName&&i.gameManager.gameEngine.showTarget(i.targetName),s.player.currentTarget={id:t,type:h.TYPE_OBJECT}}),this.restartTime&&this.sceneSprite.on("animationcomplete",function(){(0,e.default)(function(){i.sceneSprite.anims&&(i.sceneSprite.anims.restart(),i.sceneSprite.anims.pause())},i.restartTime)},this),this.destroyOnComplete&&this.sceneSprite.on("animationcomplete",function(){i.currentAnimation.destroy(),i.sceneSprite.destroy()},this),this.sceneSprite.setDepth(this.y+this.sceneSprite.body.height),s.objectsAnimations[this.key]=this}else n.error("Active scene not found.")}else n.error("Animation disabled: "+this.key)}},{key:"runAnimation",value:function(){this.sceneSprite?this.sceneSprite.anims.play(this.key,!0):n.error("Current animation not found: "+this.key)}}]),r}();module.exports.AnimationEngine=m;
},{"@babel/runtime-corejs3/core-js-stable/set-timeout":"CHT5","@babel/runtime-corejs3/core-js-stable/instance/repeat":"duBw","@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@babel/runtime-corejs3/helpers/createClass":"bMeU","@reldens/utils":"nQnG","../constants":"Digp"}],"fyxM":[function(require,module,exports) {
"use strict";var e=t(require("@babel/runtime-corejs3/helpers/classCallCheck"));function t(e){return e&&e.__esModule?e:{default:e}}var i=require("@reldens/utils"),n=i.EventsManager,a=function t(i,a){var r=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"assets/html/npc-dialog.html";(0,e.default)(this,t),n.emit("reldens.defineUserInterface",i,a,l,this),this.initialTitle="",this.initialContent="",this.id=a,this.template=l,n.on("reldens.beforePreload",function(e,t){e.load.html(r.id,r.template)}),n.on("reldens.createPreload",function(e,t){var i=t.add.dom(20,70).createFromCache(r.id),n=e.cache.html.get(r.id);i.innerHTML=t.gameManager.gameEngine.parseTemplate(n,{title:r.initialTitle,content:r.initialContent});var a=i.getChildByProperty("className","ui-box ui-box-npc-dialog");a.id="box-"+r.id;var l=i.getChildByProperty("className","box-close");l&&(l.id="box-close-"+r.id,l.addEventListener("click",function(){a.style.display="none"})),t.userInterfaces[r.id]=i}),n.emit("reldens.createdUserInterface",i,a,l,this)};module.exports.UserInterface=a;
},{"@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@reldens/utils":"nQnG"}],"LLqj":[function(require,module,exports) {
module.exports.BattleConst={BATTLE_TYPE_PER_TARGET:"bt",BATTLE_TYPE_GENERAL:"bg",BATTLE_ENDED:"bend"};
},{}],"no6C":[function(require,module,exports) {
"use strict";var e=i(require("@babel/runtime-corejs3/core-js-stable/object/keys")),t=i(require("@babel/runtime-corejs3/core-js-stable/instance/index-of")),n=i(require("@babel/runtime-corejs3/helpers/classCallCheck")),a=i(require("@babel/runtime-corejs3/helpers/createClass"));function i(e){return e&&e.__esModule?e:{default:e}}var s=require("../../objects/client/animation-engine"),r=s.AnimationEngine,o=require("../../game/client/user-interface"),c=o.UserInterface,l=require("../constants"),u=l.ObjectsConst,m=require("@reldens/utils"),f=m.Logger,b=m.EventsManager,d=require("../../actions/constants"),g=d.BattleConst,v=require("../../game/constants"),y=v.GameConst,A=function(){function i(){var e=this;(0,n.default)(this,i),b.on("reldens.startEngineScene",function(t,n,a,i){e.prepareObjectsUi(t.gameManager,t.sceneData.objectsAnimationsData,t)}),b.on("reldens.afterSceneDynamicCreate",function(t){e.createDynamicAnimations(t)}),b.on("reldens.joinedRoom",function(t,n){e.listenMessages(t,n)}),this.bullets=[]}return(0,a.default)(i,[{key:"listenMessages",value:function(e,n){var a=this;e.onMessage(function(e){if(e.act===u.OBJECT_ANIMATION||e.act===u.TYPE_ANIMATION){var t=n.activeRoomEvents.getActiveScene();({}).hasOwnProperty.call(t.objectsAnimations,e.key)&&t.objectsAnimations[e.key].runAnimation()}if(e.act===g.BATTLE_ENDED){var a=n.activeRoomEvents.getActiveScene(),i=a.physics.add.sprite(e.x,e.y,y.DEATH);i.setDepth(2e5),i.anims.play(y.DEATH,!0).on("animationcomplete",function(){i.destroy()}),{}.hasOwnProperty.call(e,"t")&&e.t===a.player.currentTarget.id&&n.gameEngine.clearTarget()}}),e.state&&e.state.bodies&&(e.state.bodies.onAdd=function(e,i){if(-1!==(0,t.default)(i).call(i,"bullet")){var s=n.activeRoomEvents.getActiveScene().physics.add.sprite(e.x,e.y,y.BULLET);s.setDepth(2e5),a.bullets[i]=s}},e.state.bodies.onRemove=function(e,n){-1!==(0,t.default)(n).call(n,"bullet")&&{}.hasOwnProperty.call(a.bullets,n)&&(a.bullets[n].destroy(),delete a.bullets[n])},e.state.bodies.onChange=function(e,i){if(-1!==(0,t.default)(i).call(i,"bullet"))a.bullets[i].x=e.x,a.bullets[i].y=e.y;else{var s=n.activeRoomEvents.getActiveScene();s.objectsAnimations[i].sceneSprite.x=e.x,s.objectsAnimations[i].sceneSprite.y=e.y}})}},{key:"prepareObjectsUi",value:function(t,n,a){if(n)for(var i=0,s=(0,e.default)(n);i<s.length;i++){var r=n[s[i]];({}).hasOwnProperty.call(r,"ui")&&(r.id?a.objectsUi[r.id]=new c(t,r.id):f.error(["Object ID not specified. Skipping registry:",r]))}else f.info(["None objects animations data.",a])}},{key:"createDynamicAnimations",value:function(t){var n=t.gameManager.activeRoomEvents.getActiveScene();if(n.objectsAnimationsData){b.emit("reldens.createDynamicAnimationsBefore",this,t);for(var a=0,i=(0,e.default)(n.objectsAnimationsData);a<i.length;a++){var s=i[a],o=n.objectsAnimationsData[s];if(o.key){o.frameRate=t.configuredFrameRate,b.emit("reldens.createDynamicAnimation_"+o.key,this,o);var c=t.gameManager.config.get("customClasses/objects/"+o.key,!0);c||(c=r),new c(t.gameManager,o,t).createAnimation()}else f.error(["Animation key not specified. Skipping registry:",o])}}else f.info(["None animations defined on this scene:",n.key])}}]),i}();module.exports.ObjectsPack=A;
},{"@babel/runtime-corejs3/core-js-stable/object/keys":"Jibu","@babel/runtime-corejs3/core-js-stable/instance/index-of":"b0gU","@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@babel/runtime-corejs3/helpers/createClass":"bMeU","../../objects/client/animation-engine":"aThl","../../game/client/user-interface":"fyxM","../constants":"Digp","@reldens/utils":"nQnG","../../actions/constants":"LLqj","../../game/constants":"gIeR"}],"JreN":[function(require,module,exports) {
"use strict";var r=require("../internals/array-iteration").forEach,e=require("../internals/array-method-is-strict"),t=require("../internals/array-method-uses-to-length"),a=e("forEach"),i=t("forEach");module.exports=a&&i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)};
},{"../internals/array-iteration":"DfAY","../internals/array-method-is-strict":"j6G8","../internals/array-method-uses-to-length":"p7jN"}],"qPIb":[function(require,module,exports) {
"use strict";var r=require("../internals/export"),e=require("../internals/array-for-each");r({target:"Array",proto:!0,forced:[].forEach!=e},{forEach:e});
},{"../internals/export":"qpO1","../internals/array-for-each":"JreN"}],"BFsJ":[function(require,module,exports) {
require("../../../modules/es.array.for-each");var r=require("../../../internals/entry-virtual");module.exports=r("Array").forEach;
},{"../../../modules/es.array.for-each":"qPIb","../../../internals/entry-virtual":"BGWD"}],"bRcc":[function(require,module,exports) {
var r=require("../../../es/array/virtual/for-each");module.exports=r;
},{"../../../es/array/virtual/for-each":"BFsJ"}],"sjtC":[function(require,module,exports) {
require("../../modules/web.dom-collections.iterator");var r=require("../array/virtual/for-each"),e=require("../../internals/classof"),o=Array.prototype,a={DOMTokenList:!0,NodeList:!0};module.exports=function(t){var i=t.forEach;return t===o||t instanceof Array&&i===o.forEach||a.hasOwnProperty(e(t))?r:i};
},{"../../modules/web.dom-collections.iterator":"GgAf","../array/virtual/for-each":"bRcc","../../internals/classof":"PKLy"}],"MrKL":[function(require,module,exports) {
module.exports=require("core-js-pure/stable/instance/for-each");
},{"core-js-pure/stable/instance/for-each":"sjtC"}],"Oqdi":[function(require,module,exports) {
"use strict";var r=require("../internals/export"),t=require("../internals/a-function"),e=require("../internals/to-object"),i=require("../internals/fails"),n=require("../internals/array-method-is-strict"),o=[],s=o.sort,a=i(function(){o.sort(void 0)}),l=i(function(){o.sort(null)}),u=n("sort"),c=a||!l||!u;r({target:"Array",proto:!0,forced:c},{sort:function(r){return void 0===r?s.call(e(this)):s.call(e(this),t(r))}});
},{"../internals/export":"qpO1","../internals/a-function":"CKzo","../internals/to-object":"S7GN","../internals/fails":"XSQS","../internals/array-method-is-strict":"j6G8"}],"uYsP":[function(require,module,exports) {
require("../../../modules/es.array.sort");var r=require("../../../internals/entry-virtual");module.exports=r("Array").sort;
},{"../../../modules/es.array.sort":"Oqdi","../../../internals/entry-virtual":"BGWD"}],"OhiK":[function(require,module,exports) {
var r=require("../array/virtual/sort"),t=Array.prototype;module.exports=function(o){var a=o.sort;return o===t||o instanceof Array&&a===t.sort?r:a};
},{"../array/virtual/sort":"uYsP"}],"GhwL":[function(require,module,exports) {
var e=require("../../es/instance/sort");module.exports=e;
},{"../../es/instance/sort":"OhiK"}],"rnON":[function(require,module,exports) {
module.exports=require("core-js-pure/stable/instance/sort");
},{"core-js-pure/stable/instance/sort":"GhwL"}],"pkJ0":[function(require,module,exports) {
var E="rinv";module.exports={SET:"set",INCREASE:"increase",DECREASE:"decrease",TYPE_BASE:"itb",TYPE_EQUIPMENT:"ite",TYPE_USABLE:"itu",OPS:{INC:1,DEC:2,DIV:3,MUL:4,INC_P:5,DEC_P:6,SET:7,METHOD:8},PROP_GET:"g",PROP_SET:"s",MOD_APPLIED:"ma",MOD_REVERTED:"mr",ACTIONS_PREF:E,ACTION_ADD:E+"A",ACTION_REMOVE:E+"R",ACTION_MODIFY_QTY:E+"M",ACTION_EQUIP:E+"E",ACTION_UNEQUIP:E+"U",ACTION_MOD_APPLIED:E+"Ma",ACTION_MOD_REVERTED:E+"Mr",ACTION_EXECUTING:E+"Ex",ACTION_EXECUTED:E+"AExd",ACTION_MANAGER_INIT:E+"Mi",ACTION_SET_ITEMS:E+"Si",ACTION_SET_GROUPS:E+"Sg",BEHAVIOR_SEND:"send",BEHAVIOR_BROADCAST:"broadcast",BEHAVIOR_BOTH:"broadcast"};
},{}],"D4tT":[function(require,module,exports) {
var e="reldens.items.";module.exports={PREF:e,MANAGER_INIT:e+"setup",LOADED_OWNER_ITEMS:e+"loadedOwnerItems",SET_ITEMS:e+"setItems",SET_GROUPS:e+"setGroups",EQUIP_ITEM:e+"equipItem",UNEQUIP_ITEM:e+"unequipItem",ADD_ITEM:e+"addItem",ADD_ITEM_BEFORE:e+"addItemBefore",REMOVE_ITEM:e+"removeItem",MODIFY_ITEM_QTY:e+"modifyItemQty",EQUIP_BEFORE:e+"equipBefore",EQUIP:e+"equip",EXECUTING_ITEM:e+"executingItem",EXECUTED_ITEM:e+"executedItem",VALIDATE:e+"validate"};
},{}],"IsYV":[function(require,module,exports) {
function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}var n=require("@reldens/utils"),i=n.Logger,s=require("await-event-emitter"),a=require("../constants"),u=require("../items-events"),o=function(){function t(r){e(this,t),this.events=new s,this.items={},this.limitPerItem={}.hasOwnProperty.call(r,"limitPerItem")?r.limitPerItem:-1,this.itemsLimit={}.hasOwnProperty.call(r,"itemsLimit")?r.itemsLimit:-1,this.applyModifiersAuto=!0,this.revertModifiersAuto=!0,this.eventsPref={}.hasOwnProperty.call(r,"eventsPref")?r.eventsPref:""}return r(t,[{key:"validate",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t=!0,e.getInventoryId()||(i.error(["Add item error, undefined item ID.",e]),t=!1),e.key||(i.error(["Add item error, undefined item key.",e]),t=!1),r.next=5,regeneratorRuntime.awrap(this.events.emit(this.eventsPref+u.VALIDATE,this,e,t));case 5:return r.abrupt("return",t);case 6:case"end":return r.stop()}},null,this)}},{key:"addItem",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.validate(e));case 2:if(t.sent){t.next=6;break}return i.error("Invalid item: "+e.getInventoryId()),t.abrupt("return",!1);case 6:if(!{}.hasOwnProperty.call(this.items,e.getInventoryId())||e.singleInstance){t.next=9;break}return i.error("Cannot add item, item already exists: "+e.getInventoryId()),t.abrupt("return",!1);case 9:if(!(Object.keys(this.items).length===this.itemsLimit&&this.itemsLimit>=0)){t.next=12;break}return i.error("Cannot add item, max total reached."),t.abrupt("return",!1);case 12:if(!(e.qty>this.limitPerItem&&this.limitPerItem>=0)){t.next=15;break}return i.error("Cannot add item, item qty limit exceeded."),t.abrupt("return",!1);case 15:if(!{}.hasOwnProperty.call(this.items,e.getInventoryId())||!e.singleInstance){t.next=21;break}return t.next=18,regeneratorRuntime.awrap(this.increaseItemQty(e.getInventoryId(),e.qty));case 18:return t.abrupt("return",this.items[e.getInventoryId()]);case 21:return t.next=23,regeneratorRuntime.awrap(this.events.emit(this.eventsPref+u.ADD_ITEM_BEFORE,this,e));case 23:return this.items[e.getInventoryId()]=e,t.next=26,regeneratorRuntime.awrap(this.events.emit(this.eventsPref+u.ADD_ITEM,this,e));case 26:case"end":return t.stop()}},null,this)}},{key:"setItem",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:this.items[e.getInventoryId()]=e;case 1:case"end":return t.stop()}},null,this)}},{key:"removeItem",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:if({}.hasOwnProperty.call(this.items,e)){t.next=3;break}return i.info("Cannot remove item, key not found: "+e),t.abrupt("return",!1);case 3:return t.next=5,regeneratorRuntime.awrap(this.events.emit(this.eventsPref+u.REMOVE_ITEM,this,e));case 5:delete this.items[e];case 6:case"end":return t.stop()}},null,this)}},{key:"setItemQty",value:function(e,t){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.modifyItemQty(a.SET,e,t));case 1:case"end":return r.stop()}},null,this)}},{key:"increaseItemQty",value:function(e,t){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.modifyItemQty(a.INCREASE,e,t));case 1:case"end":return r.stop()}},null,this)}},{key:"decreaseItemQty",value:function(e,t){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.modifyItemQty(a.DECREASE,e,t));case 1:case"end":return r.stop()}},null,this)}},{key:"modifyItemQty",value:function(e,t,r){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if({}.hasOwnProperty.call(this.items,t)){n.next=3;break}return i.error("Cannot "+e+" item qty, undefined item key: "+t),n.abrupt("return",!1);case 3:if(!isNaN(r)){n.next=6;break}return i.error("Cannot "+e+" item qty, qty is not a number: "+r),n.abrupt("return",!1);case 6:if(!(this.limitPerItem>0&&r>this.limitPerItem)||e!==a.SET&&e!==a.INCREASE){n.next=9;break}return i.error("Cannot "+e+" item qty, item qty limit exceeded: "+r+" > "+this.limitPerItem),n.abrupt("return",!1);case 9:return e===a.SET?this.items[t].qty=r:e===a.INCREASE?this.items[t].qty+=r:e===a.DECREASE&&(this.items[t].qty-r<0?this.items[t].qty=0:this.items[t].qty-=r),n.next=12,regeneratorRuntime.awrap(this.events.emit(this.eventsPref+u.MODIFY_ITEM_QTY,this.items[t],this,e,t,r));case 12:return n.abrupt("return",this.items[t].qty);case 13:case"end":return n.stop()}},null,this)}},{key:"setItems",value:function(e){this.items=e,this.events.emit(this.eventsPref+u.SET_ITEMS,{items:e,manager:this})}},{key:"setGroups",value:function(e){this.groups=e,this.events.emit(this.eventsPref+u.SET_GROUPS,{groups:e,manager:this})}}]),t}();module.exports=o;
},{"@reldens/utils":"nQnG","await-event-emitter":"vVLw","../constants":"pkJ0","../items-events":"D4tT"}],"ruSu":[function(require,module,exports) {
function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}function n(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?s(t):r}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=require("@reldens/utils"),c=l.ErrorManager,p=require("./item/inventory"),f=require("./items-events"),y=function(e){function r(e){var o;return t(this,r),o=n(this,i(r).call(this,e)),{}.hasOwnProperty.call(e,"owner")||c.error("Undefined owner."),o.itemClasses=!!{}.hasOwnProperty.call(e,"itemClasses")&&e.itemClasses,o.groupClasses=!!{}.hasOwnProperty.call(e,"groupClasses")&&e.groupClasses,o.ownerIdProperty={}.hasOwnProperty.call(e,"ownerIdProperty")?e.ownerIdProperty:"id",o.owner=e.owner,o.groups={},o}return u(r,p),o(r,[{key:"getOwnerId",value:function(){return this.owner[this.ownerIdProperty]}},{key:"setup",value:function(e){this.events.emit(f.MANAGER_INIT,{props:e,manager:this}),{}.hasOwnProperty.call(e,"items")&&this.setItems(e.items),{}.hasOwnProperty.call(e,"groups")&&this.setGroups(e.groups)}}]),r}();module.exports=y;
},{"@reldens/utils":"nQnG","./item/inventory":"IsYV","./items-events":"D4tT"}],"LNRo":[function(require,module,exports) {
"use strict";class r extends Error{constructor(r){super(r.nativeError.message),this.name=this.constructor.name,this.nativeError=r.nativeError,this.client=r.client}}module.exports=r;
},{}],"oi6O":[function(require,module,exports) {
"use strict";module.exports=new Set(["000","00000","01000","0100C","01008","01003","01007","01006","01004","01P01","02000","02001","03000","08000","08003","08006","08001","08004","08007","08P01","09000","0A000","0B000","0F000","0F001","0L000","0LP01","0P000","0Z000","0Z002","20000","21000","22000","2202E","22021","22008","22012","22005","2200B","22022","22015","2201E","22014","22016","2201F","2201G","22018","22007","22019","2200D","22025","22P06","22010","22023","2201B","2201W","2201X","2202H","2202G","22009","2200C","2200G","22004","22002","22003","22026","22001","22011","22027","22024","2200F","22P01","22P02","22P03","22P04","22P05","2200L","2200M","2200N","2200S","2200T","23000","23001","23502","23503","23505","23514","23P01","24000","25000","25001","25002","25008","25003","25004","25005","25006","25007","25P01","25P02","25P03","26000","27000","28000","28P01","2B000","2BP01","2D000","2F000","2F005","2F002","2F003","2F004","34000","38000","38001","38002","38003","38004","39000","39001","39004","39P01","39P02","39P03","3B000","3B001","3D000","3F000","40000","40002","40001","40003","40P01","42000","42601","42501","42846","42803","42P20","42P19","42830","42602","42622","42939","42804","42P18","42P21","42P22","42809","42703","42883","42P01","42P02","42704","42701","42P03","42P04","42723","42P05","42P06","42P07","42712","42710","42702","42725","42P08","42P09","42P10","42611","42P11","42P12","42P13","42P14","42P15","42P16","42P17","44000","53000","53100","53200","53300","53400","54000","54001","54011","54023","55000","55006","55P02","55P03","57000","57014","57P01","57P02","57P03","57P04","58000","58030","58P01","58P02","72000","F0000","F0001","HV000","HV005","HV002","HV010","HV021","HV024","HV007","HV008","HV004","HV006","HV091","HV00B","HV00C","HV00D","HV090","HV00A","HV009","HV014","HV001","HV00P","HV00J","HV00K","HV00Q","HV00R","HV00L","HV00M","HV00N","P0000","P0001","P0002","P0003","P0004","XX000","XX001","XX002"]);
},{}],"MPaQ":[function(require,module,exports) {
"use strict";module.exports=new Set(["ER_HASHCHK","ER_NISAMCHK","ER_NO","ER_YES","ER_YES","ER_CANT_CREATE_FILE","ER_CANT_CREATE_TABLE","ER_CANT_CREATE_DB","ER_DB_CREATE_EXISTS","ER_DB_DROP_EXISTS","ER_DB_DROP_DELETE","ER_DB_DROP_RMDIR","ER_CANT_DELETE_FILE","ER_CANT_FIND_SYSTEM_REC","ER_CANT_GET_STAT","ER_CANT_GET_WD","ER_CANT_LOCK","ER_CANT_OPEN_FILE","ER_FILE_NOT_FOUND","ER_CANT_READ_DIR","ER_CANT_SET_WD","ER_CHECKREAD","ER_DISK_FULL","ER_DUP_KEY","ER_ERROR_ON_CLOSE","ER_ERROR_ON_READ","ER_ERROR_ON_RENAME","ER_ERROR_ON_WRITE","ER_FILE_USED","ER_FILSORT_ABORT","ER_FORM_NOT_FOUND","ER_GET_ERRNO","ER_ILLEGAL_HA","ER_KEY_NOT_FOUND","ER_NOT_FORM_FILE","ER_NOT_KEYFILE","ER_OLD_KEYFILE","ER_OPEN_AS_READONLY","ER_OUTOFMEMORY","ER_OUT_OF_SORTMEMORY","ER_UNEXPECTED_EOF","ER_CON_COUNT_ERROR","ER_OUT_OF_RESOURCES","ER_BAD_HOST_ERROR","ER_HANDSHAKE_ERROR","ER_DBACCESS_DENIED_ERROR","ER_ACCESS_DENIED_ERROR","ER_NO_DB_ERROR","ER_UNKNOWN_COM_ERROR","ER_BAD_NULL_ERROR","ER_BAD_DB_ERROR","ER_TABLE_EXISTS_ERROR","ER_BAD_TABLE_ERROR","ER_NON_UNIQ_ERROR","ER_SERVER_SHUTDOWN","ER_BAD_FIELD_ERROR","ER_WRONG_FIELD_WITH_GROUP","ER_WRONG_GROUP_FIELD","ER_WRONG_SUM_SELECT","ER_WRONG_VALUE_COUNT","ER_TOO_LONG_IDENT","ER_DUP_FIELDNAME","ER_DUP_KEYNAME","ER_DUP_ENTRY","ER_DUP_ENTRY_WITH_KEY_NAME","ER_WRONG_FIELD_SPEC","ER_PARSE_ERROR","ER_EMPTY_QUERY","ER_NONUNIQ_TABLE","ER_INVALID_DEFAULT","ER_MULTIPLE_PRI_KEY","ER_TOO_MANY_KEYS","ER_TOO_MANY_KEY_PARTS","ER_TOO_LONG_KEY","ER_KEY_COLUMN_DOES_NOT_EXITS","ER_BLOB_USED_AS_KEY","ER_TOO_BIG_FIELDLENGTH","ER_WRONG_AUTO_KEY","ER_READY","ER_NORMAL_SHUTDOWN","ER_GOT_SIGNAL","ER_SHUTDOWN_COMPLETE","ER_FORCING_CLOSE","ER_IPSOCK_ERROR","ER_NO_SUCH_INDEX","ER_WRONG_FIELD_TERMINATORS","ER_BLOBS_AND_NO_TERMINATED","ER_TEXTFILE_NOT_READABLE","ER_FILE_EXISTS_ERROR","ER_LOAD_INFO","ER_ALTER_INFO","ER_WRONG_SUB_KEY","ER_CANT_REMOVE_ALL_FIELDS","ER_CANT_DROP_FIELD_OR_KEY","ER_INSERT_INFO","ER_UPDATE_TABLE_USED","ER_NO_SUCH_THREAD","ER_KILL_DENIED_ERROR","ER_NO_TABLES_USED","ER_TOO_BIG_SET","ER_NO_UNIQUE_LOGFILE","ER_TABLE_NOT_LOCKED_FOR_WRITE","ER_TABLE_NOT_LOCKED","ER_BLOB_CANT_HAVE_DEFAULT","ER_WRONG_DB_NAME","ER_WRONG_TABLE_NAME","ER_TOO_BIG_SELECT","ER_UNKNOWN_ERROR","ER_UNKNOWN_PROCEDURE","ER_WRONG_PARAMCOUNT_TO_PROCEDURE","ER_WRONG_PARAMETERS_TO_PROCEDURE","ER_UNKNOWN_TABLE","ER_FIELD_SPECIFIED_TWICE","ER_INVALID_GROUP_FUNC_USE","ER_UNSUPPORTED_EXTENSION","ER_TABLE_MUST_HAVE_COLUMNS","ER_RECORD_FILE_FULL","ER_UNKNOWN_CHARACTER_SET","ER_TOO_MANY_TABLES","ER_TOO_MANY_FIELDS","ER_TOO_BIG_ROWSIZE","ER_STACK_OVERRUN","ER_WRONG_OUTER_JOIN","ER_NULL_COLUMN_IN_INDEX","ER_CANT_FIND_UDF","ER_CANT_INITIALIZE_UDF","ER_UDF_NO_PATHS","ER_UDF_EXISTS","ER_CANT_OPEN_LIBRARY","ER_CANT_FIND_DL_ENTRY","ER_FUNCTION_NOT_DEFINED","ER_HOST_IS_BLOCKED","ER_HOST_NOT_PRIVILEGED","ER_PASSWORD_ANONYMOUS_USER","ER_PASSWORD_NOT_ALLOWED","ER_PASSWORD_NO_MATCH","ER_UPDATE_INFO","ER_CANT_CREATE_THREAD","ER_WRONG_VALUE_COUNT_ON_ROW","ER_CANT_REOPEN_TABLE","ER_INVALID_USE_OF_NULL","ER_REGEXP_ERROR","ER_MIX_OF_GROUP_FUNC_AND_FIELDS","ER_NONEXISTING_GRANT","ER_TABLEACCESS_DENIED_ERROR","ER_COLUMNACCESS_DENIED_ERROR","ER_ILLEGAL_GRANT_FOR_TABLE","ER_GRANT_WRONG_HOST_OR_USER","ER_NO_SUCH_TABLE","ER_NONEXISTING_TABLE_GRANT","ER_NOT_ALLOWED_COMMAND","ER_SYNTAX_ERROR","ER_DELAYED_CANT_CHANGE_LOCK","ER_TOO_MANY_DELAYED_THREADS","ER_ABORTING_CONNECTION","ER_NET_PACKET_TOO_LARGE","ER_NET_READ_ERROR_FROM_PIPE","ER_NET_FCNTL_ERROR","ER_NET_PACKETS_OUT_OF_ORDER","ER_NET_UNCOMPRESS_ERROR","ER_NET_READ_ERROR","ER_NET_READ_INTERRUPTED","ER_NET_ERROR_ON_WRITE","ER_NET_WRITE_INTERRUPTED","ER_TOO_LONG_STRING","ER_TABLE_CANT_HANDLE_BLOB","ER_TABLE_CANT_HANDLE_AUTO_INCREMENT","ER_DELAYED_INSERT_TABLE_LOCKED","ER_WRONG_COLUMN_NAME","ER_WRONG_KEY_COLUMN","ER_WRONG_MRG_TABLE","ER_DUP_UNIQUE","ER_BLOB_KEY_WITHOUT_LENGTH","ER_PRIMARY_CANT_HAVE_NULL","ER_TOO_MANY_ROWS","ER_REQUIRES_PRIMARY_KEY","ER_NO_RAID_COMPILED","ER_UPDATE_WITHOUT_KEY_IN_SAFE_MODE","ER_KEY_DOES_NOT_EXITS","ER_CHECK_NO_SUCH_TABLE","ER_CHECK_NOT_IMPLEMENTED","ER_CANT_DO_THIS_DURING_AN_TRANSACTION","ER_ERROR_DURING_COMMIT","ER_ERROR_DURING_ROLLBACK","ER_ERROR_DURING_FLUSH_LOGS","ER_ERROR_DURING_CHECKPOINT","ER_NEW_ABORTING_CONNECTION","ER_DUMP_NOT_IMPLEMENTED","ER_FLUSH_MASTER_BINLOG_CLOSED","ER_INDEX_REBUILD","ER_MASTER","ER_MASTER_NET_READ","ER_MASTER_NET_WRITE","ER_FT_MATCHING_KEY_NOT_FOUND","ER_LOCK_OR_ACTIVE_TRANSACTION","ER_UNKNOWN_SYSTEM_VARIABLE","ER_CRASHED_ON_USAGE","ER_CRASHED_ON_REPAIR","ER_WARNING_NOT_COMPLETE_ROLLBACK","ER_TRANS_CACHE_FULL","ER_SLAVE_MUST_STOP","ER_SLAVE_NOT_RUNNING","ER_BAD_SLAVE","ER_MASTER_INFO","ER_SLAVE_THREAD","ER_TOO_MANY_USER_CONNECTIONS","ER_SET_CONSTANTS_ONLY","ER_LOCK_WAIT_TIMEOUT","ER_LOCK_TABLE_FULL","ER_READ_ONLY_TRANSACTION","ER_DROP_DB_WITH_READ_LOCK","ER_CREATE_DB_WITH_READ_LOCK","ER_WRONG_ARGUMENTS","ER_NO_PERMISSION_TO_CREATE_USER","ER_UNION_TABLES_IN_DIFFERENT_DIR","ER_LOCK_DEADLOCK","ER_TABLE_CANT_HANDLE_FT","ER_CANNOT_ADD_FOREIGN","ER_NO_REFERENCED_ROW","ER_ROW_IS_REFERENCED","ER_CONNECT_TO_MASTER","ER_QUERY_ON_MASTER","ER_ERROR_WHEN_EXECUTING_COMMAND","ER_WRONG_USAGE","ER_WRONG_NUMBER_OF_COLUMNS_IN_SELECT","ER_CANT_UPDATE_WITH_READLOCK","ER_MIXING_NOT_ALLOWED","ER_DUP_ARGUMENT","ER_USER_LIMIT_REACHED","ER_SPECIFIC_ACCESS_DENIED_ERROR","ER_LOCAL_VARIABLE","ER_GLOBAL_VARIABLE","ER_NO_DEFAULT","ER_WRONG_VALUE_FOR_VAR","ER_WRONG_TYPE_FOR_VAR","ER_VAR_CANT_BE_READ","ER_CANT_USE_OPTION_HERE","ER_NOT_SUPPORTED_YET","ER_MASTER_FATAL_ERROR_READING_BINLOG","ER_SLAVE_IGNORED_TABLE","ER_INCORRECT_GLOBAL_LOCAL_VAR","ER_WRONG_FK_DEF","ER_KEY_REF_DO_NOT_MATCH_TABLE_REF","ER_OPERAND_COLUMNS","ER_SUBQUERY_NO_1_ROW","ER_UNKNOWN_STMT_HANDLER","ER_CORRUPT_HELP_DB","ER_CYCLIC_REFERENCE","ER_AUTO_CONVERT","ER_ILLEGAL_REFERENCE","ER_DERIVED_MUST_HAVE_ALIAS","ER_SELECT_REDUCED","ER_TABLENAME_NOT_ALLOWED_HERE","ER_NOT_SUPPORTED_AUTH_MODE","ER_SPATIAL_CANT_HAVE_NULL","ER_COLLATION_CHARSET_MISMATCH","ER_SLAVE_WAS_RUNNING","ER_SLAVE_WAS_NOT_RUNNING","ER_TOO_BIG_FOR_UNCOMPRESS","ER_ZLIB_Z_MEM_ERROR","ER_ZLIB_Z_BUF_ERROR","ER_ZLIB_Z_DATA_ERROR","ER_CUT_VALUE_GROUP_CONCAT","ER_WARN_TOO_FEW_RECORDS","ER_WARN_TOO_MANY_RECORDS","ER_WARN_NULL_TO_NOTNULL","ER_WARN_DATA_OUT_OF_RANGE","ER_WARN_USING_OTHER_HANDLER","ER_CANT_AGGREGATE_2COLLATIONS","ER_DROP_USER","ER_REVOKE_GRANTS","ER_CANT_AGGREGATE_3COLLATIONS","ER_CANT_AGGREGATE_NCOLLATIONS","ER_VARIABLE_IS_NOT_STRUCT","ER_UNKNOWN_COLLATION","ER_SLAVE_IGNORED_SSL_PARAMS","ER_SERVER_IS_IN_SECURE_AUTH_MODE","ER_WARN_FIELD_RESOLVED","ER_BAD_SLAVE_UNTIL_COND","ER_MISSING_SKIP_SLAVE","ER_UNTIL_COND_IGNORED","ER_WRONG_NAME_FOR_INDEX","ER_WRONG_NAME_FOR_CATALOG","ER_WARN_QC_RESIZE","ER_BAD_FT_COLUMN","ER_UNKNOWN_KEY_CACHE","ER_WARN_HOSTNAME_WONT_WORK","ER_UNKNOWN_STORAGE_ENGINE","ER_WARN_DEPRECATED_SYNTAX","ER_NON_UPDATABLE_TABLE","ER_FEATURE_DISABLED","ER_OPTION_PREVENTS_STATEMENT","ER_DUPLICATED_VALUE_IN_TYPE","ER_TRUNCATED_WRONG_VALUE","ER_TOO_MUCH_AUTO_TIMESTAMP_COLS","ER_INVALID_ON_UPDATE","ER_UNSUPPORTED_PS","ER_GET_ERRMSG","ER_GET_TEMPORARY_ERRMSG","ER_UNKNOWN_TIME_ZONE","ER_WARN_INVALID_TIMESTAMP","ER_INVALID_CHARACTER_STRING","ER_WARN_ALLOWED_PACKET_OVERFLOWED","ER_CONFLICTING_DECLARATIONS","ER_SP_NO_RECURSIVE_CREATE","ER_SP_ALREADY_EXISTS","ER_SP_DOES_NOT_EXIST","ER_SP_DROP_FAILED","ER_SP_STORE_FAILED","ER_SP_LILABEL_MISMATCH","ER_SP_LABEL_REDEFINE","ER_SP_LABEL_MISMATCH","ER_SP_UNINIT_VAR","ER_SP_BADSELECT","ER_SP_BADRETURN","ER_SP_BADSTATEMENT","ER_UPDATE_LOG_DEPRECATED_IGNORED","ER_UPDATE_LOG_DEPRECATED_TRANSLATED","ER_QUERY_INTERRUPTED","ER_SP_WRONG_NO_OF_ARGS","ER_SP_COND_MISMATCH","ER_SP_NORETURN","ER_SP_NORETURNEND","ER_SP_BAD_CURSOR_QUERY","ER_SP_BAD_CURSOR_SELECT","ER_SP_CURSOR_MISMATCH","ER_SP_CURSOR_ALREADY_OPEN","ER_SP_CURSOR_NOT_OPEN","ER_SP_UNDECLARED_VAR","ER_SP_WRONG_NO_OF_FETCH_ARGS","ER_SP_FETCH_NO_DATA","ER_SP_DUP_PARAM","ER_SP_DUP_VAR","ER_SP_DUP_COND","ER_SP_DUP_CURS","ER_SP_CANT_ALTER","ER_SP_SUBSELECT_NYI","ER_STMT_NOT_ALLOWED_IN_SF_OR_TRG","ER_SP_VARCOND_AFTER_CURSHNDLR","ER_SP_CURSOR_AFTER_HANDLER","ER_SP_CASE_NOT_FOUND","ER_FPARSER_TOO_BIG_FILE","ER_FPARSER_BAD_HEADER","ER_FPARSER_EOF_IN_COMMENT","ER_FPARSER_ERROR_IN_PARAMETER","ER_FPARSER_EOF_IN_UNKNOWN_PARAMETER","ER_VIEW_NO_EXPLAIN","ER_FRM_UNKNOWN_TYPE","ER_WRONG_OBJECT","ER_NONUPDATEABLE_COLUMN","ER_VIEW_SELECT_DERIVED","ER_VIEW_SELECT_CLAUSE","ER_VIEW_SELECT_VARIABLE","ER_VIEW_SELECT_TMPTABLE","ER_VIEW_WRONG_LIST","ER_WARN_VIEW_MERGE","ER_WARN_VIEW_WITHOUT_KEY","ER_VIEW_INVALID","ER_SP_NO_DROP_SP","ER_SP_GOTO_IN_HNDLR","ER_TRG_ALREADY_EXISTS","ER_TRG_DOES_NOT_EXIST","ER_TRG_ON_VIEW_OR_TEMP_TABLE","ER_TRG_CANT_CHANGE_ROW","ER_TRG_NO_SUCH_ROW_IN_TRG","ER_NO_DEFAULT_FOR_FIELD","ER_DIVISION_BY_ZERO","ER_TRUNCATED_WRONG_VALUE_FOR_FIELD","ER_ILLEGAL_VALUE_FOR_TYPE","ER_VIEW_NONUPD_CHECK","ER_VIEW_CHECK_FAILED","ER_PROCACCESS_DENIED_ERROR","ER_RELAY_LOG_FAIL","ER_PASSWD_LENGTH","ER_UNKNOWN_TARGET_BINLOG","ER_IO_ERR_LOG_INDEX_READ","ER_BINLOG_PURGE_PROHIBITED","ER_FSEEK_FAIL","ER_BINLOG_PURGE_FATAL_ERR","ER_LOG_IN_USE","ER_LOG_PURGE_UNKNOWN_ERR","ER_RELAY_LOG_INIT","ER_NO_BINARY_LOGGING","ER_RESERVED_SYNTAX","ER_WSAS_FAILED","ER_DIFF_GROUPS_PROC","ER_NO_GROUP_FOR_PROC","ER_ORDER_WITH_PROC","ER_LOGGING_PROHIBIT_CHANGING_OF","ER_NO_FILE_MAPPING","ER_WRONG_MAGIC","ER_PS_MANY_PARAM","ER_KEY_PART_0","ER_VIEW_CHECKSUM","ER_VIEW_MULTIUPDATE","ER_VIEW_NO_INSERT_FIELD_LIST","ER_VIEW_DELETE_MERGE_VIEW","ER_CANNOT_USER","ER_XAER_NOTA","ER_XAER_INVAL","ER_XAER_RMFAIL","ER_XAER_OUTSIDE","ER_XAER_RMERR","ER_XA_RBROLLBACK","ER_NONEXISTING_PROC_GRANT","ER_PROC_AUTO_GRANT_FAIL","ER_PROC_AUTO_REVOKE_FAIL","ER_DATA_TOO_LONG","ER_SP_BAD_SQLSTATE","ER_STARTUP","ER_LOAD_FROM_FIXED_SIZE_ROWS_TO_VAR","ER_CANT_CREATE_USER_WITH_GRANT","ER_WRONG_VALUE_FOR_TYPE","ER_TABLE_DEF_CHANGED","ER_SP_DUP_HANDLER","ER_SP_NOT_VAR_ARG","ER_SP_NO_RETSET","ER_CANT_CREATE_GEOMETRY_OBJECT","ER_FAILED_ROUTINE_BREAK_BINLOG","ER_BINLOG_UNSAFE_ROUTINE","ER_BINLOG_CREATE_ROUTINE_NEED_SUPER","ER_EXEC_STMT_WITH_OPEN_CURSOR","ER_STMT_HAS_NO_OPEN_CURSOR","ER_COMMIT_NOT_ALLOWED_IN_SF_OR_TRG","ER_NO_DEFAULT_FOR_VIEW_FIELD","ER_SP_NO_RECURSION","ER_TOO_BIG_SCALE","ER_TOO_BIG_PRECISION","ER_M_BIGGER_THAN_D","ER_WRONG_LOCK_OF_SYSTEM_TABLE","ER_CONNECT_TO_FOREIGN_DATA_SOURCE","ER_QUERY_ON_FOREIGN_DATA_SOURCE","ER_FOREIGN_DATA_SOURCE_DOESNT_EXIST","ER_FOREIGN_DATA_STRING_INVALID_CANT_CREATE","ER_FOREIGN_DATA_STRING_INVALID","ER_CANT_CREATE_FEDERATED_TABLE","ER_TRG_IN_WRONG_SCHEMA","ER_STACK_OVERRUN_NEED_MORE","ER_TOO_LONG_BODY","ER_WARN_CANT_DROP_DEFAULT_KEYCACHE","ER_TOO_BIG_DISPLAYWIDTH","ER_XAER_DUPID","ER_DATETIME_FUNCTION_OVERFLOW","ER_CANT_UPDATE_USED_TABLE_IN_SF_OR_TRG","ER_VIEW_PREVENT_UPDATE","ER_PS_NO_RECURSION","ER_SP_CANT_SET_AUTOCOMMIT","ER_MALFORMED_DEFINER","ER_VIEW_FRM_NO_USER","ER_VIEW_OTHER_USER","ER_NO_SUCH_USER","ER_FORBID_SCHEMA_CHANGE","ER_ROW_IS_REFERENCED_2","ER_NO_REFERENCED_ROW_2","ER_SP_BAD_VAR_SHADOW","ER_TRG_NO_DEFINER","ER_OLD_FILE_FORMAT","ER_SP_RECURSION_LIMIT","ER_SP_PROC_TABLE_CORRUPT","ER_SP_WRONG_NAME","ER_TABLE_NEEDS_UPGRADE","ER_SP_NO_AGGREGATE","ER_MAX_PREPARED_STMT_COUNT_REACHED","ER_VIEW_RECURSIVE","ER_NON_GROUPING_FIELD_USED","ER_TABLE_CANT_HANDLE_SPKEYS","ER_NO_TRIGGERS_ON_SYSTEM_SCHEMA","ER_REMOVED_SPACES","ER_AUTOINC_READ_FAILED","ER_USERNAME","ER_HOSTNAME","ER_WRONG_STRING_LENGTH","ER_NON_INSERTABLE_TABLE","ER_ADMIN_WRONG_MRG_TABLE","ER_TOO_HIGH_LEVEL_OF_NESTING_FOR_SELECT","ER_NAME_BECOMES_EMPTY","ER_AMBIGUOUS_FIELD_TERM","ER_FOREIGN_SERVER_EXISTS","ER_FOREIGN_SERVER_DOESNT_EXIST","ER_ILLEGAL_HA_CREATE_OPTION","ER_PARTITION_REQUIRES_VALUES_ERROR","ER_PARTITION_WRONG_VALUES_ERROR","ER_PARTITION_MAXVALUE_ERROR","ER_PARTITION_SUBPARTITION_ERROR","ER_PARTITION_SUBPART_MIX_ERROR","ER_PARTITION_WRONG_NO_PART_ERROR","ER_PARTITION_WRONG_NO_SUBPART_ERROR","ER_CONST_EXPR_IN_PARTITION_FUNC_ERROR","ER_CONST_EXPR_IN_PARTITION_FUNC_ERROR","ER_WRONG_EXPR_IN_PARTITION_FUNC_ERROR","ER_CONST_EXPR_IN_PARTITION_FUNC_ERROR","ER_WRONG_EXPR_IN_PARTITION_FUNC_ERROR","ER_CONST_EXPR_IN_PARTITION_FUNC_ERROR","ER_WRONG_EXPR_IN_PARTITION_FUNC_ERROR","ER_WRONG_EXPR_IN_PARTITION_FUNC_ERROR","ER_NO_CONST_EXPR_IN_RANGE_OR_LIST_ERROR","ER_FIELD_NOT_FOUND_PART_ERROR","ER_LIST_OF_FIELDS_ONLY_IN_HASH_ERROR","ER_INCONSISTENT_PARTITION_INFO_ERROR","ER_PARTITION_FUNC_NOT_ALLOWED_ERROR","ER_PARTITIONS_MUST_BE_DEFINED_ERROR","ER_RANGE_NOT_INCREASING_ERROR","ER_INCONSISTENT_TYPE_OF_FUNCTIONS_ERROR","ER_MULTIPLE_DEF_CONST_IN_LIST_PART_ERROR","ER_PARTITION_ENTRY_ERROR","ER_MIX_HANDLER_ERROR","ER_PARTITION_NOT_DEFINED_ERROR","ER_TOO_MANY_PARTITIONS_ERROR","ER_SUBPARTITION_ERROR","ER_CANT_CREATE_HANDLER_FILE","ER_BLOB_FIELD_IN_PART_FUNC_ERROR","ER_UNIQUE_KEY_NEED_ALL_FIELDS_IN_PF","ER_NO_PARTS_ERROR","ER_PARTITION_MGMT_ON_NONPARTITIONED","ER_FOREIGN_KEY_ON_PARTITIONED","ER_DROP_PARTITION_NON_EXISTENT","ER_DROP_LAST_PARTITION","ER_COALESCE_ONLY_ON_HASH_PARTITION","ER_REORG_HASH_ONLY_ON_SAME_NO","ER_REORG_NO_PARAM_ERROR","ER_ONLY_ON_RANGE_LIST_PARTITION","ER_ADD_PARTITION_SUBPART_ERROR","ER_ADD_PARTITION_NO_NEW_PARTITION","ER_COALESCE_PARTITION_NO_PARTITION","ER_REORG_PARTITION_NOT_EXIST","ER_SAME_NAME_PARTITION","ER_NO_BINLOG_ERROR","ER_CONSECUTIVE_REORG_PARTITIONS","ER_REORG_OUTSIDE_RANGE","ER_PARTITION_FUNCTION_FAILURE","ER_PART_STATE_ERROR","ER_LIMITED_PART_RANGE","ER_PLUGIN_IS_NOT_LOADED","ER_WRONG_VALUE","ER_NO_PARTITION_FOR_GIVEN_VALUE","ER_FILEGROUP_OPTION_ONLY_ONCE","ER_CREATE_FILEGROUP_FAILED","ER_DROP_FILEGROUP_FAILED","ER_TABLESPACE_AUTO_EXTEND_ERROR","ER_WRONG_SIZE_NUMBER","ER_SIZE_OVERFLOW_ERROR","ER_ALTER_FILEGROUP_FAILED","ER_BINLOG_ROW_LOGGING_FAILED","ER_BINLOG_ROW_WRONG_TABLE_DEF","ER_BINLOG_ROW_RBR_TO_SBR","ER_EVENT_ALREADY_EXISTS","ER_EVENT_STORE_FAILED","ER_EVENT_DOES_NOT_EXIST","ER_EVENT_CANT_ALTER","ER_EVENT_DROP_FAILED","ER_EVENT_INTERVAL_NOT_POSITIVE_OR_TOO_BIG","ER_EVENT_ENDS_BEFORE_STARTS","ER_EVENT_EXEC_TIME_IN_THE_PAST","ER_EVENT_OPEN_TABLE_FAILED","ER_EVENT_NEITHER_M_EXPR_NOR_M_AT","ER_COL_COUNT_DOESNT_MATCH_CORRUPTED","ER_CANNOT_LOAD_FROM_TABLE","ER_EVENT_CANNOT_DELETE","ER_EVENT_COMPILE_ERROR","ER_EVENT_SAME_NAME","ER_EVENT_DATA_TOO_LONG","ER_DROP_INDEX_FK","ER_WARN_DEPRECATED_SYNTAX_WITH_VER","ER_CANT_WRITE_LOCK_LOG_TABLE","ER_CANT_LOCK_LOG_TABLE","ER_FOREIGN_DUPLICATE_KEY","ER_COL_COUNT_DOESNT_MATCH_PLEASE_UPDATE","ER_TEMP_TABLE_PREVENTS_SWITCH_OUT_OF_RBR","ER_STORED_FUNCTION_PREVENTS_SWITCH_BINLOG_FORMAT","ER_NDB_CANT_SWITCH_BINLOG_FORMAT","ER_PARTITION_NO_TEMPORARY","ER_PARTITION_CONST_DOMAIN_ERROR","ER_PARTITION_FUNCTION_IS_NOT_ALLOWED","ER_DDL_LOG_ERROR","ER_NULL_IN_VALUES_LESS_THAN","ER_WRONG_PARTITION_NAME","ER_CANT_CHANGE_TX_ISOLATION","ER_DUP_ENTRY_AUTOINCREMENT_CASE","ER_EVENT_MODIFY_QUEUE_ERROR","ER_EVENT_SET_VAR_ERROR","ER_PARTITION_MERGE_ERROR","ER_CANT_ACTIVATE_LOG","ER_RBR_NOT_AVAILABLE","ER_BASE64_DECODE_ERROR","ER_EVENT_RECURSION_FORBIDDEN","ER_EVENTS_DB_ERROR","ER_ONLY_INTEGERS_ALLOWED","ER_UNSUPORTED_LOG_ENGINE","ER_BAD_LOG_STATEMENT","ER_CANT_RENAME_LOG_TABLE","ER_WRONG_PARAMCOUNT_TO_NATIVE_FCT","ER_WRONG_PARAMETERS_TO_NATIVE_FCT","ER_WRONG_PARAMETERS_TO_STORED_FCT","ER_NATIVE_FCT_NAME_COLLISION","ER_DUP_ENTRY_WITH_KEY_NAME","ER_DUP_ENTRY","ER_BINLOG_PURGE_EMFILE","ER_EVENT_CANNOT_CREATE_IN_THE_PAST","ER_EVENT_CANNOT_ALTER_IN_THE_PAST","ER_SLAVE_INCIDENT","ER_NO_PARTITION_FOR_GIVEN_VALUE_SILENT","ER_BINLOG_UNSAFE_STATEMENT","ER_SLAVE_FATAL_ERROR","ER_SLAVE_RELAY_LOG_READ_FAILURE","ER_SLAVE_RELAY_LOG_WRITE_FAILURE","ER_SLAVE_CREATE_EVENT_FAILURE","ER_SLAVE_MASTER_COM_FAILURE","ER_BINLOG_LOGGING_IMPOSSIBLE","ER_VIEW_NO_CREATION_CTX","ER_VIEW_INVALID_CREATION_CTX","ER_SR_INVALID_CREATION_CTX","ER_TRG_CORRUPTED_FILE","ER_TRG_NO_CREATION_CTX","ER_TRG_INVALID_CREATION_CTX","ER_EVENT_INVALID_CREATION_CTX","ER_TRG_CANT_OPEN_TABLE","ER_CANT_CREATE_SROUTINE","ER_SLAVE_AMBIGOUS_EXEC_MODE","ER_SLAVE_AMBIGOUS_EXEC_MODE","ER_NEVER_USED","ER_SLAVE_AMBIGOUS_EXEC_MODE","ER_NEVER_USED","ER_SLAVE_AMBIGOUS_EXEC_MODE","ER_NEVER_USED","ER_NEVER_USED","ER_NO_FORMAT_DESCRIPTION_EVENT_BEFORE_BINLOG_STATEMENT","ER_SLAVE_CORRUPT_EVENT","ER_LOAD_DATA_INVALID_COLUMN","ER_LOG_PURGE_NO_FILE","ER_XA_RBTIMEOUT","ER_XA_RBDEADLOCK","ER_NEED_REPREPARE","ER_DELAYED_NOT_SUPPORTED","ER_VARIABLE_IS_READONLY","ER_WARN_ENGINE_TRANSACTION_ROLLBACK","ER_SLAVE_HEARTBEAT_FAILURE","ER_SLAVE_HEARTBEAT_VALUE_OUT_OF_RANGE","ER_NDB_REPLICATION_SCHEMA_ERROR","ER_CONFLICT_FN_PARSE_ERROR","ER_EXCEPTIONS_WRITE_ERROR","ER_TOO_LONG_TABLE_COMMENT","ER_TOO_LONG_FIELD_COMMENT","ER_FUNC_INEXISTENT_NAME_COLLISION","ER_DATABASE_NAME","ER_TABLE_NAME","ER_PARTITION_NAME","ER_SUBPARTITION_NAME","ER_TEMPORARY_NAME","ER_RENAMED_NAME","ER_TOO_MANY_CONCURRENT_TRXS","ER_DEBUG_SYNC_TIMEOUT","ER_DEBUG_SYNC_HIT_LIMIT","ER_DUP_SIGNAL_SET","ER_SIGNAL_WARN","ER_SIGNAL_NOT_FOUND","ER_SIGNAL_EXCEPTION","ER_RESIGNAL_WITHOUT_ACTIVE_HANDLER","ER_SIGNAL_BAD_CONDITION_TYPE","ER_COND_ITEM_TOO_LONG","ER_UNKNOWN_LOCALE","ER_SLAVE_IGNORE_SERVER_IDS","ER_QUERY_CACHE_DISABLED","ER_SAME_NAME_PARTITION_FIELD","ER_PARTITION_COLUMN_LIST_ERROR","ER_WRONG_TYPE_COLUMN_VALUE_ERROR","ER_TOO_MANY_PARTITION_FUNC_FIELDS_ERROR","ER_MAXVALUE_IN_VALUES_IN","ER_TOO_MANY_VALUES_ERROR","ER_ROW_SINGLE_PARTITION_FIELD_ERROR","ER_FIELD_TYPE_NOT_ALLOWED_AS_PARTITION_FIELD","ER_PARTITION_FIELDS_TOO_LONG","ER_BINLOG_ROW_ENGINE_AND_STMT_ENGINE","ER_BINLOG_ROW_ENGINE_AND_STMT_ENGINE","ER_BINLOG_ROW_MODE_AND_STMT_ENGINE","ER_BINLOG_ROW_MODE_AND_STMT_ENGINE","ER_BINLOG_UNSAFE_AND_STMT_ENGINE","ER_BINLOG_UNSAFE_AND_STMT_ENGINE","ER_BINLOG_ROW_INJECTION_AND_STMT_ENGINE","ER_BINLOG_ROW_INJECTION_AND_STMT_ENGINE","ER_BINLOG_STMT_MODE_AND_ROW_ENGINE","ER_BINLOG_STMT_MODE_AND_ROW_ENGINE","ER_BINLOG_ROW_INJECTION_AND_STMT_MODE","ER_BINLOG_ROW_INJECTION_AND_STMT_MODE","ER_BINLOG_MULTIPLE_ENGINES_AND_SELF_LOGGING_ENGINE","ER_BINLOG_MULTIPLE_ENGINES_AND_SELF_LOGGING_ENGINE","ER_BINLOG_UNSAFE_LIMIT","ER_BINLOG_UNSAFE_LIMIT","ER_BINLOG_UNSAFE_INSERT_DELAYED","ER_BINLOG_UNSAFE_INSERT_DELAYED","ER_BINLOG_UNSAFE_SYSTEM_TABLE","ER_BINLOG_UNSAFE_SYSTEM_TABLE","ER_BINLOG_UNSAFE_AUTOINC_COLUMNS","ER_BINLOG_UNSAFE_AUTOINC_COLUMNS","ER_BINLOG_UNSAFE_UDF","ER_BINLOG_UNSAFE_UDF","ER_BINLOG_UNSAFE_SYSTEM_VARIABLE","ER_BINLOG_UNSAFE_SYSTEM_VARIABLE","ER_BINLOG_UNSAFE_SYSTEM_FUNCTION","ER_BINLOG_UNSAFE_SYSTEM_FUNCTION","ER_BINLOG_UNSAFE_NONTRANS_AFTER_TRANS","ER_BINLOG_UNSAFE_NONTRANS_AFTER_TRANS","ER_MESSAGE_AND_STATEMENT","ER_MESSAGE_AND_STATEMENT","ER_SLAVE_CONVERSION_FAILED","ER_SLAVE_CONVERSION_FAILED","ER_SLAVE_CANT_CREATE_CONVERSION","ER_SLAVE_CANT_CREATE_CONVERSION","ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_BINLOG_FORMAT","ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_BINLOG_FORMAT","ER_PATH_LENGTH","ER_PATH_LENGTH","ER_WARN_DEPRECATED_SYNTAX_NO_REPLACEMENT","ER_WARN_DEPRECATED_SYNTAX_NO_REPLACEMENT","ER_WRONG_NATIVE_TABLE_STRUCTURE","ER_WRONG_NATIVE_TABLE_STRUCTURE","ER_WRONG_PERFSCHEMA_USAGE","ER_WRONG_PERFSCHEMA_USAGE","ER_WARN_I_S_SKIPPED_TABLE","ER_WARN_I_S_SKIPPED_TABLE","ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_BINLOG_DIRECT","ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_BINLOG_DIRECT","ER_STORED_FUNCTION_PREVENTS_SWITCH_BINLOG_DIRECT","ER_STORED_FUNCTION_PREVENTS_SWITCH_BINLOG_DIRECT","ER_SPATIAL_MUST_HAVE_GEOM_COL","ER_SPATIAL_MUST_HAVE_GEOM_COL","ER_TOO_LONG_INDEX_COMMENT","ER_TOO_LONG_INDEX_COMMENT","ER_LOCK_ABORTED","ER_LOCK_ABORTED","ER_DATA_OUT_OF_RANGE","ER_DATA_OUT_OF_RANGE","ER_WRONG_SPVAR_TYPE_IN_LIMIT","ER_WRONG_SPVAR_TYPE_IN_LIMIT","ER_BINLOG_UNSAFE_MULTIPLE_ENGINES_AND_SELF_LOGGING_ENGINE","ER_BINLOG_UNSAFE_MULTIPLE_ENGINES_AND_SELF_LOGGING_ENGINE","ER_BINLOG_UNSAFE_MIXED_STATEMENT","ER_BINLOG_UNSAFE_MIXED_STATEMENT","ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_SQL_LOG_BIN","ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_SQL_LOG_BIN","ER_STORED_FUNCTION_PREVENTS_SWITCH_SQL_LOG_BIN","ER_STORED_FUNCTION_PREVENTS_SWITCH_SQL_LOG_BIN","ER_FAILED_READ_FROM_PAR_FILE","ER_FAILED_READ_FROM_PAR_FILE","ER_VALUES_IS_NOT_INT_TYPE_ERROR","ER_VALUES_IS_NOT_INT_TYPE_ERROR","ER_ACCESS_DENIED_NO_PASSWORD_ERROR","ER_ACCESS_DENIED_NO_PASSWORD_ERROR","ER_SET_PASSWORD_AUTH_PLUGIN","ER_SET_PASSWORD_AUTH_PLUGIN","ER_GRANT_PLUGIN_USER_EXISTS","ER_GRANT_PLUGIN_USER_EXISTS","ER_TRUNCATE_ILLEGAL_FK","ER_TRUNCATE_ILLEGAL_FK","ER_PLUGIN_IS_PERMANENT","ER_PLUGIN_IS_PERMANENT","ER_SLAVE_HEARTBEAT_VALUE_OUT_OF_RANGE_MIN","ER_SLAVE_HEARTBEAT_VALUE_OUT_OF_RANGE_MIN","ER_SLAVE_HEARTBEAT_VALUE_OUT_OF_RANGE_MAX","ER_SLAVE_HEARTBEAT_VALUE_OUT_OF_RANGE_MAX","ER_STMT_CACHE_FULL","ER_STMT_CACHE_FULL","ER_MULTI_UPDATE_KEY_CONFLICT","ER_MULTI_UPDATE_KEY_CONFLICT","ER_TABLE_NEEDS_REBUILD","ER_TABLE_NEEDS_REBUILD","ER_INDEX_COLUMN_TOO_LONG","ER_INDEX_COLUMN_TOO_LONG","ER_ERROR_IN_TRIGGER_BODY","ER_ERROR_IN_TRIGGER_BODY","ER_ERROR_IN_UNKNOWN_TRIGGER_BODY","ER_ERROR_IN_UNKNOWN_TRIGGER_BODY","ER_INDEX_CORRUPT","ER_INDEX_CORRUPT","ER_UNDO_RECORD_TOO_BIG","ER_UNDO_RECORD_TOO_BIG","ER_BINLOG_UNSAFE_INSERT_IGNORE_SELECT","ER_BINLOG_UNSAFE_INSERT_IGNORE_SELECT","ER_BINLOG_UNSAFE_INSERT_SELECT_UPDATE","ER_BINLOG_UNSAFE_INSERT_SELECT_UPDATE","ER_BINLOG_UNSAFE_REPLACE_SELECT","ER_BINLOG_UNSAFE_REPLACE_SELECT","ER_BINLOG_UNSAFE_CREATE_IGNORE_SELECT","ER_BINLOG_UNSAFE_CREATE_IGNORE_SELECT","ER_BINLOG_UNSAFE_CREATE_REPLACE_SELECT","ER_BINLOG_UNSAFE_CREATE_REPLACE_SELECT","ER_BINLOG_UNSAFE_UPDATE_IGNORE","ER_BINLOG_UNSAFE_UPDATE_IGNORE","ER_PLUGIN_NO_UNINSTALL","ER_PLUGIN_NO_UNINSTALL","ER_PLUGIN_NO_INSTALL","ER_PLUGIN_NO_INSTALL","ER_BINLOG_UNSAFE_WRITE_AUTOINC_SELECT","ER_BINLOG_UNSAFE_WRITE_AUTOINC_SELECT","ER_BINLOG_UNSAFE_CREATE_SELECT_AUTOINC","ER_BINLOG_UNSAFE_CREATE_SELECT_AUTOINC","ER_BINLOG_UNSAFE_INSERT_TWO_KEYS","ER_BINLOG_UNSAFE_INSERT_TWO_KEYS","ER_TABLE_IN_FK_CHECK","ER_TABLE_IN_FK_CHECK","ER_UNSUPPORTED_ENGINE","ER_UNSUPPORTED_ENGINE","ER_BINLOG_UNSAFE_AUTOINC_NOT_FIRST","ER_BINLOG_UNSAFE_AUTOINC_NOT_FIRST"]);
},{}],"Cp29":[function(require,module,exports) {
"use strict";const e={16:new Set([241,242,245,515,547,8152,5e4]),14:new Set([2601,2627])};function t(t){const r=e[t.severity];return!!r&&r.has(t.errorCode)}module.exports={has:t};
},{}],"l5hF":[function(require,module,exports) {
"use strict";const s=require("./postgres"),e=require("./mysql"),r=require("./mssql");module.exports={postgres:s,mysql:e,mssql:r};
},{"./postgres":"oi6O","./mysql":"MPaQ","./mssql":"Cp29"}],"tB0p":[function(require,module,exports) {
"use strict";const e=require("./DBError");class r extends e{}module.exports=r;
},{"./DBError":"LNRo"}],"r0MZ":[function(require,module,exports) {
function t(t){return t.substr(0,2)}module.exports={getSqlStateClass:t};
},{}],"lFHM":[function(require,module,exports) {
"use strict";const s=require("./ConstraintViolationError");class t extends s{constructor(s){super(s),this.table=s.table,this.columns=s.columns,this.constraint=s.constraint,this.schema=s.schema}}module.exports=t;
},{"./ConstraintViolationError":"tB0p"}],"H054":[function(require,module,exports) {
const r=require("../../../../../errors/UniqueViolationError"),e=/Key \((.+)\)=\(.+\) already exists/;function t(r){return'"'===r[0]&&'"'===r[r.length-1]?r.substr(1,r.length-2):r}module.exports={error:r,parse:r=>{if("23505"!==r.code)return null;const n=e.exec(r.detail);if(!n)return null;const s=n[1].split(",").map(r=>r.trim()).map(r=>t(r));return{table:r.table,columns:s,constraint:r.constraint}},subclassParsers:[]};
},{"../../../../../errors/UniqueViolationError":"lFHM"}],"ZZEP":[function(require,module,exports) {
"use strict";const s=require("./ConstraintViolationError");class t extends s{constructor(s){super(s),this.table=s.table,this.column=s.column,this.schema=s.schema,this.database=s.database}}module.exports=t;
},{"./ConstraintViolationError":"tB0p"}],"Ywen":[function(require,module,exports) {
const r=require("../../../../../errors/NotNullViolationError");module.exports={error:r,parse:r=>"23502"===r.code?{table:r.table,column:r.column}:null,subclassParsers:[]};
},{"../../../../../errors/NotNullViolationError":"ZZEP"}],"sRS2":[function(require,module,exports) {
"use strict";const t=require("./ConstraintViolationError");class s extends t{constructor(t){super(t),this.table=t.table,this.constraint=t.constraint,this.schema=t.schema}}module.exports=s;
},{"./ConstraintViolationError":"tB0p"}],"RAPN":[function(require,module,exports) {
const r=require("../../../../../errors/ForeignKeyViolationError");module.exports={error:r,parse:r=>"23503"===r.code?{table:r.table,constraint:r.constraint}:null,subclassParsers:[]};
},{"../../../../../errors/ForeignKeyViolationError":"sRS2"}],"xwuq":[function(require,module,exports) {
"use strict";const t=require("./ConstraintViolationError");class s extends t{constructor(t){super(t),this.table=t.table,this.constraint=t.constraint}}module.exports=s;
},{"./ConstraintViolationError":"tB0p"}],"GEg3":[function(require,module,exports) {
const r=require("../../../../../errors/CheckViolationError");module.exports={error:r,parse:r=>"23514"===r.code?{table:r.table,constraint:r.constraint}:null,subclassParsers:[]};
},{"../../../../../errors/CheckViolationError":"xwuq"}],"Sf29":[function(require,module,exports) {
const r=require("../../../../errors/ConstraintViolationError"),{getSqlStateClass:e}=require("../../../../utils/sqlState");module.exports={error:r,parse:r=>"23"===e(r.code)?{}:null,subclassParsers:[require("./UniqueViolationError/parser"),require("./NotNullViolationError/parser"),require("./ForeignKeyViolationError/parser"),require("./CheckViolationError/parser")]};
},{"../../../../errors/ConstraintViolationError":"tB0p","../../../../utils/sqlState":"r0MZ","./UniqueViolationError/parser":"H054","./NotNullViolationError/parser":"Ywen","./ForeignKeyViolationError/parser":"RAPN","./CheckViolationError/parser":"GEg3"}],"j4MG":[function(require,module,exports) {
const r=require("../../../../errors/DataError"),{getSqlStateClass:e}=require("../../../../utils/sqlState");module.exports={error:r,parse:r=>"22"===e(r.code)?{}:null,subclassParsers:[]};
},{"../../../../errors/DataError":"tB0p","../../../../utils/sqlState":"r0MZ"}],"uBRM":[function(require,module,exports) {
"use strict";const r=require("../../../errors/DBError"),e=require("../../../errorCodes").postgres;module.exports={error:r,parse:r=>"string"==typeof r.code&&5===r.code.length&&e.has(r.code)&&"internalQuery"in r&&"table"in r?{nativeError:r,client:"postgres"}:null,subclassParsers:[require("./ConstraintViolationError/parser"),require("./DataError/parser")]};
},{"../../../errors/DBError":"LNRo","../../../errorCodes":"l5hF","./ConstraintViolationError/parser":"Sf29","./DataError/parser":"j4MG"}],"sZs7":[function(require,module,exports) {
const r=require("../../../../../errors/UniqueViolationError"),e=/SQLITE_CONSTRAINT: UNIQUE constraint failed: (.+)$/;module.exports={error:r,parse:r=>{const s=e.exec(r.message);if(!s)return null;const t=s[1].split(",").map(r=>r.trim()).map(r=>r.split(".")).map(r=>r.map(r=>r.trim()));return{table:t[0][0],columns:t.map(r=>r[1])}},subclassParsers:[]};
},{"../../../../../errors/UniqueViolationError":"lFHM"}],"FLx7":[function(require,module,exports) {
const r=require("../../../../../errors/NotNullViolationError"),e=/SQLITE_CONSTRAINT: NOT NULL constraint failed: (.+)$/;module.exports={error:r,parse:r=>{const s=e.exec(r.message);if(!s)return null;const t=s[1].trim().split(".").map(r=>r.trim());return{table:t[0],column:t[1]}},subclassParsers:[]};
},{"../../../../../errors/NotNullViolationError":"ZZEP"}],"mG89":[function(require,module,exports) {
const r=require("../../../../../errors/ForeignKeyViolationError"),e=/SQLITE_CONSTRAINT: FOREIGN KEY constraint failed/;module.exports={error:r,parse:r=>{return e.exec(r.message)?{}:null},subclassParsers:[]};
},{"../../../../../errors/ForeignKeyViolationError":"sRS2"}],"h4tb":[function(require,module,exports) {
const r=require("../../../../../errors/CheckViolationError"),e=/SQLITE_CONSTRAINT: CHECK constraint failed/;module.exports={error:r,parse:r=>{return e.exec(r.message)?{}:null},subclassParsers:[]};
},{"../../../../../errors/CheckViolationError":"xwuq"}],"s9F5":[function(require,module,exports) {
const r=require("../../../../errors/ConstraintViolationError");module.exports={error:r,parse:r=>"SQLITE_CONSTRAINT"===r.code?{}:null,subclassParsers:[require("./UniqueViolationError/parser"),require("./NotNullViolationError/parser"),require("./ForeignKeyViolationError/parser"),require("./CheckViolationError/parser")]};
},{"../../../../errors/ConstraintViolationError":"tB0p","./UniqueViolationError/parser":"sZs7","./NotNullViolationError/parser":"FLx7","./ForeignKeyViolationError/parser":"mG89","./CheckViolationError/parser":"h4tb"}],"b3fH":[function(require,module,exports) {
const r=require("../../../errors/DBError");module.exports={error:r,parse:r=>"string"==typeof r.code&&r.code.startsWith("SQLITE_")&&"number"==typeof r.errno?{nativeError:r,client:"sqlite"}:null,subclassParsers:[require("./ConstraintViolationError/parser")]};
},{"../../../errors/DBError":"LNRo","./ConstraintViolationError/parser":"s9F5"}],"ZeBv":[function(require,module,exports) {
const r=require("../../../../../errors/UniqueViolationError"),e=["ER_DUP_ENTRY","ER_DUP_ENTRY_WITH_KEY_NAME"],s=/Duplicate entry '(.+)' for key '(.+)'/;module.exports={error:r,parse:r=>{if(-1===e.indexOf(r.code))return null;const n=s.exec(r.sqlMessage);return n?{constraint:n[2]}:null},subclassParsers:[]};
},{"../../../../../errors/UniqueViolationError":"lFHM"}],"G9yi":[function(require,module,exports) {
const e=require("../../../../../errors/NotNullViolationError"),l=/Column '(.+)' cannot be null/,r=/Field '(.+)' doesn't have a default value/;module.exports={error:e,parse:e=>{let s=null;return"ER_BAD_NULL_ERROR"===e.code?s=l.exec(e.sqlMessage):"ER_NO_DEFAULT_FOR_FIELD"===e.code&&(s=r.exec(e.sqlMessage)),s?{column:s[1]}:null},subclassParsers:[]};
},{"../../../../../errors/NotNullViolationError":"ZZEP"}],"Fx7r":[function(require,module,exports) {
const e=require("../../../../../errors/ForeignKeyViolationError"),E=/a foreign key constraint fails \(`(.+)`\.`(.+)`, CONSTRAINT `(.+)` FOREIGN KEY \(`(.+)`\) REFERENCES `(.+)` \(`(.+)`\)/,r=/Cannot delete or update a parent row: a foreign key constraint fails \(`(.+)`\.`(.+)`, CONSTRAINT `(.+)` FOREIGN KEY \(`(.+)`\) REFERENCES `(.+)` \(`(.+)`\)/;module.exports={error:e,parse:e=>{let R=null;return"ER_NO_REFERENCED_ROW"===e.code||"ER_ROW_IS_REFERENCED"===e.code?{table:null,constraint:null}:("ER_NO_REFERENCED_ROW_2"===e.code?R=E.exec(e.sqlMessage):"ER_ROW_IS_REFERENCED_2"===e.code&&(R=r.exec(e.sqlMessage)),R?{table:R[2],constraint:R[3]}:null)},subclassParsers:[]};
},{"../../../../../errors/ForeignKeyViolationError":"sRS2"}],"J0bq":[function(require,module,exports) {
const r=require("../../../../errors/ConstraintViolationError"),{getSqlStateClass:e}=require("../../../../utils/sqlState");module.exports={error:r,parse:r=>"23"===e(r.sqlState)||"ER_NO_DEFAULT_FOR_FIELD"===r.code?{}:null,subclassParsers:[require("./UniqueViolationError/parser"),require("./NotNullViolationError/parser"),require("./ForeignKeyViolationError/parser")]};
},{"../../../../errors/ConstraintViolationError":"tB0p","../../../../utils/sqlState":"r0MZ","./UniqueViolationError/parser":"ZeBv","./NotNullViolationError/parser":"G9yi","./ForeignKeyViolationError/parser":"Fx7r"}],"kKDE":[function(require,module,exports) {
const r=require("../../../../errors/DataError"),{getSqlStateClass:e}=require("../../../../utils/sqlState"),s=["ER_DATA_TOO_LONG","ER_TRUNCATED_WRONG_VALUE","ER_TRUNCATED_WRONG_VALUE_FOR_FIELD"];module.exports={error:r,parse:r=>"22"===e(r.sqlState)||s.includes(r.code)?{}:null,subclassParsers:[]};
},{"../../../../errors/DataError":"tB0p","../../../../utils/sqlState":"r0MZ"}],"LYFg":[function(require,module,exports) {
const r=require("../../../errors/DBError"),e=require("../../../errorCodes").mysql;module.exports={error:r,parse:r=>"string"==typeof r.code&&"sqlMessage"in r&&"sqlState"in r&&5===r.sqlState.length&&e.has(r.code)&&"number"==typeof r.errno?{nativeError:r,client:"mysql"}:null,subclassParsers:[require("./ConstraintViolationError/parser"),require("./DataError/parser")]};
},{"../../../errors/DBError":"LNRo","../../../errorCodes":"l5hF","./ConstraintViolationError/parser":"J0bq","./DataError/parser":"kKDE"}],"HCvl":[function(require,module,exports) {
function r(r){return{errorCode:r.originalError.info.number,severity:r.originalError.info.class}}function o(o,e,n){const i=r(o);return!!i&&(i.errorCode===n&&i.severity===e)}module.exports={getCode:r,isCode:o};
},{}],"tQkg":[function(require,module,exports) {
const r=require("../../../../errors/CheckViolationError"),{isCode:e}=require("../util"),t=/The (INSERT|UPDATE) statement conflicted with the CHECK constraint "(.+)". The conflict occurred in database "(.+)", table "(.+)", column '(.+)'./;module.exports={error:r,parse:r=>{if(e(r,16,547)){const e=t.exec(r.originalError.message);return e?{table:e[3],constraint:e[1]}:null}return null},subclassParsers:[]};
},{"../../../../errors/CheckViolationError":"xwuq","../util":"HCvl"}],"Y9lA":[function(require,module,exports) {
const r=require("../../../../errors/DataError"),{isCode:e}=require("../util");module.exports={error:r,parse:r=>e(r,16,241)||e(r,16,242)||e(r,16,245)||e(r,16,8152)?{}:null,subclassParsers:[]};
},{"../../../../errors/DataError":"tB0p","../util":"HCvl"}],"Kby5":[function(require,module,exports) {
const e=require("../../../../errors/ForeignKeyViolationError"),{isCode:r}=require("../util"),t=/The (?:INSERT|UPDATE) statement conflicted with the FOREIGN KEY constraint "(.+)". The conflict occurred in database "(.+)", table "(.+)\.(.+)", column '(.+)'./,n=/The DELETE statement conflicted with the REFERENCE constraint "(.+)". The conflict occurred in database "(.+)", table "(.+)\.(.+)", column '(.+)'./;module.exports={error:e,parse:e=>{if(r(e,16,547)){const r=t.exec(e.originalError.message);if(r)return{table:r[4],schema:r[3],constraint:r[1]};const o=n.exec(e.originalError.message);if(o)return{table:o[4],schema:o[3],constraint:o[1]}}return null},subclassParsers:[]};
},{"../../../../errors/ForeignKeyViolationError":"sRS2","../util":"HCvl"}],"FkAc":[function(require,module,exports) {
const e=require("../../../../errors/NotNullViolationError"),{isCode:r}=require("../util"),l=/Cannot insert the value NULL into column '(.+)', table '(.+)\.(.+)\.(.+)'; column does not allow nulls. (?:INSERT|UPDATE) fails./;module.exports={error:e,parse:e=>{if(r(e,16,515)||r(e,16,5e4)){const r=l.exec(e.originalError.message);return r?{column:r[1],database:r[2],schema:r[3],table:r[4]}:null}return null},subclassParsers:[]};
},{"../../../../errors/NotNullViolationError":"ZZEP","../util":"HCvl"}],"dskM":[function(require,module,exports) {
const e=require("../../../../errors/UniqueViolationError"),{isCode:r}=require("../util"),i=/Cannot insert duplicate key row in object '(.+)\.(.+)' with unique index '(.+)'. The duplicate key value is (.+)./,n=/Violation of UNIQUE KEY constraint '(.+)'. Cannot insert duplicate key in object '(.+)\.(.+)'. The duplicate key value is \((.+)\)/;module.exports={error:e,parse:e=>{if(r(e,14,2627)){const r=n.exec(e.originalError.message);return r?{table:r[3],schema:r[2],constraint:r[1]}:null}if(r(e,14,2601)){const r=i.exec(e.originalError.message);return r?{table:r[2],constraint:r[3],schema:r[1]}:null}return null},subclassParsers:[]};
},{"../../../../errors/UniqueViolationError":"lFHM","../util":"HCvl"}],"xPKd":[function(require,module,exports) {
"use strict";const r=require("../../../errors/DBError"),e=require("../../../errorCodes").mssql,{getCode:o}=require("./util");module.exports={error:r,parse:r=>r.originalError&&"EREQUEST"===r.code&&e.has(o(r))?{nativeError:r.originalError,client:"mssql"}:null,subclassParsers:[require("./CheckViolationError/parser"),require("./DataError/parser"),require("./ForeignKeyViolationError/parser"),require("./NotNullViolationError/parser"),require("./UniqueViolationError/parser")]};
},{"../../../errors/DBError":"LNRo","../../../errorCodes":"l5hF","./util":"HCvl","./CheckViolationError/parser":"tQkg","./DataError/parser":"Y9lA","./ForeignKeyViolationError/parser":"Kby5","./NotNullViolationError/parser":"FkAc","./UniqueViolationError/parser":"dskM"}],"HPXo":[function(require,module,exports) {
const r=require("./postgres/DBError/parser"),e=require("./sqlite/DBError/parser"),s=require("./mysql/DBError/parser"),q=require("./mssql/DBError/parser");module.exports={postgres:r,sqlite:e,mysql:s,mssql:q};
},{"./postgres/DBError/parser":"uBRM","./sqlite/DBError/parser":"b3fH","./mysql/DBError/parser":"LYFg","./mssql/DBError/parser":"xPKd"}],"P9Yc":[function(require,module,exports) {
const r=require("./parsers"),o=require("./errors/DBError"),e=require("./errors/ConstraintViolationError"),n=require("./errors/ForeignKeyViolationError"),i=require("./errors/NotNullViolationError"),t=require("./errors/UniqueViolationError"),s=require("./errors/CheckViolationError"),l=require("./errors/DataError");function a(o){const e=Object.keys(r);for(let n=0,i=e.length;n<i;++n){const i=u(r[e[n]],o,null);if(null!==i)return new i.node.error(i.args)}return o}function u(r,o,e){const n=r.parse(o);if(null===n)return null;const i={node:r,args:Object.assign({},e&&e.args,n)};for(let t=0;t<r.subclassParsers.length;++t){const e=u(r.subclassParsers[t],o,i);if(null!==e)return e}return i}module.exports={wrapError:a,DBError:o,UniqueViolationError:t,NotNullViolationError:i,ForeignKeyViolationError:n,ConstraintViolationError:e,CheckViolationError:s,DataError:l};
},{"./parsers":"HPXo","./errors/DBError":"LNRo","./errors/ConstraintViolationError":"tB0p","./errors/ForeignKeyViolationError":"sRS2","./errors/NotNullViolationError":"ZZEP","./errors/UniqueViolationError":"lFHM","./errors/CheckViolationError":"xwuq","./errors/DataError":"tB0p"}],"PzXI":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"ADgl":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"bI4M":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"FaCw":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"PzXI","ieee754":"ADgl","isarray":"bI4M","buffer":"FaCw"}],"v8EV":[function(require,module,exports) {
var global = arguments[3];
var Buffer = require("buffer").Buffer;
var t=arguments[3],r=require("buffer").Buffer;function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}(function(){var r,n=200,o="__lodash_hash_undefined__",u=1,c=2,i=4,a=9007199254740991,s="[object Arguments]",f="[object AsyncFunction]",l="[object Boolean]",p="[object Date]",h="[object Function]",y="[object GeneratorFunction]",_="[object Map]",b="[object Number]",v="[object Null]",d="[object Object]",j="[object Proxy]",g="[object RegExp]",w="[object Set]",m="[object String]",O="[object Symbol]",A="[object Undefined]",z="[object WeakMap]",S="[object ArrayBuffer]",x="[object DataView]",P="[object Float32Array]",k="[object Float64Array]",E="[object Int8Array]",F="[object Int16Array]",I="[object Int32Array]",$="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",L="[object Uint32Array]",M=/\w*$/,T=/^\[object .+?Constructor\]$/,D=/^(?:0|[1-9]\d*)$/,R={};R[P]=R[k]=R[E]=R[F]=R[I]=R[$]=R[B]=R[U]=R[L]=!0,R[s]=R["[object Array]"]=R[S]=R[l]=R[x]=R[p]=R["[object Error]"]=R[h]=R[_]=R[b]=R[d]=R[g]=R[w]=R[m]=R[z]=!1;var N={};N[s]=N["[object Array]"]=N[S]=N[x]=N[l]=N[p]=N[P]=N[k]=N[E]=N[F]=N[I]=N[_]=N[b]=N[d]=N[g]=N[w]=N[m]=N[O]=N[$]=N[B]=N[U]=N[L]=!0,N["[object Error]"]=N[h]=N[z]=!1;var V="object"==(void 0===t?"undefined":e(t))&&t&&t.Object===Object&&t,q=V||Function("return this")(),C="object"==("undefined"==typeof exports?"undefined":e(exports))&&exports&&!exports.nodeType&&exports,W=C&&"object"==("undefined"==typeof module?"undefined":e(module))&&module&&!module.nodeType&&module,G=W&&W.exports===C,H=G&&V.process,J=function(){try{return H&&H.binding&&H.binding("util")}catch(t){}}(),K=J&&J.isMap,Q=J&&J.isSet,X=J&&J.isTypedArray;function Y(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t}function Z(t){return function(r){return t(r)}}function tt(t,r){return function(e){return t(r(e))}}var rt,et=Array.prototype,nt=Function.prototype,ot=Object.prototype,ut=q["__core-js_shared__"],ct=nt.toString,it=ot.hasOwnProperty,at=(rt=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||""))?"Symbol(src)_1."+rt:"",st=ot.toString,ft=RegExp("^"+ct.call(it).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lt=G?q.Buffer:r,pt=q.Symbol,ht=q.Uint8Array,yt=lt?lt.allocUnsafe:r,_t=tt(Object.getPrototypeOf,Object),bt=Object.create,vt=ot.propertyIsEnumerable,dt=et.splice,jt=pt?pt.toStringTag:r,gt=function(){try{var t=or(Object,"defineProperty");return t({},"",{}),t}catch(r){}}(),wt=Object.getOwnPropertySymbols,mt=lt?lt.isBuffer:r,Ot=tt(Object.keys,Object),At=or(q,"DataView"),zt=or(q,"Map"),St=or(q,"Promise"),xt=or(q,"Set"),Pt=or(q,"WeakMap"),kt=or(Object,"create"),Et=fr(At),Ft=fr(zt),It=fr(St),$t=fr(xt),Bt=fr(Pt),Ut=pt?pt.prototype:r,Lt=Ut?Ut.valueOf:r;function Mt(){}var Tt=function(){function t(){}return function(e){if(!dr(e))return{};if(bt)return bt(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function Dt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function Rt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function Nt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function Vt(t){var r=this.__data__=new Rt(t);this.size=r.size}function qt(t,r){var e=hr(t),n=!e&&pr(t),o=!e&&!n&&_r(t),u=!e&&!n&&!o&&mr(t),c=e||n||o||u,i=c?function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}(t.length,String):[],a=i.length;for(var s in t)!r&&!it.call(t,s)||c&&("length"==s||o&&("offset"==s||"parent"==s)||u&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||ar(s,a))||i.push(s);return i}function Ct(t,e,n){var o=t[e];it.call(t,e)&&lr(o,n)&&(n!==r||e in t)||Gt(t,e,n)}function Wt(t,r){for(var e=t.length;e--;)if(lr(t[e][0],r))return e;return-1}function Gt(t,r,e){"__proto__"==r&&gt?gt(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e}function Ht(t,e,n,o,a,f){var v,j=e&u,A=e&c,z=e&i;if(n&&(v=a?n(t,o,a,f):n(t)),v!==r)return v;if(!dr(t))return t;var T=hr(t);if(T){if(v=function(t){var r=t.length,e=new t.constructor(r);r&&"string"==typeof t[0]&&it.call(t,"index")&&(e.index=t.index,e.input=t.input);return e}(t),!j)return function(t,r){var e=-1,n=t.length;r||(r=Array(n));for(;++e<n;)r[e]=t[e];return r}(t,v)}else{var D=ir(t),R=D==h||D==y;if(_r(t))return function(t,r){if(r)return t.slice();var e=t.length,n=yt?yt(e):new t.constructor(e);return t.copy(n),n}(t,j);if(D==d||D==s||R&&!a){if(v=A||R?{}:function(t){return"function"!=typeof t.constructor||sr(t)?{}:Tt(_t(t))}(t),!j)return A?function(t,r){return tr(t,cr(t),r)}(t,function(t,r){return t&&tr(r,Ar(r),t)}(v,t)):function(t,r){return tr(t,ur(t),r)}(t,function(t,r){return t&&tr(r,Or(r),t)}(v,t))}else{if(!N[D])return a?t:{};v=function(t,r,e){var n=t.constructor;switch(r){case S:return Zt(t);case l:case p:return new n(+t);case x:return function(t,r){var e=r?Zt(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case P:case k:case E:case F:case I:case $:case B:case U:case L:return function(t,r){var e=r?Zt(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}(t,e);case _:return new n;case b:case m:return new n(t);case g:return(c=new(u=t).constructor(u.source,M.exec(u))).lastIndex=u.lastIndex,c;case w:return new n;case O:return o=t,Lt?Object(Lt.call(o)):{}}var o;var u,c}(t,D,j)}}f||(f=new Vt);var V=f.get(t);if(V)return V;if(f.set(t,v),wr(t))return t.forEach(function(r){v.add(Ht(r,e,n,r,t,f))}),v;if(gr(t))return t.forEach(function(r,o){v.set(o,Ht(r,e,n,o,t,f))}),v;var q=T?r:(z?A?er:rr:A?Ar:Or)(t);return function(t,r){for(var e=-1,n=null==t?0:t.length;++e<n&&!1!==r(t[e],e,t););}(q||t,function(r,o){q&&(r=t[o=r]),Ct(v,o,Ht(r,e,n,o,t,f))}),v}function Jt(t,r,e){var n=r(t);return hr(t)?n:Y(n,e(t))}function Kt(t){return null==t?t===r?A:v:jt&&jt in Object(t)?function(t){var e=it.call(t,jt),n=t[jt];try{t[jt]=r;var o=!0}catch(c){}var u=st.call(t);o&&(e?t[jt]=n:delete t[jt]);return u}(t):function(t){return st.call(t)}(t)}function Qt(t){return jr(t)&&Kt(t)==s}function Xt(t){return!(!dr(t)||(r=t,at&&at in r))&&(br(t)?ft:T).test(fr(t));var r}function Yt(t){if(!dr(t))return function(t){var r=[];if(null!=t)for(var e in Object(t))r.push(e);return r}(t);var r=sr(t),e=[];for(var n in t)("constructor"!=n||!r&&it.call(t,n))&&e.push(n);return e}function Zt(t){var r=new t.constructor(t.byteLength);return new ht(r).set(new ht(t)),r}function tr(t,e,n,o){var u=!n;n||(n={});for(var c=-1,i=e.length;++c<i;){var a=e[c],s=o?o(n[a],t[a],a,n,t):r;s===r&&(s=t[a]),u?Gt(n,a,s):Ct(n,a,s)}return n}function rr(t){return Jt(t,Or,ur)}function er(t){return Jt(t,Ar,cr)}function nr(t,r){var n,o,u=t.__data__;return("string"==(o=e(n=r))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?u["string"==typeof r?"string":"hash"]:u.map}function or(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return Xt(n)?n:r}Dt.prototype.clear=function(){this.__data__=kt?kt(null):{},this.size=0},Dt.prototype.delete=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},Dt.prototype.get=function(t){var e=this.__data__;if(kt){var n=e[t];return n===o?r:n}return it.call(e,t)?e[t]:r},Dt.prototype.has=function(t){var e=this.__data__;return kt?e[t]!==r:it.call(e,t)},Dt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=kt&&e===r?o:e,this},Rt.prototype.clear=function(){this.__data__=[],this.size=0},Rt.prototype.delete=function(t){var r=this.__data__,e=Wt(r,t);return!(e<0||(e==r.length-1?r.pop():dt.call(r,e,1),--this.size,0))},Rt.prototype.get=function(t){var e=this.__data__,n=Wt(e,t);return n<0?r:e[n][1]},Rt.prototype.has=function(t){return Wt(this.__data__,t)>-1},Rt.prototype.set=function(t,r){var e=this.__data__,n=Wt(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this},Nt.prototype.clear=function(){this.size=0,this.__data__={hash:new Dt,map:new(zt||Rt),string:new Dt}},Nt.prototype.delete=function(t){var r=nr(this,t).delete(t);return this.size-=r?1:0,r},Nt.prototype.get=function(t){return nr(this,t).get(t)},Nt.prototype.has=function(t){return nr(this,t).has(t)},Nt.prototype.set=function(t,r){var e=nr(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this},Vt.prototype.clear=function(){this.__data__=new Rt,this.size=0},Vt.prototype.delete=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e},Vt.prototype.get=function(t){return this.__data__.get(t)},Vt.prototype.has=function(t){return this.__data__.has(t)},Vt.prototype.set=function(t,r){var e=this.__data__;if(e instanceof Rt){var o=e.__data__;if(!zt||o.length<n-1)return o.push([t,r]),this.size=++e.size,this;e=this.__data__=new Nt(o)}return e.set(t,r),this.size=e.size,this};var ur=wt?function(t){return null==t?[]:(t=Object(t),function(t,r){for(var e=-1,n=null==t?0:t.length,o=0,u=[];++e<n;){var c=t[e];r(c,e,t)&&(u[o++]=c)}return u}(wt(t),function(r){return vt.call(t,r)}))}:zr,cr=wt?function(t){for(var r=[];t;)Y(r,ur(t)),t=_t(t);return r}:zr,ir=Kt;function ar(t,r){var n=e(t);return!!(r=null==r?a:r)&&("number"==n||"symbol"!=n&&D.test(t))&&t>-1&&t%1==0&&t<r}function sr(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||ot)}function fr(t){if(null!=t){try{return ct.call(t)}catch(r){}try{return t+""}catch(r){}}return""}function lr(t,r){return t===r||t!=t&&r!=r}(At&&ir(new At(new ArrayBuffer(1)))!=x||zt&&ir(new zt)!=_||St&&"[object Promise]"!=ir(St.resolve())||xt&&ir(new xt)!=w||Pt&&ir(new Pt)!=z)&&(ir=function(t){var e=Kt(t),n=e==d?t.constructor:r,o=n?fr(n):"";if(o)switch(o){case Et:return x;case Ft:return _;case It:return"[object Promise]";case $t:return w;case Bt:return z}return e});var pr=Qt(function(){return arguments}())?Qt:function(t){return jr(t)&&it.call(t,"callee")&&!vt.call(t,"callee")},hr=Array.isArray;function yr(t){return null!=t&&vr(t.length)&&!br(t)}var _r=mt||Sr;function br(t){if(!dr(t))return!1;var r=Kt(t);return r==h||r==y||r==f||r==j}function vr(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function dr(t){var r=e(t);return null!=t&&("object"==r||"function"==r)}function jr(t){return null!=t&&"object"==e(t)}var gr=K?Z(K):function(t){return jr(t)&&ir(t)==_},wr=Q?Z(Q):function(t){return jr(t)&&ir(t)==w},mr=X?Z(X):function(t){return jr(t)&&vr(t.length)&&!!R[Kt(t)]};function Or(t){return yr(t)?qt(t):function(t){if(!sr(t))return Ot(t);var r=[];for(var e in Object(t))it.call(t,e)&&"constructor"!=e&&r.push(e);return r}(t)}function Ar(t){return yr(t)?qt(t,!0):Yt(t)}function zr(){return[]}function Sr(){return!1}Mt.keys=Or,Mt.keysIn=Ar,Mt.clone=function(t){return Ht(t,i)},Mt.cloneDeep=function(t){return Ht(t,u|i)},Mt.eq=lr,Mt.isArguments=pr,Mt.isArray=hr,Mt.isArrayLike=yr,Mt.isBuffer=_r,Mt.isFunction=br,Mt.isLength=vr,Mt.isMap=gr,Mt.isObject=dr,Mt.isObjectLike=jr,Mt.isSet=wr,Mt.isTypedArray=mr,Mt.stubArray=zr,Mt.stubFalse=Sr,Mt.VERSION="4.17.5",W&&((W.exports=Mt)._=Mt,C._=Mt)}).call(this);
},{"buffer":"FaCw"}],"WAAQ":[function(require,module,exports) {
"use strict";function r(n){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(n)}var n=require("./clone"),t=n.clone,e=n.cloneDeep,u=10;function o(r){return Array.isArray(r)?0===r.length:!i(r)||0===Object.keys(r).length}function i(n){return null!==n&&"object"===r(n)}function f(r){return i(r)&&(!r.constructor||r.constructor===Object)&&(!r.toString||r.toString===Object.prototype.toString)}function l(r){return"function"==typeof r}function c(r){return r instanceof RegExp}function a(r){return"string"==typeof r}function s(r){return"number"==typeof r}function g(r){return Array.isArray(r)?r:[r]}function y(r){return Array.isArray(r)?r[0]:r}function h(r){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=new Map,e=0,u=r.length;e<u;++e){var o=r[e],i=null!==n?n(o):o;t.set(i,o)}return Array.from(t.values())}function v(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=new Map,e=!0,u=!1,o=void 0;try{for(var i,f=r[Symbol.iterator]();!(e=(i=f.next()).done);e=!0){var l=i.value,c=null!==n?n(l):l,a=t.get(c);a||(a=[],t.set(c,a)),a.push(l)}}catch(s){u=!0,o=s}finally{try{e||null==f.return||f.return()}finally{if(u)throw o}}return t}function p(r,n){n=g(n);for(var t=Object.keys(r),e={},u=0,o=t.length;u<o;++u){var i=t[u];n.includes(i)||(e[i]=r[i])}return e}function b(r,n){for(var t=new Set(n),e=[],u=0;u<r.length;++u){var o=r[u];t.has(o)||e.push(o)}return e}function m(r,n){return r.length<u&&n.length<u?A(r,n):j(r,n)}function A(r,n){for(var t=r.slice(),e=0,u=n.length;e<u;++e){var o=n[e];-1===t.indexOf(o)&&t.push(o)}return t}function j(r,n){for(var t=new Set,e=0;e<r.length;++e)t.add(r[e]);for(var u=0;u<n.length;++u)t.add(n[u]);return Array.from(t)}function d(r){return r[r.length-1]}function S(r){return r[0].toUpperCase()+r.substring(1)}function O(r){if(i(r)){for(var n=Object.keys(r),t=new Array(n.length),e=0,u=n.length;e<u;++e)t[e]=r[n[e]];return t}return[]}function k(r){var n=!1,t=void 0;return function(){return!1===n&&(n=!0,t=r.apply(this,arguments)),t}}function w(r){for(var n=[],t=0,e=r.length;t<e;++t){var u=r[t];if(Array.isArray(u))for(var o=0;o<u.length;++o)n.push(u[o]);else n.push(u)}return n}function x(r,n){for(var t=0,e=n.length;t<e;++t){var u=n[t];if(!i(r))return;r=r[u]}return r}function D(r,n,t){for(var e=r,u=0,o=n.length-1;u<o;++u){var f=n[u],l=r[f];if(!i(l)){var c=n[u+1];l=isNaN(c)?{}:[],r[f]=l}r=l}return n.length>0&&i(r)&&(r[n[n.length-1]]=t),e}function E(r,n){for(var t={},e=0,u=r.length;e<u;++e)t[r[e]]=n[e];return t}function q(r,n){for(var t=[],e=0,u=r.length;e<u;++e){var o=r[e];0!==t.length&&t[t.length-1].length!==n||t.push([]),t[t.length-1].push(o)}return t}function N(r,n){return B(r,n,z)}function B(r,n,t){return r===n||F(r,n,t)}function F(n,t,e){var u=r(n),o=r(t),i="object"===u&&!e(n,null),f="object"===o&&!e(t,null);if(i&&f){var l=Array.isArray(n),c=Array.isArray(t);return l&&c?M(n,t,e):!l&&!c&&R(n,t,e)}return i===f&&e(n,t)}function M(r,n,t){if(r.length!==n.length)return!1;for(var e=0,u=r.length;e<u;++e)if(!B(r[e],n[e],t))return!1;return!0}function R(r,n,t){if(r.constructor===Date&&n.constructor===Date)return T(r,n);var e=Object.keys(r),u=Object.keys(n);if(e.length!==u.length)return!1;for(var o=0,i=e.length;o<i;++o){var f=e[o];if(!B(r[f],n[f],t))return!1}return!0}function T(r,n){return r.getTime()===n.getTime()}function z(r,n){return r===n}module.exports={isEmpty:o,isString:a,isRegExp:c,isObject:i,isNumber:s,isFunction:l,jsonEquals:N,isPlainObject:f,difference:b,upperFirst:S,zipObject:E,cloneDeep:e,asSingle:y,asArray:g,flatten:w,groupBy:v,uniqBy:h,values:O,union:m,chunk:q,clone:t,omit:p,once:k,last:d,get:x,set:D};
},{"./clone":"v8EV"}],"cwbn":[function(require,module,exports) {
"use strict";var e=["$$queryProps"],r=["$$knex","$$validator","$$jsonSchema","$$colToProp","$$propToCol","$$relationMappings","$$relations","$$relationNames","$$jsonAttributes","$$columnNameMappers","$$tableMetadata","$$readOnlyAttributes","$$idRelationProperty","$$virtualAttributes"];function t(e,r,t){Object.defineProperty(e,r,{enumerable:!1,writable:!0,configurable:!0,value:t})}function $(e,r){for(var t=new Map,$=0,o=e.length;$<o;++$){var a=e[$];t.set(a.$propKey(r),a)}return t}module.exports={hiddenProps:e,staticHiddenProps:r,defineNonEnumerableProperty:t,keyByProps:$};
},{}],"gM8o":[function(require,module,exports) {
"use strict";var r="$";function t(t){return t[0]===r}module.exports={isInternalProp:t};
},{}],"NlkM":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer,e=require("../utils/objectUtils"),n=e.isObject,t=e.cloneDeep,o=require("./modelUtils"),i=o.hiddenProps,u=require("./modelUtils"),s=u.defineNonEnumerableProperty,a=require("../utils/internalPropUtils"),l=a.isInternalProp;function c(r,e,n){var t=null,o=r.$omitFromJson(),i=r.$omitFromDatabaseJson();return t=e||n?m(r,e,n):f(r),o&&t.$omitFromJson(o),i&&t.$omitFromDatabaseJson(i),t=d(r,t)}function f(r){for(var e=new r.constructor,t=Object.keys(r),o=0,i=t.length;o<i;++o){var u=t[o],s=r[u];n(s)?e[u]=v(s):e[u]=s}return e}function m(r,e,t){for(var o=new r.constructor,i=Object.keys(r),u=r.constructor.getRelationNames(),s=0,a=i.length;s<a;++s){var c=i[s],f=r[c];e&&u.includes(c)||t&&l(c)||(n(f)?o[c]=v(f):o[c]=f)}return o}function v(e){return Array.isArray(e)?b(e):e.$isObjectionModel?c(e,!1,!1):r.isBuffer(e)?new r(e):t(e)}function b(r){for(var e=new Array(r.length),t=0,o=e.length;t<o;++t){var i=r[t];n(i)?e[t]=v(i):e[t]=i}return e}function d(r,e){for(var n=0,t=i.length;n<t;++n){var o=i[n];r.hasOwnProperty(o)&&s(e,o,r[o])}return e}module.exports={clone:c};
},{"../utils/objectUtils":"WAAQ","./modelUtils":"cwbn","../utils/internalPropUtils":"gM8o","buffer":"FaCw"}],"wU6M":[function(require,module,exports) {
"use strict";var e=new Map;function n(n){var s=e.get(n.name);return s||(s=t(n.name),e.set(n.name,s)),s(n)}function t(e){return new Function("BaseClass","\n    'use strict';\n    return class ".concat(e," extends BaseClass {}\n  "))}module.exports={inheritModel:n};
},{}],"homf":[function(require,module,exports) {
"use strict";var r=require("./inheritModel"),e=r.inheritModel,n=require("./modelUtils"),t=n.staticHiddenProps,o=require("./modelUtils"),i=o.defineNonEnumerableProperty;function l(r,n){var t=a(r,n);return null===t&&((t=d(r,t=e(r))).knex(n),t=s(r,t=f(r,t,n),n)),t}function a(r,e){var n=u(e),t=r.uniqueTag();return n.get(t)||null}function u(r){return r.$$objection||c(r),r.$$objection.boundModels}function c(r){i(r,"$$objection",{boundModels:new Map})}function d(r,e){var n=!0,o=!1,l=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var c=a.value;r.hasOwnProperty(c)&&"$$relations"!==c&&"$$relationArray"!==c&&i(e,c,r[c])}}catch(d){o=!0,l=d}finally{try{n||null==u.return||u.return()}finally{if(o)throw l}}return e}function f(r,e,n){var t=u(n),o=r.uniqueTag();return t.set(o,e),e}function s(r,e,n){var t=Object.create(null),o=[],l=!0,a=!1,u=void 0;try{for(var c,d=r.getRelationNames()[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var f=c.value,s=r.getRelation(f),v=s.bindKnex(n);t[s.name]=v,o.push(v)}}catch(y){a=!0,u=y}finally{try{l||null==d.return||d.return()}finally{if(a)throw u}}return i(e,"$$relations",t),i(e,"$$relationArray",o),e}module.exports={bindKnex:l};
},{"./inheritModel":"wU6M","./modelUtils":"cwbn"}],"Q3YO":[function(require,module,exports) {
"use strict";var e=require("./modelClone"),t=e.clone;function a(e,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a=a||e,r=i&&i.$isObjectionModel;if(o.skipValidation)return a;r&&(a=t(a,!0,!0),o=Object.assign({},o,{mutable:!0}));var l=e.constructor.getValidator(),n={options:o,model:e,json:a,ctx:Object.create(null)};return l.beforeValidate(n),a=l.validate(n),l.afterValidate(n),r?i.$set(a):a}module.exports={validate:a};
},{"./modelClone":"NlkM"}],"u553":[function(require,module,exports) {
"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}var t=require("../utils/objectUtils"),r=t.isObject,e=t.isFunction;function i(t){var r=n(t);return null!==t&&("object"===r||"function"===r)&&t.client&&t.client.dialect||null}function o(n){return"postgresql"===i(n)}function u(n){var t=i(n);return"oracle"===t||"oracledb"===t}function c(n){var t=i(n);return"mysql"===t||"mysql2"===t}function l(n){return"sqlite3"===i(n)}function s(n){return"mssql"===i(n)}function f(n){return b(n,"Builder")&&"client"in n}function y(n){return b(n,"JoinClause")&&"joinType"in n}function a(n){return b(n,"Raw")&&"client"in n}function m(n){return!!i(n)&&e(n.commit)&&e(n.rollback)}function b(n,t){return r(n)&&e(n.constructor)&&n.constructor.name===t}module.exports={getDialect:i,isPostgres:o,isMySql:c,isSqlite:l,isMsSql:s,isOracle:u,isKnexQueryBuilder:f,isKnexJoinBuilder:y,isKnexRaw:a,isKnexTransaction:m};
},{"../utils/objectUtils":"WAAQ"}],"NYRu":[function(require,module,exports) {
"use strict";var e=new Set;function t(t){e.has(t)||(e.add(t),console.warn(t))}module.exports={deprecate:t};
},{}],"nxcQ":[function(require,module,exports) {
"use strict";var r=require("../utils/objectUtils"),t=r.isObject,n=require("../utils/internalPropUtils"),e=n.isInternalProp;function o(r,n){if(1===n.length&&t(n[0])){var e=n[0];Array.isArray(e)?s(r,e):c(r,e)}else s(r,n);return r}function i(r,n){if(1===n.length&&t(n[0])){var e=n[0];Array.isArray(e)?a(r,e):u(r,e)}else a(r,n);return r}function c(r,t){for(var n=r.constructor,o=Object.keys(t),i=0,c=o.length;i<c;++i){var s=o[i];t[s]&&!e(s)&&r.hasOwnProperty(s)&&n.omitImpl(r,s)}}function s(r,t){for(var n=r.constructor,o=0,i=t.length;o<i;++o){var c=t[o];!e(c)&&r.hasOwnProperty(c)&&n.omitImpl(r,c)}}function u(r,t){for(var n=r.constructor,o=Object.keys(r),i=0,c=o.length;i<c;++i){var s=o[i];e(s)||t[s]||n.omitImpl(r,s)}}function a(r,t){for(var n=r.constructor,o=Object.keys(r),i=0,c=o.length;i<c;++i){var s=o[i];e(s)||l(t,s)||n.omitImpl(r,s)}}function l(r,t){for(var n=0,e=r.length;n<e;++n)if(r[n]===t)return!0;return!1}module.exports={omit:o,pick:i};
},{"../utils/objectUtils":"WAAQ","../utils/internalPropUtils":"gM8o"}],"iP6s":[function(require,module,exports) {
"use strict";function t(t,n,l){e(t,n,null,null,l)}function e(t,e,r,o,a){Array.isArray(t)?n(t,e,r,o,a):t&&l(t,e,r,o,a)}function n(t,e,n,r,o){for(var a=0,i=t.length;a<i;++a)l(t[a],e,n,r,o)}function l(t,n,l,r,o){t&&o(t,n,l,r);for(var a=n.getRelationNames(),i=0,s=a.length;i<s;++i){var u=a[i],f=t[u];if(f){var c=n.getRelation(u);e(f,c.relatedModelClass,t,c,o)}}}module.exports={visitModels:t};
},{}],"toye":[function(require,module,exports) {
"use strict";function r(r,t){return void 0!==t?e(r,t):n(r)}function t(r){return r.$hasProps(r.constructor.getIdPropertyArray())}function e(r,t){var e=r.constructor.getIdProperty(),n=Array.isArray(e);if(Array.isArray(t))if(n){if(t.length!==e.length)throw new Error("trying to set an invalid identifier for a model");for(var i=0;i<t.length;++i)r[e[i]]=t[i]}else{if(1!==t.length)throw new Error("trying to set an invalid identifier for a model");r[e]=t[0]}else if(n){if(e.length>1)throw new Error("trying to set an invalid identifier for a model");r[e[0]]=t}else r[e]=t}function n(r){var t=r.constructor.getIdProperty();return Array.isArray(t)?r.$values(t):r[t]}module.exports={getSetId:r,hasId:t};
},{}],"yoe1":[function(require,module,exports) {
"use strict";var e=require("../objectUtils"),t=e.isObject,i=e.isFunction;function r(e){return t(e)&&i(e.then)}module.exports={isPromise:r};
},{"../objectUtils":"WAAQ"}],"d8DT":[function(require,module,exports) {
"use strict";var e=require("./isPromise"),r=e.isPromise;function i(e,i){return r(e)?e.then(i):i(e)}module.exports={after:i};
},{"./isPromise":"yoe1"}],"wpPm":[function(require,module,exports) {
"use strict";var r=require("./isPromise"),e=r.isPromise;function t(r,t){return e(r)?r.then(function(){return t}):t}module.exports={afterReturn:t};
},{"./isPromise":"yoe1"}],"uxZF":[function(require,module,exports) {
"use strict";var r=require("./isPromise"),e=r.isPromise;function t(r,t,n){for(var i=new Array(r.length),o=!1,s=0,u=r.length;s<u;++s)i[s]=t(r[s]),e(i[s])&&(o=!0);return o?Promise.all(i).then(function(){return n}):n}module.exports={mapAfterAllReturn:t};
},{"./isPromise":"yoe1"}],"yqo0":[function(require,module,exports) {
var process = require("process");
var e=require("process"),r=require("./isPromise"),n=r.isPromise;function t(e,r,n){switch(e.length){case 0:return i();case 1:return u(e,r);default:return s(e,r,n)}}function i(){return Promise.resolve([])}function u(e,r){try{var t=r(e[0],0);return n(t)?t.then(c):Promise.resolve(c(t))}catch(i){return Promise.reject(i)}}function c(e){return[e]}function s(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(t,i){for(var u=n.concurrency||Number.MAX_SAFE_INTEGER,c={reject:i,resolve:t,rejected:!1,index:0,numFinished:0,results:new Array(e.length),items:e,mapper:r};c.index<u&&c.index<e.length&&!c.rejected;)o(c)})}function o(r){try{if(r.rejected)return;var t=r.index++,i=r.items[t],u=r.mapper(i,t);return n(u)?u.then(function(e){return l(r,e,t)}).catch(function(e){return m(r,e)}):e.nextTick(function(){return l(r,u,t)}),null}catch(c){m(r,c)}}function l(e,r,n){return e.rejected?null:(e.results[n]=r,e.numFinished++,e.numFinished===e.items.length&&e.resolve(e.results),e.index<e.items.length&&o(e),null)}function m(e,r){e.rejected=!0,e.reject(r)}module.exports={promiseMap:t};
},{"./isPromise":"yoe1","process":"FeV4"}],"DGZN":[function(require,module,exports) {
"use strict";var r=require("./isPromise"),e=r.isPromise;function s(r){try{var s=r();return e(s)?s:Promise.resolve(s)}catch(i){return Promise.reject(i)}}module.exports={promiseTry:s};
},{"./isPromise":"yoe1"}],"zF81":[function(require,module,exports) {
"use strict";var r=require("./isPromise"),e=r.isPromise,t=require("./after"),i=t.after,u=require("./afterReturn"),a=u.afterReturn,m=require("./mapAfterAllReturn"),s=m.mapAfterAllReturn,f=require("./map"),p=f.promiseMap,l=require("./try"),o=l.promiseTry;module.exports={isPromise:e,after:i,afterReturn:a,mapAfterAllReturn:s,map:p,try:o};
},{"./isPromise":"yoe1","./after":"d8DT","./afterReturn":"wpPm","./mapAfterAllReturn":"uxZF","./map":"yqo0","./try":"DGZN"}],"rnRP":[function(require,module,exports) {
"use strict";var r=require("../utils/objectUtils"),e=r.isObject,t=r.isFunction,n=require("./modelUtils"),u=n.defineNonEnumerableProperty,i=require("../utils/knexUtils"),o=i.isKnexRaw,s=i.isKnexQueryBuilder,a="$$queryProps";function c(r,e){var t=Object.keys(e);if(f(e,t)){for(var n={},i={},o=0,s=t.length;o<s;++o){var c=t[o],y=e[c];l(y)?n[c]=y:i[c]=y}return u(r,a,n),i}return e}function f(r,e){for(var t=0,n=e.length;t<n;++t)if(l(r[e[t]]))return!0;return!1}function l(r){return!!e(r)&&(s(r)||o(r)||h(r)||r.isObjectionQueryBuilderBase)}function y(r,e,t,n){return e=v(r,e=b(e,n),t,n)}function b(r,e){for(var t=Object.keys(r),n=0,u=t.length;n<u;++n){var i=t[n],o=r[i];l(o)&&(r[i]=d(o,e))}return r}function v(r,e,t,n){var u=r[a];if(!u)return e;for(var i=r.constructor,o=Object.keys(u),s=0,c=o.length;s<c;++s){var f=o[s];if(!t||!t.includes(f)){var l=d(u[f],n);e[i.propertyNameToColumnName(f)]=l}}return e}function d(r,e){return r?r.isObjectionQueryBuilderBase?p(r,e):h(r)?m(r,e):r:r}function p(r,e){return r.subqueryOf(e).toKnexQuery()}function m(r,e){if(!e)throw new Error("toDatabaseJson called without a query builder instance for a model with query properties");return r.toKnexRaw(e)}function h(r){return t(r.toKnexRaw)}module.exports={splitQueryProps:c,mergeQueryProps:y};
},{"../utils/objectUtils":"WAAQ","./modelUtils":"cwbn","../utils/knexUtils":"u553"}],"dymm":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var t=require("buffer").Buffer;function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=require("../utils/internalPropUtils"),o=n.isInternalProp,e=require("./modelQueryProps"),i=e.mergeQueryProps,u=require("../utils/objectUtils"),l=u.isObject,s=u.cloneDeep,c=u.isFunction,a=[];function f(t,r){var n=t.constructor,o={virtuals:b(r),shallow:y(r),omit:v(r,n),pick:null,omitFromJson:t.$omitFromJson()||null,cloneObjects:n.cloneObjectAttributes},e=J(t,o);return e=t.$formatJson(e)}function m(t,r){var n=t.constructor,o={virtuals:!1,shallow:!0,omit:n.getRelationNames(),pick:p(n),omitFromJson:t.$omitFromDatabaseJson()||null,cloneObjects:n.cloneObjectAttributes},e=h(t,o);return e=t.$formatDatabaseJson(e),i(t,e,o.omitFromJson,r)}function b(t){return!t||(Array.isArray(t.virtuals)?t.virtuals:!1!==t.virtuals)}function y(t){return!!t&&!!t.shallow}function v(t,r){return y(t)?r.getRelationNames():null}function p(t){var r=t.getJsonSchema();return r&&t.pickJsonSchemaProperties&&r.properties||null}function J(t,r){for(var n={},o=Object.keys(t),e=g(t,r),i=0,u=o.length;i<u;++i){var l=o[i];j(n,l,t[l],r)}return 0!==e.length&&F(n,t,e,r),n}function g(t,r){return Array.isArray(r.virtuals)?r.virtuals:!0===r.virtuals?t.constructor.getVirtualAttributes():a}function h(t,r){for(var n={},o=Object.keys(t),e=0,i=o.length;e<i;++e){var u=o[e];j(n,u,t[u],r)}return n}function j(t,n,e,i){var u=r(e);"function"===u||"undefined"===u||o(n)||A(i,n)||!O(i,n)||(l(e)?t[n]=d(e,i):t[n]=e)}function A(t,r){return null!==t.omit&&t.omit.includes(r)||null!==t.omitFromJson&&t.omitFromJson.includes(r)}function O(t,r){return null===t.pick||r in t.pick}function F(t,r,n,o){for(var e=0,i=n.length;e<i;++e){var u=n[e],l=r[u];c(l)&&(l=l.call(r)),j(t,u,l,o)}}function d(r,n){return Array.isArray(r)?k(r,n):r.$isObjectionModel?r.$toJson(n):t.isBuffer(r)?r:n.cloneObjects?s(r):r}function k(t,r){for(var n=new Array(t.length),o=0,e=n.length;o<e;++o){var i=t[o];l(i)?n[o]=d(i,r):n[o]=i}return n}module.exports={toJson:f,toDatabaseJson:m};
},{"../utils/internalPropUtils":"gM8o","./modelQueryProps":"rnRP","../utils/objectUtils":"WAAQ","buffer":"FaCw"}],"PfnY":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer,n=require("../utils/objectUtils"),t=n.isObject,e="k_";function u(r,n){switch(n.length){case 1:return o(r,n);case 2:return c(r,n);case 3:return l(r,n);default:return s(r,n)}}function f(r,n){switch(n.length){case 1:return a(r,n);case 2:return h(r,n);case 3:return g(r,n);default:return d(r,n)}}function i(r,n){for(var t=0;t<n.length;++t){if(v(r[n[t]]))return!1}return!0}function o(r,n){return[r[n[0]]]}function c(r,n){return[r[n[0]],r[n[1]]]}function l(r,n){return[r[n[0]],r[n[1]],r[n[2]]]}function s(r,n){for(var t=new Array(n.length),e=0,u=n.length;e<u;++e)t[e]=r[n[e]];return t}function a(r,n){return e+p(r[n[0]])}function h(r,n){return e+p(r[n[0]])+","+p(r[n[1]])}function g(r,n){return e+p(r[n[0]])+","+p(r[n[1]])+","+p(r[n[2]])}function d(r,n){for(var t=e,u=0,f=n.length;u<f;++u)t+=p(r[n[u]]),u<f-1&&(t+=",");return t}function p(n){return null===n?"null":void 0===n?"undefined":r.isBuffer(n)?n.toString("hex"):t(n)?JSON.stringify(n):"".concat(n)}function v(r){return null==r}module.exports={PROP_KEY_PREFIX:e,propToStr:p,values:u,hasProps:i,propKey:f};
},{"../utils/objectUtils":"WAAQ","buffer":"FaCw"}],"GYjt":[function(require,module,exports) {
"use strict";var r=require("../utils/objectUtils"),e=r.isObject;function t(r,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.cache||(t=Object.assign({},t,{cache:new Map})),t.cache.set(e,r);var a=!0,o=!1,i=void 0;try{for(var c,l=r.constructor.getRelationNames()[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var s=c.value,u=e[s];if(void 0!==u){var v=r.constructor.getRelation(s),f=n(u,v,t);f!==u&&(r[v.name]=f)}}}catch(d){o=!0,i=d}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}return r}function n(r,e,t){return Array.isArray(r)?a(r,e,t):r?o(r,e,t):null}function a(r,e,t){for(var n=new Array(r.length),a=!1,i=0,c=r.length;i<c;++i){var l=o(r[i],e,t);l!==r[i]&&(a=!0),n[i]=l}return a?n:r}function o(r,n,a){if(e(r)){var o=n.relatedModelClass,i=a.cache.get(r);return void 0===i&&(i=r instanceof o?t(r,r,a):o.fromJson(r,a)),i}return r}module.exports={parseRelationsIntoModelInstances:t};
},{"../utils/objectUtils":"WAAQ"}],"gGEe":[function(require,module,exports) {
"use strict";var e=require("./modelUtils"),t=e.defineNonEnumerableProperty,r=require("../utils/promiseUtils"),a=r.isPromise,l="$$tableMetadata";function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.parentBuilder,n=void 0===a?null:a,o=r.knex,i=void 0===o?null:o,u=r.force,s=void 0!==u&&u,d=r.table,v=void 0===d?null:d;v||(v=n?n.tableNameFor(e):e.getTableName());var b=e.tableMetadata({table:v});if(!s&&b)return Promise.resolve(b);if(e.hasOwnProperty(l)||t(e,l,new Map),b=e[l].get(v),!s&&b)return Promise.resolve(b);var m=e.query(i).childQueryOf(n).columnInfo({table:v}).then(function(t){var r={columns:Object.keys(t)};return e[l].set(v,r),r});return e[l].set(v,m),m}function o(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).table;if(e.hasOwnProperty(l)){var r=e[l].get(t||e.getTableName());return a(r)?null:r}return null}module.exports={fetchTableMetadata:n,tableMetadata:o};
},{"./modelUtils":"cwbn","../utils/promiseUtils":"zF81"}],"DRa2":[function(require,module,exports) {
"use strict";var e=require("../utils/internalPropUtils"),t=e.isInternalProp,n=require("./modelQueryProps"),r=n.splitQueryProps,s=require("../utils/objectUtils"),a=s.isFunction,o=s.isString,i=require("./modelParseRelations"),l=i.parseRelationsIntoModelInstances;function u(e,t,n){if(t=t||{},n=n||{},"[object Object]"!==Object.prototype.toString.call(t))throw new Error("You should only pass objects to $setJson method. $setJson method was given an invalid value "+t);return t.$isObjectionModel||(t=r(e,t)),t=e.$parseJson(t,n),t=e.$validate(t,n),e.$set(t),n.skipParseRelations||l(e,t,n),e}function c(e,t){if(t=e.$parseDatabaseJson(t))for(var n=Object.keys(t),r=0,s=n.length;r<s;++r){var a=n[r];e[a]=t[a]}return e}function p(e,n){if(n)for(var r=e.constructor.getReadOnlyAttributes(),s=Object.keys(n),o=0,i=s.length;o<i;++o){var l=s[o],u=n[l];t(l)||a(u)||r.includes(l)||(e[l]=u)}return e}function d(e,t,n){return(t=f(e,t)).isOneToOne()?Array.isArray(n)?0===n.length?e[t.name]=null:e[t.name]=n[0]||null:e[t.name]=n||null:n?Array.isArray(n)?e[t.name]=n:e[t.name]=[n]:e[t.name]=[],this}function m(e,t,n){return t=f(e,t),!e[t.name]||t.isOneToOne()?e.$setRelated(t,n):(Array.isArray(n)?n.forEach(function(n){return e[t.name].push(n)}):n&&e[t.name].push(n),this)}function f(e,t){return o(t)?e.constructor.getRelation(t):t}module.exports={setFast:p,setJson:u,setDatabaseJson:c,setRelated:d,appendRelated:m};
},{"../utils/internalPropUtils":"gM8o","./modelQueryProps":"rnRP","../utils/objectUtils":"WAAQ","./modelParseRelations":"GYjt"}],"uuug":[function(require,module,exports) {
"use strict";var r=require("../utils/objectUtils"),t=r.asArray,e=r.isObject,n=r.flatten,i=r.isString;function a(r,t){var e=t.getJsonAttributes();if(e.length)for(var n=0,a=e.length;n<a;++n){var s=e[n],o=r[s];if(i(o)){var f=u(o);void 0!==f&&(r[s]=f)}}return r}function s(r,t){var n=t.getJsonAttributes();if(n.length)for(var i=0,a=n.length;i<a;++i){var s=n[i],o=r[s];e(o)&&(r[s]=JSON.stringify(o))}return r}function o(r){var e=r.jsonAttributes;if(Array.isArray(e))return e;if(e=[],r.getJsonSchema())for(var i=r.getJsonSchema().properties||{},a=0,s=Object.keys(i);a<s.length;a++){var o=s[a],u=i[o],f=t(u.type).filter(function(r){return!!r});0===f.length&&Array.isArray(u.anyOf)&&(f=n(u.anyOf.map(function(r){return r.type}))),0===f.length&&Array.isArray(u.oneOf)&&(f=n(u.oneOf.map(function(r){return r.type}))),-1===f.indexOf("object")&&-1===f.indexOf("array")||e.push(o)}return e}function u(r){try{return JSON.parse(r)}catch(t){return}}module.exports={parseJsonAttributes:a,formatJsonAttributes:s,getJsonAttributes:o};
},{"../utils/objectUtils":"WAAQ"}],"QkAW":[function(require,module,exports) {
"use strict";var e=require("../utils/objectUtils"),a=e.difference;function r(e,r){var t=new e,s=Object.keys(t.$parseDatabaseJson({})),n={};n[r]=null;var o=Object.keys(t.$parseDatabaseJson(n));return a(o,s)[0]||r}function t(e,r){var t=new e,s=Object.keys(t.$formatDatabaseJson({})),n={};n[r]=null;var o=Object.keys(t.$formatDatabaseJson(n));return a(o,s)[0]||r}module.exports={columnNameToPropertyName:r,propertyNameToColumnName:t};
},{"../utils/objectUtils":"WAAQ"}],"Y5QW":[function(require,module,exports) {
"use strict";var e=require("./objectUtils"),t=e.isObject,r=e.isFunction;function u(e,u){return t(e)?r(e.toKnexRaw)?e.toKnexRaw(u):!0===e.isObjectionQueryBuilderBase?e.subqueryOf(u).toKnexQuery():e:e}module.exports={buildArg:u};
},{"./objectUtils":"WAAQ"}],"VlR0":[function(require,module,exports) {
"use strict";function r(r){return n(r)||e(r)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function e(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}function n(r){if(Array.isArray(r))return r}function i(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function a(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function s(r,t,e){return t&&a(r.prototype,t),e&&a(r,e),r}var u=require("../utils/objectUtils"),o=u.isPlainObject,l=require("../utils/buildUtils"),c=l.buildArg,f=function(){function r(t,e){i(this,r),this._sql="".concat(t),this._args=e,this._as=null}return s(r,[{key:"as",value:function(r){return this._as=r,this}},{key:"toKnexRaw",value:function(r){var t=null,e=this._sql;return 1===this._args.length&&o(this._args[0])?(t=_(this._args[0],r),this._as&&(t.__alias__=this._as,e+=" as :__alias__:")):(t=h(this._args,r),this._as&&(t.push(this._as),e+=" as ??")),r.knex().raw(e,t)}},{key:"alias",get:function(){return this._as}}]),r}();function h(r,t){return r.map(function(r){return c(r,t)})}function _(r,t){return Object.keys(r).reduce(function(e,n){return e[n]=c(r[n],t),e},{})}function b(t){var e=r(t),n=e[0],i=e.slice(1);return 1===i.length&&Array.isArray(i[0])?{sql:n,args:i[0]}:{sql:n,args:i}}function g(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];var n=b(t),i=n.sql,a=n.args;return new f(i,a)}Object.defineProperties(f.prototype,{isObjectionRawBuilder:{enumerable:!1,writable:!1,value:!0}}),module.exports={RawBuilder:f,normalizeRawArgs:b,raw:g};
},{"../utils/objectUtils":"WAAQ","../utils/buildUtils":"Y5QW"}],"kUxx":[function(require,module,exports) {
"use strict";function r(r,t){function e(){this.constructor=r}e.prototype=t.prototype,r.prototype=new e}function t(r,e,n,c){this.message=r,this.expected=e,this.found=n,this.location=c,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function e(r,e){e=void 0!==e?e:{};var n,c={},a={start:W},u=W,o=":",i=K(":",!1),f=function(r,t){var e=[];if(t){var n=t[1];(e=t[2]).unshift(n)}return{columnName:r,access:e}},s="[",l=K("[",!1),h='"',p=K('"',!1),A="'",g=K("'",!1),d="]",x=K("]",!1),v=function(r){return{type:"object",ref:Array.isArray(r)?r[1]:r}},y=function(r){return{type:"array",ref:parseInt(r,10)}},C=function(r){return{type:"object",ref:r}},m=".",F=K(".",!1),w=/^[^\][]/,E=L(["]","["],!0,!1),b=function(r){return r.join("")},j=/^[^:]/,S=L([":"],!0,!1),R=/^[^"]/,k=L(['"'],!0,!1),M=/^[^']/,T=L(["'"],!0,!1),I=/^[^.\][]/,N=L([".","]","["],!0,!1),U=/^[0-9]/,q=L([["0","9"]],!1,!1),z=function(r){return r.join("")},B=0,D=[{line:1,column:1}],G=0,H=[],J=0;if("startRule"in e){if(!(e.startRule in a))throw new Error("Can't start parsing from rule \""+e.startRule+'".');u=a[e.startRule]}function K(r,t){return{type:"literal",text:r,ignoreCase:t}}function L(r,t,e){return{type:"class",parts:r,inverted:t,ignoreCase:e}}function O(t){var e,n=D[t];if(n)return n;for(e=t-1;!D[e];)e--;for(n={line:(n=D[e]).line,column:n.column};e<t;)10===r.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return D[t]=n,n}function P(r,t){var e=O(r),n=O(t);return{start:{offset:r,line:e.line,column:e.column},end:{offset:t,line:n.line,column:n.column}}}function Q(r){B<G||(B>G&&(G=B,H=[]),H.push(r))}function V(r,e,n){return new t(t.buildMessage(r,e),r,e,n)}function W(){var t,e,n,a,u,s,l;if(t=B,(e=function(){var t,e,n;t=B,e=[],j.test(r.charAt(B))?(n=r.charAt(B),B++):(n=c,0===J&&Q(S));if(n!==c)for(;n!==c;)e.push(n),j.test(r.charAt(B))?(n=r.charAt(B),B++):(n=c,0===J&&Q(S));else e=c;e!==c&&(t,e=b(e));return t=e}())!==c){if(n=B,58===r.charCodeAt(B)?(a=o,B++):(a=c,0===J&&Q(i)),a!==c)if((u=Y())===c&&(u=X())===c&&(u=function(){var r,t;r=B,(t=$())!==c&&(r,t=C(t));return r=t}()),u!==c){for(s=[],(l=Y())===c&&(l=X())===c&&(l=Z());l!==c;)s.push(l),(l=Y())===c&&(l=X())===c&&(l=Z());s!==c?n=a=[a,u,s]:(B=n,n=c)}else B=n,n=c;else B=n,n=c;n===c&&(n=null),n!==c?(t,t=e=f(e,n)):(B=t,t=c)}else B=t,t=c;return t}function X(){var t,e,n,a,u,o;return t=B,91===r.charCodeAt(B)?(e=s,B++):(e=c,0===J&&Q(l)),e!==c?(n=B,34===r.charCodeAt(B)?(a=h,B++):(a=c,0===J&&Q(p)),a!==c&&(u=function(){var t,e,n;t=B,e=[],R.test(r.charAt(B))?(n=r.charAt(B),B++):(n=c,0===J&&Q(k));if(n!==c)for(;n!==c;)e.push(n),R.test(r.charAt(B))?(n=r.charAt(B),B++):(n=c,0===J&&Q(k));else e=c;e!==c&&(t,e=b(e));return t=e}())!==c?(34===r.charCodeAt(B)?(o=h,B++):(o=c,0===J&&Q(p)),o!==c?n=a=[a,u,o]:(B=n,n=c)):(B=n,n=c),n===c&&(n=B,39===r.charCodeAt(B)?(a=A,B++):(a=c,0===J&&Q(g)),a!==c&&(u=function(){var t,e,n;t=B,e=[],M.test(r.charAt(B))?(n=r.charAt(B),B++):(n=c,0===J&&Q(T));if(n!==c)for(;n!==c;)e.push(n),M.test(r.charAt(B))?(n=r.charAt(B),B++):(n=c,0===J&&Q(T));else e=c;e!==c&&(t,e=b(e));return t=e}())!==c?(39===r.charCodeAt(B)?(o=A,B++):(o=c,0===J&&Q(g)),o!==c?n=a=[a,u,o]:(B=n,n=c)):(B=n,n=c),n===c&&(n=function(){var t,e,n;t=B,e=[],w.test(r.charAt(B))?(n=r.charAt(B),B++):(n=c,0===J&&Q(E));if(n!==c)for(;n!==c;)e.push(n),w.test(r.charAt(B))?(n=r.charAt(B),B++):(n=c,0===J&&Q(E));else e=c;e!==c&&(t,e=b(e));return t=e}())),n!==c?(93===r.charCodeAt(B)?(a=d,B++):(a=c,0===J&&Q(x)),a!==c?(t,t=e=v(n)):(B=t,t=c)):(B=t,t=c)):(B=t,t=c),t}function Y(){var t,e,n,a;return t=B,91===r.charCodeAt(B)?(e=s,B++):(e=c,0===J&&Q(l)),e!==c&&(n=function(){var t,e,n;t=B,e=[],U.test(r.charAt(B))?(n=r.charAt(B),B++):(n=c,0===J&&Q(q));if(n!==c)for(;n!==c;)e.push(n),U.test(r.charAt(B))?(n=r.charAt(B),B++):(n=c,0===J&&Q(q));else e=c;e!==c&&(t,e=z(e));return t=e}())!==c?(93===r.charCodeAt(B)?(a=d,B++):(a=c,0===J&&Q(x)),a!==c?(t,t=e=y(n)):(B=t,t=c)):(B=t,t=c),t}function Z(){var t,e,n;return t=B,46===r.charCodeAt(B)?(e=m,B++):(e=c,0===J&&Q(F)),e!==c&&(n=$())!==c?(t,t=e=C(n)):(B=t,t=c),t}function $(){var t,e,n;if(t=B,e=[],I.test(r.charAt(B))?(n=r.charAt(B),B++):(n=c,0===J&&Q(N)),n!==c)for(;n!==c;)e.push(n),I.test(r.charAt(B))?(n=r.charAt(B),B++):(n=c,0===J&&Q(N));else e=c;return e!==c&&(t,e=b(e)),t=e}if((n=u())!==c&&B===r.length)return n;throw n!==c&&B<r.length&&Q({type:"end"}),V(H,G<r.length?r.charAt(G):null,G<r.length?P(G,G+1):P(G,G))}r(t,Error),t.buildMessage=function(r,t){var e={literal:function(r){return'"'+c(r.text)+'"'},class:function(r){var t,e="";for(t=0;t<r.parts.length;t++)e+=r.parts[t]instanceof Array?a(r.parts[t][0])+"-"+a(r.parts[t][1]):a(r.parts[t]);return"["+(r.inverted?"^":"")+e+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}function c(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+n(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+n(r)})}function a(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+n(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+n(r)})}return"Expected "+function(r){var t,n,c,a=new Array(r.length);for(t=0;t<r.length;t++)a[t]=(c=r[t],e[c.type](c));if(a.sort(),a.length>0){for(t=1,n=1;t<a.length;t++)a[t-1]!==a[t]&&(a[n]=a[t],n++);a.length=n}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(r)+" but "+function(r){return r?'"'+c(r)+'"':"end of input"}(t)+" found."},module.exports={SyntaxError:t,parse:e};
},{}],"GpEX":[function(require,module,exports) {
"use strict";var e=require("../queryBuilder/parsers/jsonFieldExpressionParser"),r=new Map;function t(t){var a=r.get(t);return void 0!==a?a:(a=l(a=n(a=e.parse(t))),r.set(t,a),a)}function n(e){var r=e.columnName.split(".").map(function(e){return e.trim()});return e.column=r[r.length-1],r.length>=2?e.table=r.slice(0,r.length-1).join("."):e.table=null,e}function l(e){var r=!0,t=!1,n=void 0;try{for(var l,a=e.access[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var i=l.value;Object.freeze(i)}}catch(s){t=!0,n=s}finally{try{r||null==a.return||a.return()}finally{if(t)throw n}}return Object.freeze(e.access),Object.freeze(e),e}module.exports={parseFieldExpression:t};
},{"../queryBuilder/parsers/jsonFieldExpressionParser":"kUxx"}],"UPD8":[function(require,module,exports) {
"use strict";function t(t){return s(t)||n(t)||e()}function e(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function s(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}var u=require("../utils/parseFieldExpression"),l=u.parseFieldExpression,o=require("../utils/objectUtils"),c=o.isObject,h=require("../utils/deprecate"),_=h.deprecate,f=function(){function e(t){i(this,e),this._expr=t,this._parsedExpr=null,this._column=null,this._table=null,this._cast=null,this._toJson=!1,this._table=null,this._alias=null,this._modelClass=null,null!==t&&this._parseExpression(t)}return r(e,[{key:"fullColumn",value:function(t){var e=this.tableName?this.tableName:this.modelClass?t.tableRefFor(this.modelClass):null;return e?"".concat(e,".").concat(this.column):this.column}},{key:"castText",value:function(){return this.castTo("text")}},{key:"castInt",value:function(){return this.castTo("integer")}},{key:"castBigInt",value:function(){return this.castTo("bigint")}},{key:"castFloat",value:function(){return this.castTo("float")}},{key:"castDecimal",value:function(){return this.castTo("decimal")}},{key:"castReal",value:function(){return this.castTo("real")}},{key:"castBool",value:function(){return this.castTo("boolean")}},{key:"castJson",value:function(){return this._toJson=!0,this}},{key:"castType",value:function(t){return _("castType(type) is deprecated. Use castTo(type) instead. castType(type) will be removed in 2.0"),this.castTo(t)}},{key:"castTo",value:function(t){return this._cast=t,this}},{key:"from",value:function(t){return this._table=t,this}},{key:"table",value:function(t){return this._table=t,this}},{key:"model",value:function(t){return this._modelClass=t,this}},{key:"as",value:function(t){return this._alias=t,this}},{key:"clone",value:function(){var t=new this.constructor(null);return t._expr=this._expr,t._parsedExpr=this._parsedExpr,t._column=this._column,t._table=this._table,t._cast=this._cast,t._toJson=this._toJson,t._alias=this._alias,t._modelClass=this._modelClass,t}},{key:"toKnexRaw",value:function(e){var n;return(n=e.knex()).raw.apply(n,t(this._createRawArgs(e)))}},{key:"_parseExpression",value:function(t){this._parsedExpr=l(t),this._column=this._parsedExpr.column,this._table=this._parsedExpr.table}},{key:"_createRawArgs",value:function(t){var e=[],n=this._createReferenceSql(t,e);return n=this._maybeCast(n,e),n=this._maybeToJsonb(n,e),[n=this._maybeAlias(n,e),e]}},{key:"_createReferenceSql",value:function(t,e){if(e.push(this.fullColumn(t)),this._parsedExpr.access.length>0){var n=this._cast?"#>>":"#>",s=this._parsedExpr.access.map(function(t){return t.ref}).join(",");return"??".concat(n,"'{").concat(s,"}'")}return"??"}},{key:"_maybeCast",value:function(t){return this._cast?"CAST(".concat(t," AS ").concat(this._cast,")"):t}},{key:"_maybeToJsonb",value:function(t){return this._toJson?"to_jsonb(".concat(t,")"):t}},{key:"_maybeAlias",value:function(t,e){return this._shouldAlias()?(e.push(this._alias),"".concat(t," as ??")):t}},{key:"_shouldAlias",value:function(){return!!this._alias&&(!this.isPlainColumnRef||this._alias!==this._column)}},{key:"parsedExpr",get:function(){return this._parsedExpr}},{key:"column",get:function(){return this._column},set:function(t){this._column=t}},{key:"alias",get:function(){return this._alias},set:function(t){this._alias=t}},{key:"tableName",get:function(){return this._table},set:function(t){this._table=t}},{key:"modelClass",get:function(){return this._modelClass},set:function(t){this._modelClass=t}},{key:"isPlainColumnRef",get:function(){return!(this._parsedExpr&&0!==this._parsedExpr.access.length||this._cast||this._toJson)}},{key:"expression",get:function(){return this._expr}},{key:"cast",get:function(){return this._cast}}]),e}();Object.defineProperties(f.prototype,{isObjectionReferenceBuilder:{enumerable:!1,writable:!1,value:!0}});var p=function(t){return c(t)&&t.isObjectionReferenceBuilder?t:new f(t)};module.exports={ReferenceBuilder:f,ref:p};
},{"../utils/parseFieldExpression":"GpEX","../utils/objectUtils":"WAAQ","../utils/deprecate":"NYRu"}],"NXJJ":[function(require,module,exports) {
"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(n,e){return!e||"object"!==t(e)&&"function"!=typeof e?r(n):e}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&i(t,n)}function i(t,n){return(i=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var c=require("./RawBuilder"),f=c.RawBuilder,a=c.normalizeRawArgs,s=require("../utils/objectUtils"),l=s.asSingle,p=s.isNumber,y=function(t){function r(){return n(this,r),e(this,o(r).apply(this,arguments))}return u(r,f),r}();function b(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=a(n),o=r.sql,u=r.args;return new y("".concat(o,"(").concat(u.map(function(){return"?"}).join(", "),")"),u)}for(var w=function(){var t=h[m];b[t]=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return b(t.toUpperCase(),e)}},m=0,h=["coalesce","concat","sum","avg","min","max","count","upper","lower"];m<h.length;m++)w();b.now=function(t){return t=parseInt(l(t),10),!isNaN(t)&&p(t)||(t=6),new y("CURRENT_TIMESTAMP(".concat(t,")"),[])},module.exports={FunctionBuilder:y,fn:b};
},{"./RawBuilder":"VlR0","../utils/objectUtils":"WAAQ"}],"eQ92":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}var a=function(){function n(){var t;e(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];(t=this.constructor).init.apply(t,[this].concat(o))}return t(n,[{key:"beforeValidate",value:function(e){var n=e.model,t=e.json,a=e.options;n.$beforeValidate(null,t,a)}},{key:"validate",value:function(){throw new Error("not implemented")}},{key:"afterValidate",value:function(e){var n=e.model,t=e.json,a=e.options;n.$afterValidate(t,a)}}],[{key:"init",value:function(){}}]),n}();module.exports={Validator:a};
},{}],"sBi0":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?r(e):n}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||!l(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return f(t,arguments,s(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,t)})(t)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function f(t,e,n){return(f=a()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&p(o,n.prototype),o}).apply(null,arguments)}function l(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=require("../utils/objectUtils"),b=y.asArray,d=y.isString,h={ModelValidation:"ModelValidation",RelationExpression:"RelationExpression",UnallowedRelation:"UnallowedRelation",InvalidGraph:"InvalidGraph"},m=function(t){function r(t){var o,u=t.type,i=t.message,c=t.data,a=void 0===c?{}:c,f=t.statusCode,l=void 0===f?400:f;return e(this,r),(o=n(this,s(r).call(this,i||v(a)))).name=o.constructor.name,o.type=u,o.data=a,o.statusCode=l,o}return i(r,c(Error)),u(r,null,[{key:"Type",get:function(){return h}}]),r}();function v(t){return Object.keys(t).reduce(function(e,n){return e.push("".concat(n,": ").concat(b(t[n]).map(w).join(", "))),e},[]).join(", ")}function w(t){return d(t)?t:t.message}module.exports={ValidationError:m,ValidationErrorType:h};
},{"../utils/objectUtils":"WAAQ"}],"coqt":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,r=arguments[3];!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof e&&e.amd?e(["exports"],t):t(r.URI=r.URI||{})}(this,function(e){"use strict";function r(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length>1){r[0]=r[0].slice(0,-1);for(var n=r.length-1,o=1;o<n;++o)r[o]=r[o].slice(1,-1);return r[n]=r[n].slice(1),r.join("")}return r[0]}function t(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function o(e){return e.toUpperCase()}function a(e){var n=r("[0-9]","[A-Fa-f]"),o=t(t("%[EFef]"+n+"%"+n+n+"%"+n+n)+"|"+t("%[89A-Fa-f]"+n+"%"+n+n)+"|"+t("%"+n+n)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",i=r("[\\:\\/\\?\\#\\[\\]\\@]",a),s=e?"[\\uE000-\\uF8FF]":"[]",u=r("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),c=t("[A-Za-z]"+r("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),p=t(t(o+"|"+r(u,a,"[\\:]"))+"*"),h=(t(t("25[0-5]")+"|"+t("2[0-4][0-9]")+"|"+t("1[0-9][0-9]")+"|"+t("[1-9][0-9]")+"|[0-9]"),t(t("25[0-5]")+"|"+t("2[0-4][0-9]")+"|"+t("1[0-9][0-9]")+"|"+t("0?[1-9][0-9]")+"|0?0?[0-9]")),f=t(h+"\\."+h+"\\."+h+"\\."+h),l=t(n+"{1,4}"),v=t(t(l+"\\:"+l)+"|"+f),d=t(t(l+"\\:")+"{6}"+v),g=t("\\:\\:"+t(l+"\\:")+"{5}"+v),m=t(t(l)+"?\\:\\:"+t(l+"\\:")+"{4}"+v),E=t(t(t(l+"\\:")+"{0,1}"+l)+"?\\:\\:"+t(l+"\\:")+"{3}"+v),C=t(t(t(l+"\\:")+"{0,2}"+l)+"?\\:\\:"+t(l+"\\:")+"{2}"+v),y=t(t(t(l+"\\:")+"{0,3}"+l)+"?\\:\\:"+l+"\\:"+v),S=t(t(t(l+"\\:")+"{0,4}"+l)+"?\\:\\:"+v),A=t(t(t(l+"\\:")+"{0,5}"+l)+"?\\:\\:"+l),D=t(t(t(l+"\\:")+"{0,6}"+l)+"?\\:\\:"),w=t([d,g,m,E,C,y,S,A,D].join("|")),b=t(t(u+"|"+o)+"+"),x=(t(w+"\\%25"+b),t(w+t("\\%25|\\%(?!"+n+"{2})")+b)),O=t("[vV]"+n+"+\\."+r(u,a,"[\\:]")+"+"),I=t("\\["+t(x+"|"+w+"|"+O)+"\\]"),F=t(t(o+"|"+r(u,a))+"*"),N=t(I+"|"+f+"(?!"+F+")|"+F),R=t("[0-9]*"),T=t(t(p+"@")+"?"+N+t("\\:"+R)+"?"),_=t(o+"|"+r(u,a,"[\\:\\@]")),P=t(_+"*"),U=t(_+"+"),j=t(t(o+"|"+r(u,a,"[\\@]"))+"+"),q=t(t("\\/"+P)+"*"),H=t("\\/"+t(U+q)+"?"),z=t(j+q),L=t(U+q),$="(?!"+_+")",V=(t(q+"|"+H+"|"+z+"|"+L+"|"+$),t(t(_+"|"+r("[\\/\\?]",s))+"*")),M=t(t(_+"|[\\/\\?]")+"*"),Z=t(t("\\/\\/"+T+q)+"|"+H+"|"+L+"|"+$),k=t(c+"\\:"+Z+t("\\?"+V)+"?"+t("\\#"+M)+"?"),G=t(t("\\/\\/"+T+q)+"|"+H+"|"+z+"|"+$),Q=t(G+t("\\?"+V)+"?"+t("\\#"+M)+"?");t(k+"|"+Q),t(c+"\\:"+Z+t("\\?"+V)+"?"),t(t("\\/\\/("+t("("+p+")@")+"?("+N+")"+t("\\:("+R+")")+"?)")+"?("+q+"|"+H+"|"+L+"|"+$+")"),t("\\?("+V+")"),t("\\#("+M+")"),t(t("\\/\\/("+t("("+p+")@")+"?("+N+")"+t("\\:("+R+")")+"?)")+"?("+q+"|"+H+"|"+z+"|"+$+")"),t("\\?("+V+")"),t("\\#("+M+")"),t(t("\\/\\/("+t("("+p+")@")+"?("+N+")"+t("\\:("+R+")")+"?)")+"?("+q+"|"+H+"|"+L+"|"+$+")"),t("\\?("+V+")"),t("\\#("+M+")"),t("("+p+")@"),t("\\:("+R+")");return{NOT_SCHEME:new RegExp(r("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",u,a),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",u,a),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",u,a),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",u,a),"g"),NOT_QUERY:new RegExp(r("[^\\%]",u,a,"[\\:\\@\\/\\?]",s),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",u,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",u,a),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",u,i),"g"),PCT_ENCODED:new RegExp(o,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+w+")"+t(t("\\%25|\\%(?!"+n+"{2})")+"("+b+")")+"?\\]?$")}}var i=a(!1),s=a(!0),u=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,r){var t=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(u){o=!0,a=u}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=2147483647,p=/^xn--/,h=/[^\0-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,l={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=Math.floor,d=String.fromCharCode;function g(e){throw new RangeError(l[e])}function m(e,r){var t=e.split("@"),n="";t.length>1&&(n=t[0]+"@",e=t[1]);var o=function(e,r){for(var t=[],n=e.length;n--;)t[n]=r(e[n]);return t}((e=e.replace(f,".")).split("."),r).join(".");return n+o}function E(e){for(var r=[],t=0,n=e.length;t<n;){var o=e.charCodeAt(t++);if(o>=55296&&o<=56319&&t<n){var a=e.charCodeAt(t++);56320==(64512&a)?r.push(((1023&o)<<10)+(1023&a)+65536):(r.push(o),t--)}else r.push(o)}return r}var C=function(e,r){return e+22+75*(e<26)-((0!=r)<<5)},y=function(e,r,t){var n=0;for(e=t?v(e/700):e>>1,e+=v(e/r);e>455;n+=36)e=v(e/35);return v(n+36*e/(e+38))},S=function(e){var r,t=[],n=e.length,o=0,a=128,i=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var u=0;u<s;++u)e.charCodeAt(u)>=128&&g("not-basic"),t.push(e.charCodeAt(u));for(var p=s>0?s+1:0;p<n;){for(var h=o,f=1,l=36;;l+=36){p>=n&&g("invalid-input");var d=(r=e.charCodeAt(p++))-48<10?r-22:r-65<26?r-65:r-97<26?r-97:36;(d>=36||d>v((c-o)/f))&&g("overflow"),o+=d*f;var m=l<=i?1:l>=i+26?26:l-i;if(d<m)break;var E=36-m;f>v(c/E)&&g("overflow"),f*=E}var C=t.length+1;i=y(o-h,C,0==h),v(o/C)>c-a&&g("overflow"),a+=v(o/C),o%=C,t.splice(o++,0,a)}return String.fromCodePoint.apply(String,t)},A=function(e){var r=[],t=(e=E(e)).length,n=128,o=0,a=72,i=!0,s=!1,u=void 0;try{for(var p,h=e[Symbol.iterator]();!(i=(p=h.next()).done);i=!0){var f=p.value;f<128&&r.push(d(f))}}catch(L){s=!0,u=L}finally{try{!i&&h.return&&h.return()}finally{if(s)throw u}}var l=r.length,m=l;for(l&&r.push("-");m<t;){var S=c,A=!0,D=!1,w=void 0;try{for(var b,x=e[Symbol.iterator]();!(A=(b=x.next()).done);A=!0){var O=b.value;O>=n&&O<S&&(S=O)}}catch(L){D=!0,w=L}finally{try{!A&&x.return&&x.return()}finally{if(D)throw w}}var I=m+1;S-n>v((c-o)/I)&&g("overflow"),o+=(S-n)*I,n=S;var F=!0,N=!1,R=void 0;try{for(var T,_=e[Symbol.iterator]();!(F=(T=_.next()).done);F=!0){var P=T.value;if(P<n&&++o>c&&g("overflow"),P==n){for(var U=o,j=36;;j+=36){var q=j<=a?1:j>=a+26?26:j-a;if(U<q)break;var H=U-q,z=36-q;r.push(d(C(q+H%z,0))),U=v(H/z)}r.push(d(C(U,0))),a=y(o,I,m==l),o=0,++m}}}catch(L){N=!0,R=L}finally{try{!F&&_.return&&_.return()}finally{if(N)throw R}}++o,++n}return r.join("")},D={version:"2.1.0",ucs2:{decode:E,encode:function(e){return String.fromCodePoint.apply(String,function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}(e))}},decode:S,encode:A,toASCII:function(e){return m(e,function(e){return h.test(e)?"xn--"+A(e):e})},toUnicode:function(e){return m(e,function(e){return p.test(e)?S(e.slice(4).toLowerCase()):e})}},w={};function b(e){var r=e.charCodeAt(0);return r<16?"%0"+r.toString(16).toUpperCase():r<128?"%"+r.toString(16).toUpperCase():r<2048?"%"+(r>>6|192).toString(16).toUpperCase()+"%"+(63&r|128).toString(16).toUpperCase():"%"+(r>>12|224).toString(16).toUpperCase()+"%"+(r>>6&63|128).toString(16).toUpperCase()+"%"+(63&r|128).toString(16).toUpperCase()}function x(e){for(var r="",t=0,n=e.length;t<n;){var o=parseInt(e.substr(t+1,2),16);if(o<128)r+=String.fromCharCode(o),t+=3;else if(o>=194&&o<224){if(n-t>=6){var a=parseInt(e.substr(t+4,2),16);r+=String.fromCharCode((31&o)<<6|63&a)}else r+=e.substr(t,6);t+=6}else if(o>=224){if(n-t>=9){var i=parseInt(e.substr(t+4,2),16),s=parseInt(e.substr(t+7,2),16);r+=String.fromCharCode((15&o)<<12|(63&i)<<6|63&s)}else r+=e.substr(t,9);t+=9}else r+=e.substr(t,3),t+=3}return r}function O(e,r){function t(e){var t=x(e);return t.match(r.UNRESERVED)?t:e}return e.scheme&&(e.scheme=String(e.scheme).replace(r.PCT_ENCODED,t).toLowerCase().replace(r.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(r.PCT_ENCODED,t).replace(r.NOT_USERINFO,b).replace(r.PCT_ENCODED,o)),void 0!==e.host&&(e.host=String(e.host).replace(r.PCT_ENCODED,t).toLowerCase().replace(r.NOT_HOST,b).replace(r.PCT_ENCODED,o)),void 0!==e.path&&(e.path=String(e.path).replace(r.PCT_ENCODED,t).replace(e.scheme?r.NOT_PATH:r.NOT_PATH_NOSCHEME,b).replace(r.PCT_ENCODED,o)),void 0!==e.query&&(e.query=String(e.query).replace(r.PCT_ENCODED,t).replace(r.NOT_QUERY,b).replace(r.PCT_ENCODED,o)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(r.PCT_ENCODED,t).replace(r.NOT_FRAGMENT,b).replace(r.PCT_ENCODED,o)),e}function I(e){return e.replace(/^0*(.*)/,"$1")||"0"}function F(e,r){var t=e.match(r.IPV4ADDRESS)||[],n=u(t,2)[1];return n?n.split(".").map(I).join("."):e}function N(e,r){var t=e.match(r.IPV6ADDRESS)||[],n=u(t,3),o=n[1],a=n[2];if(o){for(var i=o.toLowerCase().split("::").reverse(),s=u(i,2),c=s[0],p=s[1],h=p?p.split(":").map(I):[],f=c.split(":").map(I),l=r.IPV4ADDRESS.test(f[f.length-1]),v=l?7:8,d=f.length-v,g=Array(v),m=0;m<v;++m)g[m]=h[m]||f[d+m]||"";l&&(g[v-1]=F(g[v-1],r));var E=g.reduce(function(e,r,t){if(!r||"0"===r){var n=e[e.length-1];n&&n.index+n.length===t?n.length++:e.push({index:t,length:1})}return e},[]).sort(function(e,r){return r.length-e.length})[0],C=void 0;if(E&&E.length>1){var y=g.slice(0,E.index),S=g.slice(E.index+E.length);C=y.join(":")+"::"+S.join(":")}else C=g.join(":");return a&&(C+="%"+a),C}return e}var R=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,T=void 0==="".match(/(){0}/)[1];function _(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={},n=!1!==r.iri?s:i;"suffix"===r.reference&&(e=(r.scheme?r.scheme+":":"")+"//"+e);var o=e.match(R);if(o){T?(t.scheme=o[1],t.userinfo=o[3],t.host=o[4],t.port=parseInt(o[5],10),t.path=o[6]||"",t.query=o[7],t.fragment=o[8],isNaN(t.port)&&(t.port=o[5])):(t.scheme=o[1]||void 0,t.userinfo=-1!==e.indexOf("@")?o[3]:void 0,t.host=-1!==e.indexOf("//")?o[4]:void 0,t.port=parseInt(o[5],10),t.path=o[6]||"",t.query=-1!==e.indexOf("?")?o[7]:void 0,t.fragment=-1!==e.indexOf("#")?o[8]:void 0,isNaN(t.port)&&(t.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?o[4]:void 0)),t.host&&(t.host=N(F(t.host,n),n)),void 0!==t.scheme||void 0!==t.userinfo||void 0!==t.host||void 0!==t.port||t.path||void 0!==t.query?void 0===t.scheme?t.reference="relative":void 0===t.fragment?t.reference="absolute":t.reference="uri":t.reference="same-document",r.reference&&"suffix"!==r.reference&&r.reference!==t.reference&&(t.error=t.error||"URI is not a "+r.reference+" reference.");var a=w[(r.scheme||t.scheme||"").toLowerCase()];if(r.unicodeSupport||a&&a.unicodeSupport)O(t,n);else{if(t.host&&(r.domainHost||a&&a.domainHost))try{t.host=D.toASCII(t.host.replace(n.PCT_ENCODED,x).toLowerCase())}catch(u){t.error=t.error||"Host's domain name can not be converted to ASCII via punycode: "+u}O(t,i)}a&&a.parse&&a.parse(t,r)}else t.error=t.error||"URI can not be parsed.";return t}var P=/^\.\.?\//,U=/^\/\.(\/|$)/,j=/^\/\.\.(\/|$)/,q=/^\/?(?:.|\n)*?(?=\/|$)/;function H(e){for(var r=[];e.length;)if(e.match(P))e=e.replace(P,"");else if(e.match(U))e=e.replace(U,"/");else if(e.match(j))e=e.replace(j,"/"),r.pop();else if("."===e||".."===e)e="";else{var t=e.match(q);if(!t)throw new Error("Unexpected dot segment condition");var n=t[0];e=e.slice(n.length),r.push(n)}return r.join("")}function z(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.iri?s:i,n=[],o=w[(r.scheme||e.scheme||"").toLowerCase()];if(o&&o.serialize&&o.serialize(e,r),e.host)if(t.IPV6ADDRESS.test(e.host));else if(r.domainHost||o&&o.domainHost)try{e.host=r.iri?D.toUnicode(e.host):D.toASCII(e.host.replace(t.PCT_ENCODED,x).toLowerCase())}catch(c){e.error=e.error||"Host's domain name can not be converted to "+(r.iri?"Unicode":"ASCII")+" via punycode: "+c}O(e,t),"suffix"!==r.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var a=function(e,r){var t=!1!==r.iri?s:i,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(N(F(String(e.host),t),t).replace(t.IPV6ADDRESS,function(e,r,t){return"["+r+(t?"%25"+t:"")+"]"})),"number"==typeof e.port&&(n.push(":"),n.push(e.port.toString(10))),n.length?n.join(""):void 0}(e,r);if(void 0!==a&&("suffix"!==r.reference&&n.push("//"),n.push(a),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var u=e.path;r.absolutePath||o&&o.absolutePath||(u=H(u)),void 0===a&&(u=u.replace(/^\/\//,"/%2F")),n.push(u)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function L(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={};return arguments[3]||(e=_(z(e,t),t),r=_(z(r,t),t)),!(t=t||{}).tolerant&&r.scheme?(n.scheme=r.scheme,n.userinfo=r.userinfo,n.host=r.host,n.port=r.port,n.path=H(r.path||""),n.query=r.query):(void 0!==r.userinfo||void 0!==r.host||void 0!==r.port?(n.userinfo=r.userinfo,n.host=r.host,n.port=r.port,n.path=H(r.path||""),n.query=r.query):(r.path?("/"===r.path.charAt(0)?n.path=H(r.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+r.path:n.path=r.path:n.path="/"+r.path,n.path=H(n.path)),n.query=r.query):(n.path=e.path,void 0!==r.query?n.query=r.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=r.fragment,n}function $(e,r){return e&&e.toString().replace(r&&r.iri?s.PCT_ENCODED:i.PCT_ENCODED,x)}var V={scheme:"http",domainHost:!0,parse:function(e,r){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,r){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},M={scheme:"https",domainHost:V.domainHost,parse:V.parse,serialize:V.serialize},Z={},k="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",G="[0-9A-Fa-f]",Q=t(t("%[EFef][0-9A-Fa-f]%"+G+G+"%"+G+G)+"|"+t("%[89A-Fa-f][0-9A-Fa-f]%"+G+G)+"|"+t("%"+G+G)),Y=r("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),B=new RegExp(k,"g"),J=new RegExp(Q,"g"),K=new RegExp(r("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Y),"g"),W=new RegExp(r("[^]",k,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),X=W;function ee(e){var r=x(e);return r.match(B)?r:e}var re={scheme:"mailto",parse:function(e,r){var t=e,n=t.to=t.path?t.path.split(","):[];if(t.path=void 0,t.query){for(var o=!1,a={},i=t.query.split("&"),s=0,u=i.length;s<u;++s){var c=i[s].split("=");switch(c[0]){case"to":for(var p=c[1].split(","),h=0,f=p.length;h<f;++h)n.push(p[h]);break;case"subject":t.subject=$(c[1],r);break;case"body":t.body=$(c[1],r);break;default:o=!0,a[$(c[0],r)]=$(c[1],r)}}o&&(t.headers=a)}t.query=void 0;for(var l=0,v=n.length;l<v;++l){var d=n[l].split("@");if(d[0]=$(d[0]),r.unicodeSupport)d[1]=$(d[1],r).toLowerCase();else try{d[1]=D.toASCII($(d[1],r).toLowerCase())}catch(g){t.error=t.error||"Email address's domain name can not be converted to ASCII via punycode: "+g}n[l]=d.join("@")}return t},serialize:function(e,r){var t,n=e,a=null!=(t=e.to)?t instanceof Array?t:"number"!=typeof t.length||t.split||t.setInterval||t.call?[t]:Array.prototype.slice.call(t):[];if(a){for(var i=0,s=a.length;i<s;++i){var u=String(a[i]),c=u.lastIndexOf("@"),p=u.slice(0,c).replace(J,ee).replace(J,o).replace(K,b),h=u.slice(c+1);try{h=r.iri?D.toUnicode(h):D.toASCII($(h,r).toLowerCase())}catch(d){n.error=n.error||"Email address's domain name can not be converted to "+(r.iri?"Unicode":"ASCII")+" via punycode: "+d}a[i]=p+"@"+h}n.path=a.join(",")}var f=e.headers=e.headers||{};e.subject&&(f.subject=e.subject),e.body&&(f.body=e.body);var l=[];for(var v in f)f[v]!==Z[v]&&l.push(v.replace(J,ee).replace(J,o).replace(W,b)+"="+f[v].replace(J,ee).replace(J,o).replace(X,b));return l.length&&(n.query=l.join("&")),n}},te=/^([^\:]+)\:(.*)/,ne={scheme:"urn",parse:function(e,r){var t=e.path&&e.path.match(te),n=e;if(t){var o=r.scheme||n.scheme||"urn",a=t[1].toLowerCase(),i=t[2],s=o+":"+(r.nid||a),u=w[s];n.nid=a,n.nss=i,n.path=void 0,u&&(n=u.parse(n,r))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,r){var t=r.scheme||e.scheme||"urn",n=e.nid,o=t+":"+(r.nid||n),a=w[o];a&&(e=a.serialize(e,r));var i=e,s=e.nss;return i.path=(n||r.nid)+":"+s,i}},oe=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ae={scheme:"urn:uuid",parse:function(e,r){var t=e;return t.uuid=t.nss,t.nss=void 0,r.tolerant||t.uuid&&t.uuid.match(oe)||(t.error=t.error||"UUID is not valid."),t},serialize:function(e,r){var t=e;return t.nss=(e.uuid||"").toLowerCase(),t}};w[V.scheme]=V,w[M.scheme]=M,w[re.scheme]=re,w[ne.scheme]=ne,w[ae.scheme]=ae,e.SCHEMES=w,e.pctEncChar=b,e.pctDecChars=x,e.parse=_,e.removeDotSegments=H,e.serialize=z,e.resolveComponents=L,e.resolve=function(e,r,t){var n=function(e,r){var t=e;if(r)for(var n in r)t[n]=r[n];return t}({scheme:"null"},t);return z(L(_(e,n),_(r,n),n,!0),n)},e.normalize=function(e,r){return"string"==typeof e?e=z(_(e,r),r):"object"===n(e)&&(e=_(z(e,r),r)),e},e.equal=function(e,r,t){return"string"==typeof e?e=z(_(e,t),t):"object"===n(e)&&(e=z(e,t)),"string"==typeof r?r=z(_(r,t),t):"object"===n(r)&&(r=z(r,t)),e===r},e.escapeComponent=function(e,r){return e&&e.toString().replace(r&&r.iri?s.ESCAPE:i.ESCAPE,b)},e.unescapeComponent=$,Object.defineProperty(e,"__esModule",{value:!0})});
},{}],"HSgd":[function(require,module,exports) {
"use strict";var r=Array.isArray,t=Object.keys,e=Object.prototype.hasOwnProperty;module.exports=function n(i,f){if(i===f)return!0;if(i&&f&&"object"==typeof i&&"object"==typeof f){var o,u,a,c=r(i),g=r(f);if(c&&g){if((u=i.length)!=f.length)return!1;for(o=u;0!=o--;)if(!n(i[o],f[o]))return!1;return!0}if(c!=g)return!1;var s=i instanceof Date,p=f instanceof Date;if(s!=p)return!1;if(s&&p)return i.getTime()==f.getTime();var l=i instanceof RegExp,y=f instanceof RegExp;if(l!=y)return!1;if(l&&y)return i.toString()==f.toString();var h=t(i);if((u=h.length)!==t(f).length)return!1;for(o=u;0!=o--;)if(!e.call(f,h[o]))return!1;for(o=u;0!=o--;)if(!n(i[a=h[o]],f[a]))return!1;return!0}return i!=i&&f!=f};
},{}],"mONA":[function(require,module,exports) {
"use strict";module.exports=function(r){for(var t,e=0,o=r.length,c=0;c<o;)e++,(t=r.charCodeAt(c++))>=55296&&t<=56319&&c<o&&56320==(64512&(t=r.charCodeAt(c)))&&c++;return e};
},{}],"iI9R":[function(require,module,exports) {
"use strict";function r(r,e){for(var t in e=e||{},r)e[t]=r[t];return e}function e(r,e,t){var n=t?" !== ":" === ",a=t?" || ":" && ",o=t?"!":"",u=t?"":"!";switch(r){case"null":return e+n+"null";case"array":return o+"Array.isArray("+e+")";case"object":return"("+o+e+a+"typeof "+e+n+'"object"'+a+u+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+n+'"number"'+a+u+"("+e+" % 1)"+a+e+n+e+")";default:return"typeof "+e+n+'"'+r+'"'}}function t(r,t){switch(r.length){case 1:return e(r[0],t,!0);default:var n="",a=o(r);for(var u in a.array&&a.object&&(n=a.null?"(":"(!"+t+" || ",n+="typeof "+t+' !== "object")',delete a.null,delete a.array,delete a.object),a.number&&delete a.integer,a)n+=(n?" && ":"")+e(u,t,!0);return n}}module.exports={copy:r,checkDataType:e,checkDataTypes:t,coerceToTypes:a,toHash:o,getProperty:l,escapeQuotes:i,equal:require("fast-deep-equal"),ucs2length:require("./ucs2length"),varOccurences:s,varReplace:f,cleanUpCode:h,finalCleanUpCode:R,schemaHasRules:C,schemaHasRulesExcept:x,schemaUnknownRules:j,toQuotedString:P,getPathExpr:U,getPath:q,getData:J,unescapeFragment:_,unescapeJsonPointer:O,escapeFragment:k,escapeJsonPointer:H};var n=o(["string","number","integer","boolean","null"]);function a(r,e){if(Array.isArray(e)){for(var t=[],a=0;a<e.length;a++){var o=e[a];n[o]?t[t.length]=o:"array"===r&&"array"===o&&(t[t.length]=o)}if(t.length)return t}else{if(n[e])return[e];if("array"===r&&"array"===e)return["array"]}}function o(r){for(var e={},t=0;t<r.length;t++)e[r[t]]=!0;return e}var u=/^[a-z$_][a-z$_0-9]*$/i,c=/'|\\/g;function l(r){return"number"==typeof r?"["+r+"]":u.test(r)?"."+r:"['"+i(r)+"']"}function i(r){return r.replace(c,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function s(r,e){e+="[^0-9]";var t=r.match(new RegExp(e,"g"));return t?t.length:0}function f(r,e,t){return e+="([^0-9])",t=t.replace(/\$/g,"$$$$"),r.replace(new RegExp(e,"g"),t+"$1")}var p=/else\s*{\s*}/g,g=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,v=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;function h(r){return r.replace(p,"").replace(g,"").replace(v,"if (!($1))")}var y=/[^v.]errors/g,d=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,m=/var errors = 0;|var vErrors = null;/g,w="return errors === 0;",$="validate.errors = null; return true;",b=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,E="return data;",A=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,D=/if \(rootData === undefined\) rootData = data;/;function R(r,e){var t=r.match(y);return t&&2==t.length&&(r=e?r.replace(m,"").replace(b,E):r.replace(d,"").replace(w,$)),(t=r.match(A))&&3===t.length?r.replace(D,""):r}function C(r,e){if("boolean"==typeof r)return!r;for(var t in r)if(e[t])return!0}function x(r,e,t){if("boolean"==typeof r)return!r&&"not"!=t;for(var n in r)if(n!=t&&e[n])return!0}function j(r,e){if("boolean"!=typeof r)for(var t in r)if(!e[t])return t}function P(r){return"'"+i(r)+"'"}function U(r,e,t,n){return T(r,t?"'/' + "+e+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'")}function q(r,e,t){return T(r,P(t?"/"+H(e):l(e)))}var z=/^\/(?:[^~]|~0|~1)*$/,I=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function J(r,e,t){var n,a,o,u;if(""===r)return"rootData";if("/"==r[0]){if(!z.test(r))throw new Error("Invalid JSON-pointer: "+r);a=r,o="rootData"}else{if(!(u=r.match(I)))throw new Error("Invalid JSON-pointer: "+r);if(n=+u[1],"#"==(a=u[2])){if(n>=e)throw new Error("Cannot access property/index "+n+" levels up, current level is "+e);return t[e-n]}if(n>e)throw new Error("Cannot access data "+n+" levels up, current level is "+e);if(o="data"+(e-n||""),!a)return o}for(var c=o,i=a.split("/"),s=0;s<i.length;s++){var f=i[s];f&&(c+=" && "+(o+=l(O(f))))}return c}function T(r,e){return'""'==r?e:(r+" + "+e).replace(/' \+ '/g,"")}function _(r){return O(decodeURIComponent(r))}function k(r){return encodeURIComponent(H(r))}function H(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}function O(r){return r.replace(/~1/g,"/").replace(/~0/g,"~")}
},{"fast-deep-equal":"HSgd","./ucs2length":"mONA"}],"wMvT":[function(require,module,exports) {
"use strict";var t=require("./util");function e(e){t.copy(e,this)}module.exports=e;
},{"./util":"iI9R"}],"uX8w":[function(require,module,exports) {
"use strict";var e=module.exports=function(e,i,t){"function"==typeof i&&(t=i,i={}),r(i,"function"==typeof(t=i.cb||t)?t:t.pre||function(){},t.post||function(){},e,"",e)};function r(t,n,o,s,a,m,p,f,u,y){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var c in n(s,a,m,p,f,u,y),s){var d=s[c];if(Array.isArray(d)){if(c in e.arrayKeywords)for(var l=0;l<d.length;l++)r(t,n,o,d[l],a+"/"+c+"/"+l,m,a,c,s,l)}else if(c in e.propsKeywords){if(d&&"object"==typeof d)for(var w in d)r(t,n,o,d[w],a+"/"+c+"/"+i(w),m,a,c,s,w)}else(c in e.keywords||t.allKeys&&!(c in e.skipKeywords))&&r(t,n,o,d,a+"/"+c,m,a,c,s)}o(s,a,m,p,f,u,y)}}function i(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};
},{}],"T7Bo":[function(require,module,exports) {
"use strict";var e=require("uri-js"),r=require("fast-deep-equal"),t=require("./util"),i=require("./schema_obj"),s=require("json-schema-traverse");function a(e,r,t){var s=this._refs[t];if("string"==typeof s){if(!this._refs[s])return a.call(this,e,r,s);s=this._refs[s]}if((s=s||this._schemas[t])instanceof i)return u(s.schema,this._opts.inlineRefs)?s.schema:s.validate||this._compile(s);var o,f,c,h=n.call(this,r,t);return h&&(o=h.schema,r=h.root,c=h.baseId),o instanceof i?f=o.validate||e.call(this,o.schema,r,void 0,c):void 0!==o&&(f=u(o,this._opts.inlineRefs)?o:e.call(this,o,r,void 0,c)),f}function n(r,t){var s=e.parse(t),a=d(s),n=v(this._getId(r.schema));if(0===Object.keys(r.schema).length||a!==n){var f=g(a),h=this._refs[f];if("string"==typeof h)return o.call(this,r,h,s);if(h instanceof i)h.validate||this._compile(h),r=h;else{if(!((h=this._schemas[f])instanceof i))return;if(h.validate||this._compile(h),f==g(t))return{schema:h,root:r,baseId:n};r=h}if(!r.schema)return;n=v(this._getId(r.schema))}return c.call(this,s,n,r.schema,r)}function o(e,r,t){var i=n.call(this,e,r);if(i){var s=i.schema,a=i.baseId;e=i.root;var o=this._getId(s);return o&&(a=_(a,o)),c.call(this,t,a,s,e)}}module.exports=a,a.normalizeId=g,a.fullPath=v,a.url=_,a.ids=y,a.inlineRef=u,a.schema=n;var f=t.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function c(e,r,i,s){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var a=e.fragment.split("/"),o=1;o<a.length;o++){var c=a[o];if(c){if(void 0===(i=i[c=t.unescapeFragment(c)]))break;var h;if(!f[c]&&((h=this._getId(i))&&(r=_(r,h)),i.$ref)){var u=_(r,i.$ref),l=n.call(this,s,u);l&&(i=l.schema,s=l.root,r=l.baseId)}}}return void 0!==i&&i!==s.schema?{schema:i,root:s,baseId:r}:void 0}}var h=t.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function u(e,r){return!1!==r&&(void 0===r||!0===r?l(e):r?m(e)<=r:void 0)}function l(e){var r;if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("object"==typeof(r=e[t])&&!l(r))return!1}else for(var i in e){if("$ref"==i)return!1;if("object"==typeof(r=e[i])&&!l(r))return!1}return!0}function m(e){var r,t=0;if(Array.isArray(e)){for(var i=0;i<e.length;i++)if("object"==typeof(r=e[i])&&(t+=m(r)),t==1/0)return 1/0}else for(var s in e){if("$ref"==s)return 1/0;if(h[s])t++;else if("object"==typeof(r=e[s])&&(t+=m(r)+1),t==1/0)return 1/0}return t}function v(r,t){return!1!==t&&(r=g(r)),d(e.parse(r))}function d(r){return e.serialize(r).split("#")[0]+"#"}var p=/#\/?$/;function g(e){return e?e.replace(p,""):""}function _(r,t){return t=g(t),e.resolve(r,t)}function y(i){var a=g(this._getId(i)),n={"":a},o={"":v(a,!1)},f={},c=this;return s(i,{allKeys:!0},function(i,s,a,h,u,l,m){if(""!==s){var v=c._getId(i),d=n[h],p=o[h]+"/"+u;if(void 0!==m&&(p+="/"+("number"==typeof m?m:t.escapeFragment(m))),"string"==typeof v){v=d=g(d?e.resolve(d,v):v);var _=c._refs[v];if("string"==typeof _&&(_=c._refs[_]),_&&_.schema){if(!r(i,_.schema))throw new Error('id "'+v+'" resolves to more than one schema')}else if(v!=g(p))if("#"==v[0]){if(f[v]&&!r(i,f[v]))throw new Error('id "'+v+'" resolves to more than one schema');f[v]=i}else c._refs[v]=p}n[s]=d,o[s]=p}}),f}
},{"uri-js":"coqt","fast-deep-equal":"HSgd","./util":"iI9R","./schema_obj":"wMvT","json-schema-traverse":"uX8w"}],"vvI2":[function(require,module,exports) {
"use strict";var e=require("./resolve");function t(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}function i(t,s,r){this.message=r||i.message(t,s),this.missingRef=e.url(t,s),this.missingSchema=e.normalizeId(e.fullPath(this.missingRef))}function s(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}module.exports={Validation:s(t),MissingRef:s(i)},i.message=function(e,t){return"can't resolve reference "+t+" from id "+e};
},{"./resolve":"T7Bo"}],"hkDR":[function(require,module,exports) {
"use strict";module.exports=function(r,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var e,n="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(e=t.cmp,function(r){return function(t,n){var i={key:t,value:r[t]},u={key:n,value:r[n]};return e(i,u)}}),u=[];return function r(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var e,o;if(Array.isArray(t)){for(o="[",e=0;e<t.length;e++)e&&(o+=","),o+=r(t[e])||"null";return o+"]"}if(null===t)return"null";if(-1!==u.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var f=u.push(t)-1,c=Object.keys(t).sort(i&&i(t));for(o="",e=0;e<c.length;e++){var l=c[e],y=r(t[l]);y&&(o&&(o+=","),o+=JSON.stringify(l)+":"+y)}return u.splice(f,1),"{"+o+"}"}}(r)};
},{}],"mFX2":[function(require,module,exports) {
"use strict";module.exports=function(e,r,a){var t="",s=!0===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),l=e.self._getId(e.schema);if(e.opts.strictKeywords){var i=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(i){var n="unknown keyword: "+i;if("log"!==e.opts.strictKeywords)throw new Error(n);e.logger.warn(n)}}if(e.isTop&&(t+=" var validate = ",s&&(e.async=!0,t+="async "),t+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",l&&(e.opts.sourceCode||e.opts.processCode)&&(t+=" /*# sourceURL="+l+" */ ")),"boolean"==typeof e.schema||!o&&!e.schema.$ref){var f=e.level,h=e.dataLevel,c=e.schema["false schema"],u=e.schemaPath+e.util.getProperty("false schema"),p=e.errSchemaPath+"/false schema",d=!e.opts.allErrors,m="data"+(h||""),v="valid"+f;if(!1===e.schema){e.isTop?d=!0:t+=" var "+v+" = false; ",(X=X||[]).push(t),t="",!1!==e.createErrors?(t+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",!1!==e.opts.messages&&(t+=" , message: 'boolean schema is false' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var y=t;t=X.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+y+"]); ":t+=" validate.errors = ["+y+"]; return false; ":t+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?t+=s?" return data; ":" validate.errors = null; return true; ":t+=" var "+v+" = true; ";return e.isTop&&(t+=" }; return validate; "),t}if(e.isTop){var g=e.isTop;f=e.level=0,h=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var w="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(w);e.logger.warn(w)}t+=" var vErrors = null; ",t+=" var errors = 0;     ",t+=" if (rootData === undefined) rootData = data; "}else{f=e.level,m="data"+((h=e.dataLevel)||"");if(l&&(e.baseId=e.resolve.url(e.baseId,l)),s&&!e.async)throw new Error("async schema in sync schema");t+=" var errs_"+f+" = errors;"}v="valid"+f,d=!e.opts.allErrors;var E="",P="",b=e.schema.type,D=Array.isArray(b);if(b&&e.opts.nullable&&!0===e.schema.nullable&&(D?-1==b.indexOf("null")&&(b=b.concat("null")):"null"!=b&&(b=[b,"null"],D=!0)),D&&1==b.length&&(b=b[0],D=!1),e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(t+=" "+e.RULES.all.$comment.code(e,"$comment")),b){if(e.opts.coerceTypes)var S=e.util.coerceToTypes(e.opts.coerceTypes,b);var R=e.RULES.types[b];if(S||D||!0===R||R&&!Y(R)){u=e.schemaPath+".type",p=e.errSchemaPath+"/type",u=e.schemaPath+".type",p=e.errSchemaPath+"/type";var T=D?"checkDataTypes":"checkDataType";if(t+=" if ("+e.util[T](b,m,!0)+") { ",S){var k="dataType"+f,$="coerced"+f;t+=" var "+k+" = typeof "+m+"; ","array"==e.opts.coerceTypes&&(t+=" if ("+k+" == 'object' && Array.isArray("+m+")) "+k+" = 'array'; "),t+=" var "+$+" = undefined; ";var L="",U=S;if(U)for(var j,A=-1,I=U.length-1;A<I;)j=U[A+=1],A&&(t+=" if ("+$+" === undefined) { ",L+="}"),"array"==e.opts.coerceTypes&&"array"!=j&&(t+=" if ("+k+" == 'array' && "+m+".length == 1) { "+$+" = "+m+" = "+m+"[0]; "+k+" = typeof "+m+";  } "),"string"==j?t+=" if ("+k+" == 'number' || "+k+" == 'boolean') "+$+" = '' + "+m+"; else if ("+m+" === null) "+$+" = ''; ":"number"==j||"integer"==j?(t+=" if ("+k+" == 'boolean' || "+m+" === null || ("+k+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==j&&(t+=" && !("+m+" % 1)"),t+=")) "+$+" = +"+m+"; "):"boolean"==j?t+=" if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+$+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+$+" = true; ":"null"==j?t+=" if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+$+" = null; ":"array"==e.opts.coerceTypes&&"array"==j&&(t+=" if ("+k+" == 'string' || "+k+" == 'number' || "+k+" == 'boolean' || "+m+" == null) "+$+" = ["+m+"]; ");t+=" "+L+" if ("+$+" === undefined) {   ",(X=X||[]).push(t),t="",!1!==e.createErrors?(t+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",t+=D?""+b.join(","):""+b,t+="' } ",!1!==e.opts.messages&&(t+=" , message: 'should be ",t+=D?""+b.join(","):""+b,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";y=t;t=X.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+y+"]); ":t+=" validate.errors = ["+y+"]; return false; ":t+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else {  ";var x=h?"data"+(h-1||""):"parentData";t+=" "+m+" = "+$+"; ",h||(t+="if ("+x+" !== undefined)"),t+=" "+x+"["+(h?e.dataPathArr[h]:"parentDataProperty")+"] = "+$+"; } "}else{(X=X||[]).push(t),t="",!1!==e.createErrors?(t+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",t+=D?""+b.join(","):""+b,t+="' } ",!1!==e.opts.messages&&(t+=" , message: 'should be ",t+=D?""+b.join(","):""+b,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";y=t;t=X.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+y+"]); ":t+=" validate.errors = ["+y+"]; return false; ":t+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}t+=" } "}}if(e.schema.$ref&&!o)t+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",d&&(t+=" } if (errors === ",t+=g?"0":"errs_"+f,t+=") { ",P+="}");else{var _=e.RULES;if(_)for(var C=-1,V=_.length-1;C<V;)if(Y(R=_[C+=1])){if(R.type&&(t+=" if ("+e.util.checkDataType(R.type,m)+") { "),e.opts.useDefaults)if("object"==R.type&&e.schema.properties){c=e.schema.properties;var O=Object.keys(c);if(O)for(var Q,J=-1,K=O.length-1;J<K;){if(void 0!==(q=c[Q=O[J+=1]]).default){var N=m+e.util.getProperty(Q);if(e.compositeRule){if(e.opts.strictDefaults){w="default is ignored for: "+N;if("log"!==e.opts.strictDefaults)throw new Error(w);e.logger.warn(w)}}else t+=" if ("+N+" === undefined ","empty"==e.opts.useDefaults&&(t+=" || "+N+" === null || "+N+" === '' "),t+=" ) "+N+" = ","shared"==e.opts.useDefaults?t+=" "+e.useDefault(q.default)+" ":t+=" "+JSON.stringify(q.default)+" ",t+="; "}}}else if("array"==R.type&&Array.isArray(e.schema.items)){var H=e.schema.items;if(H){A=-1;for(var q,z=H.length-1;A<z;)if(void 0!==(q=H[A+=1]).default){N=m+"["+A+"]";if(e.compositeRule){if(e.opts.strictDefaults){w="default is ignored for: "+N;if("log"!==e.opts.strictDefaults)throw new Error(w);e.logger.warn(w)}}else t+=" if ("+N+" === undefined ","empty"==e.opts.useDefaults&&(t+=" || "+N+" === null || "+N+" === '' "),t+=" ) "+N+" = ","shared"==e.opts.useDefaults?t+=" "+e.useDefault(q.default)+" ":t+=" "+JSON.stringify(q.default)+" ",t+="; "}}}var B=R.rules;if(B)for(var F,G=-1,M=B.length-1;G<M;)if(Z(F=B[G+=1])){var W=F.code(e,F.keyword,R.type);W&&(t+=" "+W+" ",d&&(E+="}"))}if(d&&(t+=" "+E+" ",E=""),R.type&&(t+=" } ",b&&b===R.type&&!S)){t+=" else { ";var X;u=e.schemaPath+".type",p=e.errSchemaPath+"/type";(X=X||[]).push(t),t="",!1!==e.createErrors?(t+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",t+=D?""+b.join(","):""+b,t+="' } ",!1!==e.opts.messages&&(t+=" , message: 'should be ",t+=D?""+b.join(","):""+b,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";y=t;t=X.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+y+"]); ":t+=" validate.errors = ["+y+"]; return false; ":t+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } "}d&&(t+=" if (errors === ",t+=g?"0":"errs_"+f,t+=") { ",P+="}")}}function Y(e){for(var r=e.rules,a=0;a<r.length;a++)if(Z(r[a]))return!0}function Z(r){return void 0!==e.schema[r.keyword]||r.implements&&function(r){for(var a=r.implements,t=0;t<a.length;t++)if(void 0!==e.schema[a[t]])return!0}(r)}return d&&(t+=" "+P+" "),g?(s?(t+=" if (errors === 0) return data;           ",t+=" else throw new ValidationError(vErrors); "):(t+=" validate.errors = vErrors; ",t+=" return errors === 0;       "),t+=" }; return validate;"):t+=" var "+v+" = errors === errs_"+f+";",t=e.util.cleanUpCode(t),g&&(t=e.util.finalCleanUpCode(t,s)),t};
},{}],"MSsi":[function(require,module,exports) {
"use strict";var e=require("./resolve"),r=require("./util"),t=require("./error_classes"),i=require("fast-json-stable-stringify"),o=require("../dotjs/validate"),a=r.ucs2length,n=require("fast-deep-equal"),s=t.Validation;function l(f,g,y,w){var R=this,V=this._opts,S=[void 0],_={},b=[],E={},q=[],j={},x=[];g=g||{schema:f,refVal:S,refs:_};var $=c.call(this,f,g,w),k=this._compilations[$.index];if($.compiling)return k.callValidate=function e(){var r=k.validate;var t=r.apply(this,arguments);e.errors=r.errors;return t};var C=this._formats,P=this.RULES;try{var I=U(f,g,y,w);k.validate=I;var L=k.callValidate;return L&&(L.schema=I.schema,L.errors=null,L.refs=I.refs,L.refVal=I.refVal,L.root=I.root,L.$async=I.$async,V.sourceCode&&(L.source=I.source)),I}finally{u.call(this,f,g,w)}function U(i,c,u,f){var y=!c||c&&c.schema==i;if(c.schema!=g.schema)return l.call(R,i,c,u,f);var w,E=!0===i.$async,j=o({isTop:!0,schema:i,isRoot:y,baseId:f,root:c,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:t.MissingRef,RULES:P,validate:o,util:r,resolve:e,resolveRef:M,usePattern:T,useDefault:D,useCustomRule:F,opts:V,formats:C,logger:R.logger,self:R});j=p(S,h)+p(b,d)+p(q,v)+p(x,m)+j,V.processCode&&(j=V.processCode(j));try{w=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",j)(R,P,C,g,S,q,x,n,a,s),S[0]=w}catch($){throw R.logger.error("Error compiling schema, function code:",j),$}return w.schema=i,w.errors=null,w.refs=_,w.refVal=S,w.root=y?w:c,E&&(w.$async=!0),!0===V.sourceCode&&(w.source={code:j,patterns:b,defaults:q}),w}function M(r,t,i){t=e.url(r,t);var o,a,n=_[t];if(void 0!==n)return Q(o=S[n],a="refVal["+n+"]");if(!i&&g.refs){var s=g.refs[t];if(void 0!==s)return Q(o=g.refVal[s],a=O(t,o))}a=O(t);var c=e.call(R,U,g,t);if(void 0===c){var u=y&&y[t];u&&(c=e.inlineRef(u,V.inlineRefs)?u:l.call(R,u,g,y,r))}if(void 0!==c)return function(e,r){var t=_[e];S[t]=r}(t,c),Q(c,a);!function(e){delete _[e]}(t)}function O(e,r){var t=S.length;return S[t]=r,_[e]=t,"refVal"+t}function Q(e,r){return"object"==typeof e||"boolean"==typeof e?{code:r,schema:e,inline:!0}:{code:r,$async:e&&!!e.$async}}function T(e){var r=E[e];return void 0===r&&(r=E[e]=b.length,b[r]=e),"pattern"+r}function D(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return r.toQuotedString(e);case"object":if(null===e)return"null";var t=i(e),o=j[t];return void 0===o&&(o=j[t]=q.length,q[o]=e),"default"+o}}function F(e,r,t,i){if(!1!==R._opts.validateSchema){var o=e.definition.dependencies;if(o&&!o.every(function(e){return Object.prototype.hasOwnProperty.call(t,e)}))throw new Error("parent schema must have all required keywords: "+o.join(","));var a=e.definition.validateSchema;if(a)if(!a(r)){var n="keyword schema is invalid: "+R.errorsText(a.errors);if("log"!=R._opts.validateSchema)throw new Error(n);R.logger.error(n)}}var s,l=e.definition.compile,c=e.definition.inline,u=e.definition.macro;if(l)s=l.call(R,r,t,i);else if(u)s=u.call(R,r,t,i),!1!==V.validateSchema&&R.validateSchema(s,!0);else if(c)s=c.call(R,i,e.keyword,r,t);else if(!(s=e.definition.validate))return;if(void 0===s)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var f=x.length;return x[f]=s,{code:"customRule"+f,validate:s}}}function c(e,r,t){var i=f.call(this,e,r,t);return i>=0?{index:i,compiling:!0}:(i=this._compilations.length,this._compilations[i]={schema:e,root:r,baseId:t},{index:i,compiling:!1})}function u(e,r,t){var i=f.call(this,e,r,t);i>=0&&this._compilations.splice(i,1)}function f(e,r,t){for(var i=0;i<this._compilations.length;i++){var o=this._compilations[i];if(o.schema==e&&o.root==r&&o.baseId==t)return i}return-1}function d(e,t){return"var pattern"+e+" = new RegExp("+r.toQuotedString(t[e])+");"}function v(e){return"var default"+e+" = defaults["+e+"];"}function h(e,r){return void 0===r[e]?"":"var refVal"+e+" = refVal["+e+"];"}function m(e){return"var customRule"+e+" = customRules["+e+"];"}function p(e,r){if(!e.length)return"";for(var t="",i=0;i<e.length;i++)t+=r(i,e);return t}module.exports=l;
},{"./resolve":"T7Bo","./util":"iI9R","./error_classes":"vvI2","fast-json-stable-stringify":"hkDR","../dotjs/validate":"mFX2","fast-deep-equal":"HSgd"}],"sdiS":[function(require,module,exports) {
"use strict";var t=module.exports=function(){this._cache={}};t.prototype.put=function(t,e){this._cache[t]=e},t.prototype.get=function(t){return this._cache[t]},t.prototype.del=function(t){delete this._cache[t]},t.prototype.clear=function(){this._cache={}};
},{}],"DtrD":[function(require,module,exports) {
"use strict";var d=require("./util"),a=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,u=[0,31,28,31,30,31,30,31,31,30,31,30,31],F=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,f=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,D=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,t=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,e=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,r=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,i=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,z=/^(?:\/(?:[^~/]|~0|~1)*)*$/,n=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,$=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function s(a){return a="full"==a?"full":"fast",d.copy(s[a])}function x(d){return d%4==0&&(d%100!=0||d%400==0)}function _(d){var F=d.match(a);if(!F)return!1;var f=+F[1],D=+F[2],t=+F[3];return D>=1&&D<=12&&t>=1&&t<=(2==D&&x(f)?29:u[D])}function o(d,a){var u=d.match(F);if(!u)return!1;var f=u[1],D=u[2],t=u[3],e=u[5];return(f<=23&&D<=59&&t<=59||23==f&&59==D&&60==t)&&(!a||e)}module.exports=s,s.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":e,url:r,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:f,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:c,uuid:i,"json-pointer":z,"json-pointer-uri-fragment":n,"relative-json-pointer":$},s.full={date:_,time:o,"date-time":B,uri:p,"uri-reference":t,"uri-template":e,url:r,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:l,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:c,uuid:i,"json-pointer":z,"json-pointer-uri-fragment":n,"relative-json-pointer":$};var E=/t|\s/i;function B(d){var a=d.split(E);return 2==a.length&&_(a[0])&&o(a[1],!0)}function l(d){return d.length<=255&&f.test(d)}var C=/\/|:/;function p(d){return C.test(d)&&D.test(d)}var v=/[^\\]\\Z/;function c(d){if(v.test(d))return!1;try{return new RegExp(d),!0}catch(a){return!1}}
},{"./util":"iI9R"}],"wQKR":[function(require,module,exports) {
"use strict";module.exports=function(r,e,a){var s,t,o=" ",i=r.level,l=r.dataLevel,c=r.schema[e],n=r.errSchemaPath+"/"+e,h=!r.opts.allErrors,v="data"+(l||""),f="valid"+i;if("#"==c||"#/"==c)r.isRoot?(s=r.async,t="validate"):(s=!0===r.root.schema.$async,t="root.refVal[0]");else{var d=r.resolveRef(r.baseId,c,r.isRoot);if(void 0===d){var p=r.MissingRefError.message(r.baseId,c);if("fail"==r.opts.missingRefs){r.logger.error(p),(g=g||[]).push(o),o="",!1!==r.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(n)+" , params: { ref: '"+r.util.escapeQuotes(c)+"' } ",!1!==r.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+r.util.escapeQuotes(c)+"' "),r.opts.verbose&&(o+=" , schema: "+r.util.toQuotedString(c)+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+v+" "),o+=" } "):o+=" {} ";var m=o;o=g.pop(),!r.compositeRule&&h?r.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(o+=" if (false) { ")}else{if("ignore"!=r.opts.missingRefs)throw new r.MissingRefError(r.baseId,c,p);r.logger.warn(p),h&&(o+=" if (true) { ")}}else if(d.inline){var u=r.util.copy(r);u.level++;var E="valid"+u.level;u.schema=d.schema,u.schemaPath="",u.errSchemaPath=c,o+=" "+r.validate(u).replace(/validate\.schema/g,d.code)+" ",h&&(o+=" if ("+E+") { ")}else s=!0===d.$async||r.async&&!1!==d.$async,t=d.code}if(t){var g;(g=g||[]).push(o),o="",r.opts.passContext?o+=" "+t+".call(this, ":o+=" "+t+"( ",o+=" "+v+", (dataPath || '')",'""'!=r.errorPath&&(o+=" + "+r.errorPath);var y=o+=" , "+(l?"data"+(l-1||""):"parentData")+" , "+(l?r.dataPathArr[l]:"parentDataProperty")+", rootData)  ";if(o=g.pop(),s){if(!r.async)throw new Error("async schema referenced by sync schema");h&&(o+=" var "+f+"; "),o+=" try { await "+y+"; ",h&&(o+=" "+f+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",h&&(o+=" "+f+" = false; "),o+=" } ",h&&(o+=" if ("+f+") { ")}else o+=" if (!"+y+") { if (vErrors === null) vErrors = "+t+".errors; else vErrors = vErrors.concat("+t+".errors); errors = vErrors.length; } ",h&&(o+=" else { ")}return o};
},{}],"ka0E":[function(require,module,exports) {
"use strict";module.exports=function(e,t,a){var l=" ",r=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,i=e.util.copy(e),o="";i.level++;var u="valid"+i.level,m=i.baseId,d=!0,p=r;if(p)for(var v,f=-1,n=p.length-1;f<n;)v=p[f+=1],(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0:e.util.schemaHasRules(v,e.RULES.all))&&(d=!1,i.schema=v,i.schemaPath=s+"["+f+"]",i.errSchemaPath=c+"/"+f,l+="  "+e.validate(i)+" ",i.baseId=m,h&&(l+=" if ("+u+") { ",o+="}"));return h&&(l+=d?" if (true) { ":" "+o.slice(0,-1)+" "),l=e.util.cleanUpCode(l)};
},{}],"Z8af":[function(require,module,exports) {
"use strict";module.exports=function(e,r,a){var s=" ",t=e.level,o=e.dataLevel,l=e.schema[r],i=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,v="data"+(o||""),m="valid"+t,u="errs__"+t,n=e.util.copy(e),d="";n.level++;var p="valid"+n.level;if(l.every(function(r){return e.opts.strictKeywords?"object"==typeof r&&Object.keys(r).length>0:e.util.schemaHasRules(r,e.RULES.all)})){var f=n.baseId;s+=" var "+u+" = errors; var "+m+" = false;  ";var E=e.compositeRule;e.compositeRule=n.compositeRule=!0;var y=l;if(y)for(var P,R=-1,g=y.length-1;R<g;)P=y[R+=1],n.schema=P,n.schemaPath=i+"["+R+"]",n.errSchemaPath=c+"/"+R,s+="  "+e.validate(n)+" ",n.baseId=f,s+=" "+m+" = "+m+" || "+p+"; if (!"+m+") { ",d+="}";e.compositeRule=n.compositeRule=E,s+=" "+d+" if (!"+m+") {   var err =   ",!1!==e.createErrors?(s+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(s+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(s+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; "),s+=" } else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } ",e.opts.allErrors&&(s+=" } "),s=e.util.cleanUpCode(s)}else h&&(s+=" if (true) { ");return s};
},{}],"h3nU":[function(require,module,exports) {
"use strict";module.exports=function(t,o,e){var r=" ",s=t.schema[o],n=t.errSchemaPath+"/"+o,c=(t.opts.allErrors,t.util.toQuotedString(s));return!0===t.opts.$comment?r+=" console.log("+c+");":"function"==typeof t.opts.$comment&&(r+=" self._opts.$comment("+c+", "+t.util.toQuotedString(n)+", validate.root.schema);"),r};
},{}],"y9cs":[function(require,module,exports) {
"use strict";module.exports=function(a,e,r){var t=" ",s=a.level,o=a.dataLevel,l=a.schema[e],h=a.schemaPath+a.util.getProperty(e),c=a.errSchemaPath+"/"+e,d=!a.opts.allErrors,m="data"+(o||""),v="valid"+s,u=a.opts.$data&&l&&l.$data;u&&(t+=" var schema"+s+" = "+a.util.getData(l.$data,o,a.dataPathArr)+"; "),u||(t+=" var schema"+s+" = validate.schema"+h+";"),t+="var "+v+" = equal("+m+", schema"+s+"); if (!"+v+") {   ";var i=i||[];i.push(t),t="",!1!==a.createErrors?(t+=" { keyword: 'const' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(c)+" , params: { allowedValue: schema"+s+" } ",!1!==a.opts.messages&&(t+=" , message: 'should be equal to constant' "),a.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var n=t;return t=i.pop(),!a.compositeRule&&d?a.async?t+=" throw new ValidationError(["+n+"]); ":t+=" validate.errors = ["+n+"]; return false; ":t+=" var err = "+n+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",d&&(t+=" else { "),t};
},{}],"bQT3":[function(require,module,exports) {
"use strict";module.exports=function(e,r,a){var t=" ",s=e.level,l=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),v=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,h="data"+(l||""),u="valid"+s,d="errs__"+s,p=e.util.copy(e);p.level++;var m="valid"+p.level,n="i"+s,P=p.dataLevel=e.dataLevel+1,f="data"+P,E=e.baseId,g=e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:e.util.schemaHasRules(o,e.RULES.all);if(t+="var "+d+" = errors;var "+u+";",g){var R=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=o,p.schemaPath=i,p.errSchemaPath=v,t+=" var "+m+" = false; for (var "+n+" = 0; "+n+" < "+h+".length; "+n+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,n,e.opts.jsonPointers,!0);var y=h+"["+n+"]";p.dataPathArr[P]=n;var b=e.validate(p);p.baseId=E,e.util.varOccurences(b,f)<2?t+=" "+e.util.varReplace(b,f,y)+" ":t+=" var "+f+" = "+y+"; "+b+" ",t+=" if ("+m+") break; }  ",e.compositeRule=p.compositeRule=R,t+="  if (!"+m+") {"}else t+=" if ("+h+".length == 0) {";var S=S||[];S.push(t),t="",!1!==e.createErrors?(t+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: {} ",!1!==e.opts.messages&&(t+=" , message: 'should contain a valid item' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var w=t;return t=S.pop(),!e.compositeRule&&c?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { ",g&&(t+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),e.opts.allErrors&&(t+=" } "),t=e.util.cleanUpCode(t)};
},{}],"n6gK":[function(require,module,exports) {
"use strict";module.exports=function(e,r,t){var a=" ",s=e.level,o=e.dataLevel,p=e.schema[r],i=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,n="data"+(o||""),h="errs__"+s,c=e.util.copy(e),d="";c.level++;var v="valid"+c.level,P={},m={},y=e.opts.ownProperties;for(j in p){var g=p[j],f=Array.isArray(g)?m:P;f[j]=g}a+="var "+h+" = errors;";var Q=e.errorPath;for(var j in a+="var missing"+s+";",m)if((f=m[j]).length){if(a+=" if ( "+n+e.util.getProperty(j)+" !== undefined ",y&&(a+=" && Object.prototype.hasOwnProperty.call("+n+", '"+e.util.escapeQuotes(j)+"') "),u){a+=" && ( ";var w=f;if(w)for(var E=-1,b=w.length-1;E<b;){R=w[E+=1],E&&(a+=" || "),a+=" ( ( "+(I=n+(D=e.util.getProperty(R)))+" === undefined ",y&&(a+=" || ! Object.prototype.hasOwnProperty.call("+n+", '"+e.util.escapeQuotes(R)+"') "),a+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?R:D)+") ) "}a+=")) {  ";var O="missing"+s,S="' + "+O+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(Q,O,!0):Q+" + "+O);var _=_||[];_.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(j)+"', missingProperty: '"+S+"', depsCount: "+f.length+", deps: '"+e.util.escapeQuotes(1==f.length?f[0]:f.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==f.length?a+="property "+e.util.escapeQuotes(f[0]):a+="properties "+e.util.escapeQuotes(f.join(", ")),a+=" when property "+e.util.escapeQuotes(j)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+n+" "),a+=" } "):a+=" {} ";var k=a;a=_.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+k+"]); ":a+=" validate.errors = ["+k+"]; return false; ":a+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{a+=" ) { ";var C=f;if(C)for(var R,x=-1,A=C.length-1;x<A;){R=C[x+=1];var D=e.util.getProperty(R),I=(S=e.util.escapeQuotes(R),n+D);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(Q,R,e.opts.jsonPointers)),a+=" if ( "+I+" === undefined ",y&&(a+=" || ! Object.prototype.hasOwnProperty.call("+n+", '"+e.util.escapeQuotes(R)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(j)+"', missingProperty: '"+S+"', depsCount: "+f.length+", deps: '"+e.util.escapeQuotes(1==f.length?f[0]:f.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==f.length?a+="property "+e.util.escapeQuotes(f[0]):a+="properties "+e.util.escapeQuotes(f.join(", ")),a+=" when property "+e.util.escapeQuotes(j)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+n+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}a+=" }   ",u&&(d+="}",a+=" else { ")}e.errorPath=Q;var L=c.baseId;for(var j in P){g=P[j];(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0:e.util.schemaHasRules(g,e.RULES.all))&&(a+=" "+v+" = true; if ( "+n+e.util.getProperty(j)+" !== undefined ",y&&(a+=" && Object.prototype.hasOwnProperty.call("+n+", '"+e.util.escapeQuotes(j)+"') "),a+=") { ",c.schema=g,c.schemaPath=i+e.util.getProperty(j),c.errSchemaPath=l+"/"+e.util.escapeFragment(j),a+="  "+e.validate(c)+" ",c.baseId=L,a+=" }  ",u&&(a+=" if ("+v+") { ",d+="}"))}return u&&(a+="   "+d+" if ("+h+" == errors) {"),a=e.util.cleanUpCode(a)};
},{}],"SsdN":[function(require,module,exports) {
"use strict";module.exports=function(a,e,r){var t=" ",s=a.level,l=a.dataLevel,o=a.schema[e],h=a.schemaPath+a.util.getProperty(e),d=a.errSchemaPath+"/"+e,i=!a.opts.allErrors,u="data"+(l||""),m="valid"+s,v=a.opts.$data&&o&&o.$data;v&&(t+=" var schema"+s+" = "+a.util.getData(o.$data,l,a.dataPathArr)+"; ");var c="i"+s,n="schema"+s;v||(t+=" var "+n+" = validate.schema"+h+";"),t+="var "+m+";",v&&(t+=" if (schema"+s+" === undefined) "+m+" = true; else if (!Array.isArray(schema"+s+")) "+m+" = false; else {"),t+=m+" = false;for (var "+c+"=0; "+c+"<"+n+".length; "+c+"++) if (equal("+u+", "+n+"["+c+"])) { "+m+" = true; break; }",v&&(t+="  }  "),t+=" if (!"+m+") {   ";var p=p||[];p.push(t),t="",!1!==a.createErrors?(t+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(d)+" , params: { allowedValues: schema"+s+" } ",!1!==a.opts.messages&&(t+=" , message: 'should be equal to one of the allowed values' "),a.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+u+" "),t+=" } "):t+=" {} ";var f=t;return t=p.pop(),!a.compositeRule&&i?a.async?t+=" throw new ValidationError(["+f+"]); ":t+=" validate.errors = ["+f+"]; return false; ":t+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",i&&(t+=" else { "),t};
},{}],"fVUx":[function(require,module,exports) {
"use strict";module.exports=function(a,t,r){var e=" ",o=a.level,s=a.dataLevel,i=a.schema[t],n=a.schemaPath+a.util.getProperty(t),f=a.errSchemaPath+"/"+t,c=!a.opts.allErrors,u="data"+(s||"");if(!1===a.opts.format)return c&&(e+=" if (true) { "),e;var m,h=a.opts.$data&&i&&i.$data;h?(e+=" var schema"+o+" = "+a.util.getData(i.$data,s,a.dataPathArr)+"; ",m="schema"+o):m=i;var l=a.opts.unknownFormats,d=Array.isArray(l);if(h){e+=" var "+(p="format"+o)+" = formats["+m+"]; var "+(v="isObject"+o)+" = typeof "+p+" == 'object' && !("+p+" instanceof RegExp) && "+p+".validate; var "+(y="formatType"+o)+" = "+v+" && "+p+".type || 'string'; if ("+v+") { ",a.async&&(e+=" var async"+o+" = "+p+".async; "),e+=" "+p+" = "+p+".validate; } if (  ",h&&(e+=" ("+m+" !== undefined && typeof "+m+" != 'string') || "),e+=" (","ignore"!=l&&(e+=" ("+m+" && !"+p+" ",d&&(e+=" && self._opts.unknownFormats.indexOf("+m+") == -1 "),e+=") || "),e+=" ("+p+" && "+y+" == '"+r+"' && !(typeof "+p+" == 'function' ? ",a.async?e+=" (async"+o+" ? await "+p+"("+u+") : "+p+"("+u+")) ":e+=" "+p+"("+u+") ",e+=" : "+p+".test("+u+"))))) {"}else{var p;if(!(p=a.formats[i])){if("ignore"==l)return a.logger.warn('unknown format "'+i+'" ignored in schema at path "'+a.errSchemaPath+'"'),c&&(e+=" if (true) { "),e;if(d&&l.indexOf(i)>=0)return c&&(e+=" if (true) { "),e;throw new Error('unknown format "'+i+'" is used in schema at path "'+a.errSchemaPath+'"')}var v,y=(v="object"==typeof p&&!(p instanceof RegExp)&&p.validate)&&p.type||"string";if(v){var g=!0===p.async;p=p.validate}if(y!=r)return c&&(e+=" if (true) { "),e;if(g){if(!a.async)throw new Error("async format in sync schema");e+=" if (!(await "+(w="formats"+a.util.getProperty(i)+".validate")+"("+u+"))) { "}else{e+=" if (! ";var w="formats"+a.util.getProperty(i);v&&(w+=".validate"),e+="function"==typeof p?" "+w+"("+u+") ":" "+w+".test("+u+") ",e+=") { "}}var P=P||[];P.push(e),e="",!1!==a.createErrors?(e+=" { keyword: 'format' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(f)+" , params: { format:  ",e+=h?""+m:""+a.util.toQuotedString(i),e+="  } ",!1!==a.opts.messages&&(e+=" , message: 'should match format \"",e+=h?"' + "+m+" + '":""+a.util.escapeQuotes(i),e+="\"' "),a.opts.verbose&&(e+=" , schema:  ",e+=h?"validate.schema"+n:""+a.util.toQuotedString(i),e+="         , parentSchema: validate.schema"+a.schemaPath+" , data: "+u+" "),e+=" } "):e+=" {} ";var E=e;return e=P.pop(),!a.compositeRule&&c?a.async?e+=" throw new ValidationError(["+E+"]); ":e+=" validate.errors = ["+E+"]; return false; ":e+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",e+=" } ",c&&(e+=" else { "),e};
},{}],"y9FO":[function(require,module,exports) {
"use strict";module.exports=function(e,r,a){var s=" ",t=e.level,l=e.dataLevel,h=e.schema[r],o=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,i=!e.opts.allErrors,m="data"+(l||""),v="valid"+t,u="errs__"+t,d=e.util.copy(e);d.level++;var n="valid"+d.level,p=e.schema.then,P=e.schema.else,f=void 0!==p&&(e.opts.strictKeywords?"object"==typeof p&&Object.keys(p).length>0:e.util.schemaHasRules(p,e.RULES.all)),E=void 0!==P&&(e.opts.strictKeywords?"object"==typeof P&&Object.keys(P).length>0:e.util.schemaHasRules(P,e.RULES.all)),y=d.baseId;if(f||E){var R;d.createErrors=!1,d.schema=h,d.schemaPath=o,d.errSchemaPath=c,s+=" var "+u+" = errors; var "+v+" = true;  ";var S=e.compositeRule;e.compositeRule=d.compositeRule=!0,s+="  "+e.validate(d)+" ",d.baseId=y,d.createErrors=!0,s+="  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; }  ",e.compositeRule=d.compositeRule=S,f?(s+=" if ("+n+") {  ",d.schema=e.schema.then,d.schemaPath=e.schemaPath+".then",d.errSchemaPath=e.errSchemaPath+"/then",s+="  "+e.validate(d)+" ",d.baseId=y,s+=" "+v+" = "+n+"; ",f&&E?s+=" var "+(R="ifClause"+t)+" = 'then'; ":R="'then'",s+=" } ",E&&(s+=" else { ")):s+=" if (!"+n+") { ",E&&(d.schema=e.schema.else,d.schemaPath=e.schemaPath+".else",d.errSchemaPath=e.errSchemaPath+"/else",s+="  "+e.validate(d)+" ",d.baseId=y,s+=" "+v+" = "+n+"; ",f&&E?s+=" var "+(R="ifClause"+t)+" = 'else'; ":R="'else'",s+=" } "),s+=" if (!"+v+") {   var err =   ",!1!==e.createErrors?(s+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+R+" } ",!1!==e.opts.messages&&(s+=" , message: 'should match \"' + "+R+" + '\" schema' "),e.opts.verbose&&(s+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&i&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; "),s+=" }   ",i&&(s+=" else { "),s=e.util.cleanUpCode(s)}else i&&(s+=" if (true) { ");return s};
},{}],"iBDe":[function(require,module,exports) {
"use strict";module.exports=function(e,a,r){var t=" ",s=e.level,l=e.dataLevel,h=e.schema[a],o=e.schemaPath+e.util.getProperty(a),i=e.errSchemaPath+"/"+a,c=!e.opts.allErrors,v="data"+(l||""),d="valid"+s,n="errs__"+s,m=e.util.copy(e),u="";m.level++;var P="valid"+m.level,p="i"+s,f=m.dataLevel=e.dataLevel+1,g="data"+f,y=e.baseId;if(t+="var "+n+" = errors;var "+d+";",Array.isArray(h)){var b=e.schema.additionalItems;if(!1===b){t+=" "+d+" = "+v+".length <= "+h.length+"; ";var E=i;i=e.errSchemaPath+"/additionalItems",t+="  if (!"+d+") {   ";var S=S||[];S.push(t),t="",!1!==e.createErrors?(t+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(i)+" , params: { limit: "+h.length+" } ",!1!==e.opts.messages&&(t+=" , message: 'should NOT have more than "+h.length+" items' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),t+=" } "):t+=" {} ";var j=t;t=S.pop(),!e.compositeRule&&c?e.async?t+=" throw new ValidationError(["+j+"]); ":t+=" validate.errors = ["+j+"]; return false; ":t+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",i=E,c&&(u+="}",t+=" else { ")}var R=h;if(R)for(var I,O=-1,k=R.length-1;O<k;)if(I=R[O+=1],e.opts.strictKeywords?"object"==typeof I&&Object.keys(I).length>0:e.util.schemaHasRules(I,e.RULES.all)){t+=" "+P+" = true; if ("+v+".length > "+O+") { ";var w=v+"["+O+"]";m.schema=I,m.schemaPath=o+"["+O+"]",m.errSchemaPath=i+"/"+O,m.errorPath=e.util.getPathExpr(e.errorPath,O,e.opts.jsonPointers,!0),m.dataPathArr[f]=O;var L=e.validate(m);m.baseId=y,e.util.varOccurences(L,g)<2?t+=" "+e.util.varReplace(L,g,w)+" ":t+=" var "+g+" = "+w+"; "+L+" ",t+=" }  ",c&&(t+=" if ("+P+") { ",u+="}")}if("object"==typeof b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0:e.util.schemaHasRules(b,e.RULES.all))){m.schema=b,m.schemaPath=e.schemaPath+".additionalItems",m.errSchemaPath=e.errSchemaPath+"/additionalItems",t+=" "+P+" = true; if ("+v+".length > "+h.length+") {  for (var "+p+" = "+h.length+"; "+p+" < "+v+".length; "+p+"++) { ",m.errorPath=e.util.getPathExpr(e.errorPath,p,e.opts.jsonPointers,!0);w=v+"["+p+"]";m.dataPathArr[f]=p;L=e.validate(m);m.baseId=y,e.util.varOccurences(L,g)<2?t+=" "+e.util.varReplace(L,g,w)+" ":t+=" var "+g+" = "+w+"; "+L+" ",c&&(t+=" if (!"+P+") break; "),t+=" } }  ",c&&(t+=" if ("+P+") { ",u+="}")}}else if(e.opts.strictKeywords?"object"==typeof h&&Object.keys(h).length>0:e.util.schemaHasRules(h,e.RULES.all)){m.schema=h,m.schemaPath=o,m.errSchemaPath=i,t+="  for (var "+p+" = 0; "+p+" < "+v+".length; "+p+"++) { ",m.errorPath=e.util.getPathExpr(e.errorPath,p,e.opts.jsonPointers,!0);w=v+"["+p+"]";m.dataPathArr[f]=p;L=e.validate(m);m.baseId=y,e.util.varOccurences(L,g)<2?t+=" "+e.util.varReplace(L,g,w)+" ":t+=" var "+g+" = "+w+"; "+L+" ",c&&(t+=" if (!"+P+") break; "),t+=" }"}return c&&(t+=" "+u+" if ("+n+" == errors) {"),t=e.util.cleanUpCode(t)};
},{}],"QHAN":[function(require,module,exports) {
"use strict";module.exports=function(e,a,r){var t,s=" ",o=e.level,i=e.dataLevel,m=e.schema[a],h=e.schemaPath+e.util.getProperty(a),l=e.errSchemaPath+"/"+a,d=!e.opts.allErrors,u="data"+(i||""),c=e.opts.$data&&m&&m.$data;c?(s+=" var schema"+o+" = "+e.util.getData(m.$data,i,e.dataPathArr)+"; ",t="schema"+o):t=m;var n="maximum"==a,v=n?"exclusiveMaximum":"exclusiveMinimum",p=e.schema[v],f=e.opts.$data&&p&&p.$data,P=n?"<":">",b=n?">":"<",x=void 0;if(f){var E=e.util.getData(p.$data,i,e.dataPathArr),y="exclusive"+o,g="exclType"+o,S="exclIsNumber"+o,w="' + "+(k="op"+o)+" + '";s+=" var schemaExcl"+o+" = "+E+"; ",s+=" var "+y+"; var "+g+" = typeof "+(E="schemaExcl"+o)+"; if ("+g+" != 'boolean' && "+g+" != 'undefined' && "+g+" != 'number') { ";var $;x=v;($=$||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(x||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(s+=" , message: '"+v+" should be boolean' "),e.opts.verbose&&(s+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),s+=" } "):s+=" {} ";var M=s;s=$.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+M+"]); ":s+=" validate.errors = ["+M+"]; return false; ":s+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } else if ( ",c&&(s+=" ("+t+" !== undefined && typeof "+t+" != 'number') || "),s+=" "+g+" == 'number' ? ( ("+y+" = "+t+" === undefined || "+E+" "+P+"= "+t+") ? "+u+" "+b+"= "+E+" : "+u+" "+b+" "+t+" ) : ( ("+y+" = "+E+" === true) ? "+u+" "+b+"= "+t+" : "+u+" "+b+" "+t+" ) || "+u+" !== "+u+") { var op"+o+" = "+y+" ? '"+P+"' : '"+P+"='; ",void 0===m&&(x=v,l=e.errSchemaPath+"/"+v,t=E,c=f)}else{w=P;if((S="number"==typeof p)&&c){var k="'"+w+"'";s+=" if ( ",c&&(s+=" ("+t+" !== undefined && typeof "+t+" != 'number') || "),s+=" ( "+t+" === undefined || "+p+" "+P+"= "+t+" ? "+u+" "+b+"= "+p+" : "+u+" "+b+" "+t+" ) || "+u+" !== "+u+") { "}else{S&&void 0===m?(y=!0,x=v,l=e.errSchemaPath+"/"+v,t=p,b+="="):(S&&(t=Math[n?"min":"max"](p,m)),p===(!S||t)?(y=!0,x=v,l=e.errSchemaPath+"/"+v,b+="="):(y=!1,w+="="));k="'"+w+"'";s+=" if ( ",c&&(s+=" ("+t+" !== undefined && typeof "+t+" != 'number') || "),s+=" "+u+" "+b+" "+t+" || "+u+" !== "+u+") { "}}x=x||a,($=$||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(x||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { comparison: "+k+", limit: "+t+", exclusive: "+y+" } ",!1!==e.opts.messages&&(s+=" , message: 'should be "+w+" ",s+=c?"' + "+t:t+"'"),e.opts.verbose&&(s+=" , schema:  ",s+=c?"validate.schema"+h:""+m,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),s+=" } "):s+=" {} ";M=s;return s=$.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+M+"]); ":s+=" validate.errors = ["+M+"]; return false; ":s+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } ",d&&(s+=" else { "),s};
},{}],"RtVP":[function(require,module,exports) {
"use strict";module.exports=function(a,e,r){var t,s=" ",o=a.level,h=a.dataLevel,m=a.schema[e],l=a.schemaPath+a.util.getProperty(e),i=a.errSchemaPath+"/"+e,d=!a.opts.allErrors,c="data"+(h||""),u=a.opts.$data&&m&&m.$data;u?(s+=" var schema"+o+" = "+a.util.getData(m.$data,h,a.dataPathArr)+"; ",t="schema"+o):t=m,s+="if ( ",u&&(s+=" ("+t+" !== undefined && typeof "+t+" != 'number') || "),s+=" "+c+".length "+("maxItems"==e?">":"<")+" "+t+") { ";var n=e,v=v||[];v.push(s),s="",!1!==a.createErrors?(s+=" { keyword: '"+(n||"_limitItems")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: { limit: "+t+" } ",!1!==a.opts.messages&&(s+=" , message: 'should NOT have ",s+="maxItems"==e?"more":"fewer",s+=" than ",s+=u?"' + "+t+" + '":""+m,s+=" items' "),a.opts.verbose&&(s+=" , schema:  ",s+=u?"validate.schema"+l:""+m,s+="         , parentSchema: validate.schema"+a.schemaPath+" , data: "+c+" "),s+=" } "):s+=" {} ";var p=s;return s=v.pop(),!a.compositeRule&&d?a.async?s+=" throw new ValidationError(["+p+"]); ":s+=" validate.errors = ["+p+"]; return false; ":s+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",d&&(s+=" else { "),s};
},{}],"Y8iv":[function(require,module,exports) {
"use strict";module.exports=function(a,e,r){var t,s=" ",o=a.level,h=a.dataLevel,l=a.schema[e],m=a.schemaPath+a.util.getProperty(e),n=a.errSchemaPath+"/"+e,c=!a.opts.allErrors,d="data"+(h||""),i=a.opts.$data&&l&&l.$data;i?(s+=" var schema"+o+" = "+a.util.getData(l.$data,h,a.dataPathArr)+"; ",t="schema"+o):t=l;var u="maxLength"==e?">":"<";s+="if ( ",i&&(s+=" ("+t+" !== undefined && typeof "+t+" != 'number') || "),!1===a.opts.unicode?s+=" "+d+".length ":s+=" ucs2length("+d+") ",s+=" "+u+" "+t+") { ";var p=e,v=v||[];v.push(s),s="",!1!==a.createErrors?(s+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(n)+" , params: { limit: "+t+" } ",!1!==a.opts.messages&&(s+=" , message: 'should NOT be ",s+="maxLength"==e?"longer":"shorter",s+=" than ",s+=i?"' + "+t+" + '":""+l,s+=" characters' "),a.opts.verbose&&(s+=" , schema:  ",s+=i?"validate.schema"+m:""+l,s+="         , parentSchema: validate.schema"+a.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var g=s;return s=v.pop(),!a.compositeRule&&c?a.async?s+=" throw new ValidationError(["+g+"]); ":s+=" validate.errors = ["+g+"]; return false; ":s+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",c&&(s+=" else { "),s};
},{}],"XsSN":[function(require,module,exports) {
"use strict";module.exports=function(e,r,a){var t,s=" ",o=e.level,h=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),m=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(h||""),c=e.opts.$data&&i&&i.$data;c?(s+=" var schema"+o+" = "+e.util.getData(i.$data,h,e.dataPathArr)+"; ",t="schema"+o):t=i,s+="if ( ",c&&(s+=" ("+t+" !== undefined && typeof "+t+" != 'number') || "),s+=" Object.keys("+p+").length "+("maxProperties"==r?">":"<")+" "+t+") { ";var u=r,n=n||[];n.push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(u||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(m)+" , params: { limit: "+t+" } ",!1!==e.opts.messages&&(s+=" , message: 'should NOT have ",s+="maxProperties"==r?"more":"fewer",s+=" than ",s+=c?"' + "+t+" + '":""+i,s+=" properties' "),e.opts.verbose&&(s+=" , schema:  ",s+=c?"validate.schema"+l:""+i,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),s+=" } "):s+=" {} ";var v=s;return s=n.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+v+"]); ":s+=" validate.errors = ["+v+"]; return false; ":s+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",d&&(s+=" else { "),s};
},{}],"f6NZ":[function(require,module,exports) {
"use strict";module.exports=function(a,e,r){var t,s=" ",i=a.level,o=a.dataLevel,l=a.schema[e],d=a.schemaPath+a.util.getProperty(e),h=a.errSchemaPath+"/"+e,n=!a.opts.allErrors,m="data"+(o||""),p=a.opts.$data&&l&&l.$data;p?(s+=" var schema"+i+" = "+a.util.getData(l.$data,o,a.dataPathArr)+"; ",t="schema"+i):t=l,s+="var division"+i+";if (",p&&(s+=" "+t+" !== undefined && ( typeof "+t+" != 'number' || "),s+=" (division"+i+" = "+m+" / "+t+", ",a.opts.multipleOfPrecision?s+=" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+a.opts.multipleOfPrecision+" ":s+=" division"+i+" !== parseInt(division"+i+") ",s+=" ) ",p&&(s+="  )  "),s+=" ) {   ";var u=u||[];u.push(s),s="",!1!==a.createErrors?(s+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(h)+" , params: { multipleOf: "+t+" } ",!1!==a.opts.messages&&(s+=" , message: 'should be multiple of ",s+=p?"' + "+t:t+"'"),a.opts.verbose&&(s+=" , schema:  ",s+=p?"validate.schema"+d:""+l,s+="         , parentSchema: validate.schema"+a.schemaPath+" , data: "+m+" "),s+=" } "):s+=" {} ";var v=s;return s=u.pop(),!a.compositeRule&&n?a.async?s+=" throw new ValidationError(["+v+"]); ":s+=" validate.errors = ["+v+"]; return false; ":s+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",n&&(s+=" else { "),s};
},{}],"F4ou":[function(require,module,exports) {
"use strict";module.exports=function(r,e,a){var s=" ",t=r.level,o=r.dataLevel,l=r.schema[e],h=r.schemaPath+r.util.getProperty(e),c=r.errSchemaPath+"/"+e,i=!r.opts.allErrors,m="data"+(o||""),v="errs__"+t,p=r.util.copy(r);p.level++;var u="valid"+p.level;if(r.opts.strictKeywords?"object"==typeof l&&Object.keys(l).length>0:r.util.schemaHasRules(l,r.RULES.all)){p.schema=l,p.schemaPath=h,p.errSchemaPath=c,s+=" var "+v+" = errors;  ";var d,E=r.compositeRule;r.compositeRule=p.compositeRule=!0,p.createErrors=!1,p.opts.allErrors&&(d=p.opts.allErrors,p.opts.allErrors=!1),s+=" "+r.validate(p)+" ",p.createErrors=!0,d&&(p.opts.allErrors=d),r.compositeRule=p.compositeRule=E,s+=" if ("+u+") {   ";var n=n||[];n.push(s),s="",!1!==r.createErrors?(s+=" { keyword: 'not' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(c)+" , params: {} ",!1!==r.opts.messages&&(s+=" , message: 'should NOT be valid' "),r.opts.verbose&&(s+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+m+" "),s+=" } "):s+=" {} ";var P=s;s=n.pop(),!r.compositeRule&&i?r.async?s+=" throw new ValidationError(["+P+"]); ":s+=" validate.errors = ["+P+"]; return false; ":s+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } else {  errors = "+v+"; if (vErrors !== null) { if ("+v+") vErrors.length = "+v+"; else vErrors = null; } ",r.opts.allErrors&&(s+=" } ")}else s+="  var err =   ",!1!==r.createErrors?(s+=" { keyword: 'not' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(c)+" , params: {} ",!1!==r.opts.messages&&(s+=" , message: 'should NOT be valid' "),r.opts.verbose&&(s+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+m+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i&&(s+=" if (false) { ");return s};
},{}],"nvKM":[function(require,module,exports) {
"use strict";module.exports=function(e,r,a){var s=" ",t=e.level,l=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,v="data"+(l||""),m="valid"+t,u="errs__"+t,n=e.util.copy(e),p="";n.level++;var d="valid"+n.level,f=n.baseId,E="prevValid"+t,P="passingSchemas"+t;s+="var "+u+" = errors , "+E+" = false , "+m+" = false , "+P+" = null; ";var g=e.compositeRule;e.compositeRule=n.compositeRule=!0;var y=o;if(y)for(var R,S=-1,b=y.length-1;S<b;)R=y[S+=1],(e.opts.strictKeywords?"object"==typeof R&&Object.keys(R).length>0:e.util.schemaHasRules(R,e.RULES.all))?(n.schema=R,n.schemaPath=i+"["+S+"]",n.errSchemaPath=c+"/"+S,s+="  "+e.validate(n)+" ",n.baseId=f):s+=" var "+d+" = true; ",S&&(s+=" if ("+d+" && "+E+") { "+m+" = false; "+P+" = ["+P+", "+S+"]; } else { ",p+="}"),s+=" if ("+d+") { "+m+" = "+E+" = true; "+P+" = "+S+"; }";return e.compositeRule=n.compositeRule=g,s+=p+"if (!"+m+") {   var err =   ",!1!==e.createErrors?(s+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+P+" } ",!1!==e.opts.messages&&(s+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(s+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; "),s+="} else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; }",e.opts.allErrors&&(s+=" } "),s};
},{}],"fNq0":[function(require,module,exports) {
"use strict";module.exports=function(e,t,a){var r,s=" ",o=e.level,h=e.dataLevel,l=e.schema[t],u=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,i=!e.opts.allErrors,n="data"+(h||""),p=e.opts.$data&&l&&l.$data;p?(s+=" var schema"+o+" = "+e.util.getData(l.$data,h,e.dataPathArr)+"; ",r="schema"+o):r=l,s+="if ( ",p&&(s+=" ("+r+" !== undefined && typeof "+r+" != 'string') || "),s+=" !"+(p?"(new RegExp("+r+"))":e.usePattern(l))+".test("+n+") ) {   ";var c=c||[];c.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { pattern:  ",s+=p?""+r:""+e.util.toQuotedString(l),s+="  } ",!1!==e.opts.messages&&(s+=" , message: 'should match pattern \"",s+=p?"' + "+r+" + '":""+e.util.escapeQuotes(l),s+="\"' "),e.opts.verbose&&(s+=" , schema:  ",s+=p?"validate.schema"+u:""+e.util.toQuotedString(l),s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+n+" "),s+=" } "):s+=" {} ";var m=s;return s=c.pop(),!e.compositeRule&&i?e.async?s+=" throw new ValidationError(["+m+"]); ":s+=" validate.errors = ["+m+"]; return false; ":s+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",i&&(s+=" else { "),s};
},{}],"rWWh":[function(require,module,exports) {
"use strict";module.exports=function(e,r,t){var a=" ",s=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,d="data"+(o||""),c="errs__"+s,P=e.util.copy(e),n="";P.level++;var u="valid"+P.level,v="key"+s,f="idx"+s,m=P.dataLevel=e.dataLevel+1,g="data"+m,y="dataProperties"+s,b=Object.keys(i||{}),j=e.schema.patternProperties||{},O=Object.keys(j),S=e.schema.additionalProperties,E=b.length||O.length,R=!1===S,k="object"==typeof S&&Object.keys(S).length,w=e.opts.removeAdditional,Q=R||k||w,_=e.opts.ownProperties,A=e.baseId,D=e.schema.required;if(D&&(!e.opts.$data||!D.$data)&&D.length<e.opts.loopRequired)var q=e.util.toHash(D);if(a+="var "+c+" = errors;var "+u+" = true;",_&&(a+=" var "+y+" = undefined;"),Q){if(a+=_?" "+y+" = "+y+" || Object.keys("+d+"); for (var "+f+"=0; "+f+"<"+y+".length; "+f+"++) { var "+v+" = "+y+"["+f+"]; ":" for (var "+v+" in "+d+") { ",E){if(a+=" var isAdditional"+s+" = !(false ",b.length)if(b.length>8)a+=" || validate.schema"+l+".hasOwnProperty("+v+") ";else{var x=b;if(x)for(var I=-1,L=x.length-1;I<L;)J=x[I+=1],a+=" || "+v+" == "+e.util.toQuotedString(J)+" "}if(O.length){var H=O;if(H)for(var U=-1,F=H.length-1;U<F;)se=H[U+=1],a+=" || "+e.usePattern(se)+".test("+v+") "}a+=" ); if (isAdditional"+s+") { "}if("all"==w)a+=" delete "+d+"["+v+"]; ";else{var K=e.errorPath,V="' + "+v+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers)),R)if(w)a+=" delete "+d+"["+v+"]; ";else{a+=" "+u+" = false; ";var $=h;h=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { additionalProperty: '"+V+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is an invalid additional property":a+="should NOT have additional properties",a+="' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var C=a;a=re.pop(),!e.compositeRule&&p?e.async?a+=" throw new ValidationError(["+C+"]); ":a+=" validate.errors = ["+C+"]; return false; ":a+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=$,p&&(a+=" break; ")}else if(k)if("failing"==w){a+=" var "+c+" = errors;  ";var N=e.compositeRule;e.compositeRule=P.compositeRule=!0,P.schema=S,P.schemaPath=e.schemaPath+".additionalProperties",P.errSchemaPath=e.errSchemaPath+"/additionalProperties",P.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var T=d+"["+v+"]";P.dataPathArr[m]=v;var z=e.validate(P);P.baseId=A,e.util.varOccurences(z,g)<2?a+=" "+e.util.varReplace(z,g,T)+" ":a+=" var "+g+" = "+T+"; "+z+" ",a+=" if (!"+u+") { errors = "+c+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+d+"["+v+"]; }  ",e.compositeRule=P.compositeRule=N}else{P.schema=S,P.schemaPath=e.schemaPath+".additionalProperties",P.errSchemaPath=e.errSchemaPath+"/additionalProperties",P.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);T=d+"["+v+"]";P.dataPathArr[m]=v;z=e.validate(P);P.baseId=A,e.util.varOccurences(z,g)<2?a+=" "+e.util.varReplace(z,g,T)+" ":a+=" var "+g+" = "+T+"; "+z+" ",p&&(a+=" if (!"+u+") break; ")}e.errorPath=K}E&&(a+=" } "),a+=" }  ",p&&(a+=" if ("+u+") { ",n+="}")}var B=e.opts.useDefaults&&!e.compositeRule;if(b.length){var G=b;if(G)for(var J,M=-1,W=G.length-1;M<W;){var X=i[J=G[M+=1]];if(e.opts.strictKeywords?"object"==typeof X&&Object.keys(X).length>0:e.util.schemaHasRules(X,e.RULES.all)){var Y=e.util.getProperty(J),Z=(T=d+Y,B&&void 0!==X.default);P.schema=X,P.schemaPath=l+Y,P.errSchemaPath=h+"/"+e.util.escapeFragment(J),P.errorPath=e.util.getPath(e.errorPath,J,e.opts.jsonPointers),P.dataPathArr[m]=e.util.toQuotedString(J);z=e.validate(P);if(P.baseId=A,e.util.varOccurences(z,g)<2){z=e.util.varReplace(z,g,T);var ee=T}else{ee=g;a+=" var "+g+" = "+T+"; "}if(Z)a+=" "+z+" ";else{if(q&&q[J]){a+=" if ( "+ee+" === undefined ",_&&(a+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(J)+"') "),a+=") { "+u+" = false; ";K=e.errorPath,$=h;var re,te=e.util.escapeQuotes(J);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(K,J,e.opts.jsonPointers)),h=e.errSchemaPath+"/required",(re=re||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+te+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+te+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";C=a;a=re.pop(),!e.compositeRule&&p?e.async?a+=" throw new ValidationError(["+C+"]); ":a+=" validate.errors = ["+C+"]; return false; ":a+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=$,e.errorPath=K,a+=" } else { "}else p?(a+=" if ( "+ee+" === undefined ",_&&(a+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(J)+"') "),a+=") { "+u+" = true; } else { "):(a+=" if ("+ee+" !== undefined ",_&&(a+=" &&   Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(J)+"') "),a+=" ) { ");a+=" "+z+" } "}}p&&(a+=" if ("+u+") { ",n+="}")}}if(O.length){var ae=O;if(ae)for(var se,oe=-1,ie=ae.length-1;oe<ie;){X=j[se=ae[oe+=1]];if(e.opts.strictKeywords?"object"==typeof X&&Object.keys(X).length>0:e.util.schemaHasRules(X,e.RULES.all)){P.schema=X,P.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(se),P.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(se),a+=_?" "+y+" = "+y+" || Object.keys("+d+"); for (var "+f+"=0; "+f+"<"+y+".length; "+f+"++) { var "+v+" = "+y+"["+f+"]; ":" for (var "+v+" in "+d+") { ",a+=" if ("+e.usePattern(se)+".test("+v+")) { ",P.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);T=d+"["+v+"]";P.dataPathArr[m]=v;z=e.validate(P);P.baseId=A,e.util.varOccurences(z,g)<2?a+=" "+e.util.varReplace(z,g,T)+" ":a+=" var "+g+" = "+T+"; "+z+" ",p&&(a+=" if (!"+u+") break; "),a+=" } ",p&&(a+=" else "+u+" = true; "),a+=" }  ",p&&(a+=" if ("+u+") { ",n+="}")}}}return p&&(a+=" "+n+" if ("+c+" == errors) {"),a=e.util.cleanUpCode(a)};
},{}],"mz5K":[function(require,module,exports) {
"use strict";module.exports=function(r,e,a){var t=" ",s=r.level,o=r.dataLevel,l=r.schema[e],i=r.schemaPath+r.util.getProperty(e),v=r.errSchemaPath+"/"+e,c=!r.opts.allErrors,p="data"+(o||""),m="errs__"+s,d=r.util.copy(r);d.level++;var h="valid"+d.level;if(t+="var "+m+" = errors;",r.opts.strictKeywords?"object"==typeof l&&Object.keys(l).length>0:r.util.schemaHasRules(l,r.RULES.all)){d.schema=l,d.schemaPath=i,d.errSchemaPath=v;var u="key"+s,n="idx"+s,y="i"+s,E="' + "+u+" + '",P="data"+(d.dataLevel=r.dataLevel+1),f="dataProperties"+s,R=r.opts.ownProperties,b=r.baseId;R&&(t+=" var "+f+" = undefined; "),t+=R?" "+f+" = "+f+" || Object.keys("+p+"); for (var "+n+"=0; "+n+"<"+f+".length; "+n+"++) { var "+u+" = "+f+"["+n+"]; ":" for (var "+u+" in "+p+") { ",t+=" var startErrs"+s+" = errors; ";var g=u,k=r.compositeRule;r.compositeRule=d.compositeRule=!0;var w=r.validate(d);d.baseId=b,r.util.varOccurences(w,P)<2?t+=" "+r.util.varReplace(w,P,g)+" ":t+=" var "+P+" = "+g+"; "+w+" ",r.compositeRule=d.compositeRule=k,t+=" if (!"+h+") { for (var "+y+"=startErrs"+s+"; "+y+"<errors; "+y+"++) { vErrors["+y+"].propertyName = "+u+"; }   var err =   ",!1!==r.createErrors?(t+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(v)+" , params: { propertyName: '"+E+"' } ",!1!==r.opts.messages&&(t+=" , message: 'property name \\'"+E+"\\' is invalid' "),r.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+p+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!r.compositeRule&&c&&(r.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),c&&(t+=" break; "),t+=" } }"}return c&&(t+="  if ("+m+" == errors) {"),t=r.util.cleanUpCode(t)};
},{}],"NjGh":[function(require,module,exports) {
"use strict";module.exports=function(r,e,a){var t=" ",s=r.level,o=r.dataLevel,i=r.schema[e],h=r.schemaPath+r.util.getProperty(e),p=r.errSchemaPath+"/"+e,l=!r.opts.allErrors,d="data"+(o||""),u="valid"+s,P=r.opts.$data&&i&&i.$data;P&&(t+=" var schema"+s+" = "+r.util.getData(i.$data,o,r.dataPathArr)+"; ");var n="schema"+s;if(!P)if(i.length<r.opts.loopRequired&&r.schema.properties&&Object.keys(r.schema.properties).length){var c=[],m=i;if(m)for(var v,y=-1,g=m.length-1;y<g;){v=m[y+=1];var f=r.schema.properties[v];f&&(r.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0:r.util.schemaHasRules(f,r.RULES.all))||(c[c.length]=v)}}else c=i;if(P||c.length){var E=r.errorPath,q=P||c.length>=r.opts.loopRequired,w=r.opts.ownProperties;if(l)if(t+=" var missing"+s+"; ",q){P||(t+=" var "+n+" = validate.schema"+h+"; ");var b="' + "+(_="schema"+s+"["+(D="i"+s)+"]")+" + '";r.opts._errorDataPathProperty&&(r.errorPath=r.util.getPathExpr(E,_,r.opts.jsonPointers)),t+=" var "+u+" = true; ",P&&(t+=" if (schema"+s+" === undefined) "+u+" = true; else if (!Array.isArray(schema"+s+")) "+u+" = false; else {"),t+=" for (var "+D+" = 0; "+D+" < "+n+".length; "+D+"++) { "+u+" = "+d+"["+n+"["+D+"]] !== undefined ",w&&(t+=" &&   Object.prototype.hasOwnProperty.call("+d+", "+n+"["+D+"]) "),t+="; if (!"+u+") break; } ",P&&(t+="  }  "),t+="  if (!"+u+") {   ",(Q=Q||[]).push(t),t="",!1!==r.createErrors?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(p)+" , params: { missingProperty: '"+b+"' } ",!1!==r.opts.messages&&(t+=" , message: '",r.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+b+"\\'",t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";var S=t;t=Q.pop(),!r.compositeRule&&l?r.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else{t+=" if ( ";var j=c;if(j)for(var D=-1,O=j.length-1;D<O;){R=j[D+=1],D&&(t+=" || "),t+=" ( ( "+(L=d+($=r.util.getProperty(R)))+" === undefined ",w&&(t+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+r.util.escapeQuotes(R)+"') "),t+=") && (missing"+s+" = "+r.util.toQuotedString(r.opts.jsonPointers?R:$)+") ) "}t+=") {  ";var Q;b="' + "+(_="missing"+s)+" + '";r.opts._errorDataPathProperty&&(r.errorPath=r.opts.jsonPointers?r.util.getPathExpr(E,_,!0):E+" + "+_),(Q=Q||[]).push(t),t="",!1!==r.createErrors?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(p)+" , params: { missingProperty: '"+b+"' } ",!1!==r.opts.messages&&(t+=" , message: '",r.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+b+"\\'",t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";S=t;t=Q.pop(),!r.compositeRule&&l?r.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else if(q){P||(t+=" var "+n+" = validate.schema"+h+"; ");var _;b="' + "+(_="schema"+s+"["+(D="i"+s)+"]")+" + '";r.opts._errorDataPathProperty&&(r.errorPath=r.util.getPathExpr(E,_,r.opts.jsonPointers)),P&&(t+=" if ("+n+" && !Array.isArray("+n+")) {  var err =   ",!1!==r.createErrors?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(p)+" , params: { missingProperty: '"+b+"' } ",!1!==r.opts.messages&&(t+=" , message: '",r.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+b+"\\'",t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+n+" !== undefined) { "),t+=" for (var "+D+" = 0; "+D+" < "+n+".length; "+D+"++) { if ("+d+"["+n+"["+D+"]] === undefined ",w&&(t+=" || ! Object.prototype.hasOwnProperty.call("+d+", "+n+"["+D+"]) "),t+=") {  var err =   ",!1!==r.createErrors?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(p)+" , params: { missingProperty: '"+b+"' } ",!1!==r.opts.messages&&(t+=" , message: '",r.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+b+"\\'",t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",P&&(t+="  }  ")}else{var k=c;if(k)for(var R,A=-1,x=k.length-1;A<x;){R=k[A+=1];var $=r.util.getProperty(R),L=(b=r.util.escapeQuotes(R),d+$);r.opts._errorDataPathProperty&&(r.errorPath=r.util.getPath(E,R,r.opts.jsonPointers)),t+=" if ( "+L+" === undefined ",w&&(t+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+r.util.escapeQuotes(R)+"') "),t+=") {  var err =   ",!1!==r.createErrors?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(p)+" , params: { missingProperty: '"+b+"' } ",!1!==r.opts.messages&&(t+=" , message: '",r.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+b+"\\'",t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r.errorPath=E}else l&&(t+=" if (true) {");return t};
},{}],"ITYI":[function(require,module,exports) {
"use strict";module.exports=function(e,a,r){var t,i=" ",s=e.level,o=e.dataLevel,m=e.schema[a],l=e.schemaPath+e.util.getProperty(a),c=e.errSchemaPath+"/"+a,d=!e.opts.allErrors,u="data"+(o||""),h="valid"+s,n=e.opts.$data&&m&&m.$data;if(n?(i+=" var schema"+s+" = "+e.util.getData(m.$data,o,e.dataPathArr)+"; ",t="schema"+s):t=m,(m||n)&&!1!==e.opts.uniqueItems){n&&(i+=" var "+h+"; if ("+t+" === false || "+t+" === undefined) "+h+" = true; else if (typeof "+t+" != 'boolean') "+h+" = false; else { "),i+=" var i = "+u+".length , "+h+" = true , j; if (i > 1) { ";var f=e.schema.items&&e.schema.items.type,v=Array.isArray(f);if(!f||"object"==f||"array"==f||v&&(f.indexOf("object")>=0||f.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+u+"[i], "+u+"[j])) { "+h+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+u+"[i]; ";var p="checkDataType"+(v?"s":"");i+=" if ("+e.util[p](f,"item",!0)+") continue; ",v&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",n&&(i+="  }  "),i+=" if (!"+h+") {   ";var y=y||[];y.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=n?"validate.schema"+l:""+m,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var j=i;i=y.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+j+"]); ":i+=" validate.errors = ["+j+"]; return false; ":i+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",d&&(i+=" else { ")}else d&&(i+=" if (true) { ");return i};
},{}],"Zaki":[function(require,module,exports) {
"use strict";module.exports={$ref:require("./ref"),allOf:require("./allOf"),anyOf:require("./anyOf"),$comment:require("./comment"),const:require("./const"),contains:require("./contains"),dependencies:require("./dependencies"),enum:require("./enum"),format:require("./format"),if:require("./if"),items:require("./items"),maximum:require("./_limit"),minimum:require("./_limit"),maxItems:require("./_limitItems"),minItems:require("./_limitItems"),maxLength:require("./_limitLength"),minLength:require("./_limitLength"),maxProperties:require("./_limitProperties"),minProperties:require("./_limitProperties"),multipleOf:require("./multipleOf"),not:require("./not"),oneOf:require("./oneOf"),pattern:require("./pattern"),properties:require("./properties"),propertyNames:require("./propertyNames"),required:require("./required"),uniqueItems:require("./uniqueItems"),validate:require("./validate")};
},{"./ref":"wQKR","./allOf":"ka0E","./anyOf":"Z8af","./comment":"h3nU","./const":"y9cs","./contains":"bQT3","./dependencies":"n6gK","./enum":"SsdN","./format":"fVUx","./if":"y9FO","./items":"iBDe","./_limit":"QHAN","./_limitItems":"RtVP","./_limitLength":"Y8iv","./_limitProperties":"XsSN","./multipleOf":"f6NZ","./not":"F4ou","./oneOf":"nvKM","./pattern":"fNq0","./properties":"rWWh","./propertyNames":"mz5K","./required":"NjGh","./uniqueItems":"ITYI","./validate":"mFX2"}],"VHjW":[function(require,module,exports) {
"use strict";var e=require("../dotjs"),t=require("./util").toHash;module.exports=function(){var n=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"];return n.all=t(r),n.types=t(["number","integer","string","array","object","boolean","null"]),n.forEach(function(t){t.rules=t.rules.map(function(t){var i;if("object"==typeof t){var o=Object.keys(t)[0];i=t[o],t=o,i.forEach(function(e){r.push(e),n.all[e]=!0})}return r.push(t),n.all[t]={keyword:t,code:e[t],implements:i}}),n.all.$comment={keyword:"$comment",code:e.$comment},t.type&&(n.types[t.type]=t)}),n.keywords=t(r.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),n.custom={},n};
},{"../dotjs":"Zaki","./util":"iI9R"}],"l6Yo":[function(require,module,exports) {
"use strict";var e=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];module.exports=function(t,i){for(var r=0;r<i.length;r++){t=JSON.parse(JSON.stringify(t));var m,n=i[r].split("/"),a=t;for(m=1;m<n.length;m++)a=a[n[m]];for(m=0;m<e.length;m++){var s=e[m],o=a[s];o&&(a[s]={anyOf:[o,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return t};
},{}],"Q9Su":[function(require,module,exports) {
"use strict";var n=require("./error_classes").MissingRef;function e(t,r,o){var i=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(o=r,r=void 0);var a=c(t).then(function(){var e=i._addSchema(t,void 0,r);return e.validate||function e(t){try{return i._compile(t)}catch(a){if(a instanceof n)return function o(e){var o=e.missingSchema;if(h(o))throw new Error("Schema "+o+" is loaded but "+e.missingRef+" cannot be resolved");var a=i._loadingSchemas[o];a||(a=i._loadingSchemas[o]=i._opts.loadSchema(o)).then(s,s);return a.then(function(n){if(!h(o))return c(n).then(function(){h(o)||i.addSchema(n,o,void 0,r)})}).then(function(){return function t(o){try{return i._compile(o)}catch(e){if(e instanceof n)return a(e);throw e}function a(n){var e=n.missingSchema;if(h(e))throw new Error("Schema "+e+" is loaded but "+n.missingRef+" cannot be resolved");var a=i._loadingSchemas[e];return a||(a=i._loadingSchemas[e]=i._opts.loadSchema(e)).then(s,s),a.then(function(n){if(!h(e))return c(n).then(function(){h(e)||i.addSchema(n,e,void 0,r)})}).then(function(){return t(o)});function s(){delete i._loadingSchemas[e]}function h(n){return i._refs[n]||i._schemas[n]}}}(t)});function s(){delete i._loadingSchemas[o]}function h(n){return i._refs[n]||i._schemas[n]}}(a);throw a}function o(n){var o=n.missingSchema;if(h(o))throw new Error("Schema "+o+" is loaded but "+n.missingRef+" cannot be resolved");var a=i._loadingSchemas[o];return a||(a=i._loadingSchemas[o]=i._opts.loadSchema(o)).then(s,s),a.then(function(n){if(!h(o))return c(n).then(function(){h(o)||i.addSchema(n,o,void 0,r)})}).then(function(){return e(t)});function s(){delete i._loadingSchemas[o]}function h(n){return i._refs[n]||i._schemas[n]}}}(e)});return o&&a.then(function(n){o(null,n)},o),a;function c(n){var t=n.$schema;return t&&!i.getSchema(t)?e.call(i,{$ref:t},!0):Promise.resolve()}}module.exports=e;
},{"./error_classes":"vvI2"}],"bd1B":[function(require,module,exports) {
"use strict";module.exports=function(a,r,e){var t,s,o=" ",i=a.level,h=a.dataLevel,d=a.schema[r],l=a.schemaPath+a.util.getProperty(r),v=a.errSchemaPath+"/"+r,c=!a.opts.allErrors,n="data"+(h||""),m="valid"+i,u="errs__"+i,p=a.opts.$data&&d&&d.$data;p?(o+=" var schema"+i+" = "+a.util.getData(d.$data,h,a.dataPathArr)+"; ",s="schema"+i):s=d;var f,P,y,E,w,k="definition"+i,g=this.definition,R="";if(p&&g.$data){w="keywordValidate"+i;var S=g.validateSchema;o+=" var "+k+" = RULES.custom['"+r+"'].definition; var "+w+" = "+k+".validate;"}else{if(!(E=a.useCustomRule(this,d,a.schema,a)))return;s="validate.schema"+l,w=E.code,f=g.compile,P=g.inline,y=g.macro}var b=w+".errors",$="i"+i,A="ruleErr"+i,D=g.async;if(D&&!a.async)throw new Error("async keyword in sync schema");if(P||y||(o+=b+" = null;"),o+="var "+u+" = errors;var "+m+";",p&&g.$data&&(R+="}",o+=" if ("+s+" === undefined) { "+m+" = true; } else { ",S&&(R+="}",o+=" "+m+" = "+k+".validateSchema("+s+"); if ("+m+") { ")),P)g.statements?o+=" "+E.validate+" ":o+=" "+m+" = "+E.validate+"; ";else if(y){var V=a.util.copy(a);R="";V.level++;var x="valid"+V.level;V.schema=E.validate,V.schemaPath="";var C=a.compositeRule;a.compositeRule=V.compositeRule=!0;var L=a.validate(V).replace(/validate\.schema/g,w);a.compositeRule=V.compositeRule=C,o+=" "+L}else{(j=j||[]).push(o),o="",o+="  "+w+".call( ",a.opts.passContext?o+="this":o+="self",f||!1===g.schema?o+=" , "+n+" ":o+=" , "+s+" , "+n+" , validate.schema"+a.schemaPath+" ",o+=" , (dataPath || '')",'""'!=a.errorPath&&(o+=" + "+a.errorPath);var Q=h?"data"+(h-1||""):"parentData",_=h?a.dataPathArr[h]:"parentDataProperty",U=o+=" , "+Q+" , "+_+" , rootData )  ";o=j.pop(),!1===g.errors?(o+=" "+m+" = ",D&&(o+="await "),o+=U+"; "):o+=D?" var "+(b="customErrors"+i)+" = null; try { "+m+" = await "+U+"; } catch (e) { "+m+" = false; if (e instanceof ValidationError) "+b+" = e.errors; else throw e; } ":" "+b+" = null; "+m+" = "+U+"; "}if(g.modifying&&(o+=" if ("+Q+") "+n+" = "+Q+"["+_+"];"),o+=""+R,g.valid)c&&(o+=" if (true) { ");else{var j;o+=" if ( ",void 0===g.valid?(o+=" !",o+=y?""+x:""+m):o+=" "+!g.valid+" ",o+=") { ",t=this.keyword,(j=j||[]).push(o),o="",(j=j||[]).push(o),o="",!1!==a.createErrors?(o+=" { keyword: '"+(t||"custom")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(v)+" , params: { keyword: '"+this.keyword+"' } ",!1!==a.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),a.opts.verbose&&(o+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+n+" "),o+=" } "):o+=" {} ";var q=o;o=j.pop(),!a.compositeRule&&c?a.async?o+=" throw new ValidationError(["+q+"]); ":o+=" validate.errors = ["+q+"]; return false; ":o+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var z=o;o=j.pop(),P?g.errors?"full"!=g.errors&&(o+="  for (var "+$+"="+u+"; "+$+"<errors; "+$+"++) { var "+A+" = vErrors["+$+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+a.errorPath+"; if ("+A+".schemaPath === undefined) { "+A+'.schemaPath = "'+v+'"; } ',a.opts.verbose&&(o+=" "+A+".schema = "+s+"; "+A+".data = "+n+"; "),o+=" } "):!1===g.errors?o+=" "+z+" ":(o+=" if ("+u+" == errors) { "+z+" } else {  for (var "+$+"="+u+"; "+$+"<errors; "+$+"++) { var "+A+" = vErrors["+$+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+a.errorPath+"; if ("+A+".schemaPath === undefined) { "+A+'.schemaPath = "'+v+'"; } ',a.opts.verbose&&(o+=" "+A+".schema = "+s+"; "+A+".data = "+n+"; "),o+=" } } "):y?(o+="   var err =   ",!1!==a.createErrors?(o+=" { keyword: '"+(t||"custom")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(v)+" , params: { keyword: '"+this.keyword+"' } ",!1!==a.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),a.opts.verbose&&(o+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+n+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!a.compositeRule&&c&&(a.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===g.errors?o+=" "+z+" ":(o+=" if (Array.isArray("+b+")) { if (vErrors === null) vErrors = "+b+"; else vErrors = vErrors.concat("+b+"); errors = vErrors.length;  for (var "+$+"="+u+"; "+$+"<errors; "+$+"++) { var "+A+" = vErrors["+$+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+a.errorPath+";  "+A+'.schemaPath = "'+v+'";  ',a.opts.verbose&&(o+=" "+A+".schema = "+s+"; "+A+".data = "+n+"; "),o+=" } } else { "+z+" } "),o+=" } ",c&&(o+=" else { ")}return o};
},{}],"TbVB":[function(require,module,exports) {
module.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};
},{}],"clfR":[function(require,module,exports) {
"use strict";var e=require("./refs/json-schema-draft-07.json");module.exports={$id:"https://github.com/epoberezkin/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:e.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:e.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}};
},{"./refs/json-schema-draft-07.json":"TbVB"}],"BRd3":[function(require,module,exports) {
"use strict";var e=/^[a-z_$][a-z0-9_$-]*$/i,r=require("./dotjs/custom"),t=require("./definition_schema");function i(t,i){var o=this.RULES;if(o.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!e.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(i){this.validateKeyword(i,!0);var s=i.type;if(Array.isArray(s))for(var a=0;a<s.length;a++)d(t,s[a],i);else d(t,s,i);var n=i.metaSchema;n&&(i.$data&&this._opts.$data&&(n={anyOf:[n,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),i.validateSchema=this.compile(n,!0))}function d(e,t,i){for(var s,a=0;a<o.length;a++){var n=o[a];if(n.type==t){s=n;break}}s||(s={type:t,rules:[]},o.push(s));var d={keyword:e,definition:i,custom:!0,code:r,implements:i.implements};s.rules.push(d),o.custom[e]=d}return o.keywords[t]=o.all[t]=!0,this}function o(e){var r=this.RULES.custom[e];return r?r.definition:this.RULES.keywords[e]||!1}function s(e){var r=this.RULES;delete r.keywords[e],delete r.all[e],delete r.custom[e];for(var t=0;t<r.length;t++)for(var i=r[t].rules,o=0;o<i.length;o++)if(i[o].keyword==e){i.splice(o,1);break}return this}function a(e,r){a.errors=null;var i=this._validateKeyword=this._validateKeyword||this.compile(t,!0);if(i(e))return!0;if(a.errors=i.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(i.errors));return!1}module.exports={add:i,get:o,remove:s,validate:a};
},{"./dotjs/custom":"bd1B","./definition_schema":"clfR"}],"vZT2":[function(require,module,exports) {
module.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};
},{}],"YYGk":[function(require,module,exports) {
"use strict";var e=require("./compile"),t=require("./compile/resolve"),r=require("./cache"),a=require("./compile/schema_obj"),i=require("fast-json-stable-stringify"),s=require("./compile/formats"),o=require("./compile/rules"),h=require("./data"),n=require("./compile/util");module.exports=p,p.prototype.validate=u,p.prototype.compile=v,p.prototype.addSchema=_,p.prototype.addMetaSchema=g,p.prototype.validateSchema=y,p.prototype.getSchema=S,p.prototype.removeSchema=q,p.prototype.addFormat=A,p.prototype.errorsText=x,p.prototype._addSchema=E,p.prototype._compile=I,p.prototype.compileAsync=require("./compile/async");var c=require("./keyword");p.prototype.addKeyword=c.add,p.prototype.getKeyword=c.get,p.prototype.removeKeyword=c.remove,p.prototype.validateKeyword=c.validate;var d=require("./compile/error_classes");p.ValidationError=d.Validation,p.MissingRefError=d.MissingRef,p.$dataMetaSchema=h;var l="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],f=["/properties"];function p(e){if(!(this instanceof p))return new p(e);e=this._opts=n.copy(e)||{},F(this),this._schemas={},this._refs={},this._fragments={},this._formats=s(e.format),this._cache=e.cache||new r,this._loadingSchemas={},this._compilations=[],this.RULES=o(),this._getId=M(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=i),this._metaOpts=T(this),e.formats&&P(this),V(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),D(this)}function u(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var a=this._addSchema(e);r=a.validate||this._compile(a)}var i=r(t);return!0!==r.$async&&(this.errors=r.errors),i}function v(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)}function _(e,r,a,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)this.addSchema(e[s],void 0,a,i);return this}var o=this._getId(e);if(void 0!==o&&"string"!=typeof o)throw new Error("schema id must be string");return k(this,r=t.normalizeId(r||o)),this._schemas[r]=this._addSchema(e,a,i,!0),this}function g(e,t,r){return this.addSchema(e,t,r,!0),this}function y(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||w(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var a=this.validate(r,e);if(!a&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return a}function w(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(l)?l:void 0,e._opts.defaultMeta}function S(e){var t=$(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return b(this,e)}}function b(r,i){var s=t.schema.call(r,{schema:{}},i);if(s){var o=s.schema,h=s.root,n=s.baseId,c=e.call(r,o,h,void 0,n);return r._fragments[i]=new a({ref:i,fragment:!0,schema:o,root:h,baseId:n,validate:c}),c}}function $(e,r){return r=t.normalizeId(r),e._schemas[r]||e._refs[r]||e._fragments[r]}function q(e){if(e instanceof RegExp)return j(this,this._schemas,e),j(this,this._refs,e),this;switch(typeof e){case"undefined":return j(this,this._schemas),j(this,this._refs),this._cache.clear(),this;case"string":var r=$(this,e);return r&&this._cache.del(r.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var a=this._opts.serialize,i=a?a(e):e;this._cache.del(i);var s=this._getId(e);s&&(s=t.normalizeId(s),delete this._schemas[s],delete this._refs[s])}return this}function j(e,t,r){for(var a in t){var i=t[a];i.meta||r&&!r.test(a)||(e._cache.del(i.cacheKey),delete t[a])}}function E(e,r,i,s){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var o=this._opts.serialize,h=o?o(e):e,n=this._cache.get(h);if(n)return n;s=s||!1!==this._opts.addUsedSchema;var c=t.normalizeId(this._getId(e));c&&s&&k(this,c);var d,l=!1!==this._opts.validateSchema&&!r;l&&!(d=c&&c==t.normalizeId(e.$schema))&&this.validateSchema(e,!0);var m=t.ids.call(this,e),f=new a({id:c,schema:e,localRefs:m,cacheKey:h,meta:i});return"#"!=c[0]&&s&&(this._refs[c]=f),this._cache.put(h,f),l&&d&&this.validateSchema(e,!0),f}function I(t,r){if(t.compiling)return t.validate=s,s.schema=t.schema,s.errors=null,s.root=r||s,!0===t.schema.$async&&(s.$async=!0),s;var a,i;t.compiling=!0,t.meta&&(a=this._opts,this._opts=this._metaOpts);try{i=e.call(this,t.schema,r,t.localRefs)}catch(o){throw delete t.validate,o}finally{t.compiling=!1,t.meta&&(this._opts=a)}return t.validate=i,t.refs=i.refs,t.refVal=i.refVal,t.root=i.root,i;function s(){var e=t.validate,r=e.apply(this,arguments);return s.errors=e.errors,r}}function M(e){switch(e.schemaId){case"auto":return K;case"id":return z;default:return R}}function z(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function R(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function K(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function x(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,a=void 0===t.dataVar?"data":t.dataVar,i="",s=0;s<e.length;s++){var o=e[s];o&&(i+=a+o.dataPath+" "+o.message+r)}return i.slice(0,-r.length)}function A(e,t){return"string"==typeof t&&(t=new RegExp(t)),this._formats[e]=t,this}function V(e){var t;if(e._opts.$data&&(t=require("./refs/data.json"),e.addMetaSchema(t,t.$id,!0)),!1!==e._opts.meta){var r=require("./refs/json-schema-draft-07.json");e._opts.$data&&(r=h(r,f)),e.addMetaSchema(r,l,!0),e._refs["http://json-schema.org/schema"]=l}}function D(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}function P(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}function k(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function T(e){for(var t=n.copy(e._opts),r=0;r<m.length;r++)delete t[m[r]];return t}function F(e){var t=e._opts.logger;if(!1===t)e.logger={log:O,warn:O,error:O};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}function O(){}
},{"./compile":"MSsi","./compile/resolve":"T7Bo","./cache":"sdiS","./compile/schema_obj":"wMvT","fast-json-stable-stringify":"hkDR","./compile/formats":"DtrD","./compile/rules":"VHjW","./data":"l6Yo","./compile/util":"iI9R","./compile/async":"Q9Su","./keyword":"BRd3","./compile/error_classes":"vvI2","./refs/data.json":"vZT2","./refs/json-schema-draft-07.json":"TbVB"}],"nR6j":[function(require,module,exports) {
"use strict";function t(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e(t){return o(t)||n(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function o(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),t}function u(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t,e,r){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=p(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function p(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=require("./Validator"),b=v.Validator,m=require("../model/ValidationError"),j=m.ValidationErrorType,O=require("../utils/objectUtils"),g=O.isObject,w=O.once,V=O.cloneDeep,S=O.omit,P=w(function(){try{return require("ajv")}catch(t){throw new Error("Optional ajv dependency not installed. Please run `npm install ajv --save`")}}),k=function(t){function e(){return i(this,e),u(this,y(e).apply(this,arguments))}return d(e,b),c(e,[{key:"beforeValidate",value:function(t){var e=t.json,r=t.model,n=t.options,o=t.ctx;if(o.jsonSchema=r.constructor.getJsonSchema(),r.$beforeValidate!==r.$objectionModelClass.prototype.$beforeValidate){o.jsonSchema=E(o.jsonSchema);var a=r.$beforeValidate(o.jsonSchema,e,n);void 0!==a&&(o.jsonSchema=a)}}},{key:"validate",value:function(t){var e=t.json,r=t.model,n=t.options,o=t.ctx;if(!o.jsonSchema)return e;var a=r.constructor,i=this.getValidator(a,o.jsonSchema,!!n.patch);n.mutable||n.patch||!D(o.jsonSchema)||(e=E(e)),i.call(r,e);var l=A(i.errors,a,n);if(l)throw l;return e}},{key:"getValidator",value:function(t,e,r){var n=this.ajvOptions.serialize||JSON.stringify,o=e===t.getJsonSchema()?t.uniqueTag():n(e),a=this.cache.get(o),i=null;return a||(a={patchValidator:null,normalValidator:null},this.cache.set(o,a)),r?(i=a.patchValidator)||(i=this.compilePatchValidator(e),a.patchValidator=i):(i=a.normalValidator)||(i=this.compileNormalValidator(e),a.normalValidator=i),i}},{key:"compilePatchValidator",value:function(t){return t=q(t),this.ajvNoDefaults.compile(t)}},{key:"compileNormalValidator",value:function(t){return this.ajv.compile(t)}}],[{key:"init",value:function(t,r){f(y(e),"init",this).call(this,t,r),t.ajvOptions=Object.assign({errorDataPath:"property"},r.options,{allErrors:!0}),t.ajv=(new P)(Object.assign({useDefaults:!0},t.ajvOptions)),t.ajvNoDefaults=(new P)(Object.assign({},t.ajvOptions,{useDefaults:!1})),t.cache=new Map,r.onCreateAjv(t.ajv),r.onCreateAjv(t.ajvNoDefaults)}}]),e}();function A(t,e,r){if(!t)return null;var n=e.getRelationNames(),o={},a=0,i=!0,l=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var f=u.value,p="".concat(r.dataPath||"").concat(f.dataPath);if(!(f.params&&f.params.additionalProperty&&n.includes(f.params.additionalProperty))){var y=p.replace(/\['([^' ]*)'\]/g,".$1").substring(1);(o[y]||(o[y]=[])).unshift({message:f.message,keyword:f.keyword,params:f.params}),++a}}}catch(d){l=!0,c=d}finally{try{i||null==s.return||s.return()}finally{if(l)throw c}}return 0===a?null:e.createValidationError({type:j.ModelValidation,data:o})}function E(t){return g(t)&&t.$isObjectionModel?t.$clone():V(t)}function D(t){return t&&t.properties&&_(t.properties)}function _(t){return Array.isArray(t)?N(t):$(t)}function N(t){for(var e=0,r=t.length;e<r;++e){var n=t[e];if(g(n)&&_(n))return!0}return!1}function $(t){for(var e=Object.keys(t),r=0,n=e.length;r<n;++r){var o=e[r];if("default"===o)return!0;var a=t[o];if(g(a)&&_(a))return!0}return!1}function q(r){var n=["anyOf","oneOf","allOf","not","then","else"];return Object.assign.apply(Object,[S(r,["required"].concat(n))].concat(e(n.map(function(t){return x(r,t)})),[r&&r.definitions?{definitions:Object.assign.apply(Object,e(Object.keys(r.definitions).map(function(e){return t({},e,q(r.definitions[e]))})))}:{}]))}function x(e,r){if(e[r]){if(Array.isArray(e[r])){var n=R(e[r]);return 0!==n.length?t({},r,n):{}}return t({},r,q(e[r]))}return{}}function R(t){return t.map(q).filter(T)}function T(t){return 0!==Object.keys(t).length}module.exports={AjvValidator:k};
},{"./Validator":"eQ92","../model/ValidationError":"sBi0","../utils/objectUtils":"WAAQ","ajv":"YYGk"}],"vVPf":[function(require,module,exports) {
"use strict";var r=require("./objectUtils"),e=r.asArray,i=r.isString,t=r.isFunction,n=r.isPlainObject;function o(r){var a=r.modelClass,l=r.modifier,f=r.modifiers,s=a?a.getModifiers():{},u=e(l).map(function(r){var e=null;if(i(r)){if((e=f&&f[r]||s[r])&&!t(e))return o({modelClass:a,modifier:e,modifiers:f})}else if(t(r))e=r;else if(n(r))e=function(e){return e.where(r)};else if(Array.isArray(r))return o({modelClass:a,modifier:r,modifiers:f});return e||(e=function(e){return a.modifierNotFound(e,r)}),e});return function(r){for(var e=arguments.length,i=new Array(e>1?e-1:0),t=1;t<e;t++)i[t-1]=arguments[t];var n=!0,o=!1,a=void 0;try{for(var l,f=u[Symbol.iterator]();!(n=(l=f.next()).done);n=!0){var s=l.value;s.call.apply(s,[r,r].concat(i))}}catch(d){o=!0,a=d}finally{try{n||null==f.return||f.return()}finally{if(o)throw a}}}}module.exports={createModifier:o};
},{"./objectUtils":"WAAQ"}],"eT1q":[function(require,module,exports) {
"use strict";function e(e,r){function n(){this.constructor=e}n.prototype=r.prototype,e.prototype=new n}function r(e,n,t,u){this.message=e,this.expected=n,this.found=t,this.location=u,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}function n(e,n){n=void 0!==n?n:{};var t,u={},i={start:Q},o=Q,a=function(e){var r={$name:null,$relation:null,$modify:[],$recursive:!1,$allRecursive:!1,$childNames:[]};return"*"===e.$name?r.$allRecursive=!0:(ue(r,e),r[e.$name]=e,r.$childNames.push(e.$name)),r},l=function(e){var r={$name:null,$relation:null,$modify:[],$recursive:!1,$allRecursive:!1,$childNames:[]};return e.forEach(function(e){ue(r,e),r[e.$name]=e,r.$childNames.push(e.$name)}),r},c=function(e,r,n,t){var u={$name:null,$relation:null,$modify:[],$recursive:!1,$allRecursive:!1,$childNames:[]};return u.$name=n||e,u.$relation=e,u.$modify=r||[],t.forEach(function(e){ue(u,e),u[e.$name]=e,u.$childNames.push(e.$name)}),u},s=function(e,r,n,t){var u={$name:null,$relation:null,$modify:[],$recursive:!1,$allRecursive:!1,$childNames:[]};if(u.$name=n||e,u.$relation=e,u.$modify=r||[],t){var i=/^\^(\d*)$/.exec(t.$name);i?i[1]?u.$recursive=parseInt(i[1],10):u.$recursive=!0:"*"===t.$name?u.$allRecursive=!0:(ue(u,t),u[t.$name]=t,u.$childNames.push(t.$name))}return u},f="as",h=H("as",!1),p=function(e){return e},$=function(e){return e.join("")},m=/^[^[\](),. \t\r\n]/,d=J(["[","]","(",")",",","."," ","\t","\r","\n"],!0,!1),v="(",g=H("(",!1),x=")",y=H(")",!1),A=function(e){return e},C=",",R=H(",",!1),w=function(e){return e},E=/^[ \t\r\n]/,F=J([" ","\t","\r","\n"],!1,!1),N=".",b=H(".",!1),S=function(e){return e},j="[",T=H("[",!1),k="]",M=H("]",!1),D=function(e){return e},I=function(e){return e},U=function(e){return e},Y=0,q=[{line:1,column:1}],z=0,B=[],G=0;if("startRule"in n){if(!(n.startRule in i))throw new Error("Can't start parsing from rule \""+n.startRule+'".');o=i[n.startRule]}function H(e,r){return{type:"literal",text:e,ignoreCase:r}}function J(e,r,n){return{type:"class",parts:e,inverted:r,ignoreCase:n}}function K(r){var n,t=q[r];if(t)return t;for(n=r-1;!q[n];)n--;for(t={line:(t=q[n]).line,column:t.column};n<r;)10===e.charCodeAt(n)?(t.line++,t.column=1):t.column++,n++;return q[r]=t,t}function L(e,r){var n=K(e),t=K(r);return{start:{offset:e,line:n.line,column:n.column},end:{offset:r,line:t.line,column:t.column}}}function O(e){Y<z||(Y>z&&(z=Y,B=[]),B.push(e))}function P(e,n,t){return new r(r.buildMessage(e,n),e,n,t)}function Q(){var e,r;return e=Y,(r=V())!==u&&(e,r=a(r)),(e=r)===u&&(e=Y,(r=ne())!==u&&(e,r=l(r)),e=r),e}function V(){var r,n,t,i,o;return r=Y,(n=X())!==u?((t=_())===u&&(t=null),t!==u?((i=W())===u&&(i=null),i!==u&&(o=function(){var r,n,t,i;r=Y,n=[],t=re();for(;t!==u;)n.push(t),t=re();n!==u?(46===e.charCodeAt(Y)?(t=N,Y++):(t=u,0===G&&O(b)),t!==u&&(i=ne())!==u?(r,n=S(i),r=n):(Y=r,r=u)):(Y=r,r=u);return r}())!==u?(r,r=n=c(n,t,i,o)):(Y=r,r=u)):(Y=r,r=u)):(Y=r,r=u),r===u&&(r=Y,(n=X())!==u?((t=_())===u&&(t=null),t!==u?((i=W())===u&&(i=null),i!==u?((o=function(){var r,n,t,i,o,a,l;r=Y,n=[],t=re();for(;t!==u;)n.push(t),t=re();if(n!==u)if(46===e.charCodeAt(Y)?(t=N,Y++):(t=u,0===G&&O(b)),t!==u){for(i=[],o=re();o!==u;)i.push(o),o=re();if(i!==u)if((o=V())!==u){for(a=[],l=re();l!==u;)a.push(l),l=re();a!==u?(r,n=U(o),r=n):(Y=r,r=u)}else Y=r,r=u;else Y=r,r=u}else Y=r,r=u;else Y=r,r=u;return r}())===u&&(o=null),o!==u?(r,r=n=s(n,t,i,o)):(Y=r,r=u)):(Y=r,r=u)):(Y=r,r=u)):(Y=r,r=u)),r}function W(){var r,n,t,i,o;if(r=Y,n=[],(t=re())!==u)for(;t!==u;)n.push(t),t=re();else n=u;if(n!==u)if(e.substr(Y,2)===f?(t=f,Y+=2):(t=u,0===G&&O(h)),t!==u){if(i=[],(o=re())!==u)for(;o!==u;)i.push(o),o=re();else i=u;i!==u&&(o=X())!==u?(r,r=n=p(o)):(Y=r,r=u)}else Y=r,r=u;else Y=r,r=u;return r}function X(){var e,r,n;if(e=Y,r=[],(n=Z())!==u)for(;n!==u;)r.push(n),n=Z();else r=u;return r!==u&&(e,r=$(r)),e=r}function Z(){var r;return m.test(e.charAt(Y))?(r=e.charAt(Y),Y++):(r=u,0===G&&O(d)),r}function _(){var r,n,t,i,o,a;for(r=Y,n=[],t=re();t!==u;)n.push(t),t=re();if(n!==u)if(40===e.charCodeAt(Y)?(t=v,Y++):(t=u,0===G&&O(g)),t!==u){for(i=[],o=ee();o!==u;)i.push(o),o=ee();if(i!==u){for(o=[],a=re();a!==u;)o.push(a),a=re();o!==u?(41===e.charCodeAt(Y)?(a=x,Y++):(a=u,0===G&&O(y)),a!==u?(r,r=n=A(i)):(Y=r,r=u)):(Y=r,r=u)}else Y=r,r=u}else Y=r,r=u;else Y=r,r=u;return r}function ee(){var r,n,t,i,o;for(r=Y,n=[],t=re();t!==u;)n.push(t),t=re();if(n!==u)if((t=X())!==u){for(i=[],o=re();o!==u;)i.push(o),o=re();i!==u?(44===e.charCodeAt(Y)?(o=C,Y++):(o=u,0===G&&O(R)),o===u&&(o=null),o!==u?(r,r=n=w(t)):(Y=r,r=u)):(Y=r,r=u)}else Y=r,r=u;else Y=r,r=u;return r}function re(){var r;return E.test(e.charAt(Y))?(r=e.charAt(Y),Y++):(r=u,0===G&&O(F)),r}function ne(){var r,n,t,i,o,a,l,c;for(r=Y,n=[],t=re();t!==u;)n.push(t),t=re();if(n!==u)if(91===e.charCodeAt(Y)?(t=j,Y++):(t=u,0===G&&O(T)),t!==u){for(i=[],o=te();o!==u;)i.push(o),o=te();if(i!==u){for(o=[],a=re();a!==u;)o.push(a),a=re();if(o!==u)if(93===e.charCodeAt(Y)?(a=k,Y++):(a=u,0===G&&O(M)),a!==u){for(l=[],c=re();c!==u;)l.push(c),c=re();l!==u?(r,r=n=D(i)):(Y=r,r=u)}else Y=r,r=u;else Y=r,r=u}else Y=r,r=u}else Y=r,r=u;else Y=r,r=u;return r}function te(){var r,n,t,i,o;for(r=Y,n=[],t=re();t!==u;)n.push(t),t=re();if(n!==u)if((t=V())!==u){for(i=[],o=re();o!==u;)i.push(o),o=re();i!==u?(44===e.charCodeAt(Y)?(o=C,Y++):(o=u,0===G&&O(R)),o===u&&(o=null),o!==u?(r,r=n=I(t)):(Y=r,r=u)):(Y=r,r=u)}else Y=r,r=u;else Y=r,r=u;return r}function ue(e,r){r.$name in e&&console.warn('Duplicate relation "'.concat(r.$name,'" in a relation expression. You should use "a.[b, c]" instead of "[a.b, a.c]". This will cause an error in objection 2.0'))}if((t=o())!==u&&Y===e.length)return t;throw t!==u&&Y<e.length&&O({type:"end"}),P(B,z<e.length?e.charAt(z):null,z<e.length?L(z,z+1):L(z,z))}e(r,Error),r.buildMessage=function(e,r){var n={literal:function(e){return'"'+u(e.text)+'"'},class:function(e){var r,n="";for(r=0;r<e.parts.length;r++)n+=e.parts[r]instanceof Array?i(e.parts[r][0])+"-"+i(e.parts[r][1]):i(e.parts[r]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}function u(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+t(e)})}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+t(e)})}return"Expected "+function(e){var r,t,u,i=new Array(e.length);for(r=0;r<e.length;r++)i[r]=(u=e[r],n[u.type](u));if(i.sort(),i.length>0){for(r=1,t=1;r<i.length;r++)i[r-1]!==i[r]&&(i[t]=i[r],t++);i.length=t}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(e)+" but "+function(e){return e?'"'+u(e)+'"':"end of input"}(r)+" found."},module.exports={SyntaxError:r,parse:n};
},{}],"D6rR":[function(require,module,exports) {
"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(n,e){return!e||"object"!==t(e)&&"function"!=typeof e?r(n):e}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&a(t,n)}function u(t){var n="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||!f(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return i(t,arguments,l(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a(e,t)})(t)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function i(t,n,e){return(i=c()?Reflect.construct:function(t,n,e){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(t,r));return e&&a(o,e.prototype),o}).apply(null,arguments)}function f(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function a(t,n){return(a=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){function r(t){var o;return n(this,r),(o=e(this,l(r).call(this,'unknown relation "'.concat(t,'" in a relation expression')))).name=o.constructor.name,o.relationName=t,o}return o(r,u(Error)),r}();module.exports={RelationDoesNotExistError:p};
},{}],"qujN":[function(require,module,exports) {
"use strict";function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?o(e):r}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&f(e,r)}function l(e){var r="function"==typeof Map?new Map:void 0;return(l=function(e){if(null===e||!s(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return c(e,arguments,h(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),f(t,e)})(e)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function c(e,r,t){return(c=a()?Reflect.construct:function(e,r,t){var n=[null];n.push.apply(n,r);var i=new(Function.bind.apply(e,n));return t&&f(i,t.prototype),i}).apply(null,arguments)}function s(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function f(e,r){return(f=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=require("./parsers/relationExpressionParser"),v=require("../utils/objectUtils"),d=v.isObject,p=v.isNumber,m=v.isString,$=v.union,b=require("../model/RelationDoesNotExistError"),w=b.RelationDoesNotExistError,R=function(e){function r(){return n(this,r),i(this,h(r).apply(this,arguments))}return u(r,l(Error)),r}(),g=function(e){function r(e){var t;return n(this,r),(t=i(this,h(r).call(this))).relationName=e,t}return u(r,R),r}(),x=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,e),this.node=r,this.recursionDepth=t}return r(e,[{key:"merge",value:function(r){return r=e.create(r),this.isEmpty?r:new e(G(this.node,r.node))}},{key:"isSubExpression",value:function(r){if(r=e.create(r),this.node.$allRecursive)return!0;if(r.node.$allRecursive)return this.node.$allRecursive;if(this.node.$relation!==r.node.$relation)return!1;var t=r.maxRecursionDepth;if(t>0)return this.node.$allRecursive||this.maxRecursionDepth>=t;var n=!0,i=!1,o=void 0;try{for(var u,l=r.node.$childNames[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){var a=u.value,c=this.childExpression(a),s=r.childExpression(a);if(!c||!c.isSubExpression(s))return!1}}catch(f){i=!0,o=f}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return!0}},{key:"childExpression",value:function(r){if(this.node.$allRecursive||r===this.node.$name&&this.recursionDepth<this.maxRecursionDepth-1)return new e(this.node,this.recursionDepth+1);var t=this.node[r];return t?new e(t):null}},{key:"forEachChildExpression",value:function(r,t){var n=this.maxRecursionDepth;if(this.node.$allRecursive){var i=!0,o=!1,u=void 0;try{for(var l,a=r.getRelationNames()[Symbol.iterator]();!(i=(l=a.next()).done);i=!0){var c=l.value,s=P(c,!0),f=r.getRelationUnsafe(c);t(new e(s),f)}}catch(g){o=!0,u=g}finally{try{i||null==a.return||a.return()}finally{if(o)throw u}}}else if(this.recursionDepth<n-1){var h=r.getRelationUnsafe(this.node.$relation)||null;t(new e(this.node,this.recursionDepth+1),h)}else if(0===n){var y=!0,v=!1,d=void 0;try{for(var p,m=this.node.$childNames[Symbol.iterator]();!(y=(p=m.next()).done);y=!0){var $=p.value,b=this.node[$],R=r.getRelationUnsafe(b.$relation);if(!R)throw new w(b.$relation);t(new e(b),R)}}catch(g){v=!0,d=g}finally{try{y||null==m.return||m.return()}finally{if(v)throw d}}}}},{key:"expressionsAtPath",value:function(r){return F(this,e.create(r),[])}},{key:"clone",value:function(){return new e(j(this.node),this.recursionDepth)}},{key:"toString",value:function(){return O(this.node)}},{key:"toPojo",value:function(){return j(this.node)}},{key:"toJSON",value:function(){return this.toPojo()}},{key:"maxRecursionDepth",get:function(){return p(this.node.$recursive)?this.node.$recursive:this.node.$recursive?Number.MAX_SAFE_INTEGER:0}},{key:"numChildren",get:function(){return this.node.$childNames.length}},{key:"isEmpty",get:function(){return 0===this.numChildren}}],[{key:"create",value:function(r){if(d(r))return r.isObjectionRelationExpression?r:new e(_(r));if(!m(r))return new e;if(0===r.trim().length)return new e;try{return new e(N(r))}catch(t){throw t.duplicateRelationName?new g(t.duplicateRelationName):new R(t.message)}}},{key:"fromModelGraph",value:function(r){return r?new e(k(r,P())):new e}}]),e}(),E=new Map;function N(e){var r=E.get(e);if(r)return j(r);var t=y.parse(e);return E.set(e,j(t)),t}function S(e){if(!e)return[];for(var r=[],t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];"$"!==i[0]&&r.push(i)}return r}function O(e){var r=e.$childNames.map(function(r){return e[r]}).map(O),t=e.$relation;return e.$recursive?p(e.$recursive)?t+=".^"+e.$recursive:t+=".^":e.$allRecursive&&(t+=".*"),r=r.length>1?"[".concat(r.join(", "),"]"):r[0],e.$modify.length&&(t+="(".concat(e.$modify.join(", "),")")),e.$name!==e.$relation&&(t+=" as ".concat(e.$name)),r?t?"".concat(t,".").concat(r):r:t}function j(e){return _(e)}function k(e,r){if(e){if(Array.isArray(e))for(var t=0,n=e.length;t<n;++t)D(e[t],r);else D(e,r);return r}}function D(e,r){for(var t=e.constructor.getRelationNames(),n=0,i=t.length;n<i;++n){var o=t[n];if(e.hasOwnProperty(o)){var u=r[o];u||(u=P(o),r[o]=u,r.$childNames.push(o)),k(e[o],u)}}}function P(){return _(null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={$name:A(e,r),$relation:M(e,r),$modify:C(e),$recursive:T(e),$allRecursive:U(e,t),$childNames:q(e)},i=!0,o=!1,u=void 0;try{for(var l,a=n.$childNames[Symbol.iterator]();!(i=(l=a.next()).done);i=!0){var c=l.value,s=e[c];(d(s)||!0===s)&&(n[c]=_(s,c))}}catch(f){o=!0,u=f}finally{try{i||null==a.return||a.return()}finally{if(o)throw u}}return n}function A(e,r){return e&&e.$name||r||null}function M(e,r){return e&&e.$relation||r||null}function C(e){return e&&e.$modify?Array.isArray(e.$modify)?e.$modify.slice():[e.$modify]:[]}function T(e){return e&&e.$recursive||!1}function U(e,r){return e&&e.$allRecursive||r||!1}function q(e){return e&&e.$childNames&&e.$childNames.slice()||S(e)}function F(e,r,t){if(0==r.node.$childNames.length)t.push(e);else{var n=!0,i=!1,o=void 0;try{for(var u,l=r.node.$childNames[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){var a=u.value,c=r.childExpression(a),s=e.childExpression(a);s&&F(s,c,t)}}catch(f){i=!0,o=f}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}}return t}function G(e,r){var t={$name:e.$name,$relation:e.$relation,$modify:$(e.$modify,r.$modify),$recursive:I(e.$recursive,r.$recursive),$allRecursive:e.$allRecursive||r.$allRecursive,$childNames:null};if(t.$recursive||t.$allRecursive)t.$childNames=[];else{t.$childNames=$(e.$childNames,r.$childNames);var n=!0,i=!1,o=void 0;try{for(var u,l=t.$childNames[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){var a=u.value,c=e[a],s=r[a];t[a]=c&&s?G(c,s):c||s}}catch(f){i=!0,o=f}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}}return t}function I(e,r){return!0===e||!0===r||(p(e)&&p(r)?Math.max(e,r):e||r)}Object.defineProperties(x.prototype,{isObjectionRelationExpression:{enumerable:!1,writable:!1,value:!0}}),module.exports={RelationExpression:x,RelationExpressionParseError:R,DuplicateRelationError:g};
},{"./parsers/relationExpressionParser":"eT1q","../utils/objectUtils":"WAAQ","../model/RelationDoesNotExistError":"D6rR"}],"u0K8":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function n(e,n,l){return n&&t(e.prototype,n),l&&t(e,l),e}var l=require("../../../utils/objectUtils"),i=l.isString,r=l.isObject,u=/\s+as\s+/i,a=function(){function t(n,l,i){e(this,t),this.table=n,this.column=l,this.alias=i}return n(t,[{key:"name",get:function(){return this.alias||this.column}}],[{key:"create",value:function(e){return r(e)?e.isObjectionSelection?e:e.isObjectionReferenceBuilder?o(e):e.isObjectionRawBuilder?c(e):null:i(e)?s(e):null}},{key:"doesSelect",value:function(e,n,l){if(n=t.create(n),l=t.create(l),"*"===n.column)return!n.table||("*"===l.column?l.table===n.table:null===l.table||l.table===n.table);var i=n.table||e.tableRef();return"*"!==l.column&&(l.column===n.column&&(null===l.table||l.table===i))}}]),t}();function o(e){return new a(e.tableName,e.column,e.alias)}function c(e){return e.alias?new a(null,null,e.alias):null}function s(e){var t=null,n=null,l=null;if(u.test(e)){var i=e.split(u);e=i[0].trim(),l=i[1].trim()}var r=e.lastIndexOf(".");return-1!==r?(t=e.substr(0,r),n=e.substr(r+1)):n=e,new a(t,n,l)}Object.defineProperties(a.prototype,{isObjectionSelection:{enumerable:!1,writable:!1,value:!0}}),module.exports={Selection:a};
},{"../../../utils/objectUtils":"WAAQ"}],"OE8P":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var i=0;i<n.length;i++){var t=n[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function i(e,i,t){return i&&n(e.prototype,i),t&&n(e,t),e}var t=function(){function n(){e(this,n),this.skipUndefined=!1,this.keepImplicitJoinProps=!1,this.isInternalQuery=!1,this.debug=!1}return i(n,[{key:"clone",value:function(){var e=new this.constructor;return e.skipUndefined=this.skipUndefined,e.keepImplicitJoinProps=this.keepImplicitJoinProps,e.isInternalQuery=this.isInternalQuery,e.debug=this.debug,e}}]),n}();module.exports={InternalOptions:t};
},{}],"t1fG":[function(require,module,exports) {
"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}var r=require("./InternalOptions"),o=r.InternalOptions,i=function(){function n(e){t(this,n),this.userContext=e?new e.constructor.QueryBuilderUserContext(e):null,this.options=e?new this.constructor.InternalOptions:null,this.knex=null,this.aliasMap=null,this.tableMap=null}return e(n,[{key:"clone",value:function(){var t=new this.constructor;return t.userContext=this.userContext,t.options=this.options.clone(),t.knex=this.knex,t.aliasMap=this.aliasMap,t.tableMap=this.tableMap,t}}],[{key:"InternalOptions",get:function(){return o}}]),n}();module.exports={QueryBuilderContextBase:i};
},{"./InternalOptions":"OE8P"}],"TWXF":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?u(t):r}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=c(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=require("./QueryBuilderContextBase"),s=p.QueryBuilderContextBase,y=function(e){function r(e){var n;return t(this,r),(n=o(this,f(r).call(this,e))).runBefore=[],n.runAfter=[],n.onBuild=[],n}return l(r,s),n(r,[{key:"clone",value:function(){var e=i(f(r.prototype),"clone",this).call(this);return e.runBefore=this.runBefore.slice(),e.runAfter=this.runAfter.slice(),e.onBuild=this.onBuild.slice(),e}}]),r}();module.exports={QueryBuilderContext:y};
},{"./QueryBuilderContextBase":"t1fG"}],"ihXk":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var r=Symbol(),o=function(){function n(t){e(this,n),this[r]=t}return t(n,[{key:"newFromObject",value:function(e,n){var t=new this.constructor(e);return Object.assign(t,n),t}},{key:"newMerge",value:function(e,n){var t=new this.constructor(e);return Object.assign(t,this,n),t}},{key:"transaction",get:function(){return this[r].knex()}}]),n}();module.exports={QueryBuilderUserContext:o};
},{}],"qeZX":[function(require,module,exports) {
"use strict";function e(e){return r(e)||n(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function r(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var u=require("../utils/deprecate"),s=u.deprecate,l=require("../utils/objectUtils"),c=l.isString,h=l.isFunction,f=l.isRegExp,y=l.last,p=require("./QueryBuilderContextBase"),v=p.QueryBuilderContextBase,d=require("./QueryBuilderUserContext"),k=d.QueryBuilderUserContext,x=function(){return!0},O=/^(select|columns|column|distinct|count|countDistinct|min|max|sum|sumDistinct|avg|avgDistinct)$/,m=/^(where|orWhere|andWhere|find)/,g=/^(on|orOn|andOn)/,_=/orderBy/,C=/(join|joinRaw|joinRelated)$/i,b=/^(from|into|table)$/,Q=function(){function t(){var e;i(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=this.constructor).init.apply(e,[this].concat(r))}return a(t,[{key:"modelClass",value:function(){return this._modelClass}},{key:"context",value:function(e){var t=this._context;return 0===arguments.length?t.userContext:(t.userContext=t.userContext.newMerge(this,e),this)}},{key:"mergeContext",value:function(e){return s("`QueryBuilder#mergeContext` method is deprecated. The `context` method now behaves just like `mergeContext`. `mergeContext` method will be removed in 3.0"),this.context(e||{})}},{key:"clearContext",value:function(){return this._context.userContext=new this.constructor.QueryBuilderUserContext(this),this}},{key:"internalContext",value:function(e){return 0===arguments.length?this._context:(this._context=e,this)}},{key:"internalOptions",value:function(e){if(0===arguments.length)return this._context.options;var t=this._context.options;return this._context.options=Object.assign(t,e),this}},{key:"isPartial",value:function(e){return 0===arguments.length?this._isPartialQuery:(this._isPartialQuery=e,this)}},{key:"isInternal",value:function(){return this.internalOptions().isInternalQuery}},{key:"tableNameFor",value:function(e,t){var n=this.internalContext(),r=n.tableMap;return c(t)?(n.tableMap=r||new Map,n.tableMap.set(e,t),this):r&&r.get(e)||e}},{key:"aliasFor",value:function(e,t){var n=this.internalContext(),r=n.aliasMap;return c(t)?(n.aliasMap=r||new Map,n.aliasMap.set(e,t),this):r&&r.get(e)||null}},{key:"tableRefFor",value:function(e){return this.aliasFor(e)||this.tableNameFor(e)}},{key:"childQueryOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fork,r=t.isInternalQuery;if(e){var i=e.internalContext();n&&(i=i.clone()),r&&(i.options.isInternalQuery=!0),this._parentQuery=e,this.internalContext(i),null===this.unsafeKnex()&&this.knex(e.unsafeKnex())}return this}},{key:"subqueryOf",value:function(e){return e&&(this._parentQuery=e,null===this.unsafeKnex()&&this.knex(e.unsafeKnex())),this}},{key:"parentQuery",value:function(){return this._parentQuery}},{key:"knex",value:function(){if(0===arguments.length){var e=this.unsafeKnex();if(!e)throw new Error("no database connection available for a query. You need to bind the model class or the query to a knex instance.");return e}return this._context.knex=arguments.length<=0?void 0:arguments[0],this}},{key:"unsafeKnex",value:function(){return this._context.knex||this._modelClass.knex()||null}},{key:"clear",value:function(e){var t=new Set;this.forEachOperation(e,function(e){e.isAncestorInSet(t)||t.add(e)});var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;this.removeOperation(u)}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return this}},{key:"clearSelect",value:function(){return this.clear(O)}},{key:"clearWhere",value:function(){return this.clear(m)}},{key:"clearOrder",value:function(){return this.clear(_)}},{key:"copyFrom",value:function(e,t){var n=new Set;e.forEachOperation(t,function(e){e.isAncestorInSet(n)||n.add(e)});var r=!0,i=!1,o=void 0;try{for(var a,u=n[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value.clone();s.parentOperation=null,s.adderHookName=null,this._operations.push(s)}}catch(l){i=!0,o=l}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return this}},{key:"has",value:function(e){return!!this.findOperation(e)}},{key:"forEachOperation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=w(e),i=!0,o=!1,a=void 0;try{for(var u,s=this._operations[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;if(r(l)===n&&!1===t(l))break;if(!1===l.forEachDescendantOperation(function(e){if(r(e)===n&&!1===t(e))return!1}))break}}catch(c){o=!0,a=c}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return this}},{key:"findOperation",value:function(e){var t=null;return this.forEachOperation(e,function(e){return t=e,!1}),t}},{key:"findLastOperation",value:function(e){var t=null;return this.forEachOperation(e,function(e){t=e}),t}},{key:"everyOperation",value:function(e){var t=!0;return this.forEachOperation(e,function(){return t=!1,!1},!1),t}},{key:"callOperationMethod",value:function(t,n,r){try{return t.removeChildOperationsByHookName(n),this._activeOperations.push({operation:t,hookName:n}),t[n].apply(t,e(r))}finally{this._activeOperations.pop()}}},{key:"callAsyncOperationMethod",value:function(t,n,r){return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return t.removeChildOperationsByHookName(n),this._activeOperations.push({operation:t,hookName:n}),i.prev=2,i.next=5,regeneratorRuntime.awrap(t[n].apply(t,e(r)));case 5:return i.abrupt("return",i.sent);case 6:return i.prev=6,this._activeOperations.pop(),i.finish(6);case 9:case"end":return i.stop()}},null,this,[[2,,6,9]])}},{key:"addOperation",value:function(e,t){return this.addOperationUsingMethod("push",e,t)}},{key:"addOperationToFront",value:function(e,t){return this.addOperationUsingMethod("unshift",e,t)}},{key:"addOperationUsingMethod",value:function(e,t,n){if(this.callOperationMethod(t,"onAdd",[this,n]))if(this._activeOperations.length){var r=y(this._activeOperations),i=r.operation,o=r.hookName;i.addChildOperation(o,t)}else this._operations[e](t);return this}},{key:"removeOperation",value:function(e){if(e.parentOperation)e.parentOperation.removeChildOperation(e);else{var t=this._operations.indexOf(e);-1!==t&&this._operations.splice(t,1)}return this}},{key:"clone",value:function(){return this.baseCloneInto(new this.constructor(this.unsafeKnex()))}},{key:"baseCloneInto",value:function(e){return e._modelClass=this._modelClass,e._operations=this._operations.map(function(e){return e.clone()}),e._context=this._context.clone(),e._parentQuery=this._parentQuery,e._isPartialQuery=this._isPartialQuery,e._activeOperations=[],e}},{key:"toKnexQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.knex().queryBuilder();return this.executeOnBuild(),this.executeOnBuildKnex(e),e}},{key:"executeOnBuild",value:function(){var e=this;this.forEachOperation(!0,function(t){t.hasOnBuild()&&e.callOperationMethod(t,"onBuild",[e])})}},{key:"executeOnBuildKnex",value:function(e){var t=this;this.forEachOperation(!0,function(n){n.hasOnBuildKnex()&&t.callOperationMethod(n,"onBuildKnex",[e,t])})}},{key:"toString",value:function(){return this.toKnexQuery().toString()}},{key:"toSql",value:function(){return this.toString()}},{key:"skipUndefined",value:function(){return this.internalOptions().skipUndefined=!0,this}}],[{key:"init",value:function(e,t){e._modelClass=t,e._operations=[],e._context=new this.QueryBuilderContext(e),e._parentQuery=null,e._isPartialQuery=!1,e._activeOperations=[]}},{key:"forClass",value:function(e){return new this(e)}},{key:"AllSelector",get:function(){return x}},{key:"QueryBuilderContext",get:function(){return v}},{key:"QueryBuilderUserContext",get:function(){return k}},{key:"SelectSelector",get:function(){return O}},{key:"WhereSelector",get:function(){return m}},{key:"OnSelector",get:function(){return g}},{key:"JoinSelector",get:function(){return C}},{key:"FromSelector",get:function(){return b}},{key:"OrderBySelector",get:function(){return _}}]),t}();function w(e){return!0===e?x:f(e)?function(t){return e.test(t.name)}:c(e)?function(t){return t.name===e}:h(e)&&e.isObjectionQueryBuilderOperationClass?function(t){return t.is(e)}:h(e)?e:function(){return!1}}module.exports={QueryBuilderOperationSupport:Q};
},{"../utils/deprecate":"NYRu","../utils/objectUtils":"WAAQ","./QueryBuilderContextBase":"t1fG","./QueryBuilderUserContext":"ihXk"}],"ik4h":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}var t={onAdd:"hasOnAdd",onBefore1:"hasOnBefore1",onBefore2:"hasOnBefore2",onBefore3:"hasOnBefore3",onBuild:"hasOnBuild",onBuildKnex:"hasOnBuildKnex",onRawResult:"hasOnRawResult",queryExecutor:"hasQueryExecutor",onAfter1:"hasOnAfter1",onAfter2:"hasOnAfter2",onAfter3:"hasOnAfter3",onError:"hasOnError"},o=function(){function n(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,n),this.name=r,this.opt=t,this.adderHookName=null,this.parentOperation=null,this.childOperations=[]}return r(n,[{key:"is",value:function(e){return this instanceof e}},{key:"hasHook",value:function(e){return this[t[e]]()}},{key:"onAdd",value:function(e,n){return!0}},{key:"hasOnAdd",value:function(){return!0}},{key:"onBefore1",value:function(e,n){}},{key:"hasOnBefore1",value:function(){return this.onBefore1!==n.prototype.onBefore1}},{key:"onBefore2",value:function(e,n){}},{key:"hasOnBefore2",value:function(){return this.onBefore2!==n.prototype.onBefore2}},{key:"onBefore3",value:function(e,n){}},{key:"hasOnBefore3",value:function(){return this.onBefore3!==n.prototype.onBefore3}},{key:"onBuild",value:function(e){}},{key:"hasOnBuild",value:function(){return this.onBuild!==n.prototype.onBuild}},{key:"onBuildKnex",value:function(e,n){}},{key:"hasOnBuildKnex",value:function(){return this.onBuildKnex!==n.prototype.onBuildKnex}},{key:"onRawResult",value:function(e,n){return n}},{key:"hasOnRawResult",value:function(){return this.onRawResult!==n.prototype.onRawResult}},{key:"onAfter1",value:function(e,n){return n}},{key:"hasOnAfter1",value:function(){return this.onAfter1!==n.prototype.onAfter1}},{key:"onAfter2",value:function(e,n){return n}},{key:"hasOnAfter2",value:function(){return this.onAfter2!==n.prototype.onAfter2}},{key:"onAfter3",value:function(e,n){return n}},{key:"hasOnAfter3",value:function(){return this.onAfter3!==n.prototype.onAfter3}},{key:"queryExecutor",value:function(e){}},{key:"hasQueryExecutor",value:function(){return this.queryExecutor!==n.prototype.queryExecutor}},{key:"onError",value:function(e,n){}},{key:"hasOnError",value:function(){return this.onError!==n.prototype.onError}},{key:"isAncestorInSet",value:function(e){for(var n=this.parentOperation;n;){if(e.has(n))return!0;n=n.parentOperation}return!1}},{key:"clone",value:function(){var e=new this.constructor(this.name,this.opt);return e.adderHookName=this.adderHookName,e.parentOperation=this.parentOperation,e.childOperations=this.childOperations.map(function(n){var r=n.clone();return r.parentOperation=e,r}),e}},{key:"addChildOperation",value:function(e,n){n.adderHookName=e,n.parentOperation=this,this.childOperations.push(n)}},{key:"removeChildOperation",value:function(e){var n=this.childOperations.indexOf(e);-1!==n&&(e.parentOperation=null,this.childOperations.splice(n,1))}},{key:"removeChildOperationsByHookName",value:function(e){this.childOperations=this.childOperations.filter(function(n){return n.adderHookName!==e})}},{key:"forEachDescendantOperation",value:function(e){var n=!0,r=!1,t=void 0;try{for(var o,u=this.childOperations[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var i=o.value;if(!1===e(i))return!1;if(!1===i.forEachDescendantOperation(e))return!1}}catch(a){r=!0,t=a}finally{try{n||null==u.return||u.return()}finally{if(r)throw t}}return!0}}]),n}();Object.defineProperties(o,{isObjectionQueryBuilderOperationClass:{enumerable:!1,writable:!1,value:!0}}),module.exports={QueryBuilderOperation:o};
},{}],"x1m1":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}var t=function(){function n(){e(this,n)}return r(n,[{key:"onConvertQueryBuilderBase",value:function(e,n){return e}}]),n}();module.exports={QueryTransformation:t};
},{}],"iKUE":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function e(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}function o(r,e){return!e||"object"!==t(e)&&"function"!=typeof e?u(r):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&a(t,r)}function a(t,r){return(a=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}var c=require("./QueryTransformation"),l=c.QueryTransformation,y=function(t){function e(t){var n;return r(this,e),(n=o(this,i(e).call(this))).transformations=t,n}return f(e,l),n(e,[{key:"onConvertQueryBuilderBase",value:function(t,r){var e=!0,n=!1,o=void 0;try{for(var u,i=this.transformations[Symbol.iterator]();!(e=(u=i.next()).done);e=!0){t=u.value.onConvertQueryBuilderBase(t,r)}}catch(f){n=!0,o=f}finally{try{e||null==i.return||i.return()}finally{if(n)throw o}}return t}}]),e}();module.exports={CompositeQueryTransformation:y};
},{"./QueryTransformation":"x1m1"}],"qMLk":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?u(t):r}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=require("./QueryTransformation"),l=c.QueryTransformation,s=require("../../utils/knexUtils"),y=s.isMySql,p=function(e){function r(){return t(this,r),o(this,i(r).apply(this,arguments))}return f(r,l),n(r,[{key:"onConvertQueryBuilderBase",value:function(e,t){var r=t.unsafeKnex();return r&&y(r)&&(t.isUpdate()||t.isDelete())&&(t.tableName()===e.tableName()||b(e,t.tableName()))?e.modelClass().query().from(e.as("mysql_subquery_fix")):e}}]),r}();function b(e,t){var r=!1;return e.forEachOperation(e.constructor.JoinSelector,function(e){if(e.args[0]===t)return r=!0,!1}),r}module.exports={WrapMysqlModifySubqueryTransformation:p};
},{"./QueryTransformation":"x1m1","../../utils/knexUtils":"u553"}],"W4D9":[function(require,module,exports) {
"use strict";var r=require("./CompositeQueryTransformation"),o=r.CompositeQueryTransformation,e=require("./WrapMysqlModifySubqueryTransformation"),a=e.WrapMysqlModifySubqueryTransformation,i=new o([new a]);module.exports={transformation:i};
},{"./CompositeQueryTransformation":"iKUE","./WrapMysqlModifySubqueryTransformation":"qMLk"}],"i44X":[function(require,module,exports) {
"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}function e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function r(n,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function t(n,e,t){return e&&r(n.prototype,e),t&&r(n,t),n}function o(e,r){return!r||"object"!==n(r)&&"function"!=typeof r?a(e):r}function a(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function u(n){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function i(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&l(n,e)}function l(n,e){return(l=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}var f=require("./QueryBuilderOperationSupport"),y=f.QueryBuilderOperationSupport,d=require("./operations/KnexOperation"),O=d.KnexOperation,w=function(n){function r(){return e(this,r),o(this,u(r).apply(this,arguments))}return i(r,y),t(r,[{key:"using",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("using"),e)}},{key:"on",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("on"),e)}},{key:"orOn",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("orOn"),e)}},{key:"onBetween",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("onBetween"),e)}},{key:"onNotBetween",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("onNotBetween"),e)}},{key:"orOnBetween",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("orOnBetween"),e)}},{key:"orOnNotBetween",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("orOnNotBetween"),e)}},{key:"onIn",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("onIn"),e)}},{key:"onNotIn",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("onNotIn"),e)}},{key:"orOnIn",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("orOnIn"),e)}},{key:"orOnNotIn",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("orOnNotIn"),e)}},{key:"onNull",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("onNull"),e)}},{key:"orOnNull",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("orOnNull"),e)}},{key:"onNotNull",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("onNotNull"),e)}},{key:"orOnNotNull",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("orOnNotNull"),e)}},{key:"onExists",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("onExists"),e)}},{key:"orOnExists",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("orOnExists"),e)}},{key:"onNotExists",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("onNotExists"),e)}},{key:"orOnNotExists",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("orOnNotExists"),e)}},{key:"type",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("type"),e)}},{key:"andOn",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("andOn"),e)}},{key:"andOnIn",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("andOnIn"),e)}},{key:"andOnNotIn",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("andOnNotIn"),e)}},{key:"andOnNull",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("andOnNull"),e)}},{key:"andOnNotNull",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("andOnNotNull"),e)}},{key:"andOnExists",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("andOnExists"),e)}},{key:"andOnNotExists",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("andOnNotExists"),e)}},{key:"andOnBetween",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("andOnBetween"),e)}},{key:"andOnNotBetween",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("andOnNotBetween"),e)}},{key:"onVal",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("onVal"),e)}},{key:"andOnVal",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("andOnVal"),e)}},{key:"orOnVal",value:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return this.addOperation(new O("orOnVal"),e)}}]),r}();module.exports={JoinBuilder:w};
},{"./QueryBuilderOperationSupport":"qeZX","./operations/KnexOperation":"ClAu"}],"rMML":[function(require,module,exports) {
"use strict";function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function t(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function o(n,t){return!t||"object"!==e(t)&&"function"!=typeof t?i(n):t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,n,t){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,n,t){var r=a(e,n);if(r){var o=Object.getOwnPropertyDescriptor(r,n);return o.get?o.get.call(t):o.value}})(e,n,t||e)}function a(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=f(e)););return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&s(e,n)}function s(e,n){return(s=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var l=require("./QueryBuilderOperation"),p=l.QueryBuilderOperation,d=require("../../utils/objectUtils"),y=d.isPlainObject,b=d.isObject,h=d.isFunction,v=d.once,O=require("../../utils/knexUtils"),g=O.isKnexQueryBuilder,m=O.isKnexJoinBuilder,w=require("../transformations"),j=w.transformation,x=v(function(){return require("../JoinBuilder").JoinBuilder}),k=function(e){function t(e,r){var i;return n(this,t),(i=o(this,f(t).call(this,e,r))).args=null,i}return c(t,p),r(t,[{key:"getKnexArgs",value:function(e){return C(this.name,e,this.args)}},{key:"onAdd",value:function(e,n){return this.args=Array.from(n),B(this.name,e,this.args)}},{key:"clone",value:function(){var e=u(f(t.prototype),"clone",this).call(this);return e.args=this.args,e}}]),t}();function B(e,n,t){for(var r=n.internalOptions().skipUndefined,o=0,i=t.length;o<i;++o){if(P(t[o])){if(r)return!1;throw new Error("undefined passed as argument #".concat(o," for '").concat(e,"' operation. Call skipUndefined() method to ignore the undefined values."))}}return!0}function C(e,n,t){var r=n.internalOptions().skipUndefined;return t.map(function(t,o){return K(t)?q(t,n):Q(t)?_(t,n):U(t)?A(t,n,o,e,r):h(t)?E(t,n):J(t)?T(t):y(t)?D(t,n,o,e,r):t})}function P(e){return void 0===e}function K(e){return b(e)&&h(e.toKnexRaw)}function q(e,n){return e.toKnexRaw(n)}function Q(e){return b(e)&&!0===e.isObjectionQueryBuilderBase}function _(e,n){return(e=j.onConvertQueryBuilderBase(e,n)).subqueryOf(n).toKnexQuery()}function U(e){return Array.isArray(e)}function A(e,n,t,r,o){return e.map(function(e){if(void 0!==e)return K(e)?q(e,n):Q(e)?_(e,n):e;if(!o)throw new Error("undefined passed as an item in argument #".concat(t," for '").concat(r,"' operation. Call skipUndefined() method to ignore the undefined values."))})}function E(e,n){return function(){if(g(this))R(this,e,n);else{if(!m(this)){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e.apply(this,r)}S(this,e,n)}}}function R(e,n,t){var r=t.constructor.forClass(t.modelClass());r.subqueryOf(t).isPartial(!0),n.call(r,r),r.toKnexQuery(e)}function S(e,n,t){var r=x().forClass(t.modelClass());r.subqueryOf(t).isPartial(!0),n.call(r,r),r.toKnexQuery(e)}function J(e){return b(e)&&e.$isObjectionModel}function T(e){return e.$toDatabaseJson()}function D(e,n,t,r,o){return Object.keys(e).reduce(function(i,u){var a=e[u];if(void 0===a){if(!o)throw new Error("undefined passed as a property in argument #".concat(t," for '").concat(r,"' operation. Call skipUndefined() method to ignore the undefined values."))}else K(a)?i[u]=q(a,n):Q(a)?i[u]=_(a,n):i[u]=a;return i},{})}module.exports={ObjectionToKnexConvertingOperation:k};
},{"./QueryBuilderOperation":"ik4h","../../utils/objectUtils":"WAAQ","../../utils/knexUtils":"u553","../transformations":"W4D9","../JoinBuilder":"i44X"}],"ClAu":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}function r(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=require("./ObjectionToKnexConvertingOperation"),a=p.ObjectionToKnexConvertingOperation,l=function(t){function n(){return e(this,n),r(this,u(n).apply(this,arguments))}return c(n,a),o(n,[{key:"onBuildKnex",value:function(t,e){t[this.name].apply(t,this.getKnexArgs(e))}}]),n}();module.exports={KnexOperation:l};
},{"./ObjectionToKnexConvertingOperation":"rMML"}],"xBsf":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=l(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function l(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=require("../../../utils/objectUtils"),y=s.flatten,p=require("./Selection"),b=p.Selection,v=require("../ObjectionToKnexConvertingOperation"),h=v.ObjectionToKnexConvertingOperation,O=/count/i,d=function(t){function n(t,r){var i;return e(this,n),(i=o(this,c(n).call(this,t,r))).selections=[],i}return f(n,h),r(n,[{key:"onAdd",value:function(t,e){var r=y(e);if(0===r.length&&!O.test(this.name))return!1;var o=u(c(n.prototype),"onAdd",this).call(this,t,r),i=!0,l=!1,f=void 0;try{for(var a,s=r[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var p=a.value,v=b.create(p);v&&this.selections.push(v)}}catch(h){l=!0,f=h}finally{try{i||null==s.return||s.return()}finally{if(l)throw f}}return o}},{key:"onBuildKnex",value:function(t,e){t[this.name].apply(t,this.getKnexArgs(e))}},{key:"findSelection",value:function(t,e){var n=b.create(e);if(!n)return null;var r=!0,o=!1,i=void 0;try{for(var u,l=this.selections[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var c=u.value;if(b.doesSelect(t,c,n))return c}}catch(f){o=!0,i=f}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return null}},{key:"clone",value:function(){var t=u(c(n.prototype),"clone",this).call(this);return t.selections=this.selections.slice(),t}}]),n}();module.exports={SelectOperation:d};
},{"../../../utils/objectUtils":"WAAQ","./Selection":"u0K8","../ObjectionToKnexConvertingOperation":"rMML"}],"fXYV":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}function r(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=c(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=require("../../utils/objectUtils"),y=a.flatten,s=require("./ObjectionToKnexConvertingOperation"),b=s.ObjectionToKnexConvertingOperation,O=function(t){function n(){return e(this,n),r(this,f(n).apply(this,arguments))}return l(n,b),o(n,[{key:"onAdd",value:function(t,e){return 0!==(e=y(e)).length&&u(f(n.prototype),"onAdd",this).call(this,t,e)}},{key:"onBuildKnex",value:function(t,e){t.returning(this.getKnexArgs(e))}}]),n}();module.exports={ReturningOperation:O};
},{"../../utils/objectUtils":"WAAQ","./ObjectionToKnexConvertingOperation":"rMML"}],"EnLI":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t){return o(t)||n(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function o(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}function a(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?f(e):r}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=require("./ObjectionToKnexConvertingOperation"),b=p.ObjectionToKnexConvertingOperation,h=require("../../utils/objectUtils"),g=h.asSingle,m=function(t){function r(){return i(this,r),a(this,l(r).apply(this,arguments))}return s(r,b),c(r,[{key:"onBuildKnex",value:function(t,r){var n=this.getKnexArgs(r);if(2===n.length)n.splice(1,0,"=");else if(3!==n.length)throw new Error("invalid number of arguments ".concat(n.length));t.where.apply(t,e(v.apply(void 0,e(n))))}}]),r}();function v(t,e,r){if(w(t,r))return O(t,e,r);if(A(t,r))return j(t,e,r);throw new Error("both cols and values must have same dimensions")}function w(t,e){return!(Array.isArray(t)&&1!==t.length||Array.isArray(e)&&1!==e.length)}function O(t,e,r){return[g(t),e,g(r)]}function A(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===e.length}function j(t,e,r){return[function(n){for(var o=0,i=t.length;o<i;++o)n.where(t[o],e,r[o])}]}module.exports={WhereCompositeOperation:m};
},{"./ObjectionToKnexConvertingOperation":"rMML","../../utils/objectUtils":"WAAQ"}],"Dw0X":[function(require,module,exports) {
"use strict";function r(n){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(n)}var n=require("../../../utils/parseFieldExpression"),e=require("../../../utils/objectUtils"),t=e.asArray,o=e.isObject,i=e.isString;function s(r,e){var t=n.parseFieldExpression(r),o=t.access.map(function(r){return r.ref}).join(","),i=e?"#>>":"#>",s=t.columnName.split(".").join('"."');return'"'.concat(s,'"').concat(i,"'{").concat(o,"}'")}function a(r,n,e,t,o){var i=u(n,e,t,o);return r.whereRaw.apply(r,i)}function u(r,n,e,t){var a=s(r);if(i(e)){var u=["(",a,")::jsonb",n,"(",s(e),")::jsonb"];return t&&u.unshift(t),[u.join(" ")]}if(o(e)){var c=["(",a,")::jsonb",n,"?::jsonb"];return t&&c.unshift(t),[c.join(" "),JSON.stringify(e)]}throw new Error("Invalid right hand expression.")}function c(r,n,e,o){var a=s(n),u="array["+(o=t(o)).map(function(r){if(!i(r))throw new Error("All keys to find must be strings.");return"?"}).join(",")+"]",c=r.raw(u,o);return"".concat(a," ").concat(e.replace("?","\\?")," ").concat(c)}function f(n,e,t,o){var i,a=s(e,!0),u=l(n,t),c=n.raw(" ?",[o]),f=r(o);if("number"===f)i="::NUMERIC";else if("boolean"===f)i="::BOOLEAN";else if("string"===f)i="::TEXT";else{if(null!==o)throw new Error("Value must be string, number, boolean or null.");i="::TEXT",c="NULL"}return"(".concat(a,")").concat(i," ").concat(u," ").concat(c)}function l(r,n){var e=n.trim().toLowerCase();switch(e){case"is":case"is not":return e;default:return r.client.formatter().operator(n)}}module.exports={parseFieldExpression:s,whereJsonbRefOnLeftJsonbValOrRefOnRight:a,whereJsonbRefOnLeftJsonbValOrRefOnRightRawQueryParams:u,whereJsonFieldRightStringArrayOnLeftQuery:c,whereJsonFieldQuery:f};
},{"../../../utils/parseFieldExpression":"GpEX","../../../utils/objectUtils":"WAAQ"}],"v6cn":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function r(t,o){return!o||"object"!==e(o)&&"function"!=typeof o?i(t):o}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=require("./postgresJsonApi"),a=require("../ObjectionToKnexConvertingOperation"),s=a.ObjectionToKnexConvertingOperation,l=function(e){function o(){return t(this,o),r(this,u(o).apply(this,arguments))}return f(o,s),n(o,[{key:"onBuildKnex",value:function(e,t){var o=this.getKnexArgs(t),n=p.whereJsonbRefOnLeftJsonbValOrRefOnRightRawQueryParams(o[0],this.opt.operator,o[1],this.opt.prefix);"or"===this.opt.bool?e.orWhereRaw.apply(e,n):e.whereRaw.apply(e,n)}}]),o}();module.exports={WhereJsonPostgresOperation:l};
},{"./postgresJsonApi":"Dw0X","../ObjectionToKnexConvertingOperation":"rMML"}],"xNfx":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(t){return o(t)||n(t)||e()}function e(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function o(t){if(Array.isArray(t)){for(var r=0,e=new Array(t.length);r<t.length;r++)e[r]=t[r];return e}}function i(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function u(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,r,e){return r&&u(t.prototype,r),e&&u(t,e),t}function f(r,e){return!e||"object"!==t(e)&&"function"!=typeof e?a(r):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,r,e){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,r,e){var n=p(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(e):o.value}})(t,r,e||t)}function p(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=y(t)););return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&b(t,r)}function b(t,r){return(b=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}var h=require("../ObjectionToKnexConvertingOperation"),v=h.ObjectionToKnexConvertingOperation,O=require("../../../utils/objectUtils"),g=O.isObject,j=O.asSingle,m=require("../../../utils/knexUtils"),w=m.isKnexQueryBuilder,A=function(t){function e(t,r){var n;return i(this,e),(n=f(this,y(e).call(this,t,r))).prefix=n.opt.prefix||null,n}return s(e,v),c(e,[{key:"onBuildKnex",value:function(t,e){var n=x.apply(void 0,[e.knex()].concat(r(this.getKnexArgs(e))));return"not"===this.prefix?t.whereNotIn.apply(t,r(n)):t.whereIn.apply(t,r(n))}},{key:"clone",value:function(){var t=l(y(e.prototype),"clone",this).call(this);return t.prefix=this.prefix,t}}]),e}();function x(t,r,e){return d(r)?S(t,r,e):k(r,e)}function d(t){return Array.isArray(t)&&t.length>1}function S(t,r,e){return Array.isArray(e)?_(r,e):P(t,r,e)}function _(t,r){return Array.isArray(r[0])?[t,r]:[t,[r]]}function P(t,r,e){var n="(".concat(r.map(function(t){return g(t)?"?":"??"}).join(","),")");return[t.raw(n,r),e]}function k(t,r){return Array.isArray(r)?r=K(r,[]):w(r)||(r=[r]),[j(t),r]}function K(t,r){for(var e=0,n=t.length;e<n;++e){var o=t[e];Array.isArray(o)?K(o,r):null!=o&&r.push(o)}return r}module.exports={WhereInCompositeOperation:A};
},{"../ObjectionToKnexConvertingOperation":"rMML","../../../utils/objectUtils":"WAAQ","../../../utils/knexUtils":"u553"}],"D9YR":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e){return o(e)||n(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function o(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function f(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?a(t):r}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,r){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=p(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=require("../ObjectionToKnexConvertingOperation"),g=b.ObjectionToKnexConvertingOperation,w=require("../../../utils/knexUtils"),m=w.isKnexQueryBuilder,v=require("../../../utils/objectUtils"),O=v.asSingle,d=function(e){function r(e,t){var n;return i(this,r),(n=f(this,s(r).call(this,e,t))).prefix=n.opt.prefix||null,n}return y(r,g),c(r,[{key:"onBuildKnex",value:function(e,r){var n=j.apply(void 0,t(this.getKnexArgs(r))),o=n.method,i=n.args;return"where"===o?"not"===this.prefix?e.whereNot.apply(e,t(i)):e.where.apply(e,t(i)):"not"===this.prefix?e.whereNotIn.apply(e,t(i)):e.whereIn.apply(e,t(i))}},{key:"clone",value:function(){var e=l(s(r.prototype),"clone",this).call(this);return e.prefix=this.prefix,e}}]),r}();function j(e,t){return x(e)?A(e,t):S(e,t)}function x(e){return Array.isArray(e)&&e.length>1}function A(e,t){if(!Array.isArray(t))throw new Error("sqlite doesn't support multi-column where in clauses");return{method:"where",args:[function(r){t.forEach(function(t){r.orWhere(function(r){e.forEach(function(e,n){r.andWhere(e,t[n])})})})}]}}function S(e,t){return Array.isArray(t)?t=_(t,[]):m(t)||(t=[t]),{method:"whereIn",args:[O(e),t]}}function _(e,t){for(var r=0,n=e.length;r<n;++r){var o=e[r];Array.isArray(o)?_(o,t):null!=o&&t.push(o)}return t}module.exports={WhereInCompositeSqliteOperation:d};
},{"../ObjectionToKnexConvertingOperation":"rMML","../../../utils/knexUtils":"u553","../../../utils/objectUtils":"WAAQ"}],"VrGI":[function(require,module,exports) {
"use strict";var t="objectiontmpjoin";function n(n){return"".concat(t).concat(n)}function o(n){return n.startsWith(t)}module.exports={getTempColumn:n,isTempColumn:o};
},{}],"Bd7I":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=c(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=require("../ObjectionToKnexConvertingOperation"),s=p.ObjectionToKnexConvertingOperation,y=require("../../../utils/objectUtils"),b=y.flatten,h=y.zipObject,m=y.isString,v=require("../../../utils/tmpColumnUtils"),w=v.getTempColumn,O=function(t){function n(t,r){var i;return e(this,n),(i=o(this,l(n).call(this,t,r))).prefix=i.opt.prefix||null,i}return a(n,s),r(n,[{key:"onBuildKnex",value:function(t,e){var n=this.getKnexArgs(e);this.build(e.knex(),t,n[0],n[1])}},{key:"build",value:function(t,e,n,r){Array.isArray(n)&&n.length>1?this.buildComposite(t,e,n,r):this.buildNonComposite(e,n,r)}},{key:"buildComposite",value:function(t,e,n,r){var o=n.map(function(t,e){return w(e)});Array.isArray(r)?this.buildCompositeValue(t,e,n,o,r):this.buildCompositeSubquery(t,e,n,o,r.as(t.raw("V(".concat(o.map(function(t){return"??"}),")"),o)))}},{key:"buildCompositeValue",value:function(t,e,n,r,o){return this.buildCompositeSubquery(t,e,n,r,t.raw("(VALUES ".concat(o.map(function(t){return"(".concat(t.map(function(t){return"?"}).join(","),")")}).join(","),") AS V(").concat(r.map(function(t){return"??"}).join(","),")"),b(o).concat(r)))}},{key:"buildCompositeSubquery",value:function(t,e,n,r,o){var i=t.from(o).where(h(r,n.map(function(e){return t.raw("??",e)})));return"not"===this.prefix?e.whereNotExists(i):e.whereExists(i)}},{key:"buildNonComposite",value:function(t,e,n){var r=m(e)?e:e[0];n=Array.isArray(n)?d(n,[]):[n],this.whereIn(t,r,n)}},{key:"whereIn",value:function(t,e,n){"not"===this.prefix?t.whereNotIn(e,n):t.whereIn(e,n)}},{key:"clone",value:function(){var t=u(l(n.prototype),"clone",this).call(this);return t.prefix=this.prefix,t}}]),n}();function d(t,e){for(var n=0,r=t.length;n<r;++n){var o=t[n];Array.isArray(o)?d(o,e):null!=o&&e.push(o)}return e}module.exports={WhereInCompositeMsSqlOperation:O};
},{"../ObjectionToKnexConvertingOperation":"rMML","../../../utils/objectUtils":"WAAQ","../../../utils/tmpColumnUtils":"VrGI"}],"TweX":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function r(t,o){return!o||"object"!==e(o)&&"function"!=typeof o?i(t):o}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=require("./postgresJsonApi"),a=require("../ObjectionToKnexConvertingOperation"),s=a.ObjectionToKnexConvertingOperation,l=function(e){function o(){return t(this,o),r(this,u(o).apply(this,arguments))}return c(o,s),n(o,[{key:"onBuildKnex",value:function(e,t){var o=this.getKnexArgs(t),n=p.whereJsonFieldRightStringArrayOnLeftQuery(t.knex(),o[0],this.opt.operator,o[1]);"or"===this.opt.bool?e.orWhereRaw(n):e.whereRaw(n)}}]),o}();module.exports={WhereJsonHasPostgresOperation:l};
},{"./postgresJsonApi":"Dw0X","../ObjectionToKnexConvertingOperation":"rMML"}],"lpbA":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function r(t,o){return!o||"object"!==e(o)&&"function"!=typeof o?i(t):o}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=require("./postgresJsonApi"),p=require("../ObjectionToKnexConvertingOperation"),l=p.ObjectionToKnexConvertingOperation,a=function(e){function o(){return t(this,o),r(this,u(o).apply(this,arguments))}return c(o,l),n(o,[{key:"onBuildKnex",value:function(e,t){this.whereJsonNotObject(e,t.knex(),this.getKnexArgs(t)[0])}},{key:"whereJsonNotObject",value:function(e,t,o){var n=this,r=function(e){s.whereJsonbRefOnLeftJsonbValOrRefOnRight(e,o,"@>",n.opt.compareValue,"not").orWhereRaw(s.whereJsonFieldQuery(t,o,"IS",null))};"or"===this.opt.bool?e.orWhere(r):e.where(r)}}]),o}();module.exports={WhereJsonNotObjectPostgresOperation:a};
},{"./postgresJsonApi":"Dw0X","../ObjectionToKnexConvertingOperation":"rMML"}],"Zawf":[function(require,module,exports) {
"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function t(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}function o(r,n){return!n||"object"!==e(n)&&"function"!=typeof n?a(r):n}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&h(e,r)}function h(e,r){return(h=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var l=require("./QueryBuilderOperationSupport"),w=l.QueryBuilderOperationSupport,s=require("../utils/knexUtils"),f=s.isSqlite,v=s.isMsSql,y=require("./operations/KnexOperation"),d=y.KnexOperation,p=require("./operations/select/SelectOperation"),c=p.SelectOperation,g=require("./operations/ReturningOperation"),O=g.ReturningOperation,A=require("./operations/WhereCompositeOperation"),k=A.WhereCompositeOperation,N=require("./operations/jsonApi/WhereJsonPostgresOperation"),W=N.WhereJsonPostgresOperation,m=require("./operations/whereInComposite/WhereInCompositeOperation"),J=m.WhereInCompositeOperation,b=require("./operations/whereInComposite/WhereInCompositeSqliteOperation"),S=b.WhereInCompositeSqliteOperation,I=require("./operations/whereInComposite/WhereInCompositeMsSqlOperation"),x=I.WhereInCompositeMsSqlOperation,B=require("./operations/jsonApi/WhereJsonHasPostgresOperation"),C=B.WhereJsonHasPostgresOperation,H=require("./operations/jsonApi/WhereJsonNotObjectPostgresOperation"),j=H.WhereJsonNotObjectPostgresOperation,R=function(e){function n(){return r(this,n),o(this,i(n).apply(this,arguments))}return u(n,w),t(n,[{key:"modify",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var t=r[0];return t?(1===r.length?t.call(this,this):(r[0]=this,t.apply(void 0,r)),this):this}},{key:"transacting",value:function(e){return this._context.knex=e||null,this}},{key:"select",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new c("select"),r)}},{key:"insert",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("insert"),r)}},{key:"update",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("update"),r)}},{key:"delete",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("delete"),r)}},{key:"del",value:function(){return this.delete.apply(this,arguments)}},{key:"forUpdate",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("forUpdate"),r)}},{key:"forShare",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("forShare"),r)}},{key:"as",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("as"),r)}},{key:"columns",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new c("columns"),r)}},{key:"column",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new c("column"),r)}},{key:"from",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("from"),r)}},{key:"fromJS",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("fromJS"),r)}},{key:"into",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("into"),r)}},{key:"withSchema",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("withSchema"),r)}},{key:"table",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("table"),r)}},{key:"distinct",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new c("distinct"),r)}},{key:"join",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("join"),r)}},{key:"joinRaw",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("joinRaw"),r)}},{key:"innerJoin",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("innerJoin"),r)}},{key:"leftJoin",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("leftJoin"),r)}},{key:"leftOuterJoin",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("leftOuterJoin"),r)}},{key:"rightJoin",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("rightJoin"),r)}},{key:"rightOuterJoin",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("rightOuterJoin"),r)}},{key:"outerJoin",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("outerJoin"),r)}},{key:"fullOuterJoin",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("fullOuterJoin"),r)}},{key:"crossJoin",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("crossJoin"),r)}},{key:"where",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("where"),r)}},{key:"andWhere",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("andWhere"),r)}},{key:"orWhere",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orWhere"),r)}},{key:"whereNot",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("whereNot"),r)}},{key:"orWhereNot",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orWhereNot"),r)}},{key:"whereRaw",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("whereRaw"),r)}},{key:"andWhereRaw",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("andWhereRaw"),r)}},{key:"orWhereRaw",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orWhereRaw"),r)}},{key:"whereWrapped",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("whereWrapped"),r)}},{key:"havingWrapped",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("havingWrapped"),r)}},{key:"whereExists",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("whereExists"),r)}},{key:"orWhereExists",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orWhereExists"),r)}},{key:"whereNotExists",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("whereNotExists"),r)}},{key:"orWhereNotExists",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orWhereNotExists"),r)}},{key:"whereIn",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("whereIn"),r)}},{key:"orWhereIn",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orWhereIn"),r)}},{key:"whereNotIn",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("whereNotIn"),r)}},{key:"orWhereNotIn",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orWhereNotIn"),r)}},{key:"whereNull",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("whereNull"),r)}},{key:"orWhereNull",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orWhereNull"),r)}},{key:"whereNotNull",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("whereNotNull"),r)}},{key:"orWhereNotNull",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orWhereNotNull"),r)}},{key:"whereBetween",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("whereBetween"),r)}},{key:"andWhereBetween",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("andWhereBetween"),r)}},{key:"whereNotBetween",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("whereNotBetween"),r)}},{key:"andWhereNotBetween",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("andWhereNotBetween"),r)}},{key:"orWhereBetween",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orWhereBetween"),r)}},{key:"orWhereNotBetween",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orWhereNotBetween"),r)}},{key:"groupBy",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("groupBy"),r)}},{key:"groupByRaw",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("groupByRaw"),r)}},{key:"orderBy",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orderBy"),r)}},{key:"orderByRaw",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orderByRaw"),r)}},{key:"union",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("union"),r)}},{key:"unionAll",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("unionAll"),r)}},{key:"intersect",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("intersect"),r)}},{key:"having",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("having"),r)}},{key:"clearHaving",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("clearHaving"),r)}},{key:"orHaving",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orHaving"),r)}},{key:"havingIn",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("havingIn"),r)}},{key:"orHavingIn",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("havingIn"),r)}},{key:"havingNotIn",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("havingNotIn"),r)}},{key:"orHavingNotIn",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orHavingNotIn"),r)}},{key:"havingNull",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("havingNull"),r)}},{key:"orHavingNull",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orHavingNull"),r)}},{key:"havingNotNull",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("havingNotNull"),r)}},{key:"orHavingNotNull",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orHavingNotNull"),r)}},{key:"havingExists",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("havingExists"),r)}},{key:"orHavingExists",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orHavingExists"),r)}},{key:"havingNotExists",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("havingNotExists"),r)}},{key:"orHavingNotExists",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orHavingNotExists"),r)}},{key:"havingBetween",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("havingBetween"),r)}},{key:"orHavingBetween",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("havingBetween"),r)}},{key:"havingNotBetween",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("havingNotBetween"),r)}},{key:"orHavingNotBetween",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("havingNotBetween"),r)}},{key:"havingRaw",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("havingRaw"),r)}},{key:"orHavingRaw",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orHavingRaw"),r)}},{key:"offset",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("offset"),r)}},{key:"limit",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("limit"),r)}},{key:"count",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new c("count"),r)}},{key:"countDistinct",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new c("countDistinct"),r)}},{key:"min",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new c("min"),r)}},{key:"max",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new c("max"),r)}},{key:"sum",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new c("sum"),r)}},{key:"sumDistinct",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new c("sumDistinct"),r)}},{key:"avg",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new c("avg"),r)}},{key:"avgDistinct",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new c("avgDistinct"),r)}},{key:"debug",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("debug"),r)}},{key:"returning",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new O("returning"),r)}},{key:"truncate",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("truncate"),r)}},{key:"connection",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("connection"),r)}},{key:"options",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("options"),r)}},{key:"columnInfo",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("columnInfo"),r)}},{key:"off",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("off"),r)}},{key:"timeout",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("timeout"),r)}},{key:"with",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("with"),r)}},{key:"withWrapped",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("withWrapped"),r)}},{key:"withRecursive",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("withRecursive"),r)}},{key:"whereComposite",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new k("whereComposite"),r)}},{key:"whereInComposite",value:function(){var e=null;e=f(this.knex())?new S("whereInComposite"):v(this.knex())?new x("whereInComposite"):new J("whereInComposite");for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return this.addOperation(e,n)}},{key:"whereNotInComposite",value:function(){var e=null;e=f(this.knex())?new S("whereNotInComposite",{prefix:"not"}):v(this.knex())?new x("whereNotInComposite",{prefix:"not"}):new J("whereNotInComposite",{prefix:"not"});for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return this.addOperation(e,n)}},{key:"whereJsonSupersetOf",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new W("whereJsonSupersetOf",{operator:"@>",bool:"and"}),r)}},{key:"orWhereJsonSupersetOf",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new W("orWhereJsonSupersetOf",{operator:"@>",bool:"or"}),r)}},{key:"whereJsonNotSupersetOf",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new W("whereJsonNotSupersetOf",{operator:"@>",bool:"and",prefix:"not"}),r)}},{key:"orWhereJsonNotSupersetOf",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new W("orWhereJsonNotSupersetOf",{operator:"@>",bool:"or",prefix:"not"}),r)}},{key:"whereJsonSubsetOf",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new W("whereJsonSubsetOf",{operator:"<@",bool:"and"}),r)}},{key:"orWhereJsonSubsetOf",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new W("orWhereJsonSubsetOf",{operator:"<@",bool:"or"}),r)}},{key:"whereJsonNotSubsetOf",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new W("whereJsonNotSubsetOf",{operator:"<@",bool:"and",prefix:"not"}),r)}},{key:"orWhereJsonNotSubsetOf",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new W("orWhereJsonNotSubsetOf",{operator:"<@",bool:"or",prefix:"not"}),r)}},{key:"whereJsonNotArray",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new j("whereJsonNotArray",{bool:"and",compareValue:[]}),r)}},{key:"orWhereJsonNotArray",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new j("orWhereJsonNotArray",{bool:"or",compareValue:[]}),r)}},{key:"whereJsonNotObject",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new j("whereJsonNotObject",{bool:"and",compareValue:{}}),r)}},{key:"orWhereJsonNotObject",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new j("orWhereJsonNotObject",{bool:"or",compareValue:{}}),r)}},{key:"whereJsonHasAny",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new C("whereJsonHasAny",{bool:"and",operator:"?|"}),r)}},{key:"orWhereJsonHasAny",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new C("orWhereJsonHasAny",{bool:"or",operator:"?|"}),r)}},{key:"whereJsonHasAll",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new C("whereJsonHasAll",{bool:"and",operator:"?&"}),r)}},{key:"orWhereJsonHasAll",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new C("orWhereJsonHasAll",{bool:"or",operator:"?&"}),r)}},{key:"whereJsonIsArray",value:function(e){return this.whereJsonSupersetOf(e,[])}},{key:"orWhereJsonIsArray",value:function(e){return this.orWhereJsonSupersetOf(e,[])}},{key:"whereJsonIsObject",value:function(e){return this.whereJsonSupersetOf(e,{})}},{key:"orWhereJsonIsObject",value:function(e){return this.orWhereJsonSupersetOf(e,{})}},{key:"whereColumn",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("whereColumn"),r)}},{key:"andWhereColumn",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("andWhereColumn"),r)}},{key:"orWhereColumn",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orWhereColumn"),r)}},{key:"whereNotColumn",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("whereNotColumn"),r)}},{key:"andWhereNotColumn",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("andWhereNotColumn"),r)}},{key:"orWhereNotColumn",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.addOperation(new d("orWhereNotColumn"),r)}}]),n}();Object.defineProperties(R.prototype,{isObjectionQueryBuilderBase:{enumerable:!1,writable:!1,value:!0}}),module.exports={QueryBuilderBase:R};
},{"./QueryBuilderOperationSupport":"qeZX","../utils/knexUtils":"u553","./operations/KnexOperation":"ClAu","./operations/select/SelectOperation":"xBsf","./operations/ReturningOperation":"fXYV","./operations/WhereCompositeOperation":"EnLI","./operations/jsonApi/WhereJsonPostgresOperation":"v6cn","./operations/whereInComposite/WhereInCompositeOperation":"xNfx","./operations/whereInComposite/WhereInCompositeSqliteOperation":"D9YR","./operations/whereInComposite/WhereInCompositeMsSqlOperation":"Bd7I","./operations/jsonApi/WhereJsonHasPostgresOperation":"TweX","./operations/jsonApi/WhereJsonNotObjectPostgresOperation":"lpbA"}],"NmO5":[function(require,module,exports) {
"use strict";function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function e(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}var r=require("../utils/objectUtils"),i=r.asArray,o=Symbol(),u=function(){function t(e){var r=e.builder,u=e.result,a=void 0===u?null:u;n(this,t),Object.defineProperty(this,o,{value:r}),Object.defineProperty(this,"result",{value:i(a)})}return e(t,[{key:"asFindQuery",get:function(){var n=this;return function(){return n[o].toFindQuery().clearWithGraphFetched().runAfter(i)}}},{key:"context",get:function(){return this[o].context()}},{key:"transaction",get:function(){return this[o].unsafeKnex()}},{key:"relation",get:function(){var n=this[o].findOperation(c);return n?a(n):void 0}},{key:"modelOptions",get:function(){var n=this[o].findOperation(f);return n?s(n):void 0}},{key:"items",get:function(){var n=this[o].findOperation(d);return n?i(l(n)):[]}},{key:"inputItems",get:function(){var n=this[o].findOperation(v);return n?i(y(n)):[]}},{key:"cancelQuery",get:function(){var n=this,t=this;return function(e){var r=n[o];void 0===e&&(e=r.isInsert()?t.inputItems:r.isFind()?[]:0),r.resolve(e)}}}],[{key:"create",value:function(n){return new t(n)}}]),t}();function a(n){return n.relation}function c(n){return!!a(n)}function s(n){return n.modelOptions}function f(n){return!!s(n)}function l(n){return n.instance||n.owner&&n.owner.isModels&&n.owner.modelArray}function d(n){return!!l(n)}function y(n){return n.models||n.model}function v(n){return!!y(n)}module.exports={StaticHookArguments:u};
},{"../utils/objectUtils":"WAAQ"}],"WHDH":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?i(e):r}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=require("./QueryBuilderOperation"),a=l.QueryBuilderOperation,s=require("../StaticHookArguments"),p=s.StaticHookArguments,y=require("../../utils/promiseUtils"),b=y.isPromise,d=y.after,h=y.afterReturn,O=require("../../utils/objectUtils"),m=O.isObject,v=function(t){function r(){return e(this,r),o(this,u(r).apply(this,arguments))}return f(r,a),n(r,[{key:"onBefore2",value:function(t,e){return h(j(t),e)}},{key:"onAfter3",value:function(t,e){return t.findOptions().dontCallFindHooks?e:g(t,e)}}]),r}();function j(t){var e=p.create({builder:t});return t.modelClass().beforeFind(e)}function g(t,e){var r=t.findOptions(),n=w(t.context(),e,r.callAfterFindDeeply);return d(n,function(){return $(t,e)})}function $(t,e){var r=p.create({builder:t,result:e}),n=t.modelClass().afterFind(r);return d(n,function(t){return void 0===t?e:t})}function w(t,e,r){return Array.isArray(e)?1===e.length?F(t,e[0],e,r):A(t,e,r):F(t,e,e,r)}function A(t,e,r){if(0===e.length||!m(e[0]))return e;for(var n=new Array(e.length),o=!1,i=0,u=e.length;i<u;++i)n[i]=F(t,e[i],e[i],r),b(n[i])&&(o=!0);return o?Promise.all(n):n}function F(t,e,r,n){if(!m(e)||!e.$isObjectionModel)return r;if(n){var o=[];return P(t,e,o)?Promise.all(o).then(function(){return k(t,e,r)}):k(t,e,r)}return k(t,e,r)}function P(t,e,r){for(var n=Object.keys(e),o=!1,i=0,u=n.length;i<u;++i){var f=e[n[i]];if(S(f)){var c=w(t,f,!0);b(c)&&(o=!0),r.push(c)}}return o}function S(t){return m(t)&&t.$isObjectionModel||_(t)&&t[0].$isObjectionModel}function _(t){return Array.isArray(t)&&t.length>0&&m(t[0])}function k(t,e,r){var n=C(e);if(null!==n){var o=n.call(e,t);return b(o)?o.then(function(){return r}):r}return r}function C(t){return t.$afterFind!==t.$objectionModelClass.prototype.$afterFind?t.$afterFind:t.$afterGet!==t.$objectionModelClass.prototype.$afterGet?t.$afterGet:null}module.exports={FindOperation:v};
},{"./QueryBuilderOperation":"ik4h","../StaticHookArguments":"NmO5","../../utils/promiseUtils":"zF81","../../utils/objectUtils":"WAAQ"}],"PWCn":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?u(t):r}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=require("./QueryBuilderOperation"),s=f.QueryBuilderOperation,l=require("../StaticHookArguments"),p=l.StaticHookArguments,y=function(e){function r(){return t(this,r),o(this,i(r).apply(this,arguments))}return c(r,s),n(r,[{key:"onBefore2",value:function(e,t){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(b(e));case 2:return r.abrupt("return",t);case 3:case"end":return r.stop()}})}},{key:"onBuildKnex",value:function(e){e.delete()}},{key:"onAfter2",value:function(e,t){return d(e,t)}}]),r}();function b(e){return m(e)}function m(e){var t=p.create({builder:e});return e.modelClass().beforeDelete(t)}function d(e,t){return v(e,t)}function v(e,t){var r,n;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return r=p.create({builder:e,result:t}),o.next=3,regeneratorRuntime.awrap(e.modelClass().afterDelete(r));case 3:if(void 0!==(n=o.sent)){o.next=8;break}return o.abrupt("return",t);case 8:return o.abrupt("return",n);case 9:case"end":return o.stop()}})}module.exports={DeleteOperation:y};
},{"./QueryBuilderOperation":"ik4h","../StaticHookArguments":"NmO5"}],"KA5i":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?u(t):r}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=a(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=require("../../queryBuilder/ReferenceBuilder"),p=f.ref,d=require("../../utils/objectUtils"),y=d.isEmpty,m=require("../../utils/knexUtils"),b=m.isKnexRaw,v=m.isKnexQueryBuilder,h=require("./QueryBuilderOperation"),O=h.QueryBuilderOperation,g=require("../StaticHookArguments"),w=g.StaticHookArguments,x=function(e){function r(e,n){var u;return t(this,r),(u=o(this,c(r).call(this,e,n))).model=null,u.modelOptions=Object.assign({},u.opt.modelOptions||{}),u}return s(r,O),n(r,[{key:"onAdd",value:function(e,t){var r=t[0],n=e.modelClass();return this.model=n.ensureModel(r,this.modelOptions),!0}},{key:"onBefore2",value:function(e,t){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(R(e,this.model,this.modelOptions));case 2:return r.abrupt("return",t);case 3:case"end":return r.stop()}},null,this)}},{key:"onBefore3",value:function(e){var t=this.model.$toDatabaseJson(e);y(t)&&e.resolve(0)}},{key:"onBuildKnex",value:function(e,t){var r=this.model.$toDatabaseJson(t),n=this.convertFieldExpressionsToRaw(t,r);e.update(n)}},{key:"onAfter2",value:function(e,t){return _(e,this.model,this.modelOptions,t)}},{key:"convertFieldExpressionsToRaw",value:function(e,t){for(var r=e.knex(),n={},o=0,u=Object.keys(t);o<u.length;o++){var i=u[o],a=t[i];if(i.indexOf(":")>-1){var c=p(i),s="{"+c.parsedExpr.access.map(function(e){return e.ref}).join(",")+"}",l="?";v(a)||b(a)?l="to_jsonb(?)":a=JSON.stringify(a),n[c.column]=r.raw("jsonb_set(??, '".concat(s,"', ").concat(l,", true)"),[n[c.column]||c.column,a]),delete this.model[i]}else n[i]=a}return n}},{key:"clone",value:function(){var e=i(c(r.prototype),"clone",this).call(this);return e.model=this.model,e}}]),r}();function R(e,t,r){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(j(e,t,r));case 2:return n.abrupt("return",k(e));case 3:case"end":return n.stop()}})}function j(e,t,r){return t.$beforeUpdate(r,e.context())}function k(e){var t=w.create({builder:e});return e.modelClass().beforeUpdate(t)}function _(e,t,r,n){return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(S(e,t,r));case 2:return o.abrupt("return",B(e,n));case 3:case"end":return o.stop()}})}function S(e,t,r){return t.$afterUpdate(r,e.context())}function B(e,t){var r,n;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return r=w.create({builder:e,result:t}),o.next=3,regeneratorRuntime.awrap(e.modelClass().afterUpdate(r));case 3:if(void 0!==(n=o.sent)){o.next=8;break}return o.abrupt("return",t);case 8:return o.abrupt("return",n);case 9:case"end":return o.stop()}})}module.exports={UpdateOperation:x};
},{"../../queryBuilder/ReferenceBuilder":"UPD8","../../utils/objectUtils":"WAAQ","../../utils/knexUtils":"u553","./QueryBuilderOperation":"ik4h","../StaticHookArguments":"NmO5"}],"tIYw":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?i(t):r}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=s(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=require("./QueryBuilderOperation"),y=f.QueryBuilderOperation,p=require("../StaticHookArguments"),d=p.StaticHookArguments,h=require("../../utils/promiseUtils"),m=h.after,b=h.mapAfterAllReturn,v=require("../../utils/knexUtils"),g=v.isPostgres,O=v.isSqlite,A=v.isMySql,k=v.isMsSql,w=require("../../utils/objectUtils"),x=w.isObject,S=function(e){function r(e,n){var i;return t(this,r),(i=o(this,l(r).call(this,e,n))).models=null,i.isArray=!1,i.modelOptions=Object.assign({},i.opt.modelOptions||{}),i}return a(r,y),n(r,[{key:"onAdd",value:function(e,t){var r=t[0],n=e.modelClass();return this.isArray=Array.isArray(r),this.models=n.ensureModelArray(r,this.modelOptions),!0}},{key:"onBefore2",value:function(e,t){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(this.models.length>1)||g(e.knex())||k(e.knex())){r.next=4;break}throw new Error("batch insert only works with Postgresql and SQL Server");case 4:return r.next=6,regeneratorRuntime.awrap(j(e,this.models));case 6:return r.abrupt("return",t);case 7:case"end":return r.stop()}},null,this)}},{key:"onBuildKnex",value:function(e,t){O(t.knex())||A(t.knex())||t.has(/returning/)||e.returning(t.modelClass().getIdColumn()),e.insert(this.models.map(function(e){return e.$toDatabaseJson(t)}))}},{key:"onAfter1",value:function(e,t){if(!Array.isArray(t)||!t.length||t===this.models)return this.models;if(x(t[0]))for(var r=0,n=this.models.length;r<n;++r)this.models[r].$set(t[r]);else for(var o=0,i=this.models.length;o<i;++o){var u=this.models[o];u.$id()||u.$id(t[o])}return this.models}},{key:"onAfter2",value:function(e,t){var r=this.isArray?t:t[0]||null;return _(e,this.models,r)}},{key:"clone",value:function(){var e=u(l(r.prototype),"clone",this).call(this);return e.models=this.models,e.isArray=this.isArray,e}}]),r}();function j(e,t){var r=q(e,t);return m(r,function(){return P(e)})}function q(e,t){return b(t,function(t){return t.$beforeInsert(e.context())},t)}function P(e){var t=d.create({builder:e});return e.modelClass().beforeInsert(t)}function _(e,t,r){var n=R(e,t);return m(n,function(){return C(e,r)})}function R(e,t){return b(t,function(t){return t.$afterInsert(e.context())},t)}function C(e,t){var r=d.create({builder:e,result:t}),n=e.modelClass().afterInsert(r);return m(n,function(e){return void 0===e?t:e})}module.exports={InsertOperation:S};
},{"./QueryBuilderOperation":"ik4h","../StaticHookArguments":"NmO5","../../utils/promiseUtils":"zF81","../../utils/knexUtils":"u553","../../utils/objectUtils":"WAAQ"}],"h4He":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?u(e):n}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=c(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=require("./QueryBuilderOperation"),y=p.QueryBuilderOperation,s=function(t){function n(t,r){var u;return e(this,n),(u=o(this,l(n).call(this,t,r))).relation=r.relation,u.owner=r.owner,u.input=null,u.ids=null,u}return f(n,y),r(n,[{key:"clone",value:function(){var t=i(l(n.prototype),"clone",this).call(this);return t.input=this.input,t.ids=this.ids,t}}]),n}();module.exports={RelateOperation:s};
},{"./QueryBuilderOperation":"ik4h"}],"V3CS":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?u(e):r}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=c(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=require("./QueryBuilderOperation"),y=p.QueryBuilderOperation,s=function(t){function r(t,n){var u;return e(this,r),(u=o(this,f(r).call(this,t,n))).relation=n.relation,u.owner=n.owner,u.ids=null,u}return l(r,y),n(r,[{key:"clone",value:function(){var t=i(f(r.prototype),"clone",this).call(this);return t.ids=this.ids,t}}]),r}();module.exports={UnrelateOperation:s};
},{"./QueryBuilderOperation":"ik4h"}],"MFTe":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?i(e):r}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=c(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=require("../QueryBuilderOperation"),p=l.QueryBuilderOperation,y=require("../../RelationExpression"),h=y.RelationExpression,b=function(t){function r(t,n){var i;return e(this,r),(i=o(this,f(r).call(this,t,n))).expression=h.create(),i.modifiersAtPath=[],i.graphOptions=i.opt.defaultGraphOptions,i}return a(r,p),n(r,[{key:"buildFinalExpression",value:function(){var t=this.expression.clone();return this.modifiersAtPath.forEach(function(e,r){var n=d(r);t.expressionsAtPath(e.path).forEach(function(t){t.node.$modify.push(n)})}),t}},{key:"buildFinalModifiers",value:function(t){var e=t.modifiers();return this.modifiersAtPath.forEach(function(t,r){var n=d(r);e[n]=t.modifier}),e}},{key:"cloneFrom",value:function(t){this.expression=t.expression.clone(),this.modifiersAtPath=t.modifiersAtPath.slice(),this.graphOptions=Object.assign({},t.graphOptions)}},{key:"clone",value:function(){var t=u(f(r.prototype),"clone",this).call(this);return t.cloneFrom(this),t}}]),r}();function d(t){return"_f".concat(t,"_")}module.exports={EagerOperation:b};
},{"../QueryBuilderOperation":"ik4h","../../RelationExpression":"qujN"}],"eZO1":[function(require,module,exports) {
"use strict";var r=require("../../model/ValidationError"),o=r.ValidationErrorType,e=63,i=64;function t(r,e,t){if(r.node.$allRecursive||r.maxRecursionDepth>i)throw e.createValidationError({type:o.RelationExpression,message:"recursion depth of eager expression ".concat(r.toString()," too big for JoinEagerAlgorithm")});r.forEachChildExpression(e,t)}module.exports={ID_LENGTH_LIMIT:e,RELATION_RECURSION_LIMIT:i,forEachChildExpression:t};
},{"../../model/ValidationError":"sBi0"}],"Ht6J":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}var r=function(){function t(n){var r=n.tableTree,o=n.modelClass,a=n.expression,i=n.parentNode,l=void 0===i?null:i,s=n.relation,u=void 0===s?null:s;e(this,t),this.tableTree=r,this.modelClass=o,this.parentNode=l,this.relation=u,this.expression=a,this.childNodes=[],this.alias=this._calculateAlias(),this.idGetter=this._createIdGetter()}return n(t,[{key:"getReferenceForColumn",value:function(e){return"".concat(this.alias,".").concat(e)}},{key:"getColumnAliasForColumn",value:function(e){return this.parentNode?"".concat(this.alias).concat(this.options.separator).concat(e):e}},{key:"getColumnForColumnAlias",value:function(e){var t=e.lastIndexOf(this.options.separator);return-1===t?e:e.slice(t+this.options.separator.length)}},{key:"getIdFromFlatRow",value:function(e){return this.idGetter(e)}},{key:"_calculateAlias",value:function(){if(this.parentNode){var e=this.expression.node.$name,t=this.options.aliases[e]||e;return this.options.minimize?"_t".concat(this.tableTree.createNextUid()):this.parentNode.parentNode?"".concat(this.parentNode.alias).concat(this.options.separator).concat(t):t}return this.tableTree.rootTableAlias}},{key:"_createIdGetter",value:function(){var e=this,t=this.modelClass.getIdColumnArray(),n=t.map(function(t){return e.getColumnAliasForColumn(t)});return 1===t.length?o(n):a(n)}},{key:"options",get:function(){return this.tableTree.options}},{key:"relationProperty",get:function(){return this.expression.node.$name}},{key:"joinTableAlias",get:function(){return this.modelClass.joinTableAlias(this.alias)}}],[{key:"create",value:function(e){var n=new t(e);return n.parentNode&&n.parentNode.childNodes.push(n),n}}]),t}();function o(e){var t=e[0];return function(e){var n=e[t];return null===n?null:"".concat(n)}}function a(e){return 2===e.length?i(e):l(e)}function i(e){var t=e[0],n=e[1];return function(e){var r=e[t],o=e[n];return null===r||null===o?null:"".concat(r,",").concat(o)}}function l(e){return function(t){for(var n="",r=0,o=e.length;r<o;++r){var a=t[e[r]];if(null===a)return null;n+=a,r!==o-1&&(n+=",")}return n}}module.exports={TableNode:r};
},{}],"qCWv":[function(require,module,exports) {
"use strict";function e(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function o(e,o){for(var s=0;s<o.length;s++){var t=o[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function s(e,s,t){return s&&o(e.prototype,s),t&&o(e,t),e}var t=require("./utils"),r=t.forEachChildExpression,a=require("./TableNode"),n=a.TableNode,i=function(){function o(s){var t=s.expression,r=s.rootModelClass,a=s.rootTableAlias,n=s.options;e(this,o),this.options=n,this.rootModelClass=r,this.rootTableAlias=a,this.nodes=[],this.nodesByAlias=new Map,this.uidCounter=0,this._createNodes({expression:t,modelClass:r})}return s(o,[{key:"getNodeForColumnAlias",value:function(e){var o=e.lastIndexOf(this.options.separator);if(-1===o)return this.rootNode;var s=e.slice(0,o);return this.nodesByAlias.get(s)}},{key:"createNextUid",value:function(){return this.uidCounter++}},{key:"_createNodes",value:function(e){var o=e.expression,s=e.modelClass,t=this._createRootNode({expression:o,modelClass:s});this._createChildNodes({expression:o,modelClass:s,parentNode:t});var r=!0,a=!1,n=void 0;try{for(var i,l=this.nodes[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var d=i.value;this.nodesByAlias.set(d.alias,d)}}catch(u){a=!0,n=u}finally{try{r||null==l.return||l.return()}finally{if(a)throw n}}}},{key:"_createRootNode",value:function(e){var o=e.expression,s=e.modelClass,t=n.create({tableTree:this,modelClass:s,expression:o});return this.nodes.push(t),t}},{key:"_createChildNodes",value:function(e){var o=this,s=e.expression,t=e.modelClass,a=e.parentNode;r(s,t,function(e,s){var t=n.create({tableTree:o,modelClass:s.relatedModelClass,expression:e,parentNode:a,relation:s});o.nodes.push(t),o._createChildNodes({expression:e,modelClass:s.relatedModelClass,parentNode:t})})}},{key:"rootNode",get:function(){return this.nodes[0]}}],[{key:"create",value:function(e){return new o(e)}}]),o}();module.exports={TableTree:i};
},{"./utils":"eZO1","./TableNode":"Ht6J"}],"YvM1":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}var o=function(){function n(t){var o=t.columnAlias,a=t.tableNode,l=t.name;e(this,n),this.columnAlias=o,this.tableNode=a,this.name=l}return t(n,null,[{key:"create",value:function(e){var t=e.tableTree,o=e.columnAlias,a=t.getNodeForColumnAlias(o);return new n({columnAlias:o,tableNode:a,name:a.getColumnForColumnAlias(o)})}}]),n}();module.exports={JoinResultColumn:o};
},{}],"Ihs5":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}var n=require("./JoinResultColumn"),o=n.JoinResultColumn,a=require("../../utils/objectUtils"),l=a.groupBy,i=function(){function t(r){var n=r.tableTree,o=r.omitColumnAliases,a=void 0===o?[]:o;e(this,t),this.tableTree=n,this.omitColumnAliases=new Set(a),this.columnsByTableNode=null,this.parentMap=null,this.rootModels=null}return r(t,[{key:"parse",value:function(e){if(!Array.isArray(e)||0===e.length)return e;this.columnsByTableNode=this._createColumns(e[0]),this.parentMap=new Map,this.rootModels=[];var t=!0,r=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;this._parseNode(this.tableTree.rootNode,l)}}catch(i){r=!0,n=i}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return this.rootModels}},{key:"_parseNode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.getIdFromFlatRow(t);if(null!==o){var a=s(n,o,e),l=this.parentMap.get(a);l||(l=this._createModel(e,t),this._addToParent(e,l,r),this.parentMap.set(a,l));var i=!0,u=!1,c=void 0;try{for(var y,f=e.childNodes[Symbol.iterator]();!(i=(y=f.next()).done);i=!0){var h=y.value;this._parseNode(h,t,l,a)}}catch(d){u=!0,c=d}finally{try{i||null==f.return||f.return()}finally{if(u)throw c}}}}},{key:"_createModel",value:function(e,t){var r={},n=this.columnsByTableNode.get(e);if(n){var o=!0,a=!1,l=void 0;try{for(var i,u=n[Symbol.iterator]();!(o=(i=u.next()).done);o=!0){var s=i.value;this.omitColumnAliases.has(s.columnAlias)||(r[s.name]=t[s.columnAlias])}}catch(p){a=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}var c=e.modelClass.fromDatabaseJson(r),y=!0,f=!1,h=void 0;try{for(var d,v=e.childNodes[Symbol.iterator]();!(y=(d=v.next()).done);y=!0){var m=d.value;m.relation.isOneToOne()?c[m.relationProperty]=null:c[m.relationProperty]=[]}}catch(p){f=!0,h=p}finally{try{y||null==v.return||v.return()}finally{if(f)throw h}}return c}},{key:"_addToParent",value:function(e,t,r){e.parentNode?e.relation.isOneToOne()?r[e.relationProperty]=t:r[e.relationProperty].push(t):this.rootModels.push(t)}},{key:"_createColumns",value:function(e){var t=this,r=Object.keys(e).map(function(e){return o.create({tableTree:t.tableTree,columnAlias:e})});return l(r,u)}}],[{key:"create",value:function(e){return new t(e)}}]),t}();function u(e){return e.tableNode}function s(e,t,r){return null!==e?"".concat(e,"/").concat(r.relationProperty,"/").concat(t):"/".concat(t)}module.exports={JoinResultParser:i};
},{"./JoinResultColumn":"YvM1","../../utils/objectUtils":"WAAQ"}],"yMls":[function(require,module,exports) {
"use strict";function e(e){return n(e)||r(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function n(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var a=require("../../utils/objectUtils"),s=a.uniqBy,u=require("../operations/select/Selection"),c=u.Selection,d=require("../../utils/createModifier"),f=d.createModifier,b=require("../../utils/promiseUtils"),m=b.map,h=require("../../model/ValidationError"),y=h.ValidationErrorType,v=require("./TableTree"),p=v.TableTree,N=require("./JoinResultParser"),S=N.JoinResultParser,T=require("./utils"),C=T.ID_LENGTH_LIMIT,g=function(){function e(t){var r=t.modelClass;o(this,e),this.rootModelClass=r,this.expression=null,this.modifiers=null,this.options=w(),this.tableTree=null,this.internalSelections=null}return l(e,[{key:"setExpression",value:function(e){return this.expression||(this.expression=e),this}},{key:"setModifiers",value:function(e){return this.modifiers||(this.modifiers=e),this}},{key:"setOptions",value:function(e){return this.options=Object.assign(this.options,e),this}},{key:"fetchColumnInfo",value:function(e){var t=this._getTableTree(e),r=new Set(t.nodes.map(function(e){return e.modelClass}));return m(Array.from(r),function(t){return t.fetchTableMetadata({parentBuilder:e})},{concurrency:this.rootModelClass.getConcurrency(e.unsafeKnex())})}},{key:"build",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._getTableTree(e).rootNode,n=new Map([[r,e]]),o=!0,i=!1,l=void 0;try{for(var a,s=r.childNodes[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var u=a.value;this._buildJoinsForNode({builder:e,tableNode:u,userSelectQueries:n})}}catch(c){i=!0,l=c}finally{try{o||null==s.return||s.return()}finally{if(i)throw l}}t&&this._buildSelects({builder:e,tableNode:r,userSelectQueries:n})}},{key:"parseResult",value:function(e,t){return S.create({tableTree:this._getTableTree(e),omitColumnAliases:this.internalSelections.map(function(e){return e.alias})}).parse(t)}},{key:"_getTableTree",value:function(e){return this.tableTree||(this.tableTree=p.create({rootModelClass:this.rootModelClass,rootTableAlias:e.tableRef(),expression:this.expression,options:this.options})),this.tableTree}},{key:"_buildJoinsForNode",value:function(e){var t=e.builder,r=e.tableNode,n=e.userSelectQueries,o=A({builder:t,tableNode:r,modifiers:this.modifiers}),i=o.clone();i.modify(r.relation.modify),n.set(r,i),r.relation.join(t,{joinOperation:this.options.joinOperation,ownerTable:r.parentNode.alias,relatedTableAlias:r.alias,joinTableAlias:r.joinTableAlias,relatedJoinSelectQuery:x({builder:o,tableNode:r})});var l=!0,a=!1,s=void 0;try{for(var u,c=r.childNodes[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var d=u.value;this._buildJoinsForNode({builder:t,tableNode:d,userSelectQueries:n})}}catch(f){a=!0,s=f}finally{try{l||null==c.return||c.return()}finally{if(a)throw s}}}},{key:"_buildSelects",value:function(e){var t=e.builder,r=e.tableNode,n=j({builder:t,tableNode:r,userSelectQueries:e.userSelectQueries}),o=n.selections,i=n.internalSelections,l=!0,a=!1,s=void 0;try{for(var u,c=o[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var d=u.value;J(r.modelClass,d.name)}}catch(f){a=!0,s=f}finally{try{l||null==c.return||c.return()}finally{if(a)throw s}}this.internalSelections=i,t.select(Q(o))}}]),e}();function w(){return{joinOperation:"leftJoin",minimize:!1,separator:":",aliases:{}}}function A(e){var t=e.builder,r=e.tableNode,n=e.modifiers,o=r.relation,i=r.expression,l=r.modelClass,a=l.query().childQueryOf(t),s=!0,u=!1,c=void 0;try{for(var d,b=i.node.$modify[Symbol.iterator]();!(s=(d=b.next()).done);s=!0){var m=d.value,h=f({modifier:m,modelClass:l,modifiers:n});try{h(a)}catch(v){throw v instanceof l.ModifierNotFoundError?l.createValidationError({type:y.RelationExpression,message:'could not find modifier "'.concat(m,'" for relation "').concat(o.name,'"')}):v}}}catch(v){u=!0,c=v}finally{try{s||null==b.return||b.return()}finally{if(u)throw c}}return a}function x(t){var r=t.builder,n=t.tableNode,o=r.tableRef(),i=[].concat(e(r.modelClass().getIdColumnArray()),e(n.relation.relatedProp.cols),e(n.childNodes.reduce(function(t,r){return[].concat(e(t),e(r.relation.ownerProp.cols))},[]))),l=s(i).filter(function(e){return!r.hasSelectionAs(e,e)}).map(function(e){return"".concat(o,".").concat(e)});return r.select(l)}function j(e){var t=e.builder,r=e.tableNode,n=e.userSelectQueries,o=n.get(r),i=o.findAllSelections(),l=F(i),a=[],s=[];if(r.parentNode&&(a=M({userSelections:i,tableNode:r}),l&&r.relation.isObjectionManyToManyRelation)){var u=E({tableNode:r});a=a.concat(u)}if(l){a=k({builder:t,tableNode:r}).concat(a)}else{var c=q({tableNode:r}),d=!0,f=!1,b=void 0;try{for(var m,h=c[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){var y=m.value;o.hasSelectionAs(y.column,y.column)||(a.push(y),s.push(y))}}catch(g){f=!0,b=g}finally{try{d||null==h.return||h.return()}finally{if(f)throw b}}}var v=!0,p=!1,N=void 0;try{for(var S,T=r.childNodes[Symbol.iterator]();!(v=(S=T.next()).done);v=!0){var C=j({builder:t,tableNode:S.value,userSelectQueries:n});a=a.concat(C.selections),s=s.concat(C.internalSelections)}}catch(g){p=!0,N=g}finally{try{v||null==T.return||T.return()}finally{if(p)throw N}}return{selections:a,internalSelections:s}}function M(e){var t=e.userSelections,r=e.tableNode;return t.filter(O).map(function(e){return new c(r.alias,e.name,r.getColumnAliasForColumn(e.name))})}function E(e){var t=e.tableNode;return t.relation.joinTableExtras.map(function(e){return new c(t.joinTableAlias,e.joinTableCol,t.getColumnAliasForColumn(e.aliasCol))})}function k(e){var t=e.builder,r=e.tableNode,n=t.tableNameFor(r.modelClass),o=r.modelClass.tableMetadata({table:n});if(!o)throw new Error("table metadata has not been fetched. Are you trying to call toKnexQuery() for a withGraphJoined query? To make sure the table metadata is fetched see the objection.initialize function.");return o.columns.map(function(e){return new c(r.alias,e,r.getColumnAliasForColumn(e))})}function q(e){var t=e.tableNode;return t.modelClass.getIdColumnArray().map(function(e){return new c(t.alias,e,t.getColumnAliasForColumn(e))})}function Q(e){return e.map(function(e){var t="".concat(e.table,".").concat(e.column);return"".concat(t," as ").concat(e.alias)})}function _(e){return"*"===e.column}function O(e){return"*"!==e.column}function F(e){return 0===e.length||e.some(_)}function J(e,t){if(t.length>C)throw e.createValidationError({type:y.RelationExpression,message:"identifier ".concat(t," is over ").concat(C," characters long and would be truncated by the database engine.")})}module.exports={RelationJoiner:g};
},{"../../utils/objectUtils":"WAAQ","../operations/select/Selection":"u0K8","../../utils/createModifier":"vVPf","../../utils/promiseUtils":"zF81","../../model/ValidationError":"sBi0","./TableTree":"qCWv","./JoinResultParser":"Ihs5","./utils":"eZO1"}],"ZliC":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}function r(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?i(t):n}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=l(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=require("./EagerOperation"),p=a.EagerOperation,y=require("../../join/RelationJoiner"),b=y.RelationJoiner,h=function(e){function n(e,o){var i;return t(this,n),(i=r(this,s(n).call(this,e,o))).joiner=null,i}return f(n,p),o(n,[{key:"onAdd",value:function(e){return e.findOptions({callAfterFindDeeply:!0}),this.joiner=new b({modelClass:e.modelClass()}),!0}},{key:"onBefore3",value:function(e){return this.joiner.setExpression(this.buildFinalExpression()).setModifiers(this.buildFinalModifiers(e)).setOptions(this.graphOptions).fetchColumnInfo(e)}},{key:"onBuild",value:function(e){this.joiner.setExpression(this.buildFinalExpression()).setModifiers(this.buildFinalModifiers(e)).setOptions(this.graphOptions).build(e)}},{key:"onRawResult",value:function(e,t){return this.joiner.parseResult(e,t)}},{key:"clone",value:function(){var e=u(s(n.prototype),"clone",this).call(this);return e.joiner=this.joiner,e}}]),n}();module.exports={JoinEagerOperation:h};
},{"./EagerOperation":"MFTe","../../join/RelationJoiner":"yMls"}],"hD5B":[function(require,module,exports) {
"use strict";var r=require("../utils/objectUtils"),e=r.isObject;function t(r,t,s){var f;if(s=s||{},t.size>1)if(Array.isArray(r))if(Array.isArray(r[0])){f=new Array(r.length);for(var l=0,c=r.length;l<c;++l)f[l]=i(r[l],t)}else if(e(r[0])){f=new Array(r.length);for(var y=0,h=r.length;y<h;++y)f[y]=n(r[y],t)}else f=[i(r,t)];else{if(!e(r))throw new Error("invalid composite key ".concat(JSON.stringify(r)));f=[r]}else if(Array.isArray(r))if(e(r[0])){f=new Array(r.length);for(var g=0,v=r.length;g<v;++g)f[g]=n(r[g])}else{f=new Array(r.length);for(var p=0,u=r.length;p<u;++p)f[p]={},t.setProp(f[p],0,r[p])}else if(e(r))f=[r];else{var w={};t.setProp(w,0,r),f=[w]}return o(f,t),s.arrayOutput?a(f,t):f}function i(r,e){if(!Array.isArray(r))throw new Error("invalid composite key ".concat(JSON.stringify(r)));if(r.length!=e.size)throw new Error("composite identifier ".concat(JSON.stringify(r)," should have ").concat(e.size," values"));for(var t={},i=0;i<r.length;++i)e.setProp(t,i,r[i]);return t}function n(r){if(e(r))return r;throw new Error("invalid composite key ".concat(JSON.stringify(r)))}function o(r,e){for(var t=0,i=r.length;t<i;++t)for(var n=r[t],o=0,a=e.size;o<a;++o){if(void 0===e.getProp(n,o))throw new Error("expected id ".concat(JSON.stringify(n)," to have property ").concat(e.propDescription(o)))}}function a(r,e){for(var t=new Array(r.length),i=0,n=r.length;i<n;++i)t[i]=e.getProps(r[i]);return t}module.exports={normalizeIds:t};
},{"../utils/objectUtils":"WAAQ"}],"hvdF":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var n=require("../utils/objectUtils"),i=n.isObject,u=n.asArray,o=n.asSingle,s=n.uniqBy,l=require("../utils/normalizeIds"),f=l.normalizeIds,a={Models:"Models",Reference:"Reference",QueryBuilder:"QueryBuilder",Identifiers:"Identifiers"},c=function(){function r(t){e(this,r),this.owner=t,this.type=y(t)}return t(r,[{key:"buildFindQuery",value:function(e,r,t){var n=this;if(this.isReference)t.forEach(function(r,t){e.where(r,n.reference[t])});else if(this.isModels||this.isIdentifiers||this.isQueryBuilder){var i=this.getProps(r);i?e.whereInComposite(t,i):e.resolve([])}else e.resolve([]);return e}},{key:"getProps",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.ownerProp;return this.isModels?this._getPropsFromModels(r):this.isIdentifiers?this._getPropsFromIdentifiers(e,r):this.isQueryBuilder?this._getPropsFromQuery(e,r):void 0}},{key:"getSplitProps",value:function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.ownerProp,n=this.getProps(r,r.ownerProp);return v(n)?1===t.size?[[n]]:[Array.from({length:t.size}).map(function(r,i){return n.clone().clearSelect().select(t.ref(e,i))})]:n}},{key:"getNormalizedIdentifiers",value:function(e){return f(this.identifiers,e,{arrayOutput:!0})}},{key:"_getPropsFromModels",value:function(e){var r=this.modelArray.map(function(r){return e.getProps(r)});return k(r)?s(r,w):null}},{key:"_getPropsFromIdentifiers",value:function(e,r){var t=this.getNormalizedIdentifiers(r);if(P(r))return t;var n=e.ownerModelClass.query();return n.findByIds(t),n.select(r.refs(n)),n}},{key:"_getPropsFromQuery",value:function(e,r){var t=this.queryBuilder.clone();return I(t,e)&&(t.clearSelect(),t.select(r.refs(t))),t}},{key:"isModels",get:function(){return this.type===a.Models}},{key:"isReference",get:function(){return this.type===a.Reference}},{key:"isQueryBuilder",get:function(){return this.type===a.QueryBuilder}},{key:"isIdentifiers",get:function(){return this.type===a.Identifiers}},{key:"modelArray",get:function(){return u(this.owner)}},{key:"model",get:function(){return o(this.owner)}},{key:"reference",get:function(){return this.owner}},{key:"queryBuilder",get:function(){return this.owner}},{key:"identifiers",get:function(){return this.owner}}],[{key:"create",value:function(e){return new r(e)}},{key:"createParentReference",value:function(e,r){return this.create(r.ownerProp.refs(m(e)))}}]),r}();function y(e){return d(e)||h(e)?a.Models:g(e)?a.Reference:v(e)?a.QueryBuilder:a.Identifiers}function d(e){return i(e)&&!!e.$isObjectionModel}function h(e){return Array.isArray(e)&&d(e[0])}function p(e){return i(e)&&!!e.isObjectionReferenceBuilder}function g(e){return Array.isArray(e)&&p(e[0])}function v(e){return i(e)&&!!e.isObjectionQueryBuilder}function m(e){for(e=e.parentQuery();e.isPartial()&&e.parentQuery();)e=e.parentQuery();return e}function k(e){for(var r=0,t=e.length;r<t;++r){var n=e[r];if(Array.isArray(n)){if(k(n))return!0}else if(null!=n)return!0}return!1}function w(e){return e.join(",")}function P(e){return e.modelClass.getIdRelationProperty().props.every(function(r,t){return r===e.props[t]})}function I(e,r){return e.modelClass().getTableName()===r.ownerModelClass.getTableName()}module.exports={RelationOwner:c};
},{"../utils/objectUtils":"WAAQ","../utils/normalizeIds":"hD5B"}],"jy4I":[function(require,module,exports) {
"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function t(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}function o(r,t){return!t||"object"!==e(t)&&"function"!=typeof t?i(r):t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,r,t){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,r,t){var n=l(e,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(t):o.value}})(e,r,t||e)}function l(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&null!==(e=u(e)););return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&c(e,r)}function c(e,r){return(c=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var f=require("../../../utils/promiseUtils"),p=require("./EagerOperation"),h=p.EagerOperation,y=require("../../../utils/knexUtils"),d=y.isMsSql,v=y.isOracle,m=y.isSqlite,b=require("../../../utils/objectUtils"),g=b.asArray,w=b.flatten,O=b.chunk,x=require("../../../model/ValidationError"),k=x.ValidationErrorType,S=require("../../../utils/createModifier"),E=S.createModifier,R=require("../../../model/RelationDoesNotExistError"),P=R.RelationDoesNotExistError,F=require("../../../relations/RelationOwner"),C=F.RelationOwner,q=function(e){function t(e,n){var i;return r(this,t),(i=o(this,u(t).call(this,e,n))).relationsToFetch=[],i.omitProps=[],i}return s(t,h),n(t,[{key:"batchSize",value:function(e){return this.graphOptions.maxBatchSize?this.graphOptions.maxBatchSize:d(e)?2e3:v(e)?1e3:m(e)?999:1e4}},{key:"onBuild",value:function(e){var r=M(e.modelClass(),this.buildFinalExpression()),t=T(e,r),n=t.selectionsToAdd,o=t.selectedProps;n.length&&e.select(n),this.relationsToFetch=r,this.omitProps=o}},{key:"onAfter2",value:function(e,r){var t,n,o,i,a,l,u,s,c=this;return regeneratorRuntime.async(function(p){for(;;)switch(p.prev=p.next){case 0:if(t=e.resultModelClass(),r){p.next=3;break}return p.abrupt("return",r);case 3:if((n=g(r)).length&&n[0]instanceof t){p.next=6;break}return p.abrupt("return",r);case 6:return p.next=8,regeneratorRuntime.awrap(f.map(this.relationsToFetch,function(r){return c.fetchRelation(e,n,r.relation,r.childExpression)},{concurrency:t.getConcurrency(e.unsafeKnex())}));case 8:if(o=e.internalOptions(),this.omitProps.length&&!o.keepImplicitJoinProps){p.next=11;break}return p.abrupt("return",r);case 11:for(i=0,a=r.length;i<a;++i)for(l=r[i],u=0,s=this.omitProps.length;u<s;++u)t.omitImpl(l,this.omitProps[u]);return p.abrupt("return",r);case 13:case"end":return p.stop()}},null,this)}},{key:"fetchRelation",value:function(e,r,t,n){var o,i,a,l,u=this;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:return o=e.resultModelClass(),i=this.batchSize(e.knex()),a=O(r,i),s.next=5,regeneratorRuntime.awrap(f.map(a,function(r){return u.fetchRelationBatch(e,r,t,n)},{concurrency:o.getConcurrency(e.unsafeKnex())}));case 5:return l=s.sent,s.abrupt("return",w(l));case 7:case"end":return s.stop()}},null,this)}},{key:"fetchRelationBatch",value:function(e,r,t,n){if(this.shouldSkipFetched(r,n))return this.createSkippedQuery(e,r,t,n);var o=this.createRelationQuery(e,t,n),i=t.find(o,C.create(r));i.alwaysReturnArray=!0,i.assignResultToOwner=!0,i.relationProperty=n.node.$name,o.addOperation(i,[]);var a=!0,l=!1,u=void 0;try{for(var s,c=n.node.$modify[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var f=s.value,p=E({modifier:f,modelClass:t.relatedModelClass,modifiers:this.buildFinalModifiers(e)});try{p(o)}catch(y){var h=e.modelClass();throw y instanceof h.ModifierNotFoundError?h.createValidationError({type:k.RelationExpression,message:'could not find modifier "'.concat(f,'" for relation "').concat(t.name,'"')}):y}}}catch(y){l=!0,u=y}finally{try{a||null==c.return||c.return()}finally{if(l)throw u}}return o}},{key:"shouldSkipFetched",value:function(e,r){if(!this.graphOptions.skipFetched)return!1;if(e.some(function(e){return void 0===e[r.node.$name]}))return!1;var t=M(e[0].constructor,r),n=j(e,r),o=!0,i=!1,a=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0)for(var s=l.value.relation.ownerProp,c=0,f=s.size;c<f;++c){var p=s.props[c],h=!0,y=!1,d=void 0;try{for(var v,m=n[Symbol.iterator]();!(h=(v=m.next()).done);h=!0){var b=v.value;if(null===b[p]||void 0===b[p])return!1}}catch(g){y=!0,d=g}finally{try{h||null==m.return||m.return()}finally{if(y)throw d}}}}catch(g){i=!0,a=g}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}return!0}},{key:"createSkippedQuery",value:function(e,r,t,n){var o=j(r,n);return t.relatedModelClass.query().childQueryOf(e).findOptions({dontCallFindHooks:!0}).withGraphFetched(n,this.graphOptions).resolve(o)}},{key:"createRelationQuery",value:function(e,r,t){return r.relatedModelClass.query().childQueryOf(e).withGraphFetched(t,this.graphOptions).modifiers(this.buildFinalModifiers(e))}},{key:"clone",value:function(){var e=a(u(t.prototype),"clone",this).call(this);return e.relationsToFetch=this.relationsToFetch.slice(),e.omitProps=this.omitProps.slice(),e}}]),t}();function M(e,r){var t=[];try{r.forEachChildExpression(e,function(e,r){t.push({childExpression:e,relation:r})})}catch(n){if(n instanceof P)throw e.createValidationError({type:k.RelationExpression,message:'unknown relation "'.concat(n.relationName,'" in an eager expression')});throw n}return t}function T(e,r){var t=[],n=[],o=!0,i=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0)for(var s=l.value.relation.ownerProp,c=0,f=s.size;c<f;++c){var p=s.ref(e,c).fullColumn(e),h=s.props[c],y=s.cols[c];e.hasSelectionAs(p,y)||-1!==t.indexOf(p)||(n.push(h),t.push(p))}}catch(d){i=!0,a=d}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}return{selectionsToAdd:t,selectedProps:n}}function j(e,r){var t=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=a.value[r.node.$name];if(u)if(Array.isArray(u)){var s=!0,c=!1,f=void 0;try{for(var p,h=u[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var y=p.value;t.push(y)}}catch(d){c=!0,f=d}finally{try{s||null==h.return||h.return()}finally{if(c)throw f}}}else t.push(u)}}catch(d){o=!0,i=d}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return t}module.exports={WhereInEagerOperation:q};
},{"../../../utils/promiseUtils":"zF81","./EagerOperation":"MFTe","../../../utils/knexUtils":"u553","../../../utils/objectUtils":"WAAQ","../../../model/ValidationError":"sBi0","../../../utils/createModifier":"vVPf","../../../model/RelationDoesNotExistError":"D6rR","../../../relations/RelationOwner":"hvdF"}],"kKc6":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?u(e):n}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=require("./WhereInEagerOperation"),p=a.WhereInEagerOperation,l=function(t){function n(){return e(this,n),o(this,i(n).apply(this,arguments))}return c(n,p),r(n,[{key:"batchSize",value:function(){return 1}}]),n}();module.exports={NaiveEagerOperation:l};
},{"./WhereInEagerOperation":"jy4I"}],"jzpj":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?u(t):n}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=a(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=require("./QueryBuilderOperation"),y=c.QueryBuilderOperation,h=function(e){function n(e,r){var u;return t(this,n),(u=o(this,l(n).call(this,e,r))).delegate=r.delegate,u}return f(n,y),r(n,[{key:"is",value:function(e){return i(l(n.prototype),"is",this).call(this,e)||this.delegate.is(e)}},{key:"onAdd",value:function(e,t){return this.delegate.onAdd(e,t)}},{key:"onBefore1",value:function(e,t){return this.delegate.onBefore1(e,t)}},{key:"hasOnBefore1",value:function(){return this.onBefore1!==n.prototype.onBefore1||this.delegate.hasOnBefore1()}},{key:"onBefore2",value:function(e,t){return this.delegate.onBefore2(e,t)}},{key:"hasOnBefore2",value:function(){return this.onBefore2!==n.prototype.onBefore2||this.delegate.hasOnBefore2()}},{key:"onBefore3",value:function(e,t){return this.delegate.onBefore3(e,t)}},{key:"hasOnBefore3",value:function(){return this.onBefore3!==n.prototype.onBefore3||this.delegate.hasOnBefore3()}},{key:"onBuild",value:function(e){return this.delegate.onBuild(e)}},{key:"hasOnBuild",value:function(){return this.onBuild!==n.prototype.onBuild||this.delegate.hasOnBuild()}},{key:"onBuildKnex",value:function(e,t){return this.delegate.onBuildKnex(e,t)}},{key:"hasOnBuildKnex",value:function(){return this.onBuildKnex!==n.prototype.onBuildKnex||this.delegate.hasOnBuildKnex()}},{key:"onRawResult",value:function(e,t){return this.delegate.onRawResult(e,t)}},{key:"hasOnRawResult",value:function(){return this.onRawResult!==n.prototype.onRawResult||this.delegate.hasOnRawResult()}},{key:"onAfter1",value:function(e,t){return this.delegate.onAfter1(e,t)}},{key:"hasOnAfter1",value:function(){return this.onAfter1!==n.prototype.onAfter1||this.delegate.hasOnAfter1()}},{key:"onAfter2",value:function(e,t){return this.delegate.onAfter2(e,t)}},{key:"hasOnAfter2",value:function(){return this.onAfter2!==n.prototype.onAfter2||this.delegate.hasOnAfter2()}},{key:"onAfter3",value:function(e,t){return this.delegate.onAfter3(e,t)}},{key:"hasOnAfter3",value:function(){return this.onAfter3!==n.prototype.onAfter3||this.delegate.hasOnAfter3()}},{key:"queryExecutor",value:function(e){return this.delegate.queryExecutor(e)}},{key:"hasQueryExecutor",value:function(){return this.queryExecutor!==n.prototype.queryExecutor||this.delegate.hasQueryExecutor()}},{key:"onError",value:function(e,t){return this.delegate.onError(e,t)}},{key:"hasOnError",value:function(){return this.onError!==n.prototype.onError||this.delegate.hasOnError()}},{key:"clone",value:function(){var e=i(l(n.prototype),"clone",this).call(this);return e.delegate=this.delegate&&this.delegate.clone(),e}}]),n}();module.exports={DelegateOperation:h};
},{"./QueryBuilderOperation":"ik4h"}],"kxfD":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}var r={Relation:"Relation",Reference:"Reference"},o={Object:"Object",Property:"Property"},i=function(){function t(n,r,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;e(this,t),this.type=n,this.ownerNode=r,this.relatedNode=o,this.relation=i,this.relationIndex=l,this.refType=null,this.refMatch=null,this.refOwnerDataPath=null,this.refRelatedDataPath=null}return n(t,[{key:"getOtherNode",value:function(e){return this.isOwnerNode(e)?this.relatedNode:this.ownerNode}},{key:"isOwnerNode",value:function(e){return e===this.ownerNode}},{key:"isRelatedNode",value:function(e){return e===this.relatedNode}}],[{key:"Type",get:function(){return r}},{key:"ReferenceType",get:function(){return o}}]),t}();module.exports={ModelGraphEdge:i};
},{}],"jkuJ":[function(require,module,exports) {
"use strict";function e(e){return r(e)||n(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function r(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var h=require("./ModelGraphEdge"),s=h.ModelGraphEdge,l=require("../../utils/objectUtils"),u=l.isNumber,d={},c=function(){function t(e,n){a(this,t),this.modelClass=e,this.obj=n,this.edges=[],this.userData={},this.hasId=n.$hasId(),this.uid=n[e.uidProp],this.refEdges=[],this.parentEdge=null,this._relationPath=d,this._relationPathKey=d,this._dataPath=d,this._dataPathKey=d,this._idPath=d,this._idPathKey=d}return o(t,[{key:"removeEdge",value:function(e){if(e===this.parentEdge)throw new Error("cannot remove parent edge");this.edges=this.edges.filter(function(t){return t!==e}),this.refEdges=this.refEdges.filter(function(t){return t!==e})}},{key:"_collectDescendantRelationNodes",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=this.edges[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;o.type===s.Type.Relation&&o.isOwnerNode(this)&&(e.push(o.relatedNode),o.relatedNode._collectDescendantRelationNodes(e))}}catch(h){n=!0,r=h}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"_createRelationPath",value:function(){return null===this.parentNode?[]:[].concat(e(this.parentNode.relationPath),[this.relationName])}},{key:"_createRelationPathKey",value:function(){return this.relationPath.join(".")}},{key:"_createDataPath",value:function(){return null===this.parentEdge?[]:this.parentEdge.relation.isOneToOne()?[].concat(e(this.parentNode.dataPath),[this.relationName]):[].concat(e(this.parentNode.dataPath),[this.relationName,this.indexInRelation])}},{key:"_createDataPathKey",value:function(){var e=this.dataPath.reduce(function(e,t){return u(t)?"".concat(e,"[").concat(t,"]"):e?"".concat(e,".").concat(t):t},"");return e?"."+e:e}},{key:"_createIdPath",value:function(){if(!this.obj.$hasId())return null;if(null===this.parentEdge)return[this.obj.$idKey()];var t=this.parentNode.idPath;return null===t?null:[].concat(e(t),[this.relationName,this.obj.$idKey()])}},{key:"_createIdPathKey",value:function(){return this.idPath?this.idPath.join("."):null}},{key:"isReference",get:function(){return void 0!==this.reference}},{key:"isDbReference",get:function(){return void 0!==this.dbReference}},{key:"reference",get:function(){return this.obj[this.modelClass.uidRefProp]}},{key:"dbReference",get:function(){return this.obj[this.modelClass.dbRefProp]}},{key:"parentNode",get:function(){return this.parentEdge?this.parentEdge.ownerNode:null}},{key:"indexInRelation",get:function(){return this.parentEdge?this.parentEdge.relationIndex:null}},{key:"relationName",get:function(){return this.parentEdge?this.parentEdge.relation.name:null}},{key:"relationPath",get:function(){return this._relationPath===d&&(this._relationPath=this._createRelationPath()),this._relationPath}},{key:"relationPathKey",get:function(){return this._relationPathKey===d&&(this._relationPathKey=this._createRelationPathKey()),this._relationPathKey}},{key:"dataPath",get:function(){return this._dataPath===d&&(this._dataPath=this._createDataPath()),this._dataPath}},{key:"dataPathKey",get:function(){return this._dataPathKey===d&&(this._dataPathKey=this._createDataPathKey()),this._dataPathKey}},{key:"idPath",get:function(){return this._idPath===d&&(this._idPath=this._createIdPath()),this._idPath}},{key:"idPathKey",get:function(){return this._idPathKey===d&&(this._idPathKey=this._createIdPathKey()),this._idPathKey}},{key:"referencedNode",get:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.refEdges[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var i=r.value;if(i.refType===s.ReferenceType.Object&&i.isOwnerNode(this))return i.relatedNode}}catch(o){t=!0,n=o}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}return null}},{key:"referencingNodes",get:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var a,i=this.refEdges[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;o.refType===s.ReferenceType.Object&&o.isRelatedNode(this)&&e.push(o.ownerNode)}}catch(h){n=!0,r=h}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"descendantRelationNodes",get:function(){return this._collectDescendantRelationNodes([])}}]),t}();module.exports={ModelGraphNode:c};
},{"./ModelGraphEdge":"kxfD","../../utils/objectUtils":"WAAQ"}],"ppMS":[function(require,module,exports) {
"use strict";function e(e,i){return n(e)||t(e,i)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function t(e,r){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var t=[],n=!0,i=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(u){i=!0,a=u}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return t}}function n(e){if(Array.isArray(e))return e}function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function a(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,r,t){return r&&a(e.prototype,r),t&&a(e,t),e}var l=require("../../utils/objectUtils"),u=l.isObject,d=l.isString,s=l.asArray,f=l.asSingle,c=require("../../model/ValidationError"),h=c.ValidationErrorType,y=require("./ModelGraphNode"),v=y.ModelGraphNode,p=require("./ModelGraphEdge"),b=p.ModelGraphEdge,g=function(){function e(){i(this,e),this.nodes=[],this.edges=[]}return o(e,[{key:"_buildGraph",value:function(e,r){if(r)if(Array.isArray(r))this._buildNodes(e,r);else{if(!u(r))throw N(e,r);this._buildNode(e,r)}this._buildReferences()}},{key:"_buildNodes",value:function(e,r){var t=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(r=s(r)).forEach(function(r,a){t._buildNode(e,r,n,i,a)})}},{key:"_buildNode",value:function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(r=f(r),!u(r)||!r.$isObjectionModel)throw N(e,r);var a=new v(e,r);if(this.nodes.push(a),t){var o=new b(b.Type.Relation,t,a,n,i);a.parentEdge=o,this._addEdge(t,a,o)}this._buildRelationNodes(a)}},{key:"_buildRelationNodes",value:function(e){var r=!0,t=!1,n=void 0;try{for(var i,a=e.modelClass.getRelationNames()[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var o=i.value,l=e.obj[o];if(l){var u=e.modelClass.getRelation(o);u.isOneToOne()?this._buildNode(u.relatedModelClass,l,e,u):this._buildNodes(u.relatedModelClass,l,e,u)}}}catch(d){t=!0,n=d}finally{try{r||null==a.return||a.return()}finally{if(t)throw n}}}},{key:"_buildReferences",value:function(){var e=this._nodesByUid();this._buildObjectReferences(e),this._buildPropertyReferences(e)}},{key:"_nodesByUid",value:function(){var e=new Map,r=!0,t=!1,n=void 0;try{for(var i,a=this.nodes[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var o=i.value,l=o.uid;void 0!==l&&e.set(l,o)}}catch(u){t=!0,n=u}finally{try{r||null==a.return||a.return()}finally{if(t)throw n}}return e}},{key:"_buildObjectReferences",value:function(e){var r=!0,t=!1,n=void 0;try{for(var i,a=this.nodes[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var o=i.value,l=o.reference;if(void 0!==l){var u=e.get(l);if(!u)throw j(l);var d=new b(b.Type.Reference,o,u);d.refType=b.ReferenceType.Object,this._addEdge(o,u,d)}}}catch(s){t=!0,n=s}finally{try{r||null==a.return||a.return()}finally{if(t)throw n}}}},{key:"_buildPropertyReferences",value:function(e){var r=this,t=!0,n=!1,i=void 0;try{for(var a,o=function(){var t=a.value;m(t.obj,function(n){var i=n.path,a=n.refMatch,o=n.ref,l=n.refPath,u=e.get(o);if(!u)throw j(o);var d=new b(b.Type.Reference,t,u);d.refType=b.ReferenceType.Property,d.refMatch=a,d.refOwnerDataPath=i.slice(),d.refRelatedDataPath=l,r._addEdge(t,u,d)})},l=this.nodes[Symbol.iterator]();!(t=(a=l.next()).done);t=!0)o()}catch(u){n=!0,i=u}finally{try{t||null==l.return||l.return()}finally{if(n)throw i}}}},{key:"_addEdge",value:function(e,r,t){this.edges.push(t),e.edges.push(t),r.edges.push(t),t.type===b.Type.Reference&&(e.refEdges.push(t),r.refEdges.push(t))}}],[{key:"buildGraph",value:function(e,r){var t=new this;return t._buildGraph(e,r),t}}]),e}();function m(r,t){for(var n=r.constructor,i=n.getRelationNames(),a=0,o=Object.keys(r);a<o.length;a++){var l=o[a];i.includes(l)||w(r[l],[l],function(r,i){E(n.propRefRegex,r,function(r){var n=e(r,3),a=n[0],o=n[1],l=n[2];t({path:i,refMatch:a,ref:o,refPath:l.trim().split(".")})})})}}function w(e,r,t){Array.isArray(e)?_(e,r,t):u(e)?R(e,r,t):d(e)&&t(e,r)}function _(e,r,t){for(var n=0;n<e.length;++n)r.push(n),w(e[n],r,t),r.pop()}function R(e,r,t){for(var n=0,i=Object.keys(e);n<i.length;n++){var a=i[n];r.push(a),w(e[a],r,t),r.pop()}}function E(e,r,t){for(var n=e.exec(r);n;)t(n),n=e.exec(r)}function j(e){return new Error(["could not resolve reference ".concat(e," in a graph."),"If you are sure the #id exist in the same graph,","this may be due to a limitation that a subgraph under a related item","cannot reference an item in a subgraph under another related item.","If you run into this limitation, please open an issue in objection github."].join(" "))}function N(e,r){throw e.createValidationError({type:h.InvalidGraph,message:'expected value "'.concat(r,'" to be an instance of ').concat(e.name)})}module.exports={ModelGraphBuilder:g,createNotModelError:N,forEachPropertyReference:m};
},{"../../utils/objectUtils":"WAAQ","../../model/ValidationError":"sBi0","./ModelGraphNode":"jkuJ","./ModelGraphEdge":"kxfD"}],"R3KS":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}var r=require("./ModelGraphBuilder"),o=r.ModelGraphBuilder,i={},u=function(){function t(n,r){e(this,t),this.nodes=n,this.edges=r,this._nodesByObjects=i,this._nodesByIdPathKeys=i}return n(t,[{key:"nodeForObject",value:function(e){return e?(this._nodesByObjects===i&&(this._nodesByObjects=a(this.nodes)),this._nodesByObjects.get(e)||null):null}},{key:"nodeForNode",value:function(e){return e?(this._nodesByIdPathKeys===i&&(this._nodesByIdPathKeys=l(this.nodes)),this._nodesByIdPathKeys.get(e.idPathKey)||null):null}},{key:"rootObjects",get:function(){return this.nodes.filter(function(e){return!e.parentEdge}).map(function(e){return e.obj})}}],[{key:"create",value:function(e,n){var r=o.buildGraph(e,n);return new t(r.nodes,r.edges)}},{key:"createEmpty",value:function(){return new t([],[])}}]),t}();function a(e){var t=new Map,n=!0,r=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var a=i.value;t.set(a.obj,a)}}catch(l){r=!0,o=l}finally{try{n||null==u.return||u.return()}finally{if(r)throw o}}return t}function l(e){var t=new Map,n=!0,r=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var a=i.value,l=a.idPathKey;null!==l&&t.set(l,a)}}catch(s){r=!0,o=s}finally{try{n||null==u.return||u.return()}finally{if(r)throw o}}return t}module.exports={ModelGraph:u};
},{"./ModelGraphBuilder":"ppMS"}],"RE5j":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}var r="noRelate",o="noUnrelate",i="noInsert",s="noUpdate",a="noDelete",u="update",l="relate",h="unrelate",c="insertMissing",d="fetchStrategy",f="allowRefs",p={OnlyIdentifiers:"OnlyIdentifiers",Everything:"Everything",OnlyNeeded:"OnlyNeeded"},y=function(){function t(n){e(this,t),this.options=n instanceof t?n.options:n}return n(t,[{key:"isFetchStrategy",value:function(e){if(!p[e])throw new Error('unknown strategy "'.concat(e,'"'));return this.options[d]?this.options[d]===e:e===p.OnlyNeeded}},{key:"isInsertOnly",value:function(){var e=this;return[a,s,o,c].every(function(t){return!0===e.options[t]})}},{key:"shouldRelateIgnoreDisable",value:function(e,t){return!(!e.isReference&&!e.isDbReference)||this._hasOption(e,l)&&!v(e,t)&&!!e.parentEdge&&!!e.parentEdge.relation&&e.parentEdge.relation.hasRelateProp(e.obj)&&t.nodeDbExistence.doesNodeExistInDb(e)}},{key:"shouldRelate",value:function(e,t){return!this._hasOption(e,r)&&this.shouldRelateIgnoreDisable(e,t)}},{key:"shouldInsertIgnoreDisable",value:function(e,t){return!v(e,t)&&!this.shouldRelateIgnoreDisable(e,t)&&(!e.hasId||this.shouldInsertMissing(e))}},{key:"shouldInsert",value:function(e,t){return!this._hasOption(e,i)&&this.shouldInsertIgnoreDisable(e,t)}},{key:"shouldInsertMissing",value:function(e){return this._hasOption(e,c)}},{key:"shouldPatchOrUpdateIgnoreDisable",value:function(e,t){return!!this.shouldRelate(e,t)||!!v(e,t)}},{key:"shouldPatch",value:function(e,t){return this.shouldPatchOrUpdateIgnoreDisable(e,t)&&!this._hasOption(e,s)&&!this._hasOption(e,u)}},{key:"shouldUpdate",value:function(e,t){return this.shouldPatchOrUpdateIgnoreDisable(e,t)&&!this._hasOption(e,s)&&this._hasOption(e,u)}},{key:"shouldUnrelateIgnoreDisable",value:function(e){return this._hasOption(e,h)}},{key:"shouldUnrelate",value:function(e,t){return!g(e,t.graph)&&!this._hasOption(e,o)&&this.shouldUnrelateIgnoreDisable(e)}},{key:"shouldDelete",value:function(e,t){return!g(e,t.graph)&&!this._hasOption(e,a)&&!this.shouldUnrelateIgnoreDisable(e)}},{key:"shouldInsertOrRelate",value:function(e,t){return this.shouldInsert(e,t)||this.shouldRelate(e,t)}},{key:"shouldDeleteOrUnrelate",value:function(e,t){return this.shouldDelete(e,t)||this.shouldUnrelate(e,t)}},{key:"allowRefs",value:function(){return!!this.options[f]}},{key:"rebasedOptions",value:function(e){for(var n={},r=e.relationPathKey,o=0,i=Object.keys(this.options);o<i.length;o++){var s=i[o],a=this.options[s];Array.isArray(a)?n[s]=a.filter(function(e){return e.startsWith(r)}).map(function(e){return e.slice(r.length+1)}).filter(function(e){return!!e}):n[s]=a}return new t(n)}},{key:"_hasOption",value:function(e,t){var n=this.options[t];if(Array.isArray(n))return-1!==n.indexOf(e.relationPathKey);if("boolean"==typeof n)return n;if(void 0===n)return!1;throw new Error("expected ".concat(t,' option value "').concat(n,'" to be an instance of boolean or array of strings'))}}]),t}();function v(e,t){return t&&e?t.currentGraph.nodeForNode(e):null}function g(e,t){return t&&e?t.nodeForNode(e):null}module.exports={GraphOptions:y,FetchStrategy:p};
},{}],"l0cJ":[function(require,module,exports) {
"use strict";function r(r,o){return t(r)||n(r,o)||e()}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(r,e){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r)){var n=[],t=!0,o=!1,a=void 0;try{for(var i,u=r[Symbol.iterator]();!(t=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);t=!0);}catch(l){o=!0,a=l}finally{try{t||null==u.return||u.return()}finally{if(o)throw a}}return n}}function t(r){if(Array.isArray(r))return r}function o(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function a(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function i(r,e,n){return e&&a(r.prototype,e),n&&a(r,n),r}var u=require("../../utils/objectUtils"),l=u.asArray,c=u.groupBy,f=require("../../model/graph/ModelGraph"),s=f.ModelGraph,y=require("./GraphOptions"),p=y.FetchStrategy,d=require("../RelationExpression"),h=d.RelationExpression,v=function(){function r(){o(this,r)}return i(r,null,[{key:"fetchCurrentGraph",value:function(r){var e,n,t,o,a,i,u,l;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:if(e=r.builder,n=r.graph,t=r.graphOptions,o=n.rootObjects,a=m(o),i=e.modelClass(),0!==a.length){c.next=6;break}return c.abrupt("return",Promise.resolve(s.create(i,[])));case 6:return u=h.fromModelGraph(o),c.next=9,regeneratorRuntime.awrap(i.query().childQueryOf(e,E()).modify(b(e)).modify(g(n,t,u)).findByIds(a).withGraphFetched(u).internalOptions(G()));case 9:return l=c.sent,c.abrupt("return",s.create(i,l));case 11:case"end":return c.stop()}})}}]),r}();function m(r){return l(r).filter(function(r){return r.$hasId()}).map(function(r){return r.$id()})}function b(r){return function(e){for(var n=0,t=["forUpdate","forShare"];n<t.length;n++){var o=t[n];r.has(o)&&e[o]()}}}function g(e,n,t){return function(o){var a=w(e,t),i=!0,u=!1,l=void 0;try{for(var c,f=a.entries()[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var s=r(c.value,2),y=s[0],p=C(s[1],n);y?o.modifyGraph(y,p):o.modify(p)}}catch(d){u=!0,l=d}finally{try{i||null==f.return||f.return()}finally{if(u)throw l}}}}function w(r,e){var n=c(r.nodes,function(r){return r.relationPathKey});return I(e.node,function(r){n.has(r)||n.set(r,[])}),n}function C(r,e){return e.isFetchStrategy(p.OnlyIdentifiers)?j():e.isFetchStrategy(p.OnlyNeeded)?x(r):function(){}}function j(){return function(r){r.select(r.fullIdColumn())}}function x(r){return function(e){var n=new Map,t=!0,o=!1,a=void 0;try{for(var i,u=r[Symbol.iterator]();!(t=(i=u.next()).done);t=!0)for(var c=i.value,f=c.obj.$toDatabaseJson(e),s=0,y=Object.keys(f);s<y.length;s++){var p=y[s];if(O(p,n,c)){var d=S(e,p,c)||R(e,p,c);n.set(p,d)}}}catch(x){o=!0,a=x}finally{try{t||null==u.return||u.return()}finally{if(o)throw a}}var h=Array.from(n.values()),v=l(e.fullIdColumn()),m=!0,b=!1,g=void 0;try{for(var w,C=v[Symbol.iterator]();!(m=(w=C.next()).done);m=!0){var j=w.value;h.includes(j)||h.push(j)}}catch(x){b=!0,g=x}finally{try{m||null==C.return||C.return()}finally{if(b)throw g}}e.select(h)}}function O(r,e,n){var t=n.modelClass;return!e.has(r)&&r!==t.propertyNameToColumnName(t.dbRefProp)&&r!==t.propertyNameToColumnName(t.uidRefProp)&&r!==t.propertyNameToColumnName(t.uidProp)}function S(r,e,n){if(n.parentEdge&&n.parentEdge.relation.isObjectionManyToManyRelation){var t=n.parentEdge.relation,o=t.joinTableExtras.find(function(r){return r.aliasCol===e});if(o)return"".concat(r.tableRefFor(t.joinModelClass),".").concat(o.joinTableCol," as ").concat(o.aliasCol)}return null}function R(r,e,n){return"".concat(r.tableRefFor(n.modelClass),".").concat(e)}function E(){return{fork:!0,isInternalQuery:!0}}function G(){return{keepImplicitJoinProps:!0}}function I(r,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],t=!0,o=!1,a=void 0;try{for(var i,u=r.$childNames[Symbol.iterator]();!(t=(i=u.next()).done);t=!0){var l=i.value;n.push(l),e(n.join(".")),I(r[l],e,n),n.pop()}}catch(c){o=!0,a=c}finally{try{t||null==u.return||u.return()}finally{if(o)throw a}}}module.exports={GraphFetcher:v};
},{"../../utils/objectUtils":"WAAQ","../../model/graph/ModelGraph":"R3KS","./GraphOptions":"RE5j","../RelationExpression":"qujN"}],"WksR":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}var t=require("../../utils/knexUtils"),u=t.isPostgres,a=100,o=100,c=function(){function n(r){e(this,n),this.graphData=r}return r(n,[{key:"run",value:function(e){return null}},{key:"_getConcurrency",value:function(e,r){return n.getConcurrency(e,r)}},{key:"_getBatchSize",value:function(e){return u(e.unsafeKnex())?a:1}},{key:"_resolveReferences",value:function(e){e.isReference&&this._resolveReference(e)}},{key:"_resolveReference",value:function(e){for(var n=e.referencedNode,r=0,t=Object.keys(n.obj);r<t.length;r++){var u=t[r];e.obj.hasOwnProperty(u)||(e.obj[u]=n.obj[u])}}},{key:"graph",get:function(){return this.graphData.graph}},{key:"currentGraph",get:function(){return this.graphData.currentGraph}},{key:"graphOptions",get:function(){return this.graphData.graphOptions}}],[{key:"getConcurrency",value:function(e,n){return n.reduce(function(n,r){return Math.min(n,r.modelClass.getConcurrency(e.unsafeKnex()))},o)}},{key:"ReturningAllSelector",get:function(){return function(e){return"returning"===e.name&&e.args.includes("*")}}}]),n}();module.exports={GraphAction:c};
},{"../../utils/knexUtils":"u553"}],"kF2i":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){return o(e)||n(e,t)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(c){o=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}}function o(e){if(Array.isArray(e))return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function c(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?l(t):r}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=require("../GraphAction"),b=p.GraphAction,h=require("../../../utils/objectUtils"),v=h.groupBy,d=h.chunk,j=require("../../../utils/promiseUtils"),m=function(e){function r(e,t){var n,o=t.nodes;return i(this,r),(n=c(this,f(r).call(this,e))).nodes=o,n}return s(r,b),a(r,[{key:"run",value:function(e){var t=this,r=this._createInsertBatches(e),n=this._getConcurrency(e,this.nodes);return j.map(r,function(r){return t._insertBatch(e,r)},{concurrency:n})}},{key:"_createInsertBatches",value:function(e){var r=[],n=this._getBatchSize(e),o=v(this.nodes,function(t){return _(e,t)}),i=!0,u=!1,a=void 0;try{for(var c,l=o.entries()[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var f=t(c.value,2),s=f[0],y=f[1],p=!0,b=!1,h=void 0;try{for(var j,m=d(y,n)[Symbol.iterator]();!(p=(j=m.next()).done);p=!0){var g=j.value;r.push(this._createBatch(s,g))}}catch(O){b=!0,h=O}finally{try{p||null==m.return||m.return()}finally{if(b)throw h}}}}catch(O){u=!0,a=O}finally{try{i||null==l.return||l.return()}finally{if(u)throw a}}return r}},{key:"_createBatch",value:function(e,t){var r=this;return t.filter(function(e){return r.graphOptions.shouldRelate(e,r.graphData)||e.userData.inserted}).map(function(t){return{node:t,joinTableModelClass:e,joinTableObj:r._createJoinTableObj(e,t)}})}},{key:"_createJoinTableObj",value:function(e,t){var r=t.parentEdge,n=t.parentNode,o=r.relation;return this._resolveReferences(t),e.fromJson(o.createJoinModel(o.ownerProp.getProps(n.obj),t.obj))}},{key:"_insertBatch",value:function(e,t){var r=this;return this._beforeInsert(e,t).then(function(){return r._insert(e,t)})}},{key:"_beforeInsert",value:function(e,t){return Promise.all(t.map(function(t){var r=t.node,n=t.joinTableObj;return r.parentEdge?r.parentEdge.relation.joinTableBeforeInsert(n,e.context()):null}))}},{key:"_insert",value:function(e,t){if(t.length>0)return t[0].joinTableModelClass.query().childQueryOf(e).insert(t.map(function(e){return e.joinTableObj}))}}]),r}();function _(e,t){return t.parentEdge.relation.getJoinModelClass(e.unsafeKnex())}module.exports={JoinRowGraphInsertAction:m};
},{"../GraphAction":"WksR","../../../utils/objectUtils":"WAAQ","../../../utils/promiseUtils":"zF81"}],"ZQVE":[function(require,module,exports) {
"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function r(e,r){return o(e)||n(e,r)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(e,r){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var t=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return t}}function o(e){if(Array.isArray(e))return e}function a(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,r,t){return r&&i(e.prototype,r),t&&i(e,t),e}function u(r,t){return!t||"object"!==e(t)&&"function"!=typeof t?c(r):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&s(e,r)}function s(e,r){return(s=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var p=require("../GraphAction"),v=p.GraphAction,d=require("../../../utils/objectUtils"),h=d.groupBy,b=d.chunk,m=d.get,g=d.set,_=require("../../../model/graph/ModelGraphEdge"),w=_.ModelGraphEdge,P=require("../../../utils/promiseUtils"),j=function(e){function t(e,r){var n,o=r.nodes,i=r.dependencies;return a(this,t),(n=u(this,f(t).call(this,e))).nodes=o,n.dependencies=i,n}return y(t,v),l(t,[{key:"run",value:function(e){var r=this,t=this._createInsertBatches(e),n=this._getConcurrency(e,this.nodes);return P.map(t,function(t){return r._insertBatch(e,t)},{concurrency:n})}},{key:"_createInsertBatches",value:function(e){var r=[],t=this._getBatchSize(e),n=h(this.nodes,x),o=!0,a=!1,i=void 0;try{for(var l,u=n.values()[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,f=!0,y=!1,s=void 0;try{for(var p,v=b(c,t)[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var d=p.value;r.push(d)}}catch(m){y=!0,s=m}finally{try{f||null==v.return||v.return()}finally{if(y)throw s}}}}catch(m){a=!0,i=m}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}return r}},{key:"_insertBatch",value:function(e,r){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this._beforeInsert(r));case 2:return t.next=4,regeneratorRuntime.awrap(this._insert(e,r));case 4:return t.next=6,regeneratorRuntime.awrap(this._afterInsert(r));case 6:case"end":return t.stop()}},null,this)}},{key:"_beforeInsert",value:function(e){return this._resolveDependencies(e),this._omitManyToManyExtraProps(e),this._copyRelationPropsFromCurrentIfNeeded(e),Promise.resolve()}},{key:"_resolveDependencies",value:function(e){var r=!0,t=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var i=o.value,l=this.dependencies.get(i);if(l){var u=!0,c=!1,f=void 0;try{for(var y,s=l[Symbol.iterator]();!(u=(y=s.next()).done);u=!0){var p=y.value,v=p.getOtherNode(i);this._resolveDependency(v,p)}}catch(d){c=!0,f=d}finally{try{u||null==s.return||s.return()}finally{if(c)throw f}}}}}catch(d){t=!0,n=d}finally{try{r||null==a.return||a.return()}finally{if(t)throw n}}}},{key:"_resolveDependency",value:function(e,r){r.type!==w.Type.Relation||r.relation.joinTable?r.refType===w.ReferenceType.Property&&this._resolvePropertyReferenceNode(e,r):this._resolveRelationDependency(e,r)}},{key:"_resolveRelationDependency",value:function(e,r){var t,n,o=r.getOtherNode(e);r.isOwnerNode(e)?(t=r.relation.ownerProp,n=r.relation.relatedProp):(n=r.relation.ownerProp,t=r.relation.relatedProp),this._resolveReferences(e);for(var a=0,i=n.size;a<i;++a)n.setProp(o.obj,a,t.getProp(e.obj,a))}},{key:"_resolvePropertyReferenceNode",value:function(e,r){var t,n,o=r.getOtherNode(e);r.isOwnerNode(e)?(t=r.refOwnerDataPath,n=r.refRelatedDataPath):(n=r.refOwnerDataPath,t=r.refRelatedDataPath);var a=m(e.obj,t),i=m(o.obj,n);i===r.refMatch?g(o.obj,n,a):g(o.obj,n,i.replace(r.refMatch,a))}},{key:"_omitManyToManyExtraProps",value:function(e){var r=!0,t=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var i=o.value;i.parentEdge&&i.parentEdge.type===w.Type.Relation&&i.parentEdge.relation.joinTableExtras.length>0&&i.parentEdge.relation.omitExtraProps([i.obj])}}catch(l){t=!0,n=l}finally{try{r||null==a.return||a.return()}finally{if(t)throw n}}}},{key:"_copyRelationPropsFromCurrentIfNeeded",value:function(e){var r=!0,t=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var i=o.value,l=this.currentGraph.nodeForNode(i);if(l){var u=!0,c=!1,f=void 0;try{for(var y,s=i.edges[Symbol.iterator]();!(u=(y=s.next()).done);u=!0){var p=y.value;if(p.type===w.Type.Relation)for(var v=p.isOwnerNode(i)?p.relation.ownerProp:p.relation.relatedProp,d=0,h=v.size;d<h;++d){void 0===v.getProp(i.obj,d)&&v.setProp(i.obj,d,v.getProp(l.obj,d))}}}catch(b){c=!0,f=b}finally{try{u||null==s.return||s.return()}finally{if(c)throw f}}}}}catch(b){t=!0,n=b}finally{try{r||null==a.return||a.return()}finally{if(t)throw n}}}},{key:"_insert",value:function(e,t){var n=this,o=r(t,1)[0].modelClass;t=t.filter(function(e){return n.graphOptions.shouldInsert(e,n.graphData)});var a=!0,i=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var f=u.value;delete f.obj[o.uidProp],f.obj.$validate(null,{dataPath:f.dataPathKey})}}catch(b){i=!0,l=b}finally{try{a||null==c.return||c.return()}finally{if(i)throw l}}if(0!==t.length){var y=!0,s=!1,p=void 0;try{for(var d,h=t[Symbol.iterator]();!(y=(d=h.next()).done);y=!0){d.value.userData.inserted=!0}}catch(b){s=!0,p=b}finally{try{y||null==h.return||h.return()}finally{if(s)throw p}}return this._runRelationBeforeInsertMethods(e,t).then(function(){return o.query().insert(t.map(function(e){return e.obj})).childQueryOf(e).copyFrom(e,v.ReturningAllSelector).execute()})}}},{key:"_runRelationBeforeInsertMethods",value:function(e,r){return Promise.all(r.map(function(r){return r.parentEdge?r.parentEdge.relation.beforeInsert(r.obj,e.context()):null}))}},{key:"_afterInsert",value:function(e){var r=!0,t=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var i=o.value,l=!0,u=!1,c=void 0;try{for(var f,y=i.referencingNodes[Symbol.iterator]();!(l=(f=y.next()).done);l=!0){var s=f.value;this._resolveDependency(s,s.parentEdge)}}catch(p){u=!0,c=p}finally{try{l||null==y.return||y.return()}finally{if(u)throw c}}}}catch(p){t=!0,n=p}finally{try{r||null==a.return||a.return()}finally{if(t)throw n}}}}]),t}();function x(e){return e.modelClass}module.exports={GraphInsertAction:j};
},{"../GraphAction":"WksR","../../../utils/objectUtils":"WAAQ","../../../model/graph/ModelGraphEdge":"kxfD","../../../utils/promiseUtils":"zF81"}],"YGkr":[function(require,module,exports) {
"use strict";function t(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function r(t,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function n(t,n,e){return n&&r(t.prototype,n),e&&r(t,e),t}var e=function(){function r(n){t(this,r),this.graphData=n}return n(r,[{key:"createActions",value:function(){return[]}},{key:"graph",get:function(){return this.graphData.graph}},{key:"currentGraph",get:function(){return this.graphData.currentGraph}},{key:"graphOptions",get:function(){return this.graphData.graphOptions}}]),r}();module.exports={GraphOperation:e};
},{}],"YcJL":[function(require,module,exports) {
"use strict";function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function n(e){return o(e)||r(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function o(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),e}function u(n,t){return!t||"object"!==e(t)&&"function"!=typeof t?l(n):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&p(e,n)}function p(e,n){return(p=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var y=require("./JoinRowGraphInsertAction"),d=y.JoinRowGraphInsertAction,h=require("./GraphInsertAction"),v=h.GraphInsertAction,b=require("../GraphOperation"),g=b.GraphOperation,_=require("../../../model/graph/ModelGraphEdge"),w=_.ModelGraphEdge,m=function(e){function t(){var e,n;a(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=u(this,(e=s(t)).call.apply(e,[this].concat(o)))).dependencies=n._createDependencyMap(),n}return f(t,g),c(t,[{key:"createActions",value:function(){return[].concat(n(this._createNormalActions()),n(this._createJoinRowActions()))}},{key:"_createDependencyMap",value:function(){var e=new Map,n=!0,t=!1,r=void 0;try{for(var o,a=this.graph.edges[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var i=o.value;i.type==w.Type.Relation?this._createRelationDependency(i,e):this._createReferenceDependency(i,e)}}catch(c){t=!0,r=c}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}return e}},{key:"_createRelationDependency",value:function(e,n){e.relation.isObjectionHasManyRelation?this._addDependency(e.relatedNode,e,n):e.relation.isObjectionBelongsToOneRelation&&this._addDependency(e.ownerNode,e,n)}},{key:"_createReferenceDependency",value:function(e,n){this._addDependency(e.ownerNode,e,n)}},{key:"_addDependency",value:function(e,n,t){var r=t.get(e);r||(r=[],t.set(e,r)),r.push(n)}},{key:"_createNormalActions",value:function(){for(var e=this,n=new Set,t=[];;){var r=this.graph.nodes.filter(function(t){return!e._isHandled(t,n)&&!e._hasDependencies(t,n)});if(0===r.length)break;t.push(new v(this.graphData,{nodes:r,dependencies:this.dependencies}));var o=!0,a=!1,i=void 0;try{for(var c,u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value;this._markHandled(l,n)}}catch(s){a=!0,i=s}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}}if(n.size!==this.graph.nodes.length)throw new Error("the object graph contains cyclic references");return t}},{key:"_isHandled",value:function(e,n){return n.has(e)}},{key:"_hasDependencies",value:function(e,n){if(!this.dependencies.has(e))return!1;var t=!0,r=!1,o=void 0;try{for(var a,i=this.dependencies.get(e)[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var c=a.value.getOtherNode(e);if(!n.has(c)&&!this.currentGraph.nodeForNode(c))return!0}}catch(u){r=!0,o=u}finally{try{t||null==i.return||i.return()}finally{if(r)throw o}}return!1}},{key:"_markHandled",value:function(e,n){n.add(e);var t=!0,r=!1,o=void 0;try{for(var a,i=e.referencingNodes[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var c=a.value;this._markHandled(c,n)}}catch(u){r=!0,o=u}finally{try{t||null==i.return||i.return()}finally{if(r)throw o}}}},{key:"_createJoinRowActions",value:function(){var e=this;return[new d(this.graphData,{nodes:this.graph.nodes.filter(function(n){return null===e.currentGraph.nodeForNode(n)&&n.parentEdge&&n.parentEdge.relation.isObjectionManyToManyRelation})})]}}]),t}();module.exports={GraphInsert:m};
},{"./JoinRowGraphInsertAction":"kF2i","./GraphInsertAction":"ZQVE","../GraphOperation":"YGkr","../../../model/graph/ModelGraphEdge":"kxfD"}],"pbmv":[function(require,module,exports) {
"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function r(e){return n(e)||o(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function n(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}function a(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,r,t){return r&&i(e.prototype,r),t&&i(e,t),e}function l(r,t){return!t||"object"!==e(t)&&"function"!=typeof t?s(r):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&d(e,r)}function d(e,r){return(d=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var f=require("../GraphAction"),h=f.GraphAction,y=require("../../../utils/internalPropUtils"),b=y.isInternalProp,g=require("../../../utils/objectUtils"),j=g.union,v=g.difference,P=g.isObject,O=g.jsonEquals,m=require("../../../utils/promiseUtils"),w=function(e){function t(e,r){var o,n=r.nodes;return a(this,t),(o=l(this,c(t).call(this,e))).nodes=n,o}return p(t,h),u(t,[{key:"run",value:function(e){var r=this;return m.map(this.nodes,function(t){return r._runForNode(e,t)},{concurrency:this._getConcurrency(e,this.nodes)})}},{key:"_runForNode",value:function(e,t){var o=this.graphOptions.shouldPatch(t,this.graphData),n=this.graphOptions.shouldUpdate(t,this.graphData),a=this._handleBelongsToOneInserts(t),i=this._handleBelongsToOneDeletes(t),u=this._findChanges(t),l=u.changedProps,s=u.unchangedProps,c=j(l,s),p=v(o||n?l:[].concat(r(a),r(i)),t.modelClass.getIdPropertyArray());if(0===p.length)return null;delete t.obj[t.modelClass.uidProp],delete t.obj[t.modelClass.uidRefProp],delete t.obj[t.modelClass.dbRefProp],t.obj.$validate(null,{dataPath:t.dataPathKey,patch:o||!o&&!n}),t.obj.$omitFromDatabaseJson(v(c,p)),t.userData.updated=!0;var d=this._createBuilder(t).childQueryOf(e).copyFrom(e,h.ReturningAllSelector);return o?d.patch(t.obj):d.update(t.obj),d.execute().then(function(e){return P(e)&&e.$isObjectionModel&&t.obj.$set(e),e})}},{key:"_handleBelongsToOneInserts",value:function(e){var r=this.currentGraph.nodeForNode(e),t=[],o=!0,n=!1,a=void 0;try{for(var i,u=e.edges[Symbol.iterator]();!(o=(i=u.next()).done);o=!0){var l=i.value;if(l.isOwnerNode(e)&&l.relation&&l.relation.isObjectionBelongsToOneRelation&&l.relation.relatedProp.hasProps(l.relatedNode.obj))for(var s=l.relation,c=0,p=s.ownerProp.size;c<p;++c){var d=r&&s.ownerProp.getProp(r.obj,c),f=s.relatedProp.getProp(l.relatedNode.obj,c);d!=f&&(s.ownerProp.setProp(e.obj,c,f),t.push(s.ownerProp.props[c]))}}}catch(h){n=!0,a=h}finally{try{o||null==u.return||u.return()}finally{if(n)throw a}}return t}},{key:"_handleBelongsToOneDeletes",value:function(e){var r=this.currentGraph.nodeForNode(e),t=[];if(!r)return t;var o=!0,n=!1,a=void 0;try{for(var i,u=r.edges[Symbol.iterator]();!(o=(i=u.next()).done);o=!0){var l=i.value;if(l.isOwnerNode(r)&&l.relation.isObjectionBelongsToOneRelation&&null===e.obj[l.relation.name]&&this.graphOptions.shouldDeleteOrUnrelate(l.relatedNode,this.graphData))for(var s=l.relation,c=0,p=s.ownerProp.size;c<p;++c){null!=s.ownerProp.getProp(r.obj,c)&&(s.ownerProp.setProp(e.obj,c,null),t.push(s.ownerProp.props[c]))}}}catch(d){n=!0,a=d}finally{try{o||null==u.return||u.return()}finally{if(n)throw a}}return t}},{key:"_findChanges",value:function(e){for(var t=e.obj,o=this.currentGraph.nodeForNode(e),n=o&&o.obj||{},a=e.modelClass.getRelationNames(),i=[],u=[],l=0,s=Object.keys(t);l<s.length;l++){var c=s[l];if(!b(c)&&!a.includes(c)){var p=t[c],d=n[c];void 0!==d&&_(d,p)?i.push(c):u.push(c)}}return t.$$queryProps&&u.push.apply(u,r(Object.keys(t.$$queryProps))),{changedProps:u,unchangedProps:i}}},{key:"_createBuilder",value:function(e){return e.parentEdge&&!e.parentEdge.relation.isObjectionHasManyRelation?this._createRelatedBuilder(e):this._createRootBuilder(e)}},{key:"_createRelatedBuilder",value:function(e){return e.parentNode.obj.$relatedQuery(e.parentEdge.relation.name).findById(e.obj.$id())}},{key:"_createRootBuilder",value:function(e){return e.obj.$query()}}]),t}();function _(e,r){return e==r||O(e,r)}module.exports={GraphPatchAction:w};
},{"../GraphAction":"WksR","../../../utils/internalPropUtils":"gM8o","../../../utils/objectUtils":"WAAQ","../../../utils/promiseUtils":"zF81"}],"Y0wf":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?i(e):r}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=require("../GraphOperation"),p=f.GraphOperation,s=require("./GraphPatchAction"),l=s.GraphPatchAction,h=function(t){function r(){return e(this,r),o(this,u(r).apply(this,arguments))}return c(r,p),n(r,[{key:"createActions",value:function(){var t=this;return[new l(this.graphData,{nodes:this.graph.nodes.filter(function(e){return t.graphOptions.shouldPatchOrUpdateIgnoreDisable(e,t.graphData)})})]}}]),r}();module.exports={GraphPatch:h};
},{"../GraphOperation":"YGkr","./GraphPatchAction":"pbmv"}],"XTcU":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?i(t):n}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=require("../GraphAction"),f=c.GraphAction,s=require("../../../utils/objectUtils"),p=s.groupBy,y=require("../../../utils/promiseUtils"),h=function(e){function n(e,r){var i,a=r.nodes;return t(this,n),(i=o(this,u(n).call(this,e))).nodes=a,i}return a(n,f),r(n,[{key:"run",value:function(e){var t=this._filterOutBelongsToOneRelationUnrelates(this.nodes),n=this._createDeleteBuilders(e,t);return y.map(n,function(e){return e.execute()},{concurrency:this._getConcurrency(e,t)})}},{key:"_filterOutBelongsToOneRelationUnrelates",value:function(e){var t=this;return e.filter(function(e){return!(t.graphOptions.shouldUnrelate(e,t.graphData)&&e.parentEdge.relation.isObjectionBelongsToOneRelation)})}},{key:"_createDeleteBuilders",value:function(e,t){var n=this,r=p(t,b),o=[];return r.forEach(function(t,r){p(t,d).forEach(function(t,i){var u=n.graphOptions.shouldUnrelate(t[0],n.graphData),a=i.obj.$relatedQuery(r.name).childQueryOf(e);r.isObjectionBelongsToOneRelation||a.findByIds(t.map(function(e){return e.obj.$id()}));var l=!0,c=!1,f=void 0;try{for(var s,p=t[Symbol.iterator]();!(l=(s=p.next()).done);l=!0){s.value.userData.deleted=!0}}catch(y){c=!0,f=y}finally{try{l||null==p.return||p.return()}finally{if(c)throw f}}o.push(u?a.unrelate():a.delete())})}),o}}]),n}();function b(e){return e.parentEdge.relation}function d(e){return e.parentNode}module.exports={GraphDeleteAction:h};
},{"../GraphAction":"WksR","../../../utils/objectUtils":"WAAQ","../../../utils/promiseUtils":"zF81"}],"WOth":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?i(e):r}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=require("../GraphOperation"),p=f.GraphOperation,l=require("./GraphDeleteAction"),s=l.GraphDeleteAction,y=function(t){function r(){return e(this,r),o(this,u(r).apply(this,arguments))}return c(r,p),n(r,[{key:"createActions",value:function(){var t=this;return[new s(this.graphData,{nodes:this.currentGraph.nodes.filter(function(e){return t.graphOptions.shouldDeleteOrUnrelate(e,t.graphData)})})]}}]),r}();module.exports={GraphDelete:y};
},{"../GraphOperation":"YGkr","./GraphDeleteAction":"XTcU"}],"xvyY":[function(require,module,exports) {
"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function t(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}function o(r,t){return!t||"object"!==e(t)&&"function"!=typeof t?u(r):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&f(e,r)}function f(e,r){return(f=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var a=require("../GraphAction"),s=a.GraphAction,l=require("../../../utils/objectUtils"),p=l.groupBy,y=l.get,h=l.set,v=require("../../../model/graph/ModelGraphBuilder"),b=v.forEachPropertyReference,d=require("../../../utils/promiseUtils"),m=function(e){function t(e,n){var u,c=n.nodes;return r(this,t),(u=o(this,i(t).call(this,e))).nodes=c,u}return c(t,s),n(t,[{key:"run",value:function(e){var r=this._createUpsertBuilders(e,this.nodes);return d.map(r,function(e){return e.execute()},{concurrency:this._getConcurrency(e,this.nodes)})}},{key:"_createUpsertBuilders",value:function(e,r){var t=this,n=p(r,_),o=[];return n.forEach(function(r){p(r,j).forEach(function(r){var n=!0,u=!1,i=void 0;try{for(var c,f=r[Symbol.iterator]();!(n=(c=f.next()).done);n=!0){var a=c.value;t._resolveReferences(a),a.userData.upserted=!0}}catch(l){u=!0,i=l}finally{try{n||null==f.return||f.return()}finally{if(u)throw i}}o.push(r[0].modelClass.query().childQueryOf(e).copyFrom(e,s.ReturningAllSelector).upsertGraph(r.map(function(e){return e.obj}),t.graphOptions.rebasedOptions(r[0])))})}),o}},{key:"_resolveReferences",value:function(e){var r=this;e.obj.$traverse(function(e){return r._resolveReferencesForObject(e)})}},{key:"_resolveReferencesForObject",value:function(e){this._resolveObjectReference(e),this._resolvePropertyReferences(e)}},{key:"_resolveObjectReference",value:function(e){var r=e.constructor,t=e[r.uidRefProp];if(t){var n=this.graph.nodes.find(function(e){return e.uid===t});if(n){for(var o=n.modelClass.getRelationNames(),u=0,i=Object.keys(n.obj);u<i.length;u++){var c=i[u];o.includes(c)||(e[c]=n.obj[c])}delete e[r.uidRefProp]}}}},{key:"_resolvePropertyReferences",value:function(e){var r=this;b(e,function(t){var n=t.path,o=t.refMatch,u=t.ref,i=t.refPath,c=r.graph.nodes.find(function(e){return e.uid===u});if(c){var f=y(c.obj,i),a=y(e,n);h(e,n,a===o?f:a.replace(o,f))}})}}]),t}();function _(e){return e.parentEdge.relation}function j(e){return e.parentNode}module.exports={GraphRecursiveUpsertAction:m};
},{"../GraphAction":"WksR","../../../utils/objectUtils":"WAAQ","../../../model/graph/ModelGraphBuilder":"ppMS","../../../utils/promiseUtils":"zF81"}],"hN5h":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?i(e):r}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=require("../GraphOperation"),p=f.GraphOperation,l=require("./GraphRecursiveUpsertAction"),s=l.GraphRecursiveUpsertAction,y=function(t){function r(){return e(this,r),o(this,u(r).apply(this,arguments))}return a(r,p),n(r,[{key:"createActions",value:function(){var t=this;return[new s(this.graphData,{nodes:this.graph.nodes.filter(function(e){return t.graphOptions.shouldRelate(e,t.graphData)&&h(e.obj)})})]}}]),r}();function h(t){var e=!0,r=!1,n=void 0;try{for(var o,i=t.constructor.getRelationNames()[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var u=o.value;if(t.hasOwnProperty(u))return!0}}catch(a){r=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(r)throw n}}return!1}module.exports={GraphRecursiveUpsert:y};
},{"../GraphOperation":"YGkr","./GraphRecursiveUpsertAction":"xvyY"}],"xWjL":[function(require,module,exports) {
"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var n=function n(r){var a=r.graph,s=r.currentGraph,i=r.graphOptions,e=r.nodeDbExistence;t(this,n),this.graph=a,this.currentGraph=s,this.graphOptions=i,this.nodeDbExistence=e};module.exports={GraphData:n};
},{}],"Eegn":[function(require,module,exports) {
"use strict";function e(e,a){return n(e)||t(e,a)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function t(e,r){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var t=[],n=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(s){a=!0,o=s}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return t}}function n(e){if(Array.isArray(e))return e}function a(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,r,t){return r&&o(e.prototype,r),t&&o(e,t),e}var u=require("./GraphData"),s=u.GraphData,c=require("./GraphAction"),l=c.GraphAction,y=require("../../utils/promiseUtils"),f=function(){function e(r){a(this,e),this.dontExist=r}return i(e,null,[{key:"createEveryNodeExistsExistence",value:function(){return new e(new Map)}},{key:"create",value:function(r){var t,n,a,o,i,u,c,l,y;return regeneratorRuntime.async(function(f){for(;;)switch(f.prev=f.next){case 0:if(t=r.builder,n=r.graph,a=r.graphOptions,o=r.currentGraph,!a.isInsertOnly()){f.next=3;break}return f.abrupt("return",e.createEveryNodeExistsExistence());case 3:if(i=new s({graph:n,graphOptions:a,currentGraph:o,nodeDbExistence:e.createEveryNodeExistsExistence()}),u=d(i),c=u.mayNotExist,l=u.mayNotExistNodes,0!=c.size){f.next=7;break}return f.abrupt("return",e.createEveryNodeExistsExistence());case 7:return f.next=9,regeneratorRuntime.awrap(v({builder:t,mayNotExist:c,mayNotExistNodes:l}));case 9:return y=f.sent,f.abrupt("return",new e(y));case 11:case"end":return f.stop()}})}}]),i(e,[{key:"doesNodeExistInDb",value:function(e){var r=this.dontExist.get(e.modelClass);return!r||!r.has(e.obj.$idKey())}}]),e}();function d(e){var r=e.graph,t=e.currentGraph,n=e.graphOptions,a=new Map,o=[],i=!0,u=!1,s=void 0;try{for(var c,l=r.nodes[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var y=c.value;n.shouldInsertMissing(y)&&n.shouldRelate(y,e)&&y.hasId&&!p(t,y)&&(a.has(y.modelClass)||a.set(y.modelClass,new Map),a.get(y.modelClass).set(y.obj.$idKey(),y.obj.$id()),o.push(y))}}catch(f){u=!0,s=f}finally{try{i||null==l.return||l.return()}finally{if(u)throw s}}return{mayNotExist:a,mayNotExistNodes:o}}function p(e,r){var t=r.modelClass,n=t.getTableName(),a=t.getIdPropertyArray();return e.nodes.some(function(e){return e.modelClass.getTableName()===n&&a.every(function(t){return e.obj[t]===r.obj[t]})})}function v(e){var r,t,n,a,o,i,u,s,c,f,d,p,v,b,m,E,g,w,N;return regeneratorRuntime.async(function(k){for(;;)switch(k.prev=k.next){case 0:return r=e.builder,t=e.mayNotExist,n=e.mayNotExistNodes,a=x(t),o=h({builder:r,mayNotExist:t}),k.next=5,regeneratorRuntime.awrap(y.map(o,function(e){return e.execute()},{concurrency:l.getConcurrency(r,n)}));case 5:i=k.sent,u=!0,s=!1,c=void 0,k.prev=9,f=i[Symbol.iterator]();case 11:if(u=(d=f.next()).done){k.next=35;break}for(p=d.value,v=!0,b=!1,m=void 0,k.prev=16,E=p[Symbol.iterator]();!(v=(g=E.next()).done);v=!0)w=g.value,N=w.constructor,a.get(N).delete(w.$idKey());k.next=24;break;case 20:k.prev=20,k.t0=k.catch(16),b=!0,m=k.t0;case 24:k.prev=24,k.prev=25,v||null==E.return||E.return();case 27:if(k.prev=27,!b){k.next=30;break}throw m;case 30:return k.finish(27);case 31:return k.finish(24);case 32:u=!0,k.next=11;break;case 35:k.next=41;break;case 37:k.prev=37,k.t1=k.catch(9),s=!0,c=k.t1;case 41:k.prev=41,k.prev=42,u||null==f.return||f.return();case 44:if(k.prev=44,!s){k.next=47;break}throw c;case 47:return k.finish(44);case 48:return k.finish(41);case 49:return k.abrupt("return",a);case 50:case"end":return k.stop()}},null,null,[[9,37,41,49],[16,20,24,32],[25,,27,31],[42,,44,48]])}function h(r){var t=r.builder,n=r.mayNotExist,a=[],o=!0,i=!1,u=void 0;try{for(var s,c=n.entries()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=e(s.value,2),y=l[0],f=l[1],d=Array.from(f.values());a.push(y.query().childQueryOf(t,b()).findByIds(d).select(y.getIdColumnArray()))}}catch(p){i=!0,u=p}finally{try{o||null==c.return||c.return()}finally{if(i)throw u}}return a}function b(){return{fork:!0,isInternalQuery:!0}}function x(e){var r=new Map(e),t=!0,n=!1,a=void 0;try{for(var o,i=r.keys()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var u=o.value;r.set(u,new Map(r.get(u)))}}catch(s){n=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}return r}module.exports={GraphNodeDbExistence:f};
},{"./GraphData":"xWjL","./GraphAction":"WksR","../../utils/promiseUtils":"zF81"}],"M0oJ":[function(require,module,exports) {
"use strict";function e(e){return n(e)||t(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function t(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function n(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function a(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,r,t){return r&&a(e.prototype,r),t&&a(e,t),e}var u=require("../../model/graph/ModelGraph"),s=u.ModelGraph,l=require("../../model/graph/ModelGraphEdge"),c=l.ModelGraphEdge,p=require("../../model/graph/ModelGraphBuilder"),d=p.createNotModelError,h=require("../graph/GraphFetcher"),f=h.GraphFetcher,y=require("./insert/GraphInsert"),g=y.GraphInsert,v=require("./patch/GraphPatch"),b=v.GraphPatch,m=require("./delete/GraphDelete"),w=m.GraphDelete,G=require("./recursiveUpsert/GraphRecursiveUpsert"),E=G.GraphRecursiveUpsert,O=require("./GraphOptions"),R=O.GraphOptions,x=require("../../model/ValidationError"),j=x.ValidationErrorType,I=require("../RelationExpression"),N=I.RelationExpression,q=require("./GraphNodeDbExistence"),M=q.GraphNodeDbExistence,A=require("./GraphData"),S=A.GraphData,D=require("../../utils/objectUtils"),P=D.uniqBy,C=D.asArray,F=D.isObject,U=function(){function e(r){var t=r.rootModelClass,n=r.objects,a=r.upsertOptions;o(this,e),V(t,n),this.objects=t.ensureModelArray(n,e.modelOptions),this.isArray=Array.isArray(n),this.upsertOpt=a}return i(e,[{key:"run",value:function(e){var r=e.modelClass(),t=new R(this.upsertOpt),n=s.create(r,this.objects);return k(n),T(e,t,n).then(L(e)).then(H()).then(_(e)).then(re(this.objects,this.isArray))}}],[{key:"modelOptions",get:function(){return{skipValidation:!0}}}]),e}();function V(e,r){C(r).forEach(function(r){if(!F(r))throw d(e,r)})}function k(e){var r=!0,t=!1,n=void 0;try{for(var o,a=e.nodes[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var i=o.value;i.parentEdge&&i.parentEdge.relation&&i.isDbReference&&i.parentEdge.relation.setRelateProp(i.obj,C(i.dbReference))}}catch(u){t=!0,n=u}finally{try{r||null==a.return||a.return()}finally{if(t)throw n}}}function T(e,r,t){var n,o;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap($(e,r,t));case 2:return n=a.sent,a.next=5,regeneratorRuntime.awrap(M.create({builder:e,graph:t,graphOptions:r,currentGraph:n}));case 5:return o=a.sent,a.abrupt("return",new S({graph:t,currentGraph:n,graphOptions:r,nodeDbExistence:o}));case 7:case"end":return a.stop()}})}function $(e,r,t){return r.isInsertOnly()?Promise.resolve(s.createEmpty()):f.fetchCurrentGraph({builder:e,graph:t,graphOptions:r})}function H(){return function(e){return B(e),e.graphOptions.isInsertOnly()||Y(e),e}}function B(e){J(z(e.graph.nodes.filter(function(r){return!e.currentGraph.nodeForNode(r)&&!e.graphOptions.shouldInsertIgnoreDisable(r,e)})),e.graph)}function Y(e){var r=e.graph,t=e.currentGraph,n=z(t.nodes.filter(function(e){return!r.nodeForNode(e)})),o=n.filter(function(e){if(!e.parentNode)return!1;var t=e.parentEdge.relation,n=r.nodeForNode(e.parentNode);return!!n&&void 0===n.obj[t.name]});J(n,t),K(new Set(o),t)}function z(e){var r=new Set(e);return P(e.filter(function(e){for(var t=e.parentNode;t;){if(r.has(t))return!1;t=t.parentNode}return!0}))}function J(r,t){K(new Set(r.reduce(function(r,t){return[].concat(e(r),e(t.descendantRelationNodes))},[])),t)}function K(e,r){var t=new Set,n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var s=i.value,l=!0,c=!1,p=void 0;try{for(var d,h=s.edges[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value,y=f.getOtherNode(s);e.has(y)||(y.removeEdge(f),t.add(f))}}catch(g){c=!0,p=g}finally{try{l||null==h.return||h.return()}finally{if(c)throw p}}}}catch(g){o=!0,a=g}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r.nodes=r.nodes.filter(function(r){return!e.has(r)}),r.edges=r.edges.filter(function(e){return!t.has(e)}),r}function L(e){return function(r){return Q(r,e),W(r,e),X(r,e),r.graphOptions.isInsertOnly()&&Z(r),r}}function Q(e,r){var t=e.graphOptions,n=e.currentGraph,o=e.graph,a=!0,i=!1,u=void 0;try{for(var s,l=o.nodes[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value;if(c.obj.$hasId()&&!t.shouldInsertIgnoreDisable(c,e)&&!t.shouldRelateIgnoreDisable(c,e)&&!n.nodeForNode(c))throw c.parentNode?c.modelClass.createNotFoundError(r.context(),{message:"model (id=".concat(c.obj.$id(),") is not a child of model (id=").concat(c.parentNode.obj.$id(),"). If you want to relate it, use the relate option. If you want to insert it with an id, use the insertMissing option"),dataPath:c.dataPath}):c.modelClass.createNotFoundError(r.context(),{message:"root model (id=".concat(c.obj.$id(),") does not exist. If you want to insert it with an id, use the insertMissing option"),dataPath:c.dataPath})}}catch(p){i=!0,u=p}finally{try{a||null==l.return||l.return()}finally{if(i)throw u}}}function W(e,r){var t=e.graph,n=r.allowedGraphExpression();if(n){var o=t.nodes.filter(function(e){return!e.parentEdge}).map(function(e){return e.obj}),a=N.fromModelGraph(o);if(!n.isSubExpression(a))throw r.modelClass().createValidationError({type:j.UnallowedRelation,message:"trying to upsert an unallowed relation"})}}function X(e,r){var t=e.graph;if(!e.graphOptions.allowRefs()&&t.edges.some(function(e){return e.type===c.Type.Reference}))throw r.modelClass().createValidationError({type:j.InvalidGraph,message:"#ref references are not allowed in a graph by default. see the allowRefs insert/upsert graph option"})}function Z(e){var r=e.graph,t=e.graphOptions,n=!0,o=!1,a=void 0;try{for(var i,u=r.nodes[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var s=i.value;if(t.shouldRelate(s,e)&&s.parentEdge.relation.isObjectionHasManyRelation)throw new Error("You cannot relate HasManyRelation or HasOneRelation using insertGraph, because those require update operations. Consider using upsertGraph instead.")}}catch(l){o=!0,a=l}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}}function _(e){return function(r){return(r.graphOptions.isInsertOnly()?[g]:[w,g,b,E]).reduce(function(t,n){var o=new n(r).createActions();return t.then(function(){return ee(e,o)})},Promise.resolve())}}function ee(e,r){return r.reduce(function(r,t){return r.then(function(){return t.run(e)})},Promise.resolve())}function re(e,r){return function(){return r?e:e[0]}}module.exports={GraphUpsert:U};
},{"../../model/graph/ModelGraph":"R3KS","../../model/graph/ModelGraphEdge":"kxfD","../../model/graph/ModelGraphBuilder":"ppMS","../graph/GraphFetcher":"l0cJ","./insert/GraphInsert":"YcJL","./patch/GraphPatch":"Y0wf","./delete/GraphDelete":"WOth","./recursiveUpsert/GraphRecursiveUpsert":"hN5h","./GraphOptions":"RE5j","../../model/ValidationError":"sBi0","../RelationExpression":"qujN","./GraphNodeDbExistence":"Eegn","./GraphData":"xWjL","../../utils/objectUtils":"WAAQ"}],"Sbek":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?i(t):n}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=s(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=require("./DelegateOperation"),p=f.DelegateOperation,y=require("./InsertOperation"),h=y.InsertOperation,d=require("../graph/GraphUpsert"),g=d.GraphUpsert,b=function(e){function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t(this,n),!(r=o(this,l(n).call(this,e,i))).delegate.is(h))throw new Error("Invalid delegate");return Object.assign(r.delegate.modelOptions,g.modelOptions),r.upsertOptions=i.opt||{},r.upsert=null,r}return a(n,p),r(n,[{key:"onAdd",value:function(e,t){var r=u(l(n.prototype),"onAdd",this).call(this,e,t);return this.upsert=new g({objects:this.models,rootModelClass:e.modelClass(),upsertOptions:Object.assign({},this.upsertOptions,{noUpdate:!0,noDelete:!0,noUnrelate:!0,insertMissing:!0})}),e.resolve([]),r}},{key:"onBefore1",value:function(e,t){return t}},{key:"onBefore2",value:function(e,t){return this.relation?this.relation.executeBeforeInsert(this.models,e.context(),t):t}},{key:"onBefore3",value:function(e,t){return t}},{key:"onBuild",value:function(){}},{key:"onBuildKnex",value:function(){}},{key:"onAfter1",value:function(e){var t,r,o,i,s=arguments;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.upsert.run(e));case 2:for(r=s.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=s[i];return a.next=5,regeneratorRuntime.awrap((t=u(l(n.prototype),"onAfter1",this)).call.apply(t,[this,e].concat(o)));case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}},null,this)}},{key:"onAfter2",value:function(){return this.isArray?this.models:this.models[0]||null}},{key:"clone",value:function(){var e=u(l(n.prototype),"clone",this).call(this);return e.upsert=this.upsert,e}},{key:"models",get:function(){return this.delegate.models}},{key:"isArray",get:function(){return this.delegate.isArray}},{key:"relation",get:function(){return this.delegate.relation}}]),n}();module.exports={InsertGraphOperation:b};
},{"./DelegateOperation":"jzpj","./InsertOperation":"tIYw","../graph/GraphUpsert":"M0oJ"}],"lShn":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?i(t):r}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=require("./DelegateOperation"),l=c.DelegateOperation,f=require("./InsertGraphOperation"),p=f.InsertGraphOperation,y=require("../RelationExpression"),h=y.RelationExpression,b=function(e){function r(e,n){var i;if(t(this,r),!(i=o(this,u(r).call(this,e,n))).delegate.is(p))throw new Error("Invalid delegate");return i}return a(r,l),n(r,[{key:"onAfter2",value:function(e){var t,r,n,o;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(0!==this.models.length){i.next=2;break}return i.abrupt("return",this.isArray?[]:null);case 2:return t=h.fromModelGraph(this.models),r=this.models[0].constructor,n=this.models.map(function(e){return e.$id()}),i.next=7,regeneratorRuntime.awrap(r.query().childQueryOf(e).findByIds(n).withGraphFetched(t));case 7:return o=i.sent,i.abrupt("return",this.isArray?o:o[0]||null);case 9:case"end":return i.stop()}},null,this)}},{key:"models",get:function(){return this.delegate.models}},{key:"isArray",get:function(){return this.delegate.isArray}}]),r}();module.exports={InsertGraphAndFetchOperation:b};
},{"./DelegateOperation":"jzpj","./InsertGraphOperation":"Sbek","../RelationExpression":"qujN"}],"z46k":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?i(e):r}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=l(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function l(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=require("../queryBuilder/operations/FindOperation"),f=c.FindOperation,y=function(t){function r(t,n){var i;return e(this,r),(i=o(this,a(r).call(this,t,n))).relation=n.relation,i.owner=n.owner,i.alwaysReturnArray=!1,i.assignResultToOwner=!0,i.relationProperty=n.relationProperty||i.relation.name,i.omitProps=[],i.alias=null,i}return u(r,f),n(r,[{key:"onBuild",value:function(t){this.maybeApplyAlias(t),this.relation.findQuery(t,this.owner),this.assignResultToOwner&&this.owner.isModels&&this.selectMissingJoinColumns(t)}},{key:"onAfter2",value:function(t,e){var r=this.relation.isOneToOne();if(this.assignResultToOwner&&this.owner.isModels){for(var n=this.owner.modelArray,o=new Map,i=0,s=e.length;i<s;++i){var l=e[i],a=this.relation.relatedProp.propKey(l),u=o.get(a);u||(u=[],o.set(a,u)),u.push(l)}for(var p=0,c=n.length;p<c;++p){var f=n[p],y=this.relation.ownerProp.propKey(f),h=o.get(y);f[this.relationProperty]=r?h&&h[0]||null:h||[]}}return e}},{key:"onAfter3",value:function(t,e){var n=this.relation.isOneToOne();return t.internalOptions().keepImplicitJoinProps||this.omitImplicitJoinProps(e),!this.alwaysReturnArray&&n&&e.length<=1&&(e=e[0]||void 0),s(a(r.prototype),"onAfter3",this).call(this,t,e)}},{key:"selectMissingJoinColumns",value:function(t){for(var e=this.relation.relatedProp,r=[],n=0,o=e.size;n<o;++n){var i=e.ref(t,n).fullColumn(t),s=e.props[n],l=e.cols[n];t.hasSelectionAs(i,l)||-1!==r.indexOf(i)||(this.omitProps.push(s),r.push(i))}r.length&&t.select(r)}},{key:"maybeApplyAlias",value:function(t){!t.alias()&&this.alias&&t.alias(this.alias)}},{key:"omitImplicitJoinProps",value:function(t){var e=this.relation.relatedModelClass;if(!this.omitProps.length||!t)return t;if(!Array.isArray(t))return this.omitImplicitJoinPropsFromOne(e,t);if(!t.length)return t;for(var r=0,n=t.length;r<n;++r)this.omitImplicitJoinPropsFromOne(e,t[r]);return t}},{key:"omitImplicitJoinPropsFromOne",value:function(t,e){for(var r=0,n=this.omitProps.length;r<n;++r)t.omitImpl(e,this.omitProps[r]);return e}},{key:"clone",value:function(){var t=s(a(r.prototype),"clone",this).call(this);return t.alwaysReturnArray=this.alwaysReturnArray,t.assignResultToOwner=this.assignResultToOwner,t.relationProperty=this.relationProperty,t.omitProps=this.omitProps.slice(),t.alias=this.alias,t}}]),r}();module.exports={RelationFindOperation:y};
},{"../queryBuilder/operations/FindOperation":"WHDH"}],"h5yg":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return o(t)||n(t,e)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,o=!1,u=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(a){o=!0,u=a}finally{try{n||null==c.return||c.return()}finally{if(o)throw u}}return r}}function o(t){if(Array.isArray(t))return t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function a(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?l(e):r}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=f(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b=require("./QueryBuilderOperation"),O=b.QueryBuilderOperation,d=require("../graph/GraphUpsert"),v=d.GraphUpsert,w=require("../../relations/RelationFindOperation"),g=w.RelationFindOperation,m=function(t){function r(t,e){var n;return u(this,r),(n=a(this,p(r).call(this,t,Object.assign({},e,{upsertOptions:{}})))).upsertOptions=e.upsertOptions||{},n.upsert=null,n}return y(r,O),c(r,[{key:"onAdd",value:function(t,r){var n=e(r,1)[0];return this.upsert=new v({objects:n,rootModelClass:t.modelClass(),upsertOptions:this.upsertOptions}),t.resolve([]),!0}},{key:"onAfter1",value:function(t){if(j(t))throw new Error("upsertGraph query should contain no other query builder calls like `findById`, `where` or `$relatedQuery` that would affect the SQL. They have no effect.");return this.upsert.run(t)}},{key:"clone",value:function(){var t=s(p(r.prototype),"clone",this).call(this);return t.upsert=this.upsert,t}},{key:"models",get:function(){return this.upsert.objects}},{key:"isArray",get:function(){return this.upsert.isArray}}]),r}();function j(t){return t.has(/where/)||t.has(g)}module.exports={UpsertGraphOperation:m};
},{"./QueryBuilderOperation":"ik4h","../graph/GraphUpsert":"M0oJ","../../relations/RelationFindOperation":"z46k"}],"VFhm":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?i(t):r}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=require("./DelegateOperation"),l=c.DelegateOperation,f=require("./UpsertGraphOperation"),p=f.UpsertGraphOperation,y=require("../RelationExpression"),h=y.RelationExpression,b=function(e){function r(e,n){var i;if(t(this,r),!(i=o(this,u(r).call(this,e,n))).delegate.is(p))throw new Error("Invalid delegate");return i}return a(r,l),n(r,[{key:"onAfter3",value:function(e){var t,r,n,o;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(0!==this.models.length){i.next=2;break}return i.abrupt("return",this.isArray?[]:null);case 2:return t=h.fromModelGraph(this.models),r=this.models[0].constructor,n=this.models.map(function(e){return e.$id()}),i.next=7,regeneratorRuntime.awrap(r.query().childQueryOf(e).findByIds(n).withGraphFetched(t));case 7:return o=i.sent,i.abrupt("return",this.isArray?o:o[0]||null);case 9:case"end":return i.stop()}},null,this)}},{key:"models",get:function(){return this.delegate.models}},{key:"isArray",get:function(){return this.delegate.isArray}}]),r}();module.exports={UpsertGraphAndFetchOperation:b};
},{"./DelegateOperation":"jzpj","./UpsertGraphOperation":"h5yg","../RelationExpression":"qujN"}],"Wr7H":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?u(t):r}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=c(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=require("./InsertOperation"),p=s.InsertOperation,y=require("./DelegateOperation"),b=y.DelegateOperation,d=require("../../model/modelUtils"),h=d.keyByProps,O=require("../../utils/objectUtils"),g=O.asArray,m=function(e){function r(e,n){var u;if(t(this,r),!(u=o(this,a(r).call(this,e,n))).delegate.is(p))throw new Error("Invalid delegate");return u}return f(r,b),n(r,[{key:"onAfter2",value:function(e,t){var n,o,u,c,f,l,s;return regeneratorRuntime.async(function(p){for(;;)switch(p.prev=p.next){case 0:return n=e.modelClass(),p.next=3,regeneratorRuntime.awrap(i(a(r.prototype),"onAfter2",this).call(this,e,t));case 3:return o=p.sent,u=g(o),c=n.getIdPropertyArray(),f=u.map(function(e){return e.$id()}),p.next=9,regeneratorRuntime.awrap(n.query().childQueryOf(e).findByIds(f).castTo(e.resultModelClass()));case 9:return l=p.sent,s=h(l,c),u.forEach(function(e){e.$set(s.get(e.$propKey(c)))}),p.abrupt("return",o);case 13:case"end":return p.stop()}},null,this)}}]),r}();module.exports={InsertAndFetchOperation:m};
},{"./InsertOperation":"tIYw","./DelegateOperation":"jzpj","../../model/modelUtils":"cwbn","../../utils/objectUtils":"WAAQ"}],"TFLo":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?i(t):r}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=a(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=require("./DelegateOperation"),p=f.DelegateOperation,d=require("./UpdateOperation"),y=d.UpdateOperation,h=function(e){function r(e,n){var i;if(t(this,r),!(i=o(this,c(r).call(this,e,n))).delegate.is(y))throw new Error("Invalid delegate");return i.id=null,i.skipIdWhere=!1,i}return l(r,p),n(r,[{key:"onAdd",value:function(e,t){return this.id=t[0],this.delegate.onAdd(e,t.slice(1))}},{key:"onBuild",value:function(e){this.skipIdWhere||e.findById(this.id),u(c(r.prototype),"onBuild",this).call(this,e)}},{key:"onAfter2",value:function(e,t){var n,o=this;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(0!=t){i.next=4;break}return i.next=3,regeneratorRuntime.awrap(u(c(r.prototype),"onAfter2",this).call(this,e,t));case 3:return i.abrupt("return",void 0);case 4:return i.next=6,regeneratorRuntime.awrap(e.emptyInstance().childQueryOf(e).modify(function(e){o.skipIdWhere||e.findById(o.id)}).castTo(e.resultModelClass()));case 6:return(n=i.sent)&&this.model.$set(n),i.next=10,regeneratorRuntime.awrap(u(c(r.prototype),"onAfter2",this).call(this,e,t));case 10:return i.abrupt("return",n?this.model:void 0);case 11:case"end":return i.stop()}},null,this)}},{key:"clone",value:function(){var e=u(c(r.prototype),"clone",this).call(this);return e.id=this.id,e.skipIdWhere=this.skipIdWhere,e}},{key:"model",get:function(){return this.delegate.model}}]),r}();module.exports={UpdateAndFetchOperation:h};
},{"./DelegateOperation":"jzpj","./UpdateOperation":"KA5i"}],"QYGV":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?i(t):r}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,r){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=a(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=require("./QueryBuilderOperation"),p=f.QueryBuilderOperation,y=require("../RelationExpression"),d=y.RelationExpression,b=require("../join/RelationJoiner"),h=b.RelationJoiner,v=require("../../utils/objectUtils"),m=v.isString,O=function(e){function r(e,n){var i;return t(this,r),(i=o(this,u(r).call(this,e,n))).calls=[],i}return c(r,p),n(r,[{key:"addCall",value:function(e){this.calls.push(e)}},{key:"onBuild",value:function(e){var t=e.modelClass(),r=this.joinOperation,n=d.create(),o=!0,i=!1,l=void 0;try{for(var a,u=this.calls[Symbol.iterator]();!(o=(a=u.next()).done);o=!0){var c=a.value,s=d.create(c.expression).toPojo(),f=s.$childNames,p=c.options||{};1===f.length&&g(s,t,e,p),p.aliases&&j(s,t,p),n=n.merge(s)}}catch(b){i=!0,l=b}finally{try{o||null==u.return||u.return()}finally{if(i)throw l}}var y=new h({modelClass:t});y.setOptions({joinOperation:r}),y.setExpression(n),y.setModifiers(e.modifiers()),y.build(e,!1)}},{key:"clone",value:function(){var e=l(u(r.prototype),"clone",this).call(this);return e.calls=this.calls.slice(),e}},{key:"joinOperation",get:function(){return this.opt.joinOperation}}]),r}();function g(e,t,r,n){var o=e.$childNames[0],i=e[o],l=t.getRelation(i.$relation),a=o;!1===n.alias?a=r.tableRefFor(l.relatedModelClass):m(n.alias)&&(a=n.alias),o!==a&&w(e,o,a)}function j(e,t,r){var n=!0,o=!1,i=void 0;try{for(var l,a=e.$childNames[Symbol.iterator]();!(n=(l=a.next()).done);n=!0){var u=l.value,c=e[u],s=t.getRelation(c.$relation),f=r.aliases[c.$relation];f&&f!==u&&w(e,u,f),j(c,s.relatedModelClass,r)}}catch(p){o=!0,i=p}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}}function w(e,t,r){var n=e[t];delete e[t],e[r]=n,n.$name=r,e.$childNames=e.$childNames.map(function(e){return e===t?r:e})}module.exports={JoinRelatedOperation:O};
},{"./QueryBuilderOperation":"ik4h","../RelationExpression":"qujN","../join/RelationJoiner":"yMls","../../utils/objectUtils":"WAAQ"}],"hHvH":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?u(e):n}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=c(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=require("./QueryBuilderOperation"),y=p.QueryBuilderOperation,s=function(t){function n(t,r){var u;return e(this,n),(u=o(this,f(n).call(this,t,r))).func=null,u}return l(n,y),r(n,[{key:"onAdd",value:function(t,e){return this.func=e[0],!0}},{key:"onBuildKnex",value:function(t,e){return this.func.call(t,t,e)}},{key:"clone",value:function(){var t=i(f(n.prototype),"clone",this).call(this);return t.func=this.func,t}}]),n}();module.exports={OnBuildKnexOperation:s};
},{"./QueryBuilderOperation":"ik4h"}],"qWkQ":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?u(e):n}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=require("./QueryBuilderOperation"),y=p.QueryBuilderOperation,s=function(t){function n(t,r){var u;return e(this,n),(u=o(this,f(n).call(this,t,r))).func=null,u}return l(n,y),r(n,[{key:"onAdd",value:function(t,e){return this.func=e[0],!0}},{key:"onBefore1",value:function(t,e){return this.func.call(t,e,t)}},{key:"clone",value:function(){var t=c(f(n.prototype),"clone",this).call(this);return t.func=this.func,t}}]),n}();module.exports={RunBeforeOperation:s};
},{"./QueryBuilderOperation":"ik4h"}],"BKA4":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?u(e):n}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=require("./QueryBuilderOperation"),y=p.QueryBuilderOperation,s=function(t){function n(t,r){var u;return e(this,n),(u=o(this,f(n).call(this,t,r))).func=null,u}return l(n,y),r(n,[{key:"onAdd",value:function(t,e){return this.func=e[0],!0}},{key:"onAfter3",value:function(t,e){return this.func.call(t,e,t)}},{key:"clone",value:function(){var t=c(f(n.prototype),"clone",this).call(this);return t.func=this.func,t}}]),n}();module.exports={RunAfterOperation:s};
},{"./QueryBuilderOperation":"ik4h"}],"yDrf":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=c(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=require("./QueryBuilderOperation"),y=p.QueryBuilderOperation,s=function(t){function n(t,r){var i;return e(this,n),(i=o(this,l(n).call(this,t,r))).id=null,i}return f(n,y),r(n,[{key:"onAdd",value:function(t,e){return this.id=e[0],u(l(n.prototype),"onAdd",this).call(this,t,e)}},{key:"onBuild",value:function(t){t.whereComposite(t.fullIdColumn(),this.id)}},{key:"clone",value:function(){var t=u(l(n.prototype),"clone",this).call(this);return t.id=this.id,t}}]),n}();module.exports={FindByIdOperation:s};
},{"./QueryBuilderOperation":"ik4h"}],"nlAK":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=c(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=require("./QueryBuilderOperation"),s=p.QueryBuilderOperation,y=function(t){function n(t,r){var i;return e(this,n),(i=o(this,l(n).call(this,t,r))).ids=null,i}return f(n,s),r(n,[{key:"onAdd",value:function(t,e){return this.ids=e[0],u(l(n.prototype),"onAdd",this).call(this,t,e)}},{key:"onBuild",value:function(t){t.whereInComposite(t.fullIdColumn(),this.ids)}},{key:"clone",value:function(){var t=u(l(n.prototype),"clone",this).call(this);return t.ids=this.ids,t}}]),n}();module.exports={FindByIdsOperation:y};
},{"./QueryBuilderOperation":"ik4h"}],"KqTX":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?u(e):n}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=c(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=require("./QueryBuilderOperation"),y=p.QueryBuilderOperation,s=function(t){function n(t,r){var u;return e(this,n),(u=o(this,f(n).call(this,t,r))).func=null,u}return l(n,y),r(n,[{key:"onAdd",value:function(t,e){return this.func=e[0],!0}},{key:"onBuild",value:function(t){return this.func.call(t,t)}},{key:"clone",value:function(){var t=i(f(n.prototype),"clone",this).call(this);return t.func=this.func,t}}]),n}();module.exports={OnBuildOperation:s};
},{"./QueryBuilderOperation":"ik4h"}],"BnJW":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?u(e):n}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=require("./QueryBuilderOperation"),y=p.QueryBuilderOperation,s=function(t){function n(t,r){var u;return e(this,n),(u=o(this,f(n).call(this,t,r))).func=null,u}return l(n,y),r(n,[{key:"onAdd",value:function(t,e){return this.func=e[0],!0}},{key:"onError",value:function(t,e){return this.func.call(t,e,t)}},{key:"clone",value:function(){var t=c(f(n.prototype),"clone",this).call(this);return t.func=this.func,t}}]),n}();module.exports={OnErrorOperation:s};
},{"./QueryBuilderOperation":"ik4h"}],"u1ae":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?u(t):r}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=l(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=require("./QueryBuilderOperation"),p=s.QueryBuilderOperation,y=function(e){function r(e,n){var u;return t(this,r),(u=o(this,c(r).call(this,e,n))).resultSizeBuilder=null,u}return f(r,p),n(r,[{key:"onAdd",value:function(e,t){if(2===t.length){var r=t[0],n=t[1];e.limit(n-r+1).offset(r)}return!0}},{key:"onBefore1",value:function(e,t){return this.resultSizeBuilder=e.clone(),i(c(r.prototype),"onBefore1",this).call(this,e,t)}},{key:"onAfter3",value:function(e,t){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.resultSizeBuilder.resultSize());case 2:return r=e.sent,e.abrupt("return",{results:t,total:parseInt(r)});case 4:case"end":return e.stop()}},null,this)}},{key:"clone",value:function(){var e=i(c(r.prototype),"clone",this).call(this);return e.resultSizeBuilder=this.resultSizeBuilder,e}}]),r}();module.exports={RangeOperation:y};
},{"./QueryBuilderOperation":"ik4h"}],"jHqJ":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=require("./QueryBuilderOperation"),a=l.QueryBuilderOperation,p=function(t){function n(){return e(this,n),o(this,u(n).apply(this,arguments))}return f(n,a),r(n,[{key:"onBuildKnex",value:function(t,e){var n=e.modelClass();e.isFind()&&n.useLimitInFirst&&t.limit(1)}},{key:"onAfter3",value:function(t,e){return Array.isArray(e)?e[0]:e}}]),n}();module.exports={FirstOperation:p};
},{"./QueryBuilderOperation":"ik4h"}],"ck6H":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=a(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=require("./ObjectionToKnexConvertingOperation"),b=f.ObjectionToKnexConvertingOperation,p=require("../../utils/objectUtils"),y=p.isPlainObject,h=p.isString,m=/\s+as\s+/i,O=function(t){function n(t,r){var i;return e(this,n),(i=o(this,u(n).call(this,t,r))).table=null,i.alias=null,i}return c(n,b),r(n,[{key:"onAdd",value:function(t,e){var r=l(u(n.prototype),"onAdd",this).call(this,t,e),o=g(this.args[0],t);return o.table&&(t.tableName(o.table),this.table=o.table),o.alias&&(t.aliasFor(t.modelClass().getTableName(),o.alias),this.alias=o.alias),r}},{key:"onBuildKnex",value:function(t,e){t.from.apply(t,this.getKnexArgs(e))}},{key:"clone",value:function(){var t=l(u(n.prototype),"clone",this).call(this);return t.table=this.table,t.alias=this.alias,t}}]),n}();function g(t,e){return h(t)?v(t):y(t)?d(t,e):{table:null,alias:null}}function v(t){if(m.test(t)){var e=t.split(m);return{table:e[0].trim(),alias:e[1].trim()}}return{table:t.trim(),alias:null}}function d(t,e){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n],i=t[o].trim();if(i===e.modelClass().getTableName())return{alias:o,table:i}}throw new Error("one of the tables in ".concat(JSON.stringify(t)," must be the query's model class's table."))}module.exports={FromOperation:O};
},{"./ObjectionToKnexConvertingOperation":"rMML","../../utils/objectUtils":"WAAQ"}],"Hc2E":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function a(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?o(t):r}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=l(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=require("db-errors"),p=c.wrapError,f=require("./RawBuilder"),y=f.raw,v=require("../utils/deprecate"),m=v.deprecate,O=require("../utils/createModifier"),g=O.createModifier,w=require("../model/ValidationError"),k=w.ValidationErrorType,b=require("../utils/objectUtils"),F=b.isObject,_=b.isString,E=b.isFunction,A=b.last,R=b.flatten,x=require("./RelationExpression"),G=x.RelationExpression,B=x.DuplicateRelationError,J=require("./operations/select/Selection"),C=J.Selection,j=require("./QueryBuilderContext"),Q=j.QueryBuilderContext,q=require("./QueryBuilderBase"),I=q.QueryBuilderBase,S=require("./operations/FindOperation"),U=S.FindOperation,P=require("./operations/DeleteOperation"),N=P.DeleteOperation,T=require("./operations/UpdateOperation"),M=T.UpdateOperation,W=require("./operations/InsertOperation"),Y=W.InsertOperation,V=require("./operations/RelateOperation"),D=V.RelateOperation,K=require("./operations/UnrelateOperation"),$=K.UnrelateOperation,z=require("./operations/eager/JoinEagerOperation"),H=z.JoinEagerOperation,L=require("./operations/eager/NaiveEagerOperation"),X=L.NaiveEagerOperation,Z=require("./operations/eager/WhereInEagerOperation"),ee=Z.WhereInEagerOperation,te=require("./operations/InsertGraphAndFetchOperation"),re=te.InsertGraphAndFetchOperation,ne=require("./operations/UpsertGraphAndFetchOperation"),ie=ne.UpsertGraphAndFetchOperation,ae=require("./operations/InsertAndFetchOperation"),oe=ae.InsertAndFetchOperation,ue=require("./operations/UpdateAndFetchOperation"),le=ue.UpdateAndFetchOperation,se=require("./operations/JoinRelatedOperation"),he=se.JoinRelatedOperation,de=require("./operations/OnBuildKnexOperation"),ce=de.OnBuildKnexOperation,pe=require("./operations/InsertGraphOperation"),fe=pe.InsertGraphOperation,ye=require("./operations/UpsertGraphOperation"),ve=ye.UpsertGraphOperation,me=require("./operations/RunBeforeOperation"),Oe=me.RunBeforeOperation,ge=require("./operations/RunAfterOperation"),we=ge.RunAfterOperation,ke=require("./operations/FindByIdOperation"),be=ke.FindByIdOperation,Fe=require("./operations/FindByIdsOperation"),_e=Fe.FindByIdsOperation,Ee=require("./operations/OnBuildOperation"),Ae=Ee.OnBuildOperation,Re=require("./operations/OnErrorOperation"),xe=Re.OnErrorOperation,Ge=require("./operations/select/SelectOperation"),Be=Ge.SelectOperation,Je=require("./operations/eager/EagerOperation"),Ce=Je.EagerOperation,je=require("./operations/RangeOperation"),Qe=je.RangeOperation,qe=require("./operations/FirstOperation"),Ie=qe.FirstOperation,Se=require("./operations/FromOperation"),Ue=Se.FromOperation,Pe=require("./operations/KnexOperation"),Ne=Pe.KnexOperation,Te=function(e){function n(){return r(this,n),a(this,s(n).apply(this,arguments))}return h(n,I),i(n,[{key:"tableNameFor",value:function(e,t){return u(s(n.prototype),"tableNameFor",this).call(this,Me(e),t)}},{key:"tableName",value:function(e){return this.tableNameFor(this.modelClass().getTableName(),e)}},{key:"tableRef",value:function(){return this.tableRefFor(this.modelClass().getTableName())}},{key:"aliasFor",value:function(e,t){return u(s(n.prototype),"aliasFor",this).call(this,Me(e),t)}},{key:"alias",value:function(e){return this.aliasFor(this.modelClass().getTableName(),e)}},{key:"fullIdColumnFor",value:function(e){var t=this.tableRefFor(e),r=e.getIdColumn();return Array.isArray(r)?r.map(function(e){return"".concat(t,".").concat(e)}):"".concat(t,".").concat(r)}},{key:"fullIdColumn",value:function(){return this.fullIdColumnFor(this.modelClass())}},{key:"applyModifier",value:function(){m("applyModifier is deprecated. Use the modify method instead. applyModifier will be removed in objection 3.0");for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.modify(R(t))}},{key:"applyFilter",value:function(){m("applyFilter is deprecated. Use the modify method instead. applyFilter will be removed in objection 3.0");for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.modify(R(t))}},{key:"modifiers",value:function(e){return 0===arguments.length?{...this._modifiers}:(this._modifiers={...this._modifiers,...e},this)}},{key:"modify",value:function(e){if(!e)return this;e=g({modifier:e,modelClass:this.modelClass(),modifiers:this._modifiers});for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.apply(void 0,[this].concat(r)),this}},{key:"reject",value:function(e){return this._explicitRejectValue=e,this}},{key:"resolve",value:function(e){return this._explicitResolveValue=e,this}},{key:"isExplicitlyResolvedOrRejected",value:function(){return!(!this._explicitRejectValue&&!this._explicitResolveValue)}},{key:"isExecutable",value:function(){return!this.isExplicitlyResolvedOrRejected()&&!Le(this)}},{key:"findOperationFactory",value:function(e){return this._findOperationFactory=e,this}},{key:"insertOperationFactory",value:function(e){return this._insertOperationFactory=e,this}},{key:"updateOperationFactory",value:function(e){return this._updateOperationFactory=e,this}},{key:"patchOperationFactory",value:function(e){return this._patchOperationFactory=e,this}},{key:"deleteOperationFactory",value:function(e){return this._deleteOperationFactory=e,this}},{key:"relateOperationFactory",value:function(e){return this._relateOperationFactory=e,this}},{key:"unrelateOperationFactory",value:function(e){return this._unrelateOperationFactory=e,this}},{key:"withGraphFetched",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._withGraph(e,t,Ve(this))}},{key:"withGraphJoined",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._withGraph(e,t,De(this))}},{key:"_withGraph",value:function(e,t,r){var n=We(this,r),i=ze(this.modelClass(),e);return n.expression=n.expression.merge(i),n.graphOptions={...n.graphOptions,...t},He(this),this}},{key:"eagerAlgorithm",value:function(){return m("`QueryBuilder#eagerAlgorithm` method is deprecated. You should explicitly use either withGraphFetched or withGraphJoined methods. `eagerAlgoritm` method will be removed in 3.0"),this._eagerAlgorithm.apply(this,arguments)}},{key:"_eagerAlgorithm",value:function(e,t){return We(this,e),t&&this._eagerOptions(t),this}},{key:"eager",value:function(){return m("`QueryBuilder#eager` method is deprecated. You should use the `withGraphFetched` method instead. `eager` method will be removed in 3.0"),this._eager.apply(this,arguments)}},{key:"_eager",value:function(e,t){return We(this).expression=ze(this.modelClass(),e),He(this),t&&this.clearModifiers().modifiers(t),this}},{key:"joinEager",value:function(e,t){return m("`QueryBuilder#joinEager` method is deprecated. You should use the `withGraphJoined` method instead. `joinEager` method will be removed in 3.0"),this._eagerAlgorithm(De(this))._eager(e,t)}},{key:"naiveEager",value:function(e,t){return m("`QueryBuilder#naiveEager` method is deprecated. You should use the `withGraphFetched` method with the `maxBatchSize: 1` option instead. `naiveEager` method will be removed in 3.0"),this._eagerAlgorithm(Ke(this))._eager(e,t)}},{key:"mergeEager",value:function(){return m("`QueryBuilder#mergeEager` method is deprecated. You should use the `withGraphFetched` method instead. `mergeEager` method will be removed in 3.0"),this._mergeEager.apply(this,arguments)}},{key:"_mergeEager",value:function(e,t){var r=We(this);return r.expression=r.expression.merge(ze(this.modelClass(),e)),He(this),this.modifiers(t)}},{key:"mergeJoinEager",value:function(e,t){return m("`QueryBuilder#mergeJoinEager` method is deprecated. You should use the `withGraphJoined` method instead. `mergeJoinEager` method will be removed in 3.0"),this._eagerAlgorithm(this.modelClass().JoinEagerAlgorithm)._mergeEager(e,t)}},{key:"mergeNaiveEager",value:function(e,t){return m("`QueryBuilder#mergeNaiveEager` method is deprecated. You should use the `withGraphFetched` method with the `maxBatchSize: 1` option instead. `mergeNaiveEager` method will be removed in 3.0"),this._eagerAlgorithm(this.modelClass().NaiveEagerAlgorithm)._mergeEager(e,t)}},{key:"allowEager",value:function(e){return m("`QueryBuilder#allowEager` method is deprecated. You should use `allowGraph` instead. `allowEager` method will be removed in 3.0"),this.clearAllowGraph().allowGraph(e)}},{key:"allowGraph",value:function(e){var t=this._allowedGraphExpression||G.create();return this._allowedGraphExpression=t.merge(ze(this.modelClass(),e)),He(this),this}},{key:"allowedGraphExpression",value:function(){return this._allowedGraphExpression}},{key:"mergeAllowEager",value:function(e){return m("`QueryBuilder#mergeAllowEager` method is deprecated. You should use `allowGraph` instead. `mergeAllowEager` method will be removed in 3.0"),this.allowGraph(e)}},{key:"eagerObject",value:function(){return m("`QueryBuilder#eagerObject` method is deprecated. You should use `graphExpressionObject` instead. `eagerObject` method will be removed in 3.0"),this.graphExpressionObject()}},{key:"graphExpressionObject",value:function(){var e=this.findOperation(Ce);return e&&!e.expression.isEmpty?e.expression.toPojo():null}},{key:"eagerModifiers",value:function(){return m("`QueryBuilder#eagerModifiers` method is deprecated. You should use `modifiers` instead. `eagerModifiers` method will be removed in 3.0"),this.modifiers()}},{key:"eagerModifiersAtPath",value:function(){return m("`QueryBuilder#eagerModifiersAtPath` method is deprecated. You should use `graphModifiersAtPath` instead. `eagerModifiersAtPath` method will be removed in 3.0"),this.graphModifiersAtPath()}},{key:"graphModifiersAtPath",value:function(){var e=this.findOperation(Ce);return e&&!e.expression.isEmpty?e.modifiersAtPath.map(function(e){return Object.assign({},e)}):[]}},{key:"modifyEager",value:function(){return m("`QueryBuilder#modifyEager` method is deprecated. You should use `modifyGraph` instead. `modifyEager` method will be removed in 3.0"),this.modifyGraph.apply(this,arguments)}},{key:"modifyGraph",value:function(e,t){return We(this).modifiersAtPath.push({path:e,modifier:t}),this}},{key:"filterEager",value:function(){return m("`QueryBuilder#filterEager` method is deprecated. You should use `modifyGraph` instead. `filterEager` method will be removed in 3.0"),this.modifyGraph.apply(this,arguments)}},{key:"allowUpsert",value:function(e){return m("`QueryBuilder#allowUpsert` method is deprecated. You should use `allowGraph` instead. `allowUpsert` method will be removed in 3.0"),this.clearAllowGraph().allowGraph(e)}},{key:"allowInsert",value:function(e){return m("`QueryBuilder#allowInsert` method is deprecated. You should use `allowGraph` instead. `allowInsert` method will be removed in 3.0"),this.clearAllowGraph().allowGraph(e)}},{key:"eagerOptions",value:function(){return m("`QueryBuilder#eagerOptions` method is deprecated. You should use `withGraphFetched` or `withGraphJoined` and pass options in the second argument. `eagerOptions` method will be removed in 3.0"),this._eagerOptions.apply(this,arguments)}},{key:"_eagerOptions",value:function(e){var t=We(this);return t.graphOptions=Object.assign({},t.graphOptions,e),this}},{key:"findOptions",value:function(e){return 0!==arguments.length?(this._findOperationOptions=Object.assign({},this._findOperationOptions,e),this):this._findOperationOptions}},{key:"resultModelClass",value:function(){return this._resultModelClass||this.modelClass()}},{key:"isFind",value:function(){return!(this.isInsert()||this.isUpdate()||this.isDelete()||this.isRelate()||this.isUnrelate())}},{key:"isInsert",value:function(){return this.has(Y)}},{key:"isUpdate",value:function(){return this.has(M)}},{key:"isDelete",value:function(){return this.has(N)}},{key:"isRelate",value:function(){return this.has(D)}},{key:"isUnrelate",value:function(){return this.has($)}},{key:"hasWheres",value:function(){return this.has(I.WhereSelector)}},{key:"hasSelects",value:function(){return this.has(I.SelectSelector)}},{key:"hasEager",value:function(){return m("QueryBuilder#hasEager is deprecated. Use hasWithGraph instead. This method will be removed in version 3.0"),this.hasWithGraph()}},{key:"hasWithGraph",value:function(){var e=this.findOperation(Ce);return!!e&&!e.expression.isEmpty}},{key:"isSelectAll",value:function(){if(0===this._operations.length)return!0;var e=this.tableRef(),t=this.tableName();return this.everyOperation(function(r){return r.constructor===Be?r.selections.length>0&&r.selections.every(function(t){return(!t.table||t.table===e)&&"*"===t.column}):r.constructor===Ue?r.table===t:!("as"!==r.name&&!r.is(U))})}},{key:"isFindQuery",value:function(){return m("isFindQuery is deprecated. Use isFind instead. This method will be removed in version 2.0"),this.isFind()}},{key:"isEagerQuery",value:function(){return m("isEagerQuery is deprecated. Use hasWithGraph instead. This method will be removed in version 2.0"),this.hasEager()}},{key:"toString",value:function(){return"[object QueryBuilder]"}},{key:"toFindQuery",value:function(){return this.clone().clear(function(e){return e.is(Y)||e.is(M)||e.is(N)})}},{key:"clone",value:function(){var e=this.emptyInstance();return this.baseCloneInto(e),e._resultModelClass=this._resultModelClass,e._explicitRejectValue=this._explicitRejectValue,e._explicitResolveValue=this._explicitResolveValue,e._modifiers={...this._modifiers},e._allowedGraphExpression=this._allowedGraphExpression,e._findOperationOptions=this._findOperationOptions,e._relatedQueryFor=this._relatedQueryFor,e}},{key:"emptyInstance",value:function(){var e=new this.constructor(this.modelClass());return e._findOperationFactory=this._findOperationFactory,e._insertOperationFactory=this._insertOperationFactory,e._updateOperationFactory=this._updateOperationFactory,e._patchOperationFactory=this._patchOperationFactory,e._relateOperationFactory=this._relateOperationFactory,e._unrelateOperationFactory=this._unrelateOperationFactory,e._deleteOperationFactory=this._deleteOperationFactory,e._relatedQueryFor=this._relatedQueryFor,e}},{key:"clearEager",value:function(){return m("`QueryBuilder#clearEager` method is deprecated. You should use `clearWithGraph` instead. `clearEager` method will be removed in 3.0"),this.clearWithGraph()}},{key:"clearWithGraph",value:function(){return this.clear(Ce),this}},{key:"clearWithGraphFetched",value:function(){return this.clear(ee),this}},{key:"clearAllowGraph",value:function(){return this._allowedGraphExpression=null,this}},{key:"clearModifiers",value:function(){return this._modifiers={},this}},{key:"clearReject",value:function(){return this._explicitRejectValue=null,this}},{key:"clearResolve",value:function(){return this._explicitResolveValue=null,this}},{key:"castTo",value:function(e){return this._resultModelClass=e,this}},{key:"then",value:function(){var e=this.execute();return e.then.apply(e,arguments)}},{key:"catch",value:function(){var e=this.execute();return e.catch.apply(e,arguments)}},{key:"resultSize",value:function(){var e,t,r,n;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.knex(),t=this.clone().clear(/orderBy|offset|limit/),r=e.count("* as count").from(function(e){t.toKnexQuery(e).as("temp")}),this.internalOptions().debug&&r.debug(),i.next=6,regeneratorRuntime.awrap(r);case 6:return n=i.sent,i.abrupt("return",n[0]&&n[0].count?parseInt(n[0].count):0);case 8:case"end":return i.stop()}},null,this)}},{key:"toKnexQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.knex().queryBuilder(),t=this.clone(),r=Le(t=ut(t=it(t)));return r?r.queryExecutor(t).toKnexQuery():st(t,e)}},{key:"execute",value:function(){var e,t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.clone(),r.prev=1,r.next=4,regeneratorRuntime.awrap(Xe(e));case 4:return r.next=6,regeneratorRuntime.awrap(Ze(e));case 6:return t=r.sent,r.next=9,regeneratorRuntime.awrap(et(e,t));case 9:return r.abrupt("return",r.sent);case 12:return r.prev=12,r.t0=r.catch(1),r.next=16,regeneratorRuntime.awrap(tt(e,r.t0));case 16:case"end":return r.stop()}},null,this,[[1,12]])}},{key:"pluck",value:function(e){return m("QueryBuilder#pluck is deprecated. This method will be removed in version 3.0"),this.runAfter(function(t){return Array.isArray(t)?t.map(function(t){return t&&t[e]}):F(t)?t[e]:t})}},{key:"throwIfNotFound",value:function(){var e=this;return this.runAfter(function(t){if(Array.isArray(t)&&0===t.length||null==t||0===t)throw e.modelClass().createNotFoundError(e.context());return t})}},{key:"findSelection",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!0,i=null;if(this.forEachOperation(!0,function(r){if(r.constructor===Be&&(i=r.findSelection(t,e),n=!1,i))return!1}),i)return i;if(n&&!r){var a=new C(this.tableRef(),"*");return C.doesSelect(this,a,e)?a:null}return null}},{key:"findAllSelections",value:function(){var e=[];return this.forEachOperation(!0,function(t){t.constructor===Be&&(e=e.concat(t.selections))}),e}},{key:"hasSelection",value:function(e,t){return null!==this.findSelection(e,t)}},{key:"hasSelectionAs",value:function(e,t,r){e=C.create(e);var n=this.findSelection(e,r);return null!==n&&("*"===n.column?e.column===t:n.name===t)}},{key:"traverse",value:function(e,t){var r=this;return void 0===t&&(t=e,e=null),this.runAfter(function(n){return r.resultModelClass().traverse(e,n,t),n})}},{key:"pick",value:function(e,t){return m("QueryBuilder#pick is deprecated. This method will be removed in version 3.0"),void 0===t&&(t=e,e=null),t=t.reduce(function(e,t){return e[t]=!0,e},{}),this.traverse(e,function(e){e.$pick(t)})}},{key:"omit",value:function(e,r){return m("QueryBuilder#omit is deprecated. This method will be removed in version 3.0"),void 0===r&&(r=e,e=null),r=Array.isArray(r)?r.reduce(function(e,t){return e[t]=!0,e},{}):t({},r,!0),this.traverse(e,function(e){e.$omit(r)})}},{key:"page",value:function(e,t){return this.range(+e*+t,(+e+1)*+t-1)}},{key:"columnInfo",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).table,t=void 0===e?null:e;t=t||this.tableName();var r=this.knex(),n=t.split("."),i=r(A(n)).columnInfo();return n.length>1&&i.withSchema(n[0]),this.internalOptions().debug&&i.debug(),i}},{key:"withSchema",value:function(e){return this.internalContext().onBuild.push(function(t){t.has(/withSchema/)||t.addOperationToFront(new Ne("withSchema"),[e])}),this}},{key:"debug",value:function(){return this.internalOptions().debug=!0,this.internalContext().onBuild.push(function(e){e.addOperation(new Ne("debug"),[])}),this}},{key:"insert",value:function(e){var t=this;return yt(this,function(){var r=t._insertOperationFactory(t);t.addOperation(r,[e])})}},{key:"insertAndFetch",value:function(e){var t=this;return yt(this,function(){var r=t._insertOperationFactory(t),n=new oe("insertAndFetch",{delegate:r});t.addOperation(n,[e])})}},{key:"insertGraph",value:function(e,t){var r=this;return yt(this,function(){var n=r._insertOperationFactory(r),i=new fe("insertGraph",{delegate:n,opt:t});r.addOperation(i,[e])})}},{key:"insertWithRelated",value:function(){return m("insertWithRelated is deprecated. Use insertGraph instead. This method will be removed in version 2.0"),this.insertGraph.apply(this,arguments)}},{key:"insertGraphAndFetch",value:function(e,t){var r=this;return yt(this,function(){var n=r._insertOperationFactory(r),i=new fe("insertGraph",{delegate:n,opt:t}),a=new re("insertGraphAndFetch",{delegate:i});return r.addOperation(a,[e])})}},{key:"insertWithRelatedAndFetch",value:function(){return m("insertWithRelatedAndFetch is deprecated. Use insertGraphAndFetch instead. This method will be removed in version 2.0"),this.insertGraphAndFetch.apply(this,arguments)}},{key:"update",value:function(e){var t=this;return yt(this,function(){var r=t._updateOperationFactory(t);t.addOperation(r,[e])})}},{key:"updateAndFetch",value:function(e){var t=this;return yt(this,function(){var r=t._updateOperationFactory(t);if(!(r.instance instanceof t.modelClass()))throw new Error("updateAndFetch can only be called for instance operations");var n=new le("updateAndFetch",{delegate:r});n.skipIdWhere=!0,t.addOperation(n,[r.instance.$id(),e])})}},{key:"updateAndFetchById",value:function(e,t){var r=this;return yt(this,function(){var n=r._updateOperationFactory(r),i=new le("updateAndFetch",{delegate:n});r.addOperation(i,[e,t])})}},{key:"upsertGraph",value:function(e,t){var r=this;return yt(this,function(){var n=new ve("upsertGraph",{upsertOptions:t});r.addOperation(n,[e])})}},{key:"upsertGraphAndFetch",value:function(e,t){var r=this;return yt(this,function(){var n=new ve("upsertGraph",{upsertOptions:t}),i=new ie("upsertGraphAndFetch",{delegate:n});return r.addOperation(i,[e])})}},{key:"patch",value:function(e){var t=this;return yt(this,function(){var r=t._patchOperationFactory(t);t.addOperation(r,[e])})}},{key:"patchAndFetch",value:function(e){var t=this;return yt(this,function(){var r=t._patchOperationFactory(t);if(!(r.instance instanceof t.modelClass()))throw new Error("patchAndFetch can only be called for instance operations");var n=new le("patchAndFetch",{delegate:r});n.skipIdWhere=!0,t.addOperation(n,[r.instance.$id(),e])})}},{key:"patchAndFetchById",value:function(e,t){var r=this;return yt(this,function(){var n=r._patchOperationFactory(r),i=new le("patchAndFetch",{delegate:n});r.addOperation(i,[e,t])})}},{key:"delete",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return yt(this,function(){if(r.length)throw new Error("Don't pass arguments to delete(). You should use it like this: delete().where('foo', 'bar').andWhere(...)");var t=e._deleteOperationFactory(e);e.addOperation(t,r)})}},{key:"del",value:function(){return this.delete.apply(this,arguments)}},{key:"relate",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return yt(this,function(){var t=e._relateOperationFactory(e);e.addOperation(t,r)})}},{key:"unrelate",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return yt(this,function(){if(r.length)throw new Error("Don't pass arguments to unrelate(). You should use it like this: unrelate().where('foo', 'bar').andWhere(...)");var t=e._unrelateOperationFactory(e);e.addOperation(t,r)})}},{key:"increment",value:function(e,r){var n=this.modelClass().propertyNameToColumnName(e);return this.patch(t({},n,y("?? + ?",[n,r])))}},{key:"decrement",value:function(e,r){var n=this.modelClass().propertyNameToColumnName(e);return this.patch(t({},n,y("?? - ?",[n,r])))}},{key:"findOne",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.where.apply(this,t).first()}},{key:"range",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.clear(Qe).addOperation(new Qe("range"),t)}},{key:"first",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addOperation(new Ie("first"),t)}},{key:"joinRelated",value:function(e,t){return nt(this,"innerJoin").addCall({expression:e,options:t}),this}},{key:"joinRelation",value:function(){return m("joinRelation is deprecated. Use joinRelated instead. This method will be removed in version 3.0"),this.joinRelated.apply(this,arguments)}},{key:"innerJoinRelated",value:function(e,t){return nt(this,"innerJoin").addCall({expression:e,options:t}),this}},{key:"innerJoinRelation",value:function(){return m("innerJoinRelation is deprecated. Use innerJoinRelated instead. This method will be removed in version 3.0"),this.innerJoinRelated.apply(this,arguments)}},{key:"outerJoinRelated",value:function(e,t){return nt(this,"outerJoin").addCall({expression:e,options:t}),this}},{key:"outerJoinRelation",value:function(){return m("outerJoinRelation is deprecated. Use outerJoinRelated instead. This method will be removed in version 3.0"),this.outerJoinRelated.apply(this,arguments)}},{key:"fullOuterJoinRelated",value:function(e,t){return nt(this,"fullOuterJoin").addCall({expression:e,options:t}),this}},{key:"fullOuterJoinRelation",value:function(){return m("fullOuterJoinRelation is deprecated. Use fullOuterJoinRelated instead. This method will be removed in version 3.0"),this.fullOuterJoinRelated.apply(this,arguments)}},{key:"leftJoinRelated",value:function(e,t){return nt(this,"leftJoin").addCall({expression:e,options:t}),this}},{key:"leftJoinRelation",value:function(){return m("leftJoinRelation is deprecated. Use leftJoinRelated instead. This method will be removed in version 3.0"),this.leftJoinRelated.apply(this,arguments)}},{key:"leftOuterJoinRelated",value:function(e,t){return nt(this,"leftOuterJoin").addCall({expression:e,options:t}),this}},{key:"leftOuterJoinRelation",value:function(){return m("leftOuterJoinRelation is deprecated. Use leftOuterJoinRelated instead. This method will be removed in version 3.0"),this.leftOuterJoinRelated.apply(this,arguments)}},{key:"rightJoinRelated",value:function(e,t){return nt(this,"rightJoin").addCall({expression:e,options:t}),this}},{key:"rightJoinRelation",value:function(){return m("rightJoinRelation is deprecated. Use rightJoinRelated instead. This method will be removed in version 3.0"),this.rightJoinRelated.apply(this,arguments)}},{key:"rightOuterJoinRelated",value:function(e,t){return nt(this,"rightOuterJoin").addCall({expression:e,options:t}),this}},{key:"rightOuterJoinRelation",value:function(){return m("rightOuterJoinRelation is deprecated. Use rightOuterJoinRelated instead. This method will be removed in version 3.0"),this.rightOuterJoinRelated.apply(this,arguments)}},{key:"deleteById",value:function(){return this.findById.apply(this,arguments).delete()}},{key:"findById",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addOperation(new be("findById"),t).first()}},{key:"findByIds",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addOperation(new _e("findByIds"),t)}},{key:"runBefore",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addOperation(new Oe("runBefore"),t)}},{key:"onBuild",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addOperation(new Ae("onBuild"),t)}},{key:"onBuildKnex",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addOperation(new ce("onBuildKnex"),t)}},{key:"runAfter",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addOperation(new we("runAfter"),t)}},{key:"onError",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addOperation(new xe("onError"),t)}},{key:"from",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addOperation(new Ue("from"),t)}},{key:"table",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addOperation(new Ue("table"),t)}},{key:"for",value:function(e){return 0===arguments.length?this._relatedQueryFor:(this._relatedQueryFor=e,this)}}],[{key:"init",value:function(e,t){u(s(n),"init",this).call(this,e,t),e._resultModelClass=null,e._explicitRejectValue=null,e._explicitResolveValue=null,e._modifiers={},e._allowedGraphExpression=null,e._findOperationOptions=t.defaultFindOptions,e._relatedQueryFor=null,e._findOperationFactory=vt,e._insertOperationFactory=mt,e._updateOperationFactory=Ot,e._patchOperationFactory=gt,e._relateOperationFactory=wt,e._unrelateOperationFactory=kt,e._deleteOperationFactory=bt}},{key:"parseRelationExpression",value:function(e){return G.create(e).toPojo()}},{key:"QueryBuilderContext",get:function(){return Q}}]),n}();function Me(e){return _(e)?e:e.getTableName()}function We(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.modelClass().getDefaultGraphOptions(),n=e.findOperation(Ce);if(t){var i=$e(e,t);if(n instanceof i)return n;var a=new i("eager",{defaultGraphOptions:r});return n&&a.cloneFrom(n),e.clear(Ce),e.addOperation(a),a}if(n)return n;var o=new($e(e,Ye(e)))("eager",{defaultGraphOptions:r});return e.addOperation(o),o}function Ye(e){var t=e.modelClass().defaultEagerAlgorithm;return t!==Ve(e)&&m("Model.defaultEagerAlgorithm is deprecated. You need to use `withGraphFetched` or `withGraphJoined` explicitly. `defaultEagerAlgorithm` will be removed in 3.0"),t}function Ve(e){return e.modelClass().WhereInEagerAlgorithm}function De(e){return e.modelClass().JoinEagerAlgorithm}function Ke(e){return e.modelClass().NaiveEagerAlgorithm}function $e(e,t){return t===De(e)?H:t===Ke(e)?X:ee}function ze(e,t){try{return G.create(t)}catch(r){throw r instanceof B?e.createValidationError({type:k.RelationExpression,message:'Duplicate relation name "'.concat(r.relationName,'" in relation expression "').concat(t,'". For example, use "').concat(r.relationName,'.[foo, bar]" instead of "[').concat(r.relationName,".foo, ").concat(r.relationName,'.bar]".')}):e.createValidationError({type:k.RelationExpression,message:'Invalid relation expression "'.concat(t,'"')})}}function He(e){var t=e.findOperation(Ce);if(t){var r=t.expression,n=e.allowedGraphExpression();if(r.numChildren>0&&n&&!n.isSubExpression(r)){var i=e.modelClass();e.reject(i.createValidationError({type:k.UnallowedRelation,message:"eager expression not allowed"}))}}}function Le(e){return e.findOperation(function(e){return e.hasQueryExecutor()})}function Xe(e){var t=Promise.resolve();return t=ct(t=rt(t,e=it(e),"onBefore1"),e,e.context().runBefore),t=rt(t=ct(t,e,e.internalContext().runBefore),e,"onBefore2"),t=rt(t,e,"onBefore3")}function Ze(e){Promise.resolve();var t=Le(e=ut(e)),r=e._explicitRejectValue,n=e._explicitResolveValue;return null!==r?Promise.reject(r):null!==n?Promise.resolve(n):null!==t?Promise.resolve(t.queryExecutor(e)):rt(Promise.resolve(st(e)),e,"onRawResult").then(function(t){return pt(t,e)})}function et(e,t){var r=Promise.resolve(t);return r=rt(r,e,"onAfter1"),r=ct(r=rt(r,e,"onAfter2"),e,e.context().runAfter),r=rt(r=ct(r,e,e.internalContext().runAfter),e,"onAfter3")}function tt(e,t){var r=Promise.reject(p(t));return e.forEachOperation(!0,function(t){t.hasOnError()&&(r=r.catch(function(r){return e.callAsyncOperationMethod(t,"onError",[e,r])}))}),r}function rt(e,t,r){return e.then(function(e){var n=Promise.resolve(e);return t.forEachOperation(!0,function(e){e.hasHook(r)&&(n=n.then(function(n){return t.callAsyncOperationMethod(e,r,[t,n])}))}),n})}function nt(e,t){var r=t+"Relation",n=e.findOperation(r);return n||(n=new he(r,{joinOperation:t}),e.addOperation(n)),n}function it(e){return e.isFind()&&at(e),e.hasWithGraph()&&ot(e),e}function at(e){if(!e.has(U)){var t=e._findOperationFactory(e);e.addOperationToFront(t,[])}}function ot(e){var t=e.findOperation(Ce);e.clear(Ce),e.addOperation(t)}function ut(e){return lt(e,e.context().onBuild),lt(e,e.internalContext().onBuild),e.executeOnBuild(),e}function lt(e,t){E(t)?t.call(e,e):Array.isArray(t)&&t.forEach(function(t){return lt(e,t)})}function st(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.knex().queryBuilder();e.executeOnBuildKnex(t);var r=e.findLastOperation(I.FromSelector),n=e.has(I.SelectSelector);return e.isPartial()||(r||ht(e,t),n||r&&!r.table||dt(e,t)),t}function ht(e,t){var r=e.tableName(),n=e.tableRef();r===n?t.table(r):t.table("".concat(r," as ").concat(n))}function dt(e,t){var r=e.tableRef();t.select("".concat(r,".*"))}function ct(e,t,r){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.then(function(e){var n=Promise.resolve(e);return E(r)?n=n.then(function(e){return r.call(t,e,t)}):Array.isArray(r)&&r.forEach(function(e){n=ct(n,t,e)}),n}));case 1:case"end":return n.stop()}})}function pt(e,t){var r=t.resultModelClass();if(null==e)return null;if(Array.isArray(e)){if(e.length&&ft(e[0],r))for(var n=0,i=e.length;n<i;++n)e[n]=r.fromDatabaseJson(e[n])}else ft(e,r)&&(e=r.fromDatabaseJson(e));return e}function ft(e,t){return F(e)&&!(e instanceof t)}function yt(e,t){if(!e.isFind())return e.reject(new Error("Double call to a write method. You can only call one of the write methods (insert, update, patch, delete, relate, unrelate, increment, decrement) and only once per query builder."));try{return t(),e}catch(r){return e.reject(r)}}function vt(){return new U("find")}function mt(){return new Y("insert")}function Ot(){return new M("update")}function gt(){return new M("patch",{modelOptions:{patch:!0}})}function wt(){return new D("relate",{})}function kt(){return new $("unrelate",{})}function bt(){return new N("delete")}Object.defineProperties(Te.prototype,{isObjectionQueryBuilder:{enumerable:!1,writable:!1,value:!0}}),module.exports={QueryBuilder:Te};
},{"db-errors":"P9Yc","./RawBuilder":"VlR0","../utils/deprecate":"NYRu","../utils/createModifier":"vVPf","../model/ValidationError":"sBi0","../utils/objectUtils":"WAAQ","./RelationExpression":"qujN","./operations/select/Selection":"u0K8","./QueryBuilderContext":"TWXF","./QueryBuilderBase":"Zawf","./operations/FindOperation":"WHDH","./operations/DeleteOperation":"PWCn","./operations/UpdateOperation":"KA5i","./operations/InsertOperation":"tIYw","./operations/RelateOperation":"h4He","./operations/UnrelateOperation":"V3CS","./operations/eager/JoinEagerOperation":"ZliC","./operations/eager/NaiveEagerOperation":"kKc6","./operations/eager/WhereInEagerOperation":"jy4I","./operations/InsertGraphAndFetchOperation":"lShn","./operations/UpsertGraphAndFetchOperation":"VFhm","./operations/InsertAndFetchOperation":"Wr7H","./operations/UpdateAndFetchOperation":"TFLo","./operations/JoinRelatedOperation":"QYGV","./operations/OnBuildKnexOperation":"hHvH","./operations/InsertGraphOperation":"Sbek","./operations/UpsertGraphOperation":"h5yg","./operations/RunBeforeOperation":"qWkQ","./operations/RunAfterOperation":"BKA4","./operations/FindByIdOperation":"yDrf","./operations/FindByIdsOperation":"nlAK","./operations/OnBuildOperation":"KqTX","./operations/OnErrorOperation":"BnJW","./operations/select/SelectOperation":"xBsf","./operations/eager/EagerOperation":"MFTe","./operations/RangeOperation":"u1ae","./operations/FirstOperation":"jHqJ","./operations/FromOperation":"ck6H","./operations/KnexOperation":"ClAu"}],"uo0w":[function(require,module,exports) {
"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(n,e){return!e||"object"!==t(e)&&"function"!=typeof e?r(n):e}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&p(t,n)}function u(t){var n="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||!f(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return i(t,arguments,a(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),p(e,t)})(t)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function i(t,n,e){return(i=c()?Reflect.construct:function(t,n,e){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(t,r));return e&&p(o,e.prototype),o}).apply(null,arguments)}function f(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function p(t,n){return(p=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){function r(){var t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(this,r),(t=e(this,a(r).call(this,o.message||"NotFoundError"))).type="NotFound",t.name=t.constructor.name,t.data=o,t.statusCode=404,t}return o(r,u(Error)),r}();module.exports={NotFoundError:l};
},{}],"zo7s":[function(require,module,exports) {
"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(n,e){return!e||"object"!==t(e)&&"function"!=typeof e?r(n):e}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&p(t,n)}function u(t){var n="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||!f(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return i(t,arguments,l(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),p(e,t)})(t)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function i(t,n,e){return(i=c()?Reflect.construct:function(t,n,e){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(t,r));return e&&p(o,e.prototype),o}).apply(null,arguments)}function f(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function p(t,n){return(p=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var a=function(t){function r(t){var o;return n(this,r),(o=e(this,l(r).call(this,'Unable to determine modify function from provided value: "'.concat(t,'".')))).modifierName=t,o}return o(r,u(Error)),r}();module.exports={ModifierNotFoundError:a};
},{}],"hjgq":[function(require,module,exports) {
"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||!s(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return a(t,arguments,p(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,t)})(t)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function a(t,e,r){return(a=f()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&l(o,r.prototype),o}).apply(null,arguments)}function s(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=require("../utils/objectUtils"),y=h.asArray,m=h.isObject,b=h.uniqBy,v=h.get,d=h.set,g=require("../queryBuilder/ReferenceBuilder"),_=g.ref,w=require("../model/modelValues"),P=w.propToStr,k=w.PROP_KEY_PREFIX,O=function(t){function e(t){var r;return n(this,e),(r=o(this,p(e).call(this))).name=r.constructor.name,r.tableName=t,r}return i(e,c(Error)),e}(),R=function(t){function e(){var t;return n(this,e),(t=o(this,p(e).call(this))).name=t.constructor.name,t}return i(e,c(Error)),e}(),S=function(){function t(e,r){n(this,t);var o=j(y(e)),u=E(o,r),i=x(u);this._refs=o.map(function(t){return t.model(i)}),this._modelClass=i,this._props=u.map(function(t){return t.path[0]}),this._cols=o.map(function(t){return t.column}),this._propGetters=u.map(function(t){return C(t.path)}),this._propSetters=u.map(function(t){return N(t.path)}),this._patchers=o.map(function(t,e){return q(t,u[e].path)})}return e(t,[{key:"propKey",value:function(t){for(var e=this.size,r=k,n=0;n<e;++n)r+=P(this.getProp(t,n)),n!==e-1&&(r+=",");return r}},{key:"getProps",value:function(t){for(var e=this.size,r=new Array(e),n=0;n<e;++n)r[n]=this.getProp(t,n);return r}},{key:"hasProps",value:function(t){for(var e=this.size,r=0;r<e;++r){var n=this.getProp(t,r);if(null==n)return!1}return!0}},{key:"getProp",value:function(t,e){return this._propGetters[e](t)}},{key:"setProp",value:function(t,e,r){return this._propSetters[e](t,r)}},{key:"ref",value:function(t,e){var r=t.tableRefFor(this.modelClass);return this._refs[e].clone().table(r)}},{key:"refs",value:function(t){for(var e=new Array(this.size),r=0,n=e.length;r<n;++r)e[r]=this.ref(t,r);return e}},{key:"patch",value:function(t,e,r){return this._patchers[e](t,r)}},{key:"propDescription",value:function(t){return this._refs[t].expression}},{key:"size",get:function(){return this._refs.length}},{key:"modelClass",get:function(){return this._modelClass}},{key:"props",get:function(){return this._props}},{key:"cols",get:function(){return this._cols}}],[{key:"ModelNotFoundError",get:function(){return O}},{key:"InvalidReferenceError",get:function(){return R}}]),t}();function j(t){try{return t.map(function(t){return m(t)&&t.isObjectionReferenceBuilder?t:_(t)})}catch(e){throw new R}}function E(t,e){return t.map(function(t){if(!t.tableName)throw new R;var r=e(t.tableName);if(!r)throw new O(t.tableName);var n=r.columnNameToPropertyName(t.column),o=t.parsedExpr.access.map(function(t){return t.ref});return{path:[n].concat(o),modelClass:r}})}function x(t){var e=t.map(function(t){return t.modelClass});if(1!==b(e).length)throw new R;return e[0]}function C(t){if(1===t.length){var e=t[0];return function(t){return t[e]}}return function(e){return v(e,t)}}function N(t){if(1===t.length){var e=t[0];return function(t,r){return t[e]=r}}return function(e,r){return d(e,t,r)}}function q(t,e){return t.isPlainColumnRef?function(t,r){return t[e[0]]=r}:function(e,r){return e[t.expression]=r}}module.exports={RelationProperty:S};
},{"../utils/objectUtils":"WAAQ","../queryBuilder/ReferenceBuilder":"UPD8","../model/modelValues":"PfnY"}],"OKPP":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=c(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=require("../queryBuilder/operations/UpdateOperation"),y=p.UpdateOperation,s=function(t){function n(t,r){var i;return e(this,n),(i=o(this,f(n).call(this,t,r))).relation=r.relation,i.owner=r.owner,i}return l(n,y),r(n,[{key:"onBuild",value:function(t){u(f(n.prototype),"onBuild",this).call(this,t),this.relation.findQuery(t,this.owner)}}]),n}();module.exports={RelationUpdateOperation:s};
},{"../queryBuilder/operations/UpdateOperation":"KA5i"}],"wda7":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=c(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=require("../queryBuilder/operations/DeleteOperation"),y=p.DeleteOperation,s=function(t){function n(t,r){var i;return e(this,n),(i=o(this,f(n).call(this,t,r))).relation=r.relation,i.owner=r.owner,i}return l(n,y),r(n,[{key:"onBuild",value:function(t){u(f(n.prototype),"onBuild",this).call(this,t),this.relation.findQuery(t,this.owner)}}]),n}();module.exports={RelationDeleteOperation:s};
},{"../queryBuilder/operations/DeleteOperation":"PWCn"}],"ek4I":[function(require,module,exports) {
var process = require("process");
var r=require("process");function t(r,t){for(var e=0,n=r.length-1;n>=0;n--){var o=r[n];"."===o?r.splice(n,1):".."===o?(r.splice(n,1),e++):e&&(r.splice(n,1),e--)}if(t)for(;e--;e)r.unshift("..");return r}function e(r){"string"!=typeof r&&(r+="");var t,e=0,n=-1,o=!0;for(t=r.length-1;t>=0;--t)if(47===r.charCodeAt(t)){if(!o){e=t+1;break}}else-1===n&&(o=!1,n=t+1);return-1===n?"":r.slice(e,n)}function n(r,t){if(r.filter)return r.filter(t);for(var e=[],n=0;n<r.length;n++)t(r[n],n,r)&&e.push(r[n]);return e}exports.resolve=function(){for(var e="",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var i=s>=0?arguments[s]:r.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,o="/"===i.charAt(0))}return(o?"/":"")+(e=t(n(e.split("/"),function(r){return!!r}),!o).join("/"))||"."},exports.normalize=function(r){var e=exports.isAbsolute(r),s="/"===o(r,-1);return(r=t(n(r.split("/"),function(r){return!!r}),!e).join("/"))||e||(r="."),r&&s&&(r+="/"),(e?"/":"")+r},exports.isAbsolute=function(r){return"/"===r.charAt(0)},exports.join=function(){var r=Array.prototype.slice.call(arguments,0);return exports.normalize(n(r,function(r,t){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},exports.relative=function(r,t){function e(r){for(var t=0;t<r.length&&""===r[t];t++);for(var e=r.length-1;e>=0&&""===r[e];e--);return t>e?[]:r.slice(t,e-t+1)}r=exports.resolve(r).substr(1),t=exports.resolve(t).substr(1);for(var n=e(r.split("/")),o=e(t.split("/")),s=Math.min(n.length,o.length),i=s,u=0;u<s;u++)if(n[u]!==o[u]){i=u;break}var f=[];for(u=i;u<n.length;u++)f.push("..");return(f=f.concat(o.slice(i))).join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(r){if("string"!=typeof r&&(r+=""),0===r.length)return".";for(var t=r.charCodeAt(0),e=47===t,n=-1,o=!0,s=r.length-1;s>=1;--s)if(47===(t=r.charCodeAt(s))){if(!o){n=s;break}}else o=!1;return-1===n?e?"/":".":e&&1===n?"/":r.slice(0,n)},exports.basename=function(r,t){var n=e(r);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},exports.extname=function(r){"string"!=typeof r&&(r+="");for(var t=-1,e=0,n=-1,o=!0,s=0,i=r.length-1;i>=0;--i){var u=r.charCodeAt(i);if(47!==u)-1===n&&(o=!1,n=i+1),46===u?-1===t?t=i:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){e=i+1;break}}return-1===t||-1===n||0===s||1===s&&t===n-1&&t===e+1?"":r.slice(t,n)};var o="b"==="ab".substr(-1)?function(r,t,e){return r.substr(t,e)}:function(r,t,e){return t<0&&(t=r.length+t),r.substr(t,e)};
},{"process":"FeV4"}],"GnYp":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?o(e):n}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function u(t){var e="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||!f(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return c(t,arguments,a(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,t)})(t)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function c(t,e,n){return(c=i()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var r=new(Function.bind.apply(t,o));return n&&l(r,n.prototype),r}).apply(null,arguments)}function f(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=require("path"),p=require("../utils/objectUtils"),y=p.isString,h=p.isFunction,b=function(t){function o(){return e(this,o),n(this,a(o).apply(this,arguments))}return r(o,u(Error)),o}();function d(t,e,n){try{if(!y(t)){if(h(t)&&!O(t)&&(t=t()),!O(t))throw new b("is not a subclass of Model or a file path to a module that exports one. You may be dealing with a require loop. See the documentation section about require loops.");return t}if(v(t))return m(t);if(e)return w(t,e)}catch(o){throw o instanceof b?new Error("".concat(n,": ").concat(o.message)):o}}function w(t,e){var n=null,o=!0,r=!1,u=void 0;try{for(var i,c=e[Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var f=i.value;try{return m(s.join(f,t))}catch(l){null===n&&(n=l)}}}catch(l){r=!0,u=l}finally{try{o||null==c.return||c.return()}finally{if(r)throw u}}throw n||new b("could not resolve ".concat(t," using modelPaths"))}function m(t){var e=require("".concat(s.resolve(t))),n=null;if(O(e)?n=e:O(e.default)?n=e.default:Object.keys(e).forEach(function(o){var r=e[o];if(O(r)){if(null!==n)throw new b("path ".concat(t," exports multiple models. Don't know which one to choose."));n=r}}),!O(n))throw new b("".concat(t," is an invalid file path to a model class"));return n}function v(t){return s.normalize(t+"/")===s.normalize(s.resolve(t)+"/")}function O(t){return h(t)&&t.isObjectionModelClass}module.exports={resolveModel:d};
},{"path":"ek4I","../utils/objectUtils":"WAAQ"}],"N1j8":[function(require,module,exports) {
"use strict";function e(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function o(e,o){for(var t=0;t<o.length;t++){var r=o[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var r=require("./RelationProperty"),n=r.RelationProperty,a=require("./RelationFindOperation"),i=a.RelationFindOperation,l=require("./RelationUpdateOperation"),s=l.RelationUpdateOperation,d=require("./RelationDeleteOperation"),u=d.RelationDeleteOperation,c=require("../utils/resolveModel"),f=c.resolveModel,h=require("../utils/objectUtils"),p=h.get,m=h.isFunction,b=require("../utils/promiseUtils"),M=b.mapAfterAllReturn,w=require("../utils/createModifier"),C=w.createModifier,y=function(){function o(t,r){e(this,o),this.name=t,this.ownerModelClass=r,this.relatedModelClass=null,this.ownerProp=null,this.relatedProp=null,this.joinTableModelClass=null,this.joinTableOwnerProp=null,this.joinTableRelatedProp=null,this.joinTableBeforeInsert=null,this.joinTableExtras=[],this.modify=null,this.beforeInsert=null}return t(o,[{key:"setMapping",value:function(e){var o=this,t={name:this.name,mapping:e,ownerModelClass:this.ownerModelClass,relatedModelClass:null,relatedProp:null,ownerProp:null,modify:null,beforeInsert:null,forbiddenMappingProperties:this.forbiddenMappingProperties,createError:function(e){return o.createError(e)}};t=R(t=O(t=E(t=P(t=T(t=g(t=v(t=j(t)))))))),this.relatedModelClass=t.relatedModelClass,this.ownerProp=t.ownerProp,this.relatedProp=t.relatedProp,this.modify=t.modify,this.beforeInsert=t.beforeInsert}},{key:"getJoinModelClass",value:function(e){return this.joinTableModelClass&&e!==this.joinTableModelClass.knex()?this.joinTableModelClass.bindKnex(e):this.joinTableModelClass}},{key:"isOneToOne",value:function(){return!1}},{key:"clone",value:function(){var e=new this.constructor(this.name,this.ownerModelClass);return e.relatedModelClass=this.relatedModelClass,e.ownerProp=this.ownerProp,e.relatedProp=this.relatedProp,e.modify=this.modify,e.beforeInsert=this.beforeInsert,e.joinTableModelClass=this.joinTableModelClass,e.joinTableOwnerProp=this.joinTableOwnerProp,e.joinTableRelatedProp=this.joinTableRelatedProp,e.joinTableBeforeInsert=this.joinTableBeforeInsert,e.joinTableExtras=this.joinTableExtras,e}},{key:"bindKnex",value:function(e){var o=this.clone();return o.relatedModelClass=this.relatedModelClass.bindKnex(e),o.ownerModelClass=this.ownerModelClass.bindKnex(e),this.joinTableModelClass&&(o.joinTableModelClass=this.joinTableModelClass.bindKnex(e)),o}},{key:"findQuery",value:function(e,o){var t=this.relatedProp.refs(e);return o.buildFindQuery(e,this,t),this.applyModify(e)}},{key:"applyModify",value:function(e){try{return e.modify(this.modify)}catch(o){throw o instanceof this.relatedModelClass.ModifierNotFoundError?this.createError(o.message):o}}},{key:"join",value:function(e){var o=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.joinOperation,n=void 0===r?"join":r,a=t.relatedTableAlias,i=void 0===a?e.tableRefFor(this.relatedModelClass):a,l=t.relatedJoinSelectQuery,s=void 0===l?this.relatedModelClass.query().childQueryOf(e):l,d=t.relatedTable,u=void 0===d?e.tableNameFor(this.relatedModelClass):d,c=t.ownerTable,f=void 0===c?e.tableRefFor(this.ownerModelClass):c,h=this.applyModify(s).as(i);return h.isSelectAll()&&(h=I(u,i)),e[n](h,function(t){for(var r=o.relatedProp,n=o.ownerProp,a=0,l=r.size;a<l;++a){var s=r.ref(e,a).table(i),d=n.ref(e,a).table(f);t.on(s,d)}})}},{key:"find",value:function(e,o){return new i("find",{relation:this,owner:o})}},{key:"insert",value:function(e,o){throw this.createError("not implemented")}},{key:"update",value:function(e,o){return new s("update",{relation:this,owner:o})}},{key:"patch",value:function(e,o){return new s("patch",{relation:this,owner:o,modelOptions:{patch:!0}})}},{key:"delete",value:function(e,o){return new u("delete",{relation:this,owner:o})}},{key:"relate",value:function(){throw this.createError("not implemented")}},{key:"unrelate",value:function(){throw this.createError("not implemented")}},{key:"hasRelateProp",value:function(e){return e.$hasProps(this.relatedProp.props)}},{key:"setRelateProp",value:function(e,o){for(var t=0,r=this.relatedProp.size;t<r;++t)this.relatedProp.setProp(e,t,o[t])}},{key:"executeBeforeInsert",value:function(e,o,t){var r=this;return M(e,function(e){return r.beforeInsert(e,o)},t)}},{key:"createError",value:function(e){return this.ownerModelClass&&this.ownerModelClass.name&&this.name?new Error("".concat(this.ownerModelClass.name,".relationMappings.").concat(this.name,": ").concat(e)):new Error("".concat(this.constructor.name,": ").concat(e))}},{key:"forbiddenMappingProperties",get:function(){return["join.through"]}},{key:"joinTable",get:function(){return this.joinTableModelClass?this.joinTableModelClass.getTableName():null}},{key:"joinModelClass",get:function(){return this.getJoinModelClass(this.ownerModelClass.knex())}}]),o}();function j(e){return e.forbiddenMappingProperties.forEach(function(o){if(void 0!==p(e.mapping,o.split(".")))throw e.createError("Property ".concat(o," is not supported for this relation type."))}),e}function v(e){if(!m(e.ownerModelClass)||!e.ownerModelClass.isObjectionModelClass)throw e.createError("Relation's owner is not a subclass of Model");return e}function g(e){if(!e.mapping.modelClass)throw e.createError("modelClass is not defined");return e}function T(e){var o;try{o=f(e.mapping.modelClass,e.ownerModelClass.modelPaths,"modelClass")}catch(t){throw e.createError(t.message)}return Object.assign(e,{relatedModelClass:o})}function P(e){if(!e.mapping.relation)throw e.createError("relation is not defined");if(!m(e.mapping.relation)||!e.mapping.relation.isObjectionRelationClass)throw e.createError("relation is not a subclass of Relation");return e}function E(e){var o=e.mapping;if(!o.join||!o.join.from||!o.join.to)throw e.createError('join must be an object that maps the columns of the related models together. For example: {from: "SomeTable.id", to: "SomeOtherTable.someModelId"}');var t,r,n=k(e,o.join.from,"join.from"),a=k(e,o.join.to,"join.to");if(n.modelClass.getTableName()===e.ownerModelClass.getTableName())t=n,r=a;else{if(a.modelClass.getTableName()!==e.ownerModelClass.getTableName())throw e.createError("join: either `from` or `to` must point to the owner model table.");t=a,r=n}if(t.props.some(function(o){return o===e.name}))throw e.createError("join: relation name and join property '".concat(e.name,"' cannot have the same name. If you cannot change one or the other, you can use $parseDatabaseJson and $formatDatabaseJson methods to convert the column name."));if(r.modelClass.getTableName()!==e.relatedModelClass.getTableName())throw e.createError("join: either `from` or `to` must point to the related model table.");return Object.assign(e,{ownerProp:t,relatedProp:r})}function k(e,o,t){try{return new n(o,function(o){return[e.ownerModelClass,e.relatedModelClass].find(function(e){return e.getTableName()===o})})}catch(r){throw r instanceof n.ModelNotFoundError?e.createError("join: either `from` or `to` must point to the owner model table and the other one to the related table. It might be that specified table '".concat(r.tableName,"' is not correct")):r instanceof n.InvalidReferenceError?e.createError("".concat(t,' must have format TableName.columnName. For example "SomeTable.id" or in case of composite key ["SomeTable.a", "SomeTable.b"].')):r}}function O(e){var o=e.mapping,t=o.modify||o.filter,r=t&&C({modifier:t,modelClass:e.relatedModelClass});return Object.assign(e,{modify:r})}function R(e){var o;return o=m(e.mapping.beforeInsert)?e.mapping.beforeInsert:function(e){return e},Object.assign(e,{beforeInsert:o})}function I(e,o){return e===o?e:"".concat(e," as ").concat(o)}Object.defineProperties(y,{isObjectionRelationClass:{enumerable:!1,writable:!1,value:!0}}),Object.defineProperties(y.prototype,{isObjectionRelation:{enumerable:!1,writable:!1,value:!0}}),module.exports={Relation:y};
},{"./RelationProperty":"hjgq","./RelationFindOperation":"z46k","./RelationUpdateOperation":"OKPP","./RelationDeleteOperation":"wda7","../utils/resolveModel":"GnYp","../utils/objectUtils":"WAAQ","../utils/promiseUtils":"zF81","../utils/createModifier":"vVPf"}],"vIzl":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?i(t):n}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=c(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=require("../queryBuilder/operations/InsertOperation"),p=f.InsertOperation,y=function(e){function n(e,r){var i;return t(this,n),(i=o(this,a(n).call(this,e,r))).relation=r.relation,i.owner=r.owner,i.assignResultToOwner=!0,i}return l(n,p),r(n,[{key:"onBefore2",value:function(e,t){var r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.context(),o.next=3,regeneratorRuntime.awrap(this.relation.executeBeforeInsert(this.models,r,t));case 3:return t=o.sent,o.abrupt("return",u(a(n.prototype),"onBefore2",this).call(this,e,t));case 5:case"end":return o.stop()}},null,this)}},{key:"clone",value:function(){var e=u(a(n.prototype),"clone",this).call(this);return e.relation=this.relation,e.owner=this.owner,e.assignResultToOwner=this.assignResultToOwner,e}}]),n}();module.exports={RelationInsertOperation:y};
},{"../queryBuilder/operations/InsertOperation":"tIYw"}],"Na2d":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?i(t):r}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=u(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function u(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=require("../RelationInsertOperation"),p=f.RelationInsertOperation,y=function(e){function r(){return t(this,r),o(this,s(r).apply(this,arguments))}return l(r,p),n(r,[{key:"onAdd",value:function(e,t){var n=a(s(r.prototype),"onAdd",this).call(this,e,t);h(this.owner,this.relation);var o=this.owner.getSplitProps(e,this.relation),i=this.relation.relatedProp,u=!0,l=!1,c=void 0;try{for(var f,p=this.models[Symbol.iterator]();!(u=(f=p.next()).done);u=!0)for(var y=f.value,b=0,d=i.size;b<d;++b)i.setProp(y,b,o[0][b])}catch(m){l=!0,c=m}finally{try{u||null==p.return||p.return()}finally{if(l)throw c}}return n}},{key:"onAfter1",value:function(e,t){var n,o,i,u,l,c;return regeneratorRuntime.async(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,regeneratorRuntime.awrap(a(s(r.prototype),"onAfter1",this).call(this,e,t));case 2:if(n=f.sent,this.assignResultToOwner){f.next=5;break}return f.abrupt("return",n);case 5:if(!this.owner.isModels){f.next=25;break}for(o=!0,i=!1,u=void 0,f.prev=9,l=this.owner.modelArray[Symbol.iterator]();!(o=(c=l.next()).done);o=!0)c.value.$appendRelated(this.relation,n);f.next=17;break;case 13:f.prev=13,f.t0=f.catch(9),i=!0,u=f.t0;case 17:f.prev=17,f.prev=18,o||null==l.return||l.return();case 20:if(f.prev=20,!i){f.next=23;break}throw u;case 23:return f.finish(20);case 24:return f.finish(17);case 25:return f.abrupt("return",n);case 26:case"end":return f.stop()}},null,this,[[9,13,17,25],[18,,20,24]])}}]),r}();function h(e,t){var r=e.isModels,n=e.isIdentifiers,o=e.isQueryBuilder,i=t.ownerProp,a=r&&1===e.modelArray.length,u=n&&1===e.getNormalizedIdentifiers(i).length;if(!a&&!u&&!o)throw new Error(["Can only insert items for one parent at a time in case of HasManyRelation.","Otherwise multiple insert queries would need to be created.","If you need to insert items for multiple parents, simply loop through them.","That's the most performant way."].join(" "))}module.exports={HasManyInsertOperation:y};
},{"../RelationInsertOperation":"vIzl"}],"VW6Y":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}function n(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?i(t):r}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=require("../../utils/normalizeIds"),c=s.normalizeIds,f=require("../../queryBuilder/operations/RelateOperation"),p=f.RelateOperation,y=function(e){function r(){return t(this,r),n(this,u(r).apply(this,arguments))}return a(r,p),o(r,[{key:"onAdd",value:function(e,t){return this.input=t[0],this.ids=c(t[0],this.relation.relatedModelClass.getIdRelationProperty(),{arrayOutput:!0}),h(this.owner,this.relation),!0}},{key:"queryExecutor",value:function(e){for(var t={},r=this.relation.relatedProp,o=this.owner.getSplitProps(e,this.relation),n=0,i=r.size;n<i;++n)r.patch(t,n,o[0][n]);return this.relation.relatedModelClass.query().childQueryOf(e).patch(t).copyFrom(e,e.constructor.JoinSelector).copyFrom(e,e.constructor.WhereSelector).findByIds(this.ids).modify(this.relation.modify)}}]),r}();function h(e,t){var r=e.isModels,o=e.isIdentifiers,n=e.isQueryBuilder,i=t.ownerProp,u=r&&1===e.modelArray.length,a=o&&1===e.getNormalizedIdentifiers(i).length;if(!u&&!a&&!n)throw new Error(["Can only relate items for one parent at a time in case of HasManyRelation.","Otherwise multiple update queries would need to be created.","If you need to relate items for multiple parents, simply loop through them.","That's the most performant way."].join(" "))}module.exports={HasManyRelateOperation:y};
},{"../../utils/normalizeIds":"hD5B","../../queryBuilder/operations/RelateOperation":"h4He"}],"FQjm":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),t}function n(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?i(e):r}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=require("../../queryBuilder/operations/UnrelateOperation"),l=a.UnrelateOperation,p=function(t){function r(){return e(this,r),n(this,u(r).apply(this,arguments))}return c(r,l),o(r,[{key:"queryExecutor",value:function(t){for(var e={},r=this.relation.relatedProp,o=this.owner.getProps(this.relation),n=r.refs(t),i=0,u=r.size;i<u;++i)r.patch(e,i,null);return this.relation.relatedModelClass.query().childQueryOf(t).patch(e).copyFrom(t,t.constructor.JoinSelector).copyFrom(t,t.constructor.WhereSelector).whereInComposite(n,o).modify(this.relation.modify)}}]),r}();module.exports={HasManyUnrelateOperation:p};
},{"../../queryBuilder/operations/UnrelateOperation":"V3CS"}],"Fs6v":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?i(t):n}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=require("../Relation"),f=c.Relation,s=require("./HasManyInsertOperation"),p=s.HasManyInsertOperation,y=require("./HasManyRelateOperation"),b=y.HasManyRelateOperation,O=require("./HasManyUnrelateOperation"),h=O.HasManyUnrelateOperation,w=function(e){function n(){return t(this,n),o(this,a(n).apply(this,arguments))}return u(n,f),r(n,[{key:"insert",value:function(e,t){return new p("insert",{relation:this,owner:t})}},{key:"relate",value:function(e,t){return new b("relate",{relation:this,owner:t})}},{key:"unrelate",value:function(e,t){return new h("unrelate",{relation:this,owner:t})}},{key:"hasRelateProp",value:function(e){return e.$hasId()}},{key:"setRelateProp",value:function(e,t){e.$id(t)}}]),n}();Object.defineProperties(w.prototype,{isObjectionHasManyRelation:{enumerable:!1,writable:!1,value:!0}}),module.exports={HasManyRelation:w};
},{"../Relation":"N1j8","./HasManyInsertOperation":"Na2d","./HasManyRelateOperation":"VW6Y","./HasManyUnrelateOperation":"FQjm"}],"BJt4":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}function r(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?u(e):n}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=require("../hasMany/HasManyRelation"),l=a.HasManyRelation,y=function(t){function n(){return e(this,n),r(this,i(n).apply(this,arguments))}return c(n,l),o(n,[{key:"isOneToOne",value:function(){return!0}}]),n}();module.exports={HasOneRelation:y};
},{"../hasMany/HasManyRelation":"Fs6v"}],"oiR4":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}function r(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?i(t):n}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=a(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=require("../../RelationFindOperation"),p=f.RelationFindOperation,y=require("../../../utils/tmpColumnUtils"),h=y.getTempColumn,b=function(e){function n(e,o){var i;t(this,n),(i=r(this,s(n).call(this,e,o))).ownerJoinColumnAlias=new Array(i.relation.joinTableOwnerProp.size);for(var l=0,a=i.ownerJoinColumnAlias.length;l<a;++l)i.ownerJoinColumnAlias[l]=h(l);return i}return u(n,p),o(n,[{key:"onBuild",value:function(e){var t=this.relation.relatedModelClass;if(this.maybeApplyAlias(e),this.relation.findQuery(e,this.owner),!e.has(e.constructor.SelectSelector)){var n=e.tableRefFor(t);e.select("".concat(n,".*"));var o=!0,r=!1,i=void 0;try{for(var l,a=this.relation.joinTableExtras[Symbol.iterator]();!(o=(l=a.next()).done);o=!0){var s=l.value,u=e.tableRefFor(this.relation.joinTable);e.select("".concat(u,".").concat(s.joinTableCol," as ").concat(s.aliasCol))}}catch(c){r=!0,i=c}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}}this.assignResultToOwner&&this.owner.isModels&&this.selectMissingJoinColumns(e)}},{key:"onAfter2",value:function(e,t){var n=this.relation.isOneToOne();if(this.assignResultToOwner&&this.owner.isModels){for(var o=this.owner.modelArray,r=this.relation.ownerProp,i=new Map,l=0,a=t.length;l<a;++l){var s=t[l],u=s.$propKey(this.ownerJoinColumnAlias),c=i.get(u);c||(c=[],i.set(u,c)),c.push(s)}for(var f=0,p=o.length;f<p;++f){var y=o[f],h=r.propKey(y),b=i.get(h);y[this.relationProperty]=n?b&&b[0]||null:b||[]}}return t}},{key:"clone",value:function(){var e=l(s(n.prototype),"clone",this).call(this);return e.ownerJoinColumnAlias=this.ownerJoinColumnAlias.slice(),e}},{key:"selectMissingJoinColumns",value:function(e){for(var t=this.relation,o=t.relatedModelClass,r=t.joinTableOwnerProp,i=0,a=r.size;i<a;++i){var u=r.ref(e,i),c=o.columnNameToPropertyName(this.ownerJoinColumnAlias[i]);e.select(u.as(this.ownerJoinColumnAlias[i])),this.omitProps.push(c)}l(s(n.prototype),"selectMissingJoinColumns",this).call(this,e)}}]),n}();module.exports={ManyToManyFindOperation:b};
},{"../../RelationFindOperation":"z46k","../../../utils/tmpColumnUtils":"VrGI"}],"BnbK":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?i(t):r}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=require("../../../utils/knexUtils"),f=s.isPostgres,y=require("../../../utils/normalizeIds"),c=y.normalizeIds,p=require("../../../queryBuilder/operations/RelateOperation"),h=p.RelateOperation,d=function(e){function r(){return t(this,r),o(this,u(r).apply(this,arguments))}return l(r,h),n(r,[{key:"onAdd",value:function(e,t){return this.input=t[0],this.ids=c(t[0],this.relation.relatedProp),m(e,this.owner,this.relation),!0}},{key:"queryExecutor",value:function(e){var t=this,r=this.relation.getJoinModelClass(e.knex()),n=this.owner.getSplitProps(e,this.relation),o=[],i=!0,u=!1,l=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var f=a.value,y=!0,c=!1,p=void 0;try{for(var h,d=this.ids[Symbol.iterator]();!(y=(h=d.next()).done);y=!0){var m=h.value;o.push(r.fromJson(this.relation.createJoinModel(f,m)))}}catch(b){c=!0,p=b}finally{try{y||null==d.return||d.return()}finally{if(c)throw p}}}}catch(b){u=!0,l=b}finally{try{i||null==s.return||s.return()}finally{if(u)throw l}}return r.query().childQueryOf(e).modify(function(r){t.opt.dontCopyReturning||r.copyFrom(e,/returning/)}).runBefore(function(e,r){return t.relation.executeJoinTableBeforeInsert(o,r.context(),null)}).insert(o).runAfter(function(e){return Array.isArray(e)?e.length:1})}}]),r}();function m(e,t,r){var n=t.isModels,o=t.isIdentifiers,i=t.isQueryBuilder,u=r.ownerProp,l=n&&1===t.modelArray.length,a=o&&1===t.getNormalizedIdentifiers(u).length;if(f(e.unsafeKnex())){if(!n&&!o&&!i)throw new Error("Parent must be a list of identifiers or a list of models when relating a ManyToManyRelation")}else if(!l&&!a&&!i)throw new Error(["Can only relate items for one parent at a time in case of ManyToManyRelation.","Otherwise multiple insert queries would need to be created.","If you need to relate items for multiple parents, simply loop through them.","That's the most performant way."].join(" "))}module.exports={ManyToManyRelateOperation:d};
},{"../../../utils/knexUtils":"u553","../../../utils/normalizeIds":"hD5B","../../../queryBuilder/operations/RelateOperation":"h4He"}],"koPZ":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?i(t):r}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=u(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function u(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=require("../../RelationInsertOperation"),p=f.RelationInsertOperation,y=require("../relate/ManyToManyRelateOperation"),h=y.ManyToManyRelateOperation,b=function(e){function r(){return t(this,r),o(this,c(r).apply(this,arguments))}return s(r,p),n(r,[{key:"onAdd",value:function(e,t){var n=a(c(r.prototype),"onAdd",this).call(this,e,t);return this.relation.omitExtraProps(this.models),n}},{key:"onAfter1",value:function(e,t){var n,o,i,u,s,l,f,p,y=this;return regeneratorRuntime.async(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,regeneratorRuntime.awrap(a(c(r.prototype),"onAfter1",this).call(this,e,t));case 2:if(n=b.sent,o=new h("relate",{dontCopyReturning:!0,relation:this.relation,owner:this.owner}),i=n.filter(function(e){return y.relation.relatedProp.hasProps(e)}),!this.assignResultToOwner||!this.owner.isModels){b.next=25;break}for(u=!0,s=!1,l=void 0,b.prev=9,f=this.owner.modelArray[Symbol.iterator]();!(u=(p=f.next()).done);u=!0)p.value.$appendRelated(this.relation,n);b.next=17;break;case 13:b.prev=13,b.t0=b.catch(9),s=!0,l=b.t0;case 17:b.prev=17,b.prev=18,u||null==f.return||f.return();case 20:if(b.prev=20,!s){b.next=23;break}throw l;case 23:return b.finish(20);case 24:return b.finish(17);case 25:if(0!==i.length){b.next=27;break}return b.abrupt("return",n);case 27:return o.onAdd(e,[i]),b.next=30,regeneratorRuntime.awrap(o.queryExecutor(e));case 30:return b.abrupt("return",n);case 31:case"end":return b.stop()}},null,this,[[9,13,17,25],[18,,20,24]])}}]),r}();module.exports={ManyToManyInsertOperation:b};
},{"../../RelationInsertOperation":"vIzl","../relate/ManyToManyRelateOperation":"BnbK"}],"ILcy":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?i(t):n}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=require("../../../queryBuilder/operations/UnrelateOperation"),c=f.UnrelateOperation,p=function(e){function n(){return t(this,n),o(this,u(n).apply(this,arguments))}return l(n,c),r(n,[{key:"queryExecutor",value:function(e){var t=this.relation.getJoinModelClass(e.knex()).query().childQueryOf(e).delete();return this.applyModifyFilterForJoinTable(t)}},{key:"applyModifyFilterForRelatedTable",value:function(e){throw new Error("not implemented")}},{key:"applyModifyFilterForJoinTable",value:function(e){throw new Error("not implemented")}}]),n}();module.exports={ManyToManyUnrelateOperationBase:p};
},{"../../../queryBuilder/operations/UnrelateOperation":"V3CS"}],"ezgg":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}function n(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?i(t):r}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,r){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=u(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function u(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){return function(r){function i(){var e,r;t(this,i);for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return(r=n(this,(e=c(i)).call.apply(e,[this].concat(l)))).modifyFilterSubquery=null,r}return a(i,e),o(i,[{key:"onBuild",value:function(e){return this.modifyFilterSubquery=this.createModifyFilterSubquery(e),this.modifyMainQuery&&(this.removeFiltersFromMainQuery(e),this.applyModifyFilterForRelatedTable(e)),l(c(i.prototype),"onBuild",this).call(this,e)}},{key:"createModifyFilterSubquery",value:function(e){var t=this.relation.relatedModelClass,r=e.constructor,o=t.query().childQueryOf(e);return this.relation.findQuery(o,this.owner),o.copyFrom(e,r.WhereSelector).copyFrom(e,r.JoinSelector),o.clearSelect()}},{key:"removeFiltersFromMainQuery",value:function(e){var t=e.constructor;e.clear(t.WhereSelector),e.clear(t.JoinSelector)}},{key:"applyModifyFilterForRelatedTable",value:function(e){var t=this.relation.relatedModelClass.getIdRelationProperty().refs(e),r=this.modifyFilterSubquery.clone().select(t);return e.whereInComposite(t,r)}},{key:"applyModifyFilterForJoinTable",value:function(e){var t=this.relation.joinTableOwnerProp.refs(e),r=this.relation.joinTableRelatedProp.refs(e),o=this.relation.relatedProp.refs(e),n=this.owner.getProps(this.relation),i=this.modifyFilterSubquery.clone().select(o);return e.whereInComposite(r,i).whereInComposite(t,n)}},{key:"clone",value:function(){var e=l(c(i.prototype),"clone",this).call(this);return e.modifyFilterSubquery=this.modifyFilterSubquery,e}},{key:"modifyMainQuery",get:function(){return!0}}]),i}()};module.exports={ManyToManyModifyMixin:y};
},{}],"cWyY":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}function r(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=require("./ManyToManyUnrelateOperationBase"),y=c.ManyToManyUnrelateOperationBase,p=require("../ManyToManyModifyMixin"),l=p.ManyToManyModifyMixin,s=function(t){function n(){return e(this,n),r(this,u(n).apply(this,arguments))}return a(n,l(y)),o(n,[{key:"modifyMainQuery",get:function(){return!1}}]),n}();module.exports={ManyToManyUnrelateOperation:s};
},{"./ManyToManyUnrelateOperationBase":"ILcy","../ManyToManyModifyMixin":"ezgg"}],"FAgj":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function r(t,o){return!o||"object"!==e(o)&&"function"!=typeof o?i(t):o}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=require("./ManyToManyModifyMixin"),f=a.ManyToManyModifyMixin,y="_rowid_",s=function(e){return function(o){function i(){return t(this,i),r(this,u(i).apply(this,arguments))}return c(i,f(e)),n(i,[{key:"applyModifyFilterForRelatedTable",value:function(e){var t=e.tableRefFor(this.relation.relatedModelClass),o="".concat(t,".").concat(y),n=this.modifyFilterSubquery.clone().select(o);return e.whereInComposite(o,n)}},{key:"applyModifyFilterForJoinTable",value:function(e){var t=this.relation.joinTableOwnerProp.refs(e),o=e.tableRefFor(this.relation.getJoinModelClass(e)),n="".concat(o,".").concat(y),r=this.owner.getProps(this.relation),i=this.modifyFilterSubquery.clone().select(n);return e.whereInComposite(n,i).whereInComposite(t,r)}}]),i}()};module.exports={ManyToManySqliteModifyMixin:s};
},{"./ManyToManyModifyMixin":"ezgg"}],"eNza":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}function r(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=require("./ManyToManyUnrelateOperationBase"),y=c.ManyToManyUnrelateOperationBase,l=require("../ManyToManySqliteModifyMixin"),p=l.ManyToManySqliteModifyMixin,s=function(t){function n(){return e(this,n),r(this,u(n).apply(this,arguments))}return a(n,p(y)),o(n,[{key:"modifyMainQuery",get:function(){return!1}}]),n}();module.exports={ManyToManyUnrelateSqliteOperation:s};
},{"./ManyToManyUnrelateOperationBase":"ILcy","../ManyToManySqliteModifyMixin":"FAgj"}],"d4am":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?a(e):r}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=l(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function l(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=require("../../../queryBuilder/operations/UpdateOperation"),p=f.UpdateOperation,y=function(t){function r(t,n){var a;return e(this,r),(a=o(this,u(r).call(this,t,n))).relation=n.relation,a.owner=n.owner,a.hasExtraProps=!1,a.joinTablePatch={},a.joinTablePatchFilterQuery=null,a}return c(r,p),n(r,[{key:"onAdd",value:function(t,e){var n=e[0],o=!0,a=!1,l=void 0;try{for(var c,s=this.relation.joinTableExtras[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var f=c.value;f.aliasProp in n&&(this.hasExtraProps=!0,this.joinTablePatch[f.joinTableProp]=n[f.aliasProp])}}catch(y){a=!0,l=y}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}var p=i(u(r.prototype),"onAdd",this).call(this,t,e);return this.hasExtraProps&&this.relation.omitExtraProps([this.model]),p}},{key:"onAfter1",value:function(t,e){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.hasExtraProps){n.next=7;break}return r=this.relation.getJoinModelClass(t.knex()).query().childQueryOf(t).patch(this.joinTablePatch),n.next=4,regeneratorRuntime.awrap(this.applyModifyFilterForJoinTable(r));case 4:case 7:return n.abrupt("return",e);case 8:case"end":return n.stop()}},null,this)}},{key:"applyModifyFilterForRelatedTable",value:function(t){throw new Error("not implemented")}},{key:"applyModifyFilterForJoinTable",value:function(t){throw new Error("not implemented")}},{key:"clone",value:function(){var t=i(u(r.prototype),"clone",this).call(this);return t.hasExtraProps=this.hasExtraProps,t.joinTablePatch=this.joinTablePatch,t.joinTablePatchFilterQuery=this.joinTablePatchFilterQuery,t}}]),r}();module.exports={ManyToManyUpdateOperationBase:y};
},{"../../../queryBuilder/operations/UpdateOperation":"KA5i"}],"TlJh":[function(require,module,exports) {
"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(n,o){return!o||"object"!==t(o)&&"function"!=typeof o?e(n):o}function e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&u(t,n)}function u(t,n){return(u=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var f=require("./ManyToManyUpdateOperationBase"),a=f.ManyToManyUpdateOperationBase,c=require("../ManyToManyModifyMixin"),y=c.ManyToManyModifyMixin,p=function(t){function e(){return n(this,e),o(this,r(e).apply(this,arguments))}return i(e,y(a)),e}();module.exports={ManyToManyUpdateOperation:p};
},{"./ManyToManyUpdateOperationBase":"d4am","../ManyToManyModifyMixin":"ezgg"}],"thP0":[function(require,module,exports) {
"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(n,e){return!e||"object"!==t(e)&&"function"!=typeof e?o(n):e}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&u(t,n)}function u(t,n){return(u=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var f=require("./ManyToManyUpdateOperationBase"),a=f.ManyToManyUpdateOperationBase,c=require("../ManyToManySqliteModifyMixin"),y=c.ManyToManySqliteModifyMixin,p=function(t){function o(){return n(this,o),e(this,r(o).apply(this,arguments))}return i(o,y(a)),o}();module.exports={ManyToManyUpdateSqliteOperation:p};
},{"./ManyToManyUpdateOperationBase":"d4am","../ManyToManySqliteModifyMixin":"FAgj"}],"Fcbl":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function r(t,o){return!o||"object"!==e(o)&&"function"!=typeof o?i(t):o}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=require("../../../queryBuilder/operations/DeleteOperation"),a=c.DeleteOperation,p=function(e){function o(e,n){var i;return t(this,o),(i=r(this,u(o).call(this,e,n))).relation=n.relation,i.owner=n.owner,i}return l(o,a),n(o,[{key:"applyModifyFilterForRelatedTable",value:function(e){throw new Error("not implemented")}},{key:"applyModifyFilterForJoinTable",value:function(e){throw new Error("not implemented")}}]),o}();module.exports={ManyToManyDeleteOperationBase:p};
},{"../../../queryBuilder/operations/DeleteOperation":"PWCn"}],"BvDa":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?o(e):n}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=require("./ManyToManyDeleteOperationBase"),c=f.ManyToManyDeleteOperationBase,y=require("../ManyToManyModifyMixin"),a=y.ManyToManyModifyMixin,p=function(t){function o(){return e(this,o),n(this,r(o).apply(this,arguments))}return i(o,a(c)),o}();module.exports={ManyToManyDeleteOperation:p};
},{"./ManyToManyDeleteOperationBase":"Fcbl","../ManyToManyModifyMixin":"ezgg"}],"Km0w":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?o(e):n}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=require("./ManyToManyDeleteOperationBase"),c=f.ManyToManyDeleteOperationBase,y=require("../ManyToManySqliteModifyMixin"),a=y.ManyToManySqliteModifyMixin,p=function(t){function o(){return e(this,o),n(this,r(o).apply(this,arguments))}return i(o,a(c)),o}();module.exports={ManyToManyDeleteSqliteOperation:p};
},{"./ManyToManyDeleteOperationBase":"Fcbl","../ManyToManySqliteModifyMixin":"FAgj"}],"Jn79":[function(require,module,exports) {
"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function t(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}function o(r,t){return!t||"object"!==e(t)&&"function"!=typeof t?a(r):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,r,t){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,r,t){var n=l(e,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(t):o.value}})(e,r,t||e)}function l(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&null!==(e=u(e)););return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&p(e,r)}function p(e,r){return(p=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var c=function(){return require("../../model/Model").Model},f=require("../Relation"),b=f.Relation,d=require("../RelationProperty"),h=d.RelationProperty,y=require("../../utils/knexUtils"),j=y.isSqlite,T=y.isMySql,m=require("../../model/inheritModel"),M=m.inheritModel,v=require("../../utils/resolveModel"),w=v.resolveModel,g=require("../../utils/promiseUtils"),O=g.mapAfterAllReturn,P=require("../../utils/objectUtils"),C=P.isFunction,q=P.isObject,R=require("./find/ManyToManyFindOperation"),x=R.ManyToManyFindOperation,k=require("./insert/ManyToManyInsertOperation"),E=k.ManyToManyInsertOperation,S=require("./relate/ManyToManyRelateOperation"),F=S.ManyToManyRelateOperation,I=require("./unrelate/ManyToManyUnrelateOperation"),N=I.ManyToManyUnrelateOperation,J=require("./unrelate/ManyToManyUnrelateSqliteOperation"),U=J.ManyToManyUnrelateSqliteOperation,A=require("./update/ManyToManyUpdateOperation"),_=A.ManyToManyUpdateOperation,B=require("./update/ManyToManyUpdateSqliteOperation"),D=B.ManyToManyUpdateSqliteOperation,z=require("./delete/ManyToManyDeleteOperation"),$=z.ManyToManyDeleteOperation,Q=require("./delete/ManyToManyDeleteSqliteOperation"),G=Q.ManyToManyDeleteSqliteOperation,H=function(e){function t(){return r(this,t),o(this,u(t).apply(this,arguments))}return s(t,b),n(t,[{key:"setMapping",value:function(e){var r=this,n=i(u(t.prototype),"setMapping",this).call(this,e),o={mapping:e,ownerModelClass:this.ownerModelClass,relatedModelClass:this.relatedModelClass,ownerProp:this.ownerProp,relatedProp:this.relatedProp,joinTableModelClass:null,joinTableOwnerProp:null,joinTableRelatedProp:null,joinTableBeforeInsert:null,joinTableExtras:[],createError:function(e){return r.createError(e)}};return o=ie(o=ae(o=oe(o=te(o=re(o=ee(o)))))),this.joinTableExtras=o.joinTableExtras,this.joinTableModelClass=o.joinTableModelClass,this.joinTableOwnerProp=o.joinTableOwnerProp,this.joinTableRelatedProp=o.joinTableRelatedProp,this.joinTableBeforeInsert=o.joinTableBeforeInsert,n}},{key:"findQuery",value:function(e,r){var t=this,n=this.joinTableOwnerProp.refs(e),o=e.tableNameFor(this.joinTable),a=e.tableRefFor(this.joinTable);return e.join(Z(o,a),function(r){for(var n=0,o=t.relatedProp.size;n<o;++n){var a=t.relatedProp.ref(e,n),i=t.joinTableRelatedProp.ref(e,n);r.on(a,i)}}),r.buildFindQuery(e,this,n),this.applyModify(e)}},{key:"join",value:function(e){var r=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.joinOperation,o=void 0===n?K(this,e):n,a=t.relatedTableAlias,i=void 0===a?L(this,e):a,l=t.relatedJoinSelectQuery,u=void 0===l?V(this,e):l,s=t.relatedTable,p=void 0===s?W(this,e):s,c=t.ownerTable,f=void 0===c?X(this,e):c,b=t.joinTableAlias,d=void 0===b?Y(this,i,e):b,h=this.applyModify(u).as(i);return h.isSelectAll()&&(h=Z(p,i)),e[o](Z(this.joinTable,d),function(t){for(var n=r.ownerProp,o=r.joinTableOwnerProp,a=0,i=n.size;a<i;++a){var l=o.ref(e,a).table(d),u=n.ref(e,a).table(f);t.on(l,u)}})[o](h,function(t){for(var n=r.relatedProp,o=r.joinTableRelatedProp,a=0,l=n.size;a<l;++a){var u=o.ref(e,a).table(d),s=n.ref(e,a).table(i);t.on(u,s)}})}},{key:"find",value:function(e,r){return new x("find",{relation:this,owner:r})}},{key:"insert",value:function(e,r){return new E("insert",{relation:this,owner:r})}},{key:"update",value:function(e,r){return j(e.knex())?new D("update",{relation:this,owner:r}):new _("update",{relation:this,owner:r})}},{key:"patch",value:function(e,r){return j(e.knex())?new D("patch",{modelOptions:{patch:!0},relation:this,owner:r}):new _("patch",{modelOptions:{patch:!0},relation:this,owner:r})}},{key:"delete",value:function(e,r){return j(e.knex())?new G("delete",{relation:this,owner:r}):new $("delete",{relation:this,owner:r})}},{key:"relate",value:function(e,r){return new F("relate",{relation:this,owner:r})}},{key:"unrelate",value:function(e,r){return j(e.knex())?new U("unrelate",{relation:this,owner:r}):new N("unrelate",{relation:this,owner:r})}},{key:"createJoinModels",value:function(e,r){var t=this;return r.map(function(r){return t.createJoinModel(e,r)})}},{key:"createJoinModel",value:function(e,r){for(var t={},n=0,o=this.joinTableOwnerProp.size;n<o;++n)this.joinTableOwnerProp.setProp(t,n,e[n]);for(var a=0,i=this.joinTableRelatedProp.size;a<i;++a){var l=this.relatedProp.getProp(r,a);void 0!==l&&this.joinTableRelatedProp.setProp(t,a,l)}var u=!0,s=!1,p=void 0;try{for(var c,f=this.joinTableExtras[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var b=c.value,d=r[b.aliasProp];void 0===d&&r.$$queryProps&&(d=r.$$queryProps[b.aliasProp]),void 0!==d&&(t[b.joinTableProp]=d)}}catch(h){s=!0,p=h}finally{try{u||null==f.return||f.return()}finally{if(s)throw p}}return t}},{key:"omitExtraProps",value:function(e){if(this.joinTableExtras&&this.joinTableExtras.length){var r=this.joinTableExtras.map(function(e){return e.aliasProp}),t=!0,n=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){a.value.$omitFromDatabaseJson(r)}}catch(l){n=!0,o=l}finally{try{t||null==i.return||i.return()}finally{if(n)throw o}}}}},{key:"executeJoinTableBeforeInsert",value:function(e,r,t){var n=this;return O(e,function(e){return n.joinTableBeforeInsert(e,r)},t)}},{key:"forbiddenMappingProperties",get:function(){return[]}}]),t}();function K(){return"join"}function L(e,r){return r.tableRefFor(e.relatedModelClass)}function V(e,r){return e.relatedModelClass.query().childQueryOf(r)}function W(e,r){return r.tableNameFor(e.relatedModelClass)}function X(e,r){return r.tableRefFor(e.ownerModelClass)}function Y(e,r,t){var n=t.tableRefFor(e.joinTable);return n===e.joinTable?e.ownerModelClass.joinTableAlias(r):n}function Z(e,r){return e===r?e:"".concat(e," as ").concat(r)}function ee(e){var r=e.mapping;if(!q(r.join.through))throw e.createError("join must have a `through` object that describes the join table.");if(!r.join.through.from||!r.join.through.to)throw e.createError('join.through must be an object that describes the join table. For example: {from: "JoinTable.someId", to: "JoinTable.someOtherId"}');return e}function re(e){var r=null;if(e.mapping.join.through.modelClass)try{r=w(e.mapping.join.through.modelClass,e.ownerModelClass.modelPaths,"join.through.modelClass")}catch(t){throw e.createError(t.message)}return Object.assign(e,{joinTableModelClass:r})}function te(e){var r,t,n,o,a;if(t=(r=ne(e,e.mapping.join.through.from,"join.through.from")).prop,n=(r=ne(e=r.ctx,e.mapping.join.through.to,"join.through.to")).prop,e=r.ctx,t.modelClass.getTableName()!==n.modelClass.getTableName())throw e.createError("join.through `from` and `to` must point to the same join table.");return e.relatedProp.modelClass.getTableName()===t.modelClass.getTableName()?(o=t,a=n):(o=n,a=t),Object.assign(e,{joinTableOwnerProp:a,joinTableRelatedProp:o})}function ne(e,r,t){var n=null,o=e.joinTableModelClass;try{n=new h(r,function(r){return null===o&&((o=M(c())).tableName=r,o.idColumn=null,o.concurrency=e.ownerModelClass.concurrency),o.getTableName()===r?o:null})}catch(a){throw a instanceof h.ModelNotFoundError?e.createError("join.through `from` and `to` must point to the same join table."):e.createError("".concat(t,' must have format JoinTable.columnName. For example "JoinTable.someId" or in case of composite key ["JoinTable.a", "JoinTable.b"].'))}return{ctx:Object.assign(e,{joinTableModelClass:o}),prop:n}}function oe(e){var r=e.mapping.join.through.extra;if(!r)return e;Array.isArray(r)&&(r=r.reduce(function(e,r){return e[r]=r,e},{}));var t=Object.keys(r).map(function(t){var n=r[t];return{joinTableCol:n,joinTableProp:e.joinTableModelClass.columnNameToPropertyName(n),aliasCol:t,aliasProp:e.joinTableModelClass.columnNameToPropertyName(t)}});return Object.assign(e,{joinTableExtras:t})}function ae(e){var r;return r=C(e.mapping.join.through.beforeInsert)?e.mapping.join.through.beforeInsert:function(e){return e},Object.assign(e,{joinTableBeforeInsert:r})}function ie(e){return null===e.joinTableModelClass.getIdColumn()&&(e.joinTableModelClass.idColumn=e.joinTableRelatedProp.cols),e}Object.defineProperties(H.prototype,{isObjectionManyToManyRelation:{enumerable:!1,writable:!1,value:!0}}),module.exports={ManyToManyRelation:H};
},{"../../model/Model":"GiQj","../Relation":"N1j8","../RelationProperty":"hjgq","../../utils/knexUtils":"u553","../../model/inheritModel":"wU6M","../../utils/resolveModel":"GnYp","../../utils/promiseUtils":"zF81","../../utils/objectUtils":"WAAQ","./find/ManyToManyFindOperation":"oiR4","./insert/ManyToManyInsertOperation":"koPZ","./relate/ManyToManyRelateOperation":"BnbK","./unrelate/ManyToManyUnrelateOperation":"cWyY","./unrelate/ManyToManyUnrelateSqliteOperation":"eNza","./update/ManyToManyUpdateOperation":"TlJh","./update/ManyToManyUpdateSqliteOperation":"thP0","./delete/ManyToManyDeleteOperation":"BvDa","./delete/ManyToManyDeleteSqliteOperation":"Km0w"}],"Jr8d":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}function n(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?i(t):r}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=require("../../utils/normalizeIds"),f=s.normalizeIds,c=require("../../queryBuilder/operations/RelateOperation"),p=c.RelateOperation,y=function(e){function r(){return t(this,r),n(this,u(r).apply(this,arguments))}return a(r,p),o(r,[{key:"onAdd",value:function(e,t){return this.input=t[0],this.ids=f(t[0],this.relation.relatedProp,{arrayOutput:!0}),h(this.ids),!0}},{key:"queryExecutor",value:function(e){for(var t={},r=this.relation.ownerProp,o=0,n=r.size;o<n;++o){var i=this.ids[0][o];if(this.owner.isModels){var u=!0,a=!1,l=void 0;try{for(var s,f=this.owner.modelArray[Symbol.iterator]();!(u=(s=f.next()).done);u=!0){var c=s.value;r.setProp(c,o,i)}}catch(h){a=!0,l=h}finally{try{u||null==f.return||f.return()}finally{if(a)throw l}}}r.patch(t,o,i)}var p=this.relation.ownerModelClass.getIdRelationProperty(),y=this.owner.getProps(this.relation,p);return this.relation.ownerModelClass.query().childQueryOf(e).patch(t).whereInComposite(p.refs(e),y)}}]),r}();function h(e){if(e.length>1)throw new Error("can only relate one model to a BelongsToOneRelation")}module.exports={BelongsToOneRelateOperation:y};
},{"../../utils/normalizeIds":"hD5B","../../queryBuilder/operations/RelateOperation":"h4He"}],"Gg0P":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?i(t):r}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=u(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function u(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=require("../RelationInsertOperation"),p=f.RelationInsertOperation,y=require("./BelongsToOneRelateOperation"),b=y.BelongsToOneRelateOperation,h=function(e){function r(){return t(this,r),o(this,c(r).apply(this,arguments))}return l(r,p),n(r,[{key:"onAdd",value:function(e,t){var n=a(c(r.prototype),"onAdd",this).call(this,e,t);if(this.models.length>1)throw this.relation.createError("can only insert one model to a BelongsToOneRelation");return n}},{key:"onAfter1",value:function(e,t){var n,o,i,u,l,s,f;return regeneratorRuntime.async(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,regeneratorRuntime.awrap(a(c(r.prototype),"onAfter1",this).call(this,e,t));case 2:if(n=p.sent,e.isExecutable()){p.next=5;break}return p.abrupt("return",n);case 5:if(o=new b("relate",{relation:this.relation,owner:this.owner}),!this.assignResultToOwner||!this.owner.isModels){p.next=26;break}for(i=!0,u=!1,l=void 0,p.prev=10,s=this.owner.modelArray[Symbol.iterator]();!(i=(f=s.next()).done);i=!0)f.value.$setRelated(this.relation,n);p.next=18;break;case 14:p.prev=14,p.t0=p.catch(10),u=!0,l=p.t0;case 18:p.prev=18,p.prev=19,i||null==s.return||s.return();case 21:if(p.prev=21,!u){p.next=24;break}throw l;case 24:return p.finish(21);case 25:return p.finish(18);case 26:return o.onAdd(e,[n]),p.next=29,regeneratorRuntime.awrap(o.queryExecutor(e));case 29:return p.abrupt("return",n);case 30:case"end":return p.stop()}},null,this,[[10,14,18,26],[19,,21,25]])}}]),r}();module.exports={BelongsToOneInsertOperation:h};
},{"../RelationInsertOperation":"vIzl","./BelongsToOneRelateOperation":"Jr8d"}],"QVa3":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?i(e):r}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=require("../RelationDeleteOperation"),a=c.RelationDeleteOperation,p=function(t){function r(){return e(this,r),o(this,u(r).apply(this,arguments))}return f(r,a),n(r,[{key:"onAfter1",value:function(t,e){if(this.owner.isModels){var r=this.relation.ownerProp,n=!0,o=!1,i=void 0;try{for(var u,f=this.owner.modelArray[Symbol.iterator]();!(n=(u=f.next()).done);n=!0)for(var l=u.value,c=0,a=r.size;c<a;++c)r.setProp(l,c,null)}catch(p){o=!0,i=p}finally{try{n||null==f.return||f.return()}finally{if(o)throw i}}}return e}}]),r}();module.exports={BelongsToOneDeleteOperation:p};
},{"../RelationDeleteOperation":"wda7"}],"PHbX":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}function n(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?i(t):r}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=require("../../queryBuilder/operations/UnrelateOperation"),c=s.UnrelateOperation,f=function(e){function r(){return t(this,r),n(this,u(r).apply(this,arguments))}return l(r,c),o(r,[{key:"onAdd",value:function(){for(var e=new Array(this.relation.ownerProp.size),t=0,r=this.relation.ownerProp.size;t<r;++t)e[t]=null;return this.ids=[e],!0}},{key:"queryExecutor",value:function(e){for(var t={},r=this.relation.ownerProp,o=0,n=r.size;o<n;++o){var i=this.ids[0][o];if(this.owner.isModels){var u=!0,l=!1,a=void 0;try{for(var s,c=this.owner.modelArray[Symbol.iterator]();!(u=(s=c.next()).done);u=!0){var f=s.value;r.setProp(f,o,i)}}catch(w){l=!0,a=w}finally{try{u||null==c.return||c.return()}finally{if(l)throw a}}}r.patch(t,o,i)}var p=this.relation.ownerModelClass.getIdRelationProperty(),y=p.refs(e),h=this.owner.getProps(this.relation,p),b=this.relation.ownerModelClass.query().childQueryOf(e).patch(t).whereInComposite(y,h);return e.has(e.constructor.WhereSelector)&&b.whereExists(this.relation.ownerModelClass.relatedQuery(this.relation.name).copyFrom(e,e.constructor.JoinSelector).copyFrom(e,e.constructor.WhereSelector)),b}}]),r}();module.exports={BelongsToOneUnrelateOperation:f};
},{"../../queryBuilder/operations/UnrelateOperation":"V3CS"}],"vEcx":[function(require,module,exports) {
"use strict";function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function t(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}function r(n,t){return!t||"object"!==e(t)&&"function"!=typeof t?i(n):t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&a(e,n)}function a(e,n){return(a=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var c=require("../Relation"),f=c.Relation,s=require("./BelongsToOneInsertOperation"),p=s.BelongsToOneInsertOperation,y=require("./BelongsToOneDeleteOperation"),O=y.BelongsToOneDeleteOperation,b=require("./BelongsToOneRelateOperation"),w=b.BelongsToOneRelateOperation,g=require("./BelongsToOneUnrelateOperation"),h=g.BelongsToOneUnrelateOperation,T=function(e){function t(){return n(this,t),r(this,u(t).apply(this,arguments))}return l(t,f),o(t,[{key:"isOneToOne",value:function(){return!0}},{key:"insert",value:function(e,n){return new p("insert",{relation:this,owner:n})}},{key:"delete",value:function(e,n){return new O("delete",{relation:this,owner:n})}},{key:"relate",value:function(e,n){return new w("relate",{relation:this,owner:n})}},{key:"unrelate",value:function(e,n){return new h("unrelate",{relation:this,owner:n})}}]),t}();Object.defineProperties(T.prototype,{isObjectionBelongsToOneRelation:{enumerable:!1,writable:!1,value:!0}}),module.exports={BelongsToOneRelation:T};
},{"../Relation":"N1j8","./BelongsToOneInsertOperation":"Gg0P","./BelongsToOneDeleteOperation":"QVa3","./BelongsToOneRelateOperation":"Jr8d","./BelongsToOneUnrelateOperation":"PHbX"}],"lfNP":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}function r(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?u(e):n}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=require("../manyToMany/ManyToManyRelation"),y=a.ManyToManyRelation,l=function(t){function n(){return e(this,n),r(this,i(n).apply(this,arguments))}return c(n,y),o(n,[{key:"isOneToOne",value:function(){return!0}}]),n}();module.exports={HasOneThroughRelation:l};
},{"../manyToMany/ManyToManyRelation":"Jn79"}],"eShe":[function(require,module,exports) {
"use strict";function e(e){if(!e.$hasId()){var o=e.constructor,r=o.getIdColumnArray().join(", ");throw new Error("one of the identifier columns [".concat(r,"] is null or undefined. Have you specified the correct identifier column for the model '").concat(o.name,"' using the 'idColumn' property?"))}}module.exports={assertHasId:e};
},{}],"a06k":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}function r(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=require("./FindOperation"),s=a.FindOperation,l=require("../../utils/assert"),p=l.assertHasId,y=function(t){function n(t,o){var i;return e(this,n),(i=r(this,u(n).call(this,t,o))).instance=o.instance,i}return c(n,s),o(n,[{key:"onBuild",value:function(t){p(this.instance),t.findById(this.instance.$id())}}]),n}();module.exports={InstanceFindOperation:y};
},{"./FindOperation":"WHDH","../../utils/assert":"eShe"}],"K7vt":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=c(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=require("./InsertOperation"),s=p.InsertOperation,y=function(t){function n(t,r){var i;return e(this,n),(i=o(this,f(n).call(this,t,r))).instance=r.instance,i}return a(n,s),r(n,[{key:"onAdd",value:function(t,e){return e&&0!==e.length?e[0]=this.instance:e=[this.instance],u(f(n.prototype),"onAdd",this).call(this,t,e)}}]),n}();module.exports={InstanceInsertOperation:y};
},{"./InsertOperation":"tIYw"}],"NYXj":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=c(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=require("./UpdateOperation"),p=f.UpdateOperation,y=require("../../utils/assert"),b=y.assertHasId,h=require("../../utils/objectUtils"),d=h.isObject,O=function(t){function n(t,r){var i;return e(this,n),(i=o(this,s(n).call(this,t,r))).instance=r.instance,i.modelOptions.old=r.instance,i}return a(n,p),r(n,[{key:"onAdd",value:function(t,e){var r=u(s(n.prototype),"onAdd",this).call(this,t,e);return this.model||(this.model=this.instance),r}},{key:"onBuild",value:function(t){u(s(n.prototype),"onBuild",this).call(this,t),b(this.instance),t.findById(this.instance.$id())}},{key:"onAfter2",value:function(t,e){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return Array.isArray(e)&&(e=e[0]),r.next=3,regeneratorRuntime.awrap(u(s(n.prototype),"onAfter2",this).call(this,t,e));case 3:return e=r.sent,this.instance.$set(this.model),d(e)&&this.instance.$set(e),r.abrupt("return",e);case 7:case"end":return r.stop()}},null,this)}}]),n}();module.exports={InstanceUpdateOperation:O};
},{"./UpdateOperation":"KA5i","../../utils/assert":"eShe","../../utils/objectUtils":"WAAQ"}],"kSvD":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?i(t):n}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=c(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=require("./DeleteOperation"),p=l.DeleteOperation,y=require("../../utils/assert"),b=y.assertHasId,h=function(e){function n(e,r){var i;return t(this,n),(i=o(this,a(n).call(this,e,r))).instance=r.instance,i}return s(n,p),r(n,[{key:"onBefore2",value:function(e,t){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.instance.$beforeDelete(e.context()));case 2:return r.next=4,regeneratorRuntime.awrap(u(a(n.prototype),"onBefore2",this).call(this,e,t));case 4:return r.abrupt("return",t);case 5:case"end":return r.stop()}},null,this)}},{key:"onBuild",value:function(e){u(a(n.prototype),"onBuild",this).call(this,e),b(this.instance),e.findById(this.instance.$id())}},{key:"onAfter2",value:function(e,t){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return Array.isArray(t)&&(t=t[0]),r.next=3,regeneratorRuntime.awrap(this.instance.$afterDelete(e.context()));case 3:return r.abrupt("return",u(a(n.prototype),"onAfter2",this).call(this,e,t));case 4:case"end":return r.stop()}},null,this)}}]),n}();module.exports={InstanceDeleteOperation:h};
},{"./DeleteOperation":"PWCn","../../utils/assert":"eShe"}],"OZN9":[function(require,module,exports) {
"use strict";var t=require("./utils/promiseUtils"),n=require("./utils/objectUtils"),r=n.isFunction;function e(){if(arguments.length<2)return Promise.reject(new Error("objection.transaction: provide at least one Model class to bind to the transaction or a knex instance"));var n=Array.from(arguments);if(!o(n[0])&&r(n[0].transaction)){var e=n[0];return n=n.slice(1),e.transaction.apply(e,n)}var a,s=n[n.length-1],i=n.slice(0,n.length-1);for(a=0;a<i.length;++a)if(!o(i[a]))return Promise.reject(new Error("objection.transaction: all but the last argument should be Model subclasses"));var c=i[0].knex();for(a=0;a<i.length;++a)if(i[a].knex()!==c)return Promise.reject(new Error("objection.transaction: all Model subclasses must be bound to the same database"));return c.transaction(function(n){for(var r=new Array(i.length+1),e=0;e<i.length;++e)r[e]=i[e].bindTransaction(n);return r[r.length-1]=n,t.try(function(){return s.apply(n,r)})})}function o(t){return r(t)&&t.isObjectionModelClass}e.start=function(t){var n=t;return o(t)&&(n=t.knex()),n&&r(n.transaction)?new Promise(function(t,r){n.transaction(function(n){t(n)}).catch(function(t){r(t)})}):Promise.reject(new Error("objection.transaction.start: first argument must be a model class or a knex instance"))},module.exports={transaction:e};
},{"./utils/promiseUtils":"zF81","./utils/objectUtils":"WAAQ"}],"GiQj":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}var n=require("./modelClone"),a=n.clone,o=require("./modelBindKnex"),i=o.bindKnex,u=require("./modelValidate"),s=u.validate,l=require("../utils/knexUtils"),c=l.isMsSql,f=require("../utils/deprecate"),y=f.deprecate,d=require("./modelFilter"),h=d.omit,v=d.pick,p=require("./modelVisitor"),m=p.visitModels,k=require("./modelId"),$=k.hasId,g=k.getSetId,b=require("../utils/promiseUtils"),O=b.map,M=require("./modelToJson"),R=M.toJson,w=M.toDatabaseJson,F=require("./modelValues"),q=F.values,A=F.propKey,N=F.hasProps,I=require("./modelUtils"),J=I.defineNonEnumerableProperty,P=require("./modelParseRelations"),T=P.parseRelationsIntoModelInstances,C=require("./modelTableMetadata"),E=C.fetchTableMetadata,j=C.tableMetadata,D=require("../utils/objectUtils"),Q=D.asArray,x=D.isFunction,B=D.isString,V=D.asSingle,U=require("./modelSet"),S=U.setJson,G=U.setFast,H=U.setRelated,K=U.appendRelated,z=U.setDatabaseJson,W=require("./modelJsonAttributes"),_=W.getJsonAttributes,L=W.parseJsonAttributes,X=W.formatJsonAttributes,Y=require("./modelColPropMap"),Z=Y.columnNameToPropertyName,ee=Y.propertyNameToColumnName,te=require("../queryBuilder/RawBuilder"),re=te.raw,ne=require("../queryBuilder/ReferenceBuilder"),ae=ne.ref,oe=require("../queryBuilder/FunctionBuilder"),ie=oe.fn,ue=require("./AjvValidator"),se=ue.AjvValidator,le=require("../queryBuilder/QueryBuilder"),ce=le.QueryBuilder,fe=require("./NotFoundError"),ye=fe.NotFoundError,de=require("./ValidationError"),he=de.ValidationError,ve=require("./ModifierNotFoundError"),pe=ve.ModifierNotFoundError,me=require("../relations/RelationProperty"),ke=me.RelationProperty,$e=require("../relations/RelationOwner"),ge=$e.RelationOwner,be=require("../relations/hasOne/HasOneRelation"),Oe=be.HasOneRelation,Me=require("../relations/hasMany/HasManyRelation"),Re=Me.HasManyRelation,we=require("../relations/manyToMany/ManyToManyRelation"),Fe=we.ManyToManyRelation,qe=require("../relations/belongsToOne/BelongsToOneRelation"),Ae=qe.BelongsToOneRelation,Ne=require("../relations/hasOneThrough/HasOneThroughRelation"),Ie=Ne.HasOneThroughRelation,Je=require("../queryBuilder/operations/InstanceFindOperation"),Pe=Je.InstanceFindOperation,Te=require("../queryBuilder/operations/InstanceInsertOperation"),Ce=Te.InstanceInsertOperation,Ee=require("../queryBuilder/operations/InstanceUpdateOperation"),je=Ee.InstanceUpdateOperation,De=require("../queryBuilder/operations/InstanceDeleteOperation"),Qe=De.InstanceDeleteOperation,xe=function(){function t(){e(this,t)}return r(t,[{key:"$id",value:function(e){return g(this,e)}},{key:"$hasId",value:function(){return $(this)}},{key:"$hasProps",value:function(e){return N(this,e)}},{key:"$query",value:function(e){return Be({instance:this,transaction:e})}},{key:"$relatedQuery",value:function(e,t){return Ve({modelClass:this.constructor,relationName:e,transaction:t,alwaysReturnArray:!1}).for(this)}},{key:"$loadRelated",value:function(e,t,r){return y("$loadRelated is deprected and will be removed in 3.0. Use $fetchGraph instead"),this.$fetchGraph(e,{transaction:r}).modifiers(t)}},{key:"$fetchGraph",value:function(e,t){return this.constructor.fetchGraph(this,e,t)}},{key:"$beforeValidate",value:function(e,t,r){return e}},{key:"$validate",value:function(e,t){return s(this,e,t)}},{key:"$afterValidate",value:function(e,t){}},{key:"$parseDatabaseJson",value:function(e){var t=this.constructor.getColumnNameMappers();return t&&(e=t.parse(e)),L(e,this.constructor)}},{key:"$formatDatabaseJson",value:function(e){var t=this.constructor.getColumnNameMappers();return e=X(e,this.constructor),t&&(e=t.format(e)),e}},{key:"$parseJson",value:function(e,t){return e}},{key:"$formatJson",value:function(e){return e}},{key:"$setJson",value:function(e,t){return S(this,e,t)}},{key:"$setDatabaseJson",value:function(e){return z(this,e)}},{key:"$set",value:function(e){return G(this,e)}},{key:"$setRelated",value:function(e,t){return H(this,e,t)}},{key:"$appendRelated",value:function(e,t){return K(this,e,t)}},{key:"$toJson",value:function(e){return R(this,e)}},{key:"toJSON",value:function(e){return this.$toJson(e)}},{key:"$toDatabaseJson",value:function(e){return w(this,e)}},{key:"$beforeInsert",value:function(e){}},{key:"$afterInsert",value:function(e){}},{key:"$beforeUpdate",value:function(e,t){}},{key:"$afterUpdate",value:function(e,t){}},{key:"$afterGet",value:function(e){}},{key:"$afterFind",value:function(e){}},{key:"$beforeDelete",value:function(e){}},{key:"$afterDelete",value:function(e){}},{key:"$omit",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return h(this,t)}},{key:"$pick",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return v(this,t)}},{key:"$values",value:function(e){return q(this,e)}},{key:"$propKey",value:function(e){return A(this,e)}},{key:"$idKey",value:function(){return this.$propKey(this.constructor.getIdPropertyArray())}},{key:"$clone",value:function(e){return a(this,!(!e||!e.shallow),!1)}},{key:"$traverse",value:function(e,t){return void 0===t&&(t=e,e=null),this.constructor.traverse(e,this,t),this}},{key:"$traverseAsync",value:function(e,t){return void 0===t&&(t=e,e=null),this.constructor.traverseAsync(e,this,t)}},{key:"$omitFromJson",value:function(e){if(0===arguments.length)return this.$$omitFromJson;this.hasOwnProperty("$$omitFromJson")?this.$$omitFromJson=this.$$omitFromJson.concat(e):J(this,"$$omitFromJson",e)}},{key:"$omitFromDatabaseJson",value:function(e){if(0===arguments.length)return this.$$omitFromDatabaseJson;this.hasOwnProperty("$$omitFromDatabaseJson")?this.$$omitFromDatabaseJson=this.$$omitFromDatabaseJson.concat(e):J(this,"$$omitFromDatabaseJson",e)}},{key:"$knex",value:function(){return this.constructor.knex()}},{key:"$transaction",value:function(){var e;return(e=this.constructor).transaction.apply(e,arguments)}},{key:"$ref",get:function(){return this.constructor.ref}}],[{key:"fromJson",value:function(e,t){var r=new this;return r.$setJson(e||{},t),r}},{key:"fromDatabaseJson",value:function(e){var t=new this;return t.$setDatabaseJson(e||{}),t}},{key:"onCreateQuery",value:function(e){}},{key:"beforeFind",value:function(e){}},{key:"afterFind",value:function(e){}},{key:"beforeInsert",value:function(e){}},{key:"afterInsert",value:function(e){}},{key:"beforeUpdate",value:function(e){}},{key:"afterUpdate",value:function(e){}},{key:"beforeDelete",value:function(e){}},{key:"afterDelete",value:function(e){}},{key:"omitImpl",value:function(e,t){delete e[t]}},{key:"joinTableAlias",value:function(e){return"".concat(e,"_join")}},{key:"createValidator",value:function(){return new se({onCreateAjv:function(e){},options:{allErrors:!0,validateSchema:!1,ownProperties:!0,v5:!0}})}},{key:"modifierNotFound",value:function(e,t){throw new this.ModifierNotFoundError(t)}},{key:"createNotFoundError",value:function(e,t){return new this.NotFoundError(t)}},{key:"createValidationError",value:function(e){return new this.ValidationError(e)}},{key:"getTableName",value:function(){var e=this.tableName;if(x(e)&&(e=this.tableName()),!B(e))throw new Error("Model ".concat(this.name," must have a static property tableName"));return e}},{key:"getIdColumn",value:function(){var e=this.idColumn;return x(e)&&(e=this.idColumn()),e}},{key:"getValidator",value:function(){return Ue(this,"$$validator",Se)}},{key:"getJsonSchema",value:function(){return Ue(this,"$$jsonSchema",Ge)}},{key:"getJsonAttributes",value:function(){return Ue(this,"$$jsonAttributes",_)}},{key:"getColumnNameMappers",value:function(){return Ue(this,"$$columnNameMappers",He)}},{key:"getConcurrency",value:function(e){return null===this.concurrency?e&&c(e)?1:4:x(this.concurrency)?this.concurrency():this.concurrency}},{key:"getModifiers",value:function(){return this.modifiers||this.namedFilters||{}}},{key:"columnNameToPropertyName",value:function(e){var t=Ue(this,"$$colToProp",function(){return new Map}),r=t.get(e);return r||(r=Z(this,e),t.set(e,r)),r}},{key:"propertyNameToColumnName",value:function(e){var t=Ue(this,"$$propToCol",function(){return new Map}),r=t.get(e);return r||(r=ee(this,e),t.set(e,r)),r}},{key:"getReadOnlyAttributes",value:function(){return Ue(this,"$$readOnlyAttributes",ze)}},{key:"getIdRelationProperty",value:function(){return Ue(this,"$$idRelationProperty",Ke)}},{key:"getIdColumnArray",value:function(){return this.getIdRelationProperty().cols}},{key:"getIdPropertyArray",value:function(){return this.getIdRelationProperty().props}},{key:"getIdProperty",value:function(){var e=this.getIdPropertyArray();return 1===e.length?e[0]:e}},{key:"getRelationMappings",value:function(){return Ue(this,"$$relationMappings",We)}},{key:"getRelations",value:function(){var e=Object.create(null),t=!0,r=!1,n=void 0;try{for(var a,o=this.getRelationNames()[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;e[i]=this.getRelation(i)}}catch(u){r=!0,n=u}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}return e}},{key:"getRelationNames",value:function(){return Ue(this,"$$relationNames",_e)}},{key:"getVirtualAttributes",value:function(){return Ue(this,"$$virtualAttributes",Le)}},{key:"getDefaultGraphOptions",value:function(){return this.defaultGraphOptions||this.defaultEagerOptions}},{key:"getRelatedFindQueryMutates",value:function(){return this.relatedFindQueryMutates&&y("Model.relatedFindQueryMutates is deprected and will be removed in 3.0."),this.relatedFindQueryMutates}},{key:"getRelatedInsertQueryMutates",value:function(){return this.relatedInsertQueryMutates&&y("Model.relatedInsertQueryMutates is deprected and will be removed in 3.0."),this.relatedInsertQueryMutates}},{key:"query",value:function(e){var t=this.QueryBuilder.forClass(this).transacting(e);return this.onCreateQuery(t),t}},{key:"relatedQuery",value:function(e,t){return Ve({modelClass:this,relationName:e,transaction:t,alwaysReturnArray:!0})}},{key:"fetchTableMetadata",value:function(e){return E(this,e)}},{key:"tableMetadata",value:function(e){return j(this,e)}},{key:"knex",value:function(){if(!arguments.length)return this.$$knex;J(this,"$$knex",arguments.length<=0?void 0:arguments[0])}},{key:"transaction",value:function(e,t){return t||(t=e,e=null),(e||this.knex()).transaction(t)}},{key:"startTransaction",value:function(e){return require("../transaction").transaction.start(e||this.knex())}},{key:"knexQuery",value:function(){return this.knex().table(this.getTableName())}},{key:"uniqueTag",value:function(){return this.name?"".concat(this.getTableName(),"_").concat(this.name):this.getTableName()}},{key:"bindKnex",value:function(e){return i(this,e)}},{key:"bindTransaction",value:function(e){return i(this,e)}},{key:"ensureModel",value:function(e,t){return e?e instanceof this?T(e,e,t):this.fromJson(e,t):null}},{key:"ensureModelArray",value:function(e,t){if(!e)return[];if(Array.isArray(e)){for(var r=new Array(e.length),n=0,a=e.length;n<a;++n)r[n]=this.ensureModel(e[n],t);return r}return[this.ensureModel(e,t)]}},{key:"getRelationUnsafe",value:function(e){var t=this.getRelationMappings()[e];return t?(this.hasOwnProperty("$$relations")||J(this,"$$relations",Object.create(null)),this.$$relations[e]||(this.$$relations[e]=new t.relation(e,this),this.$$relations[e].setMapping(t)),this.$$relations[e]):null}},{key:"getRelation",value:function(e){var t=this.getRelationUnsafe(e);if(!t)throw new Error("A model class ".concat(this.name," doesn't have relation ").concat(e));return t}},{key:"loadRelated",value:function(e,t,r,n){return y("loadRelated is deprected and will be removed in 3.0. Use fetchGraph instead"),this.fetchGraph(e,t,{transaction:n}).modifiers(r)}},{key:"fetchGraph",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.query(r.transaction).resolve(this.ensureModelArray(e)).findOptions({dontCallFindHooks:!0}).withGraphFetched(t,r).runAfter(function(t){return Array.isArray(e)?t:t[0]})}},{key:"traverse",value:function(){var e=Xe.apply(void 0,arguments),t=e.traverser,r=e.models,n=e.filterConstructor;if(V(r)){var a=V(r).constructor;return m(r,a,function(e,r,a,o){(!n||e instanceof n)&&t(e,a,o&&o.name)}),this}}},{key:"traverseAsync",value:function(){var e=Xe.apply(void 0,arguments),t=e.traverser,r=e.models,n=e.filterConstructor;if(!V(r))return Promise.resolve();var a=V(r).constructor,o=[];return m(r,a,function(e,r,a,i){if(!n||e instanceof n){var u=t(e,a,i&&i.name);o.push(u)}}),O(o,function(e){return e},{concurrency:this.getConcurrency(this.knex())})}},{key:"objectionModelClass",get:function(){return t}},{key:"raw",get:function(){return re}},{key:"ref",get:function(){var e=this;return function(){return ae.apply(void 0,arguments).model(e)}}},{key:"fn",get:function(){return ie}}]),t}();function Be(e){var t=e.instance,r=e.transaction;return t.constructor.query(r).findOperationFactory(function(){return new Pe("find",{instance:t})}).insertOperationFactory(function(){return new Ce("insert",{instance:t})}).updateOperationFactory(function(){return new je("update",{instance:t})}).patchOperationFactory(function(){return new je("patch",{instance:t,modelOptions:{patch:!0}})}).deleteOperationFactory(function(){return new Qe("delete",{instance:t})}).relateOperationFactory(function(){throw new Error("`relate` makes no sense in this context")}).unrelateOperationFactory(function(){throw new Error("`unrelate` makes no sense in this context")})}function Ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.modelClass,r=e.relationName,n=e.transaction,a=e.alwaysReturnArray,o=t.getRelation(r);return o.relatedModelClass.query(n).findOperationFactory(function(e){var r=!e.for(),n=r?ge.createParentReference(e,o):ge.create(e.for()),i=o.find(e,n);return i.assignResultToOwner=t.getRelatedFindQueryMutates(),i.alwaysReturnArray=a,i.alias=r?o.name:null,i}).insertOperationFactory(function(e){var r=ge.create(e.for()),n=o.insert(e,r);return n.assignResultToOwner=t.getRelatedInsertQueryMutates(),n}).updateOperationFactory(function(e){var t=ge.create(e.for());return o.update(e,t)}).patchOperationFactory(function(e){var t=ge.create(e.for());return o.patch(e,t)}).deleteOperationFactory(function(e){var t=ge.create(e.for());return o.delete(e,t)}).relateOperationFactory(function(e){var t=ge.create(e.for());return o.relate(e,t)}).unrelateOperationFactory(function(e){var t=ge.create(e.for());return o.unrelate(e,t)})}function Ue(e,t,r){return e.hasOwnProperty(t)||J(e,t,r(e)),e[t]}function Se(e){return e.createValidator()}function Ge(e){return e.jsonSchema}function He(e){return e.columnNameMappers}function Ke(e){var t=Q(e.getIdColumn());return new ke(t.map(function(t){return"".concat(e.getTableName(),".").concat(t)}),function(){return e})}function ze(e){return Object.getOwnPropertyNames(e.prototype).filter(function(t){var r=Object.getOwnPropertyDescriptor(e.prototype,t);return r.get&&!r.set||!1===r.writable||x(r.value)})}function We(e){var t=e.relationMappings;return x(t)&&(t=t.call(e)),t||{}}function _e(e){return Object.keys(e.getRelationMappings())}function Le(e){return e.virtualAttributes||[]}function Xe(e,t,r){if(e=e||null,void 0===r&&(r=t,t=e,e=null),!x(r))throw new Error("traverser must be a function");return{traverser:r,models:t,filterConstructor:e}}Object.defineProperties(xe,{isObjectionModelClass:{enumerable:!1,writable:!1,value:!0}}),Object.defineProperties(xe.prototype,{$isObjectionModel:{enumerable:!1,writable:!1,value:!0},$objectionModelClass:{enumerable:!1,writable:!1,value:xe}}),xe.QueryBuilder=ce,xe.HasOneRelation=Oe,xe.HasManyRelation=Re,xe.ManyToManyRelation=Fe,xe.BelongsToOneRelation=Ae,xe.HasOneThroughRelation=Ie,xe.JoinEagerAlgorithm="JoinEagerAlgorithm",xe.NaiveEagerAlgorithm="NaiveEagerAlgorithm",xe.WhereInEagerAlgorithm="WhereInEagerAlgorithm",xe.ValidationError=he,xe.NotFoundError=ye,xe.ModifierNotFoundError=pe,xe.tableName=null,xe.jsonSchema=null,xe.idColumn="id",xe.uidProp="#id",xe.uidRefProp="#ref",xe.dbRefProp="#dbRef",xe.propRefRegex=/#ref{([^\.]+)\.([^}]+)}/g,xe.jsonAttributes=null,xe.cloneObjectAttributes=!0,xe.virtualAttributes=null,xe.relationMappings=null,xe.modelPaths=[],xe.pickJsonSchemaProperties=!1,xe.defaultEagerAlgorithm=xe.WhereInEagerAlgorithm,xe.defaultEagerOptions=Object.freeze({minimize:!1,separator:":",aliases:{}}),xe.defaultGraphOptions=null,xe.defaultFindOptions=Object.freeze({}),xe.modifiers=null,xe.namedFilters=null,xe.useLimitInFirst=!1,xe.columnNameMappers=null,xe.relatedFindQueryMutates=!1,xe.relatedInsertQueryMutates=!1,xe.concurrency=null,module.exports={Model:xe};
},{"./modelClone":"NlkM","./modelBindKnex":"homf","./modelValidate":"Q3YO","../utils/knexUtils":"u553","../utils/deprecate":"NYRu","./modelFilter":"nxcQ","./modelVisitor":"iP6s","./modelId":"toye","../utils/promiseUtils":"zF81","./modelToJson":"dymm","./modelValues":"PfnY","./modelUtils":"cwbn","./modelParseRelations":"GYjt","./modelTableMetadata":"gGEe","../utils/objectUtils":"WAAQ","./modelSet":"DRa2","./modelJsonAttributes":"uuug","./modelColPropMap":"QkAW","../queryBuilder/RawBuilder":"VlR0","../queryBuilder/ReferenceBuilder":"UPD8","../queryBuilder/FunctionBuilder":"NXJJ","./AjvValidator":"nR6j","../queryBuilder/QueryBuilder":"Hc2E","./NotFoundError":"uo0w","./ValidationError":"sBi0","./ModifierNotFoundError":"zo7s","../relations/RelationProperty":"hjgq","../relations/RelationOwner":"hvdF","../relations/hasOne/HasOneRelation":"BJt4","../relations/hasMany/HasManyRelation":"Fs6v","../relations/manyToMany/ManyToManyRelation":"Jn79","../relations/belongsToOne/BelongsToOneRelation":"vEcx","../relations/hasOneThrough/HasOneThroughRelation":"lfNP","../queryBuilder/operations/InstanceFindOperation":"a06k","../queryBuilder/operations/InstanceInsertOperation":"K7vt","../queryBuilder/operations/InstanceUpdateOperation":"NYXj","../queryBuilder/operations/InstanceDeleteOperation":"kSvD","../transaction":"OZN9"}],"GwMb":[function(require,module,exports) {
"use strict";function e(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return t||(e=(t=e)[0].knex()),n.next=3,regeneratorRuntime.awrap(Promise.all(t.map(function(t){return t.fetchTableMetadata({knex:e})})));case 3:case"end":return n.stop()}})}module.exports={initialize:e};
},{}],"HN1p":[function(require,module,exports) {
"use strict";var e=require("./objectUtils"),r=e.isObject;function n(e){var r=new Map;return function(n){var t=r.get(n);return void 0===t&&(t=e(n),r.set(n,t)),t}}function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.upperCase,t=void 0!==n&&n,a=r.underscoreBeforeDigits,o=void 0!==a&&a,u=r.underscoreBetweenUppercaseLetters,s=void 0!==u&&u;if(0===e.length)return e;for(var f=e.toUpperCase(),c=e.toLowerCase(),p=c[0],v=1,l=e.length;v<l;++v){var d=e[v],g=e[v-1],h=f[v],C=f[v-1],k=c[v],y=c[v-1];if(o&&i(d)&&!i(g))p+="_"+d;else if(d===h&&h!==k)p+=s||!(g===C&&C!==y)?"_"+k:k;else p+=d}return t?p.toUpperCase():p}function a(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).upperCase,n=void 0!==r&&r;if(0===e.length)return e;n&&o(e)&&(e=e.toLowerCase());for(var t=e[0],a=1,i=e.length;a<i;++a){var u=e[a],s=e[a-1];"_"!==u&&(t+="_"===s?u.toUpperCase():u)}return t}function o(e){for(var r=1,n=e.length;r<n;++r){var t=e[r];if("_"!==t&&t!==t.toUpperCase())return!1}return!0}function i(e){return e>="0"&&e<="9"}function u(e,r){return function(n){var t=n.lastIndexOf(r),a=e(n.slice(t+r.length));return n.slice(0,t+r.length)+a}}function s(e){return function(n){if(!r(n)||Array.isArray(n))return n;for(var t=Object.keys(n),a={},o=0,i=t.length;o<i;++o){var u=t[o];a[e(u)]=n[u]}return a}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{parse:s(n(function(r){return a(r,e)})),format:s(n(function(r){return t(r,e)}))}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.parse,t=e.format,a=e.idSeparator,o=void 0===a?":":a,i=n(u(t,o)),f=s(n(u(r,o)));return{wrapIdentifier:function(e,r){return r(i(e))},postProcessResponse:function(e){if(Array.isArray(e)){for(var r=new Array(e.length),n=0,t=e.length;n<t;++n)r[n]=f(e[n]);return r}return f(e)}}}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c({parse:function(r){return a(r,e)},format:function(r){return t(r,e)}})}function v(e){var r=Object.keys(e).reduce(function(r,n){return r[e[n]]=n,r},{});return c({parse:function(r){return e[r]||r},format:function(e){return r[e]||e}})}module.exports={snakeCase:t,camelCase:a,snakeCaseMappers:f,knexSnakeCaseMappers:p,knexIdentifierMappers:c,knexIdentifierMapping:v,camelCaseKeys:s(n(a)),snakeCaseKeys:s(n(t))};
},{"./objectUtils":"WAAQ"}],"MkHu":[function(require,module,exports) {
"use strict";var r=require("./objectUtils"),e=r.flatten;function t(){var r=e(arguments);return r.slice(1).reduce(function(r,e){return e(r)},r[0])}function n(){var r=e(arguments);return function(e){return t(e,r)}}module.exports={compose:n,mixin:t};
},{"./objectUtils":"WAAQ"}],"y55l":[function(require,module,exports) {
"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function e(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}var a=require("../utils/objectUtils"),i=a.asArray,r=a.isObject,s=require("../utils/buildUtils"),u=s.buildArg,o=function(){function n(e){t(this,n),this._value=e,this._cast=null,this._toJson=r(e),this._toArray=!1}return e(n,[{key:"castText",value:function(){return this.castTo("text")}},{key:"castInt",value:function(){return this.castTo("integer")}},{key:"castBigInt",value:function(){return this.castTo("bigint")}},{key:"castFloat",value:function(){return this.castTo("float")}},{key:"castDecimal",value:function(){return this.castTo("decimal")}},{key:"castReal",value:function(){return this.castTo("real")}},{key:"castBool",value:function(){return this.castTo("boolean")}},{key:"castJson",value:function(){return this._toArray=!1,this._toJson=!0,this._cast="jsonb",this}},{key:"castTo",value:function(t){return this._cast=t,this}},{key:"asArray",value:function(){return this._toJson=!1,this._toArray=!0,this}},{key:"toKnexRaw",value:function(t){var n=null,e=null;return this._toJson?(e=JSON.stringify(this._value),n="?"):this._toArray?(e=i(this._value).map(function(n){return u(n,t)}),n="ARRAY[".concat(e.map(function(){return"?"}).join(", "),"]")):(e=this._value,n="?"),this._cast&&(n="CAST(".concat(n," AS ").concat(this._cast,")")),t.knex().raw(n,e)}},{key:"cast",get:function(){return this._cast}}]),n}();function c(t){return new o(t)}module.exports={ValueBuilder:o,val:c};
},{"../utils/objectUtils":"WAAQ","../utils/buildUtils":"Y5QW"}],"jqAY":[function(require,module,exports) {
"use strict";function t(t,e){return t.prototype=Object.create(e.prototype),t.prototype.constructor=e,Object.setPrototypeOf(t,e),t}module.exports={inherit:t};
},{}],"StH2":[function(require,module,exports) {
"use strict";function e(e,i){if(null==e)return{};var n,a,o=r(e,i);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(a=0;a<t.length;a++)n=t[a],i.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function r(e,r){if(null==e)return{};var i,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],r.indexOf(i)>=0||(a[i]=e[i]);return a}var i=require("db-errors"),n=i.wrapError,a=e(i,["wrapError"]),o=require("./model/Model"),t=o.Model,l=require("./queryBuilder/QueryBuilder"),u=l.QueryBuilder,s=require("./queryBuilder/QueryBuilderBase"),d=s.QueryBuilderBase,y=require("./queryBuilder/operations/QueryBuilderOperation"),p=y.QueryBuilderOperation,q=require("./queryBuilder/RelationExpression"),c=q.RelationExpression,B=require("./model/ValidationError"),f=B.ValidationError,O=require("./model/NotFoundError"),R=O.NotFoundError,M=require("./model/AjvValidator"),h=M.AjvValidator,g=require("./model/Validator"),m=g.Validator,v=require("./relations/Relation"),x=v.Relation,b=require("./relations/hasOne/HasOneRelation"),E=b.HasOneRelation,T=require("./relations/hasMany/HasManyRelation"),w=T.HasManyRelation,Q=require("./relations/belongsToOne/BelongsToOneRelation"),V=Q.BelongsToOneRelation,k=require("./relations/hasOneThrough/HasOneThroughRelation"),H=k.HasOneThroughRelation,j=require("./relations/manyToMany/ManyToManyRelation"),A=j.ManyToManyRelation,C=require("./transaction"),F=C.transaction,S=require("./initialize"),z=S.initialize,I=require("./utils/identifierMapping"),N=I.snakeCaseMappers,P=I.knexSnakeCaseMappers,U=I.knexIdentifierMapping,D=require("./utils/mixin"),G=D.compose,J=D.mixin,K=require("./queryBuilder/ReferenceBuilder"),L=K.ref,W=require("./queryBuilder/ValueBuilder"),X=W.val,Y=require("./queryBuilder/RawBuilder"),Z=Y.raw,$=require("./queryBuilder/FunctionBuilder"),_=$.fn,ee=require("../lib/utils/classUtils"),re=ee.inherit,ie=require("../lib/utils/deprecate"),ne=ie.deprecate;function ae(){}function oe(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];u.init.apply(u,[this].concat(r))}function te(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];m.init.apply(m,[this].concat(r))}function le(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];h.init.apply(h,[this].concat(r))}re(ae,t),re(oe,u),re(te,m),re(le,h),ae.QueryBuilder=oe,module.exports={Model:ae,QueryBuilder:oe,QueryBuilderBase:d,QueryBuilderOperation:p,RelationExpression:c,ValidationError:f,NotFoundError:R,AjvValidator:le,Validator:te,Relation:x,HasOneRelation:E,HasManyRelation:w,BelongsToOneRelation:V,HasOneThroughRelation:H,ManyToManyRelation:A,transaction:F,initialize:z,compose:G,mixin:J,ref:L,val:X,raw:Z,fn:_,get lit(){return ne("`lit` is deprecated. Use `val` instead. `lit` will be removed in 3.0"),X},snakeCaseMappers:N,knexSnakeCaseMappers:P,knexIdentifierMapping:U,...a};
},{"db-errors":"P9Yc","./model/Model":"GiQj","./queryBuilder/QueryBuilder":"Hc2E","./queryBuilder/QueryBuilderBase":"Zawf","./queryBuilder/operations/QueryBuilderOperation":"ik4h","./queryBuilder/RelationExpression":"qujN","./model/ValidationError":"sBi0","./model/NotFoundError":"uo0w","./model/AjvValidator":"nR6j","./model/Validator":"eQ92","./relations/Relation":"N1j8","./relations/hasOne/HasOneRelation":"BJt4","./relations/hasMany/HasManyRelation":"Fs6v","./relations/belongsToOne/BelongsToOneRelation":"vEcx","./relations/hasOneThrough/HasOneThroughRelation":"lfNP","./relations/manyToMany/ManyToManyRelation":"Jn79","./transaction":"OZN9","./initialize":"GwMb","./utils/identifierMapping":"HN1p","./utils/mixin":"MkHu","./queryBuilder/ReferenceBuilder":"UPD8","./queryBuilder/ValueBuilder":"y55l","./queryBuilder/RawBuilder":"VlR0","./queryBuilder/FunctionBuilder":"NXJJ","../lib/utils/classUtils":"jqAY","../lib/utils/deprecate":"NYRu"}],"Thv4":[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:module.exports=function(t,e){if(e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}};
},{}],"uinZ":[function(require,module,exports) {
var global = arguments[3];
var Buffer = require("buffer").Buffer;
var define;
var n,t=arguments[3],r=require("buffer").Buffer;(function(){var r,e=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="__lodash_hash_undefined__",f=500,a="__lodash_placeholder__",c=1,l=2,s=4,h=1,p=2,v=1,_=2,g=4,y=8,d=16,b=32,w=64,m=128,x=256,j=512,A=30,k="...",O=800,I=16,R=1,E=2,z=1/0,S=9007199254740991,L=1.7976931348623157e308,W=NaN,C=4294967295,B=C-1,U=C>>>1,T=[["ary",m],["bind",v],["bindKey",_],["curry",y],["curryRight",d],["flip",j],["partial",b],["partialRight",w],["rearg",x]],$="[object Arguments]",D="[object Array]",M="[object AsyncFunction]",F="[object Boolean]",N="[object Date]",P="[object DOMException]",q="[object Error]",Z="[object Function]",K="[object GeneratorFunction]",V="[object Map]",G="[object Number]",H="[object Null]",J="[object Object]",Y="[object Proxy]",Q="[object RegExp]",X="[object Set]",nn="[object String]",tn="[object Symbol]",rn="[object Undefined]",en="[object WeakMap]",un="[object WeakSet]",on="[object ArrayBuffer]",fn="[object DataView]",an="[object Float32Array]",cn="[object Float64Array]",ln="[object Int8Array]",sn="[object Int16Array]",hn="[object Int32Array]",pn="[object Uint8Array]",vn="[object Uint8ClampedArray]",_n="[object Uint16Array]",gn="[object Uint32Array]",yn=/\b__p \+= '';/g,dn=/\b(__p \+=) '' \+/g,bn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wn=/&(?:amp|lt|gt|quot|#39);/g,mn=/[&<>"']/g,xn=RegExp(wn.source),jn=RegExp(mn.source),An=/<%-([\s\S]+?)%>/g,kn=/<%([\s\S]+?)%>/g,On=/<%=([\s\S]+?)%>/g,In=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rn=/^\w*$/,En=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zn=/[\\^$.*+?()[\]{}|]/g,Sn=RegExp(zn.source),Ln=/^\s+|\s+$/g,Wn=/^\s+/,Cn=/\s+$/,Bn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Un=/\{\n\/\* \[wrapped with (.+)\] \*/,Tn=/,? & /,$n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Dn=/\\(\\)?/g,Mn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Fn=/\w*$/,Nn=/^[-+]0x[0-9a-f]+$/i,Pn=/^0b[01]+$/i,qn=/^\[object .+?Constructor\]$/,Zn=/^0o[0-7]+$/i,Kn=/^(?:0|[1-9]\d*)$/,Vn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Gn=/($^)/,Hn=/['\n\r\u2028\u2029\\]/g,Jn="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Yn="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qn="[\\ud800-\\udfff]",Xn="["+Yn+"]",nt="["+Jn+"]",tt="\\d+",rt="[\\u2700-\\u27bf]",et="[a-z\\xdf-\\xf6\\xf8-\\xff]",ut="[^\\ud800-\\udfff"+Yn+tt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",it="\\ud83c[\\udffb-\\udfff]",ot="[^\\ud800-\\udfff]",ft="(?:\\ud83c[\\udde6-\\uddff]){2}",at="[\\ud800-\\udbff][\\udc00-\\udfff]",ct="[A-Z\\xc0-\\xd6\\xd8-\\xde]",lt="(?:"+et+"|"+ut+")",st="(?:"+ct+"|"+ut+")",ht="(?:"+nt+"|"+it+")"+"?",pt="[\\ufe0e\\ufe0f]?"+ht+("(?:\\u200d(?:"+[ot,ft,at].join("|")+")[\\ufe0e\\ufe0f]?"+ht+")*"),vt="(?:"+[rt,ft,at].join("|")+")"+pt,_t="(?:"+[ot+nt+"?",nt,ft,at,Qn].join("|")+")",gt=RegExp("['â]","g"),yt=RegExp(nt,"g"),dt=RegExp(it+"(?="+it+")|"+_t+pt,"g"),bt=RegExp([ct+"?"+et+"+(?:['â](?:d|ll|m|re|s|t|ve))?(?="+[Xn,ct,"$"].join("|")+")",st+"+(?:['â](?:D|LL|M|RE|S|T|VE))?(?="+[Xn,ct+lt,"$"].join("|")+")",ct+"?"+lt+"+(?:['â](?:d|ll|m|re|s|t|ve))?",ct+"+(?:['â](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tt,vt].join("|"),"g"),wt=RegExp("[\\u200d\\ud800-\\udfff"+Jn+"\\ufe0e\\ufe0f]"),mt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,xt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],jt=-1,At={};At[an]=At[cn]=At[ln]=At[sn]=At[hn]=At[pn]=At[vn]=At[_n]=At[gn]=!0,At[$]=At[D]=At[on]=At[F]=At[fn]=At[N]=At[q]=At[Z]=At[V]=At[G]=At[J]=At[Q]=At[X]=At[nn]=At[en]=!1;var kt={};kt[$]=kt[D]=kt[on]=kt[fn]=kt[F]=kt[N]=kt[an]=kt[cn]=kt[ln]=kt[sn]=kt[hn]=kt[V]=kt[G]=kt[J]=kt[Q]=kt[X]=kt[nn]=kt[tn]=kt[pn]=kt[vn]=kt[_n]=kt[gn]=!0,kt[q]=kt[Z]=kt[en]=!1;var Ot={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},It=parseFloat,Rt=parseInt,Et="object"==typeof t&&t&&t.Object===Object&&t,zt="object"==typeof self&&self&&self.Object===Object&&self,St=Et||zt||Function("return this")(),Lt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Wt=Lt&&"object"==typeof module&&module&&!module.nodeType&&module,Ct=Wt&&Wt.exports===Lt,Bt=Ct&&Et.process,Ut=function(){try{var n=Wt&&Wt.require&&Wt.require("util").types;return n||Bt&&Bt.binding&&Bt.binding("util")}catch(t){}}(),Tt=Ut&&Ut.isArrayBuffer,$t=Ut&&Ut.isDate,Dt=Ut&&Ut.isMap,Mt=Ut&&Ut.isRegExp,Ft=Ut&&Ut.isSet,Nt=Ut&&Ut.isTypedArray;function Pt(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function qt(n,t,r,e){for(var u=-1,i=null==n?0:n.length;++u<i;){var o=n[u];t(e,o,r(o),n)}return e}function Zt(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&!1!==t(n[r],r,n););return n}function Kt(n,t){for(var r=null==n?0:n.length;r--&&!1!==t(n[r],r,n););return n}function Vt(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function Gt(n,t){for(var r=-1,e=null==n?0:n.length,u=0,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[u++]=o)}return i}function Ht(n,t){return!!(null==n?0:n.length)&&ir(n,t,0)>-1}function Jt(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return!0;return!1}function Yt(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function Qt(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function Xt(n,t,r,e){var u=-1,i=null==n?0:n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);return r}function nr(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function tr(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}var rr=cr("length");function er(n,t,r){var e;return r(n,function(n,r,u){if(t(n,r,u))return e=r,!1}),e}function ur(n,t,r,e){for(var u=n.length,i=r+(e?1:-1);e?i--:++i<u;)if(t(n[i],i,n))return i;return-1}function ir(n,t,r){return t==t?function(n,t,r){var e=r-1,u=n.length;for(;++e<u;)if(n[e]===t)return e;return-1}(n,t,r):ur(n,fr,r)}function or(n,t,r,e){for(var u=r-1,i=n.length;++u<i;)if(e(n[u],t))return u;return-1}function fr(n){return n!=n}function ar(n,t){var r=null==n?0:n.length;return r?hr(n,t)/r:W}function cr(n){return function(t){return null==t?r:t[n]}}function lr(n){return function(t){return null==n?r:n[t]}}function sr(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function hr(n,t){for(var e,u=-1,i=n.length;++u<i;){var o=t(n[u]);o!==r&&(e=e===r?o:e+o)}return e}function pr(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function vr(n){return function(t){return n(t)}}function _r(n,t){return Yt(t,function(t){return n[t]})}function gr(n,t){return n.has(t)}function yr(n,t){for(var r=-1,e=n.length;++r<e&&ir(t,n[r],0)>-1;);return r}function dr(n,t){for(var r=n.length;r--&&ir(t,n[r],0)>-1;);return r}var br=lr({"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss","Ä":"A","Ä":"A","Ä":"A","Ä":"a","Ä":"a","Ä":"a","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"D","Ä":"D","Ä":"d","Ä":"d","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"G","Ä":"G","Ä ":"G","Ä¢":"G","Ä":"g","Ä":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å":"l","Å":"l","Å":"N","Å":"N","Å":"N","Å":"N","Å":"n","Å":"n","Å":"n","Å":"n","Å":"O","Å":"O","Å":"O","Å":"o","Å":"o","Å":"o","Å":"R","Å":"R","Å":"R","Å":"r","Å":"r","Å":"r","Å":"S","Å":"S","Å":"S","Å ":"S","Å":"s","Å":"s","Å":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å":"Oe","Å":"oe","Å":"'n","Å¿":"s"}),wr=lr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function mr(n){return"\\"+Ot[n]}function xr(n){return wt.test(n)}function jr(n){var t=-1,r=Array(n.size);return n.forEach(function(n,e){r[++t]=[e,n]}),r}function Ar(n,t){return function(r){return n(t(r))}}function kr(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];o!==t&&o!==a||(n[r]=a,i[u++]=r)}return i}function Or(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=n}),r}function Ir(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=[n,n]}),r}function Rr(n){return xr(n)?function(n){var t=dt.lastIndex=0;for(;dt.test(n);)++t;return t}(n):rr(n)}function Er(n){return xr(n)?function(n){return n.match(dt)||[]}(n):function(n){return n.split("")}(n)}var zr=lr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Sr=function n(t){var Jn,Yn=(t=null==t?St:Sr.defaults(St.Object(),t,Sr.pick(St,xt))).Array,Qn=t.Date,Xn=t.Error,nt=t.Function,tt=t.Math,rt=t.Object,et=t.RegExp,ut=t.String,it=t.TypeError,ot=Yn.prototype,ft=nt.prototype,at=rt.prototype,ct=t["__core-js_shared__"],lt=ft.toString,st=at.hasOwnProperty,ht=0,pt=(Jn=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||""))?"Symbol(src)_1."+Jn:"",vt=at.toString,_t=lt.call(rt),dt=St._,wt=et("^"+lt.call(st).replace(zn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ot=Ct?t.Buffer:r,Et=t.Symbol,zt=t.Uint8Array,Lt=Ot?Ot.allocUnsafe:r,Wt=Ar(rt.getPrototypeOf,rt),Bt=rt.create,Ut=at.propertyIsEnumerable,rr=ot.splice,lr=Et?Et.isConcatSpreadable:r,Lr=Et?Et.iterator:r,Wr=Et?Et.toStringTag:r,Cr=function(){try{var n=$i(rt,"defineProperty");return n({},"",{}),n}catch(t){}}(),Br=t.clearTimeout!==St.clearTimeout&&t.clearTimeout,Ur=Qn&&Qn.now!==St.Date.now&&Qn.now,Tr=t.setTimeout!==St.setTimeout&&t.setTimeout,$r=tt.ceil,Dr=tt.floor,Mr=rt.getOwnPropertySymbols,Fr=Ot?Ot.isBuffer:r,Nr=t.isFinite,Pr=ot.join,qr=Ar(rt.keys,rt),Zr=tt.max,Kr=tt.min,Vr=Qn.now,Gr=t.parseInt,Hr=tt.random,Jr=ot.reverse,Yr=$i(t,"DataView"),Qr=$i(t,"Map"),Xr=$i(t,"Promise"),ne=$i(t,"Set"),te=$i(t,"WeakMap"),re=$i(rt,"create"),ee=te&&new te,ue={},ie=lo(Yr),oe=lo(Qr),fe=lo(Xr),ae=lo(ne),ce=lo(te),le=Et?Et.prototype:r,se=le?le.valueOf:r,he=le?le.toString:r;function pe(n){if(Ef(n)&&!df(n)&&!(n instanceof ye)){if(n instanceof ge)return n;if(st.call(n,"__wrapped__"))return so(n)}return new ge(n)}var ve=function(){function n(){}return function(t){if(!Rf(t))return{};if(Bt)return Bt(t);n.prototype=t;var e=new n;return n.prototype=r,e}}();function _e(){}function ge(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function ye(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=C,this.__views__=[]}function de(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function be(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function we(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function me(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new we;++t<r;)this.add(n[t])}function xe(n){var t=this.__data__=new be(n);this.size=t.size}function je(n,t){var r=df(n),e=!r&&yf(n),u=!r&&!e&&xf(n),i=!r&&!e&&!u&&Tf(n),o=r||e||u||i,f=o?pr(n.length,ut):[],a=f.length;for(var c in n)!t&&!st.call(n,c)||o&&("length"==c||u&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Zi(c,a))||f.push(c);return f}function Ae(n){var t=n.length;return t?n[mu(0,t-1)]:r}function ke(n,t){return fo(ri(n),Ce(t,0,n.length))}function Oe(n){return fo(ri(n))}function Ie(n,t,e){(e===r||vf(n[t],e))&&(e!==r||t in n)||Le(n,t,e)}function Re(n,t,e){var u=n[t];st.call(n,t)&&vf(u,e)&&(e!==r||t in n)||Le(n,t,e)}function Ee(n,t){for(var r=n.length;r--;)if(vf(n[r][0],t))return r;return-1}function ze(n,t,r,e){return De(n,function(n,u,i){t(e,n,r(n),i)}),e}function Se(n,t){return n&&ei(t,ia(t),n)}function Le(n,t,r){"__proto__"==t&&Cr?Cr(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}function We(n,t){for(var e=-1,u=t.length,i=Yn(u),o=null==n;++e<u;)i[e]=o?r:na(n,t[e]);return i}function Ce(n,t,e){return n==n&&(e!==r&&(n=n<=e?n:e),t!==r&&(n=n>=t?n:t)),n}function Be(n,t,e,u,i,o){var f,a=t&c,h=t&l,p=t&s;if(e&&(f=i?e(n,u,i,o):e(n)),f!==r)return f;if(!Rf(n))return n;var v=df(n);if(v){if(f=function(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&st.call(n,"index")&&(r.index=n.index,r.input=n.input),r}(n),!a)return ri(n,f)}else{var _=Fi(n),g=_==Z||_==K;if(xf(n))return Ju(n,a);if(_==J||_==$||g&&!i){if(f=h||g?{}:Pi(n),!a)return h?function(n,t){return ei(n,Mi(n),t)}(n,function(n,t){return n&&ei(t,oa(t),n)}(f,n)):function(n,t){return ei(n,Di(n),t)}(n,Se(f,n))}else{if(!kt[_])return i?n:{};f=function(n,t,r){var e,u,i,o=n.constructor;switch(t){case on:return Yu(n);case F:case N:return new o(+n);case fn:return function(n,t){var r=t?Yu(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.byteLength)}(n,r);case an:case cn:case ln:case sn:case hn:case pn:case vn:case _n:case gn:return Qu(n,r);case V:return new o;case G:case nn:return new o(n);case Q:return(i=new(u=n).constructor(u.source,Fn.exec(u))).lastIndex=u.lastIndex,i;case X:return new o;case tn:return e=n,se?rt(se.call(e)):{}}}(n,_,a)}}o||(o=new xe);var y=o.get(n);if(y)return y;o.set(n,f),Cf(n)?n.forEach(function(r){f.add(Be(r,t,e,r,n,o))}):zf(n)&&n.forEach(function(r,u){f.set(u,Be(r,t,e,u,n,o))});var d=v?r:(p?h?Si:zi:h?oa:ia)(n);return Zt(d||n,function(r,u){d&&(r=n[u=r]),Re(f,u,Be(r,t,e,u,n,o))}),f}function Ue(n,t,e){var u=e.length;if(null==n)return!u;for(n=rt(n);u--;){var i=e[u],o=t[i],f=n[i];if(f===r&&!(i in n)||!o(f))return!1}return!0}function Te(n,t,e){if("function"!=typeof n)throw new it(i);return eo(function(){n.apply(r,e)},t)}function $e(n,t,r,u){var i=-1,o=Ht,f=!0,a=n.length,c=[],l=t.length;if(!a)return c;r&&(t=Yt(t,vr(r))),u?(o=Jt,f=!1):t.length>=e&&(o=gr,f=!1,t=new me(t));n:for(;++i<a;){var s=n[i],h=null==r?s:r(s);if(s=u||0!==s?s:0,f&&h==h){for(var p=l;p--;)if(t[p]===h)continue n;c.push(s)}else o(t,h,u)||c.push(s)}return c}pe.templateSettings={escape:An,evaluate:kn,interpolate:On,variable:"",imports:{_:pe}},pe.prototype=_e.prototype,pe.prototype.constructor=pe,ge.prototype=ve(_e.prototype),ge.prototype.constructor=ge,ye.prototype=ve(_e.prototype),ye.prototype.constructor=ye,de.prototype.clear=function(){this.__data__=re?re(null):{},this.size=0},de.prototype.delete=function(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t},de.prototype.get=function(n){var t=this.__data__;if(re){var e=t[n];return e===o?r:e}return st.call(t,n)?t[n]:r},de.prototype.has=function(n){var t=this.__data__;return re?t[n]!==r:st.call(t,n)},de.prototype.set=function(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=re&&t===r?o:t,this},be.prototype.clear=function(){this.__data__=[],this.size=0},be.prototype.delete=function(n){var t=this.__data__,r=Ee(t,n);return!(r<0||(r==t.length-1?t.pop():rr.call(t,r,1),--this.size,0))},be.prototype.get=function(n){var t=this.__data__,e=Ee(t,n);return e<0?r:t[e][1]},be.prototype.has=function(n){return Ee(this.__data__,n)>-1},be.prototype.set=function(n,t){var r=this.__data__,e=Ee(r,n);return e<0?(++this.size,r.push([n,t])):r[e][1]=t,this},we.prototype.clear=function(){this.size=0,this.__data__={hash:new de,map:new(Qr||be),string:new de}},we.prototype.delete=function(n){var t=Ui(this,n).delete(n);return this.size-=t?1:0,t},we.prototype.get=function(n){return Ui(this,n).get(n)},we.prototype.has=function(n){return Ui(this,n).has(n)},we.prototype.set=function(n,t){var r=Ui(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this},me.prototype.add=me.prototype.push=function(n){return this.__data__.set(n,o),this},me.prototype.has=function(n){return this.__data__.has(n)},xe.prototype.clear=function(){this.__data__=new be,this.size=0},xe.prototype.delete=function(n){var t=this.__data__,r=t.delete(n);return this.size=t.size,r},xe.prototype.get=function(n){return this.__data__.get(n)},xe.prototype.has=function(n){return this.__data__.has(n)},xe.prototype.set=function(n,t){var r=this.__data__;if(r instanceof be){var u=r.__data__;if(!Qr||u.length<e-1)return u.push([n,t]),this.size=++r.size,this;r=this.__data__=new we(u)}return r.set(n,t),this.size=r.size,this};var De=oi(Ve),Me=oi(Ge,!0);function Fe(n,t){var r=!0;return De(n,function(n,e,u){return r=!!t(n,e,u)}),r}function Ne(n,t,e){for(var u=-1,i=n.length;++u<i;){var o=n[u],f=t(o);if(null!=f&&(a===r?f==f&&!Uf(f):e(f,a)))var a=f,c=o}return c}function Pe(n,t){var r=[];return De(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function qe(n,t,r,e,u){var i=-1,o=n.length;for(r||(r=qi),u||(u=[]);++i<o;){var f=n[i];t>0&&r(f)?t>1?qe(f,t-1,r,e,u):Qt(u,f):e||(u[u.length]=f)}return u}var Ze=fi(),Ke=fi(!0);function Ve(n,t){return n&&Ze(n,t,ia)}function Ge(n,t){return n&&Ke(n,t,ia)}function He(n,t){return Gt(t,function(t){return kf(n[t])})}function Je(n,t){for(var e=0,u=(t=Ku(t,n)).length;null!=n&&e<u;)n=n[co(t[e++])];return e&&e==u?n:r}function Ye(n,t,r){var e=t(n);return df(n)?e:Qt(e,r(n))}function Qe(n){return null==n?n===r?rn:H:Wr&&Wr in rt(n)?function(n){var t=st.call(n,Wr),e=n[Wr];try{n[Wr]=r;var u=!0}catch(o){}var i=vt.call(n);return u&&(t?n[Wr]=e:delete n[Wr]),i}(n):function(n){return vt.call(n)}(n)}function Xe(n,t){return n>t}function nu(n,t){return null!=n&&st.call(n,t)}function tu(n,t){return null!=n&&t in rt(n)}function ru(n,t,e){for(var u=e?Jt:Ht,i=n[0].length,o=n.length,f=o,a=Yn(o),c=1/0,l=[];f--;){var s=n[f];f&&t&&(s=Yt(s,vr(t))),c=Kr(s.length,c),a[f]=!e&&(t||i>=120&&s.length>=120)?new me(f&&s):r}s=n[0];var h=-1,p=a[0];n:for(;++h<i&&l.length<c;){var v=s[h],_=t?t(v):v;if(v=e||0!==v?v:0,!(p?gr(p,_):u(l,_,e))){for(f=o;--f;){var g=a[f];if(!(g?gr(g,_):u(n[f],_,e)))continue n}p&&p.push(_),l.push(v)}}return l}function eu(n,t,e){var u=null==(n=no(n,t=Ku(t,n)))?n:n[co(jo(t))];return null==u?r:Pt(u,n,e)}function uu(n){return Ef(n)&&Qe(n)==$}function iu(n,t,e,u,i){return n===t||(null==n||null==t||!Ef(n)&&!Ef(t)?n!=n&&t!=t:function(n,t,e,u,i,o){var f=df(n),a=df(t),c=f?D:Fi(n),l=a?D:Fi(t),s=(c=c==$?J:c)==J,v=(l=l==$?J:l)==J,_=c==l;if(_&&xf(n)){if(!xf(t))return!1;f=!0,s=!1}if(_&&!s)return o||(o=new xe),f||Tf(n)?Ri(n,t,e,u,i,o):function(n,t,r,e,u,i,o){switch(r){case fn:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case on:return!(n.byteLength!=t.byteLength||!i(new zt(n),new zt(t)));case F:case N:case G:return vf(+n,+t);case q:return n.name==t.name&&n.message==t.message;case Q:case nn:return n==t+"";case V:var f=jr;case X:var a=e&h;if(f||(f=Or),n.size!=t.size&&!a)return!1;var c=o.get(n);if(c)return c==t;e|=p,o.set(n,t);var l=Ri(f(n),f(t),e,u,i,o);return o.delete(n),l;case tn:if(se)return se.call(n)==se.call(t)}return!1}(n,t,c,e,u,i,o);if(!(e&h)){var g=s&&st.call(n,"__wrapped__"),y=v&&st.call(t,"__wrapped__");if(g||y){var d=g?n.value():n,b=y?t.value():t;return o||(o=new xe),i(d,b,e,u,o)}}return!!_&&(o||(o=new xe),function(n,t,e,u,i,o){var f=e&h,a=zi(n),c=a.length,l=zi(t).length;if(c!=l&&!f)return!1;for(var s=c;s--;){var p=a[s];if(!(f?p in t:st.call(t,p)))return!1}var v=o.get(n);if(v&&o.get(t))return v==t;var _=!0;o.set(n,t),o.set(t,n);for(var g=f;++s<c;){p=a[s];var y=n[p],d=t[p];if(u)var b=f?u(d,y,p,t,n,o):u(y,d,p,n,t,o);if(!(b===r?y===d||i(y,d,e,u,o):b)){_=!1;break}g||(g="constructor"==p)}if(_&&!g){var w=n.constructor,m=t.constructor;w!=m&&"constructor"in n&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof m&&m instanceof m)&&(_=!1)}return o.delete(n),o.delete(t),_}(n,t,e,u,i,o))}(n,t,e,u,iu,i))}function ou(n,t,e,u){var i=e.length,o=i,f=!u;if(null==n)return!o;for(n=rt(n);i--;){var a=e[i];if(f&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<o;){var c=(a=e[i])[0],l=n[c],s=a[1];if(f&&a[2]){if(l===r&&!(c in n))return!1}else{var v=new xe;if(u)var _=u(l,s,c,n,t,v);if(!(_===r?iu(s,l,h|p,u,v):_))return!1}}return!0}function fu(n){return!(!Rf(n)||(t=n,pt&&pt in t))&&(kf(n)?wt:qn).test(lo(n));var t}function au(n){return"function"==typeof n?n:null==n?Sa:"object"==typeof n?df(n)?vu(n[0],n[1]):pu(n):Ma(n)}function cu(n){if(!Ji(n))return qr(n);var t=[];for(var r in rt(n))st.call(n,r)&&"constructor"!=r&&t.push(r);return t}function lu(n){if(!Rf(n))return function(n){var t=[];if(null!=n)for(var r in rt(n))t.push(r);return t}(n);var t=Ji(n),r=[];for(var e in n)("constructor"!=e||!t&&st.call(n,e))&&r.push(e);return r}function su(n,t){return n<t}function hu(n,t){var r=-1,e=wf(n)?Yn(n.length):[];return De(n,function(n,u,i){e[++r]=t(n,u,i)}),e}function pu(n){var t=Ti(n);return 1==t.length&&t[0][2]?Qi(t[0][0],t[0][1]):function(r){return r===n||ou(r,n,t)}}function vu(n,t){return Vi(n)&&Yi(t)?Qi(co(n),t):function(e){var u=na(e,n);return u===r&&u===t?ta(e,n):iu(t,u,h|p)}}function _u(n,t,e,u,i){n!==t&&Ze(t,function(o,f){if(i||(i=new xe),Rf(o))!function(n,t,e,u,i,o,f){var a=to(n,e),c=to(t,e),l=f.get(c);if(l)Ie(n,e,l);else{var s=o?o(a,c,e+"",n,t,f):r,h=s===r;if(h){var p=df(c),v=!p&&xf(c),_=!p&&!v&&Tf(c);s=c,p||v||_?df(a)?s=a:mf(a)?s=ri(a):v?(h=!1,s=Ju(c,!0)):_?(h=!1,s=Qu(c,!0)):s=[]:Lf(c)||yf(c)?(s=a,yf(a)?s=Zf(a):Rf(a)&&!kf(a)||(s=Pi(c))):h=!1}h&&(f.set(c,s),i(s,c,u,o,f),f.delete(c)),Ie(n,e,s)}}(n,t,f,e,_u,u,i);else{var a=u?u(to(n,f),o,f+"",n,t,i):r;a===r&&(a=o),Ie(n,f,a)}},oa)}function gu(n,t){var e=n.length;if(e)return Zi(t+=t<0?e:0,e)?n[t]:r}function yu(n,t,r){var e=-1;return t=Yt(t.length?t:[Sa],vr(Bi())),function(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}(hu(n,function(n,r,u){return{criteria:Yt(t,function(t){return t(n)}),index:++e,value:n}}),function(n,t){return function(n,t,r){for(var e=-1,u=n.criteria,i=t.criteria,o=u.length,f=r.length;++e<o;){var a=Xu(u[e],i[e]);if(a){if(e>=f)return a;var c=r[e];return a*("desc"==c?-1:1)}}return n.index-t.index}(n,t,r)})}function du(n,t,r){for(var e=-1,u=t.length,i={};++e<u;){var o=t[e],f=Je(n,o);r(f,o)&&Ou(i,Ku(o,n),f)}return i}function bu(n,t,r,e){var u=e?or:ir,i=-1,o=t.length,f=n;for(n===t&&(t=ri(t)),r&&(f=Yt(n,vr(r)));++i<o;)for(var a=0,c=t[i],l=r?r(c):c;(a=u(f,l,a,e))>-1;)f!==n&&rr.call(f,a,1),rr.call(n,a,1);return n}function wu(n,t){for(var r=n?t.length:0,e=r-1;r--;){var u=t[r];if(r==e||u!==i){var i=u;Zi(u)?rr.call(n,u,1):$u(n,u)}}return n}function mu(n,t){return n+Dr(Hr()*(t-n+1))}function xu(n,t){var r="";if(!n||t<1||t>S)return r;do{t%2&&(r+=n),(t=Dr(t/2))&&(n+=n)}while(t);return r}function ju(n,t){return uo(Xi(n,t,Sa),n+"")}function Au(n){return Ae(va(n))}function ku(n,t){var r=va(n);return fo(r,Ce(t,0,r.length))}function Ou(n,t,e,u){if(!Rf(n))return n;for(var i=-1,o=(t=Ku(t,n)).length,f=o-1,a=n;null!=a&&++i<o;){var c=co(t[i]),l=e;if(i!=f){var s=a[c];(l=u?u(s,c,a):r)===r&&(l=Rf(s)?s:Zi(t[i+1])?[]:{})}Re(a,c,l),a=a[c]}return n}var Iu=ee?function(n,t){return ee.set(n,t),n}:Sa,Ru=Cr?function(n,t){return Cr(n,"toString",{configurable:!0,enumerable:!1,value:Ra(t),writable:!0})}:Sa;function Eu(n){return fo(va(n))}function zu(n,t,r){var e=-1,u=n.length;t<0&&(t=-t>u?0:u+t),(r=r>u?u:r)<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var i=Yn(u);++e<u;)i[e]=n[e+t];return i}function Su(n,t){var r;return De(n,function(n,e,u){return!(r=t(n,e,u))}),!!r}function Lu(n,t,r){var e=0,u=null==n?e:n.length;if("number"==typeof t&&t==t&&u<=U){for(;e<u;){var i=e+u>>>1,o=n[i];null!==o&&!Uf(o)&&(r?o<=t:o<t)?e=i+1:u=i}return u}return Wu(n,t,Sa,r)}function Wu(n,t,e,u){t=e(t);for(var i=0,o=null==n?0:n.length,f=t!=t,a=null===t,c=Uf(t),l=t===r;i<o;){var s=Dr((i+o)/2),h=e(n[s]),p=h!==r,v=null===h,_=h==h,g=Uf(h);if(f)var y=u||_;else y=l?_&&(u||p):a?_&&p&&(u||!v):c?_&&p&&!v&&(u||!g):!v&&!g&&(u?h<=t:h<t);y?i=s+1:o=s}return Kr(o,B)}function Cu(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r],f=t?t(o):o;if(!r||!vf(f,a)){var a=f;i[u++]=0===o?0:o}}return i}function Bu(n){return"number"==typeof n?n:Uf(n)?W:+n}function Uu(n){if("string"==typeof n)return n;if(df(n))return Yt(n,Uu)+"";if(Uf(n))return he?he.call(n):"";var t=n+"";return"0"==t&&1/n==-z?"-0":t}function Tu(n,t,r){var u=-1,i=Ht,o=n.length,f=!0,a=[],c=a;if(r)f=!1,i=Jt;else if(o>=e){var l=t?null:xi(n);if(l)return Or(l);f=!1,i=gr,c=new me}else c=t?[]:a;n:for(;++u<o;){var s=n[u],h=t?t(s):s;if(s=r||0!==s?s:0,f&&h==h){for(var p=c.length;p--;)if(c[p]===h)continue n;t&&c.push(h),a.push(s)}else i(c,h,r)||(c!==a&&c.push(h),a.push(s))}return a}function $u(n,t){return null==(n=no(n,t=Ku(t,n)))||delete n[co(jo(t))]}function Du(n,t,r,e){return Ou(n,t,r(Je(n,t)),e)}function Mu(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?zu(n,e?0:i,e?i+1:u):zu(n,e?i+1:0,e?u:i)}function Fu(n,t){var r=n;return r instanceof ye&&(r=r.value()),Xt(t,function(n,t){return t.func.apply(t.thisArg,Qt([n],t.args))},r)}function Nu(n,t,r){var e=n.length;if(e<2)return e?Tu(n[0]):[];for(var u=-1,i=Yn(e);++u<e;)for(var o=n[u],f=-1;++f<e;)f!=u&&(i[u]=$e(i[u]||o,n[f],t,r));return Tu(qe(i,1),t,r)}function Pu(n,t,e){for(var u=-1,i=n.length,o=t.length,f={};++u<i;){var a=u<o?t[u]:r;e(f,n[u],a)}return f}function qu(n){return mf(n)?n:[]}function Zu(n){return"function"==typeof n?n:Sa}function Ku(n,t){return df(n)?n:Vi(n,t)?[n]:ao(Kf(n))}var Vu=ju;function Gu(n,t,e){var u=n.length;return e=e===r?u:e,!t&&e>=u?n:zu(n,t,e)}var Hu=Br||function(n){return St.clearTimeout(n)};function Ju(n,t){if(t)return n.slice();var r=n.length,e=Lt?Lt(r):new n.constructor(r);return n.copy(e),e}function Yu(n){var t=new n.constructor(n.byteLength);return new zt(t).set(new zt(n)),t}function Qu(n,t){var r=t?Yu(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.length)}function Xu(n,t){if(n!==t){var e=n!==r,u=null===n,i=n==n,o=Uf(n),f=t!==r,a=null===t,c=t==t,l=Uf(t);if(!a&&!l&&!o&&n>t||o&&f&&c&&!a&&!l||u&&f&&c||!e&&c||!i)return 1;if(!u&&!o&&!l&&n<t||l&&e&&i&&!u&&!o||a&&e&&i||!f&&i||!c)return-1}return 0}function ni(n,t,r,e){for(var u=-1,i=n.length,o=r.length,f=-1,a=t.length,c=Zr(i-o,0),l=Yn(a+c),s=!e;++f<a;)l[f]=t[f];for(;++u<o;)(s||u<i)&&(l[r[u]]=n[u]);for(;c--;)l[f++]=n[u++];return l}function ti(n,t,r,e){for(var u=-1,i=n.length,o=-1,f=r.length,a=-1,c=t.length,l=Zr(i-f,0),s=Yn(l+c),h=!e;++u<l;)s[u]=n[u];for(var p=u;++a<c;)s[p+a]=t[a];for(;++o<f;)(h||u<i)&&(s[p+r[o]]=n[u++]);return s}function ri(n,t){var r=-1,e=n.length;for(t||(t=Yn(e));++r<e;)t[r]=n[r];return t}function ei(n,t,e,u){var i=!e;e||(e={});for(var o=-1,f=t.length;++o<f;){var a=t[o],c=u?u(e[a],n[a],a,e,n):r;c===r&&(c=n[a]),i?Le(e,a,c):Re(e,a,c)}return e}function ui(n,t){return function(r,e){var u=df(r)?qt:ze,i=t?t():{};return u(r,n,Bi(e,2),i)}}function ii(n){return ju(function(t,e){var u=-1,i=e.length,o=i>1?e[i-1]:r,f=i>2?e[2]:r;for(o=n.length>3&&"function"==typeof o?(i--,o):r,f&&Ki(e[0],e[1],f)&&(o=i<3?r:o,i=1),t=rt(t);++u<i;){var a=e[u];a&&n(t,a,u,o)}return t})}function oi(n,t){return function(r,e){if(null==r)return r;if(!wf(r))return n(r,e);for(var u=r.length,i=t?u:-1,o=rt(r);(t?i--:++i<u)&&!1!==e(o[i],i,o););return r}}function fi(n){return function(t,r,e){for(var u=-1,i=rt(t),o=e(t),f=o.length;f--;){var a=o[n?f:++u];if(!1===r(i[a],a,i))break}return t}}function ai(n){return function(t){var e=xr(t=Kf(t))?Er(t):r,u=e?e[0]:t.charAt(0),i=e?Gu(e,1).join(""):t.slice(1);return u[n]()+i}}function ci(n){return function(t){return Xt(ka(ya(t).replace(gt,"")),n,"")}}function li(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=ve(n.prototype),e=n.apply(r,t);return Rf(e)?e:r}}function si(n){return function(t,e,u){var i=rt(t);if(!wf(t)){var o=Bi(e,3);t=ia(t),e=function(n){return o(i[n],n,i)}}var f=n(t,e,u);return f>-1?i[o?t[f]:f]:r}}function hi(n){return Ei(function(t){var e=t.length,u=e,o=ge.prototype.thru;for(n&&t.reverse();u--;){var f=t[u];if("function"!=typeof f)throw new it(i);if(o&&!a&&"wrapper"==Wi(f))var a=new ge([],!0)}for(u=a?u:e;++u<e;){var c=Wi(f=t[u]),l="wrapper"==c?Li(f):r;a=l&&Gi(l[0])&&l[1]==(m|y|b|x)&&!l[4].length&&1==l[9]?a[Wi(l[0])].apply(a,l[3]):1==f.length&&Gi(f)?a[c]():a.thru(f)}return function(){var n=arguments,r=n[0];if(a&&1==n.length&&df(r))return a.plant(r).value();for(var u=0,i=e?t[u].apply(this,n):r;++u<e;)i=t[u].call(this,i);return i}})}function pi(n,t,e,u,i,o,f,a,c,l){var s=t&m,h=t&v,p=t&_,g=t&(y|d),b=t&j,w=p?r:li(n);return function v(){for(var _=arguments.length,y=Yn(_),d=_;d--;)y[d]=arguments[d];if(g)var m=Ci(v),x=function(n,t){for(var r=n.length,e=0;r--;)n[r]===t&&++e;return e}(y,m);if(u&&(y=ni(y,u,i,g)),o&&(y=ti(y,o,f,g)),_-=x,g&&_<l){var j=kr(y,m);return wi(n,t,pi,v.placeholder,e,y,j,a,c,l-_)}var A=h?e:this,k=p?A[n]:n;return _=y.length,a?y=function(n,t){for(var e=n.length,u=Kr(t.length,e),i=ri(n);u--;){var o=t[u];n[u]=Zi(o,e)?i[o]:r}return n}(y,a):b&&_>1&&y.reverse(),s&&c<_&&(y.length=c),this&&this!==St&&this instanceof v&&(k=w||li(k)),k.apply(A,y)}}function vi(n,t){return function(r,e){return function(n,t,r,e){return Ve(n,function(n,u,i){t(e,r(n),u,i)}),e}(r,n,t(e),{})}}function _i(n,t){return function(e,u){var i;if(e===r&&u===r)return t;if(e!==r&&(i=e),u!==r){if(i===r)return u;"string"==typeof e||"string"==typeof u?(e=Uu(e),u=Uu(u)):(e=Bu(e),u=Bu(u)),i=n(e,u)}return i}}function gi(n){return Ei(function(t){return t=Yt(t,vr(Bi())),ju(function(r){var e=this;return n(t,function(n){return Pt(n,e,r)})})})}function yi(n,t){var e=(t=t===r?" ":Uu(t)).length;if(e<2)return e?xu(t,n):t;var u=xu(t,$r(n/Rr(t)));return xr(t)?Gu(Er(u),0,n).join(""):u.slice(0,n)}function di(n){return function(t,e,u){return u&&"number"!=typeof u&&Ki(t,e,u)&&(e=u=r),t=Ff(t),e===r?(e=t,t=0):e=Ff(e),function(n,t,r,e){for(var u=-1,i=Zr($r((t-n)/(r||1)),0),o=Yn(i);i--;)o[e?i:++u]=n,n+=r;return o}(t,e,u=u===r?t<e?1:-1:Ff(u),n)}}function bi(n){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=qf(t),r=qf(r)),n(t,r)}}function wi(n,t,e,u,i,o,f,a,c,l){var s=t&y;t|=s?b:w,(t&=~(s?w:b))&g||(t&=~(v|_));var h=[n,t,i,s?o:r,s?f:r,s?r:o,s?r:f,a,c,l],p=e.apply(r,h);return Gi(n)&&ro(p,h),p.placeholder=u,io(p,n,t)}function mi(n){var t=tt[n];return function(n,r){if(n=qf(n),(r=null==r?0:Kr(Nf(r),292))&&Nr(n)){var e=(Kf(n)+"e").split("e");return+((e=(Kf(t(e[0]+"e"+(+e[1]+r)))+"e").split("e"))[0]+"e"+(+e[1]-r))}return t(n)}}var xi=ne&&1/Or(new ne([,-0]))[1]==z?function(n){return new ne(n)}:Ua;function ji(n){return function(t){var r=Fi(t);return r==V?jr(t):r==X?Ir(t):function(n,t){return Yt(t,function(t){return[t,n[t]]})}(t,n(t))}}function Ai(n,t,e,u,o,f,c,l){var s=t&_;if(!s&&"function"!=typeof n)throw new it(i);var h=u?u.length:0;if(h||(t&=~(b|w),u=o=r),c=c===r?c:Zr(Nf(c),0),l=l===r?l:Nf(l),h-=o?o.length:0,t&w){var p=u,j=o;u=o=r}var A=s?r:Li(n),k=[n,t,e,u,o,p,j,f,c,l];if(A&&function(n,t){var r=n[1],e=t[1],u=r|e,i=u<(v|_|m),o=e==m&&r==y||e==m&&r==x&&n[7].length<=t[8]||e==(m|x)&&t[7].length<=t[8]&&r==y;if(!i&&!o)return n;e&v&&(n[2]=t[2],u|=r&v?0:g);var f=t[3];if(f){var c=n[3];n[3]=c?ni(c,f,t[4]):f,n[4]=c?kr(n[3],a):t[4]}(f=t[5])&&(c=n[5],n[5]=c?ti(c,f,t[6]):f,n[6]=c?kr(n[5],a):t[6]),(f=t[7])&&(n[7]=f),e&m&&(n[8]=null==n[8]?t[8]:Kr(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u}(k,A),n=k[0],t=k[1],e=k[2],u=k[3],o=k[4],!(l=k[9]=k[9]===r?s?0:n.length:Zr(k[9]-h,0))&&t&(y|d)&&(t&=~(y|d)),t&&t!=v)O=t==y||t==d?function(n,t,e){var u=li(n);return function i(){for(var o=arguments.length,f=Yn(o),a=o,c=Ci(i);a--;)f[a]=arguments[a];var l=o<3&&f[0]!==c&&f[o-1]!==c?[]:kr(f,c);return(o-=l.length)<e?wi(n,t,pi,i.placeholder,r,f,l,r,r,e-o):Pt(this&&this!==St&&this instanceof i?u:n,this,f)}}(n,t,l):t!=b&&t!=(v|b)||o.length?pi.apply(r,k):function(n,t,r,e){var u=t&v,i=li(n);return function t(){for(var o=-1,f=arguments.length,a=-1,c=e.length,l=Yn(c+f),s=this&&this!==St&&this instanceof t?i:n;++a<c;)l[a]=e[a];for(;f--;)l[a++]=arguments[++o];return Pt(s,u?r:this,l)}}(n,t,e,u);else var O=function(n,t,r){var e=t&v,u=li(n);return function t(){return(this&&this!==St&&this instanceof t?u:n).apply(e?r:this,arguments)}}(n,t,e);return io((A?Iu:ro)(O,k),n,t)}function ki(n,t,e,u){return n===r||vf(n,at[e])&&!st.call(u,e)?t:n}function Oi(n,t,e,u,i,o){return Rf(n)&&Rf(t)&&(o.set(t,n),_u(n,t,r,Oi,o),o.delete(t)),n}function Ii(n){return Lf(n)?r:n}function Ri(n,t,e,u,i,o){var f=e&h,a=n.length,c=t.length;if(a!=c&&!(f&&c>a))return!1;var l=o.get(n);if(l&&o.get(t))return l==t;var s=-1,v=!0,_=e&p?new me:r;for(o.set(n,t),o.set(t,n);++s<a;){var g=n[s],y=t[s];if(u)var d=f?u(y,g,s,t,n,o):u(g,y,s,n,t,o);if(d!==r){if(d)continue;v=!1;break}if(_){if(!tr(t,function(n,t){if(!gr(_,t)&&(g===n||i(g,n,e,u,o)))return _.push(t)})){v=!1;break}}else if(g!==y&&!i(g,y,e,u,o)){v=!1;break}}return o.delete(n),o.delete(t),v}function Ei(n){return uo(Xi(n,r,yo),n+"")}function zi(n){return Ye(n,ia,Di)}function Si(n){return Ye(n,oa,Mi)}var Li=ee?function(n){return ee.get(n)}:Ua;function Wi(n){for(var t=n.name+"",r=ue[t],e=st.call(ue,t)?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function Ci(n){return(st.call(pe,"placeholder")?pe:n).placeholder}function Bi(){var n=pe.iteratee||La;return n=n===La?au:n,arguments.length?n(arguments[0],arguments[1]):n}function Ui(n,t){var r,e,u=n.__data__;return("string"==(e=typeof(r=t))||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==r:null===r)?u["string"==typeof t?"string":"hash"]:u.map}function Ti(n){for(var t=ia(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,Yi(u)]}return t}function $i(n,t){var e=function(n,t){return null==n?r:n[t]}(n,t);return fu(e)?e:r}var Di=Mr?function(n){return null==n?[]:(n=rt(n),Gt(Mr(n),function(t){return Ut.call(n,t)}))}:Pa,Mi=Mr?function(n){for(var t=[];n;)Qt(t,Di(n)),n=Wt(n);return t}:Pa,Fi=Qe;function Ni(n,t,r){for(var e=-1,u=(t=Ku(t,n)).length,i=!1;++e<u;){var o=co(t[e]);if(!(i=null!=n&&r(n,o)))break;n=n[o]}return i||++e!=u?i:!!(u=null==n?0:n.length)&&If(u)&&Zi(o,u)&&(df(n)||yf(n))}function Pi(n){return"function"!=typeof n.constructor||Ji(n)?{}:ve(Wt(n))}function qi(n){return df(n)||yf(n)||!!(lr&&n&&n[lr])}function Zi(n,t){var r=typeof n;return!!(t=null==t?S:t)&&("number"==r||"symbol"!=r&&Kn.test(n))&&n>-1&&n%1==0&&n<t}function Ki(n,t,r){if(!Rf(r))return!1;var e=typeof t;return!!("number"==e?wf(r)&&Zi(t,r.length):"string"==e&&t in r)&&vf(r[t],n)}function Vi(n,t){if(df(n))return!1;var r=typeof n;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=n&&!Uf(n))||Rn.test(n)||!In.test(n)||null!=t&&n in rt(t)}function Gi(n){var t=Wi(n),r=pe[t];if("function"!=typeof r||!(t in ye.prototype))return!1;if(n===r)return!0;var e=Li(r);return!!e&&n===e[0]}(Yr&&Fi(new Yr(new ArrayBuffer(1)))!=fn||Qr&&Fi(new Qr)!=V||Xr&&"[object Promise]"!=Fi(Xr.resolve())||ne&&Fi(new ne)!=X||te&&Fi(new te)!=en)&&(Fi=function(n){var t=Qe(n),e=t==J?n.constructor:r,u=e?lo(e):"";if(u)switch(u){case ie:return fn;case oe:return V;case fe:return"[object Promise]";case ae:return X;case ce:return en}return t});var Hi=ct?kf:qa;function Ji(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||at)}function Yi(n){return n==n&&!Rf(n)}function Qi(n,t){return function(e){return null!=e&&e[n]===t&&(t!==r||n in rt(e))}}function Xi(n,t,e){return t=Zr(t===r?n.length-1:t,0),function(){for(var r=arguments,u=-1,i=Zr(r.length-t,0),o=Yn(i);++u<i;)o[u]=r[t+u];u=-1;for(var f=Yn(t+1);++u<t;)f[u]=r[u];return f[t]=e(o),Pt(n,this,f)}}function no(n,t){return t.length<2?n:Je(n,zu(t,0,-1))}function to(n,t){if(("constructor"!==t||"function"!=typeof n[t])&&"__proto__"!=t)return n[t]}var ro=oo(Iu),eo=Tr||function(n,t){return St.setTimeout(n,t)},uo=oo(Ru);function io(n,t,r){var e=t+"";return uo(n,function(n,t){var r=t.length;if(!r)return n;var e=r-1;return t[e]=(r>1?"& ":"")+t[e],t=t.join(r>2?", ":" "),n.replace(Bn,"{\n/* [wrapped with "+t+"] */\n")}(e,function(n,t){return Zt(T,function(r){var e="_."+r[0];t&r[1]&&!Ht(n,e)&&n.push(e)}),n.sort()}(function(n){var t=n.match(Un);return t?t[1].split(Tn):[]}(e),r)))}function oo(n){var t=0,e=0;return function(){var u=Vr(),i=I-(u-e);if(e=u,i>0){if(++t>=O)return arguments[0]}else t=0;return n.apply(r,arguments)}}function fo(n,t){var e=-1,u=n.length,i=u-1;for(t=t===r?u:t;++e<t;){var o=mu(e,i),f=n[o];n[o]=n[e],n[e]=f}return n.length=t,n}var ao=function(n){var t=af(n,function(n){return r.size===f&&r.clear(),n}),r=t.cache;return t}(function(n){var t=[];return 46===n.charCodeAt(0)&&t.push(""),n.replace(En,function(n,r,e,u){t.push(e?u.replace(Dn,"$1"):r||n)}),t});function co(n){if("string"==typeof n||Uf(n))return n;var t=n+"";return"0"==t&&1/n==-z?"-0":t}function lo(n){if(null!=n){try{return lt.call(n)}catch(t){}try{return n+""}catch(t){}}return""}function so(n){if(n instanceof ye)return n.clone();var t=new ge(n.__wrapped__,n.__chain__);return t.__actions__=ri(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}var ho=ju(function(n,t){return mf(n)?$e(n,qe(t,1,mf,!0)):[]}),po=ju(function(n,t){var e=jo(t);return mf(e)&&(e=r),mf(n)?$e(n,qe(t,1,mf,!0),Bi(e,2)):[]}),vo=ju(function(n,t){var e=jo(t);return mf(e)&&(e=r),mf(n)?$e(n,qe(t,1,mf,!0),r,e):[]});function _o(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:Nf(r);return u<0&&(u=Zr(e+u,0)),ur(n,Bi(t,3),u)}function go(n,t,e){var u=null==n?0:n.length;if(!u)return-1;var i=u-1;return e!==r&&(i=Nf(e),i=e<0?Zr(u+i,0):Kr(i,u-1)),ur(n,Bi(t,3),i,!0)}function yo(n){return null!=n&&n.length?qe(n,1):[]}function bo(n){return n&&n.length?n[0]:r}var wo=ju(function(n){var t=Yt(n,qu);return t.length&&t[0]===n[0]?ru(t):[]}),mo=ju(function(n){var t=jo(n),e=Yt(n,qu);return t===jo(e)?t=r:e.pop(),e.length&&e[0]===n[0]?ru(e,Bi(t,2)):[]}),xo=ju(function(n){var t=jo(n),e=Yt(n,qu);return(t="function"==typeof t?t:r)&&e.pop(),e.length&&e[0]===n[0]?ru(e,r,t):[]});function jo(n){var t=null==n?0:n.length;return t?n[t-1]:r}var Ao=ju(ko);function ko(n,t){return n&&n.length&&t&&t.length?bu(n,t):n}var Oo=Ei(function(n,t){var r=null==n?0:n.length,e=We(n,t);return wu(n,Yt(t,function(n){return Zi(n,r)?+n:n}).sort(Xu)),e});function Io(n){return null==n?n:Jr.call(n)}var Ro=ju(function(n){return Tu(qe(n,1,mf,!0))}),Eo=ju(function(n){var t=jo(n);return mf(t)&&(t=r),Tu(qe(n,1,mf,!0),Bi(t,2))}),zo=ju(function(n){var t=jo(n);return t="function"==typeof t?t:r,Tu(qe(n,1,mf,!0),r,t)});function So(n){if(!n||!n.length)return[];var t=0;return n=Gt(n,function(n){if(mf(n))return t=Zr(n.length,t),!0}),pr(t,function(t){return Yt(n,cr(t))})}function Lo(n,t){if(!n||!n.length)return[];var e=So(n);return null==t?e:Yt(e,function(n){return Pt(t,r,n)})}var Wo=ju(function(n,t){return mf(n)?$e(n,t):[]}),Co=ju(function(n){return Nu(Gt(n,mf))}),Bo=ju(function(n){var t=jo(n);return mf(t)&&(t=r),Nu(Gt(n,mf),Bi(t,2))}),Uo=ju(function(n){var t=jo(n);return t="function"==typeof t?t:r,Nu(Gt(n,mf),r,t)}),To=ju(So);var $o=ju(function(n){var t=n.length,e=t>1?n[t-1]:r;return e="function"==typeof e?(n.pop(),e):r,Lo(n,e)});function Do(n){var t=pe(n);return t.__chain__=!0,t}function Mo(n,t){return t(n)}var Fo=Ei(function(n){var t=n.length,e=t?n[0]:0,u=this.__wrapped__,i=function(t){return We(t,n)};return!(t>1||this.__actions__.length)&&u instanceof ye&&Zi(e)?((u=u.slice(e,+e+(t?1:0))).__actions__.push({func:Mo,args:[i],thisArg:r}),new ge(u,this.__chain__).thru(function(n){return t&&!n.length&&n.push(r),n})):this.thru(i)});var No=ui(function(n,t,r){st.call(n,r)?++n[r]:Le(n,r,1)});var Po=si(_o),qo=si(go);function Zo(n,t){return(df(n)?Zt:De)(n,Bi(t,3))}function Ko(n,t){return(df(n)?Kt:Me)(n,Bi(t,3))}var Vo=ui(function(n,t,r){st.call(n,r)?n[r].push(t):Le(n,r,[t])});var Go=ju(function(n,t,r){var e=-1,u="function"==typeof t,i=wf(n)?Yn(n.length):[];return De(n,function(n){i[++e]=u?Pt(t,n,r):eu(n,t,r)}),i}),Ho=ui(function(n,t,r){Le(n,r,t)});function Jo(n,t){return(df(n)?Yt:hu)(n,Bi(t,3))}var Yo=ui(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]});var Qo=ju(function(n,t){if(null==n)return[];var r=t.length;return r>1&&Ki(n,t[0],t[1])?t=[]:r>2&&Ki(t[0],t[1],t[2])&&(t=[t[0]]),yu(n,qe(t,1),[])}),Xo=Ur||function(){return St.Date.now()};function nf(n,t,e){return t=e?r:t,t=n&&null==t?n.length:t,Ai(n,m,r,r,r,r,t)}function tf(n,t){var e;if("function"!=typeof t)throw new it(i);return n=Nf(n),function(){return--n>0&&(e=t.apply(this,arguments)),n<=1&&(t=r),e}}var rf=ju(function(n,t,r){var e=v;if(r.length){var u=kr(r,Ci(rf));e|=b}return Ai(n,e,t,r,u)}),ef=ju(function(n,t,r){var e=v|_;if(r.length){var u=kr(r,Ci(ef));e|=b}return Ai(t,e,n,r,u)});function uf(n,t,e){var u,o,f,a,c,l,s=0,h=!1,p=!1,v=!0;if("function"!=typeof n)throw new it(i);function _(t){var e=u,i=o;return u=o=r,s=t,a=n.apply(i,e)}function g(n){var e=n-l;return l===r||e>=t||e<0||p&&n-s>=f}function y(){var n=Xo();if(g(n))return d(n);c=eo(y,function(n){var r=t-(n-l);return p?Kr(r,f-(n-s)):r}(n))}function d(n){return c=r,v&&u?_(n):(u=o=r,a)}function b(){var n=Xo(),e=g(n);if(u=arguments,o=this,l=n,e){if(c===r)return function(n){return s=n,c=eo(y,t),h?_(n):a}(l);if(p)return Hu(c),c=eo(y,t),_(l)}return c===r&&(c=eo(y,t)),a}return t=qf(t)||0,Rf(e)&&(h=!!e.leading,f=(p="maxWait"in e)?Zr(qf(e.maxWait)||0,t):f,v="trailing"in e?!!e.trailing:v),b.cancel=function(){c!==r&&Hu(c),s=0,u=l=o=c=r},b.flush=function(){return c===r?a:d(Xo())},b}var of=ju(function(n,t){return Te(n,1,t)}),ff=ju(function(n,t,r){return Te(n,qf(t)||0,r)});function af(n,t){if("function"!=typeof n||null!=t&&"function"!=typeof t)throw new it(i);var r=function(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;if(i.has(u))return i.get(u);var o=n.apply(this,e);return r.cache=i.set(u,o)||i,o};return r.cache=new(af.Cache||we),r}function cf(n){if("function"!=typeof n)throw new it(i);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}af.Cache=we;var lf=Vu(function(n,t){var r=(t=1==t.length&&df(t[0])?Yt(t[0],vr(Bi())):Yt(qe(t,1),vr(Bi()))).length;return ju(function(e){for(var u=-1,i=Kr(e.length,r);++u<i;)e[u]=t[u].call(this,e[u]);return Pt(n,this,e)})}),sf=ju(function(n,t){var e=kr(t,Ci(sf));return Ai(n,b,r,t,e)}),hf=ju(function(n,t){var e=kr(t,Ci(hf));return Ai(n,w,r,t,e)}),pf=Ei(function(n,t){return Ai(n,x,r,r,r,t)});function vf(n,t){return n===t||n!=n&&t!=t}var _f=bi(Xe),gf=bi(function(n,t){return n>=t}),yf=uu(function(){return arguments}())?uu:function(n){return Ef(n)&&st.call(n,"callee")&&!Ut.call(n,"callee")},df=Yn.isArray,bf=Tt?vr(Tt):function(n){return Ef(n)&&Qe(n)==on};function wf(n){return null!=n&&If(n.length)&&!kf(n)}function mf(n){return Ef(n)&&wf(n)}var xf=Fr||qa,jf=$t?vr($t):function(n){return Ef(n)&&Qe(n)==N};function Af(n){if(!Ef(n))return!1;var t=Qe(n);return t==q||t==P||"string"==typeof n.message&&"string"==typeof n.name&&!Lf(n)}function kf(n){if(!Rf(n))return!1;var t=Qe(n);return t==Z||t==K||t==M||t==Y}function Of(n){return"number"==typeof n&&n==Nf(n)}function If(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=S}function Rf(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function Ef(n){return null!=n&&"object"==typeof n}var zf=Dt?vr(Dt):function(n){return Ef(n)&&Fi(n)==V};function Sf(n){return"number"==typeof n||Ef(n)&&Qe(n)==G}function Lf(n){if(!Ef(n)||Qe(n)!=J)return!1;var t=Wt(n);if(null===t)return!0;var r=st.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&lt.call(r)==_t}var Wf=Mt?vr(Mt):function(n){return Ef(n)&&Qe(n)==Q};var Cf=Ft?vr(Ft):function(n){return Ef(n)&&Fi(n)==X};function Bf(n){return"string"==typeof n||!df(n)&&Ef(n)&&Qe(n)==nn}function Uf(n){return"symbol"==typeof n||Ef(n)&&Qe(n)==tn}var Tf=Nt?vr(Nt):function(n){return Ef(n)&&If(n.length)&&!!At[Qe(n)]};var $f=bi(su),Df=bi(function(n,t){return n<=t});function Mf(n){if(!n)return[];if(wf(n))return Bf(n)?Er(n):ri(n);if(Lr&&n[Lr])return function(n){for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}(n[Lr]());var t=Fi(n);return(t==V?jr:t==X?Or:va)(n)}function Ff(n){return n?(n=qf(n))===z||n===-z?(n<0?-1:1)*L:n==n?n:0:0===n?n:0}function Nf(n){var t=Ff(n),r=t%1;return t==t?r?t-r:t:0}function Pf(n){return n?Ce(Nf(n),0,C):0}function qf(n){if("number"==typeof n)return n;if(Uf(n))return W;if(Rf(n)){var t="function"==typeof n.valueOf?n.valueOf():n;n=Rf(t)?t+"":t}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(Ln,"");var r=Pn.test(n);return r||Zn.test(n)?Rt(n.slice(2),r?2:8):Nn.test(n)?W:+n}function Zf(n){return ei(n,oa(n))}function Kf(n){return null==n?"":Uu(n)}var Vf=ii(function(n,t){if(Ji(t)||wf(t))ei(t,ia(t),n);else for(var r in t)st.call(t,r)&&Re(n,r,t[r])}),Gf=ii(function(n,t){ei(t,oa(t),n)}),Hf=ii(function(n,t,r,e){ei(t,oa(t),n,e)}),Jf=ii(function(n,t,r,e){ei(t,ia(t),n,e)}),Yf=Ei(We);var Qf=ju(function(n,t){n=rt(n);var e=-1,u=t.length,i=u>2?t[2]:r;for(i&&Ki(t[0],t[1],i)&&(u=1);++e<u;)for(var o=t[e],f=oa(o),a=-1,c=f.length;++a<c;){var l=f[a],s=n[l];(s===r||vf(s,at[l])&&!st.call(n,l))&&(n[l]=o[l])}return n}),Xf=ju(function(n){return n.push(r,Oi),Pt(aa,r,n)});function na(n,t,e){var u=null==n?r:Je(n,t);return u===r?e:u}function ta(n,t){return null!=n&&Ni(n,t,tu)}var ra=vi(function(n,t,r){null!=t&&"function"!=typeof t.toString&&(t=vt.call(t)),n[t]=r},Ra(Sa)),ea=vi(function(n,t,r){null!=t&&"function"!=typeof t.toString&&(t=vt.call(t)),st.call(n,t)?n[t].push(r):n[t]=[r]},Bi),ua=ju(eu);function ia(n){return wf(n)?je(n):cu(n)}function oa(n){return wf(n)?je(n,!0):lu(n)}var fa=ii(function(n,t,r){_u(n,t,r)}),aa=ii(function(n,t,r,e){_u(n,t,r,e)}),ca=Ei(function(n,t){var r={};if(null==n)return r;var e=!1;t=Yt(t,function(t){return t=Ku(t,n),e||(e=t.length>1),t}),ei(n,Si(n),r),e&&(r=Be(r,c|l|s,Ii));for(var u=t.length;u--;)$u(r,t[u]);return r});var la=Ei(function(n,t){return null==n?{}:function(n,t){return du(n,t,function(t,r){return ta(n,r)})}(n,t)});function sa(n,t){if(null==n)return{};var r=Yt(Si(n),function(n){return[n]});return t=Bi(t),du(n,r,function(n,r){return t(n,r[0])})}var ha=ji(ia),pa=ji(oa);function va(n){return null==n?[]:_r(n,ia(n))}var _a=ci(function(n,t,r){return t=t.toLowerCase(),n+(r?ga(t):t)});function ga(n){return Aa(Kf(n).toLowerCase())}function ya(n){return(n=Kf(n))&&n.replace(Vn,br).replace(yt,"")}var da=ci(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),ba=ci(function(n,t,r){return n+(r?" ":"")+t.toLowerCase()}),wa=ai("toLowerCase");var ma=ci(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()});var xa=ci(function(n,t,r){return n+(r?" ":"")+Aa(t)});var ja=ci(function(n,t,r){return n+(r?" ":"")+t.toUpperCase()}),Aa=ai("toUpperCase");function ka(n,t,e){return n=Kf(n),(t=e?r:t)===r?function(n){return mt.test(n)}(n)?function(n){return n.match(bt)||[]}(n):function(n){return n.match($n)||[]}(n):n.match(t)||[]}var Oa=ju(function(n,t){try{return Pt(n,r,t)}catch(e){return Af(e)?e:new Xn(e)}}),Ia=Ei(function(n,t){return Zt(t,function(t){t=co(t),Le(n,t,rf(n[t],n))}),n});function Ra(n){return function(){return n}}var Ea=hi(),za=hi(!0);function Sa(n){return n}function La(n){return au("function"==typeof n?n:Be(n,c))}var Wa=ju(function(n,t){return function(r){return eu(r,n,t)}}),Ca=ju(function(n,t){return function(r){return eu(n,r,t)}});function Ba(n,t,r){var e=ia(t),u=He(t,e);null!=r||Rf(t)&&(u.length||!e.length)||(r=t,t=n,n=this,u=He(t,ia(t)));var i=!(Rf(r)&&"chain"in r&&!r.chain),o=kf(n);return Zt(u,function(r){var e=t[r];n[r]=e,o&&(n.prototype[r]=function(){var t=this.__chain__;if(i||t){var r=n(this.__wrapped__);return(r.__actions__=ri(this.__actions__)).push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,Qt([this.value()],arguments))})}),n}function Ua(){}var Ta=gi(Yt),$a=gi(Vt),Da=gi(tr);function Ma(n){return Vi(n)?cr(co(n)):function(n){return function(t){return Je(t,n)}}(n)}var Fa=di(),Na=di(!0);function Pa(){return[]}function qa(){return!1}var Za=_i(function(n,t){return n+t},0),Ka=mi("ceil"),Va=_i(function(n,t){return n/t},1),Ga=mi("floor");var Ha,Ja=_i(function(n,t){return n*t},1),Ya=mi("round"),Qa=_i(function(n,t){return n-t},0);return pe.after=function(n,t){if("function"!=typeof t)throw new it(i);return n=Nf(n),function(){if(--n<1)return t.apply(this,arguments)}},pe.ary=nf,pe.assign=Vf,pe.assignIn=Gf,pe.assignInWith=Hf,pe.assignWith=Jf,pe.at=Yf,pe.before=tf,pe.bind=rf,pe.bindAll=Ia,pe.bindKey=ef,pe.castArray=function(){if(!arguments.length)return[];var n=arguments[0];return df(n)?n:[n]},pe.chain=Do,pe.chunk=function(n,t,e){t=(e?Ki(n,t,e):t===r)?1:Zr(Nf(t),0);var u=null==n?0:n.length;if(!u||t<1)return[];for(var i=0,o=0,f=Yn($r(u/t));i<u;)f[o++]=zu(n,i,i+=t);return f},pe.compact=function(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){var i=n[t];i&&(u[e++]=i)}return u},pe.concat=function(){var n=arguments.length;if(!n)return[];for(var t=Yn(n-1),r=arguments[0],e=n;e--;)t[e-1]=arguments[e];return Qt(df(r)?ri(r):[r],qe(t,1))},pe.cond=function(n){var t=null==n?0:n.length,r=Bi();return n=t?Yt(n,function(n){if("function"!=typeof n[1])throw new it(i);return[r(n[0]),n[1]]}):[],ju(function(r){for(var e=-1;++e<t;){var u=n[e];if(Pt(u[0],this,r))return Pt(u[1],this,r)}})},pe.conforms=function(n){return function(n){var t=ia(n);return function(r){return Ue(r,n,t)}}(Be(n,c))},pe.constant=Ra,pe.countBy=No,pe.create=function(n,t){var r=ve(n);return null==t?r:Se(r,t)},pe.curry=function n(t,e,u){var i=Ai(t,y,r,r,r,r,r,e=u?r:e);return i.placeholder=n.placeholder,i},pe.curryRight=function n(t,e,u){var i=Ai(t,d,r,r,r,r,r,e=u?r:e);return i.placeholder=n.placeholder,i},pe.debounce=uf,pe.defaults=Qf,pe.defaultsDeep=Xf,pe.defer=of,pe.delay=ff,pe.difference=ho,pe.differenceBy=po,pe.differenceWith=vo,pe.drop=function(n,t,e){var u=null==n?0:n.length;return u?zu(n,(t=e||t===r?1:Nf(t))<0?0:t,u):[]},pe.dropRight=function(n,t,e){var u=null==n?0:n.length;return u?zu(n,0,(t=u-(t=e||t===r?1:Nf(t)))<0?0:t):[]},pe.dropRightWhile=function(n,t){return n&&n.length?Mu(n,Bi(t,3),!0,!0):[]},pe.dropWhile=function(n,t){return n&&n.length?Mu(n,Bi(t,3),!0):[]},pe.fill=function(n,t,e,u){var i=null==n?0:n.length;return i?(e&&"number"!=typeof e&&Ki(n,t,e)&&(e=0,u=i),function(n,t,e,u){var i=n.length;for((e=Nf(e))<0&&(e=-e>i?0:i+e),(u=u===r||u>i?i:Nf(u))<0&&(u+=i),u=e>u?0:Pf(u);e<u;)n[e++]=t;return n}(n,t,e,u)):[]},pe.filter=function(n,t){return(df(n)?Gt:Pe)(n,Bi(t,3))},pe.flatMap=function(n,t){return qe(Jo(n,t),1)},pe.flatMapDeep=function(n,t){return qe(Jo(n,t),z)},pe.flatMapDepth=function(n,t,e){return e=e===r?1:Nf(e),qe(Jo(n,t),e)},pe.flatten=yo,pe.flattenDeep=function(n){return null!=n&&n.length?qe(n,z):[]},pe.flattenDepth=function(n,t){return null!=n&&n.length?qe(n,t=t===r?1:Nf(t)):[]},pe.flip=function(n){return Ai(n,j)},pe.flow=Ea,pe.flowRight=za,pe.fromPairs=function(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e},pe.functions=function(n){return null==n?[]:He(n,ia(n))},pe.functionsIn=function(n){return null==n?[]:He(n,oa(n))},pe.groupBy=Vo,pe.initial=function(n){return null!=n&&n.length?zu(n,0,-1):[]},pe.intersection=wo,pe.intersectionBy=mo,pe.intersectionWith=xo,pe.invert=ra,pe.invertBy=ea,pe.invokeMap=Go,pe.iteratee=La,pe.keyBy=Ho,pe.keys=ia,pe.keysIn=oa,pe.map=Jo,pe.mapKeys=function(n,t){var r={};return t=Bi(t,3),Ve(n,function(n,e,u){Le(r,t(n,e,u),n)}),r},pe.mapValues=function(n,t){var r={};return t=Bi(t,3),Ve(n,function(n,e,u){Le(r,e,t(n,e,u))}),r},pe.matches=function(n){return pu(Be(n,c))},pe.matchesProperty=function(n,t){return vu(n,Be(t,c))},pe.memoize=af,pe.merge=fa,pe.mergeWith=aa,pe.method=Wa,pe.methodOf=Ca,pe.mixin=Ba,pe.negate=cf,pe.nthArg=function(n){return n=Nf(n),ju(function(t){return gu(t,n)})},pe.omit=ca,pe.omitBy=function(n,t){return sa(n,cf(Bi(t)))},pe.once=function(n){return tf(2,n)},pe.orderBy=function(n,t,e,u){return null==n?[]:(df(t)||(t=null==t?[]:[t]),df(e=u?r:e)||(e=null==e?[]:[e]),yu(n,t,e))},pe.over=Ta,pe.overArgs=lf,pe.overEvery=$a,pe.overSome=Da,pe.partial=sf,pe.partialRight=hf,pe.partition=Yo,pe.pick=la,pe.pickBy=sa,pe.property=Ma,pe.propertyOf=function(n){return function(t){return null==n?r:Je(n,t)}},pe.pull=Ao,pe.pullAll=ko,pe.pullAllBy=function(n,t,r){return n&&n.length&&t&&t.length?bu(n,t,Bi(r,2)):n},pe.pullAllWith=function(n,t,e){return n&&n.length&&t&&t.length?bu(n,t,r,e):n},pe.pullAt=Oo,pe.range=Fa,pe.rangeRight=Na,pe.rearg=pf,pe.reject=function(n,t){return(df(n)?Gt:Pe)(n,cf(Bi(t,3)))},pe.remove=function(n,t){var r=[];if(!n||!n.length)return r;var e=-1,u=[],i=n.length;for(t=Bi(t,3);++e<i;){var o=n[e];t(o,e,n)&&(r.push(o),u.push(e))}return wu(n,u),r},pe.rest=function(n,t){if("function"!=typeof n)throw new it(i);return ju(n,t=t===r?t:Nf(t))},pe.reverse=Io,pe.sampleSize=function(n,t,e){return t=(e?Ki(n,t,e):t===r)?1:Nf(t),(df(n)?ke:ku)(n,t)},pe.set=function(n,t,r){return null==n?n:Ou(n,t,r)},pe.setWith=function(n,t,e,u){return u="function"==typeof u?u:r,null==n?n:Ou(n,t,e,u)},pe.shuffle=function(n){return(df(n)?Oe:Eu)(n)},pe.slice=function(n,t,e){var u=null==n?0:n.length;return u?(e&&"number"!=typeof e&&Ki(n,t,e)?(t=0,e=u):(t=null==t?0:Nf(t),e=e===r?u:Nf(e)),zu(n,t,e)):[]},pe.sortBy=Qo,pe.sortedUniq=function(n){return n&&n.length?Cu(n):[]},pe.sortedUniqBy=function(n,t){return n&&n.length?Cu(n,Bi(t,2)):[]},pe.split=function(n,t,e){return e&&"number"!=typeof e&&Ki(n,t,e)&&(t=e=r),(e=e===r?C:e>>>0)?(n=Kf(n))&&("string"==typeof t||null!=t&&!Wf(t))&&!(t=Uu(t))&&xr(n)?Gu(Er(n),0,e):n.split(t,e):[]},pe.spread=function(n,t){if("function"!=typeof n)throw new it(i);return t=null==t?0:Zr(Nf(t),0),ju(function(r){var e=r[t],u=Gu(r,0,t);return e&&Qt(u,e),Pt(n,this,u)})},pe.tail=function(n){var t=null==n?0:n.length;return t?zu(n,1,t):[]},pe.take=function(n,t,e){return n&&n.length?zu(n,0,(t=e||t===r?1:Nf(t))<0?0:t):[]},pe.takeRight=function(n,t,e){var u=null==n?0:n.length;return u?zu(n,(t=u-(t=e||t===r?1:Nf(t)))<0?0:t,u):[]},pe.takeRightWhile=function(n,t){return n&&n.length?Mu(n,Bi(t,3),!1,!0):[]},pe.takeWhile=function(n,t){return n&&n.length?Mu(n,Bi(t,3)):[]},pe.tap=function(n,t){return t(n),n},pe.throttle=function(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new it(i);return Rf(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),uf(n,t,{leading:e,maxWait:t,trailing:u})},pe.thru=Mo,pe.toArray=Mf,pe.toPairs=ha,pe.toPairsIn=pa,pe.toPath=function(n){return df(n)?Yt(n,co):Uf(n)?[n]:ri(ao(Kf(n)))},pe.toPlainObject=Zf,pe.transform=function(n,t,r){var e=df(n),u=e||xf(n)||Tf(n);if(t=Bi(t,4),null==r){var i=n&&n.constructor;r=u?e?new i:[]:Rf(n)&&kf(i)?ve(Wt(n)):{}}return(u?Zt:Ve)(n,function(n,e,u){return t(r,n,e,u)}),r},pe.unary=function(n){return nf(n,1)},pe.union=Ro,pe.unionBy=Eo,pe.unionWith=zo,pe.uniq=function(n){return n&&n.length?Tu(n):[]},pe.uniqBy=function(n,t){return n&&n.length?Tu(n,Bi(t,2)):[]},pe.uniqWith=function(n,t){return t="function"==typeof t?t:r,n&&n.length?Tu(n,r,t):[]},pe.unset=function(n,t){return null==n||$u(n,t)},pe.unzip=So,pe.unzipWith=Lo,pe.update=function(n,t,r){return null==n?n:Du(n,t,Zu(r))},pe.updateWith=function(n,t,e,u){return u="function"==typeof u?u:r,null==n?n:Du(n,t,Zu(e),u)},pe.values=va,pe.valuesIn=function(n){return null==n?[]:_r(n,oa(n))},pe.without=Wo,pe.words=ka,pe.wrap=function(n,t){return sf(Zu(t),n)},pe.xor=Co,pe.xorBy=Bo,pe.xorWith=Uo,pe.zip=To,pe.zipObject=function(n,t){return Pu(n||[],t||[],Re)},pe.zipObjectDeep=function(n,t){return Pu(n||[],t||[],Ou)},pe.zipWith=$o,pe.entries=ha,pe.entriesIn=pa,pe.extend=Gf,pe.extendWith=Hf,Ba(pe,pe),pe.add=Za,pe.attempt=Oa,pe.camelCase=_a,pe.capitalize=ga,pe.ceil=Ka,pe.clamp=function(n,t,e){return e===r&&(e=t,t=r),e!==r&&(e=(e=qf(e))==e?e:0),t!==r&&(t=(t=qf(t))==t?t:0),Ce(qf(n),t,e)},pe.clone=function(n){return Be(n,s)},pe.cloneDeep=function(n){return Be(n,c|s)},pe.cloneDeepWith=function(n,t){return Be(n,c|s,t="function"==typeof t?t:r)},pe.cloneWith=function(n,t){return Be(n,s,t="function"==typeof t?t:r)},pe.conformsTo=function(n,t){return null==t||Ue(n,t,ia(t))},pe.deburr=ya,pe.defaultTo=function(n,t){return null==n||n!=n?t:n},pe.divide=Va,pe.endsWith=function(n,t,e){n=Kf(n),t=Uu(t);var u=n.length,i=e=e===r?u:Ce(Nf(e),0,u);return(e-=t.length)>=0&&n.slice(e,i)==t},pe.eq=vf,pe.escape=function(n){return(n=Kf(n))&&jn.test(n)?n.replace(mn,wr):n},pe.escapeRegExp=function(n){return(n=Kf(n))&&Sn.test(n)?n.replace(zn,"\\$&"):n},pe.every=function(n,t,e){var u=df(n)?Vt:Fe;return e&&Ki(n,t,e)&&(t=r),u(n,Bi(t,3))},pe.find=Po,pe.findIndex=_o,pe.findKey=function(n,t){return er(n,Bi(t,3),Ve)},pe.findLast=qo,pe.findLastIndex=go,pe.findLastKey=function(n,t){return er(n,Bi(t,3),Ge)},pe.floor=Ga,pe.forEach=Zo,pe.forEachRight=Ko,pe.forIn=function(n,t){return null==n?n:Ze(n,Bi(t,3),oa)},pe.forInRight=function(n,t){return null==n?n:Ke(n,Bi(t,3),oa)},pe.forOwn=function(n,t){return n&&Ve(n,Bi(t,3))},pe.forOwnRight=function(n,t){return n&&Ge(n,Bi(t,3))},pe.get=na,pe.gt=_f,pe.gte=gf,pe.has=function(n,t){return null!=n&&Ni(n,t,nu)},pe.hasIn=ta,pe.head=bo,pe.identity=Sa,pe.includes=function(n,t,r,e){n=wf(n)?n:va(n),r=r&&!e?Nf(r):0;var u=n.length;return r<0&&(r=Zr(u+r,0)),Bf(n)?r<=u&&n.indexOf(t,r)>-1:!!u&&ir(n,t,r)>-1},pe.indexOf=function(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:Nf(r);return u<0&&(u=Zr(e+u,0)),ir(n,t,u)},pe.inRange=function(n,t,e){return t=Ff(t),e===r?(e=t,t=0):e=Ff(e),function(n,t,r){return n>=Kr(t,r)&&n<Zr(t,r)}(n=qf(n),t,e)},pe.invoke=ua,pe.isArguments=yf,pe.isArray=df,pe.isArrayBuffer=bf,pe.isArrayLike=wf,pe.isArrayLikeObject=mf,pe.isBoolean=function(n){return!0===n||!1===n||Ef(n)&&Qe(n)==F},pe.isBuffer=xf,pe.isDate=jf,pe.isElement=function(n){return Ef(n)&&1===n.nodeType&&!Lf(n)},pe.isEmpty=function(n){if(null==n)return!0;if(wf(n)&&(df(n)||"string"==typeof n||"function"==typeof n.splice||xf(n)||Tf(n)||yf(n)))return!n.length;var t=Fi(n);if(t==V||t==X)return!n.size;if(Ji(n))return!cu(n).length;for(var r in n)if(st.call(n,r))return!1;return!0},pe.isEqual=function(n,t){return iu(n,t)},pe.isEqualWith=function(n,t,e){var u=(e="function"==typeof e?e:r)?e(n,t):r;return u===r?iu(n,t,r,e):!!u},pe.isError=Af,pe.isFinite=function(n){return"number"==typeof n&&Nr(n)},pe.isFunction=kf,pe.isInteger=Of,pe.isLength=If,pe.isMap=zf,pe.isMatch=function(n,t){return n===t||ou(n,t,Ti(t))},pe.isMatchWith=function(n,t,e){return e="function"==typeof e?e:r,ou(n,t,Ti(t),e)},pe.isNaN=function(n){return Sf(n)&&n!=+n},pe.isNative=function(n){if(Hi(n))throw new Xn(u);return fu(n)},pe.isNil=function(n){return null==n},pe.isNull=function(n){return null===n},pe.isNumber=Sf,pe.isObject=Rf,pe.isObjectLike=Ef,pe.isPlainObject=Lf,pe.isRegExp=Wf,pe.isSafeInteger=function(n){return Of(n)&&n>=-S&&n<=S},pe.isSet=Cf,pe.isString=Bf,pe.isSymbol=Uf,pe.isTypedArray=Tf,pe.isUndefined=function(n){return n===r},pe.isWeakMap=function(n){return Ef(n)&&Fi(n)==en},pe.isWeakSet=function(n){return Ef(n)&&Qe(n)==un},pe.join=function(n,t){return null==n?"":Pr.call(n,t)},pe.kebabCase=da,pe.last=jo,pe.lastIndexOf=function(n,t,e){var u=null==n?0:n.length;if(!u)return-1;var i=u;return e!==r&&(i=(i=Nf(e))<0?Zr(u+i,0):Kr(i,u-1)),t==t?function(n,t,r){for(var e=r+1;e--;)if(n[e]===t)return e;return e}(n,t,i):ur(n,fr,i,!0)},pe.lowerCase=ba,pe.lowerFirst=wa,pe.lt=$f,pe.lte=Df,pe.max=function(n){return n&&n.length?Ne(n,Sa,Xe):r},pe.maxBy=function(n,t){return n&&n.length?Ne(n,Bi(t,2),Xe):r},pe.mean=function(n){return ar(n,Sa)},pe.meanBy=function(n,t){return ar(n,Bi(t,2))},pe.min=function(n){return n&&n.length?Ne(n,Sa,su):r},pe.minBy=function(n,t){return n&&n.length?Ne(n,Bi(t,2),su):r},pe.stubArray=Pa,pe.stubFalse=qa,pe.stubObject=function(){return{}},pe.stubString=function(){return""},pe.stubTrue=function(){return!0},pe.multiply=Ja,pe.nth=function(n,t){return n&&n.length?gu(n,Nf(t)):r},pe.noConflict=function(){return St._===this&&(St._=dt),this},pe.noop=Ua,pe.now=Xo,pe.pad=function(n,t,r){n=Kf(n);var e=(t=Nf(t))?Rr(n):0;if(!t||e>=t)return n;var u=(t-e)/2;return yi(Dr(u),r)+n+yi($r(u),r)},pe.padEnd=function(n,t,r){n=Kf(n);var e=(t=Nf(t))?Rr(n):0;return t&&e<t?n+yi(t-e,r):n},pe.padStart=function(n,t,r){n=Kf(n);var e=(t=Nf(t))?Rr(n):0;return t&&e<t?yi(t-e,r)+n:n},pe.parseInt=function(n,t,r){return r||null==t?t=0:t&&(t=+t),Gr(Kf(n).replace(Wn,""),t||0)},pe.random=function(n,t,e){if(e&&"boolean"!=typeof e&&Ki(n,t,e)&&(t=e=r),e===r&&("boolean"==typeof t?(e=t,t=r):"boolean"==typeof n&&(e=n,n=r)),n===r&&t===r?(n=0,t=1):(n=Ff(n),t===r?(t=n,n=0):t=Ff(t)),n>t){var u=n;n=t,t=u}if(e||n%1||t%1){var i=Hr();return Kr(n+i*(t-n+It("1e-"+((i+"").length-1))),t)}return mu(n,t)},pe.reduce=function(n,t,r){var e=df(n)?Xt:sr,u=arguments.length<3;return e(n,Bi(t,4),r,u,De)},pe.reduceRight=function(n,t,r){var e=df(n)?nr:sr,u=arguments.length<3;return e(n,Bi(t,4),r,u,Me)},pe.repeat=function(n,t,e){return t=(e?Ki(n,t,e):t===r)?1:Nf(t),xu(Kf(n),t)},pe.replace=function(){var n=arguments,t=Kf(n[0]);return n.length<3?t:t.replace(n[1],n[2])},pe.result=function(n,t,e){var u=-1,i=(t=Ku(t,n)).length;for(i||(i=1,n=r);++u<i;){var o=null==n?r:n[co(t[u])];o===r&&(u=i,o=e),n=kf(o)?o.call(n):o}return n},pe.round=Ya,pe.runInContext=n,pe.sample=function(n){return(df(n)?Ae:Au)(n)},pe.size=function(n){if(null==n)return 0;if(wf(n))return Bf(n)?Rr(n):n.length;var t=Fi(n);return t==V||t==X?n.size:cu(n).length},pe.snakeCase=ma,pe.some=function(n,t,e){var u=df(n)?tr:Su;return e&&Ki(n,t,e)&&(t=r),u(n,Bi(t,3))},pe.sortedIndex=function(n,t){return Lu(n,t)},pe.sortedIndexBy=function(n,t,r){return Wu(n,t,Bi(r,2))},pe.sortedIndexOf=function(n,t){var r=null==n?0:n.length;if(r){var e=Lu(n,t);if(e<r&&vf(n[e],t))return e}return-1},pe.sortedLastIndex=function(n,t){return Lu(n,t,!0)},pe.sortedLastIndexBy=function(n,t,r){return Wu(n,t,Bi(r,2),!0)},pe.sortedLastIndexOf=function(n,t){if(null!=n&&n.length){var r=Lu(n,t,!0)-1;if(vf(n[r],t))return r}return-1},pe.startCase=xa,pe.startsWith=function(n,t,r){return n=Kf(n),r=null==r?0:Ce(Nf(r),0,n.length),t=Uu(t),n.slice(r,r+t.length)==t},pe.subtract=Qa,pe.sum=function(n){return n&&n.length?hr(n,Sa):0},pe.sumBy=function(n,t){return n&&n.length?hr(n,Bi(t,2)):0},pe.template=function(n,t,e){var u=pe.templateSettings;e&&Ki(n,t,e)&&(t=r),n=Kf(n),t=Hf({},t,u,ki);var i,o,f=Hf({},t.imports,u.imports,ki),a=ia(f),c=_r(f,a),l=0,s=t.interpolate||Gn,h="__p += '",p=et((t.escape||Gn).source+"|"+s.source+"|"+(s===On?Mn:Gn).source+"|"+(t.evaluate||Gn).source+"|$","g"),v="//# sourceURL="+(st.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++jt+"]")+"\n";n.replace(p,function(t,r,e,u,f,a){return e||(e=u),h+=n.slice(l,a).replace(Hn,mr),r&&(i=!0,h+="' +\n__e("+r+") +\n'"),f&&(o=!0,h+="';\n"+f+";\n__p += '"),e&&(h+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),l=a+t.length,t}),h+="';\n";var _=st.call(t,"variable")&&t.variable;_||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(yn,""):h).replace(dn,"$1").replace(bn,"$1;"),h="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Oa(function(){return nt(a,v+"return "+h).apply(r,c)});if(g.source=h,Af(g))throw g;return g},pe.times=function(n,t){if((n=Nf(n))<1||n>S)return[];var r=C,e=Kr(n,C);t=Bi(t),n-=C;for(var u=pr(e,t);++r<n;)t(r);return u},pe.toFinite=Ff,pe.toInteger=Nf,pe.toLength=Pf,pe.toLower=function(n){return Kf(n).toLowerCase()},pe.toNumber=qf,pe.toSafeInteger=function(n){return n?Ce(Nf(n),-S,S):0===n?n:0},pe.toString=Kf,pe.toUpper=function(n){return Kf(n).toUpperCase()},pe.trim=function(n,t,e){if((n=Kf(n))&&(e||t===r))return n.replace(Ln,"");if(!n||!(t=Uu(t)))return n;var u=Er(n),i=Er(t);return Gu(u,yr(u,i),dr(u,i)+1).join("")},pe.trimEnd=function(n,t,e){if((n=Kf(n))&&(e||t===r))return n.replace(Cn,"");if(!n||!(t=Uu(t)))return n;var u=Er(n);return Gu(u,0,dr(u,Er(t))+1).join("")},pe.trimStart=function(n,t,e){if((n=Kf(n))&&(e||t===r))return n.replace(Wn,"");if(!n||!(t=Uu(t)))return n;var u=Er(n);return Gu(u,yr(u,Er(t))).join("")},pe.truncate=function(n,t){var e=A,u=k;if(Rf(t)){var i="separator"in t?t.separator:i;e="length"in t?Nf(t.length):e,u="omission"in t?Uu(t.omission):u}var o=(n=Kf(n)).length;if(xr(n)){var f=Er(n);o=f.length}if(e>=o)return n;var a=e-Rr(u);if(a<1)return u;var c=f?Gu(f,0,a).join(""):n.slice(0,a);if(i===r)return c+u;if(f&&(a+=c.length-a),Wf(i)){if(n.slice(a).search(i)){var l,s=c;for(i.global||(i=et(i.source,Kf(Fn.exec(i))+"g")),i.lastIndex=0;l=i.exec(s);)var h=l.index;c=c.slice(0,h===r?a:h)}}else if(n.indexOf(Uu(i),a)!=a){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+u},pe.unescape=function(n){return(n=Kf(n))&&xn.test(n)?n.replace(wn,zr):n},pe.uniqueId=function(n){var t=++ht;return Kf(n)+t},pe.upperCase=ja,pe.upperFirst=Aa,pe.each=Zo,pe.eachRight=Ko,pe.first=bo,Ba(pe,(Ha={},Ve(pe,function(n,t){st.call(pe.prototype,t)||(Ha[t]=n)}),Ha),{chain:!1}),pe.VERSION="4.17.15",Zt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){pe[n].placeholder=pe}),Zt(["drop","take"],function(n,t){ye.prototype[n]=function(e){e=e===r?1:Zr(Nf(e),0);var u=this.__filtered__&&!t?new ye(this):this.clone();return u.__filtered__?u.__takeCount__=Kr(e,u.__takeCount__):u.__views__.push({size:Kr(e,C),type:n+(u.__dir__<0?"Right":"")}),u},ye.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),Zt(["filter","map","takeWhile"],function(n,t){var r=t+1,e=r==R||3==r;ye.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:Bi(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),Zt(["head","last"],function(n,t){var r="take"+(t?"Right":"");ye.prototype[n]=function(){return this[r](1).value()[0]}}),Zt(["initial","tail"],function(n,t){var r="drop"+(t?"":"Right");ye.prototype[n]=function(){return this.__filtered__?new ye(this):this[r](1)}}),ye.prototype.compact=function(){return this.filter(Sa)},ye.prototype.find=function(n){return this.filter(n).head()},ye.prototype.findLast=function(n){return this.reverse().find(n)},ye.prototype.invokeMap=ju(function(n,t){return"function"==typeof n?new ye(this):this.map(function(r){return eu(r,n,t)})}),ye.prototype.reject=function(n){return this.filter(cf(Bi(n)))},ye.prototype.slice=function(n,t){n=Nf(n);var e=this;return e.__filtered__&&(n>0||t<0)?new ye(e):(n<0?e=e.takeRight(-n):n&&(e=e.drop(n)),t!==r&&(e=(t=Nf(t))<0?e.dropRight(-t):e.take(t-n)),e)},ye.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},ye.prototype.toArray=function(){return this.take(C)},Ve(ye.prototype,function(n,t){var e=/^(?:filter|find|map|reject)|While$/.test(t),u=/^(?:head|last)$/.test(t),i=pe[u?"take"+("last"==t?"Right":""):t],o=u||/^find/.test(t);i&&(pe.prototype[t]=function(){var t=this.__wrapped__,f=u?[1]:arguments,a=t instanceof ye,c=f[0],l=a||df(t),s=function(n){var t=i.apply(pe,Qt([n],f));return u&&h?t[0]:t};l&&e&&"function"==typeof c&&1!=c.length&&(a=l=!1);var h=this.__chain__,p=!!this.__actions__.length,v=o&&!h,_=a&&!p;if(!o&&l){t=_?t:new ye(this);var g=n.apply(t,f);return g.__actions__.push({func:Mo,args:[s],thisArg:r}),new ge(g,h)}return v&&_?n.apply(this,f):(g=this.thru(s),v?u?g.value()[0]:g.value():g)})}),Zt(["pop","push","shift","sort","splice","unshift"],function(n){var t=ot[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:pop|shift)$/.test(n);pe.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(df(u)?u:[],n)}return this[r](function(r){return t.apply(df(r)?r:[],n)})}}),Ve(ye.prototype,function(n,t){var r=pe[t];if(r){var e=r.name+"";st.call(ue,e)||(ue[e]=[]),ue[e].push({name:t,func:r})}}),ue[pi(r,_).name]=[{name:"wrapper",func:r}],ye.prototype.clone=function(){var n=new ye(this.__wrapped__);return n.__actions__=ri(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=ri(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=ri(this.__views__),n},ye.prototype.reverse=function(){if(this.__filtered__){var n=new ye(this);n.__dir__=-1,n.__filtered__=!0}else(n=this.clone()).__dir__*=-1;return n},ye.prototype.value=function(){var n=this.__wrapped__.value(),t=this.__dir__,r=df(n),e=t<0,u=r?n.length:0,i=function(n,t,r){for(var e=-1,u=r.length;++e<u;){var i=r[e],o=i.size;switch(i.type){case"drop":n+=o;break;case"dropRight":t-=o;break;case"take":t=Kr(t,n+o);break;case"takeRight":n=Zr(n,t-o)}}return{start:n,end:t}}(0,u,this.__views__),o=i.start,f=i.end,a=f-o,c=e?f:o-1,l=this.__iteratees__,s=l.length,h=0,p=Kr(a,this.__takeCount__);if(!r||!e&&u==a&&p==a)return Fu(n,this.__actions__);var v=[];n:for(;a--&&h<p;){for(var _=-1,g=n[c+=t];++_<s;){var y=l[_],d=y.iteratee,b=y.type,w=d(g);if(b==E)g=w;else if(!w){if(b==R)continue n;break n}}v[h++]=g}return v},pe.prototype.at=Fo,pe.prototype.chain=function(){return Do(this)},pe.prototype.commit=function(){return new ge(this.value(),this.__chain__)},pe.prototype.next=function(){this.__values__===r&&(this.__values__=Mf(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?r:this.__values__[this.__index__++]}},pe.prototype.plant=function(n){for(var t,e=this;e instanceof _e;){var u=so(e);u.__index__=0,u.__values__=r,t?i.__wrapped__=u:t=u;var i=u;e=e.__wrapped__}return i.__wrapped__=n,t},pe.prototype.reverse=function(){var n=this.__wrapped__;if(n instanceof ye){var t=n;return this.__actions__.length&&(t=new ye(this)),(t=t.reverse()).__actions__.push({func:Mo,args:[Io],thisArg:r}),new ge(t,this.__chain__)}return this.thru(Io)},pe.prototype.toJSON=pe.prototype.valueOf=pe.prototype.value=function(){return Fu(this.__wrapped__,this.__actions__)},pe.prototype.first=pe.prototype.head,Lr&&(pe.prototype[Lr]=function(){return this}),pe}();"function"==typeof n&&"object"==typeof n.amd&&n.amd?(St._=Sr,n(function(){return Sr})):Wt?((Wt.exports=Sr)._=Sr,Lt._=Sr):St._=Sr}).call(this);
},{"buffer":"FaCw"}],"Bofi":[function(require,module,exports) {
var e=require("lodash"),s=e.keys,t=Object.freeze({pg:"postgres",postgresql:"postgres",sqlite:"sqlite3"}),r=Object.freeze(["mssql","mysql","mysql2","oracledb","postgres","redshift","sqlite3"].concat(s(t))),i=Object.freeze(["maxWaitingClients","testOnBorrow","fifo","priorityRange","autostart","evictionRunIntervalMillis","numTestsPerRun","softIdleTimeoutMillis","Promise"]);module.exports={CLIENT_ALIASES:t,SUPPORTED_CLIENTS:r,POOL_CONFIG_OPTIONS:i};
},{"lodash":"uinZ"}],"RYfD":[function(require,module,exports) {
var r=require("lodash"),n=r.isFunction,e=r.isUndefined,t=r.isPlainObject,i=r.isArray,o=r.isTypedArray,u=require("./constants"),s=u.CLIENT_ALIASES;function a(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return Array.isArray(r[0])?r[0]:r}function f(r){var u=!1;if(o(r))return!1;if(r&&n(r.toSQL))return u;if(i(r))for(var s=0;s<r.length&&!u;s++)u=f(r[s]);else t(r)?Object.keys(r).forEach(function(n){u||(u=f(r[n]))}):u=e(r);return u}function c(r){var n=[];return Array.isArray(r)?r.forEach(function(r,e){f(r)&&n.push(e)}):t(r)?Object.keys(r).forEach(function(e){f(r[e])&&n.push(e)}):n.push(0),n}function y(r){r.prototype.queryContext=function(r){return e(r)?this._queryContext:(this._queryContext=r,this)}}function h(r){return s[r]||r}module.exports={addQueryContext:y,containsUndefined:f,normalizeArr:a,resolveClientNameWithAliases:h,getUndefinedIndices:c};
},{"lodash":"uinZ","./constants":"Bofi"}],"Iny6":[function(require,module,exports) {
"use strict";var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function r(e){console&&console.warn&&console.warn(e)}e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}module.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function f(e,t,n,i){var o,s,f;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),f=s[t]),void 0===f)f=s[t]=n,++e._eventsCount;else if("function"==typeof f?f=s[t]=i?[n,f]:[f,n]:i?f.unshift(n):f.push(n),(o=u(e))>0&&f.length>o&&!f.warned){f.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=e,p.type=t,p.count=f.length,r(p)}return e}function p(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,n(this.listener,this.target,e))}function v(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=p.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?y(i):c(i,i.length)}function a(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function c(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function l(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function y(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var f=o[e];if(void 0===f)return!1;if("function"==typeof f)n(f,this,t);else{var p=f.length,v=c(f,p);for(r=0;r<p;++r)n(v[r],this,t)}return!0},o.prototype.addListener=function(e,t){return f(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return f(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,v(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,v(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():l(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):a.call(e,t)},o.prototype.listenerCount=a,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};
},{}],"nUli":[function(require,module,exports) {
var s=1e3,e=60*s,r=60*e,a=24*r,n=7*a,c=365.25*a;function t(t){if(!((t=String(t)).length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(u){var i=parseFloat(u[1]);switch((u[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*c;case"weeks":case"week":case"w":return i*n;case"days":case"day":case"d":return i*a;case"hours":case"hour":case"hrs":case"hr":case"h":return i*r;case"minutes":case"minute":case"mins":case"min":case"m":return i*e;case"seconds":case"second":case"secs":case"sec":case"s":return i*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function u(n){var c=Math.abs(n);return c>=a?Math.round(n/a)+"d":c>=r?Math.round(n/r)+"h":c>=e?Math.round(n/e)+"m":c>=s?Math.round(n/s)+"s":n+"ms"}function i(n){var c=Math.abs(n);return c>=a?o(n,c,a,"day"):c>=r?o(n,c,r,"hour"):c>=e?o(n,c,e,"minute"):c>=s?o(n,c,s,"second"):n+" ms"}function o(s,e,r,a){var n=e>=1.5*r;return Math.round(s/r)+" "+a+(n?"s":"")}module.exports=function(s,e){e=e||{};var r=typeof s;if("string"===r&&s.length>0)return t(s);if("number"===r&&isFinite(s))return e.long?i(s):u(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};
},{}],"yJgn":[function(require,module,exports) {
function e(e){function n(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]}function t(e){let o;function i(...e){if(!i.enabled)return;const n=i,s=Number(new Date),r=s-(o||s);n.diff=r,n.prev=o,n.curr=s,o=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(s,r)=>{if("%%"===s)return s;a++;const o=t.formatters[r];if("function"==typeof o){const t=e[a];s=o.call(n,t),e.splice(a,1),a--}return s}),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=n(e),i.destroy=s,i.extend=r,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function s(){const e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}function r(e,n){const s=t(this.namespace+(void 0===n?":":n)+e);return s.log=this.log,s}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.names=[],t.skips=[];const s=("string"==typeof e?e:"").split(/[\s,]+/),r=s.length;for(n=0;n<r;n++)s[n]&&("-"===(e=s[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){const e=t.instances[n];e.enabled=t.enabled(e.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,s;for(n=0,s=t.skips.length;n<s;n++)if(t.skips[n].test(e))return!1;for(n=0,s=t.names.length;n<s;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=require("ms"),Object.keys(e).forEach(n=>{t[n]=e[n]}),t.instances=[],t.names=[],t.skips=[],t.formatters={},t.selectColor=n,t.enable(t.load()),t}module.exports=e;
},{"ms":"nUli"}],"hAF4":[function(require,module,exports) {
var process = require("process");
var e=require("process");function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function C(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+module.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;e.splice(1,0,o,"color: inherit");let C=0,t=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(C++,"%c"===e&&(t=C))}),e.splice(t,0,o)}function t(...e){return"object"==typeof console&&console.log&&console.log(...e)}function r(e){try{e?exports.storage.setItem("debug",e):exports.storage.removeItem("debug")}catch(o){}}function n(){let o;try{o=exports.storage.getItem("debug")}catch(C){}return!o&&void 0!==e&&"env"in e&&(o=void 0),o}function s(){try{return localStorage}catch(e){}}exports.log=t,exports.formatArgs=C,exports.save=r,exports.load=n,exports.useColors=o,exports.storage=s(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],module.exports=require("./common")(exports);const{formatters:F}=module.exports;F.j=function(e){try{return JSON.stringify(e)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}};
},{"./common":"yJgn","process":"FeV4"}],"dOYu":[function(require,module,exports) {
module.exports=function(c,n){if(c.client.config.asyncStackTraces){var a=(new Error).stack.split("\n");a.splice(0,n),c._asyncStack=a}};
},{}],"Kefk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),t=new Uint8Array(16);function o(){if(!e)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}
},{}],"TaP2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;for(var e=[],r=0;r<256;++r)e[r]=(r+256).toString(16).substr(1);function t(r,t){var o=t||0,s=e;return[s[r[o++]],s[r[o++]],s[r[o++]],s[r[o++]],"-",s[r[o++]],s[r[o++]],"-",s[r[o++]],s[r[o++]],"-",s[r[o++]],s[r[o++]],"-",s[r[o++]],s[r[o++]],s[r[o++]],s[r[o++]],s[r[o++]],s[r[o++]]].join("")}var o=t;exports.default=o;
},{}],"d8yJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,s=u(require("./rng.js")),o=u(require("./bytesToUuid.js"));function u(e){return e&&e.__esModule?e:{default:e}}var t=0,n=0;function a(u,a,d){var l=a&&d||0,i=a||[],c=(u=u||{}).node||e,v=void 0!==u.clockseq?u.clockseq:r;if(null==c||null==v){var f=u.random||(u.rng||s.default)();null==c&&(c=e=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==v&&(v=r=16383&(f[6]<<8|f[7]))}var m=void 0!==u.msecs?u.msecs:(new Date).getTime(),q=void 0!==u.nsecs?u.nsecs:n+1,p=m-t+(q-n)/1e4;if(p<0&&void 0===u.clockseq&&(v=v+1&16383),(p<0||m>t)&&void 0===u.nsecs&&(q=0),q>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");t=m,n=q,r=v;var _=(1e4*(268435455&(m+=122192928e5))+q)%4294967296;i[l++]=_>>>24&255,i[l++]=_>>>16&255,i[l++]=_>>>8&255,i[l++]=255&_;var g=m/4294967296*1e4&268435455;i[l++]=g>>>8&255,i[l++]=255&g,i[l++]=g>>>24&15|16,i[l++]=g>>>16&255,i[l++]=v>>>8|128,i[l++]=255&v;for(var j=0;j<6;++j)i[l+j]=c[j];return a||(0,o.default)(i)}var d=a;exports.default=d;
},{"./rng.js":"Kefk","./bytesToUuid.js":"TaP2"}],"kUsJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u,exports.URL=exports.DNS=void 0;var r=e(require("./bytesToUuid.js"));function e(r){return r&&r.__esModule?r:{default:r}}function t(r){var e=[];return r.replace(/[a-fA-F0-9]{2}/g,function(r){e.push(parseInt(r,16))}),e}function a(r){r=unescape(encodeURIComponent(r));for(var e=new Array(r.length),t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}var n="6ba7b810-9dad-11d1-80b4-00c04fd430c8";exports.DNS=n;var o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function u(e,u,s){var f=function(e,n,o,f){var c=o&&f||0;if("string"==typeof e&&(e=a(e)),"string"==typeof n&&(n=t(n)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(n)||16!==n.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var i=s(n.concat(e));if(i[6]=15&i[6]|u,i[8]=63&i[8]|128,o)for(var d=0;d<16;++d)o[c+d]=i[d];return o||(0,r.default)(i)};try{f.name=e}catch(c){}return f.DNS=n,f.URL=o,f}exports.URL=o;
},{"./bytesToUuid.js":"TaP2"}],"Q1tH":[function(require,module,exports) {
"use strict";function n(n){if("string"==typeof n){var u=unescape(encodeURIComponent(n));n=new Array(u.length);for(var o=0;o<u.length;o++)n[o]=u.charCodeAt(o)}return r(t(e(n),8*n.length))}function r(n){var r,t,e,u=[],o=32*n.length;for(r=0;r<o;r+=8)t=n[r>>5]>>>r%32&255,e=parseInt("0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t),16),u.push(e);return u}function t(n,r){var t,e,o,f,l;n[r>>5]|=128<<r%32,n[14+(r+64>>>9<<4)]=r;var v=1732584193,d=-271733879,s=-1732584194,g=271733878;for(t=0;t<n.length;t+=16)e=v,o=d,f=s,l=g,v=a(v,d,s,g,n[t],7,-680876936),g=a(g,v,d,s,n[t+1],12,-389564586),s=a(s,g,v,d,n[t+2],17,606105819),d=a(d,s,g,v,n[t+3],22,-1044525330),v=a(v,d,s,g,n[t+4],7,-176418897),g=a(g,v,d,s,n[t+5],12,1200080426),s=a(s,g,v,d,n[t+6],17,-1473231341),d=a(d,s,g,v,n[t+7],22,-45705983),v=a(v,d,s,g,n[t+8],7,1770035416),g=a(g,v,d,s,n[t+9],12,-1958414417),s=a(s,g,v,d,n[t+10],17,-42063),d=a(d,s,g,v,n[t+11],22,-1990404162),v=a(v,d,s,g,n[t+12],7,1804603682),g=a(g,v,d,s,n[t+13],12,-40341101),s=a(s,g,v,d,n[t+14],17,-1502002290),v=c(v,d=a(d,s,g,v,n[t+15],22,1236535329),s,g,n[t+1],5,-165796510),g=c(g,v,d,s,n[t+6],9,-1069501632),s=c(s,g,v,d,n[t+11],14,643717713),d=c(d,s,g,v,n[t],20,-373897302),v=c(v,d,s,g,n[t+5],5,-701558691),g=c(g,v,d,s,n[t+10],9,38016083),s=c(s,g,v,d,n[t+15],14,-660478335),d=c(d,s,g,v,n[t+4],20,-405537848),v=c(v,d,s,g,n[t+9],5,568446438),g=c(g,v,d,s,n[t+14],9,-1019803690),s=c(s,g,v,d,n[t+3],14,-187363961),d=c(d,s,g,v,n[t+8],20,1163531501),v=c(v,d,s,g,n[t+13],5,-1444681467),g=c(g,v,d,s,n[t+2],9,-51403784),s=c(s,g,v,d,n[t+7],14,1735328473),v=i(v,d=c(d,s,g,v,n[t+12],20,-1926607734),s,g,n[t+5],4,-378558),g=i(g,v,d,s,n[t+8],11,-2022574463),s=i(s,g,v,d,n[t+11],16,1839030562),d=i(d,s,g,v,n[t+14],23,-35309556),v=i(v,d,s,g,n[t+1],4,-1530992060),g=i(g,v,d,s,n[t+4],11,1272893353),s=i(s,g,v,d,n[t+7],16,-155497632),d=i(d,s,g,v,n[t+10],23,-1094730640),v=i(v,d,s,g,n[t+13],4,681279174),g=i(g,v,d,s,n[t],11,-358537222),s=i(s,g,v,d,n[t+3],16,-722521979),d=i(d,s,g,v,n[t+6],23,76029189),v=i(v,d,s,g,n[t+9],4,-640364487),g=i(g,v,d,s,n[t+12],11,-421815835),s=i(s,g,v,d,n[t+15],16,530742520),v=h(v,d=i(d,s,g,v,n[t+2],23,-995338651),s,g,n[t],6,-198630844),g=h(g,v,d,s,n[t+7],10,1126891415),s=h(s,g,v,d,n[t+14],15,-1416354905),d=h(d,s,g,v,n[t+5],21,-57434055),v=h(v,d,s,g,n[t+12],6,1700485571),g=h(g,v,d,s,n[t+3],10,-1894986606),s=h(s,g,v,d,n[t+10],15,-1051523),d=h(d,s,g,v,n[t+1],21,-2054922799),v=h(v,d,s,g,n[t+8],6,1873313359),g=h(g,v,d,s,n[t+15],10,-30611744),s=h(s,g,v,d,n[t+6],15,-1560198380),d=h(d,s,g,v,n[t+13],21,1309151649),v=h(v,d,s,g,n[t+4],6,-145523070),g=h(g,v,d,s,n[t+11],10,-1120210379),s=h(s,g,v,d,n[t+2],15,718787259),d=h(d,s,g,v,n[t+9],21,-343485551),v=u(v,e),d=u(d,o),s=u(s,f),g=u(g,l);return[v,d,s,g]}function e(n){var r,t=[];for(t[(n.length>>2)-1]=void 0,r=0;r<t.length;r+=1)t[r]=0;var e=8*n.length;for(r=0;r<e;r+=8)t[r>>5]|=(255&n[r/8])<<r%32;return t}function u(n,r){var t=(65535&n)+(65535&r);return(n>>16)+(r>>16)+(t>>16)<<16|65535&t}function o(n,r){return n<<r|n>>>32-r}function f(n,r,t,e,f,a){return u(o(u(u(r,n),u(e,a)),f),t)}function a(n,r,t,e,u,o,a){return f(r&t|~r&e,n,r,u,o,a)}function c(n,r,t,e,u,o,a){return f(r&e|t&~e,n,r,u,o,a)}function i(n,r,t,e,u,o,a){return f(r^t^e,n,r,u,o,a)}function h(n,r,t,e,u,o,a){return f(t^(r|~e),n,r,u,o,a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var l=n;exports.default=l;
},{}],"QONt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./v35.js")),r=t(require("./md5.js"));function t(e){return e&&e.__esModule?e:{default:e}}var u=(0,e.default)("v3",48,r.default),d=u;exports.default=d;
},{"./v35.js":"kUsJ","./md5.js":"Q1tH"}],"d864":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./rng.js")),r=t(require("./bytesToUuid.js"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t,u,n){var a=u&&n||0;"string"==typeof t&&(u="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||e.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,u)for(var l=0;l<16;++l)u[a+l]=o[l];return u||(0,r.default)(o)}var n=u;exports.default=n;
},{"./rng.js":"Kefk","./bytesToUuid.js":"TaP2"}],"yivb":[function(require,module,exports) {
"use strict";function r(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function e(r,e){return r<<e|r>>>32-e}function t(t){var n=[1518500249,1859775393,2400959708,3395469782],a=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var o=unescape(encodeURIComponent(t));t=new Array(o.length);for(var f=0;f<o.length;f++)t[f]=o.charCodeAt(f)}t.push(128);var u=t.length/4+2,c=Math.ceil(u/16),s=new Array(c);for(f=0;f<c;f++){s[f]=new Array(16);for(var h=0;h<16;h++)s[f][h]=t[64*f+4*h]<<24|t[64*f+4*h+1]<<16|t[64*f+4*h+2]<<8|t[64*f+4*h+3]}s[c-1][14]=8*(t.length-1)/Math.pow(2,32),s[c-1][14]=Math.floor(s[c-1][14]),s[c-1][15]=8*(t.length-1)&4294967295;for(f=0;f<c;f++){for(var l=new Array(80),v=0;v<16;v++)l[v]=s[f][v];for(v=16;v<80;v++)l[v]=e(l[v-3]^l[v-8]^l[v-14]^l[v-16],1);var i=a[0],p=a[1],d=a[2],g=a[3],w=a[4];for(v=0;v<80;v++){var y=Math.floor(v/20),A=e(i,5)+r(y,p,d,g)+w+n[y]+l[v]>>>0;w=g,g=d,d=e(p,30)>>>0,p=i,i=A}a[0]=a[0]+i>>>0,a[1]=a[1]+p>>>0,a[2]=a[2]+d>>>0,a[3]=a[3]+g>>>0,a[4]=a[4]+w>>>0}return[a[0]>>24&255,a[0]>>16&255,a[0]>>8&255,255&a[0],a[1]>>24&255,a[1]>>16&255,a[1]>>8&255,255&a[1],a[2]>>24&255,a[2]>>16&255,a[2]>>8&255,255&a[2],a[3]>>24&255,a[3]>>16&255,a[3]>>8&255,255&a[3],a[4]>>24&255,a[4]>>16&255,a[4]>>8&255,255&a[4]]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=t;exports.default=n;
},{}],"DfHW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./v35.js")),r=t(require("./sha1.js"));function t(e){return e&&e.__esModule?e:{default:e}}var u=(0,e.default)("v5",80,r.default),s=u;exports.default=s;
},{"./v35.js":"kUsJ","./sha1.js":"yivb"}],"PJ3H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"v4",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"v5",{enumerable:!0,get:function(){return u.default}});var e=n(require("./v1.js")),r=n(require("./v3.js")),t=n(require("./v4.js")),u=n(require("./v5.js"));function n(e){return e&&e.__esModule?e:{default:e}}
},{"./v1.js":"d8yJ","./v3.js":"QONt","./v4.js":"d864","./v5.js":"DfHW"}],"he55":[function(require,module,exports) {
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};
},{}],"fBFh":[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],"o5TC":[function(require,module,exports) {
var process = require("process");
var e=require("process"),t=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},r=/%[sdj%]/g;exports.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,u=o.length,s=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=u)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return e}}),c=o[n];n<u;c=o[++n])h(c)||!S(c)?s+=" "+c:s+=" "+i(c);return s},exports.deprecate=function(t,r){if(void 0!==e&&!0===e.noDeprecation)return t;if(void 0===e)return function(){return exports.deprecate(t,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),n=!0}return t.apply(this,arguments)}};var n,o={};function i(e,t){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),b(t)?r.showHidden=t:t&&exports._extend(r,t),j(r.showHidden)&&(r.showHidden=!1),j(r.depth)&&(r.depth=2),j(r.colors)&&(r.colors=!1),j(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),p(r,e,r.depth)}function u(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function s(e,t){return e}function c(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function p(e,t,r){if(e.customInspect&&t&&P(t.inspect)&&t.inspect!==exports.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return v(n)||(n=p(e,n,r)),n}var o=l(e,t);if(o)return o;var i=Object.keys(t),u=c(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),E(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return f(t);if(0===i.length){if(P(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(z(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return f(t)}var b,h="",m=!1,x=["{","}"];(d(t)&&(m=!0,x=["[","]"]),P(t))&&(h=" [Function"+(t.name?": "+t.name:"")+"]");return w(t)&&(h=" "+RegExp.prototype.toString.call(t)),z(t)&&(h=" "+Date.prototype.toUTCString.call(t)),E(t)&&(h=" "+f(t)),0!==i.length||m&&0!=t.length?r<0?w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),b=m?a(e,t,r,u,i):i.map(function(n){return y(e,t,r,u,n,m)}),e.seen.pop(),g(b,h,x)):x[0]+h+x[1]}function l(e,t){if(j(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return x(t)?e.stylize(""+t,"number"):b(t)?e.stylize(""+t,"boolean"):h(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function a(e,t,r,n,o){for(var i=[],u=0,s=t.length;u<s;++u)A(t,String(u))?i.push(y(e,t,r,n,String(u),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(y(e,t,r,n,o,!0))}),i}function y(e,t,r,n,o,i){var u,s,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),A(n,o)||(u="["+o+"]"),s||(e.seen.indexOf(c.value)<0?(s=h(r)?p(e,c.value,null):p(e,c.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),j(u)){if(i&&o.match(/^\d+$/))return s;(u=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=e.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=e.stylize(u,"string"))}return u+": "+s}function g(e,t,r){return e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function b(e){return"boolean"==typeof e}function h(e){return null===e}function m(e){return null==e}function x(e){return"number"==typeof e}function v(e){return"string"==typeof e}function O(e){return"symbol"==typeof e}function j(e){return void 0===e}function w(e){return S(e)&&"[object RegExp]"===T(e)}function S(e){return"object"==typeof e&&null!==e}function z(e){return S(e)&&"[object Date]"===T(e)}function E(e){return S(e)&&("[object Error]"===T(e)||e instanceof Error)}function P(e){return"function"==typeof e}function D(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function T(e){return Object.prototype.toString.call(e)}function N(e){return e<10?"0"+e.toString(10):e.toString(10)}exports.debuglog=function(t){if(j(n)&&(n=""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(n)){var r=e.pid;o[t]=function(){var e=exports.format.apply(exports,arguments);console.error("%s %d: %s",t,r,e)}}else o[t]=function(){};return o[t]},exports.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=d,exports.isBoolean=b,exports.isNull=h,exports.isNullOrUndefined=m,exports.isNumber=x,exports.isString=v,exports.isSymbol=O,exports.isUndefined=j,exports.isRegExp=w,exports.isObject=S,exports.isDate=z,exports.isError=E,exports.isFunction=P,exports.isPrimitive=D,exports.isBuffer=require("./support/isBuffer");var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(){var e=new Date,t=[N(e.getHours()),N(e.getMinutes()),N(e.getSeconds())].join(":");return[e.getDate(),F[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}exports.log=function(){console.log("%s - %s",k(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,t){if(!t||!S(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var J="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function H(r){if("function"!=typeof r)throw new TypeError('The "original" argument must be of type Function');function n(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var o=t.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,u=function(){return o.apply(i,arguments)};r.apply(this,t).then(function(t){e.nextTick(u,null,t)},function(t){e.nextTick(R,t,u)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(r)),Object.defineProperties(n,t(r)),n}exports.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(J&&e[J]){var r;if("function"!=typeof(r=e[J]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,J,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var t,r,n=new Promise(function(e,n){t=e,r=n}),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push(function(e,n){e?r(e):t(n)});try{e.apply(this,o)}catch(u){r(u)}return n}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),J&&Object.defineProperty(r,J,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,t(e))},exports.promisify.custom=J,exports.callbackify=H;
},{"./support/isBuffer":"he55","inherits":"fBFh","process":"FeV4"}],"ujsZ":[function(require,module,exports) {
var n=require("./noop"),e=function(n){return Object.assign(n,{finally:function(n){return this.then().finally(n)}})};module.exports=Promise.prototype.finally?e:n;
},{"./noop":"UGzv"}],"v6ms":[function(require,module,exports) {
var t=require("lodash"),n=t.isEmpty,i=t.map,r=t.clone,e=require("util"),o=e.callbackify,c=require("./util/finally-mixin");module.exports=function(t){t.prototype.toQuery=function(t){var n=this,r=this.toSQL(this._method,t);return Array.isArray(r)||(r=[r]),i(r,function(i){return n.client._formatQuery(i.sql,i.bindings,t)}).join(";\n")},t.prototype.then=function(){var t=this,n=this.client.runner(this).run();return this.client.config.asyncStackTraces&&(n=n.catch(function(n){n.originalStack=n.stack;var i=n.stack.split("\n")[0];throw t._asyncStack.unshift(i),n.stack=t._asyncStack.join("\n"),n})),n.then.apply(n,arguments)},t.prototype.options=function(t){return this._options=this._options||[],this._options.push(r(t)||{}),this},t.prototype.connection=function(t){return this._connection=t,this},t.prototype.debug=function(t){return this._debug=!arguments.length||t,this},t.prototype.transacting=function(t){if(t&&t.client&&(t.client.transacting?this.client=t.client:t.client.logger.warn("Invalid transaction value: ".concat(t.client))),n(t))throw this.client.logger.error("Invalid value on transacting call, potential bug"),Error("Invalid transacting value (null, undefined or empty object)");return this},t.prototype.stream=function(t){return this.client.runner(this).stream(t)},t.prototype.pipe=function(t,n){return this.client.runner(this).pipe(t,n)},t.prototype.asCallback=function(t){var n=this.then();return o(function(){return n})(t),n},t.prototype.catch=function(t){return this.then().catch(t)},Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return"object"}}),c(t.prototype)};
},{"lodash":"uinZ","util":"o5TC","./util/finally-mixin":"ujsZ"}],"WMLC":[function(require,module,exports) {
var i=require("inherits"),e=require("./helpers"),n=require("events"),t=n.EventEmitter,r=require("debug"),s=require("lodash"),o=s.assign,d=s.reduce,a=s.isPlainObject,u=s.isObject,c=s.isUndefined,h=s.isNumber,l=require("./util/save-async-stack"),g=require("uuid"),p=r("knex:bindings");function b(i){this.client=i,this.sql="",this.bindings=[],this._wrappedBefore=void 0,this._wrappedAfter=void 0,i&&i.config&&(this._debug=i.config.debug,l(this,4))}function f(i,e){var n=i.bindings.length,t=i.bindings,r=0,s=i.sql.replace(/\\?\?\??/g,function(i){if("\\?"===i)return i;var n=t[r++];return"??"===i?e.columnize(n):e.parameter(n)});if(n!==r)throw new Error("Expected ".concat(n," bindings, saw ").concat(r));return{method:"raw",sql:s,bindings:e.bindings}}function m(i,e){var n=i.bindings;return{method:"raw",sql:i.sql.replace(/\\?(:(\w+):(?=::)|:(\w+):(?!:)|:(\w+))/g,function(i,t,r,s,o){if(i!==t)return t;var d=r||s||o,a=i.trim(),u=":"===a[a.length-1],c=n[d];return void 0===c?(Object.prototype.hasOwnProperty.call(n,d)&&e.bindings.push(c),i):u?i.replace(t,e.columnize(c)):i.replace(t,e.parameter(c))}),bindings:e.bindings}}i(b,t),o(b.prototype,{set:function(i,e){return this.sql=i,this.bindings=u(e)&&!e.toSQL||c(e)?e:[e],this},timeout:function(i){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cancel;return h(i)&&i>0&&(this._timeout=i,e&&(this.client.assertCanCancelQuery(),this._cancelOnTimeout=!0)),this},wrap:function(i,e){return this._wrappedBefore=i,this._wrappedAfter=e,this},toString:function(){return this.toQuery()},toSQL:function(i,n){var t,r=this.client.formatter(this);if(t=Array.isArray(this.bindings)?f(this,r):this.bindings&&a(this.bindings)?m(this,r):{method:"raw",sql:this.sql,bindings:c(this.bindings)?[]:[this.bindings]},this._wrappedBefore&&(t.sql=this._wrappedBefore+t.sql),this._wrappedAfter&&(t.sql=t.sql+this._wrappedAfter),t.options=d(this._options,o,{}),this._timeout&&(t.timeout=this._timeout,this._cancelOnTimeout&&(t.cancelOnTimeout=this._cancelOnTimeout)),t.bindings=t.bindings||[],e.containsUndefined(t.bindings)){var s=e.getUndefinedIndices(this.bindings);throw p(t.bindings),new Error("Undefined binding(s) detected for keys [".concat(s,"] when compiling RAW query: ").concat(t.sql))}return t.__knexQueryUid=g.v1(),t}}),require("./interface")(b),e.addQueryContext(b),module.exports=b;
},{"inherits":"Thv4","./helpers":"RYfD","events":"Iny6","debug":"hAF4","lodash":"uinZ","./util/save-async-stack":"dOYu","uuid":"PJ3H","./interface":"v6ms"}],"btJL":[function(require,module,exports) {
function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=u(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=require("./raw"),p=function(t){function n(t,r){var i;return e(this,n),(i=o(this,a(n).call(this,t))).ref=r,i._schema=null,i._alias=null,i}return f(n,s),r(n,[{key:"withSchema",value:function(t){return this._schema=t,this}},{key:"as",value:function(t){return this._alias=t,this}},{key:"toSQL",value:function(){var t=this._schema?"".concat(this._schema,".").concat(this.ref):this.ref,e=this.client.formatter(this),r=e.columnize(t),o=this._alias?"".concat(r," as ").concat(e.wrap(this._alias)):r;return this.set(o,[]),c(a(n.prototype),"toSQL",this).apply(this,arguments)}}]),n}();module.exports=p;
},{"./raw":"WMLC"}],"pSnv":[function(require,module,exports) {
function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(n,e){return!e||"object"!==t(e)&&"function"!=typeof e?o(n):e}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&p(t,n)}function u(t){var n="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||!f(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return c(t,arguments,l(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),p(e,t)})(t)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function c(t,n,e){return(c=i()?Reflect.construct:function(t,n,e){var o=[null];o.push.apply(o,n);var r=new(Function.bind.apply(t,o));return e&&p(r,e.prototype),r}).apply(null,arguments)}function f(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function p(t,n){return(p=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var a=function(t){function o(t){var r;return n(this,o),(r=e(this,l(o).call(this,t))).name="KnexTimeoutError",r}return r(o,u(Error)),o}();function s(t,n){return new Promise(function(e,o){var r=setTimeout(function(){o(new a("operation timed out"))},n);t.then(function(t){clearTimeout(r),e(t)},function(t){clearTimeout(r),o(t)})})}module.exports.KnexTimeoutError=a,module.exports.timeout=s;
},{}],"EamV":[function(require,module,exports) {
var process = require("process");
var n=require("process");function e(e,r,t,c){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,l,u=arguments.length;switch(u){case 0:case 1:return n.nextTick(e);case 2:return n.nextTick(function(){e.call(null,r)});case 3:return n.nextTick(function(){e.call(null,r,t)});case 4:return n.nextTick(function(){e.call(null,r,t,c)});default:for(i=new Array(u-1),l=0;l<i.length;)i[l++]=arguments[l];return n.nextTick(function(){e.apply(null,i)})}}void 0===n||!n.version||0===n.version.indexOf("v0.")||0===n.version.indexOf("v1.")&&0!==n.version.indexOf("v1.8.")?module.exports={nextTick:e}:module.exports=n;
},{"process":"FeV4"}],"YqKg":[function(require,module,exports) {
module.exports=require("events").EventEmitter;
},{"events":"Iny6"}],"v6q9":[function(require,module,exports) {

var r=require("buffer"),e=r.Buffer;function n(r,e){for(var n in r)e[n]=r[n]}function o(r,n,o){return e(r,n,o)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?module.exports=r:(n(r,exports),exports.Buffer=o),n(e,o),o.from=function(r,n,o){if("number"==typeof r)throw new TypeError("Argument must not be a number");return e(r,n,o)},o.alloc=function(r,n,o){if("number"!=typeof r)throw new TypeError("Argument must be a number");var f=e(r);return void 0!==n?"string"==typeof o?f.fill(n,o):f.fill(n):f.fill(0),f},o.allocUnsafe=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return e(r)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)};
},{"buffer":"FaCw"}],"jHeR":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer;function t(r){return Array.isArray?Array.isArray(r):"[object Array]"===a(r)}function e(r){return"boolean"==typeof r}function n(r){return null===r}function o(r){return null==r}function i(r){return"number"==typeof r}function u(r){return"string"==typeof r}function s(r){return"symbol"==typeof r}function f(r){return void 0===r}function p(r){return"[object RegExp]"===a(r)}function c(r){return"object"==typeof r&&null!==r}function l(r){return"[object Date]"===a(r)}function y(r){return"[object Error]"===a(r)||r instanceof Error}function x(r){return"function"==typeof r}function b(r){return null===r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||"symbol"==typeof r||void 0===r}function a(r){return Object.prototype.toString.call(r)}exports.isArray=t,exports.isBoolean=e,exports.isNull=n,exports.isNullOrUndefined=o,exports.isNumber=i,exports.isString=u,exports.isSymbol=s,exports.isUndefined=f,exports.isRegExp=p,exports.isObject=c,exports.isDate=l,exports.isError=y,exports.isFunction=x,exports.isPrimitive=b,exports.isBuffer=r.isBuffer;
},{"buffer":"FaCw"}],"XxoU":[function(require,module,exports) {

"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var n=require("safe-buffer").Buffer,e=require("util");function i(t,n,e){t.copy(n,e)}module.exports=function(){function e(){t(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(t){var n={data:t,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(t){if(0===this.length)return"";for(var n=this.head,e=""+n.data;n=n.next;)e+=t+n.data;return e},e.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e=n.allocUnsafe(t>>>0),h=this.head,a=0;h;)i(h.data,e,a),a+=h.data.length,h=h.next;return e},e}(),e&&e.inspect&&e.inspect.custom&&(module.exports.prototype[e.inspect.custom]=function(){var t=e.inspect({length:this.length});return this.constructor.name+" "+t});
},{"safe-buffer":"v6q9","util":"vBel"}],"f5tQ":[function(require,module,exports) {
"use strict";var t=require("process-nextick-args");function e(e,a){var r=this,s=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return s||d?(a?a(e):!e||this._writableState&&this._writableState.errorEmitted||t.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!a&&e?(t.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):a&&a(e)}),this)}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(t,e){t.emit("error",e)}module.exports={destroy:e,undestroy:a};
},{"process-nextick-args":"EamV"}],"wEsO":[function(require,module,exports) {
var global = arguments[3];
var r=arguments[3];function t(r,t){if(e("noDeprecation"))return r;var n=!1;return function(){if(!n){if(e("throwDeprecation"))throw new Error(t);e("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return r.apply(this,arguments)}}function e(t){try{if(!r.localStorage)return!1}catch(n){return!1}var e=r.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}module.exports=t;
},{}],"HHRY":[function(require,module,exports) {
var process = require("process");

var global = arguments[3];
var e=require("process"),t=arguments[3],n=require("process-nextick-args");function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){W(t,e)}}module.exports=g;var o,s=n.nextTick;g.WritableState=y;var f=require("core-util-is");f.inherits=require("inherits");var u={deprecate:require("util-deprecate")},a=require("./internal/streams/stream"),c=require("safe-buffer").Buffer,l=t.Uint8Array||function(){};function d(e){return c.from(e)}function h(e){return c.isBuffer(e)||e instanceof l}var b,p=require("./internal/streams/destroy");function w(){}function y(e,t){o=o||require("./_stream_duplex"),e=e||{};var n=t instanceof o;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,s=e.writableHighWaterMark,f=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(s||0===s)?s:f,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){S(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function g(e){if(o=o||require("./_stream_duplex"),!(b.call(g,this)||this instanceof o))return new g(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function k(e,t){var r=new Error("write after end");e.emit("error",r),n.nextTick(t,r)}function v(e,t,r,i){var o=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),n.nextTick(i,s),o=!1),o}function q(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,n)),t}function _(e,t,n,r,i,o){if(!n){var s=q(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var f=t.objectMode?1:r.length;t.length+=f;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else m(e,t,!1,f,r,i,o);return u}function m(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function R(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(o(i),e._writableState.errorEmitted=!0,e.emit("error",i),T(e,t))}function x(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function S(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(x(n),t)R(e,n,r,t,i);else{var o=E(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||j(e,n),r?s(M,e,n,o,i):M(e,n,o,i)}}function M(e,t,n,r){n||B(e,t),t.pendingcb--,r(),T(e,t)}function B(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function j(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var f=0,u=!0;n;)o[f]=n,n.isBuf||(u=!1),n=n.next,f+=1;o.allBuffers=u,m(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var a=n.chunk,c=n.encoding,l=n.callback;if(m(e,t,!1,t.objectMode?1:a.length,a,c,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),T(e,t)})}function P(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,n.nextTick(C,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function T(e,t){var n=E(t);return n&&(P(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function F(e,t,r){t.ending=!0,T(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function W(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}f.inherits(g,a),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(b=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(e){return!!b.call(this,e)||this===g&&(e&&e._writableState instanceof y)}})):b=function(e){return e instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&h(e);return o&&!c.isBuffer(e)&&(e=d(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=w),r.ended?k(this,n):(o||v(this,r,e,n))&&(r.pendingcb++,i=_(this,r,o,e,t,n)),i},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||j(this,e))},g.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||F(this,r,n)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),g.prototype.destroy=p.destroy,g.prototype._undestroy=p.undestroy,g.prototype._destroy=function(e,t){this.end(),t(e)};
},{"process-nextick-args":"EamV","core-util-is":"jHeR","inherits":"Thv4","util-deprecate":"wEsO","./internal/streams/stream":"YqKg","safe-buffer":"v6q9","./internal/streams/destroy":"f5tQ","./_stream_duplex":"RGIb","process":"FeV4"}],"RGIb":[function(require,module,exports) {
"use strict";var e=require("process-nextick-args"),t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=l;var r=require("core-util-is");r.inherits=require("inherits");var i=require("./_stream_readable"),a=require("./_stream_writable");r.inherits(l,i);for(var o=t(a.prototype),s=0;s<o.length;s++){var n=o[s];l.prototype[n]||(l.prototype[n]=a.prototype[n])}function l(e){if(!(this instanceof l))return new l(e);i.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||e.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),l.prototype._destroy=function(t,r){this.push(null),this.end(),e.nextTick(r,t)};
},{"process-nextick-args":"EamV","core-util-is":"jHeR","inherits":"Thv4","./_stream_readable":"k2tG","./_stream_writable":"HHRY"}],"VJHU":[function(require,module,exports) {

"use strict";var t=require("safe-buffer").Buffer,e=t.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(i){var a=s(i);if("string"!=typeof a&&(t.isEncoding===e||!e(i)))throw new Error("Unknown encoding: "+i);return a||i}function a(e){var s;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=c,this.end=f,s=4;break;case"utf8":this.fillLast=l,s=4;break;case"base64":this.text=d,this.end=g,s=3;break;default:return this.write=N,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(s)}function r(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function n(t,e,s){var i=e.length-1;if(i<s)return 0;var a=r(e[i]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(t.lastNeed=a-2),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(2===a?a=0:t.lastNeed=a-3),a):0}function h(t,e,s){if(128!=(192&e[0]))return t.lastNeed=0,"ï¿½";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"ï¿½";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"ï¿½"}}function l(t){var e=this.lastTotal-this.lastNeed,s=h(this,t,e);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){var s=n(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=s;var i=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function o(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"ï¿½":e}function c(t,e){if((t.length-e)%2==0){var s=t.toString("utf16le",e);if(s){var i=s.charCodeAt(s.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function f(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,s)}return e}function d(t,e){var s=(t.length-e)%3;return 0===s?t.toString("base64",e):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-s))}function g(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function N(t){return t.toString(this.encoding)}function v(t){return t&&t.length?this.write(t):""}exports.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,s;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?e?e+this.text(t,s):this.text(t,s):e||""},a.prototype.end=o,a.prototype.text=u,a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};
},{"safe-buffer":"v6q9"}],"k2tG":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process"),n=require("process-nextick-args");module.exports=_;var r,i=require("isarray");_.ReadableState=w;var a=require("events").EventEmitter,d=function(e,t){return e.listeners(t).length},o=require("./internal/streams/stream"),s=require("safe-buffer").Buffer,u=e.Uint8Array||function(){};function l(e){return s.from(e)}function h(e){return s.isBuffer(e)||e instanceof u}var p=require("core-util-is");p.inherits=require("inherits");var f=require("util"),c=void 0;c=f&&f.debuglog?f.debuglog("stream"):function(){};var g,b=require("./internal/streams/BufferList"),m=require("./internal/streams/destroy");p.inherits(_,o);var v=["error","close","destroy","pause","resume"];function y(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?i(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function w(e,t){e=e||{};var n=t instanceof(r=r||require("./_stream_duplex"));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,a=e.readableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:d,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(g||(g=require("string_decoder/").StringDecoder),this.decoder=new g(e.encoding),this.encoding=e.encoding)}function _(e){if(r=r||require("./_stream_duplex"),!(this instanceof _))return new _(e);this._readableState=new w(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function M(e,t,n,r,i){var a,d=e._readableState;null===t?(d.reading=!1,x(e,d)):(i||(a=k(d,t)),a?e.emit("error",a):d.objectMode||t&&t.length>0?("string"==typeof t||d.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=l(t)),r?d.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):S(e,d,t,!0):d.ended?e.emit("error",new Error("stream.push() after EOF")):(d.reading=!1,d.decoder&&!n?(t=d.decoder.write(t),d.objectMode||0!==t.length?S(e,d,t,!1):C(e,d)):S(e,d,t,!1))):r||(d.reading=!1));return j(d)}function S(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&q(e)),C(e,t)}function k(e,t){var n;return h(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function j(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=m.destroy,_.prototype._undestroy=m.undestroy,_.prototype._destroy=function(e,t){this.push(null),t(e)},_.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),M(this,e,t,!1,n)},_.prototype.unshift=function(e){return M(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){return g||(g=require("string_decoder/").StringDecoder),this._readableState.decoder=new g(e),this._readableState.encoding=e,this};var R=8388608;function E(e){return e>=R?e=R:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function L(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=E(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,q(e)}}function q(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(W,e):W(e))}function W(e){c("emit readable"),e.emit("readable"),B(e)}function C(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(D,e,t))}function D(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(c("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function O(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&d(e,"data")&&(t.flowing=!0,B(e))}}function T(e){c("readable nexttick read 0"),e.read(0)}function U(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(P,e,t))}function P(e,t){t.reading||(c("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function H(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=I(e,t.buffer,t.decoder),n);var n}function I(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?A(e,t):F(e,t),r}function A(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var a=n.data,d=e>a.length?a.length:e;if(d===a.length?i+=a:i+=a.slice(0,e),0===(e-=d)){d===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(d));break}++r}return t.length-=r,i}function F(e,t){var n=s.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var a=r.data,d=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,d),0===(e-=d)){d===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(d));break}++i}return t.length-=i,n}function z(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(G,t,e))}function G(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function J(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}_.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?z(this):q(this),null;if(0===(e=L(e,t))&&t.ended)return 0===t.length&&z(this),null;var r,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=L(n,t))),null===(r=e>0?H(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&z(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(e,r){var i=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,c("pipe count=%d opts=%j",a.pipesCount,r);var o=(!r||!1!==r.end)&&e!==t.stdout&&e!==t.stderr?u:v;function s(t,n){c("onunpipe"),t===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,c("cleanup"),e.removeListener("close",b),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",g),e.removeListener("unpipe",s),i.removeListener("end",u),i.removeListener("end",v),i.removeListener("data",f),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}a.endEmitted?n.nextTick(o):i.once("end",o),e.on("unpipe",s);var l=O(i);e.on("drain",l);var h=!1;var p=!1;function f(t){c("ondata"),p=!1,!1!==e.write(t)||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==J(a.pipes,e))&&!h&&(c("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,p=!0),i.pause())}function g(t){c("onerror",t),v(),e.removeListener("error",g),0===d(e,"error")&&e.emit("error",t)}function b(){e.removeListener("finish",m),v()}function m(){c("onfinish"),e.removeListener("close",b),v()}function v(){c("unpipe"),i.unpipe(e)}return i.on("data",f),y(e,"error",g),e.once("close",b),e.once("finish",m),e.emit("pipe",i),a.flowing||(c("pipe resume"),i.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var d=J(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},_.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&q(this):n.nextTick(T,this))}return r},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!0,U(this,e)),this},_.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(c("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<v.length;a++)e.on(v[a],this.emit.bind(this,v[a]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=H;
},{"process-nextick-args":"EamV","isarray":"bI4M","events":"Iny6","./internal/streams/stream":"YqKg","safe-buffer":"v6q9","core-util-is":"jHeR","inherits":"Thv4","util":"vBel","./internal/streams/BufferList":"XxoU","./internal/streams/destroy":"f5tQ","./_stream_duplex":"RGIb","string_decoder/":"VJHU","process":"FeV4"}],"nvmr":[function(require,module,exports) {
"use strict";module.exports=n;var t=require("./_stream_duplex"),r=require("core-util-is");function e(t,r){var e=this._transformState;e.transforming=!1;var n=e.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));e.writechunk=null,e.writecb=null,null!=r&&this.push(r),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function n(r){if(!(this instanceof n))return new n(r);t.call(this,r),this._transformState={afterTransform:e.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&("function"==typeof r.transform&&(this._transform=r.transform),"function"==typeof r.flush&&(this._flush=r.flush)),this.on("prefinish",i)}function i(){var t=this;"function"==typeof this._flush?this._flush(function(r,e){a(t,r,e)}):a(this,null,null)}function a(t,r,e){if(r)return t.emit("error",r);if(null!=e&&t.push(e),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=require("inherits"),r.inherits(n,t),n.prototype.push=function(r,e){return this._transformState.needTransform=!1,t.prototype.push.call(this,r,e)},n.prototype._transform=function(t,r,e){throw new Error("_transform() is not implemented")},n.prototype._write=function(t,r,e){var n=this._transformState;if(n.writecb=e,n.writechunk=t,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},n.prototype._read=function(t){var r=this._transformState;null!==r.writechunk&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0},n.prototype._destroy=function(r,e){var n=this;t.prototype._destroy.call(this,r,function(t){e(t),n.emit("close")})};
},{"./_stream_duplex":"RGIb","core-util-is":"jHeR","inherits":"Thv4"}],"eUvm":[function(require,module,exports) {
"use strict";module.exports=i;var r=require("./_stream_transform"),e=require("core-util-is");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}e.inherits=require("inherits"),e.inherits(i,r),i.prototype._transform=function(r,e,i){i(null,r)};
},{"./_stream_transform":"nvmr","core-util-is":"jHeR","inherits":"Thv4"}],"zBJZ":[function(require,module,exports) {
exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js");
},{"./lib/_stream_readable.js":"k2tG","./lib/_stream_writable.js":"HHRY","./lib/_stream_duplex.js":"RGIb","./lib/_stream_transform.js":"nvmr","./lib/_stream_passthrough.js":"eUvm"}],"k7rF":[function(require,module,exports) {
module.exports=require("./lib/_stream_writable.js");
},{"./lib/_stream_writable.js":"HHRY"}],"P9s1":[function(require,module,exports) {
module.exports=require("./lib/_stream_duplex.js");
},{"./lib/_stream_duplex.js":"RGIb"}],"Vui3":[function(require,module,exports) {
module.exports=require("./readable").Transform;
},{"./readable":"zBJZ"}],"QLSP":[function(require,module,exports) {
module.exports=require("./readable").PassThrough;
},{"./readable":"zBJZ"}],"kPjL":[function(require,module,exports) {
module.exports=n;var e=require("events").EventEmitter,r=require("inherits");function n(){e.call(this)}r(n,e),n.Readable=require("readable-stream/readable.js"),n.Writable=require("readable-stream/writable.js"),n.Duplex=require("readable-stream/duplex.js"),n.Transform=require("readable-stream/transform.js"),n.PassThrough=require("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(r,n){var o=this;function t(e){r.writable&&!1===r.write(e)&&o.pause&&o.pause()}function s(){o.readable&&o.resume&&o.resume()}o.on("data",t),r.on("drain",s),r._isStdio||n&&!1===n.end||(o.on("end",a),o.on("close",u));var i=!1;function a(){i||(i=!0,r.end())}function u(){i||(i=!0,"function"==typeof r.destroy&&r.destroy())}function d(r){if(l(),0===e.listenerCount(this,"error"))throw r}function l(){o.removeListener("data",t),r.removeListener("drain",s),o.removeListener("end",a),o.removeListener("close",u),o.removeListener("error",d),r.removeListener("error",d),o.removeListener("end",l),o.removeListener("close",l),r.removeListener("close",l)}return o.on("error",d),r.on("error",d),o.on("end",l),o.on("close",l),r.on("close",l),r.emit("pipe",o),r};
},{"events":"Iny6","inherits":"Thv4","readable-stream/readable.js":"zBJZ","readable-stream/writable.js":"k7rF","readable-stream/duplex.js":"P9s1","readable-stream/transform.js":"Vui3","readable-stream/passthrough.js":"QLSP"}],"Q6FW":[function(require,module,exports) {
var e,n=require("./util/timeout"),t=n.KnexTimeoutError,r=require("./util/timeout"),i=r.timeout;function u(e,n){this.client=e,this.builder=n,this.queries=[],this.connection=void 0}Object.assign(u.prototype,{run:function(){var e=this;return this.ensureConnection(function(n){e.connection=n,e.client.emit("start",e.builder),e.builder.emit("start",e.builder);var t=e.builder.toSQL();return e.builder._debug&&e.client.logger.debug(t),Array.isArray(t)?e.queryArray(t):e.query(t)}).catch(function(n){throw e.builder._events&&e.builder._events.error&&e.builder.emit("error",n),n}).then(function(n){return e.builder.emit("end"),n})},stream:function(n,t){1===arguments.length&&"function"==typeof n&&(t=n,n={});var r="function"==typeof t;e=e||require("stream").PassThrough;var i=this,u=new e({objectMode:!0}),c=!1,o=this.ensureConnection(function(e){c=!0,i.connection=e;try{var t=i.builder.toSQL();if(Array.isArray(t)&&r)throw new Error("The stream may only be used with a single query statement.");return i.client.stream(i.connection,t,u,n)}catch(o){throw u.emit("error",o),o}});return r?(t(u),o):(o.catch(function(e){c||u.emit("error",e)}),u)},pipe:function(e,n){return this.stream(n).pipe(e)},query:function(e){var n,r,u,c,o,s=this;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return n=this.connection,r=n.__knexUid,u=n.__knexTxId,this.builder.emit("query",Object.assign({__knexUid:r,__knexTxId:u},e)),c=this,o=this.client.query(this.connection,e),e.timeout&&(o=i(o,e.timeout)),a.abrupt("return",o.then(function(e){return s.client.processResponse(e,c)}).then(function(n){var t=s.builder.queryContext(),r=s.client.postProcessResponse(n,t);return s.builder.emit("query-response",r,Object.assign({__knexUid:s.connection.__knexUid},e),s.builder),s.client.emit("query-response",r,Object.assign({__knexUid:s.connection.__knexUid},e),s.builder),r}).catch(function(n){if(!(n instanceof t))return Promise.reject(n);var r,i=e.timeout,u=e.sql,c=e.bindings;return e.cancelOnTimeout?r=s.client.cancelQuery(s.connection):(s.connection.__knex__disposed=n,r=Promise.resolve()),r.catch(function(e){throw s.connection.__knex__disposed=n,Object.assign(e,{message:"After query timeout of ".concat(i,"ms exceeded, cancelling of query failed."),sql:u,bindings:c,timeout:i})}).then(function(){throw Object.assign(n,{message:"Defined query timeout of ".concat(i,"ms exceeded when running query."),sql:u,bindings:c,timeout:i})})}).catch(function(n){throw s.builder.emit("query-error",n,Object.assign({__knexUid:s.connection.__knexUid},e)),n}));case 6:case"end":return a.stop()}},null,this)},queryArray:function(e){var n,t,r,i,u,c,o;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:if(1!==e.length){s.next=2;break}return s.abrupt("return",this.query(e[0]));case 2:n=[],t=!0,r=!1,i=void 0,s.prev=6,u=e[Symbol.iterator]();case 8:if(t=(c=u.next()).done){s.next=18;break}return o=c.value,s.t0=n,s.next=13,regeneratorRuntime.awrap(this.query(o));case 13:s.t1=s.sent,s.t0.push.call(s.t0,s.t1);case 15:t=!0,s.next=8;break;case 18:s.next=24;break;case 20:s.prev=20,s.t2=s.catch(6),r=!0,i=s.t2;case 24:s.prev=24,s.prev=25,t||null==u.return||u.return();case 27:if(s.prev=27,!r){s.next=30;break}throw i;case 30:return s.finish(27);case 31:return s.finish(24);case 32:return s.abrupt("return",n);case 33:case"end":return s.stop()}},null,this,[[6,20,24,32],[25,,27,31]])},ensureConnection:function(e){var n=this;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.builder._connection){r.next=2;break}return r.abrupt("return",e(this.builder._connection));case 2:if(!this.connection){r.next=4;break}return r.abrupt("return",e(this.connection));case 4:return r.abrupt("return",this.client.acquireConnection().catch(function(e){if(!(e instanceof t))return Promise.reject(e);throw n.builder&&(e.sql=n.builder.sql,e.bindings=n.builder.bindings),e}).then(function(t){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,regeneratorRuntime.awrap(e(t));case 3:return r.abrupt("return",r.sent);case 4:return r.prev=4,r.next=7,regeneratorRuntime.awrap(n.client.releaseConnection(n.connection));case 7:return r.finish(4);case 8:case"end":return r.stop()}},null,null,[[0,,4,8]])}));case 5:case"end":return r.stop()}},null,this)}}),module.exports=u;
},{"./util/timeout":"pSnv","stream":"kPjL"}],"dDZw":[function(require,module,exports) {
"use strict";var r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;function n(r){if(null==r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function o(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(r){return t[r]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(r){n[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(o){return!1}}module.exports=o()?Object.assign:function(o,c){for(var a,i,s=n(o),f=1;f<arguments.length;f++){for(var u in a=Object(arguments[f]))t.call(a,u)&&(s[u]=a[u]);if(r){i=r(a);for(var b=0;b<i.length;b++)e.call(a,i[b])&&(s[i[b]]=a[i[b]])}}return s};
},{}],"kOKI":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process"),r=/%[sdj%]/g;exports.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,s=o.length,u=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return e}}),c=o[n];n<s;c=o[++n])h(c)||!z(c)?u+=" "+c:u+=" "+i(c);return u},exports.deprecate=function(r,n){if(j(e.process))return function(){return exports.deprecate(r,n).apply(this,arguments)};if(!0===t.noDeprecation)return r;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var n,o={};function i(e,t){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),x(t)?r.showHidden=t:t&&exports._extend(r,t),j(r.showHidden)&&(r.showHidden=!1),j(r.depth)&&(r.depth=2),j(r.colors)&&(r.colors=!1),j(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),p(r,e,r.depth)}function s(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function u(e,t){return e}function c(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function p(e,t,r){if(e.customInspect&&t&&D(t.inspect)&&t.inspect!==exports.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return v(n)||(n=p(e,n,r)),n}var o=l(e,t);if(o)return o;var i=Object.keys(t),s=c(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),E(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return a(t);if(0===i.length){if(D(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(O(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(w(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return a(t)}var x,h="",b=!1,m=["{","}"];(d(t)&&(b=!0,m=["[","]"]),D(t))&&(h=" [Function"+(t.name?": "+t.name:"")+"]");return O(t)&&(h=" "+RegExp.prototype.toString.call(t)),w(t)&&(h=" "+Date.prototype.toUTCString.call(t)),E(t)&&(h=" "+a(t)),0!==i.length||b&&0!=t.length?r<0?O(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),x=b?f(e,t,r,s,i):i.map(function(n){return g(e,t,r,s,n,b)}),e.seen.pop(),y(x,h,m)):m[0]+h+m[1]}function l(e,t){if(j(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return m(t)?e.stylize(""+t,"number"):x(t)?e.stylize(""+t,"boolean"):h(t)?e.stylize("null","null"):void 0}function a(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,o){for(var i=[],s=0,u=t.length;s<u;++s)$(t,String(s))?i.push(g(e,t,r,n,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(g(e,t,r,n,o,!0))}),i}function g(e,t,r,n,o,i){var s,u,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),$(n,o)||(s="["+o+"]"),u||(e.seen.indexOf(c.value)<0?(u=h(r)?p(e,c.value,null):p(e,c.value,r-1)).indexOf("\n")>-1&&(u=i?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),j(s)){if(i&&o.match(/^\d+$/))return u;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function y(e,t,r){return e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function x(e){return"boolean"==typeof e}function h(e){return null===e}function b(e){return null==e}function m(e){return"number"==typeof e}function v(e){return"string"==typeof e}function S(e){return"symbol"==typeof e}function j(e){return void 0===e}function O(e){return z(e)&&"[object RegExp]"===A(e)}function z(e){return"object"==typeof e&&null!==e}function w(e){return z(e)&&"[object Date]"===A(e)}function E(e){return z(e)&&("[object Error]"===A(e)||e instanceof Error)}function D(e){return"function"==typeof e}function N(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function A(e){return Object.prototype.toString.call(e)}function J(e){return e<10?"0"+e.toString(10):e.toString(10)}exports.debuglog=function(e){if(j(n)&&(n=""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(n)){var r=t.pid;o[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,r,t)}}else o[e]=function(){};return o[e]},exports.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=d,exports.isBoolean=x,exports.isNull=h,exports.isNullOrUndefined=b,exports.isNumber=m,exports.isString=v,exports.isSymbol=S,exports.isUndefined=j,exports.isRegExp=O,exports.isObject=z,exports.isDate=w,exports.isError=E,exports.isFunction=D,exports.isPrimitive=N,exports.isBuffer=require("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function H(){var e=new Date,t=[J(e.getHours()),J(e.getMinutes()),J(e.getSeconds())].join(":");return[e.getDate(),R[e.getMonth()],t].join(" ")}function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}exports.log=function(){console.log("%s - %s",H(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,t){if(!t||!z(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};
},{"./support/isBuffer":"he55","inherits":"fBFh","process":"FeV4"}],"v0Hn":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],e=require("object-assign");function r(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function n(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var i=require("util/"),o=Object.prototype.hasOwnProperty,u=Array.prototype.slice,a="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function f(e){return!n(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var s=module.exports=q,l=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(i.isFunction(t)){if(a)return t.name;var e=t.toString().match(l);return e&&e[1]}}function g(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function E(t){if(a||!i.isFunction(t))return i.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function h(t){return g(E(t.actual),128)+" "+t.operator+" "+g(E(t.expected),128)}function y(t,e,r,n,i){throw new s.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function q(t,e){t||y(t,!0,e,"==",s.ok)}function d(t,e,o,u){if(t===e)return!0;if(n(t)&&n(e))return 0===r(t,e);if(i.isDate(t)&&i.isDate(e))return t.getTime()===e.getTime();if(i.isRegExp(t)&&i.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(f(t)&&f(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(n(t)!==n(e))return!1;var a=(u=u||{actual:[],expected:[]}).actual.indexOf(t);return-1!==a&&a===u.expected.indexOf(e)||(u.actual.push(t),u.expected.push(e),b(t,e,o,u))}return o?t===e:t==e}function m(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function b(t,e,r,n){if(null==t||null==e)return!1;if(i.isPrimitive(t)||i.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=m(t),a=m(e);if(o&&!a||!o&&a)return!1;if(o)return d(t=u.call(t),e=u.call(e),r);var c,f,s=A(t),l=A(e);if(s.length!==l.length)return!1;for(s.sort(),l.sort(),f=s.length-1;f>=0;f--)if(s[f]!==l[f])return!1;for(f=s.length-1;f>=0;f--)if(!d(t[c=s[f]],e[c],r,n))return!1;return!0}function v(t,e,r){d(t,e,!0)&&y(t,e,r,"notDeepStrictEqual",v)}function x(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(r){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function S(t){var e;try{t()}catch(r){e=r}return e}function w(t,e,r,n){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),o=S(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!o&&y(o,r,"Missing expected exception"+n);var u="string"==typeof n,a=!t&&o&&!r;if((!t&&i.isError(o)&&u&&x(o,r)||a)&&y(o,r,"Got unwanted exception"+n),t&&o&&r&&!x(o,r)||!t&&o)throw o}function O(t,e){t||y(t,!0,e,"==",O)}s.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=h(this),this.generatedMessage=!0);var e=t.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=p(e),o=n.indexOf("\n"+i);if(o>=0){var u=n.indexOf("\n",o+1);n=n.substring(u+1)}this.stack=n}}},i.inherits(s.AssertionError,Error),s.fail=y,s.ok=q,s.equal=function(t,e,r){t!=e&&y(t,e,r,"==",s.equal)},s.notEqual=function(t,e,r){t==e&&y(t,e,r,"!=",s.notEqual)},s.deepEqual=function(t,e,r){d(t,e,!1)||y(t,e,r,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(t,e,r){d(t,e,!0)||y(t,e,r,"deepStrictEqual",s.deepStrictEqual)},s.notDeepEqual=function(t,e,r){d(t,e,!1)&&y(t,e,r,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=v,s.strictEqual=function(t,e,r){t!==e&&y(t,e,r,"===",s.strictEqual)},s.notStrictEqual=function(t,e,r){t===e&&y(t,e,r,"!==",s.notStrictEqual)},s.throws=function(t,e,r){w(!0,t,e,r)},s.doesNotThrow=function(t,e,r){w(!1,t,e,r)},s.ifError=function(t){if(t)throw t},s.strict=e(O,s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var A=Object.keys||function(t){var e=[];for(var r in t)o.call(t,r)&&e.push(r);return e};
},{"object-assign":"dDZw","util/":"kOKI"}],"uQaZ":[function(require,module,exports) {
function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(t)}var t=require("assert");function n(o,t,n){this.schema=n,this.table=o,this.joinType=t,this.and=this,this.clauses=[]}function e(o,t,n,e,r){var s=null;if("function"==typeof n)s={type:"onWrapped",value:n,bool:t};else switch(arguments.length){case 3:s={type:"onRaw",value:n,bool:t};break;case 4:s={type:o,column:n,operator:"=",value:e,bool:t};break;default:s={type:o,column:n,operator:e,value:r,bool:t}}return s}Object.assign(n.prototype,{grouping:"join",on:function(t){if("object"===o(t)&&"function"!=typeof t.toSQL){for(var n=Object.keys(t),r=-1,s="or"===this._bool()?"orOn":"on";++r<n.length;)this[s](n[r],t[n[r]]);return this}var i=e.apply(void 0,["onBasic",this._bool()].concat(Array.prototype.slice.call(arguments)));return i&&this.clauses.push(i),this},using:function(o){return this.clauses.push({type:"onUsing",column:o,bool:this._bool()})},orOn:function(o,t,n){return this._bool("or").on.apply(this,arguments)},onVal:function(t){if("object"===o(t)&&"function"!=typeof t.toSQL){for(var n=Object.keys(t),r=-1,s="or"===this._bool()?"orOnVal":"onVal";++r<n.length;)this[s](n[r],t[n[r]]);return this}var i=e.apply(void 0,["onVal",this._bool()].concat(Array.prototype.slice.call(arguments)));return i&&this.clauses.push(i),this},andOnVal:function(){return this.onVal.apply(this,arguments)},orOnVal:function(){var o;return(o=this._bool("or")).onVal.apply(o,arguments)},onBetween:function(o,n){return t(Array.isArray(n),"The second argument to onBetween must be an array."),t(2===n.length,"You must specify 2 values for the onBetween clause"),this.clauses.push({type:"onBetween",column:o,value:n,bool:this._bool(),not:this._not()}),this},onNotBetween:function(o,t){return this._not(!0).onBetween(o,t)},orOnBetween:function(o,t){return this._bool("or").onBetween(o,t)},orOnNotBetween:function(o,t){return this._bool("or")._not(!0).onBetween(o,t)},onIn:function(o,t){return Array.isArray(t)&&0===t.length?this.on(1,"=",0):(this.clauses.push({type:"onIn",column:o,value:t,not:this._not(),bool:this._bool()}),this)},onNotIn:function(o,t){return this._not(!0).onIn(o,t)},orOnIn:function(o,t){return this._bool("or").onIn(o,t)},orOnNotIn:function(o,t){return this._bool("or")._not(!0).onIn(o,t)},onNull:function(o){return this.clauses.push({type:"onNull",column:o,not:this._not(),bool:this._bool()}),this},orOnNull:function(o){return this._bool("or").onNull(o)},onNotNull:function(o){return this._not(!0).onNull(o)},orOnNotNull:function(o){return this._not(!0)._bool("or").onNull(o)},onExists:function(o){return this.clauses.push({type:"onExists",value:o,not:this._not(),bool:this._bool()}),this},orOnExists:function(o){return this._bool("or").onExists(o)},onNotExists:function(o){return this._not(!0).onExists(o)},orOnNotExists:function(o){return this._not(!0)._bool("or").onExists(o)},type:function(o){return this.joinType=o,this},_bool:function(o){if(1===arguments.length)return this._boolFlag=o,this;var t=this._boolFlag||"and";return this._boolFlag="and",t},_not:function(o){if(1===arguments.length)return this._notFlag=o,this;var t=this._notFlag;return this._notFlag=!1,t}}),Object.defineProperty(n.prototype,"or",{get:function(){return this._bool("or")}}),n.prototype.andOn=n.prototype.on,n.prototype.andOnIn=n.prototype.onIn,n.prototype.andOnNotIn=n.prototype.onNotIn,n.prototype.andOnNull=n.prototype.onNull,n.prototype.andOnNotNull=n.prototype.onNotNull,n.prototype.andOnExists=n.prototype.onExists,n.prototype.andOnNotExists=n.prototype.onNotExists,n.prototype.andOnBetween=n.prototype.onBetween,n.prototype.andOnNotBetween=n.prototype.onNotBetween,module.exports=n;
},{"assert":"v0Hn"}],"BmHP":[function(require,module,exports) {
module.exports={lockMode:{forShare:"forShare",forUpdate:"forUpdate"},waitMode:{skipLocked:"skipLocked",noWait:"noWait"}};
},{}],"kl48":[function(require,module,exports) {
function t(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function n(t,n){return r(t)||i(t,n)||e()}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(t,n){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var e=[],i=!0,r=!1,o=void 0;try{for(var s,h=t[Symbol.iterator]();!(i=(s=h.next()).done)&&(e.push(s.value),!n||e.length!==n);i=!0);}catch(u){r=!0,o=u}finally{try{i||null==h.return||h.return()}finally{if(r)throw o}}return e}}function r(t){if(Array.isArray(t))return t}var o=require("assert"),s=require("inherits"),h=require("events"),u=h.EventEmitter,a=require("../raw"),l=require("../helpers"),c=require("./joinclause"),p=require("lodash"),g=p.assign,f=p.clone,_=p.each,y=p.isBoolean,w=p.isEmpty,v=p.isFunction,d=p.isNil,m=p.isNumber,b=p.isObject,N=p.isString,B=p.isUndefined,W=p.tail,j=p.toArray,E=p.reject,A=p.includes,k=p.last,x=p.isPlainObject,C=require("../util/save-async-stack"),I=require("./constants"),R=I.lockMode,H=I.waitMode;function S(t){this.client=t,this.and=this,this._single={},this._statements=[],this._method="select",t.config&&(C(this,5),this._debug=t.config.debug),this._joinFlag="inner",this._boolFlag="and",this._notFlag=!1,this._asColumnFlag=!1}s(S,u);var q=function(t,n,e){if("string"!=typeof t)throw new Error("".concat(e,"() first argument must be a string"));if(!("function"==typeof n||n instanceof S||n instanceof a))throw new Error("".concat(e,"() second argument must be a function / QueryBuilder or a raw"))};g(S.prototype,{toString:function(){return this.toQuery()},toSQL:function(t,n){return this.client.queryCompiler(this).toSQL(t||this._method,n)},clone:function(){var t=new this.constructor(this.client);return t._method=this._method,t._single=f(this._single),t._statements=f(this._statements),t._debug=this._debug,B(this._options)||(t._options=f(this._options)),B(this._queryContext)||(t._queryContext=f(this._queryContext)),B(this._connection)||(t._connection=this._connection),t},timeout:function(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cancel;return m(t)&&t>0&&(this._timeout=t,n&&(this.client.assertCanCancelQuery(),this._cancelOnTimeout=!0)),this},with:function(t,n){return q(t,n,"with"),this.withWrapped(t,n)},withWrapped:function(t,n){return this._statements.push({grouping:"with",type:"withWrapped",alias:t,value:n}),this},withRecursive:function(t,n){return q(t,n,"withRecursive"),this.withRecursiveWrapped(t,n)},withRecursiveWrapped:function(t,n){return this.withWrapped(t,n),this._statements[this._statements.length-1].recursive=!0,this},columns:function(t){return t||0===t?(this._statements.push({grouping:"columns",value:l.normalizeArr.apply(null,arguments)}),this):this},as:function(t){return this._single.as=t,this},withSchema:function(t){return this._single.schema=t,this},table:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._single.table=t,this._single.only=!0===n.only,this},distinct:function(){return this._statements.push({grouping:"columns",value:l.normalizeArr.apply(null,arguments),distinct:!0}),this},distinctOn:function(){var t=l.normalizeArr.apply(null,arguments);if(w(t))throw new Error("distinctOn requires atleast on argument");return this._statements.push({grouping:"columns",value:t,distinctOn:!0}),this},join:function(t,n){var e,i=this._single.schema,r=this._joinType();return"function"==typeof n?(e=new c(t,r,i),n.call(e,e)):"raw"===r?e=new c(this.client.raw(t,n),"raw"):(e=new c(t,r,t instanceof S?void 0:i),arguments.length>1&&e.on.apply(e,j(arguments).slice(1))),this._statements.push(e),this},innerJoin:function(){return this._joinType("inner").join.apply(this,arguments)},leftJoin:function(){return this._joinType("left").join.apply(this,arguments)},leftOuterJoin:function(){return this._joinType("left outer").join.apply(this,arguments)},rightJoin:function(){return this._joinType("right").join.apply(this,arguments)},rightOuterJoin:function(){return this._joinType("right outer").join.apply(this,arguments)},outerJoin:function(){return this._joinType("outer").join.apply(this,arguments)},fullOuterJoin:function(){return this._joinType("full outer").join.apply(this,arguments)},crossJoin:function(){return this._joinType("cross").join.apply(this,arguments)},joinRaw:function(){return this._joinType("raw").join.apply(this,arguments)},where:function(t,n,e){if(!1===t||!0===t)return this.where(1,"=",t?1:0);if("function"==typeof t)return this.whereWrapped(t);if(t instanceof a&&1===arguments.length)return this.whereRaw(t);if(b(t)&&!(t instanceof a))return this._objectWhere(t);if(2===arguments.length&&(e=n,n="=",null===e))return this.whereNull(t);var i="".concat(n).toLowerCase().trim();if(3===arguments.length){if("in"===i||"not in"===i)return this._not("not in"===i).whereIn(arguments[0],arguments[2]);if("between"===i||"not between"===i)return this._not("not between"===i).whereBetween(arguments[0],arguments[2])}return null!==e||"is"!==i&&"is not"!==i?(this._statements.push({grouping:"where",type:"whereBasic",column:t,operator:n,value:e,not:this._not(),bool:this._bool(),asColumn:this._asColumnFlag}),this):this._not("is not"===i).whereNull(t)},whereColumn:function(t,n,e){return this._asColumnFlag=!0,this.where.apply(this,arguments),this._asColumnFlag=!1,this},orWhere:function(){this._bool("or");var t=arguments[0];return!b(t)||v(t)||t instanceof a?this.where.apply(this,arguments):this.whereWrapped(function(){for(var n in t)this.andWhere(n,t[n])})},orWhereColumn:function(){this._bool("or");var t=arguments[0];return!b(t)||v(t)||t instanceof a?this.whereColumn.apply(this,arguments):this.whereWrapped(function(){for(var n in t)this.andWhereColumn(n,"=",t[n])})},whereNot:function(){return this._not(!0).where.apply(this,arguments)},whereNotColumn:function(){return this._not(!0).whereColumn.apply(this,arguments)},orWhereNot:function(){return this._bool("or").whereNot.apply(this,arguments)},orWhereNotColumn:function(){return this._bool("or").whereNotColumn.apply(this,arguments)},_objectWhere:function(t){var n=this._bool(),e=this._not()?"Not":"";for(var i in t)this[n+"Where"+e](i,t[i]);return this},whereRaw:function(t,n){var e=t instanceof a?t:this.client.raw(t,n);return this._statements.push({grouping:"where",type:"whereRaw",value:e,not:this._not(),bool:this._bool()}),this},orWhereRaw:function(t,n){return this._bool("or").whereRaw(t,n)},whereWrapped:function(t){return this._statements.push({grouping:"where",type:"whereWrapped",value:t,not:this._not(),bool:this._bool()}),this},whereExists:function(t){return this._statements.push({grouping:"where",type:"whereExists",value:t,not:this._not(),bool:this._bool()}),this},orWhereExists:function(t){return this._bool("or").whereExists(t)},whereNotExists:function(t){return this._not(!0).whereExists(t)},orWhereNotExists:function(t){return this._bool("or").whereNotExists(t)},whereIn:function(t,n){return Array.isArray(n)&&w(n)?this.where(this._not()):(this._statements.push({grouping:"where",type:"whereIn",column:t,value:n,not:this._not(),bool:this._bool()}),this)},orWhereIn:function(t,n){return this._bool("or").whereIn(t,n)},whereNotIn:function(t,n){return this._not(!0).whereIn(t,n)},orWhereNotIn:function(t,n){return this._bool("or")._not(!0).whereIn(t,n)},whereNull:function(t){return this._statements.push({grouping:"where",type:"whereNull",column:t,not:this._not(),bool:this._bool()}),this},orWhereNull:function(t){return this._bool("or").whereNull(t)},whereNotNull:function(t){return this._not(!0).whereNull(t)},orWhereNotNull:function(t){return this._bool("or").whereNotNull(t)},whereBetween:function(t,n){return o(Array.isArray(n),"The second argument to whereBetween must be an array."),o(2===n.length,"You must specify 2 values for the whereBetween clause"),this._statements.push({grouping:"where",type:"whereBetween",column:t,value:n,not:this._not(),bool:this._bool()}),this},whereNotBetween:function(t,n){return this._not(!0).whereBetween(t,n)},orWhereBetween:function(t,n){return this._bool("or").whereBetween(t,n)},orWhereNotBetween:function(t,n){return this._bool("or").whereNotBetween(t,n)},groupBy:function(t){return t instanceof a?this.groupByRaw.apply(this,arguments):(this._statements.push({grouping:"group",type:"groupByBasic",value:l.normalizeArr.apply(null,arguments)}),this)},groupByRaw:function(t,n){var e=t instanceof a?t:this.client.raw(t,n);return this._statements.push({grouping:"group",type:"groupByRaw",value:e}),this},orderBy:function(t,n){return Array.isArray(t)?this._orderByArray(t):(this._statements.push({grouping:"order",type:"orderByBasic",value:t,direction:n}),this)},_orderByArray:function(t){for(var n=0;n<t.length;n++){var e=t[n];b(e)?this._statements.push({grouping:"order",type:"orderByBasic",value:e.column,direction:e.order}):N(e)&&this._statements.push({grouping:"order",type:"orderByBasic",value:e})}return this},orderByRaw:function(t,n){var e=t instanceof a?t:this.client.raw(t,n);return this._statements.push({grouping:"order",type:"orderByRaw",value:e}),this},_union:function(t,n){var e=n[0],i=n[1];if(1===n.length||2===n.length&&y(i)){Array.isArray(e)||(e=[e]);for(var r=0,o=e.length;r<o;r++)this._statements.push({grouping:"union",clause:t,value:e[r],wrap:i||!1})}else e=j(n).slice(0,n.length-1),i=n[n.length-1],y(i)||(e.push(i),i=!1),this._union(t,[e,i]);return this},union:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return this._union("union",n)},unionAll:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return this._union("union all",n)},intersect:function(t,n){if(1===arguments.length||2===arguments.length&&y(n)){Array.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++)this._statements.push({grouping:"union",clause:"intersect",value:t[e],wrap:n||!1})}else t=j(arguments).slice(0,arguments.length-1),n=arguments[arguments.length-1],y(n)||(t.push(n),n=!1),this.intersect(t,n);return this},having:function(t,n,e){return t instanceof a&&1===arguments.length?this.havingRaw(t):"function"==typeof t?this.havingWrapped(t):(this._statements.push({grouping:"having",type:"havingBasic",column:t,operator:n,value:e,bool:this._bool(),not:this._not()}),this)},orHaving:function(){this._bool("or");var t=arguments[0];return!b(t)||v(t)||t instanceof a?this.having.apply(this,arguments):this.havingWrapped(function(){for(var n in t)this.andHaving(n,t[n])})},havingWrapped:function(t){return this._statements.push({grouping:"having",type:"havingWrapped",value:t,bool:this._bool(),not:this._not()}),this},havingNull:function(t){return this._statements.push({grouping:"having",type:"havingNull",column:t,not:this._not(),bool:this._bool()}),this},orHavingNull:function(t){return this._bool("or").havingNull(t)},havingNotNull:function(t){return this._not(!0).havingNull(t)},orHavingNotNull:function(t){return this._not(!0)._bool("or").havingNull(t)},havingExists:function(t){return this._statements.push({grouping:"having",type:"havingExists",value:t,not:this._not(),bool:this._bool()}),this},orHavingExists:function(t){return this._bool("or").havingExists(t)},havingNotExists:function(t){return this._not(!0).havingExists(t)},orHavingNotExists:function(t){return this._not(!0)._bool("or").havingExists(t)},havingBetween:function(t,n){return o(Array.isArray(n),"The second argument to havingBetween must be an array."),o(2===n.length,"You must specify 2 values for the havingBetween clause"),this._statements.push({grouping:"having",type:"havingBetween",column:t,value:n,not:this._not(),bool:this._bool()}),this},orHavingBetween:function(t,n){return this._bool("or").havingBetween(t,n)},havingNotBetween:function(t,n){return this._not(!0).havingBetween(t,n)},orHavingNotBetween:function(t,n){return this._not(!0)._bool("or").havingBetween(t,n)},havingIn:function(t,n){return Array.isArray(n)&&w(n)?this.where(this._not()):(this._statements.push({grouping:"having",type:"havingIn",column:t,value:n,not:this._not(),bool:this._bool()}),this)},orHavingIn:function(t,n){return this._bool("or").havingIn(t,n)},havingNotIn:function(t,n){return this._not(!0).havingIn(t,n)},orHavingNotIn:function(t,n){return this._bool("or")._not(!0).havingIn(t,n)},havingRaw:function(t,n){var e=t instanceof a?t:this.client.raw(t,n);return this._statements.push({grouping:"having",type:"havingRaw",value:e,bool:this._bool(),not:this._not()}),this},orHavingRaw:function(t,n){return this._bool("or").havingRaw(t,n)},offset:function(t){if(d(t)||t instanceof a||t instanceof S)this._single.offset=t;else{var n=parseInt(t,10);isNaN(n)?this.client.logger.warn("A valid integer must be provided to offset"):this._single.offset=n}return this},limit:function(t){var n=parseInt(t,10);return isNaN(n)?this.client.logger.warn("A valid integer must be provided to limit"):this._single.limit=n,this},count:function(t,n){return this._aggregate("count",t||"*",n)},min:function(t,n){return this._aggregate("min",t,n)},max:function(t,n){return this._aggregate("max",t,n)},sum:function(t,n){return this._aggregate("sum",t,n)},avg:function(t,n){return this._aggregate("avg",t,n)},countDistinct:function(){var t,e=l.normalizeArr.apply(null,arguments);e.length>1&&x(k(e))&&(t=n(e.splice(e.length-1,1),1)[0]);return e.length?1===e.length&&(e=e[0]):e="*",this._aggregate("count",e,{...t,distinct:!0})},sumDistinct:function(t,n){return this._aggregate("sum",t,{...n,distinct:!0})},avgDistinct:function(t,n){return this._aggregate("avg",t,{...n,distinct:!0})},increment:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(b(t)){for(var e in t)this._counter(e,t[e]);return this}return this._counter(t,n)},decrement:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(b(t)){for(var e in t)this._counter(e,-t[e]);return this}return this._counter(t,-n)},clearCounters:function(){return this._single.counter={},this},first:function(){if(!this._isSelectQuery())throw new Error('Cannot chain .first() on "'.concat(this._method,'" query!'));for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];return this.select.apply(this,t),this._method="first",this.limit(1),this},connection:function(t){return this._connection=t,this},pluck:function(t){return this._method="pluck",this._single.pluck=t,this._statements.push({grouping:"columns",type:"pluck",value:t}),this},clearSelect:function(){return this._clearGrouping("columns"),this},clearWhere:function(){return this._clearGrouping("where"),this},clearGroup:function(){return this._clearGrouping("group"),this},clearOrder:function(){return this._clearGrouping("order"),this},clearHaving:function(){return this._clearGrouping("having"),this},insert:function(t,n){return this._method="insert",w(n)||this.returning(n),this._single.insert=t,this},update:function(t,n){var e,i=this._single.update||{};if(this._method="update",N(t))i[t]=n,arguments.length>2&&(e=arguments[2]);else{var r=Object.keys(t);this._single.update&&this.client.logger.warn("Update called multiple times with objects.");for(var o=-1;++o<r.length;)i[r[o]]=t[r[o]];e=arguments[1]}return w(e)||this.returning(e),this._single.update=i,this},returning:function(t){return this._single.returning=t,this},delete:function(t){return this._method="del",w(t)||this.returning(t),this},truncate:function(t){return this._method="truncate",t&&(this._single.table=t),this},columnInfo:function(t){return this._method="columnInfo",this._single.columnInfo=t,this},forUpdate:function(){return this._single.lock=R.forUpdate,this._single.lockTables=l.normalizeArr.apply(null,arguments),this},forShare:function(){return this._single.lock=R.forShare,this._single.lockTables=l.normalizeArr.apply(null,arguments),this},skipLocked:function(){if(!this._isSelectQuery())throw new Error('Cannot chain .skipLocked() on "'.concat(this._method,'" query!'));if(!this._hasLockMode())throw new Error(".skipLocked() can only be used after a call to .forShare() or .forUpdate()!");if(this._single.waitMode===H.noWait)throw new Error(".skipLocked() cannot be used together with .noWait()!");return this._single.waitMode=H.skipLocked,this},noWait:function(){if(!this._isSelectQuery())throw new Error('Cannot chain .noWait() on "'.concat(this._method,'" query!'));if(!this._hasLockMode())throw new Error(".noWait() can only be used after a call to .forShare() or .forUpdate()!");if(this._single.waitMode===H.skipLocked)throw new Error(".noWait() cannot be used together with .skipLocked()!");return this._single.waitMode=H.noWait,this},fromJS:function(t){var n=this;return _(t,function(t,e){"function"!=typeof n[e]&&n.client.logger.warn("Knex Error: unknown key ".concat(e)),Array.isArray(t)?n[e].apply(n,t):n[e](t)}),this},modify:function(t){return t.apply(this,[this].concat(W(arguments))),this},_counter:function(t,n){return n=parseFloat(n),this._method="update",this._single.counter=this._single.counter||{},this._single.counter[t]=n,this},_bool:function(t){if(1===arguments.length)return this._boolFlag=t,this;var n=this._boolFlag;return this._boolFlag="and",n},_not:function(t){if(1===arguments.length)return this._notFlag=t,this;var n=this._notFlag;return this._notFlag=!1,n},_joinType:function(t){if(1===arguments.length)return this._joinFlag=t,this;var n=this._joinFlag||"inner";return this._joinFlag="inner",n},_aggregate:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._statements.push({grouping:"columns",type:n instanceof a?"aggregateRaw":"aggregate",method:t,value:n,aggregateDistinct:e.distinct||!1,alias:e.as}),this},_clearGrouping:function(t){this._statements=E(this._statements,{grouping:t})},_isSelectQuery:function(){return A(["pluck","first","select"],this._method)},_hasLockMode:function(){return A([R.forShare,R.forUpdate],this._single.lock)}}),Object.defineProperty(S.prototype,"or",{get:function(){return this._bool("or")}}),Object.defineProperty(S.prototype,"not",{get:function(){return this._not(!0)}}),S.prototype.select=S.prototype.columns,S.prototype.column=S.prototype.columns,S.prototype.andWhereNot=S.prototype.whereNot,S.prototype.andWhereNotColumn=S.prototype.whereNotColumn,S.prototype.andWhere=S.prototype.where,S.prototype.andWhereColumn=S.prototype.whereColumn,S.prototype.andWhereRaw=S.prototype.whereRaw,S.prototype.andWhereBetween=S.prototype.whereBetween,S.prototype.andWhereNotBetween=S.prototype.whereNotBetween,S.prototype.andHaving=S.prototype.having,S.prototype.andHavingIn=S.prototype.havingIn,S.prototype.andHavingNotIn=S.prototype.havingNotIn,S.prototype.andHavingNull=S.prototype.havingNull,S.prototype.andHavingNotNull=S.prototype.havingNotNull,S.prototype.andHavingExists=S.prototype.havingExists,S.prototype.andHavingNotExists=S.prototype.havingNotExists,S.prototype.andHavingBetween=S.prototype.havingBetween,S.prototype.andHavingNotBetween=S.prototype.havingNotBetween,S.prototype.from=S.prototype.table,S.prototype.into=S.prototype.table,S.prototype.del=S.prototype.delete,require("../interface")(S),l.addQueryContext(S),S.extend=function(n,e){if(Object.prototype.hasOwnProperty.call(S.prototype,n))throw new Error("Can't extend QueryBuilder with existing method ('".concat(n,"')."));g(S.prototype,t({},n,e))},module.exports=S;
},{"assert":"v0Hn","inherits":"Thv4","events":"Iny6","../raw":"WMLC","../helpers":"RYfD","./joinclause":"uQaZ","lodash":"uinZ","../util/save-async-stack":"dOYu","./constants":"BmHP","../interface":"v6ms"}],"MHdB":[function(require,module,exports) {
function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}var n=require("./query/builder"),a=require("./raw"),o=require("lodash"),u=o.transform,s=["asc","desc"],c=u(["=","<",">","<=",">=","<>","!=","like","not like","between","not between","ilike","not ilike","exists","not exist","rlike","not rlike","regexp","not regexp","&","|","^","<<",">>","~","~*","!~","!~*","#","&&","@>","<@","||","&<","&>","-|-","@@","!!",["?","\\?"],["?|","\\?|"],["?&","\\?&"]],function(t,e){Array.isArray(e)?t[e[0]]=e[1]:t[e]=e},{}),l=function(){function r(t,i){e(this,r),this.client=t,this.builder=i,this.bindings=[]}return i(r,[{key:"columnize",value:function(t){for(var e=Array.isArray(t)?t:[t],r="",i=-1;++i<e.length;)i>0&&(r+=", "),r+=this.wrap(e[i]);return r}},{key:"parameterize",value:function(t,e){if("function"==typeof t)return this.parameter(t);t=Array.isArray(t)?t:[t];for(var r="",i=-1;++i<t.length;)i>0&&(r+=", "),r+=this.parameter(void 0===t[i]?e:t[i]);return r}},{key:"values",value:function(t){var e=this;return Array.isArray(t)?Array.isArray(t[0])?"(".concat(t.map(function(t){return"(".concat(e.parameterize(t),")")}).join(", "),")"):"(".concat(this.parameterize(t),")"):t instanceof a?"(".concat(this.parameter(t),")"):this.parameter(t)}},{key:"parameter",value:function(t){return"function"==typeof t?this.outputQuery(this.compileCallback(t),!0):this.unwrapRaw(t,!0)||"?"}},{key:"unwrapRaw",value:function(t,e){var r,i=this;return t instanceof n?((r=this.client.queryCompiler(t).toSQL()).bindings&&(this.bindings=this.bindings.concat(r.bindings)),this.outputQuery(r,e)):t instanceof a?(t.client=this.client,this.builder._queryContext&&(t.queryContext=function(){return i.builder._queryContext}),(r=t.toSQL()).bindings&&(this.bindings=this.bindings.concat(r.bindings)),r.sql):void(e&&this.bindings.push(t))}},{key:"rawOrFn",value:function(t,e){return"function"==typeof t?this.outputQuery(this.compileCallback(t,e)):this.unwrapRaw(t)||""}},{key:"wrap",value:function(e,r){var i=this.unwrapRaw(e,r);if(i)return i;switch(t(e)){case"function":return this.outputQuery(this.compileCallback(e),!0);case"object":return this.parseObject(e);case"number":return e;default:return this.wrapString(e+"")}}},{key:"wrapAsIdentifier",value:function(t){var e=this.builder.queryContext();return this.client.wrapIdentifier((t||"").trim(),e)}},{key:"alias",value:function(t,e){return t+" as "+e}},{key:"operator",value:function(t){var e=this.unwrapRaw(t);if(e)return e;var r=c[(t||"").toLowerCase()];if(!r)throw new TypeError('The operator "'.concat(t,'" is not permitted'));return r}},{key:"direction",value:function(t){var e=this.unwrapRaw(t);return e||(-1!==s.indexOf((t||"").toLowerCase())?t:"asc")}},{key:"compileCallback",value:function(t,e){var r=this.client,i=r.queryBuilder();t.call(i,i);var n=r.queryCompiler(i);return n.formatter=this,n.toSQL(e||i._method||"select")}},{key:"outputQuery",value:function(t,e){var r=t.sql||"";return r&&("select"===t.method||"first"===t.method)&&(e||t.as)&&(r="(".concat(r,")"),t.as)?this.alias(r,this.wrap(t.as)):r}},{key:"parseObject",value:function(t){var e=[];for(var r in t){var i=t[r];if("function"==typeof i){var a=this.compileCallback(i);a.as=r,e.push(this.outputQuery(a,!0))}else i instanceof n?e.push(this.alias("(".concat(this.wrap(i),")"),this.wrapAsIdentifier(r))):e.push(this.alias(this.wrap(i),this.wrapAsIdentifier(r)))}return e.join(", ")}},{key:"wrapString",value:function(t){var e=t.toLowerCase().indexOf(" as ");if(-1!==e){var r=t.slice(0,e),i=t.slice(e+4);return this.alias(this.wrap(r),this.wrapAsIdentifier(i))}for(var n=[],a=-1,o=t.split(".");++a<o.length;)t=o[a],0===a&&o.length>1?n.push(this.wrap((t||"").trim())):n.push(this.wrapAsIdentifier(t));return n.join(".")}}]),r}();module.exports=l;
},{"./query/builder":"kl48","./raw":"WMLC","lodash":"uinZ"}],"rhJO":[function(require,module,exports) {
function t(t){this.client=t}t.prototype.now=function(t){return"number"==typeof t?this.client.raw("CURRENT_TIMESTAMP(".concat(t,")")):this.client.raw("CURRENT_TIMESTAMP")},module.exports=t;
},{}],"nDtM":[function(require,module,exports) {
module.exports=["with","withRecursive","select","as","columns","column","from","fromJS","into","withSchema","table","distinct","join","joinRaw","innerJoin","leftJoin","leftOuterJoin","rightJoin","rightOuterJoin","outerJoin","fullOuterJoin","crossJoin","where","andWhere","orWhere","whereNot","orWhereNot","whereRaw","whereWrapped","havingWrapped","orWhereRaw","whereExists","orWhereExists","whereNotExists","orWhereNotExists","whereIn","orWhereIn","whereNotIn","orWhereNotIn","whereNull","orWhereNull","whereNotNull","orWhereNotNull","whereBetween","whereNotBetween","andWhereBetween","andWhereNotBetween","orWhereBetween","orWhereNotBetween","groupBy","groupByRaw","orderBy","orderByRaw","union","unionAll","intersect","having","havingRaw","orHaving","orHavingRaw","offset","limit","count","countDistinct","min","max","sum","sumDistinct","avg","avgDistinct","increment","decrement","first","debug","pluck","clearSelect","clearWhere","clearGroup","clearOrder","clearHaving","insert","update","returning","del","delete","truncate","transacting","connection"];
},{}],"n82m":[function(require,module,exports) {
var e=require("util"),i=e.promisify;module.exports=i(setTimeout);
},{"util":"o5TC"}],"B3n4":[function(require,module,exports) {
function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}var r=require("lodash"),t=r.isNumber,n=r.chunk,a=r.flatten,o=require("./delay");module.exports=function(r,u,c){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3,s=void 0,l=null;return Object.assign(Promise.resolve().then(function(){var f;return regeneratorRuntime.async(function(p){for(;;)switch(p.prev=p.next){case 0:if(t(i)&&!(i<1)){p.next=2;break}throw new TypeError("Invalid chunkSize: ".concat(i));case 2:if(Array.isArray(c)){p.next=4;break}throw new TypeError("Invalid batch: Expected array, got ".concat(e(c)));case 4:return f=n(c,i),p.next=7,regeneratorRuntime.awrap(o(1));case 7:return p.abrupt("return",(y=function(e){var r,t,n,o,c,i,l;return regeneratorRuntime.async(function(p){for(;;)switch(p.prev=p.next){case 0:r=[],t=!0,n=!1,o=void 0,p.prev=4,c=f[Symbol.iterator]();case 6:if(t=(i=c.next()).done){p.next=16;break}return l=i.value,p.t0=r,p.next=11,regeneratorRuntime.awrap(e(u).insert(l,s));case 11:p.t1=p.sent,p.t0.push.call(p.t0,p.t1);case 13:t=!0,p.next=6;break;case 16:p.next=22;break;case 18:p.prev=18,p.t2=p.catch(4),n=!0,o=p.t2;case 22:p.prev=22,p.prev=23,t||null==c.return||c.return();case 25:if(p.prev=25,!n){p.next=28;break}throw o;case 28:return p.finish(25);case 29:return p.finish(22);case 30:return p.abrupt("return",a(r));case 31:case"end":return p.stop()}},null,null,[[4,18,22,30],[23,,25,29]])},l?y(l):r.transaction(y)));case 8:case"end":return p.stop()}var y})}),{returning:function(e){return s=e,this},transacting:function(e){return l=e,this}})};
},{"lodash":"uinZ","./delay":"n82m"}],"ybMW":[function(require,module,exports) {
for(var e=require("events"),t=e.EventEmitter,n=require("../migrate/Migrator"),r=n.Migrator,i=require("../seed/Seeder"),s=require("../functionhelper"),c=require("../query/methods"),o=require("lodash"),a=o.merge,u=o.isUndefined,l=require("./batchInsert"),f={client:{get:function(){return this.context.client},set:function(e){this.context.client=e},configurable:!0},userParams:{get:function(){return this.context.userParams},set:function(e){this.context.userParams=e},configurable:!0},schema:{get:function(){return this.client.schemaBuilder()},configurable:!0},migrate:{get:function(){return new r(this)},configurable:!0},seed:{get:function(){return new i(this)},configurable:!0},fn:{get:function(){return new s(this.client)},configurable:!0}},h=["raw","batchInsert","transaction","transactionProvider","initialize","destroy","ref","withUserParams","queryBuilder","disableProcessing","enableProcessing"],g=function(){var e=P[d];f[e]={value:function(){var t;return(t=this.context)[e].apply(t,arguments)},configurable:!0}},d=0,P=h;d<P.length;d++)g();function m(e){function t(e,n){return q(t.context,e,n)}return v(t,e),t}function p(e){var t=e.context||{};Object.assign(t,{queryBuilder:function(){return this.client.queryBuilder()},raw:function(){return this.client.raw.apply(this.client,arguments)},batchInsert:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return l(this,e,t,n)},transaction:function(e,t){var n=Object.assign({},t);return n.userParams=this.userParams||{},u(n.doNotRejectOnRollback)&&(n.doNotRejectOnRollback=!e),this._transaction(e,n)},_transaction:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e?this.client.transaction(e,t,r):new Promise(function(e,i){n.client.transaction(e,t,r).catch(i)})},transactionProvider:function(e){var t,n=this;return function(){return t||(t=n.transaction(void 0,e)),t}},initialize:function(e){return this.client.initializePool(e)},destroy:function(e){return this.client.destroy(e)},ref:function(e){return this.client.ref(e)},disableProcessing:function(){this.userParams.isProcessingDisabled||(this.userParams.wrapIdentifier=this.client.config.wrapIdentifier,this.userParams.postProcessResponse=this.client.config.postProcessResponse,this.client.config.wrapIdentifier=null,this.client.config.postProcessResponse=null,this.userParams.isProcessingDisabled=!0)},enableProcessing:function(){this.userParams.isProcessingDisabled&&(this.client.config.wrapIdentifier=this.userParams.wrapIdentifier,this.client.config.postProcessResponse=this.userParams.postProcessResponse,this.userParams.isProcessingDisabled=!1)},withUserParams:function(t){var n=w(e);return this.client&&(n.client=Object.create(this.client.constructor.prototype),a(n.client,this.client),n.client.config=Object.assign({},this.client.config)),v(n,n.client),b("query",e,n),b("query-error",e,n),b("query-response",e,n),b("start",e,n),n.userParams=t,n}}),e.context||(e.context=t)}function b(e,t,n){t.listeners(e).forEach(function(t){n.on(e,t)})}function v(e,n){c.forEach(function(t){e[t]=function(){var e=this.queryBuilder();return e[t].apply(e,arguments)}}),Object.defineProperties(e,f),p(e),e.client=n,e.client.makeKnex=m,e.userParams={};var r=new t;for(var i in r)e[i]=r[i];e._internalListeners&&e._internalListeners.forEach(function(t){var n=t.eventName,r=t.listener;e.client.removeListener(n,r)}),e._internalListeners=[],y(e,"start",function(t){e.emit("start",t)}),y(e,"query",function(t){e.emit("query",t)}),y(e,"query-error",function(t,n){e.emit("query-error",t,n)}),y(e,"query-response",function(t,n,r){e.emit("query-response",t,n,r)})}function y(e,t,n){e.client.on(t,n),e._internalListeners.push({eventName:t,listener:n})}function q(e,t,n){var r=e.queryBuilder();return t||e.client.logger.warn("calling knex without a tableName is deprecated. Use knex.queryBuilder() instead."),t?r.table(t,n):r}function w(e){var t=Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e)),n={},r=function(e,t){return q(n,e,t)}.bind(t);return Object.assign(r,e),r.context=n,r}module.exports=m;
},{"events":"Iny6","../migrate/Migrator":"UGzv","../seed/Seeder":"UGzv","../functionhelper":"rhJO","../query/methods":"nDtM","lodash":"uinZ","./batchInsert":"B3n4"}],"zHLs":[function(require,module,exports) {
function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?i(t):n}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=require("events"),l=s.EventEmitter,f=require("debug"),h=require("./util/make-knex"),m=require("util"),y=m.callbackify,p=require("./util/timeout"),v=p.timeout,d=p.KnexTimeoutError,b=require("./util/finally-mixin"),g=f("knex:tx"),k=require("lodash"),x=k.uniqueId,q=k.isUndefined;function _(){return{userParams:{},doNotRejectOnRollback:!0}}var w=function(e){function n(e,r){var i,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_(),a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t(this,n),(i=o(this,c(n).call(this))).userParams=u.userParams,i.doNotRejectOnRollback=u.doNotRejectOnRollback;var s=i.txid=x("trx");i.client=e,i.logger=e.logger,i.outerTx=a,i.trxClient=void 0,i._completed=!1,i._debug=e.config&&e.config.debug,g("%s: Starting %s transaction",s,a?"nested":"top level"),i._lastChild=Promise.resolve();var l=(a?a._lastChild:Promise.resolve()).then(function(){return i._evaluateContainer(u,r)});return i._promise=l.then(function(e){return e}),a&&(a._lastChild=l.catch(function(){})),i}return u(n,l),r(n,[{key:"isCompleted",value:function(){return this._completed||this.outerTx&&this.outerTx.isCompleted()||!1}},{key:"begin",value:function(e){return this.query(e,"BEGIN;")}},{key:"savepoint",value:function(e){return this.query(e,"SAVEPOINT ".concat(this.txid,";"))}},{key:"commit",value:function(e,t){return this.query(e,"COMMIT;",1,t)}},{key:"release",value:function(e,t){return this.query(e,"RELEASE SAVEPOINT ".concat(this.txid,";"),1,t)}},{key:"rollback",value:function(e,t){var n=this;return v(this.query(e,"ROLLBACK",2,t),5e3).catch(function(e){if(!(e instanceof d))return Promise.reject(e);n._rejecter(t)})}},{key:"rollbackTo",value:function(e,t){var n=this;return v(this.query(e,"ROLLBACK TO SAVEPOINT ".concat(this.txid),2,t),5e3).catch(function(e){if(!(e instanceof d))return Promise.reject(e);n._rejecter(t)})}},{key:"query",value:function(e,t,n,r){var o=this,i=this.trxClient.query(e,t).catch(function(e){n=2,r=e,o._completed=!0,g("%s error running transaction query",o.txid)}).then(function(e){if(1===n&&o._resolver(r),2===n){if(q(r)){if(o.doNotRejectOnRollback&&/^ROLLBACK\b/i.test(t))return void o._resolver();r=new Error("Transaction rejected with non-error: ".concat(r))}o._rejecter(r)}return e});return 1!==n&&2!==n||(this._completed=!0),i}},{key:"debug",value:function(e){return this._debug=!arguments.length||e,this}},{key:"_evaluateContainer",value:function(e,t){var n=this;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.acquireConnection(e,function(e){var r=n.trxClient=O(n,n.client,e),o=n.client.transacting?n.savepoint(e):n.begin(e),i=new Promise(function(e,t){n._resolver=e,n._rejecter=t});return o.then(function(){return C(n,e,r)}).then(function(e){var n;e.executionPromise=i;try{n=t(e)}catch(r){n=Promise.reject(r)}return n&&n.then&&"function"==typeof n.then&&n.then(function(t){return e.commit(t)}).catch(function(t){return e.rollback(t)}),null}).catch(function(e){return n._rejecter(e)}),i}));case 1:case"end":return r.stop()}},null,this)}},{key:"acquireConnection",value:function(e,t){var n,r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(n=e&&e.connection,o.t0=n,o.t0){o.next=6;break}return o.next=5,regeneratorRuntime.awrap(this.client.acquireConnection());case 5:o.t0=o.sent;case 6:return r=o.t0,o.prev=7,r.__knexTxId=this.txid,o.next=11,regeneratorRuntime.awrap(t(r));case 11:return o.abrupt("return",o.sent);case 12:return o.prev=12,n?g("%s: not releasing external connection",this.txid):(g("%s: releasing connection",this.txid),this.client.releaseConnection(r)),o.finish(12);case 15:case"end":return o.stop()}},null,this,[[7,,12,15]])}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this._promise.catch(e)}},{key:"asCallback",value:function(e){var t=this;return y(function(){return t._promise})(e),this._promise}}]),n}();function C(e,t,n){var r=h(n);return r.context.withUserParams=function(){throw new Error("Cannot set user params on a transaction - it can only inherit params from main knex instance")},r.isTransaction=!0,r.userParams=e.userParams||{},r.context.transaction=function(t,n){return n?q(n.doNotRejectOnRollback)&&(n.doNotRejectOnRollback=!0):n={doNotRejectOnRollback:!0},this._transaction(t,n,e)},r.savepoint=function(e,t){return r.transaction(e,t)},e.client.transacting?(r.commit=function(n){return e.release(t,n)},r.rollback=function(n){return e.rollbackTo(t,n)}):(r.commit=function(n){return e.commit(t,n)},r.rollback=function(n){return e.rollback(t,n)}),r.isCompleted=function(){return e.isCompleted()},r}function O(e,t,n){var r=Object.create(t.constructor.prototype);r.version=t.version,r.config=t.config,r.driver=t.driver,r.connectionSettings=t.connectionSettings,r.transacting=!0,r.valueForUndefined=t.valueForUndefined,r.logger=t.logger,r.on("query",function(n){e.emit("query",n),t.emit("query",n)}),r.on("query-error",function(n,r){e.emit("query-error",n,r),t.emit("query-error",n,r)}),r.on("query-response",function(n,r,o){e.emit("query-response",n,r,o),t.emit("query-response",n,r,o)});var o=r.query;r.query=function(t,i){var c=e.isCompleted();return new Promise(function(u,a){try{if(t!==n)throw new Error("Invalid connection for transaction query.");c&&P(e,i),u(o.call(r,t,i))}catch(s){a(s)}})};var i=r.stream;return r.stream=function(t,o,c,u){var a=e.isCompleted();return new Promise(function(s,l){try{if(t!==n)throw new Error("Invalid connection for transaction query.");a&&P(e,o),s(i.call(r,t,o,c,u))}catch(f){l(f)}})},r.acquireConnection=function(){return Promise.resolve(n)},r.releaseConnection=function(){return Promise.resolve()},r}function P(e,t){var n="string"==typeof t?t:t&&t.sql;throw g("%s: Transaction completed: %s",e.txid,n),new Error("Transaction query already complete, run with DEBUG=knex:tx for more info")}b(w.prototype),module.exports=w;
},{"events":"Iny6","debug":"hAF4","./util/make-knex":"ybMW","util":"o5TC","./util/timeout":"pSnv","./util/finally-mixin":"ujsZ","lodash":"uinZ"}],"zDL5":[function(require,module,exports) {
function t(t,i){return n(t)||r(t,i)||e()}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function r(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(s){i=!0,a=s}finally{try{n||null==u.return||u.return()}finally{if(i)throw a}}return r}}function n(t){if(Array.isArray(t))return t}function i(t){return u(t)||o(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function u(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),t}var f=require("../helpers"),m=require("../raw"),v=require("./builder"),p=require("./joinclause"),g=require("debug"),y=require("lodash"),d=y.assign,w=y.bind,k=y.compact,b=y.groupBy,_=y.isEmpty,O=y.isString,j=y.isUndefined,A=y.map,I=y.omitBy,S=y.reduce,E=y.has,x=require("uuid"),B=g("knex:bindings"),N=["columns","join","where","union","group","having","order","limit","offset","lock","waitMode"],U=function(){function e(t,r){l(this,e),this.client=t,this.method=r._method||"select",this.options=r._options,this.single=r._single,this.timeout=r._timeout||!1,this.cancelOnTimeout=r._cancelOnTimeout||!1,this.grouped=b(r._statements,"grouping"),this.formatter=t.formatter(r),this._emptyInsertValue="default values",this.first=this.select}return h(e,[{key:"toSQL",value:function(t,e){var r=this;this._undefinedInWhereClause=!1,this.undefinedBindingsInfo=[];var n=this[t=t||this.method]()||"",i={method:t,options:S(this.options,d,{}),timeout:this.timeout,cancelOnTimeout:this.cancelOnTimeout,bindings:this.formatter.bindings||[],__knexQueryUid:x.v1()};if(Object.defineProperties(i,{toNative:{value:function(){return{sql:r.client.positionBindings(i.sql),bindings:r.client.prepBindings(i.bindings)}},enumerable:!1}}),O(n)?i.sql=n:d(i,n),"select"!==t&&"first"!==t||this.single.as&&(i.as=this.single.as),this._undefinedInWhereClause)throw B(i.bindings),new Error("Undefined binding(s) detected when compiling "+"".concat(t.toUpperCase(),". Undefined column(s): [").concat(this.undefinedBindingsInfo.join(", "),"] query: ").concat(i.sql));return i}},{key:"select",value:function(){var t=this,e=this.with(),r=N.map(function(e){return t[e](t)});return e+=k(r).join(" ")}},{key:"pluck",value:function(){var t=this.single.pluck;return-1!==t.indexOf(".")&&(t=t.split(".").slice(-1)[0]),{sql:this.select(),pluck:t}}},{key:"insert",value:function(){var t=this.single.insert||[],e=this.with()+"insert into ".concat(this.tableName," ");if(Array.isArray(t)){if(0===t.length)return""}else if("object"===s(t)&&_(t))return e+this._emptyInsertValue;var r=this._prepInsert(t);if("string"==typeof r)e+=r;else if(r.columns.length){e+="(".concat(this.formatter.columnize(r.columns)),e+=") values (";for(var n=-1;++n<r.values.length;)0!==n&&(e+="), ("),e+=this.formatter.parameterize(r.values[n],this.client.valueForUndefined);e+=")"}else 1===t.length&&t[0]?e+=this._emptyInsertValue:e="";return e}},{key:"update",value:function(){var t=this.with(),e=this.tableName,r=this._prepUpdate(this.single.update),n=this.where();return t+"update ".concat(this.single.only?"only ":"").concat(e)+" set "+r.join(", ")+(n?" ".concat(n):"")}},{key:"columns",value:function(){var t="";if(this.onlyUnions())return"";var e=this.grouped.columns||[],r=-1,n=[];if(e)for(;++r<e.length;){var a,o=e[r];if(o.distinct&&(t="distinct "),o.distinctOn)t=this.distinctOn(o.value);else if("aggregate"===o.type)(a=n).push.apply(a,i(this.aggregate(o)));else"aggregateRaw"===o.type?n.push(this.aggregateRaw(o)):o.value&&o.value.length>0&&n.push(this.formatter.columnize(o.value))}return 0===n.length&&(n=["*"]),"select ".concat(t)+n.join(", ")+(this.tableName?" from ".concat(this.single.only?"only ":"").concat(this.tableName):"")}},{key:"_aggregate",value:function(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.aliasSeparator,a=void 0===i?" as ":i,o=n.distinctParentheses,u=e.value,l=e.method,c=e.aggregateDistinct?"distinct ":"",h=function(t){return r.formatter.wrap(t)},f=function(t,e){return e?t+a+h(e):t},m=function(t,e){var r=t.map(h).join(", ");if(c){var n=o?"(":" ",i=o?")":"";r=c.trim()+n+r+i}var a="".concat(l,"(").concat(r,")");return f(a,e)},v=function(t,e){var r="".concat(l,"(").concat(c+h(t),")");return f(r,e)};if(Array.isArray(u))return[m(u)];if("object"===s(u)){if(e.alias)throw new Error("When using an object explicit alias can not be used");return Object.entries(u).map(function(e){var r=t(e,2),n=r[0],i=r[1];return Array.isArray(i)?m(i,n):v(i,n)})}var p=u.toLowerCase().indexOf(" as "),g=u,y=e.alias;if(-1!==p){if(g=u.slice(0,p),y)throw new Error("Found multiple aliases for same column: ".concat(g));y=u.slice(p+4)}return[v(g,y)]}},{key:"aggregate",value:function(t){return this._aggregate(t)}},{key:"aggregateRaw",value:function(t){var e=t.aggregateDistinct?"distinct ":"";return"".concat(t.method,"(").concat(e+this.formatter.unwrapRaw(t.value),")")}},{key:"join",value:function(){var t="",e=-1,r=this.grouped.join;if(!r)return"";for(;++e<r.length;){var n=r[e],i=n.schema?"".concat(n.schema,".").concat(n.table):n.table;if(e>0&&(t+=" "),"raw"===n.joinType)t+=this.formatter.unwrapRaw(n.table);else{t+=n.joinType+" join "+this.formatter.wrap(i);for(var a=-1;++a<n.clauses.length;){var o=n.clauses[a];t+=" ".concat(a>0?o.bool:"onUsing"===o.type?"using":"on"," ");var u=this[o.type].call(this,o);u&&(t+=u)}}}return t}},{key:"onBetween",value:function(t){return this.formatter.wrap(t.column)+" "+this._not(t,"between")+" "+A(t.value,w(this.formatter.parameter,this.formatter)).join(" and ")}},{key:"onNull",value:function(t){return this.formatter.wrap(t.column)+" is "+this._not(t,"null")}},{key:"onExists",value:function(t){return this._not(t,"exists")+" ("+this.formatter.rawOrFn(t.value)+")"}},{key:"onIn",value:function(t){return Array.isArray(t.column)?this.multiOnIn(t):this.formatter.wrap(t.column)+" "+this._not(t,"in ")+this.wrap(this.formatter.parameterize(t.value))}},{key:"multiOnIn",value:function(t){var e=-1,r="(".concat(this.formatter.columnize(t.column),") ");for(r+=this._not(t,"in ")+"((";++e<t.value.length;)0!==e&&(r+="),("),r+=this.formatter.parameterize(t.value[e]);return r+"))"}},{key:"where",value:function(){var t=this.grouped.where;if(t){for(var e=[],r=-1;++r<t.length;){var n=t[r];Object.prototype.hasOwnProperty.call(n,"value")&&f.containsUndefined(n.value)&&(this.undefinedBindingsInfo.push(n.column),this._undefinedInWhereClause=!0);var i=this[n.type](n);i&&(0===e.length?e[0]="where":e.push(n.bool),e.push(i))}return e.length>1?e.join(" "):""}}},{key:"group",value:function(){return this._groupsOrders("group")}},{key:"order",value:function(){return this._groupsOrders("order")}},{key:"having",value:function(){var t=this.grouped.having;if(!t)return"";for(var e=["having"],r=0,n=t.length;r<n;r++){var i=t[r],a=this[i.type](i);a&&(0===e.length&&(e[0]="where"),(e.length>1||1===e.length&&"having"!==e[0])&&e.push(i.bool),e.push(a))}return e.length>1?e.join(" "):""}},{key:"havingRaw",value:function(t){return this._not(t,"")+this.formatter.unwrapRaw(t.value)}},{key:"havingWrapped",value:function(t){var e=this.formatter.rawOrFn(t.value,"where");return e&&this._not(t,"")+"("+e.slice(6)+")"||""}},{key:"havingBasic",value:function(t){return this._not(t,"")+this.formatter.wrap(t.column)+" "+this.formatter.operator(t.operator)+" "+this.formatter.parameter(t.value)}},{key:"havingNull",value:function(t){return this.formatter.wrap(t.column)+" is "+this._not(t,"null")}},{key:"havingExists",value:function(t){return this._not(t,"exists")+" ("+this.formatter.rawOrFn(t.value)+")"}},{key:"havingBetween",value:function(t){return this.formatter.wrap(t.column)+" "+this._not(t,"between")+" "+A(t.value,w(this.formatter.parameter,this.formatter)).join(" and ")}},{key:"havingIn",value:function(t){return Array.isArray(t.column)?this.multiHavingIn(t):this.formatter.wrap(t.column)+" "+this._not(t,"in ")+this.wrap(this.formatter.parameterize(t.value))}},{key:"multiHavingIn",value:function(t){var e=-1,r="(".concat(this.formatter.columnize(t.column),") ");for(r+=this._not(t,"in ")+"((";++e<t.value.length;)0!==e&&(r+="),("),r+=this.formatter.parameterize(t.value[e]);return r+"))"}},{key:"union",value:function(){var t=this.onlyUnions(),e=this.grouped.union;if(!e)return"";for(var r="",n=0,i=e.length;n<i;n++){var a=e[n];n>0&&(r+=" "),(n>0||!t)&&(r+=a.clause+" ");var o=this.formatter.rawOrFn(a.value);o&&(a.wrap&&(r+="("),r+=o,a.wrap&&(r+=")"))}return r}},{key:"onlyUnions",value:function(){return!this.grouped.columns&&this.grouped.union&&!this.tableName}},{key:"limit",value:function(){return!this.single.limit&&0!==this.single.limit?"":"limit ".concat(this.formatter.parameter(this.single.limit))}},{key:"offset",value:function(){return this.single.offset?"offset ".concat(this.formatter.parameter(this.single.offset)):""}},{key:"del",value:function(){var t=this.tableName,e=this.with(),r=this.where();return e+"delete from ".concat(this.single.only?"only ":"").concat(t)+(r?" ".concat(r):"")}},{key:"truncate",value:function(){return"truncate ".concat(this.tableName)}},{key:"lock",value:function(){if(this.single.lock)return this[this.single.lock]()}},{key:"waitMode",value:function(){if(this.single.waitMode)return this[this.single.waitMode]()}},{key:"skipLocked",value:function(){throw new Error(".skipLocked() is currently only supported on MySQL 8.0+ and PostgreSQL 9.5+")}},{key:"noWait",value:function(){throw new Error(".noWait() is currently only supported on MySQL 8.0+, MariaDB 10.3.0+ and PostgreSQL 9.5+")}},{key:"distinctOn",value:function(t){throw new Error(".distinctOn() is currently only supported on PostgreSQL")}},{key:"onWrapped",value:function(t){var e=this,r=new p;t.value.call(r,r);var n="";return r.clauses.forEach(function(t,r){r>0&&(n+=" ".concat(t.bool," "));var i=e[t.type](t);i&&(n+=i)}),n.length?"(".concat(n,")"):""}},{key:"onBasic",value:function(t){return this.formatter.wrap(t.column)+" "+this.formatter.operator(t.operator)+" "+this.formatter.wrap(t.value)}},{key:"onVal",value:function(t){return this.formatter.wrap(t.column)+" "+this.formatter.operator(t.operator)+" "+this.formatter.parameter(t.value)}},{key:"onRaw",value:function(t){return this.formatter.unwrapRaw(t.value)}},{key:"onUsing",value:function(t){return"("+this.formatter.columnize(t.column)+")"}},{key:"whereIn",value:function(t){var e=null;e=Array.isArray(t.column)?"(".concat(this.formatter.columnize(t.column),")"):this.formatter.wrap(t.column);var r=this.formatter.values(t.value);return"".concat(e," ").concat(this._not(t,"in ")).concat(r)}},{key:"whereNull",value:function(t){return this.formatter.wrap(t.column)+" is "+this._not(t,"null")}},{key:"whereBasic",value:function(t){return this._not(t,"")+this.formatter.wrap(t.column)+" "+this.formatter.operator(t.operator)+" "+(t.asColumn?this.formatter.wrap(t.value):this.formatter.parameter(t.value))}},{key:"whereExists",value:function(t){return this._not(t,"exists")+" ("+this.formatter.rawOrFn(t.value)+")"}},{key:"whereWrapped",value:function(t){var e=this.formatter.rawOrFn(t.value,"where");return e&&this._not(t,"")+"("+e.slice(6)+")"||""}},{key:"whereBetween",value:function(t){return this.formatter.wrap(t.column)+" "+this._not(t,"between")+" "+A(t.value,w(this.formatter.parameter,this.formatter)).join(" and ")}},{key:"whereRaw",value:function(t){return this._not(t,"")+this.formatter.unwrapRaw(t.value)}},{key:"wrap",value:function(t){return"("!==t.charAt(0)?"(".concat(t,")"):t}},{key:"with",value:function(){if(!this.grouped.with||!this.grouped.with.length)return"";var t=this.grouped.with;if(t){for(var e=[],r=-1,n=!1;++r<t.length;){var i=t[r];i.recursive&&(n=!0);var a=this[i.type](i);e.push(a)}return"with ".concat(n?"recursive ":"").concat(e.join(", ")," ")}}},{key:"withWrapped",value:function(t){var e=this.formatter.rawOrFn(t.value);return e&&this.formatter.columnize(t.alias)+" as ("+e+")"||""}},{key:"_not",value:function(t,e){return t.not?"not ".concat(e):e}},{key:"_prepInsert",value:function(t){var e=this.formatter.rawOrFn(t);if(e)return e;var r=[],n=[];Array.isArray(t)||(t=t?[t]:[]);for(var i=-1;++i<t.length&&null!=t[i];){0===i&&(r=Object.keys(t[i]).sort());for(var a=new Array(r.length),o=Object.keys(t[i]),u=-1;++u<o.length;){var s=o[u],l=r.indexOf(s);if(-1===l){l=(r=r.concat(s).sort()).indexOf(s);for(var c=-1;++c<n.length;)n[c].splice(l,0,void 0);a.splice(l,0,void 0)}a[l]=t[i][s]}n.push(a)}return{columns:r,values:n}}},{key:"_prepUpdate",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.single.counter,r=void 0===e?{}:e,n=0,i=Object.keys(r);n<i.length;n++){var a=i[n];if(E(t,a))this.client.logger.warn("increment/decrement called for a column that has already been specified in main .update() call. Ignoring increment/decrement and using value from .update() call.");else{var o=r[a],u=o<0?"-":"+";"-"===u&&(o=-o),t[a]=this.client.raw("?? ".concat(u," ?"),[a,o])}}t=I(t,j);for(var s=[],l=Object.keys(t),c=-1;++c<l.length;)s.push(this.formatter.wrap(l[c])+" = "+this.formatter.parameter(t[l[c]]));if(_(s))throw new Error(["Empty .update() call detected!","Update data does not contain any values to update.","This will result in a faulty query.",this.single.table?"Table: ".concat(this.single.table,"."):"",this.single.update?"Columns: ".concat(Object.keys(this.single.update),"."):""].join(" "));return s}},{key:"_formatGroupsItemValue",value:function(t){var e=this.formatter;return t instanceof m?e.unwrapRaw(t):t instanceof v?"("+e.columnize(t)+")":e.columnize(t)}},{key:"_groupsOrders",value:function(t){var e=this,r=this.grouped[t];if(!r)return"";var n=this.formatter,i=r.map(function(r){return e._formatGroupsItemValue(r.value)+("order"===t&&"orderByRaw"!==r.type?" ".concat(n.direction(r.direction)):"")});return i.length?t+" by "+i.join(", "):""}},{key:"tableName",get:function(){if(!this._tableName){var t=this.single.table,e=this.single.schema;t&&e&&(t="".concat(e,".").concat(t)),this._tableName=t?this.formatter.wrap(t,t instanceof v):""}return this._tableName}}]),e}();module.exports=U;
},{"../helpers":"RYfD","../raw":"WMLC","./builder":"kl48","./joinclause":"uQaZ","debug":"hAF4","lodash":"uinZ","uuid":"PJ3H"}],"MF0W":[function(require,module,exports) {
var e=require("inherits"),t=require("events"),r=t.EventEmitter,i=require("lodash"),a=i.each,n=i.toArray,o=require("../helpers"),s=o.addQueryContext,c=require("../util/save-async-stack");function l(e){this.client=e,this._sequence=[],e.config&&(this._debug=e.config.debug,c(this,4))}e(l,r),a(["createTable","createTableIfNotExists","createSchema","createSchemaIfNotExists","dropSchema","dropSchemaIfExists","createExtension","createExtensionIfNotExists","dropExtension","dropExtensionIfExists","table","alterTable","hasTable","hasColumn","dropTable","renameTable","dropTableIfExists","raw"],function(e){l.prototype[e]=function(){return"createTableIfNotExists"===e&&this.client.logger.warn(["Use async .hasTable to check if table exists and then use plain .createTable. Since ",'.createTableIfNotExists actually just generates plain "CREATE TABLE IF NOT EXIST..." ',"query it will not work correctly if there are any alter table queries generated for ","columns afterwards. To not break old migrations this function is left untouched for now",", but it should not be used when writing new code and it is removed from documentation."].join("")),"table"===e&&(e="alterTable"),this._sequence.push({method:e,args:n(arguments)}),this}}),require("../interface")(l),s(l),l.prototype.withSchema=function(e){return this._schema=e,this},l.prototype.toString=function(){return this.toQuery()},l.prototype.toSQL=function(){return this.client.schemaCompiler(this).toSQL()},module.exports=l;
},{"inherits":"Thv4","events":"Iny6","lodash":"uinZ","../helpers":"RYfD","../util/save-async-stack":"dOYu","../interface":"v6ms"}],"zWdG":[function(require,module,exports) {
var i=require("lodash"),t=i.isString,n=i.tail;function s(i){i&&(t(i)&&(i={sql:i}),i.bindings||(i.bindings=this.formatter.bindings),this.sequence.push(i),this.formatter=this.client.formatter(this._commonBuilder))}function e(i){var t=new this.constructor(this.client,this.tableCompiler,this.columnBuilder);i.call(t,n(arguments)),this.sequence.additional=(this.sequence.additional||[]).concat(t.sequence)}function r(i){i&&(t(i)&&(i={sql:i}),i.bindings||(i.bindings=this.formatter.bindings),this.sequence.unshift(i),this.formatter=this.client.formatter(this._commonBuilder))}module.exports={pushAdditional:e,pushQuery:s,unshiftQuery:r};
},{"lodash":"uinZ"}],"Yq02":[function(require,module,exports) {
var e=require("./helpers"),t=e.pushQuery,r=e.pushAdditional,i=e.unshiftQuery,s=require("lodash"),o=s.isUndefined;function a(e,t){this.builder=t,this._commonBuilder=this.builder,this.client=e,this.schema=t._schema,this.formatter=e.formatter(t),this.sequence=[]}function n(e){throw new Error("".concat(e," is not supported for this dialect (only PostgreSQL supports it currently)."))}function h(e){return function(t,r){var i=this.client.tableBuilder(e,t,r),s=this.builder.queryContext();!o(s)&&o(i.queryContext())&&i.queryContext(s),i.setSchema(this.schema);for(var a=i.toSQL(),n=0,h=a.length;n<h;n++)this.sequence.push(a[n])}}function c(e,t){return e?"".concat(e,".").concat(t):t}Object.assign(a.prototype,{pushQuery:t,pushAdditional:r,unshiftQuery:i,createTable:h("create"),createTableIfNotExists:h("createIfNot"),createSchema:function(){n("createSchema")},createSchemaIfNotExists:function(){n("createSchemaIfNotExists")},dropSchema:function(){n("dropSchema")},dropSchemaIfExists:function(){n("dropSchemaIfExists")},alterTable:h("alter"),dropTablePrefix:"drop table ",dropTable:function(e){this.pushQuery(this.dropTablePrefix+this.formatter.wrap(c(this.schema,e)))},dropTableIfExists:function(e){this.pushQuery(this.dropTablePrefix+"if exists "+this.formatter.wrap(c(this.schema,e)))},raw:function(e,t){this.sequence.push(this.client.raw(e,t).toSQL())},toSQL:function(){for(var e=this.builder._sequence,t=0,r=e.length;t<r;t++){var i=e[t];this[i.method].apply(this,i.args)}return this.sequence}}),module.exports=a;
},{"./helpers":"zWdG","lodash":"uinZ"}],"L7td":[function(require,module,exports) {
function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var e=require("lodash"),n=e.extend,o=e.each,i=e.toArray,r=e.isString,a=e.isFunction,s=require("../helpers");function u(t,e,n,o){if(this.client=t,this._fn=o,this._method=e,this._schemaName=void 0,this._tableName=n,this._statements=[],this._single={},!a(this._fn))throw new TypeError("A callback function must be supplied to calls against `.createTable` and `.table`")}u.prototype.setSchema=function(t){this._schemaName=t},u.prototype.toSQL=function(){return"alter"===this._method&&n(this,c),this._fn.call(this,this),this.client.tableCompiler(this).toSQL()},o(["index","primary","unique","dropPrimary","dropUnique","dropIndex","dropForeign"],function(t){u.prototype[t]=function(){return this._statements.push({grouping:"alterTable",method:t,args:i(arguments)}),this}});var l={mysql:["engine","charset","collate"],postgresql:["inherits"]};o(l,function(t,e){o(t,function(t){u.prototype[t]=function(n){if(this.client.dialect!==e)throw new Error("Knex only supports ".concat(t," statement with ").concat(e,"."));if("alter"===this._method)throw new Error("Knex does not support altering the ".concat(t," outside of create ")+"table, please use knex.raw statement.");this._single[t]=n}})}),s.addQueryContext(u);var m=["tinyint","smallint","mediumint","int","bigint","decimal","float","double","real","bit","boolean","serial","date","datetime","timestamp","time","year","char","varchar","tinytext","tinyText","text","mediumtext","mediumText","longtext","longText","binary","varbinary","tinyblob","tinyBlob","mediumblob","mediumBlob","blob","longblob","longBlob","enum","set","bool","dateTime","increments","bigincrements","bigIncrements","integer","biginteger","bigInteger","string","json","jsonb","uuid","enu","specificType"];o(m,function(t){u.prototype[t]=function(){var e=i(arguments),n=this.client.columnBuilder(this,t,e);return this._statements.push({grouping:"columns",builder:n}),n}}),u.prototype.timestamps=function(){var t=!0===arguments[0]?"timestamp":"datetime",e=this[t]("created_at"),n=this[t]("updated_at");if(!0===arguments[1]){var o=this.client.raw("CURRENT_TIMESTAMP");e.notNullable().defaultTo(o),n.notNullable().defaultTo(o)}},u.prototype.comment=function(t){if("string"!=typeof t)throw new TypeError("Table comment must be string");this._single.comment=t},u.prototype.foreign=function(e,o){var i={column:e,keyName:o};this._statements.push({grouping:"alterTable",method:"foreign",args:[i]});var a={references:function(e){var n;return r(e)&&(n=e.split(".")),n&&1!==n.length?(i.inTable=n[0],i.references=n[1],a):(i.references=n?n[0]:e,{on:function(e){if("string"!=typeof e)throw new TypeError("Expected tableName to be a string, got: ".concat(t(e)));return i.inTable=e,a},inTable:function(){return this.on.apply(this,arguments)}})},withKeyName:function(t){return i.keyName=t,a},onUpdate:function(t){return i.onUpdate=t,a},onDelete:function(t){return i.onDelete=t,a},_columnBuilder:function(t){return n(t,a),a=t,t}};return a};var c={renameColumn:function(t,e){return this._statements.push({grouping:"alterTable",method:"renameColumn",args:[t,e]}),this},dropTimestamps:function(){return this.dropColumns(["created_at","updated_at"])}};c.dropColumn=c.dropColumns=function(){return this._statements.push({grouping:"alterTable",method:"dropColumn",args:i(arguments)}),this},module.exports=u;
},{"lodash":"uinZ","../helpers":"RYfD"}],"BLk0":[function(require,module,exports) {
var e=require("./helpers"),t=e.pushAdditional,r=e.pushQuery,o=e.unshiftQuery,i=require("../helpers"),n=require("lodash"),s=n.groupBy,a=n.reduce,l=n.map,u=n.first,h=n.tail,p=n.isEmpty,m=n.indexOf,c=n.isArray,d=n.isUndefined;function f(e,t){this.client=e,this.tableBuilder=t,this._commonBuilder=this.tableBuilder,this.method=t._method,this.schemaNameRaw=t._schemaName,this.tableNameRaw=t._tableName,this.single=t._single,this.grouped=s(t._statements,"grouping"),this.formatter=e.formatter(t),this.sequence=[],this._formatting=e.config&&e.config.formatting}f.prototype.pushQuery=r,f.prototype.pushAdditional=t,f.prototype.unshiftQuery=o,f.prototype.toSQL=function(){return this[this.method](),this.sequence},f.prototype.lowerCase=!0,f.prototype.createAlterTableMethods=null,f.prototype.create=function(e){var t=this.getColumns().map(function(e){return e.toSQL()}),r=this.getColumnTypes(t);this.createAlterTableMethods&&this.alterTableForCreate(r),this.createQuery(r,e),this.columnQueries(t),delete this.single.comment,this.alterTable()},f.prototype.createIfNot=function(){this.create(!0)},f.prototype.alter=function(){var e=this.getColumns().map(function(e){return e.toSQL()}),t=this.getColumns("alter"),r=t.map(function(e){return e.toSQL()}),o=this.getColumnTypes(e),i=this.getColumnTypes(r);this.addColumns(o),this.alterColumns(i,t),this.columnQueries(e),this.columnQueries(r),this.alterTable()},f.prototype.foreign=function(e){if(e.inTable&&e.references){var t=e.keyName?this.formatter.wrap(e.keyName):this._indexCommand("foreign",this.tableNameRaw,e.column),r=this.formatter.columnize(e.column),o=this.formatter.columnize(e.references),i=this.formatter.wrap(e.inTable),n=e.onUpdate?(this.lowerCase?" on update ":" ON UPDATE ")+e.onUpdate:"",s=e.onDelete?(this.lowerCase?" on delete ":" ON DELETE ")+e.onDelete:"";this.lowerCase?this.pushQuery((this.forCreate?"":"alter table ".concat(this.tableName()," add "))+"constraint "+t+" foreign key ("+r+") references "+i+" ("+o+")"+n+s):this.pushQuery((this.forCreate?"":"ALTER TABLE ".concat(this.tableName()," ADD "))+"CONSTRAINT "+t+" FOREIGN KEY ("+r+") REFERENCES "+i+" ("+o+")"+n+s)}},f.prototype.getColumnTypes=function(e){return a(l(e,u),function(e,t){return e.sql.push(t.sql),e.bindings.concat(t.bindings),e},{sql:[],bindings:[]})},f.prototype.columnQueries=function(e){var t=a(l(e,h),function(e,t){return p(t)?e:e.concat(t)},[]),r=!0,o=!1,i=void 0;try{for(var n,s=t[Symbol.iterator]();!(r=(n=s.next()).done);r=!0){var u=n.value;this.pushQuery(u)}}catch(m){o=!0,i=m}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}},f.prototype.addColumnsPrefix="add column ",f.prototype.addColumns=function(e,t){if(t=t||this.addColumnsPrefix,e.sql.length>0){var r=l(e.sql,function(e){return t+e});this.pushQuery({sql:(this.lowerCase?"alter table ":"ALTER TABLE ")+this.tableName()+" "+r.join(", "),bindings:e.bindings})}},f.prototype.alterColumnsPrefix="alter column ",f.prototype.alterColumns=function(e,t){e.sql.length>0&&this.addColumns(e,this.alterColumnsPrefix,t)},f.prototype.getColumns=function(e){var t=this,r=this.grouped.columns||[];e=e||"add";var o=this.tableBuilder.queryContext();return r.filter(function(t){return t.builder._method===e}).map(function(e){return!d(o)&&d(e.builder.queryContext())&&e.builder.queryContext(o),t.client.columnCompiler(t,e.builder)})},f.prototype.tableName=function(){var e=this.schemaNameRaw?"".concat(this.schemaNameRaw,".").concat(this.tableNameRaw):this.tableNameRaw;return this.formatter.wrap(e)},f.prototype.alterTable=function(){for(var e=this.grouped.alterTable||[],t=0,r=e.length;t<r;t++){var o=e[t];this[o.method]?this[o.method].apply(this,o.args):this.client.logger.error("Debug: ".concat(o.method," does not exist"))}for(var i in this.single)"function"==typeof this[i]&&this[i](this.single[i])},f.prototype.alterTableForCreate=function(e){this.forCreate=!0;var t=this.sequence,r=this.grouped.alterTable||[];this.grouped.alterTable=[];for(var o=0,i=r.length;o<i;o++){var n=r[o];m(this.createAlterTableMethods,n.method)<0?this.grouped.alterTable.push(n):this[n.method]?(this.sequence=[],this[n.method].apply(this,n.args),e.sql.push(this.sequence[0].sql)):this.client.logger.error("Debug: ".concat(n.method," does not exist"))}this.sequence=t,this.forCreate=!1},f.prototype.dropIndex=function(e){this.pushQuery("drop index".concat(e))},f.prototype.dropUnique=f.prototype.dropForeign=function(){throw new Error("Method implemented in the dialect driver")},f.prototype.dropColumnPrefix="drop column ",f.prototype.dropColumn=function(){var e=this,t=i.normalizeArr.apply(null,arguments),r=l(c(t)?t:[t],function(t){return e.dropColumnPrefix+e.formatter.wrap(t)});this.pushQuery((this.lowerCase?"alter table ":"ALTER TABLE ")+this.tableName()+" "+r.join(", "))},f.prototype._indexCommand=function(e,t,r){c(r)||(r=r?[r]:[]);var o=(t.replace(/\.|-/g,"_")+"_"+r.join("_")+"_"+e).toLowerCase();return this.formatter.wrap(o)},module.exports=f;
},{"./helpers":"zWdG","../helpers":"RYfD","lodash":"uinZ"}],"nTyo":[function(require,module,exports) {
var t=require("lodash"),e=t.extend,i=t.each,r=t.toArray,n=require("../helpers"),o=n.addQueryContext;function s(t,i,r,n){this.client=t,this._method="add",this._single={},this._modifiers={},this._statements=[],this._type=h[r]||r,this._args=n,this._tableBuilder=i,"alter"===i._method&&e(this,u)}var l=["default","defaultsTo","defaultTo","unsigned","nullable","first","after","comment","collate"],a={default:"defaultTo",defaultsTo:"defaultTo"};i(l,function(t){var e=a[t]||t;s.prototype[t]=function(){return this._modifiers[e]=r(arguments),this}}),o(s),s.prototype.notNull=s.prototype.notNullable=function(){return this.nullable(!1)},i(["index","primary","unique"],function(t){s.prototype[t]=function(){return-1===this._type.toLowerCase().indexOf("increments")&&this._tableBuilder[t].apply(this._tableBuilder,[this._args[0]].concat(r(arguments))),this}}),s.prototype.references=function(t){return this._tableBuilder.foreign.call(this._tableBuilder,this._args[0],void 0,this)._columnBuilder(this).references(t)};var u={drop:function(){return this._single.drop=!0,this},alterType:function(t){return this._statements.push({grouping:"alterType",value:t}),this},alter:function(){return this._method="alter",this}},h={float:"floating",enum:"enu",boolean:"bool",string:"varchar",bigint:"bigInteger"};module.exports=s;
},{"lodash":"uinZ","../helpers":"RYfD"}],"VfXW":[function(require,module,exports) {
var t=require("../raw"),e=require("./helpers"),o=require("lodash"),i=o.groupBy,n=o.first,r=o.tail,p=o.has,s=o.isObject;function u(t,e,o){this.client=t,this.tableCompiler=e,this.columnBuilder=o,this._commonBuilder=this.columnBuilder,this.args=o._args,this.type=o._type.toLowerCase(),this.grouped=i(o._statements,"grouping"),this.modified=o._modifiers,this.isIncrements=-1!==this.type.indexOf("increments"),this.formatter=t.formatter(o),this.sequence=[],this.modifiers=[]}u.prototype.pushQuery=e.pushQuery,u.prototype.pushAdditional=e.pushAdditional,u.prototype.unshiftQuery=e.unshiftQuery,u.prototype._defaultMap={columnName:function(){if(!this.isIncrements)throw new Error("You did not specify a column name for the ".concat(this.type," column."));return"id"}},u.prototype.defaults=function(t){if(Object.prototype.hasOwnProperty.call(this._defaultMap,t))return this._defaultMap[t].bind(this)();throw new Error("There is no default for the specified identifier ".concat(t))},u.prototype.toSQL=function(){return this.pushQuery(this.compileColumn()),this.sequence.additional&&(this.sequence=this.sequence.concat(this.sequence.additional)),this.sequence},u.prototype.compileColumn=function(){return this.formatter.wrap(this.getColumnName())+" "+this.getColumnType()+this.getModifiers()},u.prototype.getColumnName=function(){return n(this.args)||this.defaults("columnName")},u.prototype.getColumnType=function(){var t=this[this.type];return"function"==typeof t?t.apply(this,r(this.args)):t},u.prototype.getModifiers=function(){for(var t=[],e=0,o=this.modifiers.length;e<o;e++){var i=this.modifiers[e];if((!this.isIncrements||this.isIncrements&&"comment"===i)&&p(this.modified,i)){var n=this[i].apply(this,this.modified[i]);n&&t.push(n)}}return t.length>0?" ".concat(t.join(" ")):""},u.prototype.increments="integer not null primary key autoincrement",u.prototype.bigincrements="integer not null primary key autoincrement",u.prototype.integer=u.prototype.smallint=u.prototype.mediumint="integer",u.prototype.biginteger="bigint",u.prototype.varchar=function(t){return"varchar(".concat(this._num(t,255),")")},u.prototype.text="text",u.prototype.tinyint="tinyint",u.prototype.floating=function(t,e){return"float(".concat(this._num(t,8),", ").concat(this._num(e,2),")")},u.prototype.decimal=function(t,e){if(null===t)throw new Error("Specifying no precision on decimal columns is not supported for that SQL dialect.");return"decimal(".concat(this._num(t,8),", ").concat(this._num(e,2),")")},u.prototype.binary="blob",u.prototype.bool="boolean",u.prototype.date="date",u.prototype.datetime="datetime",u.prototype.time="time",u.prototype.timestamp="timestamp",u.prototype.enu="varchar",u.prototype.bit=u.prototype.json="text",u.prototype.uuid="char(36)",u.prototype.specifictype=function(t){return t},u.prototype.nullable=function(t){return!1===t?"not null":"null"},u.prototype.notNullable=function(){return this.nullable(!1)},u.prototype.defaultTo=function(e){return void 0===e?"":(null===e?e="null":e instanceof t?e=e.toQuery():"bool"===this.type?("false"===e&&(e=0),e="'".concat(e?1:0,"'")):e="json"!==this.type&&"jsonb"!==this.type||!s(e)?"'".concat(e,"'"):"'".concat(JSON.stringify(e),"'"),"default ".concat(e))},u.prototype._num=function(t,e){if(null==t)return e;var o=parseInt(t,10);return isNaN(o)?e:o},module.exports=u;
},{"../raw":"WMLC","./helpers":"zWdG","lodash":"uinZ"}],"GMOu":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?r(e):n}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function u(t){var e="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||!f(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return i(t,arguments,l(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,t)})(t)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function i(t,e,n){return(i=c()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&p(o,n.prototype),o}).apply(null,arguments)}function f(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(t){function r(){return e(this,r),n(this,l(r).apply(this,arguments))}return o(r,u(Error)),r}();exports.TimeoutError=a;
},{}],"FCoc":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function n(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function r(n){e(this,r),this._value=n.value,this._error=n.error}return n(r,[{key:"value",value:function(){return this._value}},{key:"reason",value:function(){return this._error}},{key:"isRejected",value:function(){return!!this._error}},{key:"isFulfilled",value:function(){return!!this._value}}]),r}();exports.PromiseInspection=t;
},{}],"VcJB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./PromiseInspection");function r(){var e=null,r=null;return{promise:new Promise(function(n,t){e=n,r=t}),resolve:e,reject:r}}function n(){return Date.now()}function t(e,r){return Math.abs(r-e)}function o(e){return void 0===e||u(e)}function u(e){return"number"==typeof e&&e===Math.round(e)&&e>0}function i(e){return new Promise(function(r){return setTimeout(r,e)})}function c(r){return r.then(function(r){return new e.PromiseInspection({value:r})}).catch(function(r){return new e.PromiseInspection({error:r})})}function s(e){try{var r=e();return Promise.resolve(r)}catch(n){return Promise.reject(n)}}exports.defer=r,exports.now=n,exports.duration=t,exports.checkOptionalTime=o,exports.checkRequiredTime=u,exports.delay=i,exports.reflect=c,exports.tryPromise=s;
},{"./PromiseInspection":"FCoc"}],"mxVV":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./TimeoutError"),o=require("./utils"),i=function(){function r(t){var i=this;e(this,r),this.timeoutMillis=t,this.deferred=o.defer(),this.possibleTimeoutCause=null,this.promise=u(this.deferred.promise,t).catch(function(e){return e instanceof n.TimeoutError&&(e=i.possibleTimeoutCause?new n.TimeoutError(i.possibleTimeoutCause.message):new n.TimeoutError("operation timed out for an unknown reason")),Promise.reject(e)})}return t(r,[{key:"abort",value:function(){this.reject(new Error("aborted"))}},{key:"reject",value:function(e){this.deferred.reject(e)}},{key:"resolve",value:function(e){this.deferred.resolve(e)}}]),r}();function u(e,r){return new Promise(function(t,o){var i=setTimeout(function(){return o(new n.TimeoutError)},r);e.then(function(e){clearTimeout(i),t(e)}).catch(function(e){clearTimeout(i),o(e)})})}exports.PendingOperation=i;
},{"./TimeoutError":"GMOu","./utils":"VcJB"}],"Pk8r":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./utils"),o=function(){function r(t){e(this,r),this.resource=t,this.resource=t,this.timestamp=n.now(),this.deferred=n.defer()}return t(r,[{key:"resolve",value:function(){return this.deferred.resolve(void 0),new r(this.resource)}},{key:"promise",get:function(){return this.deferred.promise}}]),r}();exports.Resource=o;
},{"./utils":"VcJB"}],"T1eu":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./PendingOperation"),n=require("./Resource"),s=require("./utils"),o=require("events"),u=function(){function t(r){if(e(this,t),this.destroyed=!1,this.emitter=new o.EventEmitter,!(r=r||{}).create)throw new Error("Tarn: opt.create function most be provided");if(!r.destroy)throw new Error("Tarn: opt.destroy function most be provided");if("number"!=typeof r.min||r.min<0||r.min!==Math.round(r.min))throw new Error("Tarn: opt.min must be an integer >= 0");if("number"!=typeof r.max||r.max<=0||r.max!==Math.round(r.max))throw new Error("Tarn: opt.max must be an integer > 0");if(r.min>r.max)throw new Error("Tarn: opt.max is smaller than opt.min");if(!s.checkOptionalTime(r.acquireTimeoutMillis))throw new Error("Tarn: invalid opt.acquireTimeoutMillis "+JSON.stringify(r.acquireTimeoutMillis));if(!s.checkOptionalTime(r.createTimeoutMillis))throw new Error("Tarn: invalid opt.createTimeoutMillis "+JSON.stringify(r.createTimeoutMillis));if(!s.checkOptionalTime(r.destroyTimeoutMillis))throw new Error("Tarn: invalid opt.destroyTimeoutMillis "+JSON.stringify(r.destroyTimeoutMillis));if(!s.checkOptionalTime(r.idleTimeoutMillis))throw new Error("Tarn: invalid opt.idleTimeoutMillis "+JSON.stringify(r.idleTimeoutMillis));if(!s.checkOptionalTime(r.reapIntervalMillis))throw new Error("Tarn: invalid opt.reapIntervalMillis "+JSON.stringify(r.reapIntervalMillis));if(!s.checkOptionalTime(r.createRetryIntervalMillis))throw new Error("Tarn: invalid opt.createRetryIntervalMillis "+JSON.stringify(r.createRetryIntervalMillis));for(var i={create:!0,validate:!0,destroy:!0,log:!0,min:!0,max:!0,acquireTimeoutMillis:!0,createTimeoutMillis:!0,destroyTimeoutMillis:!0,idleTimeoutMillis:!0,reapIntervalMillis:!0,createRetryIntervalMillis:!0,propagateCreateError:!0},n=0,u=Object.keys(r);n<u.length;n++){var a=u[n];if(!i[a])throw new Error("Tarn: unsupported option opt.".concat(a))}this.creator=r.create,this.destroyer=r.destroy,this.validate="function"==typeof r.validate?r.validate:function(){return!0},this.log=r.log||function(){},this.acquireTimeoutMillis=r.acquireTimeoutMillis||3e4,this.createTimeoutMillis=r.createTimeoutMillis||3e4,this.destroyTimeoutMillis=r.destroyTimeoutMillis||5e3,this.idleTimeoutMillis=r.idleTimeoutMillis||3e4,this.reapIntervalMillis=r.reapIntervalMillis||1e3,this.createRetryIntervalMillis=r.createRetryIntervalMillis||200,this.propagateCreateError=!!r.propagateCreateError,this.min=r.min,this.max=r.max,this.used=[],this.free=[],this.pendingCreates=[],this.pendingAcquires=[],this.pendingDestroys=[],this.destroyed=!1,this.interval=null,this.eventId=1}return r(t,[{key:"numUsed",value:function(){return this.used.length}},{key:"numFree",value:function(){return this.free.length}},{key:"numPendingAcquires",value:function(){return this.pendingAcquires.length}},{key:"numPendingCreates",value:function(){return this.pendingCreates.length}},{key:"acquire",value:function(){var e=this,t=this.eventId++;this._executeEventHandlers("acquireRequest",t);var r=new i.PendingOperation(this.acquireTimeoutMillis);return this.pendingAcquires.push(r),r.promise=r.promise.then(function(r){return e._executeEventHandlers("acquireSuccess",t,r),r}).catch(function(i){return e._executeEventHandlers("acquireFail",t,i),a(e.pendingAcquires,r),Promise.reject(i)}),this._tryAcquireOrCreate(),r}},{key:"release",value:function(e){this._executeEventHandlers("release",e);for(var t=0,r=this.used.length;t<r;++t){var i=this.used[t];if(i.resource===e)return this.used.splice(t,1),this.free.push(i.resolve()),this._tryAcquireOrCreate(),!0}return!1}},{key:"isEmpty",value:function(){return 0===[this.numFree(),this.numUsed(),this.numPendingAcquires(),this.numPendingCreates()].reduce(function(e,t){return e+t})}},{key:"check",value:function(){var e=this,t=s.now(),r=[],i=this.min-this.used.length,n=this.free.length-i,o=0;this.free.forEach(function(i){s.duration(t,i.timestamp)>=e.idleTimeoutMillis&&o<n?(o++,e._destroy(i.resource)):r.push(i)}),this.free=r,this.isEmpty()&&this._stopReaping()}},{key:"destroy",value:function(){var e=this,t=this.eventId++;return this._executeEventHandlers("poolDestroyRequest",t),this._stopReaping(),this.destroyed=!0,s.reflect(Promise.all(this.pendingCreates.map(function(e){return s.reflect(e.promise)})).then(function(){return Promise.all(e.used.map(function(e){return s.reflect(e.promise)}))}).then(function(){return Promise.all(e.pendingAcquires.map(function(e){return e.abort(),s.reflect(e.promise)}))}).then(function(){return Promise.all(e.free.map(function(t){return s.reflect(e._destroy(t.resource))}))}).then(function(){return Promise.all(e.pendingDestroys.map(function(e){return e.promise}))}).then(function(){e.free=[],e.pendingAcquires=[]})).then(function(r){return e._executeEventHandlers("poolDestroySuccess",t),e.emitter.removeAllListeners(),r})}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"removeListener",value:function(e,t){this.emitter.removeListener(e,t)}},{key:"removeAllListeners",value:function(e){this.emitter.removeAllListeners(e)}},{key:"_tryAcquireOrCreate",value:function(){this.destroyed||(this._hasFreeResources()?this._doAcquire():this._shouldCreateMoreResources()&&this._doCreate())}},{key:"_hasFreeResources",value:function(){return this.free.length>0}},{key:"_doAcquire",value:function(){for(var e=!1;this._canAcquire();){var t=this.pendingAcquires[0],r=this.free[this.free.length-1];this._validateResource(r.resource)?(this.pendingAcquires.shift(),this.free.pop(),this.used.push(r.resolve()),this._startReaping(),t.resolve(r.resource)):(this.free.pop(),this._destroy(r.resource),e=!0)}e&&this._tryAcquireOrCreate()}},{key:"_canAcquire",value:function(){return this.free.length>0&&this.pendingAcquires.length>0}},{key:"_validateResource",value:function(e){try{return!!this.validate(e)}catch(t){return this.log("Tarn: resource validator threw an exception "+t.stack,"warn"),!1}}},{key:"_shouldCreateMoreResources",value:function(){return this.used.length+this.pendingCreates.length<this.max&&this.pendingCreates.length<this.pendingAcquires.length}},{key:"_doCreate",value:function(){var e=this,t=this.pendingAcquires.slice();this._create().promise.then(function(){return e._tryAcquireOrCreate(),null}).catch(function(r){e.propagateCreateError&&0!==e.pendingAcquires.length&&e.pendingAcquires[0].reject(r),t.forEach(function(e){e.possibleTimeoutCause=r}),s.delay(e.createRetryIntervalMillis).then(function(){return e._tryAcquireOrCreate()})})}},{key:"_create",value:function(){var e=this,t=this.eventId++;this._executeEventHandlers("createRequest",t);var r=new i.PendingOperation(this.createTimeoutMillis);return this.pendingCreates.push(r),l(this.creator).then(function(i){return a(e.pendingCreates,r),e.free.push(new n.Resource(i)),r.resolve(i),e._executeEventHandlers("createSuccess",t,i),null}).catch(function(i){return a(e.pendingCreates,r),r.reject(i),e._executeEventHandlers("createFail",t,i),null}),r}},{key:"_destroy",value:function(e){var t=this,r=this.eventId++;this._executeEventHandlers("destroyRequest",r,e);var n=new i.PendingOperation(this.destroyTimeoutMillis);return Promise.resolve().then(function(){return t.destroyer(e)}).then(function(){n.resolve(e)}).catch(function(e){n.reject(e)}),this.pendingDestroys.push(n),n.promise.then(function(i){return t._executeEventHandlers("destroySuccess",r,e),i}).catch(function(i){return t._logDestroyerError(r,e,i)}).then(function(e){var r=t.pendingDestroys.findIndex(function(e){return e===n});return t.pendingDestroys.splice(r,1),e})}},{key:"_logDestroyerError",value:function(e,t,r){this._executeEventHandlers("destroyFail",e,t,r),this.log("Tarn: resource destroyer threw an exception "+r.stack,"warn")}},{key:"_startReaping",value:function(){var e=this;this.interval||(this._executeEventHandlers("startReaping"),this.interval=setInterval(function(){return e.check()},this.reapIntervalMillis))}},{key:"_stopReaping",value:function(){null!==this.interval&&(this._executeEventHandlers("stopReaping"),clearInterval(this.interval)),this.interval=null}},{key:"_executeEventHandlers",value:function(e){for(var t=this,r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];this.emitter.listeners(e).forEach(function(r){try{r.apply(void 0,i)}catch(n){t.log('Tarn: event handler "'.concat(e,'" threw an exception ').concat(n.stack),"warn")}})}}]),t}();function a(e,t){var r=e.indexOf(t);return-1!==r&&(e.splice(r,1),!0)}function l(e){return new Promise(function(t,r){var i=function(e,i){e?r(e):t(i)};s.tryPromise(function(){return e(i)}).then(function(e){e&&t(e)}).catch(function(e){r(e)})})}exports.Pool=u;
},{"./PendingOperation":"mxVV","./Resource":"Pk8r","./utils":"VcJB","events":"Iny6"}],"h0Ar":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./Pool");exports.Pool=r.Pool;var o=require("./TimeoutError");exports.TimeoutError=o.TimeoutError,module.exports={Pool:r.Pool,TimeoutError:o.TimeoutError};
},{"./Pool":"T1eu","./TimeoutError":"GMOu"}],"VF60":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=/[\0\b\t\n\r\x1a"'\\]/g,n={"\0":"\\0","\b":"\\b","\t":"\\t","\n":"\\n","\r":"\\r","":"\\Z",'"':'\\"',"'":"\\'","\\":"\\\\"};function o(e){return function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(r,t,n)}}function a(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.escapeDate||f,a=r.escapeArray||i,l=r.escapeBuffer||c,g=r.escapeString||s,p=r.escapeObject||u,y=r.wrap||o;function b(r,o,u){if(null==r)return"NULL";switch(t(r)){case"boolean":return r?"true":"false";case"number":return r+"";case"object":if(!(r instanceof Date))return Array.isArray(r)?a(r,o,u):e.isBuffer(r)?l(r,o,u):p(r,o,u);r=n(r,o,u)}return g(r,o,u)}return y?y(b):b}function u(e,t,r){return e&&"function"==typeof e.toSQL?e.toSQL(r):JSON.stringify(e)}function i(e,t,r){for(var n="",o=0;o<e.length;o++){var a=e[o];Array.isArray(a)?n+=(0===o?"":", ")+"("+i(a,t,r)+")":n+=(0===o?"":", ")+t(a,r)}return n}function c(e){return"X"+s(e.toString("hex"))}function s(e,t,o){for(var a,u=r.lastIndex=0,i="";a=r.exec(e);)i+=e.slice(u,a.index)+n[a[0]],u=r.lastIndex;return 0===u?"'"+e+"'":u<e.length?"'"+i+e.slice(u)+"'":"'"+i+"'"}function f(e,t){var r,n,o,a,u,i,c,s=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).timeZone||"local",f=new Date(e);if("local"===s)r=f.getFullYear(),n=f.getMonth()+1,o=f.getDate(),a=f.getHours(),u=f.getMinutes(),i=f.getSeconds(),c=f.getMilliseconds();else{var p=g(s);!1!==p&&0!==p&&f.setTime(f.getTime()+6e4*p),r=f.getUTCFullYear(),n=f.getUTCMonth()+1,o=f.getUTCDate(),a=f.getUTCHours(),u=f.getUTCMinutes(),i=f.getUTCSeconds(),c=f.getUTCMilliseconds()}return l(r,4)+"-"+l(n,2)+"-"+l(o,2)+" "+l(a,2)+":"+l(u,2)+":"+l(i,2)+"."+l(c,3)}function l(e,t){for(e=e.toString();e.length<t;)e="0"+e;return e}function g(e){if("Z"===e)return 0;var t=e.match(/([+\-\s])(\d\d):?(\d\d)?/);return!!t&&("-"==t[1]?-1:1)*(parseInt(t[2],10)+(t[3]?parseInt(t[3],10):0)/60)*60}module.exports={arrayToList:i,bufferToString:c,dateToString:f,escapeString:s,charsRegex:r,charsMap:n,escapeObject:u,makeEscape:a};
},{"buffer":"FaCw"}],"N3AF":[function(require,module,exports) {
var process = require("process");
var e=require("process");let g=!("NO_COLOR"in e.env)&&("win32"===e.platform||null!=e.stdout&&e.stdout.isTTY&&!0);const t=(e,t,r,i)=>b=>g?e+(~(b+="").indexOf(t,4)?b.replace(r,i):b)+t:b,r=(e,g)=>t(`[${e}m`,`[${g}m`,new RegExp(`\\x1b\\[${g}m`,"g"),`[${e}m`);module.exports={options:Object.defineProperty({},"enabled",{get:()=>g,set:e=>g=e}),reset:r(0,0),bold:t("[1m","[22m",/\x1b\[22m/g,"[22m[1m"),dim:t("[2m","[22m",/\x1b\[22m/g,"[22m[2m"),italic:r(3,23),underline:r(4,24),inverse:r(7,27),hidden:r(8,28),strikethrough:r(9,29),black:r(30,39),red:r(31,39),green:r(32,39),yellow:r(33,39),blue:r(34,39),magenta:r(35,39),cyan:r(36,39),white:r(37,39),gray:r(90,39),bgBlack:r(40,49),bgRed:r(41,49),bgGreen:r(42,49),bgYellow:r(43,49),bgBlue:r(44,49),bgMagenta:r(45,49),bgCyan:r(46,49),bgWhite:r(47,49),blackBright:r(90,39),redBright:r(91,39),greenBright:r(92,39),yellowBright:r(93,39),blueBright:r(94,39),magentaBright:r(95,39),cyanBright:r(96,39),whiteBright:r(97,39),bgBlackBright:r(100,49),bgRedBright:r(101,49),bgGreenBright:r(102,49),bgYellowBright:r(103,49),bgBlueBright:r(104,49),bgMagentaBright:r(105,49),bgCyanBright:r(106,49),bgWhiteBright:r(107,49)};
},{"process":"FeV4"}],"bGoB":[function(require,module,exports) {
var process = require("process");
var e=require("process");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}var n=require("colorette"),i=require("util"),s=i.inspect,l=require("lodash"),u=l.isFunction,a=l.isNil,c=l.isString,h=function(){function e(r){t(this,e);var o=r.log,n=(o=void 0===o?{}:o).debug,i=o.warn,s=o.error,l=o.deprecate,u=o.inspectionDepth,a=o.enableColors;this._inspectionDepth=u||5,this._enableColors=p(a),this._debug=n,this._warn=i,this._error=s,this._deprecate=l}return o(e,[{key:"_log",value:function(e,t,r){if(!a(t)&&!u(t))throw new TypeError("Extensions to knex logger must be functions!");u(t)?t(e):(c(e)||(e=s(e,{depth:this._inspectionDepth,colors:this._enableColors})),console.log(r?r(e):e))}},{key:"debug",value:function(e){this._log(e,this._debug)}},{key:"warn",value:function(e){this._log(e,this._warn,n.yellow)}},{key:"error",value:function(e){this._log(e,this._error,n.red)}},{key:"deprecate",value:function(e,t){var r="".concat(e," is deprecated, please use ").concat(t);this._log(r,this._deprecate,n.yellow)}}]),e}();function p(t){return a(t)?!(!e||!e.stdout)&&e.stdout.isTTY:t}module.exports=h;
},{"colorette":"N3AF","util":"o5TC","lodash":"uinZ","process":"FeV4"}],"ZNtt":[function(require,module,exports) {
function e(e){return r(e)||t(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function t(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function r(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function o(e,n,t){return(o=i()?Reflect.construct:function(e,n,t){var r=[null];r.push.apply(r,n);var i=new(Function.bind.apply(e,r));return t&&c(i,t.prototype),i}).apply(null,arguments)}function c(e,n){return(c=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var s=require("./raw"),u=require("./ref"),a=require("./runner"),l=require("./formatter"),f=require("./transaction"),p=require("./query/builder"),h=require("./query/compiler"),d=require("./schema/builder"),g=require("./schema/compiler"),m=require("./schema/tablebuilder"),y=require("./schema/tablecompiler"),q=require("./schema/columnbuilder"),v=require("./schema/columncompiler"),x=require("tarn"),w=x.Pool,_=x.TimeoutError,b=require("inherits"),C=require("events"),k=C.EventEmitter,E=require("util"),P=E.promisify,R=require("./query/string"),I=R.makeEscape,T=require("lodash"),U=T.uniqueId,O=T.cloneDeep,j=T.defaults,B=require("./logger"),S=require("./util/timeout"),A=S.KnexTimeoutError,D=require("debug")("knex:client"),Q=require("debug")("knex:query"),F=require("debug")("knex:bindings"),z=function(e,n){return Q(e.replace(/%/g,"%%"),n)},N=require("./constants"),K=N.POOL_CONFIG_OPTIONS;function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.config=e,this.logger=new B(e),this.dialect&&!this.config.client&&this.logger.warn("Using 'this.dialect' to identify the client is deprecated and support for it will be removed in the future. Please use configuration option 'client' instead."),!(this.config.client||this.dialect))throw new Error("knex: Required configuration option 'client' is missing.");e.version&&(this.version=e.version),e.connection&&e.connection instanceof Function?(this.connectionConfigProvider=e.connection,this.connectionConfigExpirationChecker=function(){return!0}):(this.connectionSettings=O(e.connection||{}),this.connectionConfigExpirationChecker=null),this.driverName&&e.connection&&(this.initializeDriver(),(!e.pool||e.pool&&0!==e.pool.max)&&this.initializePool(e)),this.valueForUndefined=this.raw("DEFAULT"),e.useNullAsDefault&&(this.valueForUndefined=null)}b(M,k),Object.assign(M.prototype,{formatter:function(e){return new l(this,e)},queryBuilder:function(){return new p(this)},queryCompiler:function(e){return new h(this,e)},schemaBuilder:function(){return new d(this)},schemaCompiler:function(e){return new g(this,e)},tableBuilder:function(e,n,t){return new m(this,e,n,t)},tableCompiler:function(e){return new y(this,e)},columnBuilder:function(e,n,t){return new q(this,e,n,t)},columnCompiler:function(e,n){return new v(this,e,n)},runner:function(e){return new a(this,e)},transaction:function(e,n,t){return new f(this,e,n,t)},raw:function(){var e;return(e=new s(this)).set.apply(e,arguments)},ref:function(){return o(u,[this].concat(Array.prototype.slice.call(arguments)))},_formatQuery:function(e,n,t){var r=this;n=null==n?[]:[].concat(n);var i=0;return e.replace(/\\?\?/g,function(e){if("\\?"===e)return"?";if(i===n.length)return e;var o=n[i++];return r._escapeBinding(o,{timeZone:t})})},_escapeBinding:I({escapeString:function(e){return"'".concat(e.replace(/'/g,"''"),"'")}}),query:function(e,n){var t=this;"string"==typeof n&&(n={sql:n}),n.bindings=this.prepBindings(n.bindings);var r=e.__knexUid,i=e.__knexTxId;return this.emit("query",Object.assign({__knexUid:r,__knexTxId:i},n)),z(n.sql,i),F(n.bindings,i),n.sql=this.positionBindings(n.sql),this._query(e,n).catch(function(e){throw e.message=t._formatQuery(n.sql,n.bindings)+" - "+e.message,t.emit("query-error",e,Object.assign({__knexUid:r,__knexTxId:i},n)),e})},stream:function(e,n,t,r){"string"==typeof n&&(n={sql:n}),n.bindings=this.prepBindings(n.bindings);var i=e.__knexUid,o=e.__knexTxId;return this.emit("query",Object.assign({__knexUid:i,__knexTxId:o},n)),z(n.sql,o),F(n.bindings,o),n.sql=this.positionBindings(n.sql),this._stream(e,n,t,r)},prepBindings:function(e){return e},positionBindings:function(e){return e},postProcessResponse:function(e,n){return this.config.postProcessResponse?this.config.postProcessResponse(e,n):e},wrapIdentifier:function(e,n){return this.customWrapIdentifier(e,this.wrapIdentifierImpl,n)},customWrapIdentifier:function(e,n,t){return this.config.wrapIdentifier?this.config.wrapIdentifier(e,n,t):n(e)},wrapIdentifierImpl:function(e){return"*"!==e?'"'.concat(e.replace(/"/g,'""'),'"'):"*"},initializeDriver:function(){try{this.driver=this._driver()}catch(n){var e="Knex: run\n$ npm install ".concat(this.driverName," --save");throw this.logger.error("".concat(e,"\n").concat(n.message,"\n").concat(n.stack)),new Error("".concat(e,"\n").concat(n.message))}},poolDefaults:function(){return{min:2,max:10,propagateCreateError:!0}},getPoolSettings:function(n){var t=this;n=j({},n,this.poolDefaults()),K.forEach(function(e){e in n&&t.logger.warn(['Pool config option "'.concat(e,'" is no longer supported.'),"See https://github.com/Vincit/tarn.js for possible pool config options."].join(" "))});var r=[this.config.acquireConnectionTimeout||6e4,n.acquireTimeoutMillis].filter(function(e){return void 0!==e});n.acquireTimeoutMillis=Math.min.apply(Math,e(r));var i=function(){var e;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.connectionConfigProvider){n.next=2;break}return n.abrupt("return");case 2:if(t.connectionConfigExpirationChecker&&t.connectionConfigExpirationChecker()){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,regeneratorRuntime.awrap(t.connectionConfigProvider());case 6:(e=n.sent).expirationChecker?(t.connectionConfigExpirationChecker=e.expirationChecker,delete e.expirationChecker):t.connectionConfigExpirationChecker=null,t.connectionSettings=e;case 9:case"end":return n.stop()}})};return Object.assign(n,{create:function(){var e;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(i());case 2:return r.next=4,regeneratorRuntime.awrap(t.acquireRawConnection());case 4:if((e=r.sent).__knexUid=U("__knexUid"),!n.afterCreate){r.next=9;break}return r.next=9,regeneratorRuntime.awrap(P(n.afterCreate)(e));case 9:return r.abrupt("return",e);case 10:case"end":return r.stop()}})},destroy:function(e){if(void 0!==e)return t.destroyRawConnection(e)},validate:function(e){return e.__knex__disposed?(t.logger.warn("Connection Error: ".concat(e.__knex__disposed)),!1):t.validateConnection(e)}})},initializePool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config;if(this.pool)this.logger.warn("The pool has already been initialized");else{var n={...this.getPoolSettings(e.pool)};n.afterCreate&&delete n.afterCreate,this.pool=new w(n)}},validateConnection:function(e){return!0},acquireConnection:function(){var e,n;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.pool){t.next=2;break}throw new Error("Unable to acquire a connection");case 2:return t.prev=2,t.next=5,regeneratorRuntime.awrap(this.pool.acquire().promise);case 5:return e=t.sent,D("acquired connection from pool: %s",e.__knexUid),t.abrupt("return",e);case 10:throw t.prev=10,t.t0=t.catch(2),n=t.t0,t.t0 instanceof _&&(n=new A("Knex: Timeout acquiring a connection. The pool is probably full. Are you missing a .transacting(trx) call?")),n;case 15:case"end":return t.stop()}},null,this,[[2,10]])},releaseConnection:function(e){return D("releasing connection to pool: %s",e.__knexUid),this.pool.release(e)||D("pool refused connection: %s",e.__knexUid),Promise.resolve()},destroy:function(e){var n=this,t=this.pool&&this.pool.destroy();return Promise.resolve(t).then(function(){n.pool=void 0,"function"==typeof e&&e()}).catch(function(n){return"function"==typeof e&&e(n),Promise.reject(n)})},database:function(){return this.connectionSettings.database},toString:function(){return"[object KnexClient]"},canCancelQuery:!1,assertCanCancelQuery:function(){if(!this.canCancelQuery)throw new Error("Query cancelling not supported for this dialect")},cancelQuery:function(){throw new Error("Query cancelling not supported for this dialect")}}),module.exports=M;
},{"./raw":"WMLC","./ref":"btJL","./runner":"Q6FW","./formatter":"MHdB","./transaction":"zHLs","./query/builder":"kl48","./query/compiler":"zDL5","./schema/builder":"MF0W","./schema/compiler":"Yq02","./schema/tablebuilder":"L7td","./schema/tablecompiler":"BLk0","./schema/columnbuilder":"nTyo","./schema/columncompiler":"VfXW","tarn":"h0Ar","inherits":"Thv4","events":"Iny6","util":"o5TC","./query/string":"VF60","lodash":"uinZ","./logger":"bGoB","./util/timeout":"pSnv","debug":"hAF4","./constants":"Bofi"}],"v8R7":[function(require,module,exports) {
var global = arguments[3];
var define;
var o,e=arguments[3];!function(n){var r="object"==typeof exports&&exports&&!exports.nodeType&&exports,t="object"==typeof module&&module&&!module.nodeType&&module,u="object"==typeof e&&e;u.global!==u&&u.window!==u&&u.self!==u||(n=u);var i,f,c=2147483647,l=36,s=1,p=26,a=38,d=700,h=72,v=128,g="-",w=/^xn--/,x=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=l-s,b=Math.floor,j=String.fromCharCode;function A(o){throw new RangeError(m[o])}function I(o,e){for(var n=o.length,r=[];n--;)r[n]=e(o[n]);return r}function E(o,e){var n=o.split("@"),r="";return n.length>1&&(r=n[0]+"@",o=n[1]),r+I((o=o.replace(y,".")).split("."),e).join(".")}function F(o){for(var e,n,r=[],t=0,u=o.length;t<u;)(e=o.charCodeAt(t++))>=55296&&e<=56319&&t<u?56320==(64512&(n=o.charCodeAt(t++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),t--):r.push(e);return r}function O(o){return I(o,function(o){var e="";return o>65535&&(e+=j((o-=65536)>>>10&1023|55296),o=56320|1023&o),e+=j(o)}).join("")}function S(o,e){return o+22+75*(o<26)-((0!=e)<<5)}function T(o,e,n){var r=0;for(o=n?b(o/d):o>>1,o+=b(o/e);o>C*p>>1;r+=l)o=b(o/C);return b(r+(C+1)*o/(o+a))}function L(o){var e,n,r,t,u,i,f,a,d,w,x,y=[],m=o.length,C=0,j=v,I=h;for((n=o.lastIndexOf(g))<0&&(n=0),r=0;r<n;++r)o.charCodeAt(r)>=128&&A("not-basic"),y.push(o.charCodeAt(r));for(t=n>0?n+1:0;t<m;){for(u=C,i=1,f=l;t>=m&&A("invalid-input"),((a=(x=o.charCodeAt(t++))-48<10?x-22:x-65<26?x-65:x-97<26?x-97:l)>=l||a>b((c-C)/i))&&A("overflow"),C+=a*i,!(a<(d=f<=I?s:f>=I+p?p:f-I));f+=l)i>b(c/(w=l-d))&&A("overflow"),i*=w;I=T(C-u,e=y.length+1,0==u),b(C/e)>c-j&&A("overflow"),j+=b(C/e),C%=e,y.splice(C++,0,j)}return O(y)}function M(o){var e,n,r,t,u,i,f,a,d,w,x,y,m,C,I,E=[];for(y=(o=F(o)).length,e=v,n=0,u=h,i=0;i<y;++i)(x=o[i])<128&&E.push(j(x));for(r=t=E.length,t&&E.push(g);r<y;){for(f=c,i=0;i<y;++i)(x=o[i])>=e&&x<f&&(f=x);for(f-e>b((c-n)/(m=r+1))&&A("overflow"),n+=(f-e)*m,e=f,i=0;i<y;++i)if((x=o[i])<e&&++n>c&&A("overflow"),x==e){for(a=n,d=l;!(a<(w=d<=u?s:d>=u+p?p:d-u));d+=l)I=a-w,C=l-w,E.push(j(S(w+I%C,0))),a=b(I/C);E.push(j(S(a,0))),u=T(n,m,r==t),n=0,++r}++n,++e}return E.join("")}if(i={version:"1.4.1",ucs2:{decode:F,encode:O},decode:L,encode:M,toASCII:function(o){return E(o,function(o){return x.test(o)?"xn--"+M(o):o})},toUnicode:function(o){return E(o,function(o){return w.test(o)?L(o.slice(4).toLowerCase()):o})}},"function"==typeof o&&"object"==typeof o.amd&&o.amd)o("punycode",function(){return i});else if(r&&t)if(module.exports==r)t.exports=i;else for(f in i)i.hasOwnProperty(f)&&(r[f]=i[f]);else n.punycode=i}(this);
},{}],"IaaW":[function(require,module,exports) {
"use strict";module.exports={isString:function(n){return"string"==typeof n},isObject:function(n){return"object"==typeof n&&null!==n},isNull:function(n){return null===n},isNullOrUndefined:function(n){return null==n}};
},{}],"fP26":[function(require,module,exports) {
"use strict";function r(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(t,n,o,a){n=n||"&",o=o||"=";var s={};if("string"!=typeof t||0===t.length)return s;var p=/\+/g;t=t.split(n);var u=1e3;a&&"number"==typeof a.maxKeys&&(u=a.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var i=0;i<c;++i){var y,l,f,v,b=t[i].replace(p,"%20"),d=b.indexOf(o);d>=0?(y=b.substr(0,d),l=b.substr(d+1)):(y=b,l=""),f=decodeURIComponent(y),v=decodeURIComponent(l),r(s,f)?e(s[f])?s[f].push(v):s[f]=[s[f],v]:s[f]=v}return s};var e=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};
},{}],"Iocl":[function(require,module,exports) {
"use strict";var n=function(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}};module.exports=function(o,u,c,a){return u=u||"&",c=c||"=",null===o&&(o=void 0),"object"==typeof o?r(t(o),function(t){var a=encodeURIComponent(n(t))+c;return e(o[t])?r(o[t],function(e){return a+encodeURIComponent(n(e))}).join(u):a+encodeURIComponent(n(o[t]))}).join(u):a?encodeURIComponent(n(a))+c+encodeURIComponent(n(o)):""};var e=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)};function r(n,e){if(n.map)return n.map(e);for(var r=[],t=0;t<n.length;t++)r.push(e(n[t],t));return r}var t=Object.keys||function(n){var e=[];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.push(r);return e};
},{}],"oFEz":[function(require,module,exports) {
"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode");
},{"./decode":"fP26","./encode":"Iocl"}],"ilxG":[function(require,module,exports) {
"use strict";var t=require("punycode"),s=require("./util");function h(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}exports.parse=b,exports.resolve=O,exports.resolveObject=d,exports.format=q,exports.Url=h;var e=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,o=["<",">",'"',"`"," ","\r","\n","\t"],n=["{","}","|","\\","^","`"].concat(o),i=["'"].concat(n),l=["%","/","?",";","#"].concat(i),p=["/","?","#"],c=255,u=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=require("querystring");function b(t,e,a){if(t&&s.isObject(t)&&t instanceof h)return t;var r=new h;return r.parse(t,e,a),r}function q(t){return s.isString(t)&&(t=b(t)),t instanceof h?t.format():h.prototype.format.call(t)}function O(t,s){return b(t,!1,!0).resolve(s)}function d(t,s){return t?b(t,!1,!0).resolveObject(s):s}h.prototype.parse=function(h,a,o){if(!s.isString(h))throw new TypeError("Parameter 'url' must be a string, not "+typeof h);var n=h.indexOf("?"),b=-1!==n&&n<h.indexOf("#")?"?":"#",q=h.split(b);q[0]=q[0].replace(/\\/g,"/");var O=h=q.join(b);if(O=O.trim(),!o&&1===h.split("#").length){var d=r.exec(O);if(d)return this.path=O,this.href=O,this.pathname=d[1],d[2]?(this.search=d[2],this.query=a?y.parse(this.search.substr(1)):this.search.substr(1)):a&&(this.search="",this.query={}),this}var j=e.exec(O);if(j){var x=(j=j[0]).toLowerCase();this.protocol=x,O=O.substr(j.length)}if(o||j||O.match(/^\/\/[^@\/]+@[^@\/]+/)){var A="//"===O.substr(0,2);!A||j&&v[j]||(O=O.substr(2),this.slashes=!0)}if(!v[j]&&(A||j&&!g[j])){for(var C,I,w=-1,U=0;U<p.length;U++){-1!==(k=O.indexOf(p[U]))&&(-1===w||k<w)&&(w=k)}-1!==(I=-1===w?O.lastIndexOf("@"):O.lastIndexOf("@",w))&&(C=O.slice(0,I),O=O.slice(I+1),this.auth=decodeURIComponent(C)),w=-1;for(U=0;U<l.length;U++){var k;-1!==(k=O.indexOf(l[U]))&&(-1===w||k<w)&&(w=k)}-1===w&&(w=O.length),this.host=O.slice(0,w),O=O.slice(w),this.parseHost(),this.hostname=this.hostname||"";var N="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!N)for(var R=this.hostname.split(/\./),S=(U=0,R.length);U<S;U++){var $=R[U];if($&&!$.match(u)){for(var z="",H=0,L=$.length;H<L;H++)$.charCodeAt(H)>127?z+="x":z+=$[H];if(!z.match(u)){var Z=R.slice(0,U),_=R.slice(U+1),E=$.match(f);E&&(Z.push(E[1]),_.unshift(E[2])),_.length&&(O="/"+_.join(".")+O),this.hostname=Z.join(".");break}}}this.hostname.length>c?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=t.toASCII(this.hostname));var P=this.port?":"+this.port:"",T=this.hostname||"";this.host=T+P,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==O[0]&&(O="/"+O))}if(!m[x])for(U=0,S=i.length;U<S;U++){var B=i[U];if(-1!==O.indexOf(B)){var D=encodeURIComponent(B);D===B&&(D=escape(B)),O=O.split(B).join(D)}}var F=O.indexOf("#");-1!==F&&(this.hash=O.substr(F),O=O.slice(0,F));var G=O.indexOf("?");if(-1!==G?(this.search=O.substr(G),this.query=O.substr(G+1),a&&(this.query=y.parse(this.query)),O=O.slice(0,G)):a&&(this.search="",this.query={}),O&&(this.pathname=O),g[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){P=this.pathname||"";var J=this.search||"";this.path=P+J}return this.href=this.format(),this},h.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var h=this.protocol||"",e=this.pathname||"",a=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(o=y.stringify(this.query));var n=this.search||o&&"?"+o||"";return h&&":"!==h.substr(-1)&&(h+=":"),this.slashes||(!h||g[h])&&!1!==r?(r="//"+(r||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):r||(r=""),a&&"#"!==a.charAt(0)&&(a="#"+a),n&&"?"!==n.charAt(0)&&(n="?"+n),h+r+(e=e.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(n=n.replace("#","%23"))+a},h.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},h.prototype.resolveObject=function(t){if(s.isString(t)){var e=new h;e.parse(t,!1,!0),t=e}for(var a=new h,r=Object.keys(this),o=0;o<r.length;o++){var n=r[o];a[n]=this[n]}if(a.hash=t.hash,""===t.href)return a.href=a.format(),a;if(t.slashes&&!t.protocol){for(var i=Object.keys(t),l=0;l<i.length;l++){var p=i[l];"protocol"!==p&&(a[p]=t[p])}return g[a.protocol]&&a.hostname&&!a.pathname&&(a.path=a.pathname="/"),a.href=a.format(),a}if(t.protocol&&t.protocol!==a.protocol){if(!g[t.protocol]){for(var c=Object.keys(t),u=0;u<c.length;u++){var f=c[u];a[f]=t[f]}return a.href=a.format(),a}if(a.protocol=t.protocol,t.host||v[t.protocol])a.pathname=t.pathname;else{for(var m=(t.pathname||"").split("/");m.length&&!(t.host=m.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),a.pathname=m.join("/")}if(a.search=t.search,a.query=t.query,a.host=t.host||"",a.auth=t.auth,a.hostname=t.hostname||t.host,a.port=t.port,a.pathname||a.search){var y=a.pathname||"",b=a.search||"";a.path=y+b}return a.slashes=a.slashes||t.slashes,a.href=a.format(),a}var q=a.pathname&&"/"===a.pathname.charAt(0),O=t.host||t.pathname&&"/"===t.pathname.charAt(0),d=O||q||a.host&&t.pathname,j=d,x=a.pathname&&a.pathname.split("/")||[],A=(m=t.pathname&&t.pathname.split("/")||[],a.protocol&&!g[a.protocol]);if(A&&(a.hostname="",a.port=null,a.host&&(""===x[0]?x[0]=a.host:x.unshift(a.host)),a.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===m[0]?m[0]=t.host:m.unshift(t.host)),t.host=null),d=d&&(""===m[0]||""===x[0])),O)a.host=t.host||""===t.host?t.host:a.host,a.hostname=t.hostname||""===t.hostname?t.hostname:a.hostname,a.search=t.search,a.query=t.query,x=m;else if(m.length)x||(x=[]),x.pop(),x=x.concat(m),a.search=t.search,a.query=t.query;else if(!s.isNullOrUndefined(t.search)){if(A)a.hostname=a.host=x.shift(),(k=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=k.shift(),a.host=a.hostname=k.shift());return a.search=t.search,a.query=t.query,s.isNull(a.pathname)&&s.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.href=a.format(),a}if(!x.length)return a.pathname=null,a.search?a.path="/"+a.search:a.path=null,a.href=a.format(),a;for(var C=x.slice(-1)[0],I=(a.host||t.host||x.length>1)&&("."===C||".."===C)||""===C,w=0,U=x.length;U>=0;U--)"."===(C=x[U])?x.splice(U,1):".."===C?(x.splice(U,1),w++):w&&(x.splice(U,1),w--);if(!d&&!j)for(;w--;w)x.unshift("..");!d||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),I&&"/"!==x.join("/").substr(-1)&&x.push("");var k,N=""===x[0]||x[0]&&"/"===x[0].charAt(0);A&&(a.hostname=a.host=N?"":x.length?x.shift():"",(k=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=k.shift(),a.host=a.hostname=k.shift()));return(d=d||a.host&&x.length)&&!N&&x.unshift(""),x.length?a.pathname=x.join("/"):(a.pathname=null,a.path=null),s.isNull(a.pathname)&&s.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.auth=t.auth||a.auth,a.slashes=a.slashes||t.slashes,a.href=a.format(),a},h.prototype.parseHost=function(){var t=this.host,s=a.exec(t);s&&(":"!==(s=s[0])&&(this.port=s.substr(1)),t=t.substr(0,t.length-s.length)),t&&(this.hostname=t)};
},{"punycode":"v8R7","./util":"IaaW","querystring":"oFEz"}],"U9Z5":[function(require,module,exports) {
"use strict";var s=require("url"),e=require("fs");function r(r){if("/"===r.charAt(0))return{host:(a=r.split(" "))[0],database:a[1]};var t=s.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(r)?encodeURI(r).replace(/\%25(\d\d)/g,"%$1"):r,!0),a=t.query;for(var l in a)Array.isArray(a[l])&&(a[l]=a[l][a[l].length-1]);var o=(t.auth||":").split(":");if(a.user=o[0],a.password=o.splice(1).join(":"),a.port=t.port,"socket:"==t.protocol)return a.host=decodeURI(t.pathname),a.database=t.query.db,a.client_encoding=t.query.encoding,a;a.host=t.hostname;var c=t.pathname;return c&&"/"===c.charAt(0)&&(c=t.pathname.slice(1)||null),a.database=c&&decodeURI(c),"true"!==a.ssl&&"1"!==a.ssl||(a.ssl=!0),"0"===a.ssl&&(a.ssl=!1),(a.sslcert||a.sslkey||a.sslrootcert)&&(a.ssl={}),a.sslcert&&(a.ssl.cert=e.readFileSync(a.sslcert).toString()),a.sslkey&&(a.ssl.key=e.readFileSync(a.sslkey).toString()),a.sslrootcert&&(a.ssl.ca=e.readFileSync(a.sslrootcert).toString()),a}module.exports=r,r.parse=r;
},{"url":"ilxG","fs":"vBel"}],"spQJ":[function(require,module,exports) {
var process = require("process");
var e=require("process"),r=require("url"),t=require("pg-connection-string"),n=t.parse,o=n,s=e&&e.platform&&"win32"===e.platform;function a(e){var r={},t=e.pathname;if("/"===t[0]&&(t=t.slice(1)),r.database=t,e.hostname&&(0===e.protocol.indexOf("mssql")?r.server=e.hostname:r.host=e.hostname),e.port&&(r.port=e.port),e.auth){var n=e.auth.indexOf(":");-1!==n?(r.user=e.auth.slice(0,n),n<e.auth.length-1&&(r.password=e.auth.slice(n+1))):r.user=e.auth}if(e.query)for(var o in e.query)r[o]=e.query[o];return r}module.exports=function(e){var t=r.parse(e,!0),n=t.protocol,i=s&&n&&2===n.length;return null===n||i?{client:"sqlite3",connection:{filename:e}}:(":"===n.slice(-1)&&(n=n.slice(0,-1)),{client:n,connection:["postgresql","postgres"].includes(n)?o(e):a(t)})};
},{"url":"ilxG","pg-connection-string":"U9Z5","process":"FeV4"}],"uAaf":[function(require,module,exports) {
var r=require("../formatter"),e={formatter:function(t){return new r(e,t)}};module.exports=e;
},{"../formatter":"MHdB"}],"iuZA":[function(require,module,exports) {
var e=require("./raw"),n=require("./client"),r=require("./query/builder"),i=require("./query/methods"),t=require("./util/make-knex"),o=require("./util/parse-connection"),c=require("./util/timeout"),u=c.KnexTimeoutError,a=require("./util/fake-client"),s=require("./constants"),l=s.SUPPORTED_CLIENTS,f=require("./helpers"),d=f.resolveClientNameWithAliases;function p(e){var r;if("string"==typeof e)return new p(Object.assign(o(e),arguments[2]));if(0===arguments.length||!e.client&&!e.dialect)r=n;else if("function"==typeof e.client&&e.client.prototype instanceof n)r=e.client;else{var i=e.client||e.dialect;if(!l.includes(i))throw new Error("knex: Unknown configuration option 'client' value ".concat(i,". Note that it is case-sensitive, check documentation for supported values."));var c=d(i);r=require("./dialects/".concat(c,"/index.js"))}"string"==typeof e.connection&&(e=Object.assign({},e,{connection:o(e.connection).connection}));var u=t(new r(e));return e.userParams&&(u.userParams=e.userParams),u}p.Client=n,p.KnexTimeoutError=u,p.QueryBuilder={extend:function(e,n){r.extend(e,n),i.push(e)}},p.raw=function(n,r){return console.warn("global Knex.raw is deprecated, use knex.raw (chain off an initialized knex object)"),new e(a).set(n,r)},module.exports=p;
},{"./raw":"WMLC","./client":"ZNtt","./query/builder":"kl48","./query/methods":"nDtM","./util/make-knex":"ybMW","./util/parse-connection":"spQJ","./util/timeout":"pSnv","./util/fake-client":"uAaf","./constants":"Bofi","./helpers":"RYfD"}],"wIsS":[function(require,module,exports) {
var e=require("./knex");module.exports=e;
},{"./knex":"iuZA"}],"dnzg":[function(require,module,exports) {
module.exports=require("./lib/index");
},{"./lib/index":"wIsS"}],"zMYB":[function(require,module,exports) {
function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}var i=require("objection"),o=i.Model,r=require("knex"),a=require("@reldens/utils"),c=a.Logger,s=a.ErrorManager,u=function(){function n(){e(this,n)}return t(n,[{key:"initialize",value:function(){this.prepareDbConfig(),this.config.user||s.error("Missing storage user configuration."),this.config.database||s.error("Missing storage database name configuration.");var e=this.config,n=e.host,t=e.port,i=e.database,o=e.user,r=e.password;c.info("".concat(this.client,"://").concat(o).concat(r?":"+r:"","@").concat(n,":").concat(t,"/").concat(i));try{this.prepareObjection(),c.info("Objection JS ready!")}catch(a){s.error("Objection JS - ERROR: "+a)}}},{key:"prepareDbConfig",value:function(){this.client="mysql",this.config={host:"localhost",port:Number(void 0)||3306,database:!1,user:!1,password:"",connectionLimit:Number(void 0)||10}}},{key:"prepareObjection",value:function(){this.knex=r({client:this.client,connection:this.config}),this.model=o.knex(this.knex)}}]),n}();module.exports.DataServer=new u;
},{"objection":"StH2","knex":"dnzg","@reldens/utils":"nQnG"}],"QG6J":[function(require,module,exports) {
function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}function r(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=require("objection"),a=l.Model,p=function(t){function n(){return e(this,n),r(this,u(n).apply(this,arguments))}return f(n,a),o(n,null,[{key:"tableName",get:function(){return"items_inventory"}},{key:"relationMappings",get:function(){var t=require("./item").ItemModel;return{items_item:{relation:a.HasOneRelation,modelClass:t,join:{from:"items_inventory.item_id",to:"items_item.id"}}}}}]),n}();module.exports.InventoryModel=p;
},{"objection":"StH2","./item":"pXrp"}],"rIrS":[function(require,module,exports) {
function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function r(e,o){return!o||"object"!==t(o)&&"function"!=typeof o?u(e):o}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=require("objection"),p=l.Model,a=function(t){function o(){return e(this,o),r(this,i(o).apply(this,arguments))}return c(o,p),n(o,null,[{key:"tableName",get:function(){return"items_group"}}]),o}();module.exports.GroupModel=a;
},{"objection":"StH2"}],"T3yc":[function(require,module,exports) {
function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function r(t,o){return!o||"object"!==e(o)&&"function"!=typeof o?i(t):o}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=require("objection"),a=l.Model,p=require("./item"),s=p.ItemModel,y=function(e){function o(){return t(this,o),r(this,u(o).apply(this,arguments))}return f(o,a),n(o,null,[{key:"tableName",get:function(){return"items_item_modifiers"}},{key:"relationMappings",get:function(){return{items_group_id:{relation:a.BelongsToOneRelation,modelClass:s,join:{from:"items_item_modifiers.item_id",to:"items_item.id"}}}}}]),o}();module.exports.ModifiersModel=y;
},{"objection":"StH2","./item":"pXrp"}],"pXrp":[function(require,module,exports) {
function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function r(t,o){return!o||"object"!==e(o)&&"function"!=typeof o?i(t):o}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=require("objection"),c=s.Model,a=require("./inventory"),m=a.InventoryModel,p=require("./group"),y=p.InventoryGroup,b=require("./modifiers"),_=b.InventoryModifiers,d=function(e){function o(){return t(this,o),r(this,u(o).apply(this,arguments))}return f(o,c),n(o,null,[{key:"tableName",get:function(){return"items_item"}},{key:"relationMappings",get:function(){return{items_inventory:{relation:c.BelongsToOneRelation,modelClass:m,join:{from:"items_item.id",to:"items_inventory.item_id"}},items_group_id:{relation:c.HasOneRelation,modelClass:y,join:{from:"items_item.group_id",to:"items_group.id"}},items_modifiers:{relation:c.HasManyRelation,modelClass:_,join:{from:"items_item.id",to:"items_item_modifiers.item_id"}}}}}]),o}();module.exports.ItemModel=d;
},{"objection":"StH2","./inventory":"QG6J","./group":"rIrS","./modifiers":"T3yc"}],"jK7s":[function(require,module,exports) {
function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var n=require("@reldens/storage"),i=n.DataServer,a=require("./models/item"),u=a.ItemModel,s=require("./models/group"),o=s.GroupModel,c=require("./models/inventory"),d=c.InventoryModel,l=require("../../items-events"),y=function(){function r(){e(this,r),this.dataServer=i,this.dataServer.initialize(),this.models={item:u,group:o,inventory:d}}return t(r,[{key:"loadOwnerItems",value:function(e){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.models.inventory.query().where("owner_id",e).withGraphFetched("[items_item]"));case 1:case"end":return r.stop()}},null,this)}},{key:"onAddItem",value:function(e,r){var t,n;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return t={id:null,owner_id:e.getOwnerId(),item_id:r.item_id,qty:r.qty},{}.hasOwnProperty.call(r,"remaining_uses")&&(t.remaining_uses=r.remaining_uses),{}.hasOwnProperty.call(r,"is_active")&&(t.is_active=r.is_active),i.next=5,regeneratorRuntime.awrap(this.models.inventory.query().insert(t));case 5:return n=i.sent,r.id=n.id,i.abrupt("return",r);case 8:case"end":return i.stop()}},null,this)}},{key:"onRemoveItem",value:function(e,r){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.models.inventory.query().where("id",e.items[r].id).delete());case 1:case"end":return t.stop()}},null,this)}},{key:"onModifyItemQty",value:function(e,r,t,n,i){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.models.inventory.query().patch({qty:e.qty}).findById(e.id));case 1:case"end":return r.stop()}},null,this)}},{key:"onEquipItem",value:function(e){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.models.inventory.query().patch({is_active:1}).findById(e.id));case 1:case"end":return r.stop()}},null,this)}},{key:"onUnequipItem",value:function(e){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.models.inventory.query().patch({is_active:0}).findById(e.id));case 1:case"end":return r.stop()}},null,this)}},{key:"onChangedModifiers",value:function(e,r){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.manager.owner.persistData({act:r,item:e}));case 1:case"end":return t.stop()}})}},{key:"onExecutedItem",value:function(e){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==e.uses){r.next=3;break}return r.next=3,regeneratorRuntime.awrap(this.models.inventory.query().findById(e.id).delete());case 3:return r.abrupt("return",e.manager.owner.persistData({act:l.EXECUTED_ITEM,item:e}));case 4:case"end":return r.stop()}},null,this)}}]),r}();module.exports.ModelsManager=y;
},{"@reldens/storage":"zMYB","./models/item":"pXrp","./models/group":"rIrS","./models/inventory":"QG6J","../../items-events":"D4tT"}],"rsbe":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e=arguments[3],r=require("process"),o=65536,n=4294967295;function t(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}var s=require("safe-buffer").Buffer,u=e.crypto||e.msCrypto;function a(e,t){if(e>n)throw new RangeError("requested too many random bytes");var a=s.allocUnsafe(e);if(e>0)if(e>o)for(var f=0;f<e;f+=o)u.getRandomValues(a.slice(f,f+o));else u.getRandomValues(a);return"function"==typeof t?r.nextTick(function(){t(null,a)}):a}u&&u.getRandomValues?module.exports=a:module.exports=t;
},{"safe-buffer":"v6q9","process":"FeV4"}],"A6Oy":[function(require,module,exports) {

"use strict";var t=require("safe-buffer").Buffer,e=require("stream").Transform,i=require("inherits");function r(e,i){if(!t.isBuffer(e)&&"string"!=typeof e)throw new TypeError(i+" must be a string or a buffer")}function o(i){e.call(this),this._block=t.allocUnsafe(i),this._blockSize=i,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}i(o,e),o.prototype._transform=function(t,e,i){var r=null;try{this.update(t,e)}catch(o){r=o}i(r)},o.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(i){e=i}t(e)},o.prototype.update=function(e,i){if(r(e,"Data"),this._finalized)throw new Error("Digest already called");t.isBuffer(e)||(e=t.from(e,i));for(var o=this._block,s=0;this._blockOffset+e.length-s>=this._blockSize;){for(var f=this._blockOffset;f<this._blockSize;)o[f++]=e[s++];this._update(),this._blockOffset=0}for(;s<e.length;)o[this._blockOffset++]=e[s++];for(var n=0,h=8*e.length;h>0;++n)this._length[n]+=h,(h=this._length[n]/4294967296|0)>0&&(this._length[n]-=4294967296*h);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return e},o.prototype._digest=function(){throw new Error("_digest is not implemented")},module.exports=o;
},{"safe-buffer":"v6q9","stream":"kPjL","inherits":"Thv4"}],"lB4T":[function(require,module,exports) {

"use strict";var t=require("inherits"),i=require("hash-base"),s=require("safe-buffer").Buffer,e=new Array(16);function h(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function r(t,i){return t<<i|t>>>32-i}function _(t,i,s,e,h,_,n){return r(t+(i&s|~i&e)+h+_|0,n)+i|0}function n(t,i,s,e,h,_,n){return r(t+(i&e|s&~e)+h+_|0,n)+i|0}function c(t,i,s,e,h,_,n){return r(t+(i^s^e)+h+_|0,n)+i|0}function f(t,i,s,e,h,_,n){return r(t+(s^(i|~e))+h+_|0,n)+i|0}t(h,i),h.prototype._update=function(){for(var t=e,i=0;i<16;++i)t[i]=this._block.readInt32LE(4*i);var s=this._a,h=this._b,r=this._c,o=this._d;s=_(s,h,r,o,t[0],3614090360,7),o=_(o,s,h,r,t[1],3905402710,12),r=_(r,o,s,h,t[2],606105819,17),h=_(h,r,o,s,t[3],3250441966,22),s=_(s,h,r,o,t[4],4118548399,7),o=_(o,s,h,r,t[5],1200080426,12),r=_(r,o,s,h,t[6],2821735955,17),h=_(h,r,o,s,t[7],4249261313,22),s=_(s,h,r,o,t[8],1770035416,7),o=_(o,s,h,r,t[9],2336552879,12),r=_(r,o,s,h,t[10],4294925233,17),h=_(h,r,o,s,t[11],2304563134,22),s=_(s,h,r,o,t[12],1804603682,7),o=_(o,s,h,r,t[13],4254626195,12),r=_(r,o,s,h,t[14],2792965006,17),s=n(s,h=_(h,r,o,s,t[15],1236535329,22),r,o,t[1],4129170786,5),o=n(o,s,h,r,t[6],3225465664,9),r=n(r,o,s,h,t[11],643717713,14),h=n(h,r,o,s,t[0],3921069994,20),s=n(s,h,r,o,t[5],3593408605,5),o=n(o,s,h,r,t[10],38016083,9),r=n(r,o,s,h,t[15],3634488961,14),h=n(h,r,o,s,t[4],3889429448,20),s=n(s,h,r,o,t[9],568446438,5),o=n(o,s,h,r,t[14],3275163606,9),r=n(r,o,s,h,t[3],4107603335,14),h=n(h,r,o,s,t[8],1163531501,20),s=n(s,h,r,o,t[13],2850285829,5),o=n(o,s,h,r,t[2],4243563512,9),r=n(r,o,s,h,t[7],1735328473,14),s=c(s,h=n(h,r,o,s,t[12],2368359562,20),r,o,t[5],4294588738,4),o=c(o,s,h,r,t[8],2272392833,11),r=c(r,o,s,h,t[11],1839030562,16),h=c(h,r,o,s,t[14],4259657740,23),s=c(s,h,r,o,t[1],2763975236,4),o=c(o,s,h,r,t[4],1272893353,11),r=c(r,o,s,h,t[7],4139469664,16),h=c(h,r,o,s,t[10],3200236656,23),s=c(s,h,r,o,t[13],681279174,4),o=c(o,s,h,r,t[0],3936430074,11),r=c(r,o,s,h,t[3],3572445317,16),h=c(h,r,o,s,t[6],76029189,23),s=c(s,h,r,o,t[9],3654602809,4),o=c(o,s,h,r,t[12],3873151461,11),r=c(r,o,s,h,t[15],530742520,16),s=f(s,h=c(h,r,o,s,t[2],3299628645,23),r,o,t[0],4096336452,6),o=f(o,s,h,r,t[7],1126891415,10),r=f(r,o,s,h,t[14],2878612391,15),h=f(h,r,o,s,t[5],4237533241,21),s=f(s,h,r,o,t[12],1700485571,6),o=f(o,s,h,r,t[3],2399980690,10),r=f(r,o,s,h,t[10],4293915773,15),h=f(h,r,o,s,t[1],2240044497,21),s=f(s,h,r,o,t[8],1873313359,6),o=f(o,s,h,r,t[15],4264355552,10),r=f(r,o,s,h,t[6],2734768916,15),h=f(h,r,o,s,t[13],1309151649,21),s=f(s,h,r,o,t[4],4149444226,6),o=f(o,s,h,r,t[11],3174756917,10),r=f(r,o,s,h,t[2],718787259,15),h=f(h,r,o,s,t[9],3951481745,21),this._a=this._a+s|0,this._b=this._b+h|0,this._c=this._c+r|0,this._d=this._d+o|0},h.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=s.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},module.exports=h;
},{"inherits":"Thv4","hash-base":"A6Oy","safe-buffer":"v6q9"}],"kqxN":[function(require,module,exports) {

"use strict";var t=require("buffer").Buffer,i=require("inherits"),s=require("hash-base"),h=new Array(16),e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],_=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],r=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],n=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],c=[0,1518500249,1859775393,2400959708,2840853838],o=[1352829926,1548603684,1836072691,2053994217,0];function f(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function u(t,i){return t<<i|t>>>32-i}function l(t,i,s,h,e,_,r,n){return u(t+(i^s^h)+_+r|0,n)+e|0}function a(t,i,s,h,e,_,r,n){return u(t+(i&s|~i&h)+_+r|0,n)+e|0}function b(t,i,s,h,e,_,r,n){return u(t+((i|~s)^h)+_+r|0,n)+e|0}function d(t,i,s,h,e,_,r,n){return u(t+(i&h|s&~h)+_+r|0,n)+e|0}function k(t,i,s,h,e,_,r,n){return u(t+(i^(s|~h))+_+r|0,n)+e|0}i(f,s),f.prototype._update=function(){for(var t=h,i=0;i<16;++i)t[i]=this._block.readInt32LE(4*i);for(var s=0|this._a,f=0|this._b,w=0|this._c,p=0|this._d,E=0|this._e,I=0|this._a,L=0|this._b,v=0|this._c,O=0|this._d,g=0|this._e,q=0;q<80;q+=1){var y,U;q<16?(y=l(s,f,w,p,E,t[e[q]],c[0],r[q]),U=k(I,L,v,O,g,t[_[q]],o[0],n[q])):q<32?(y=a(s,f,w,p,E,t[e[q]],c[1],r[q]),U=d(I,L,v,O,g,t[_[q]],o[1],n[q])):q<48?(y=b(s,f,w,p,E,t[e[q]],c[2],r[q]),U=b(I,L,v,O,g,t[_[q]],o[2],n[q])):q<64?(y=d(s,f,w,p,E,t[e[q]],c[3],r[q]),U=a(I,L,v,O,g,t[_[q]],o[3],n[q])):(y=k(s,f,w,p,E,t[e[q]],c[4],r[q]),U=l(I,L,v,O,g,t[_[q]],o[4],n[q])),s=E,E=p,p=u(w,10),w=f,f=y,I=g,g=O,O=u(v,10),v=L,L=U}var m=this._b+w+O|0;this._b=this._c+p+g|0,this._c=this._d+E+I|0,this._d=this._e+s+L|0,this._e=this._a+f+v|0,this._a=m},f.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var i=t.alloc?t.alloc(20):new t(20);return i.writeInt32LE(this._a,0),i.writeInt32LE(this._b,4),i.writeInt32LE(this._c,8),i.writeInt32LE(this._d,12),i.writeInt32LE(this._e,16),i},module.exports=f;
},{"buffer":"FaCw","inherits":"Thv4","hash-base":"A6Oy"}],"vhkI":[function(require,module,exports) {

var t=require("safe-buffer").Buffer;function i(i,e){this._block=t.alloc(i),this._finalSize=e,this._blockSize=i,this._len=0}i.prototype.update=function(i,e){"string"==typeof i&&(e=e||"utf8",i=t.from(i,e));for(var s=this._block,o=this._blockSize,l=i.length,h=this._len,r=0;r<l;){for(var _=h%o,n=Math.min(l-r,o-_),c=0;c<n;c++)s[_+c]=i[r+c];r+=n,(h+=n)%o==0&&this._update(s)}return this._len+=l,this},i.prototype.digest=function(t){var i=this._len%this._blockSize;this._block[i]=128,this._block.fill(0,i+1),i>=this._finalSize&&(this._update(this._block),this._block.fill(0));var e=8*this._len;if(e<=4294967295)this._block.writeUInt32BE(e,this._blockSize-4);else{var s=(4294967295&e)>>>0,o=(e-s)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var l=this._hash();return t?l.toString(t):l},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},module.exports=i;
},{"safe-buffer":"v6q9"}],"jvc0":[function(require,module,exports) {

var t=require("inherits"),i=require("./hash"),r=require("safe-buffer").Buffer,s=[1518500249,1859775393,-1894007588,-899497514],h=new Array(80);function e(){this.init(),this._w=h,i.call(this,64,56)}function n(t){return t<<5|t>>>27}function _(t){return t<<30|t>>>2}function a(t,i,r,s){return 0===t?i&r|~i&s:2===t?i&r|i&s|r&s:i^r^s}t(e,i),e.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},e.prototype._update=function(t){for(var i=this._w,r=0|this._a,h=0|this._b,e=0|this._c,o=0|this._d,u=0|this._e,f=0;f<16;++f)i[f]=t.readInt32BE(4*f);for(;f<80;++f)i[f]=i[f-3]^i[f-8]^i[f-14]^i[f-16];for(var c=0;c<80;++c){var d=~~(c/20),p=n(r)+a(d,h,e,o)+u+i[c]+s[d]|0;u=o,o=e,e=_(h),h=r,r=p}this._a=r+this._a|0,this._b=h+this._b|0,this._c=e+this._c|0,this._d=o+this._d|0,this._e=u+this._e|0},e.prototype._hash=function(){var t=r.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},module.exports=e;
},{"inherits":"Thv4","./hash":"vhkI","safe-buffer":"v6q9"}],"W9cm":[function(require,module,exports) {

var t=require("inherits"),i=require("./hash"),r=require("safe-buffer").Buffer,s=[1518500249,1859775393,-1894007588,-899497514],e=new Array(80);function h(){this.init(),this._w=e,i.call(this,64,56)}function n(t){return t<<1|t>>>31}function _(t){return t<<5|t>>>27}function u(t){return t<<30|t>>>2}function o(t,i,r,s){return 0===t?i&r|~i&s:2===t?i&r|i&s|r&s:i^r^s}t(h,i),h.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},h.prototype._update=function(t){for(var i=this._w,r=0|this._a,e=0|this._b,h=0|this._c,a=0|this._d,f=0|this._e,c=0;c<16;++c)i[c]=t.readInt32BE(4*c);for(;c<80;++c)i[c]=n(i[c-3]^i[c-8]^i[c-14]^i[c-16]);for(var d=0;d<80;++d){var p=~~(d/20),w=_(r)+o(p,e,h,a)+f+i[d]+s[p]|0;f=a,a=h,h=u(e),e=r,r=w}this._a=r+this._a|0,this._b=e+this._b|0,this._c=h+this._c|0,this._d=a+this._d|0,this._e=f+this._e|0},h.prototype._hash=function(){var t=r.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},module.exports=h;
},{"inherits":"Thv4","./hash":"vhkI","safe-buffer":"v6q9"}],"nuMH":[function(require,module,exports) {

var t=require("inherits"),i=require("./hash"),h=require("safe-buffer").Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=new Array(64);function _(){this.init(),this._w=r,i.call(this,64,56)}function n(t,i,h){return h^t&(i^h)}function e(t,i,h){return t&i|h&(t|i)}function u(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function f(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function o(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function a(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}t(_,i),_.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},_.prototype._update=function(t){for(var i=this._w,h=0|this._a,r=0|this._b,_=0|this._c,c=0|this._d,w=0|this._e,B=0|this._f,E=0|this._g,I=0|this._h,d=0;d<16;++d)i[d]=t.readInt32BE(4*d);for(;d<64;++d)i[d]=a(i[d-2])+i[d-7]+o(i[d-15])+i[d-16]|0;for(var p=0;p<64;++p){var b=I+f(w)+n(w,B,E)+s[p]+i[p]|0,g=u(h)+e(h,r,_)|0;I=E,E=B,B=w,w=c+b|0,c=_,_=r,r=h,h=b+g|0}this._a=h+this._a|0,this._b=r+this._b|0,this._c=_+this._c|0,this._d=c+this._d|0,this._e=w+this._e|0,this._f=B+this._f|0,this._g=E+this._g|0,this._h=I+this._h|0},_.prototype._hash=function(){var t=h.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},module.exports=_;
},{"inherits":"Thv4","./hash":"vhkI","safe-buffer":"v6q9"}],"vdAV":[function(require,module,exports) {

var t=require("inherits"),i=require("./sha256"),e=require("./hash"),r=require("safe-buffer").Buffer,h=new Array(64);function s(){this.init(),this._w=h,e.call(this,64,56)}t(s,i),s.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},s.prototype._hash=function(){var t=r.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},module.exports=s;
},{"inherits":"Thv4","./sha256":"nuMH","./hash":"vhkI","safe-buffer":"v6q9"}],"bhFw":[function(require,module,exports) {

var h=require("inherits"),t=require("./hash"),i=require("safe-buffer").Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],_=new Array(160);function l(){this.init(),this._w=_,t.call(this,128,112)}function r(h,t,i){return i^h&(t^i)}function n(h,t,i){return h&t|i&(h|t)}function e(h,t){return(h>>>28|t<<4)^(t>>>2|h<<30)^(t>>>7|h<<25)}function f(h,t){return(h>>>14|t<<18)^(h>>>18|t<<14)^(t>>>9|h<<23)}function u(h,t){return(h>>>1|t<<31)^(h>>>8|t<<24)^h>>>7}function a(h,t){return(h>>>1|t<<31)^(h>>>8|t<<24)^(h>>>7|t<<25)}function c(h,t){return(h>>>19|t<<13)^(t>>>29|h<<3)^h>>>6}function o(h,t){return(h>>>19|t<<13)^(t>>>29|h<<3)^(h>>>6|t<<26)}function d(h,t){return h>>>0<t>>>0?1:0}h(l,t),l.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},l.prototype._update=function(h){for(var t=this._w,i=0|this._ah,_=0|this._bh,l=0|this._ch,b=0|this._dh,g=0|this._eh,p=0|this._fh,v=0|this._gh,w=0|this._hh,B=0|this._al,y=0|this._bl,E=0|this._cl,I=0|this._dl,q=0|this._el,m=0|this._fl,x=0|this._gl,A=0|this._hl,U=0;U<32;U+=2)t[U]=h.readInt32BE(4*U),t[U+1]=h.readInt32BE(4*U+4);for(;U<160;U+=2){var j=t[U-30],k=t[U-30+1],z=u(j,k),C=a(k,j),D=c(j=t[U-4],k=t[U-4+1]),F=o(k,j),G=t[U-14],H=t[U-14+1],J=t[U-32],K=t[U-32+1],L=C+H|0,M=z+G+d(L,C)|0;M=(M=M+D+d(L=L+F|0,F)|0)+J+d(L=L+K|0,K)|0,t[U]=M,t[U+1]=L}for(var N=0;N<160;N+=2){M=t[N],L=t[N+1];var O=n(i,_,l),P=n(B,y,E),Q=e(i,B),R=e(B,i),S=f(g,q),T=f(q,g),V=s[N],W=s[N+1],X=r(g,p,v),Y=r(q,m,x),Z=A+T|0,$=w+S+d(Z,A)|0;$=($=($=$+X+d(Z=Z+Y|0,Y)|0)+V+d(Z=Z+W|0,W)|0)+M+d(Z=Z+L|0,L)|0;var hh=R+P|0,th=Q+O+d(hh,R)|0;w=v,A=x,v=p,x=m,p=g,m=q,g=b+$+d(q=I+Z|0,I)|0,b=l,I=E,l=_,E=y,_=i,y=B,i=$+th+d(B=Z+hh|0,Z)|0}this._al=this._al+B|0,this._bl=this._bl+y|0,this._cl=this._cl+E|0,this._dl=this._dl+I|0,this._el=this._el+q|0,this._fl=this._fl+m|0,this._gl=this._gl+x|0,this._hl=this._hl+A|0,this._ah=this._ah+i+d(this._al,B)|0,this._bh=this._bh+_+d(this._bl,y)|0,this._ch=this._ch+l+d(this._cl,E)|0,this._dh=this._dh+b+d(this._dl,I)|0,this._eh=this._eh+g+d(this._el,q)|0,this._fh=this._fh+p+d(this._fl,m)|0,this._gh=this._gh+v+d(this._gl,x)|0,this._hh=this._hh+w+d(this._hl,A)|0},l.prototype._hash=function(){var h=i.allocUnsafe(64);function t(t,i,s){h.writeInt32BE(t,s),h.writeInt32BE(i,s+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),h},module.exports=l;
},{"inherits":"Thv4","./hash":"vhkI","safe-buffer":"v6q9"}],"OoHP":[function(require,module,exports) {

var h=require("inherits"),t=require("./sha512"),i=require("./hash"),s=require("safe-buffer").Buffer,_=new Array(160);function e(){this.init(),this._w=_,i.call(this,128,112)}h(e,t),e.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},e.prototype._hash=function(){var h=s.allocUnsafe(48);function t(t,i,s){h.writeInt32BE(t,s),h.writeInt32BE(i,s+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),h},module.exports=e;
},{"inherits":"Thv4","./sha512":"bhFw","./hash":"vhkI","safe-buffer":"v6q9"}],"hVan":[function(require,module,exports) {
var e=module.exports=function(r){r=r.toLowerCase();var s=e[r];if(!s)throw new Error(r+" is not supported (we accept pull requests)");return new s};e.sha=require("./sha"),e.sha1=require("./sha1"),e.sha224=require("./sha224"),e.sha256=require("./sha256"),e.sha384=require("./sha384"),e.sha512=require("./sha512");
},{"./sha":"jvc0","./sha1":"W9cm","./sha224":"vdAV","./sha256":"nuMH","./sha384":"OoHP","./sha512":"bhFw"}],"JyeZ":[function(require,module,exports) {

var t=require("safe-buffer").Buffer,i=require("stream").Transform,r=require("string_decoder").StringDecoder,e=require("inherits");function n(t){i.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}e(n,i),n.prototype.update=function(i,r,e){"string"==typeof i&&(i=t.from(i,r));var n=this._update(i);return this.hashMode?this:(e&&(n=this._toString(n,e)),n)},n.prototype.setAutoPadding=function(){},n.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},n.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},n.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},n.prototype._transform=function(t,i,r){var e;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(n){e=n}finally{r(e)}},n.prototype._flush=function(t){var i;try{this.push(this.__final())}catch(r){i=r}t(i)},n.prototype._finalOrDigest=function(i){var r=this.__final()||t.alloc(0);return i&&(r=this._toString(r,i,!0)),r},n.prototype._toString=function(t,i,e){if(this._decoder||(this._decoder=new r(i),this._encoding=i),this._encoding!==i)throw new Error("can't switch encodings");var n=this._decoder.write(t);return e&&(n+=this._decoder.end()),n},module.exports=n;
},{"safe-buffer":"v6q9","stream":"kPjL","string_decoder":"VJHU","inherits":"Thv4"}],"ASKV":[function(require,module,exports) {
"use strict";var e=require("inherits"),r=require("md5.js"),t=require("ripemd160"),i=require("sha.js"),s=require("cipher-base");function n(e){s.call(this,"digest"),this._hash=e}e(n,s),n.prototype._update=function(e){this._hash.update(e)},n.prototype._final=function(){return this._hash.digest()},module.exports=function(e){return"md5"===(e=e.toLowerCase())?new r:"rmd160"===e||"ripemd160"===e?new t:new n(i(e))};
},{"inherits":"Thv4","md5.js":"lB4T","ripemd160":"kqxN","sha.js":"hVan","cipher-base":"JyeZ"}],"Lw7t":[function(require,module,exports) {

"use strict";var t=require("inherits"),e=require("safe-buffer").Buffer,a=require("cipher-base"),i=e.alloc(128),s=64;function h(t,h){a.call(this,"digest"),"string"==typeof h&&(h=e.from(h)),this._alg=t,this._key=h,h.length>s?h=t(h):h.length<s&&(h=e.concat([h,i],s));for(var r=this._ipad=e.allocUnsafe(s),o=this._opad=e.allocUnsafe(s),n=0;n<s;n++)r[n]=54^h[n],o[n]=92^h[n];this._hash=[r]}t(h,a),h.prototype._update=function(t){this._hash.push(t)},h.prototype._final=function(){var t=this._alg(e.concat(this._hash));return this._alg(e.concat([this._opad,t]))},module.exports=h;
},{"inherits":"Thv4","safe-buffer":"v6q9","cipher-base":"JyeZ"}],"y4o1":[function(require,module,exports) {
var e=require("md5.js");module.exports=function(r){return(new e).update(r).digest()};
},{"md5.js":"lB4T"}],"dgFM":[function(require,module,exports) {

"use strict";var e=require("inherits"),t=require("./legacy"),r=require("cipher-base"),a=require("safe-buffer").Buffer,i=require("create-hash/md5"),s=require("ripemd160"),h=require("sha.js"),n=a.alloc(128);function d(e,t){r.call(this,"digest"),"string"==typeof t&&(t=a.from(t));var i="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=t,t.length>i)?t=("rmd160"===e?new s:h(e)).update(t).digest():t.length<i&&(t=a.concat([t,n],i));for(var d=this._ipad=a.allocUnsafe(i),u=this._opad=a.allocUnsafe(i),o=0;o<i;o++)d[o]=54^t[o],u[o]=92^t[o];this._hash="rmd160"===e?new s:h(e),this._hash.update(d)}e(d,r),d.prototype._update=function(e){this._hash.update(e)},d.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new s:h(this._alg)).update(this._opad).update(e).digest()},module.exports=function(e,r){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new d("rmd160",r):"md5"===e?new t(i,r):new d(e,r)};
},{"inherits":"Thv4","./legacy":"Lw7t","cipher-base":"JyeZ","safe-buffer":"v6q9","create-hash/md5":"y4o1","ripemd160":"kqxN","sha.js":"hVan"}],"ni6t":[function(require,module,exports) {
module.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};
},{}],"cl3H":[function(require,module,exports) {
module.exports=require("./browser/algorithms.json");
},{"./browser/algorithms.json":"ni6t"}],"INx3":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer,e=Math.pow(2,30)-1;function o(e,o){if("string"!=typeof e&&!r.isBuffer(e))throw new TypeError(o+" must be a buffer or string")}module.exports=function(r,t,n,f){if(o(r,"Password"),o(t,"Salt"),"number"!=typeof n)throw new TypeError("Iterations not a number");if(n<0)throw new TypeError("Bad iterations");if("number"!=typeof f)throw new TypeError("Key length not a number");if(f<0||f>e||f!=f)throw new TypeError("Bad key length")};
},{"buffer":"FaCw"}],"G0Ti":[function(require,module,exports) {
var process = require("process");
var e,r,o=require("process");e="utf-8",module.exports=e;
},{"process":"FeV4"}],"Ak4o":[function(require,module,exports) {

var e=require("create-hash/md5"),r=require("ripemd160"),a=require("sha.js"),i=require("./precondition"),t=require("./default-encoding"),s=require("safe-buffer").Buffer,n=s.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function o(e,r,a){var i=u(e),t="sha512"===e||"sha384"===e?128:64;r.length>t?r=i(r):r.length<t&&(r=s.concat([r,n],t));for(var o=s.allocUnsafe(t+h[e]),f=s.allocUnsafe(t+h[e]),c=0;c<t;c++)o[c]=54^r[c],f[c]=92^r[c];var l=s.allocUnsafe(t+a+4);o.copy(l,0,0,t),this.ipad1=l,this.ipad2=o,this.opad=f,this.alg=e,this.blocksize=t,this.hash=i,this.size=h[e]}function u(i){return"rmd160"===i||"ripemd160"===i?function(e){return(new r).update(e).digest()}:"md5"===i?e:function(e){return a(i).update(e).digest()}}function f(e,r,a,n,u){i(e,r,a,n),s.isBuffer(e)||(e=s.from(e,t)),s.isBuffer(r)||(r=s.from(r,t));var f=new o(u=u||"sha1",e,r.length),c=s.allocUnsafe(n),l=s.allocUnsafe(r.length+4);r.copy(l,0,0,r.length);for(var d=0,p=h[u],m=Math.ceil(n/p),g=1;g<=m;g++){l.writeUInt32BE(g,r.length);for(var v=f.run(l,f.ipad1),q=v,y=1;y<a;y++){q=f.run(q,f.ipad2);for(var U=0;U<p;U++)v[U]^=q[U]}v.copy(c,d),d+=p}return c}o.prototype.run=function(e,r){return e.copy(r,this.blocksize),this.hash(r).copy(this.opad,this.blocksize),this.hash(this.opad)},module.exports=f;
},{"create-hash/md5":"y4o1","ripemd160":"kqxN","sha.js":"hVan","./precondition":"INx3","./default-encoding":"G0Ti","safe-buffer":"v6q9"}],"WKJk":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var r,e=arguments[3],n=require("process"),t=require("./precondition"),o=require("./default-encoding"),i=require("./sync"),u=require("safe-buffer").Buffer,f=e.crypto&&e.crypto.subtle,s={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},c=[];function a(n){if(e.process&&!e.process.browser)return Promise.resolve(!1);if(!f||!f.importKey||!f.deriveBits)return Promise.resolve(!1);if(void 0!==c[n])return c[n];var t=h(r=r||u.alloc(8),r,10,128,n).then(function(){return!0}).catch(function(){return!1});return c[n]=t,t}function h(r,e,n,t,o){return f.importKey("raw",r,{name:"PBKDF2"},!1,["deriveBits"]).then(function(r){return f.deriveBits({name:"PBKDF2",salt:e,iterations:n,hash:{name:o}},r,t<<3)}).then(function(r){return u.from(r)})}function l(r,e){r.then(function(r){n.nextTick(function(){e(null,r)})},function(r){n.nextTick(function(){e(r)})})}module.exports=function(r,f,c,p,m,d){"function"==typeof m&&(d=m,m=void 0);var v=s[(m=m||"sha1").toLowerCase()];if(!v||"function"!=typeof e.Promise)return n.nextTick(function(){var e;try{e=i(r,f,c,p,m)}catch(n){return d(n)}d(null,e)});if(t(r,f,c,p),"function"!=typeof d)throw new Error("No callback provided to pbkdf2");u.isBuffer(r)||(r=u.from(r,o)),u.isBuffer(f)||(f=u.from(f,o)),l(a(v).then(function(e){return e?h(r,f,c,p,v):i(r,f,c,p,m)}),d)};
},{"./precondition":"INx3","./default-encoding":"G0Ti","./sync":"Ak4o","safe-buffer":"v6q9","process":"FeV4"}],"rgIr":[function(require,module,exports) {
exports.pbkdf2=require("./lib/async"),exports.pbkdf2Sync=require("./lib/sync");
},{"./lib/async":"WKJk","./lib/sync":"Ak4o"}],"TmYT":[function(require,module,exports) {
"use strict";exports.readUInt32BE=function(r,o){return(r[0+o]<<24|r[1+o]<<16|r[2+o]<<8|r[3+o])>>>0},exports.writeUInt32BE=function(r,o,t){r[0+t]=o>>>24,r[1+t]=o>>>16&255,r[2+t]=o>>>8&255,r[3+t]=255&o},exports.ip=function(r,o,t,f){for(var n=0,e=0,u=6;u>=0;u-=2){for(var i=0;i<=24;i+=8)n<<=1,n|=o>>>i+u&1;for(i=0;i<=24;i+=8)n<<=1,n|=r>>>i+u&1}for(u=6;u>=0;u-=2){for(i=1;i<=25;i+=8)e<<=1,e|=o>>>i+u&1;for(i=1;i<=25;i+=8)e<<=1,e|=r>>>i+u&1}t[f+0]=n>>>0,t[f+1]=e>>>0},exports.rip=function(r,o,t,f){for(var n=0,e=0,u=0;u<4;u++)for(var i=24;i>=0;i-=8)n<<=1,n|=o>>>i+u&1,n<<=1,n|=r>>>i+u&1;for(u=4;u<8;u++)for(i=24;i>=0;i-=8)e<<=1,e|=o>>>i+u&1,e<<=1,e|=r>>>i+u&1;t[f+0]=n>>>0,t[f+1]=e>>>0},exports.pc1=function(r,o,t,f){for(var n=0,e=0,u=7;u>=5;u--){for(var i=0;i<=24;i+=8)n<<=1,n|=o>>i+u&1;for(i=0;i<=24;i+=8)n<<=1,n|=r>>i+u&1}for(i=0;i<=24;i+=8)n<<=1,n|=o>>i+u&1;for(u=1;u<=3;u++){for(i=0;i<=24;i+=8)e<<=1,e|=o>>i+u&1;for(i=0;i<=24;i+=8)e<<=1,e|=r>>i+u&1}for(i=0;i<=24;i+=8)e<<=1,e|=r>>i+u&1;t[f+0]=n>>>0,t[f+1]=e>>>0},exports.r28shl=function(r,o){return r<<o&268435455|r>>>28-o};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];exports.pc2=function(o,t,f,n){for(var e=0,u=0,i=r.length>>>1,p=0;p<i;p++)e<<=1,e|=o>>>r[p]&1;for(p=i;p<r.length;p++)u<<=1,u|=t>>>r[p]&1;f[n+0]=e>>>0,f[n+1]=u>>>0},exports.expand=function(r,o,t){var f=0,n=0;f=(1&r)<<5|r>>>27;for(var e=23;e>=15;e-=4)f<<=6,f|=r>>>e&63;for(e=11;e>=3;e-=4)n|=r>>>e&63,n<<=6;n|=(31&r)<<1|r>>>31,o[t+0]=f>>>0,o[t+1]=n>>>0};var o=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];exports.substitute=function(r,t){for(var f=0,n=0;n<4;n++){f<<=4,f|=o[64*n+(r>>>18-6*n&63)]}for(n=0;n<4;n++){f<<=4,f|=o[256+64*n+(t>>>18-6*n&63)]}return f>>>0};var t=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];exports.permute=function(r){for(var o=0,f=0;f<t.length;f++)o<<=1,o|=r>>>t[f]&1;return o>>>0},exports.padSplit=function(r,o,t){for(var f=r.toString(2);f.length<o;)f="0"+f;for(var n=[],e=0;e<o;e+=t)n.push(f.slice(e,e+t));return n.join(" ")};
},{}],"t8LV":[function(require,module,exports) {
function r(r,o){if(!r)throw new Error(o||"Assertion failed")}module.exports=r,r.equal=function(r,o,e){if(r!=o)throw new Error(e||"Assertion failed: "+r+" != "+o)};
},{}],"zEBy":[function(require,module,exports) {
"use strict";var t=require("minimalistic-assert");function f(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}module.exports=f,f.prototype._init=function(){},f.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},f.prototype._buffer=function(t,f){for(var e=Math.min(this.buffer.length-this.bufferOff,t.length-f),r=0;r<e;r++)this.buffer[this.bufferOff+r]=t[f+r];return this.bufferOff+=e,e},f.prototype._flushBuffer=function(t,f){return this._update(this.buffer,0,t,f),this.bufferOff=0,this.blockSize},f.prototype._updateEncrypt=function(t){var f=0,e=0,r=(this.bufferOff+t.length)/this.blockSize|0,i=new Array(r*this.blockSize);0!==this.bufferOff&&(f+=this._buffer(t,f),this.bufferOff===this.buffer.length&&(e+=this._flushBuffer(i,e)));for(var h=t.length-(t.length-f)%this.blockSize;f<h;f+=this.blockSize)this._update(t,f,i,e),e+=this.blockSize;for(;f<t.length;f++,this.bufferOff++)this.buffer[this.bufferOff]=t[f];return i},f.prototype._updateDecrypt=function(t){for(var f=0,e=0,r=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,i=new Array(r*this.blockSize);r>0;r--)f+=this._buffer(t,f),e+=this._flushBuffer(i,e);return f+=this._buffer(t,f),i},f.prototype.final=function(t){var f,e;return t&&(f=this.update(t)),e="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),f?f.concat(e):e},f.prototype._pad=function(t,f){if(0===f)return!1;for(;f<t.length;)t[f++]=0;return!0},f.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},f.prototype._unpad=function(t){return t},f.prototype._finalDecrypt=function(){t.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var f=new Array(this.blockSize);return this._flushBuffer(f,0),this._unpad(f)};
},{"minimalistic-assert":"t8LV"}],"TviQ":[function(require,module,exports) {
"use strict";var t=require("minimalistic-assert"),e=require("inherits"),r=require("./utils"),n=require("./cipher");function p(){this.tmp=new Array(2),this.keys=null}function i(t){n.call(this,t);var e=new p;this._desState=e,this.deriveKeys(e,t.key)}e(i,n),module.exports=i,i.create=function(t){return new i(t)};var s=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];i.prototype.deriveKeys=function(e,n){e.keys=new Array(32),t.equal(n.length,this.blockSize,"Invalid key length");var p=r.readUInt32BE(n,0),i=r.readUInt32BE(n,4);r.pc1(p,i,e.tmp,0),p=e.tmp[0],i=e.tmp[1];for(var a=0;a<e.keys.length;a+=2){var u=s[a>>>1];p=r.r28shl(p,u),i=r.r28shl(i,u),r.pc2(p,i,e.keys,a)}},i.prototype._update=function(t,e,n,p){var i=this._desState,s=r.readUInt32BE(t,e),a=r.readUInt32BE(t,e+4);r.ip(s,a,i.tmp,0),s=i.tmp[0],a=i.tmp[1],"encrypt"===this.type?this._encrypt(i,s,a,i.tmp,0):this._decrypt(i,s,a,i.tmp,0),s=i.tmp[0],a=i.tmp[1],r.writeUInt32BE(n,s,p),r.writeUInt32BE(n,a,p+4)},i.prototype._pad=function(t,e){for(var r=t.length-e,n=e;n<t.length;n++)t[n]=r;return!0},i.prototype._unpad=function(e){for(var r=e[e.length-1],n=e.length-r;n<e.length;n++)t.equal(e[n],r);return e.slice(0,e.length-r)},i.prototype._encrypt=function(t,e,n,p,i){for(var s=e,a=n,u=0;u<t.keys.length;u+=2){var o=t.keys[u],y=t.keys[u+1];r.expand(a,t.tmp,0),o^=t.tmp[0],y^=t.tmp[1];var h=r.substitute(o,y),l=a;a=(s^r.permute(h))>>>0,s=l}r.rip(a,s,p,i)},i.prototype._decrypt=function(t,e,n,p,i){for(var s=n,a=e,u=t.keys.length-2;u>=0;u-=2){var o=t.keys[u],y=t.keys[u+1];r.expand(s,t.tmp,0),o^=t.tmp[0],y^=t.tmp[1];var h=r.substitute(o,y),l=s;s=(a^r.permute(h))>>>0,a=l}r.rip(s,a,p,i)};
},{"minimalistic-assert":"t8LV","inherits":"Thv4","./utils":"TmYT","./cipher":"zEBy"}],"N3hX":[function(require,module,exports) {
"use strict";var t=require("minimalistic-assert"),i=require("inherits"),e={};function r(i){t.equal(i.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=i[e]}function n(t){function r(i){t.call(this,i),this._cbcInit()}i(r,t);for(var n=Object.keys(e),s=0;s<n.length;s++){var c=n[s];r.prototype[c]=e[c]}return r.create=function(t){return new r(t)},r}exports.instantiate=n,e._cbcInit=function(){var t=new r(this.options.iv);this._cbcState=t},e._update=function(t,i,e,r){var n=this._cbcState,s=this.constructor.super_.prototype,c=n.iv;if("encrypt"===this.type){for(var o=0;o<this.blockSize;o++)c[o]^=t[i+o];s._update.call(this,c,0,e,r);for(o=0;o<this.blockSize;o++)c[o]=e[r+o]}else{s._update.call(this,t,i,e,r);for(o=0;o<this.blockSize;o++)e[r+o]^=c[o];for(o=0;o<this.blockSize;o++)c[o]=t[i+o]}};
},{"minimalistic-assert":"t8LV","inherits":"Thv4"}],"TPYs":[function(require,module,exports) {
"use strict";var e=require("minimalistic-assert"),t=require("inherits"),r=require("./cipher"),p=require("./des");function i(t,r){e.equal(r.length,24,"Invalid key length");var i=r.slice(0,8),c=r.slice(8,16),y=r.slice(16,24);this.ciphers="encrypt"===t?[p.create({type:"encrypt",key:i}),p.create({type:"decrypt",key:c}),p.create({type:"encrypt",key:y})]:[p.create({type:"decrypt",key:y}),p.create({type:"encrypt",key:c}),p.create({type:"decrypt",key:i})]}function c(e){r.call(this,e);var t=new i(this.type,this.options.key);this._edeState=t}t(c,r),module.exports=c,c.create=function(e){return new c(e)},c.prototype._update=function(e,t,r,p){var i=this._edeState;i.ciphers[0]._update(e,t,r,p),i.ciphers[1]._update(r,p,r,p),i.ciphers[2]._update(r,p,r,p)},c.prototype._pad=p.prototype._pad,c.prototype._unpad=p.prototype._unpad;
},{"minimalistic-assert":"t8LV","inherits":"Thv4","./cipher":"zEBy","./des":"TviQ"}],"T5aT":[function(require,module,exports) {
"use strict";exports.utils=require("./des/utils"),exports.Cipher=require("./des/cipher"),exports.DES=require("./des/des"),exports.CBC=require("./des/cbc"),exports.EDE=require("./des/ede");
},{"./des/utils":"TmYT","./des/cipher":"zEBy","./des/des":"TviQ","./des/cbc":"N3hX","./des/ede":"TPYs"}],"Grif":[function(require,module,exports) {

var e=require("cipher-base"),r=require("des.js"),t=require("inherits"),s=require("safe-buffer").Buffer,d={"des-ede3-cbc":r.CBC.instantiate(r.EDE),"des-ede3":r.EDE,"des-ede-cbc":r.CBC.instantiate(r.EDE),"des-ede":r.EDE,"des-cbc":r.CBC.instantiate(r.DES),"des-ecb":r.DES};function i(r){e.call(this);var t,i=r.mode.toLowerCase(),c=d[i];t=r.decrypt?"decrypt":"encrypt";var a=r.key;s.isBuffer(a)||(a=s.from(a)),"des-ede"!==i&&"des-ede-cbc"!==i||(a=s.concat([a,a.slice(0,8)]));var n=r.iv;s.isBuffer(n)||(n=s.from(n)),this._des=c.create({key:a,iv:n,type:t})}d.des=d["des-cbc"],d.des3=d["des-ede3-cbc"],module.exports=i,t(i,e),i.prototype._update=function(e){return s.from(this._des.update(e))},i.prototype._final=function(){return s.from(this._des.final())};
},{"cipher-base":"JyeZ","des.js":"T5aT","inherits":"Thv4","safe-buffer":"v6q9"}],"eqXz":[function(require,module,exports) {
exports.encrypt=function(r,c){return r._cipher.encryptBlock(c)},exports.decrypt=function(r,c){return r._cipher.decryptBlock(c)};
},{}],"wZuC":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;module.exports=function(r,n){for(var f=Math.min(r.length,n.length),t=new e(f),u=0;u<f;++u)t[u]=r[u]^n[u];return t};
},{"buffer":"FaCw"}],"iHu4":[function(require,module,exports) {
var r=require("buffer-xor");exports.encrypt=function(e,p){var c=r(p,e._prev);return e._prev=e._cipher.encryptBlock(c),e._prev},exports.decrypt=function(e,p){var c=e._prev;e._prev=p;var t=e._cipher.decryptBlock(p);return r(t,c)};
},{"buffer-xor":"wZuC"}],"iShW":[function(require,module,exports) {

var e=require("safe-buffer").Buffer,c=require("buffer-xor");function r(r,a,n){var t=a.length,h=c(a,r._cache);return r._cache=r._cache.slice(t),r._prev=e.concat([r._prev,n?a:h]),h}exports.encrypt=function(c,a,n){for(var t,h=e.allocUnsafe(0);a.length;){if(0===c._cache.length&&(c._cache=c._cipher.encryptBlock(c._prev),c._prev=e.allocUnsafe(0)),!(c._cache.length<=a.length)){h=e.concat([h,r(c,a,n)]);break}t=c._cache.length,h=e.concat([h,r(c,a.slice(0,t),n)]),a=a.slice(t)}return h};
},{"safe-buffer":"v6q9","buffer-xor":"wZuC"}],"xkn6":[function(require,module,exports) {

var r=require("safe-buffer").Buffer;function e(e,n,c){var f=e._cipher.encryptBlock(e._prev)[0]^n;return e._prev=r.concat([e._prev.slice(1),r.from([c?n:f])]),f}exports.encrypt=function(n,c,f){for(var t=c.length,o=r.allocUnsafe(t),a=-1;++a<t;)o[a]=e(n,c[a],f);return o};
},{"safe-buffer":"v6q9"}],"Tw0X":[function(require,module,exports) {

var r=require("safe-buffer").Buffer;function e(r,e,f){for(var t,o,c=-1,a=0;++c<8;)t=e&1<<7-c?128:0,a+=(128&(o=r._cipher.encryptBlock(r._prev)[0]^t))>>c%8,r._prev=n(r._prev,f?t:o);return a}function n(e,n){var f=e.length,t=-1,o=r.allocUnsafe(e.length);for(e=r.concat([e,r.from([n])]);++t<f;)o[t]=e[t]<<1|e[t+1]>>7;return o}exports.encrypt=function(n,f,t){for(var o=f.length,c=r.allocUnsafe(o),a=-1;++a<o;)c[a]=e(n,f[a],t);return c};
},{"safe-buffer":"v6q9"}],"iOyg":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,c=require("buffer-xor");function r(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}exports.encrypt=function(n,t){for(;n._cache.length<t.length;)n._cache=e.concat([n._cache,r(n)]);var h=n._cache.slice(0,t.length);return n._cache=n._cache.slice(t.length),c(t,h)};
},{"buffer-xor":"wZuC","buffer":"FaCw"}],"M0Mk":[function(require,module,exports) {
function t(t){for(var e,r=t.length;r--;){if(255!==(e=t.readUInt8(r))){e++,t.writeUInt8(e,r);break}t.writeUInt8(0,r)}}module.exports=t;
},{}],"s8JC":[function(require,module,exports) {

var e=require("buffer-xor"),c=require("safe-buffer").Buffer,r=require("../incr32");function a(e){var c=e._cipher.encryptBlockRaw(e._prev);return r(e._prev),c}var t=16;exports.encrypt=function(r,n){var h=Math.ceil(n.length/t),i=r._cache.length;r._cache=c.concat([r._cache,c.allocUnsafe(h*t)]);for(var _=0;_<h;_++){var f=a(r),l=i+_*t;r._cache.writeUInt32BE(f[0],l+0),r._cache.writeUInt32BE(f[1],l+4),r._cache.writeUInt32BE(f[2],l+8),r._cache.writeUInt32BE(f[3],l+12)}var u=r._cache.slice(0,n.length);return r._cache=r._cache.slice(n.length),e(n,u)};
},{"buffer-xor":"wZuC","safe-buffer":"v6q9","../incr32":"M0Mk"}],"egeV":[function(require,module,exports) {
module.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};
},{}],"CzZB":[function(require,module,exports) {
var r={ECB:require("./ecb"),CBC:require("./cbc"),CFB:require("./cfb"),CFB8:require("./cfb8"),CFB1:require("./cfb1"),OFB:require("./ofb"),CTR:require("./ctr"),GCM:require("./ctr")},e=require("./list.json");for(var i in e)e[i].module=r[e[i].mode];module.exports=e;
},{"./ecb":"eqXz","./cbc":"iHu4","./cfb":"iShW","./cfb8":"xkn6","./cfb1":"Tw0X","./ofb":"iOyg","./ctr":"s8JC","./list.json":"egeV"}],"SN8i":[function(require,module,exports) {

var e=require("safe-buffer").Buffer;function t(t){e.isBuffer(t)||(t=e.from(t));for(var r=t.length/4|0,n=new Array(r),o=0;o<r;o++)n[o]=t.readUInt32BE(4*o);return n}function r(e){for(;0<e.length;e++)e[0]=0}function n(e,t,r,n,o){for(var i,B,S,u,c=r[0],_=r[1],f=r[2],a=r[3],s=e[0]^t[0],y=e[1]^t[1],I=e[2]^t[2],X=e[3]^t[3],h=4,l=1;l<o;l++)i=c[s>>>24]^_[y>>>16&255]^f[I>>>8&255]^a[255&X]^t[h++],B=c[y>>>24]^_[I>>>16&255]^f[X>>>8&255]^a[255&s]^t[h++],S=c[I>>>24]^_[X>>>16&255]^f[s>>>8&255]^a[255&y]^t[h++],u=c[X>>>24]^_[s>>>16&255]^f[y>>>8&255]^a[255&I]^t[h++],s=i,y=B,I=S,X=u;return i=(n[s>>>24]<<24|n[y>>>16&255]<<16|n[I>>>8&255]<<8|n[255&X])^t[h++],B=(n[y>>>24]<<24|n[I>>>16&255]<<16|n[X>>>8&255]<<8|n[255&s])^t[h++],S=(n[I>>>24]<<24|n[X>>>16&255]<<16|n[s>>>8&255]<<8|n[255&y])^t[h++],u=(n[X>>>24]<<24|n[s>>>16&255]<<16|n[y>>>8&255]<<8|n[255&I])^t[h++],[i>>>=0,B>>>=0,S>>>=0,u>>>=0]}var o=[0,1,2,4,8,16,32,64,128,27,54],i=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var r=[],n=[],o=[[],[],[],[]],i=[[],[],[],[]],B=0,S=0,u=0;u<256;++u){var c=S^S<<1^S<<2^S<<3^S<<4;c=c>>>8^255&c^99,r[B]=c,n[c]=B;var _=e[B],f=e[_],a=e[f],s=257*e[c]^16843008*c;o[0][B]=s<<24|s>>>8,o[1][B]=s<<16|s>>>16,o[2][B]=s<<8|s>>>24,o[3][B]=s,s=16843009*a^65537*f^257*_^16843008*B,i[0][c]=s<<24|s>>>8,i[1][c]=s<<16|s>>>16,i[2][c]=s<<8|s>>>24,i[3][c]=s,0===B?B=S=1:(B=_^e[e[e[a^_]]],S^=e[e[S]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:o,INV_SUB_MIX:i}}();function B(e){this._key=t(e),this._reset()}B.blockSize=16,B.keySize=32,B.prototype.blockSize=B.blockSize,B.prototype.keySize=B.keySize,B.prototype._reset=function(){for(var e=this._key,t=e.length,r=t+6,n=4*(r+1),B=[],S=0;S<t;S++)B[S]=e[S];for(S=t;S<n;S++){var u=B[S-1];S%t==0?(u=u<<8|u>>>24,u=i.SBOX[u>>>24]<<24|i.SBOX[u>>>16&255]<<16|i.SBOX[u>>>8&255]<<8|i.SBOX[255&u],u^=o[S/t|0]<<24):t>6&&S%t==4&&(u=i.SBOX[u>>>24]<<24|i.SBOX[u>>>16&255]<<16|i.SBOX[u>>>8&255]<<8|i.SBOX[255&u]),B[S]=B[S-t]^u}for(var c=[],_=0;_<n;_++){var f=n-_,a=B[f-(_%4?0:4)];c[_]=_<4||f<=4?a:i.INV_SUB_MIX[0][i.SBOX[a>>>24]]^i.INV_SUB_MIX[1][i.SBOX[a>>>16&255]]^i.INV_SUB_MIX[2][i.SBOX[a>>>8&255]]^i.INV_SUB_MIX[3][i.SBOX[255&a]]}this._nRounds=r,this._keySchedule=B,this._invKeySchedule=c},B.prototype.encryptBlockRaw=function(e){return n(e=t(e),this._keySchedule,i.SUB_MIX,i.SBOX,this._nRounds)},B.prototype.encryptBlock=function(t){var r=this.encryptBlockRaw(t),n=e.allocUnsafe(16);return n.writeUInt32BE(r[0],0),n.writeUInt32BE(r[1],4),n.writeUInt32BE(r[2],8),n.writeUInt32BE(r[3],12),n},B.prototype.decryptBlock=function(r){var o=(r=t(r))[1];r[1]=r[3],r[3]=o;var B=n(r,this._invKeySchedule,i.INV_SUB_MIX,i.INV_SBOX,this._nRounds),S=e.allocUnsafe(16);return S.writeUInt32BE(B[0],0),S.writeUInt32BE(B[3],4),S.writeUInt32BE(B[2],8),S.writeUInt32BE(B[1],12),S},B.prototype.scrub=function(){r(this._keySchedule),r(this._invKeySchedule),r(this._key)},module.exports.AES=B;
},{"safe-buffer":"v6q9"}],"ZRlW":[function(require,module,exports) {

var t=require("safe-buffer").Buffer,e=t.alloc(16,0);function h(t){return[t.readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)]}function a(e){var h=t.allocUnsafe(16);return h.writeUInt32BE(e[0]>>>0,0),h.writeUInt32BE(e[1]>>>0,4),h.writeUInt32BE(e[2]>>>0,8),h.writeUInt32BE(e[3]>>>0,12),h}function i(e){this.h=e,this.state=t.alloc(16,0),this.cache=t.allocUnsafe(0)}i.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},i.prototype._multiply=function(){for(var t,e,i=h(this.h),c=[0,0,0,0],s=-1;++s<128;){for(0!=(this.state[~~(s/8)]&1<<7-s%8)&&(c[0]^=i[0],c[1]^=i[1],c[2]^=i[2],c[3]^=i[3]),e=0!=(1&i[3]),t=3;t>0;t--)i[t]=i[t]>>>1|(1&i[t-1])<<31;i[0]=i[0]>>>1,e&&(i[0]=i[0]^225<<24)}this.state=a(c)},i.prototype.update=function(e){var h;for(this.cache=t.concat([this.cache,e]);this.cache.length>=16;)h=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(h)},i.prototype.final=function(h,i){return this.cache.length&&this.ghash(t.concat([this.cache,e],16)),this.ghash(a([0,h,0,i])),this.state},module.exports=i;
},{"safe-buffer":"v6q9"}],"r0wY":[function(require,module,exports) {

var t=require("./aes"),e=require("safe-buffer").Buffer,r=require("cipher-base"),h=require("inherits"),a=require("./ghash"),i=require("buffer-xor"),n=require("./incr32");function s(t,e){var r=0;t.length!==e.length&&r++;for(var h=Math.min(t.length,e.length),a=0;a<h;++a)r+=t[a]^e[a];return r}function o(t,r,h){if(12===r.length)return t._finID=e.concat([r,e.from([0,0,0,1])]),e.concat([r,e.from([0,0,0,2])]);var i=new a(h),s=r.length,o=s%16;i.update(r),o&&(o=16-o,i.update(e.alloc(o,0))),i.update(e.alloc(8,0));var u=8*s,l=e.alloc(8);l.writeUIntBE(u,0,8),i.update(l),t._finID=i.state;var c=e.from(t._finID);return n(c),c}function u(h,i,n,s){r.call(this);var u=e.alloc(4,0);this._cipher=new t.AES(i);var l=this._cipher.encryptBlock(u);this._ghash=new a(l),n=o(this,n,l),this._prev=e.from(n),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=h,this._authTag=null,this._called=!1}h(u,r),u.prototype._update=function(t){if(!this._called&&this._alen){var r=16-this._alen%16;r<16&&(r=e.alloc(r,0),this._ghash.update(r))}this._called=!0;var h=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(h),this._len+=t.length,h},u.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=i(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&s(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},u.prototype.getAuthTag=function(){if(this._decrypt||!e.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},u.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},u.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},module.exports=u;
},{"./aes":"SN8i","safe-buffer":"v6q9","cipher-base":"JyeZ","inherits":"Thv4","./ghash":"ZRlW","buffer-xor":"wZuC","./incr32":"M0Mk"}],"kLap":[function(require,module,exports) {

var e=require("./aes"),r=require("safe-buffer").Buffer,t=require("cipher-base"),i=require("inherits");function s(i,s,c,h){t.call(this),this._cipher=new e.AES(s),this._prev=r.from(c),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=h,this._mode=i}i(s,t),s.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},module.exports=s;
},{"./aes":"SN8i","safe-buffer":"v6q9","cipher-base":"JyeZ","inherits":"Thv4"}],"xqRd":[function(require,module,exports) {

var e=require("safe-buffer").Buffer,r=require("md5.js");function t(t,a,f,l){if(e.isBuffer(t)||(t=e.from(t,"binary")),a&&(e.isBuffer(a)||(a=e.from(a,"binary")),8!==a.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var n=f/8,i=e.alloc(n),o=e.alloc(l||0),u=e.alloc(0);n>0||l>0;){var h=new r;h.update(u),h.update(t),a&&h.update(a),u=h.digest();var g=0;if(n>0){var s=i.length-n;g=Math.min(n,u.length),u.copy(i,s,0,g),n-=g}if(g<u.length&&l>0){var d=o.length-l,v=Math.min(l,u.length-g);u.copy(o,d,g,g+v),l-=v}}return u.fill(0),{key:i,iv:o}}module.exports=t;
},{"safe-buffer":"v6q9","md5.js":"lB4T"}],"oxYx":[function(require,module,exports) {

var e=require("./modes"),t=require("./authCipher"),r=require("safe-buffer").Buffer,i=require("./streamCipher"),n=require("cipher-base"),h=require("./aes"),o=require("evp_bytestokey"),a=require("inherits");function c(e,t,i){n.call(this),this._cache=new u,this._cipher=new h.AES(t),this._prev=r.from(i),this._mode=e,this._autopadding=!0}a(c,n),c.prototype._update=function(e){var t,i;this._cache.add(e);for(var n=[];t=this._cache.get();)i=this._mode.encrypt(this,t),n.push(i);return r.concat(n)};var s=r.alloc(16,16);function u(){this.cache=r.allocUnsafe(0)}function p(n,h,o){var a=e[n.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof h&&(h=r.from(h)),h.length!==a.key/8)throw new TypeError("invalid key length "+h.length);if("string"==typeof o&&(o=r.from(o)),"GCM"!==a.mode&&o.length!==a.iv)throw new TypeError("invalid iv length "+o.length);return"stream"===a.type?new i(a.module,h,o):"auth"===a.type?new t(a.module,h,o):new c(a.module,h,o)}function f(t,r){var i=e[t.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var n=o(r,!1,i.key,i.iv);return p(t,n.key,n.iv)}c.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(s))throw this._cipher.scrub(),new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},u.prototype.add=function(e){this.cache=r.concat([this.cache,e])},u.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},u.prototype.flush=function(){for(var e=16-this.cache.length,t=r.allocUnsafe(e),i=-1;++i<e;)t.writeUInt8(e,i);return r.concat([this.cache,t])},exports.createCipheriv=p,exports.createCipher=f;
},{"./modes":"CzZB","./authCipher":"r0wY","safe-buffer":"v6q9","./streamCipher":"kLap","cipher-base":"JyeZ","./aes":"SN8i","evp_bytestokey":"xqRd","inherits":"Thv4"}],"w8gM":[function(require,module,exports) {

var e=require("./authCipher"),t=require("safe-buffer").Buffer,r=require("./modes"),i=require("./streamCipher"),h=require("cipher-base"),n=require("./aes"),o=require("evp_bytestokey"),a=require("inherits");function c(e,r,i){h.call(this),this._cache=new s,this._last=void 0,this._cipher=new n.AES(r),this._prev=t.from(i),this._mode=e,this._autopadding=!0}function s(){this.cache=t.allocUnsafe(0)}function u(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");for(var r=-1;++r<t;)if(e[r+(16-t)]!==t)throw new Error("unable to decrypt data");if(16!==t)return e.slice(0,16-t)}function p(h,n,o){var a=r[h.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof o&&(o=t.from(o)),"GCM"!==a.mode&&o.length!==a.iv)throw new TypeError("invalid iv length "+o.length);if("string"==typeof n&&(n=t.from(n)),n.length!==a.key/8)throw new TypeError("invalid key length "+n.length);return"stream"===a.type?new i(a.module,n,o,!0):"auth"===a.type?new e(a.module,n,o,!0):new c(a.module,n,o)}function f(e,t){var i=r[e.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var h=o(t,!1,i.key,i.iv);return p(e,h.key,h.iv)}a(c,h),c.prototype._update=function(e){var r,i;this._cache.add(e);for(var h=[];r=this._cache.get(this._autopadding);)i=this._mode.decrypt(this,r),h.push(i);return t.concat(h)},c.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return u(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},s.prototype.add=function(e){this.cache=t.concat([this.cache,e])},s.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},s.prototype.flush=function(){if(this.cache.length)return this.cache},exports.createDecipher=f,exports.createDecipheriv=p;
},{"./authCipher":"r0wY","safe-buffer":"v6q9","./modes":"CzZB","./streamCipher":"kLap","cipher-base":"JyeZ","./aes":"SN8i","evp_bytestokey":"xqRd","inherits":"Thv4"}],"qkMh":[function(require,module,exports) {
var e=require("./encrypter"),r=require("./decrypter"),i=require("./modes/list.json");function p(){return Object.keys(i)}exports.createCipher=exports.Cipher=e.createCipher,exports.createCipheriv=exports.Cipheriv=e.createCipheriv,exports.createDecipher=exports.Decipher=r.createDecipher,exports.createDecipheriv=exports.Decipheriv=r.createDecipheriv,exports.listCiphers=exports.getCiphers=p;
},{"./encrypter":"oxYx","./decrypter":"w8gM","./modes/list.json":"egeV"}],"gTta":[function(require,module,exports) {
exports["des-ecb"]={key:8,iv:0},exports["des-cbc"]=exports.des={key:8,iv:8},exports["des-ede3-cbc"]=exports.des3={key:24,iv:8},exports["des-ede3"]={key:24,iv:0},exports["des-ede-cbc"]={key:16,iv:8},exports["des-ede"]={key:16,iv:0};
},{}],"nWDC":[function(require,module,exports) {
var e=require("browserify-des"),r=require("browserify-aes/browser"),i=require("browserify-aes/modes"),t=require("browserify-des/modes"),o=require("evp_bytestokey");function s(e,r){var s,p;if(e=e.toLowerCase(),i[e])s=i[e].key,p=i[e].iv;else{if(!t[e])throw new TypeError("invalid suite type");s=8*t[e].key,p=t[e].iv}var v=o(r,!1,s,p);return n(e,v.key,v.iv)}function p(e,r){var s,p;if(e=e.toLowerCase(),i[e])s=i[e].key,p=i[e].iv;else{if(!t[e])throw new TypeError("invalid suite type");s=8*t[e].key,p=t[e].iv}var n=o(r,!1,s,p);return v(e,n.key,n.iv)}function n(o,s,p){if(o=o.toLowerCase(),i[o])return r.createCipheriv(o,s,p);if(t[o])return new e({key:s,iv:p,mode:o});throw new TypeError("invalid suite type")}function v(o,s,p){if(o=o.toLowerCase(),i[o])return r.createDecipheriv(o,s,p);if(t[o])return new e({key:s,iv:p,mode:o,decrypt:!0});throw new TypeError("invalid suite type")}function y(){return Object.keys(t).concat(r.getCiphers())}exports.createCipher=exports.Cipher=s,exports.createCipheriv=exports.Cipheriv=n,exports.createDecipher=exports.Decipher=p,exports.createDecipheriv=exports.Decipheriv=v,exports.listCiphers=exports.getCiphers=y;
},{"browserify-des":"Grif","browserify-aes/browser":"qkMh","browserify-aes/modes":"CzZB","browserify-des/modes":"gTta","evp_bytestokey":"xqRd"}],"Os5M":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var t=require("buffer").Buffer;!function(t,i){"use strict";function r(t,i){if(!t)throw new Error(i||"Assertion failed")}function h(t,i){t.super_=i;var r=function(){};r.prototype=i.prototype,t.prototype=new r,t.prototype.constructor=t}function n(t,i,r){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==i&&"be"!==i||(r=i,i=10),this._init(t||0,i||10,r||"be"))}var e;"object"==typeof t?t.exports=n:i.BN=n,n.BN=n,n.wordSize=26;try{e=require("buffer").Buffer}catch(k){}function o(t,i,r){for(var h=0,n=Math.min(t.length,r),e=i;e<n;e++){var o=t.charCodeAt(e)-48;h<<=4,h|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return h}function s(t,i,r,h){for(var n=0,e=Math.min(t.length,r),o=i;o<e;o++){var s=t.charCodeAt(o)-48;n*=h,n+=s>=49?s-49+10:s>=17?s-17+10:s}return n}n.isBN=function(t){return t instanceof n||null!==t&&"object"==typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,i){return t.cmp(i)>0?t:i},n.min=function(t,i){return t.cmp(i)<0?t:i},n.prototype._init=function(t,i,h){if("number"==typeof t)return this._initNumber(t,i,h);if("object"==typeof t)return this._initArray(t,i,h);"hex"===i&&(i=16),r(i===(0|i)&&i>=2&&i<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&n++,16===i?this._parseHex(t,n):this._parseBase(t,i,n),"-"===t[0]&&(this.negative=1),this.strip(),"le"===h&&this._initArray(this.toArray(),i,h)},n.prototype._initNumber=function(t,i,h){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===h&&this._initArray(this.toArray(),i,h)},n.prototype._initArray=function(t,i,h){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var e,o,s=0;if("be"===h)for(n=t.length-1,e=0;n>=0;n-=3)o=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[e]|=o<<s&67108863,this.words[e+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,e++);else if("le"===h)for(n=0,e=0;n<t.length;n+=3)o=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[e]|=o<<s&67108863,this.words[e+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,e++);return this.strip()},n.prototype._parseHex=function(t,i){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var h,n,e=0;for(r=t.length-6,h=0;r>=i;r-=6)n=o(t,r,r+6),this.words[h]|=n<<e&67108863,this.words[h+1]|=n>>>26-e&4194303,(e+=24)>=26&&(e-=26,h++);r+6!==i&&(n=o(t,i,r+6),this.words[h]|=n<<e&67108863,this.words[h+1]|=n>>>26-e&4194303),this.strip()},n.prototype._parseBase=function(t,i,r){this.words=[0],this.length=1;for(var h=0,n=1;n<=67108863;n*=i)h++;h--,n=n/i|0;for(var e=t.length-r,o=e%h,u=Math.min(e,e-o)+r,a=0,l=r;l<u;l+=h)a=s(t,l,l+h,i),this.imuln(n),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(0!==o){var m=1;for(a=s(t,l,t.length,i),l=0;l<o;l++)m*=i;this.imuln(m),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}},n.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],a=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(t,i,r){r.negative=i.negative^t.negative;var h=t.length+i.length|0;r.length=h,h=h-1|0;var n=0|t.words[0],e=0|i.words[0],o=n*e,s=67108863&o,u=o/67108864|0;r.words[0]=s;for(var a=1;a<h;a++){for(var l=u>>>26,m=67108863&u,f=Math.min(a,i.length-1),d=Math.max(0,a-t.length+1);d<=f;d++){var p=a-d|0;l+=(o=(n=0|t.words[p])*(e=0|i.words[d])+m)/67108864|0,m=67108863&o}r.words[a]=0|m,u=0|l}return 0!==u?r.words[a]=0|u:r.length--,r.strip()}n.prototype.toString=function(t,i){var h;if(i=0|i||1,16===(t=t||10)||"hex"===t){h="";for(var n=0,e=0,o=0;o<this.length;o++){var s=this.words[o],m=(16777215&(s<<n|e)).toString(16);h=0!==(e=s>>>24-n&16777215)||o!==this.length-1?u[6-m.length]+m+h:m+h,(n+=2)>=26&&(n-=26,o--)}for(0!==e&&(h=e.toString(16)+h);h.length%i!=0;)h="0"+h;return 0!==this.negative&&(h="-"+h),h}if(t===(0|t)&&t>=2&&t<=36){var f=a[t],d=l[t];h="";var p=this.clone();for(p.negative=0;!p.isZero();){var M=p.modn(d).toString(t);h=(p=p.idivn(d)).isZero()?M+h:u[f-M.length]+M+h}for(this.isZero()&&(h="0"+h);h.length%i!=0;)h="0"+h;return 0!==this.negative&&(h="-"+h),h}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,i){return r(void 0!==e),this.toArrayLike(e,t,i)},n.prototype.toArray=function(t,i){return this.toArrayLike(Array,t,i)},n.prototype.toArrayLike=function(t,i,h){var n=this.byteLength(),e=h||Math.max(1,n);r(n<=e,"byte array longer than desired length"),r(e>0,"Requested array length <= 0"),this.strip();var o,s,u="le"===i,a=new t(e),l=this.clone();if(u){for(s=0;!l.isZero();s++)o=l.andln(255),l.iushrn(8),a[s]=o;for(;s<e;s++)a[s]=0}else{for(s=0;s<e-n;s++)a[s]=0;for(s=0;!l.isZero();s++)o=l.andln(255),l.iushrn(8),a[e-s-1]=o}return a},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var i=t,r=0;return i>=4096&&(r+=13,i>>>=13),i>=64&&(r+=7,i>>>=7),i>=8&&(r+=4,i>>>=4),i>=2&&(r+=2,i>>>=2),r+i},n.prototype._zeroBits=function(t){if(0===t)return 26;var i=t,r=0;return 0==(8191&i)&&(r+=13,i>>>=13),0==(127&i)&&(r+=7,i>>>=7),0==(15&i)&&(r+=4,i>>>=4),0==(3&i)&&(r+=2,i>>>=2),0==(1&i)&&r++,r},n.prototype.bitLength=function(){var t=this.words[this.length-1],i=this._countBits(t);return 26*(this.length-1)+i},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var r=this._zeroBits(this.words[i]);if(t+=r,26!==r)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.strip()},n.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var i;i=this.length>t.length?t:this;for(var r=0;r<i.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=i.length,this.strip()},n.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){var i,r;this.length>t.length?(i=this,r=t):(i=t,r=this);for(var h=0;h<r.length;h++)this.words[h]=i.words[h]^r.words[h];if(this!==i)for(;h<i.length;h++)this.words[h]=i.words[h];return this.length=i.length,this.strip()},n.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var i=0|Math.ceil(t/26),h=t%26;this._expand(i),h>0&&i--;for(var n=0;n<i;n++)this.words[n]=67108863&~this.words[n];return h>0&&(this.words[n]=~this.words[n]&67108863>>26-h),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,i){r("number"==typeof t&&t>=0);var h=t/26|0,n=t%26;return this._expand(h+1),this.words[h]=i?this.words[h]|1<<n:this.words[h]&~(1<<n),this.strip()},n.prototype.iadd=function(t){var i,r,h;if(0!==this.negative&&0===t.negative)return this.negative=0,i=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,i=this.isub(t),t.negative=1,i._normSign();this.length>t.length?(r=this,h=t):(r=t,h=this);for(var n=0,e=0;e<h.length;e++)i=(0|r.words[e])+(0|h.words[e])+n,this.words[e]=67108863&i,n=i>>>26;for(;0!==n&&e<r.length;e++)i=(0|r.words[e])+n,this.words[e]=67108863&i,n=i>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;e<r.length;e++)this.words[e]=r.words[e];return this},n.prototype.add=function(t){var i;return 0!==t.negative&&0===this.negative?(t.negative=0,i=this.sub(t),t.negative^=1,i):0===t.negative&&0!==this.negative?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var i=this.iadd(t);return t.negative=1,i._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,h,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,h=t):(r=t,h=this);for(var e=0,o=0;o<h.length;o++)e=(i=(0|r.words[o])-(0|h.words[o])+e)>>26,this.words[o]=67108863&i;for(;0!==e&&o<r.length;o++)e=(i=(0|r.words[o])+e)>>26,this.words[o]=67108863&i;if(0===e&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var f=function(t,i,r){var h,n,e,o=t.words,s=i.words,u=r.words,a=0,l=0|o[0],m=8191&l,f=l>>>13,d=0|o[1],p=8191&d,M=d>>>13,v=0|o[2],g=8191&v,c=v>>>13,w=0|o[3],y=8191&w,b=w>>>13,_=0|o[4],k=8191&_,A=_>>>13,x=0|o[5],S=8191&x,q=x>>>13,Z=0|o[6],R=8191&Z,B=Z>>>13,N=0|o[7],L=8191&N,I=N>>>13,z=0|o[8],T=8191&z,E=z>>>13,O=0|o[9],j=8191&O,K=O>>>13,P=0|s[0],F=8191&P,C=P>>>13,D=0|s[1],H=8191&D,J=D>>>13,U=0|s[2],G=8191&U,Q=U>>>13,V=0|s[3],W=8191&V,X=V>>>13,Y=0|s[4],$=8191&Y,tt=Y>>>13,it=0|s[5],rt=8191&it,ht=it>>>13,nt=0|s[6],et=8191&nt,ot=nt>>>13,st=0|s[7],ut=8191&st,at=st>>>13,lt=0|s[8],mt=8191&lt,ft=lt>>>13,dt=0|s[9],pt=8191&dt,Mt=dt>>>13;r.negative=t.negative^i.negative,r.length=19;var vt=(a+(h=Math.imul(m,F))|0)+((8191&(n=(n=Math.imul(m,C))+Math.imul(f,F)|0))<<13)|0;a=((e=Math.imul(f,C))+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,h=Math.imul(p,F),n=(n=Math.imul(p,C))+Math.imul(M,F)|0,e=Math.imul(M,C);var gt=(a+(h=h+Math.imul(m,H)|0)|0)+((8191&(n=(n=n+Math.imul(m,J)|0)+Math.imul(f,H)|0))<<13)|0;a=((e=e+Math.imul(f,J)|0)+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,h=Math.imul(g,F),n=(n=Math.imul(g,C))+Math.imul(c,F)|0,e=Math.imul(c,C),h=h+Math.imul(p,H)|0,n=(n=n+Math.imul(p,J)|0)+Math.imul(M,H)|0,e=e+Math.imul(M,J)|0;var ct=(a+(h=h+Math.imul(m,G)|0)|0)+((8191&(n=(n=n+Math.imul(m,Q)|0)+Math.imul(f,G)|0))<<13)|0;a=((e=e+Math.imul(f,Q)|0)+(n>>>13)|0)+(ct>>>26)|0,ct&=67108863,h=Math.imul(y,F),n=(n=Math.imul(y,C))+Math.imul(b,F)|0,e=Math.imul(b,C),h=h+Math.imul(g,H)|0,n=(n=n+Math.imul(g,J)|0)+Math.imul(c,H)|0,e=e+Math.imul(c,J)|0,h=h+Math.imul(p,G)|0,n=(n=n+Math.imul(p,Q)|0)+Math.imul(M,G)|0,e=e+Math.imul(M,Q)|0;var wt=(a+(h=h+Math.imul(m,W)|0)|0)+((8191&(n=(n=n+Math.imul(m,X)|0)+Math.imul(f,W)|0))<<13)|0;a=((e=e+Math.imul(f,X)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,h=Math.imul(k,F),n=(n=Math.imul(k,C))+Math.imul(A,F)|0,e=Math.imul(A,C),h=h+Math.imul(y,H)|0,n=(n=n+Math.imul(y,J)|0)+Math.imul(b,H)|0,e=e+Math.imul(b,J)|0,h=h+Math.imul(g,G)|0,n=(n=n+Math.imul(g,Q)|0)+Math.imul(c,G)|0,e=e+Math.imul(c,Q)|0,h=h+Math.imul(p,W)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(M,W)|0,e=e+Math.imul(M,X)|0;var yt=(a+(h=h+Math.imul(m,$)|0)|0)+((8191&(n=(n=n+Math.imul(m,tt)|0)+Math.imul(f,$)|0))<<13)|0;a=((e=e+Math.imul(f,tt)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,h=Math.imul(S,F),n=(n=Math.imul(S,C))+Math.imul(q,F)|0,e=Math.imul(q,C),h=h+Math.imul(k,H)|0,n=(n=n+Math.imul(k,J)|0)+Math.imul(A,H)|0,e=e+Math.imul(A,J)|0,h=h+Math.imul(y,G)|0,n=(n=n+Math.imul(y,Q)|0)+Math.imul(b,G)|0,e=e+Math.imul(b,Q)|0,h=h+Math.imul(g,W)|0,n=(n=n+Math.imul(g,X)|0)+Math.imul(c,W)|0,e=e+Math.imul(c,X)|0,h=h+Math.imul(p,$)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(M,$)|0,e=e+Math.imul(M,tt)|0;var bt=(a+(h=h+Math.imul(m,rt)|0)|0)+((8191&(n=(n=n+Math.imul(m,ht)|0)+Math.imul(f,rt)|0))<<13)|0;a=((e=e+Math.imul(f,ht)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,h=Math.imul(R,F),n=(n=Math.imul(R,C))+Math.imul(B,F)|0,e=Math.imul(B,C),h=h+Math.imul(S,H)|0,n=(n=n+Math.imul(S,J)|0)+Math.imul(q,H)|0,e=e+Math.imul(q,J)|0,h=h+Math.imul(k,G)|0,n=(n=n+Math.imul(k,Q)|0)+Math.imul(A,G)|0,e=e+Math.imul(A,Q)|0,h=h+Math.imul(y,W)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(b,W)|0,e=e+Math.imul(b,X)|0,h=h+Math.imul(g,$)|0,n=(n=n+Math.imul(g,tt)|0)+Math.imul(c,$)|0,e=e+Math.imul(c,tt)|0,h=h+Math.imul(p,rt)|0,n=(n=n+Math.imul(p,ht)|0)+Math.imul(M,rt)|0,e=e+Math.imul(M,ht)|0;var _t=(a+(h=h+Math.imul(m,et)|0)|0)+((8191&(n=(n=n+Math.imul(m,ot)|0)+Math.imul(f,et)|0))<<13)|0;a=((e=e+Math.imul(f,ot)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,h=Math.imul(L,F),n=(n=Math.imul(L,C))+Math.imul(I,F)|0,e=Math.imul(I,C),h=h+Math.imul(R,H)|0,n=(n=n+Math.imul(R,J)|0)+Math.imul(B,H)|0,e=e+Math.imul(B,J)|0,h=h+Math.imul(S,G)|0,n=(n=n+Math.imul(S,Q)|0)+Math.imul(q,G)|0,e=e+Math.imul(q,Q)|0,h=h+Math.imul(k,W)|0,n=(n=n+Math.imul(k,X)|0)+Math.imul(A,W)|0,e=e+Math.imul(A,X)|0,h=h+Math.imul(y,$)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(b,$)|0,e=e+Math.imul(b,tt)|0,h=h+Math.imul(g,rt)|0,n=(n=n+Math.imul(g,ht)|0)+Math.imul(c,rt)|0,e=e+Math.imul(c,ht)|0,h=h+Math.imul(p,et)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(M,et)|0,e=e+Math.imul(M,ot)|0;var kt=(a+(h=h+Math.imul(m,ut)|0)|0)+((8191&(n=(n=n+Math.imul(m,at)|0)+Math.imul(f,ut)|0))<<13)|0;a=((e=e+Math.imul(f,at)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,h=Math.imul(T,F),n=(n=Math.imul(T,C))+Math.imul(E,F)|0,e=Math.imul(E,C),h=h+Math.imul(L,H)|0,n=(n=n+Math.imul(L,J)|0)+Math.imul(I,H)|0,e=e+Math.imul(I,J)|0,h=h+Math.imul(R,G)|0,n=(n=n+Math.imul(R,Q)|0)+Math.imul(B,G)|0,e=e+Math.imul(B,Q)|0,h=h+Math.imul(S,W)|0,n=(n=n+Math.imul(S,X)|0)+Math.imul(q,W)|0,e=e+Math.imul(q,X)|0,h=h+Math.imul(k,$)|0,n=(n=n+Math.imul(k,tt)|0)+Math.imul(A,$)|0,e=e+Math.imul(A,tt)|0,h=h+Math.imul(y,rt)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(b,rt)|0,e=e+Math.imul(b,ht)|0,h=h+Math.imul(g,et)|0,n=(n=n+Math.imul(g,ot)|0)+Math.imul(c,et)|0,e=e+Math.imul(c,ot)|0,h=h+Math.imul(p,ut)|0,n=(n=n+Math.imul(p,at)|0)+Math.imul(M,ut)|0,e=e+Math.imul(M,at)|0;var At=(a+(h=h+Math.imul(m,mt)|0)|0)+((8191&(n=(n=n+Math.imul(m,ft)|0)+Math.imul(f,mt)|0))<<13)|0;a=((e=e+Math.imul(f,ft)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,h=Math.imul(j,F),n=(n=Math.imul(j,C))+Math.imul(K,F)|0,e=Math.imul(K,C),h=h+Math.imul(T,H)|0,n=(n=n+Math.imul(T,J)|0)+Math.imul(E,H)|0,e=e+Math.imul(E,J)|0,h=h+Math.imul(L,G)|0,n=(n=n+Math.imul(L,Q)|0)+Math.imul(I,G)|0,e=e+Math.imul(I,Q)|0,h=h+Math.imul(R,W)|0,n=(n=n+Math.imul(R,X)|0)+Math.imul(B,W)|0,e=e+Math.imul(B,X)|0,h=h+Math.imul(S,$)|0,n=(n=n+Math.imul(S,tt)|0)+Math.imul(q,$)|0,e=e+Math.imul(q,tt)|0,h=h+Math.imul(k,rt)|0,n=(n=n+Math.imul(k,ht)|0)+Math.imul(A,rt)|0,e=e+Math.imul(A,ht)|0,h=h+Math.imul(y,et)|0,n=(n=n+Math.imul(y,ot)|0)+Math.imul(b,et)|0,e=e+Math.imul(b,ot)|0,h=h+Math.imul(g,ut)|0,n=(n=n+Math.imul(g,at)|0)+Math.imul(c,ut)|0,e=e+Math.imul(c,at)|0,h=h+Math.imul(p,mt)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(M,mt)|0,e=e+Math.imul(M,ft)|0;var xt=(a+(h=h+Math.imul(m,pt)|0)|0)+((8191&(n=(n=n+Math.imul(m,Mt)|0)+Math.imul(f,pt)|0))<<13)|0;a=((e=e+Math.imul(f,Mt)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,h=Math.imul(j,H),n=(n=Math.imul(j,J))+Math.imul(K,H)|0,e=Math.imul(K,J),h=h+Math.imul(T,G)|0,n=(n=n+Math.imul(T,Q)|0)+Math.imul(E,G)|0,e=e+Math.imul(E,Q)|0,h=h+Math.imul(L,W)|0,n=(n=n+Math.imul(L,X)|0)+Math.imul(I,W)|0,e=e+Math.imul(I,X)|0,h=h+Math.imul(R,$)|0,n=(n=n+Math.imul(R,tt)|0)+Math.imul(B,$)|0,e=e+Math.imul(B,tt)|0,h=h+Math.imul(S,rt)|0,n=(n=n+Math.imul(S,ht)|0)+Math.imul(q,rt)|0,e=e+Math.imul(q,ht)|0,h=h+Math.imul(k,et)|0,n=(n=n+Math.imul(k,ot)|0)+Math.imul(A,et)|0,e=e+Math.imul(A,ot)|0,h=h+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,at)|0)+Math.imul(b,ut)|0,e=e+Math.imul(b,at)|0,h=h+Math.imul(g,mt)|0,n=(n=n+Math.imul(g,ft)|0)+Math.imul(c,mt)|0,e=e+Math.imul(c,ft)|0;var St=(a+(h=h+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,Mt)|0)+Math.imul(M,pt)|0))<<13)|0;a=((e=e+Math.imul(M,Mt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,h=Math.imul(j,G),n=(n=Math.imul(j,Q))+Math.imul(K,G)|0,e=Math.imul(K,Q),h=h+Math.imul(T,W)|0,n=(n=n+Math.imul(T,X)|0)+Math.imul(E,W)|0,e=e+Math.imul(E,X)|0,h=h+Math.imul(L,$)|0,n=(n=n+Math.imul(L,tt)|0)+Math.imul(I,$)|0,e=e+Math.imul(I,tt)|0,h=h+Math.imul(R,rt)|0,n=(n=n+Math.imul(R,ht)|0)+Math.imul(B,rt)|0,e=e+Math.imul(B,ht)|0,h=h+Math.imul(S,et)|0,n=(n=n+Math.imul(S,ot)|0)+Math.imul(q,et)|0,e=e+Math.imul(q,ot)|0,h=h+Math.imul(k,ut)|0,n=(n=n+Math.imul(k,at)|0)+Math.imul(A,ut)|0,e=e+Math.imul(A,at)|0,h=h+Math.imul(y,mt)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(b,mt)|0,e=e+Math.imul(b,ft)|0;var qt=(a+(h=h+Math.imul(g,pt)|0)|0)+((8191&(n=(n=n+Math.imul(g,Mt)|0)+Math.imul(c,pt)|0))<<13)|0;a=((e=e+Math.imul(c,Mt)|0)+(n>>>13)|0)+(qt>>>26)|0,qt&=67108863,h=Math.imul(j,W),n=(n=Math.imul(j,X))+Math.imul(K,W)|0,e=Math.imul(K,X),h=h+Math.imul(T,$)|0,n=(n=n+Math.imul(T,tt)|0)+Math.imul(E,$)|0,e=e+Math.imul(E,tt)|0,h=h+Math.imul(L,rt)|0,n=(n=n+Math.imul(L,ht)|0)+Math.imul(I,rt)|0,e=e+Math.imul(I,ht)|0,h=h+Math.imul(R,et)|0,n=(n=n+Math.imul(R,ot)|0)+Math.imul(B,et)|0,e=e+Math.imul(B,ot)|0,h=h+Math.imul(S,ut)|0,n=(n=n+Math.imul(S,at)|0)+Math.imul(q,ut)|0,e=e+Math.imul(q,at)|0,h=h+Math.imul(k,mt)|0,n=(n=n+Math.imul(k,ft)|0)+Math.imul(A,mt)|0,e=e+Math.imul(A,ft)|0;var Zt=(a+(h=h+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,Mt)|0)+Math.imul(b,pt)|0))<<13)|0;a=((e=e+Math.imul(b,Mt)|0)+(n>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,h=Math.imul(j,$),n=(n=Math.imul(j,tt))+Math.imul(K,$)|0,e=Math.imul(K,tt),h=h+Math.imul(T,rt)|0,n=(n=n+Math.imul(T,ht)|0)+Math.imul(E,rt)|0,e=e+Math.imul(E,ht)|0,h=h+Math.imul(L,et)|0,n=(n=n+Math.imul(L,ot)|0)+Math.imul(I,et)|0,e=e+Math.imul(I,ot)|0,h=h+Math.imul(R,ut)|0,n=(n=n+Math.imul(R,at)|0)+Math.imul(B,ut)|0,e=e+Math.imul(B,at)|0,h=h+Math.imul(S,mt)|0,n=(n=n+Math.imul(S,ft)|0)+Math.imul(q,mt)|0,e=e+Math.imul(q,ft)|0;var Rt=(a+(h=h+Math.imul(k,pt)|0)|0)+((8191&(n=(n=n+Math.imul(k,Mt)|0)+Math.imul(A,pt)|0))<<13)|0;a=((e=e+Math.imul(A,Mt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,h=Math.imul(j,rt),n=(n=Math.imul(j,ht))+Math.imul(K,rt)|0,e=Math.imul(K,ht),h=h+Math.imul(T,et)|0,n=(n=n+Math.imul(T,ot)|0)+Math.imul(E,et)|0,e=e+Math.imul(E,ot)|0,h=h+Math.imul(L,ut)|0,n=(n=n+Math.imul(L,at)|0)+Math.imul(I,ut)|0,e=e+Math.imul(I,at)|0,h=h+Math.imul(R,mt)|0,n=(n=n+Math.imul(R,ft)|0)+Math.imul(B,mt)|0,e=e+Math.imul(B,ft)|0;var Bt=(a+(h=h+Math.imul(S,pt)|0)|0)+((8191&(n=(n=n+Math.imul(S,Mt)|0)+Math.imul(q,pt)|0))<<13)|0;a=((e=e+Math.imul(q,Mt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,h=Math.imul(j,et),n=(n=Math.imul(j,ot))+Math.imul(K,et)|0,e=Math.imul(K,ot),h=h+Math.imul(T,ut)|0,n=(n=n+Math.imul(T,at)|0)+Math.imul(E,ut)|0,e=e+Math.imul(E,at)|0,h=h+Math.imul(L,mt)|0,n=(n=n+Math.imul(L,ft)|0)+Math.imul(I,mt)|0,e=e+Math.imul(I,ft)|0;var Nt=(a+(h=h+Math.imul(R,pt)|0)|0)+((8191&(n=(n=n+Math.imul(R,Mt)|0)+Math.imul(B,pt)|0))<<13)|0;a=((e=e+Math.imul(B,Mt)|0)+(n>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,h=Math.imul(j,ut),n=(n=Math.imul(j,at))+Math.imul(K,ut)|0,e=Math.imul(K,at),h=h+Math.imul(T,mt)|0,n=(n=n+Math.imul(T,ft)|0)+Math.imul(E,mt)|0,e=e+Math.imul(E,ft)|0;var Lt=(a+(h=h+Math.imul(L,pt)|0)|0)+((8191&(n=(n=n+Math.imul(L,Mt)|0)+Math.imul(I,pt)|0))<<13)|0;a=((e=e+Math.imul(I,Mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,h=Math.imul(j,mt),n=(n=Math.imul(j,ft))+Math.imul(K,mt)|0,e=Math.imul(K,ft);var It=(a+(h=h+Math.imul(T,pt)|0)|0)+((8191&(n=(n=n+Math.imul(T,Mt)|0)+Math.imul(E,pt)|0))<<13)|0;a=((e=e+Math.imul(E,Mt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863;var zt=(a+(h=Math.imul(j,pt))|0)+((8191&(n=(n=Math.imul(j,Mt))+Math.imul(K,pt)|0))<<13)|0;return a=((e=Math.imul(K,Mt))+(n>>>13)|0)+(zt>>>26)|0,zt&=67108863,u[0]=vt,u[1]=gt,u[2]=ct,u[3]=wt,u[4]=yt,u[5]=bt,u[6]=_t,u[7]=kt,u[8]=At,u[9]=xt,u[10]=St,u[11]=qt,u[12]=Zt,u[13]=Rt,u[14]=Bt,u[15]=Nt,u[16]=Lt,u[17]=It,u[18]=zt,0!==a&&(u[19]=a,r.length++),r};function d(t,i,r){return(new p).mulp(t,i,r)}function p(t,i){this.x=t,this.y=i}Math.imul||(f=m),n.prototype.mulTo=function(t,i){var r=this.length+t.length;return 10===this.length&&10===t.length?f(this,t,i):r<63?m(this,t,i):r<1024?function(t,i,r){r.negative=i.negative^t.negative,r.length=t.length+i.length;for(var h=0,n=0,e=0;e<r.length-1;e++){var o=n;n=0;for(var s=67108863&h,u=Math.min(e,i.length-1),a=Math.max(0,e-t.length+1);a<=u;a++){var l=e-a,m=(0|t.words[l])*(0|i.words[a]),f=67108863&m;s=67108863&(f=f+s|0),n+=(o=(o=o+(m/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}r.words[e]=s,h=o,o=n}return 0!==h?r.words[e]=h:r.length--,r.strip()}(this,t,i):d(this,t,i)},p.prototype.makeRBT=function(t){for(var i=new Array(t),r=n.prototype._countBits(t)-1,h=0;h<t;h++)i[h]=this.revBin(h,r,t);return i},p.prototype.revBin=function(t,i,r){if(0===t||t===r-1)return t;for(var h=0,n=0;n<i;n++)h|=(1&t)<<i-n-1,t>>=1;return h},p.prototype.permute=function(t,i,r,h,n,e){for(var o=0;o<e;o++)h[o]=i[t[o]],n[o]=r[t[o]]},p.prototype.transform=function(t,i,r,h,n,e){this.permute(e,t,i,r,h,n);for(var o=1;o<n;o<<=1)for(var s=o<<1,u=Math.cos(2*Math.PI/s),a=Math.sin(2*Math.PI/s),l=0;l<n;l+=s)for(var m=u,f=a,d=0;d<o;d++){var p=r[l+d],M=h[l+d],v=r[l+d+o],g=h[l+d+o],c=m*v-f*g;g=m*g+f*v,v=c,r[l+d]=p+v,h[l+d]=M+g,r[l+d+o]=p-v,h[l+d+o]=M-g,d!==s&&(c=u*m-a*f,f=u*f+a*m,m=c)}},p.prototype.guessLen13b=function(t,i){var r=1|Math.max(i,t),h=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+h},p.prototype.conjugate=function(t,i,r){if(!(r<=1))for(var h=0;h<r/2;h++){var n=t[h];t[h]=t[r-h-1],t[r-h-1]=n,n=i[h],i[h]=-i[r-h-1],i[r-h-1]=-n}},p.prototype.normalize13b=function(t,i){for(var r=0,h=0;h<i/2;h++){var n=8192*Math.round(t[2*h+1]/i)+Math.round(t[2*h]/i)+r;t[h]=67108863&n,r=n<67108864?0:n/67108864|0}return t},p.prototype.convert13b=function(t,i,h,n){for(var e=0,o=0;o<i;o++)e+=0|t[o],h[2*o]=8191&e,e>>>=13,h[2*o+1]=8191&e,e>>>=13;for(o=2*i;o<n;++o)h[o]=0;r(0===e),r(0==(-8192&e))},p.prototype.stub=function(t){for(var i=new Array(t),r=0;r<t;r++)i[r]=0;return i},p.prototype.mulp=function(t,i,r){var h=2*this.guessLen13b(t.length,i.length),n=this.makeRBT(h),e=this.stub(h),o=new Array(h),s=new Array(h),u=new Array(h),a=new Array(h),l=new Array(h),m=new Array(h),f=r.words;f.length=h,this.convert13b(t.words,t.length,o,h),this.convert13b(i.words,i.length,a,h),this.transform(o,e,s,u,h,n),this.transform(a,e,l,m,h,n);for(var d=0;d<h;d++){var p=s[d]*l[d]-u[d]*m[d];u[d]=s[d]*m[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,h),this.transform(s,u,f,e,h,n),this.conjugate(f,e,h),this.normalize13b(f,h),r.negative=t.negative^i.negative,r.length=t.length+i.length,r.strip()},n.prototype.mul=function(t){var i=new n(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},n.prototype.mulf=function(t){var i=new n(null);return i.words=new Array(this.length+t.length),d(this,t,i)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var i=0,h=0;h<this.length;h++){var n=(0|this.words[h])*t,e=(67108863&n)+(67108863&i);i>>=26,i+=n/67108864|0,i+=e>>>26,this.words[h]=67108863&e}return 0!==i&&(this.words[h]=i,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var i=function(t){for(var i=new Array(t.bitLength()),r=0;r<i.length;r++){var h=r/26|0,n=r%26;i[r]=(t.words[h]&1<<n)>>>n}return i}(t);if(0===i.length)return new n(1);for(var r=this,h=0;h<i.length&&0===i[h];h++,r=r.sqr());if(++h<i.length)for(var e=r.sqr();h<i.length;h++,e=e.sqr())0!==i[h]&&(r=r.mul(e));return r},n.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var i,h=t%26,n=(t-h)/26,e=67108863>>>26-h<<26-h;if(0!==h){var o=0;for(i=0;i<this.length;i++){var s=this.words[i]&e,u=(0|this.words[i])-s<<h;this.words[i]=u|o,o=s>>>26-h}o&&(this.words[i]=o,this.length++)}if(0!==n){for(i=this.length-1;i>=0;i--)this.words[i+n]=this.words[i];for(i=0;i<n;i++)this.words[i]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,i,h){var n;r("number"==typeof t&&t>=0),n=i?(i-i%26)/26:0;var e=t%26,o=Math.min((t-e)/26,this.length),s=67108863^67108863>>>e<<e,u=h;if(n-=o,n=Math.max(0,n),u){for(var a=0;a<o;a++)u.words[a]=this.words[a];u.length=o}if(0===o);else if(this.length>o)for(this.length-=o,a=0;a<this.length;a++)this.words[a]=this.words[a+o];else this.words[0]=0,this.length=1;var l=0;for(a=this.length-1;a>=0&&(0!==l||a>=n);a--){var m=0|this.words[a];this.words[a]=l<<26-e|m>>>e,l=m&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,i,h){return r(0===this.negative),this.iushrn(t,i,h)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){r("number"==typeof t&&t>=0);var i=t%26,h=(t-i)/26,n=1<<i;return!(this.length<=h)&&!!(this.words[h]&n)},n.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var i=t%26,h=(t-i)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=h)return this;if(0!==i&&h++,this.length=Math.min(h,this.length),0!==i){var n=67108863^67108863>>>i<<i;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},n.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,i,h){var n,e,o=t.length+h;this._expand(o);var s=0;for(n=0;n<t.length;n++){e=(0|this.words[n+h])+s;var u=(0|t.words[n])*i;s=((e-=67108863&u)>>26)-(u/67108864|0),this.words[n+h]=67108863&e}for(;n<this.length-h;n++)s=(e=(0|this.words[n+h])+s)>>26,this.words[n+h]=67108863&e;if(0===s)return this.strip();for(r(-1===s),s=0,n=0;n<this.length;n++)s=(e=-(0|this.words[n])+s)>>26,this.words[n]=67108863&e;return this.negative=1,this.strip()},n.prototype._wordDiv=function(t,i){var r=(this.length,t.length),h=this.clone(),e=t,o=0|e.words[e.length-1];0!==(r=26-this._countBits(o))&&(e=e.ushln(r),h.iushln(r),o=0|e.words[e.length-1]);var s,u=h.length-e.length;if("mod"!==i){(s=new n(null)).length=u+1,s.words=new Array(s.length);for(var a=0;a<s.length;a++)s.words[a]=0}var l=h.clone()._ishlnsubmul(e,1,u);0===l.negative&&(h=l,s&&(s.words[u]=1));for(var m=u-1;m>=0;m--){var f=67108864*(0|h.words[e.length+m])+(0|h.words[e.length+m-1]);for(f=Math.min(f/o|0,67108863),h._ishlnsubmul(e,f,m);0!==h.negative;)f--,h.negative=0,h._ishlnsubmul(e,1,m),h.isZero()||(h.negative^=1);s&&(s.words[m]=f)}return s&&s.strip(),h.strip(),"div"!==i&&0!==r&&h.iushrn(r),{div:s||null,mod:h}},n.prototype.divmod=function(t,i,h){return r(!t.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,i),"mod"!==i&&(e=s.div.neg()),"div"!==i&&(o=s.mod.neg(),h&&0!==o.negative&&o.iadd(t)),{div:e,mod:o}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),i),"mod"!==i&&(e=s.div.neg()),{div:e,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),i),"div"!==i&&(o=s.mod.neg(),h&&0!==o.negative&&o.isub(t)),{div:s.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new n(0),mod:this}:1===t.length?"div"===i?{div:this.divn(t.words[0]),mod:null}:"mod"===i?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,i);var e,o,s},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var r=0!==i.div.negative?i.mod.isub(t):i.mod,h=t.ushrn(1),n=t.andln(1),e=r.cmp(h);return e<0||1===n&&0===e?i.div:0!==i.div.negative?i.div.isubn(1):i.div.iaddn(1)},n.prototype.modn=function(t){r(t<=67108863);for(var i=(1<<26)%t,h=0,n=this.length-1;n>=0;n--)h=(i*h+(0|this.words[n]))%t;return h},n.prototype.idivn=function(t){r(t<=67108863);for(var i=0,h=this.length-1;h>=0;h--){var n=(0|this.words[h])+67108864*i;this.words[h]=n/t|0,i=n%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var i=this,h=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var e=new n(1),o=new n(0),s=new n(0),u=new n(1),a=0;i.isEven()&&h.isEven();)i.iushrn(1),h.iushrn(1),++a;for(var l=h.clone(),m=i.clone();!i.isZero();){for(var f=0,d=1;0==(i.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(i.iushrn(f);f-- >0;)(e.isOdd()||o.isOdd())&&(e.iadd(l),o.isub(m)),e.iushrn(1),o.iushrn(1);for(var p=0,M=1;0==(h.words[0]&M)&&p<26;++p,M<<=1);if(p>0)for(h.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(m)),s.iushrn(1),u.iushrn(1);i.cmp(h)>=0?(i.isub(h),e.isub(s),o.isub(u)):(h.isub(i),s.isub(e),u.isub(o))}return{a:s,b:u,gcd:h.iushln(a)}},n.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var i=this,h=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var e,o=new n(1),s=new n(0),u=h.clone();i.cmpn(1)>0&&h.cmpn(1)>0;){for(var a=0,l=1;0==(i.words[0]&l)&&a<26;++a,l<<=1);if(a>0)for(i.iushrn(a);a-- >0;)o.isOdd()&&o.iadd(u),o.iushrn(1);for(var m=0,f=1;0==(h.words[0]&f)&&m<26;++m,f<<=1);if(m>0)for(h.iushrn(m);m-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);i.cmp(h)>=0?(i.isub(h),o.isub(s)):(h.isub(i),s.isub(o))}return(e=0===i.cmpn(1)?o:s).cmpn(0)<0&&e.iadd(t),e},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),r=t.clone();i.negative=0,r.negative=0;for(var h=0;i.isEven()&&r.isEven();h++)i.iushrn(1),r.iushrn(1);for(;;){for(;i.isEven();)i.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=i.cmp(r);if(n<0){var e=i;i=r,r=e}else if(0===n||0===r.cmpn(1))break;i.isub(r)}return r.iushln(h)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return 0==(1&this.words[0])},n.prototype.isOdd=function(){return 1==(1&this.words[0])},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){r("number"==typeof t);var i=t%26,h=(t-i)/26,n=1<<i;if(this.length<=h)return this._expand(h+1),this.words[h]|=n,this;for(var e=n,o=h;0!==e&&o<this.length;o++){var s=0|this.words[o];e=(s+=e)>>>26,s&=67108863,this.words[o]=s}return 0!==e&&(this.words[o]=e,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var i,h=t<0;if(0!==this.negative&&!h)return-1;if(0===this.negative&&h)return 1;if(this.strip(),this.length>1)i=1;else{h&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];i=n===t?0:n<t?-1:1}return 0!==this.negative?0|-i:i},n.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var i=this.ucmp(t);return 0!==this.negative?0|-i:i},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,r=this.length-1;r>=0;r--){var h=0|this.words[r],n=0|t.words[r];if(h!==n){h<n?i=-1:h>n&&(i=1);break}}return i},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return-1===this.cmpn(t)},n.prototype.lt=function(t){return-1===this.cmp(t)},n.prototype.lten=function(t){return this.cmpn(t)<=0},n.prototype.lte=function(t){return this.cmp(t)<=0},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new b(t)},n.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var M={k256:null,p224:null,p192:null,p25519:null};function v(t,i){this.name=t,this.p=new n(i,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function c(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function y(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function b(t){if("string"==typeof t){var i=n._prime(t);this.m=i.p,this.prime=i}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function _(t){b.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new n(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var i,r=t;do{this.split(r,this.tmp),i=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(i>this.n);var h=i<this.n?-1:r.ucmp(this.p);return 0===h?(r.words[0]=0,r.length=1):h>0?r.isub(this.p):r.strip(),r},v.prototype.split=function(t,i){t.iushrn(this.n,0,i)},v.prototype.imulK=function(t){return t.imul(this.k)},h(g,v),g.prototype.split=function(t,i){for(var r=Math.min(t.length,9),h=0;h<r;h++)i.words[h]=t.words[h];if(i.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(i.words[i.length++]=4194303&n,h=10;h<t.length;h++){var e=0|t.words[h];t.words[h-10]=(4194303&e)<<4|n>>>22,n=e}n>>>=22,t.words[h-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},g.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,r=0;r<t.length;r++){var h=0|t.words[r];i+=977*h,t.words[r]=67108863&i,i=64*h+(i/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},h(c,v),h(w,v),h(y,v),y.prototype.imulK=function(t){for(var i=0,r=0;r<t.length;r++){var h=19*(0|t.words[r])+i,n=67108863&h;h>>>=26,t.words[r]=n,i=h}return 0!==i&&(t.words[t.length++]=i),t},n._prime=function(t){if(M[t])return M[t];var i;if("k256"===t)i=new g;else if("p224"===t)i=new c;else if("p192"===t)i=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);i=new y}return M[t]=i,i},b.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},b.prototype._verify2=function(t,i){r(0==(t.negative|i.negative),"red works only with positives"),r(t.red&&t.red===i.red,"red works only with red numbers")},b.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},b.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},b.prototype.add=function(t,i){this._verify2(t,i);var r=t.add(i);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},b.prototype.iadd=function(t,i){this._verify2(t,i);var r=t.iadd(i);return r.cmp(this.m)>=0&&r.isub(this.m),r},b.prototype.sub=function(t,i){this._verify2(t,i);var r=t.sub(i);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},b.prototype.isub=function(t,i){this._verify2(t,i);var r=t.isub(i);return r.cmpn(0)<0&&r.iadd(this.m),r},b.prototype.shl=function(t,i){return this._verify1(t),this.imod(t.ushln(i))},b.prototype.imul=function(t,i){return this._verify2(t,i),this.imod(t.imul(i))},b.prototype.mul=function(t,i){return this._verify2(t,i),this.imod(t.mul(i))},b.prototype.isqr=function(t){return this.imul(t,t.clone())},b.prototype.sqr=function(t){return this.mul(t,t)},b.prototype.sqrt=function(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(r(i%2==1),3===i){var h=this.m.add(new n(1)).iushrn(2);return this.pow(t,h)}for(var e=this.m.subn(1),o=0;!e.isZero()&&0===e.andln(1);)o++,e.iushrn(1);r(!e.isZero());var s=new n(1).toRed(this),u=s.redNeg(),a=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new n(2*l*l).toRed(this);0!==this.pow(l,a).cmp(u);)l.redIAdd(u);for(var m=this.pow(l,e),f=this.pow(t,e.addn(1).iushrn(1)),d=this.pow(t,e),p=o;0!==d.cmp(s);){for(var M=d,v=0;0!==M.cmp(s);v++)M=M.redSqr();r(v<p);var g=this.pow(m,new n(1).iushln(p-v-1));f=f.redMul(g),m=g.redSqr(),d=d.redMul(m),p=v}return f},b.prototype.invm=function(t){var i=t._invmp(this.m);return 0!==i.negative?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},b.prototype.pow=function(t,i){if(i.isZero())return new n(1).toRed(this);if(0===i.cmpn(1))return t.clone();var r=new Array(16);r[0]=new n(1).toRed(this),r[1]=t;for(var h=2;h<r.length;h++)r[h]=this.mul(r[h-1],t);var e=r[0],o=0,s=0,u=i.bitLength()%26;for(0===u&&(u=26),h=i.length-1;h>=0;h--){for(var a=i.words[h],l=u-1;l>=0;l--){var m=a>>l&1;e!==r[0]&&(e=this.sqr(e)),0!==m||0!==o?(o<<=1,o|=m,(4===++s||0===h&&0===l)&&(e=this.mul(e,r[o]),s=0,o=0)):s=0}u=26}return e},b.prototype.convertTo=function(t){var i=t.umod(this.m);return i===t?i.clone():i},b.prototype.convertFrom=function(t){var i=t.clone();return i.red=null,i},n.mont=function(t){return new _(t)},h(_,b),_.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},_.prototype.convertFrom=function(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},_.prototype.imul=function(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(i),h=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(h).iushrn(this.shift),e=n;return n.cmp(this.m)>=0?e=n.isub(this.m):n.cmpn(0)<0&&(e=n.iadd(this.m)),e._forceRed(this)},_.prototype.mul=function(t,i){if(t.isZero()||i.isZero())return new n(0)._forceRed(this);var r=t.mul(i),h=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=r.isub(h).iushrn(this.shift),o=e;return e.cmp(this.m)>=0?o=e.isub(this.m):e.cmpn(0)<0&&(o=e.iadd(this.m)),o._forceRed(this)},_.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}("undefined"==typeof module||module,this);
},{"buffer":"vBel"}],"RPfS":[function(require,module,exports) {
var t;function e(t){this.rand=t}if(module.exports=function(r){return t||(t=new e(null)),t.generate(r)},module.exports.Rand=e,e.prototype.generate=function(t){return this._rand(t)},e.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),r=0;r<e.length;r++)e[r]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var r=require("crypto");if("function"!=typeof r.randomBytes)throw new Error("Not supported");e.prototype._rand=function(t){return r.randomBytes(t)}}catch(n){}
},{"crypto":"vBel"}],"pyK2":[function(require,module,exports) {
var r=require("bn.js"),e=require("brorand");function n(r){this.rand=r||new e.Rand}module.exports=n,n.create=function(r){return new n(r)},n.prototype._randbelow=function(e){var n=e.bitLength(),t=Math.ceil(n/8);do{var o=new r(this.rand.generate(t))}while(o.cmp(e)>=0);return o},n.prototype._randrange=function(r,e){var n=e.sub(r);return r.add(this._randbelow(n))},n.prototype.test=function(e,n,t){var o=e.bitLength(),a=r.mont(e),d=new r(1).toRed(a);n||(n=Math.max(1,o/48|0));for(var i=e.subn(1),u=0;!i.testn(u);u++);for(var f=e.shrn(u),c=i.toRed(a);n>0;n--){var p=this._randrange(new r(2),i);t&&t(p);var s=p.toRed(a).redPow(f);if(0!==s.cmp(d)&&0!==s.cmp(c)){for(var m=1;m<u;m++){if(0===(s=s.redSqr()).cmp(d))return!1;if(0===s.cmp(c))break}if(m===u)return!1}}return!0},n.prototype.getDivisor=function(e,n){var t=e.bitLength(),o=r.mont(e),a=new r(1).toRed(o);n||(n=Math.max(1,t/48|0));for(var d=e.subn(1),i=0;!d.testn(i);i++);for(var u=e.shrn(i),f=d.toRed(o);n>0;n--){var c=this._randrange(new r(2),d),p=e.gcd(c);if(0!==p.cmpn(1))return p;var s=c.toRed(o).redPow(u);if(0!==s.cmp(a)&&0!==s.cmp(f)){for(var m=1;m<i;m++){if(0===(s=s.redSqr()).cmp(a))return s.fromRed().subn(1).gcd(e);if(0===s.cmp(f))break}if(m===i)return(s=s.redSqr()).fromRed().subn(1).gcd(e)}}return!1};
},{"bn.js":"Os5M","brorand":"RPfS"}],"Wc2a":[function(require,module,exports) {
var e=require("randombytes");module.exports=M,M.simpleSieve=b,M.fermatTest=q;var n=require("bn.js"),r=new n(24),t=require("miller-rabin"),i=new t,o=new n(1),f=new n(2),a=new n(5),u=new n(16),w=new n(8),d=new n(10),m=new n(3),s=new n(7),c=new n(11),l=new n(4),v=new n(12),p=null;function h(){if(null!==p)return p;var e=[];e[0]=2;for(var n=1,r=3;r<1048576;r+=2){for(var t=Math.ceil(Math.sqrt(r)),i=0;i<n&&e[i]<=t&&r%e[i]!=0;i++);n!==i&&e[i]<=t||(e[n++]=r)}return p=e,e}function b(e){for(var n=h(),r=0;r<n.length;r++)if(0===e.modn(n[r]))return 0===e.cmpn(n[r]);return!0}function q(e){var r=n.mont(e);return 0===f.toRed(r).redPow(e.subn(1)).fromRed().cmpn(1)}function M(t,u){if(t<16)return new n(2===u||5===u?[140,123]:[140,39]);var w,s;for(u=new n(u);;){for(w=new n(e(Math.ceil(t/8)));w.bitLength()>t;)w.ishrn(1);if(w.isEven()&&w.iadd(o),w.testn(1)||w.iadd(f),u.cmp(f)){if(!u.cmp(a))for(;w.mod(d).cmp(m);)w.iadd(l)}else for(;w.mod(r).cmp(c);)w.iadd(l);if(b(s=w.shrn(1))&&b(w)&&q(s)&&q(w)&&i.test(s)&&i.test(w))return w}}
},{"randombytes":"rsbe","bn.js":"Os5M","miller-rabin":"pyK2"}],"gpoe":[function(require,module,exports) {
module.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}};
},{}],"zxd7":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,t=require("bn.js"),r=require("miller-rabin"),i=new r,n=new t(24),o=new t(11),s=new t(10),u=new t(3),p=new t(7),h=require("./generatePrime"),f=require("randombytes");function _(r,i){return i=i||"utf8",e.isBuffer(r)||(r=new e(r,i)),this._pub=new t(r),this}function m(r,i){return i=i||"utf8",e.isBuffer(r)||(r=new e(r,i)),this._priv=new t(r),this}module.exports=g;var c={};function a(e,t){var r=t.toString("hex"),f=[r,e.toString(16)].join("_");if(f in c)return c[f];var _,m=0;if(e.isEven()||!h.simpleSieve||!h.fermatTest(e)||!i.test(e))return m+=1,m+="02"===r||"05"===r?8:4,c[f]=m,m;switch(i.test(e.shrn(1))||(m+=2),r){case"02":e.mod(n).cmp(o)&&(m+=8);break;case"05":(_=e.mod(s)).cmp(u)&&_.cmp(p)&&(m+=8);break;default:m+=4}return c[f]=m,m}function g(e,r,i){this.setGenerator(r),this.__prime=new t(e),this._prime=t.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,i?(this.setPublicKey=_,this.setPrivateKey=m):this._primeCode=8}function v(t,r){var i=new e(t.toArray());return r?i.toString(r):i}Object.defineProperty(g.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=a(this.__prime,this.__gen)),this._primeCode}}),g.prototype.generateKeys=function(){return this._priv||(this._priv=new t(f(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},g.prototype.computeSecret=function(r){var i=(r=(r=new t(r)).toRed(this._prime)).redPow(this._priv).fromRed(),n=new e(i.toArray()),o=this.getPrime();if(n.length<o.length){var s=new e(o.length-n.length);s.fill(0),n=e.concat([s,n])}return n},g.prototype.getPublicKey=function(e){return v(this._pub,e)},g.prototype.getPrivateKey=function(e){return v(this._priv,e)},g.prototype.getPrime=function(e){return v(this.__prime,e)},g.prototype.getGenerator=function(e){return v(this._gen,e)},g.prototype.setGenerator=function(r,i){return i=i||"utf8",e.isBuffer(r)||(r=new e(r,i)),this.__gen=r,this._gen=new t(r),this};
},{"bn.js":"Os5M","miller-rabin":"pyK2","./generatePrime":"Wc2a","randombytes":"rsbe","buffer":"FaCw"}],"j4A6":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,r=require("./lib/generatePrime"),i=require("./lib/primes.json"),n=require("./lib/dh");function f(r){var f=new e(i[r].prime,"hex"),a=new e(i[r].gen,"hex");return new n(f,a)}var a={binary:!0,hex:!0,base64:!0};function u(i,f,t,l){return e.isBuffer(f)||void 0===a[f]?u(i,"binary",f,t):(f=f||"binary",l=l||"binary",t=t||new e([2]),e.isBuffer(t)||(t=new e(t,l)),"number"==typeof i?new n(r(i,t),t,!0):(e.isBuffer(i)||(i=new e(i,f)),new n(i,t,!0)))}exports.DiffieHellmanGroup=exports.createDiffieHellmanGroup=exports.getDiffieHellman=f,exports.createDiffieHellman=exports.DiffieHellman=u;
},{"./lib/generatePrime":"Wc2a","./lib/primes.json":"gpoe","./lib/dh":"zxd7","buffer":"FaCw"}],"j2j4":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,r=require("bn.js"),u=require("randombytes");function o(e){var u=m(e);return{blinder:u.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed(),unblinder:u.invm(e.modulus)}}function n(u,n){var m=o(n),d=n.modulus.byteLength(),i=(r.mont(n.modulus),new r(u).mul(m.blinder).umod(n.modulus)),t=i.toRed(r.mont(n.prime1)),l=i.toRed(r.mont(n.prime2)),f=n.coefficient,p=n.prime1,s=n.prime2,b=t.redPow(n.exponent1),a=l.redPow(n.exponent2);b=b.fromRed(),a=a.fromRed();var w=b.isub(a).imul(f).umod(p);return w.imul(s),a.iadd(w),new e(a.imul(m.unblinder).umod(n.modulus).toArray(!1,d))}function m(e){for(var o=e.modulus.byteLength(),n=new r(u(o));n.cmp(e.modulus)>=0||!n.umod(e.prime1)||!n.umod(e.prime2);)n=new r(u(o));return n}module.exports=n,n.getr=m;
},{"bn.js":"Os5M","randombytes":"rsbe","buffer":"FaCw"}],"SP7N":[function(require,module,exports) {
module.exports={_from:"elliptic@^6.0.0",_id:"elliptic@6.5.2",_inBundle:!1,_integrity:"sha512-f4x70okzZbIQl/NSRLkI/+tteV/9WqL98zx+SQ69KbXxmVrmjwsNUPn/gYJJ0sHvEak24cZgHIPegRePAtA/xw==",_location:"/parcel-bundler/elliptic",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"elliptic@^6.0.0",name:"elliptic",escapedName:"elliptic",rawSpec:"^6.0.0",saveSpec:null,fetchSpec:"^6.0.0"},_requiredBy:["/parcel-bundler/browserify-sign","/parcel-bundler/create-ecdh"],_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.5.2.tgz",_shasum:"05c5678d7173c049d8ca433552224a495d0e3762",_spec:"elliptic@^6.0.0",_where:"/usr/lib/node_modules/parcel-bundler/node_modules/browserify-sign",author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bugs:{url:"https://github.com/indutny/elliptic/issues"},bundleDependencies:!1,dependencies:{"bn.js":"^4.4.0",brorand:"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0",inherits:"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},deprecated:!1,description:"EC cryptography",devDependencies:{brfs:"^1.4.3",coveralls:"^3.0.8",grunt:"^1.0.4","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.2",jscs:"^3.0.7",jshint:"^2.10.3",mocha:"^6.2.2"},files:["lib"],homepage:"https://github.com/indutny/elliptic",keywords:["EC","Elliptic","curve","Cryptography"],license:"MIT",main:"lib/elliptic.js",name:"elliptic",repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts:{jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version:"6.5.2"};
},{}],"qZjr":[function(require,module,exports) {
"use strict";var r=exports;function e(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if("string"!=typeof r){for(var n=0;n<r.length;n++)t[n]=0|r[n];return t}if("hex"===e){(r=r.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(r="0"+r);for(n=0;n<r.length;n+=2)t.push(parseInt(r[n]+r[n+1],16))}else for(n=0;n<r.length;n++){var o=r.charCodeAt(n),u=o>>8,i=255&o;u?t.push(u,i):t.push(i)}return t}function t(r){return 1===r.length?"0"+r:r}function n(r){for(var e="",n=0;n<r.length;n++)e+=t(r[n].toString(16));return e}r.toArray=e,r.zero2=t,r.toHex=n,r.encode=function(r,e){return"hex"===e?n(r):r};
},{}],"HKaC":[function(require,module,exports) {
"use strict";var r=exports,n=require("bn.js"),e=require("minimalistic-assert"),t=require("minimalistic-crypto-utils");function i(r,n,e){var t=new Array(Math.max(r.bitLength(),e)+1);t.fill(0);for(var i=1<<n+1,o=r.clone(),s=0;s<t.length;s++){var a,u=o.andln(i-1);o.isOdd()?(a=u>(i>>1)-1?(i>>1)-u:u,o.isubn(a)):a=0,t[s]=a,o.iushrn(1)}return t}function o(r,n){var e=[[],[]];r=r.clone(),n=n.clone();for(var t=0,i=0;r.cmpn(-t)>0||n.cmpn(-i)>0;){var o,s,a,u=r.andln(3)+t&3,c=n.andln(3)+i&3;if(3===u&&(u=-1),3===c&&(c=-1),0==(1&u))o=0;else o=3!==(a=r.andln(7)+t&7)&&5!==a||2!==c?u:-u;if(e[0].push(o),0==(1&c))s=0;else s=3!==(a=n.andln(7)+i&7)&&5!==a||2!==u?c:-c;e[1].push(s),2*t===o+1&&(t=1-t),2*i===s+1&&(i=1-i),r.iushrn(1),n.iushrn(1)}return e}function s(r,n,e){var t="_"+n;r.prototype[n]=function(){return void 0!==this[t]?this[t]:this[t]=e.call(this)}}function a(n){return"string"==typeof n?r.toArray(n,"hex"):n}function u(r){return new n(r,"hex","le")}r.assert=e,r.toArray=t.toArray,r.zero2=t.zero2,r.toHex=t.toHex,r.encode=t.encode,r.getNAF=i,r.getJSF=o,r.cachedProperty=s,r.parseBytes=a,r.intFromLE=u;
},{"bn.js":"Os5M","minimalistic-assert":"t8LV","minimalistic-crypto-utils":"qZjr"}],"pVUD":[function(require,module,exports) {
"use strict";var t=require("bn.js"),e=require("../utils"),n=e.getNAF,r=e.getJSF,i=e.assert;function o(e,n){this.type=e,this.p=new t(n.p,16),this.red=n.prime?t.red(n.prime):t.mont(this.p),this.zero=new t(0).toRed(this.red),this.one=new t(1).toRed(this.red),this.two=new t(2).toRed(this.red),this.n=n.n&&new t(n.n,16),this.g=n.g&&this.pointFromJSON(n.g,n.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function s(t,e){this.curve=t,this.type=e,this.precomputed=null}module.exports=o,o.prototype.point=function(){throw new Error("Not implemented")},o.prototype.validate=function(){throw new Error("Not implemented")},o.prototype._fixedNafMul=function(t,e){i(t.precomputed);var r=t._getDoubles(),o=n(e,1,this._bitLength),s=(1<<r.step+1)-(r.step%2==0?2:1);s/=3;for(var p=[],h=0;h<o.length;h+=r.step){var d=0;for(e=h+r.step-1;e>=h;e--)d=(d<<1)+o[e];p.push(d)}for(var u=this.jpoint(null,null,null),a=this.jpoint(null,null,null),l=s;l>0;l--){for(h=0;h<p.length;h++){(d=p[h])===l?a=a.mixedAdd(r.points[h]):d===-l&&(a=a.mixedAdd(r.points[h].neg()))}u=u.add(a)}return u.toP()},o.prototype._wnafMul=function(t,e){var r=4,o=t._getNAFPoints(r);r=o.wnd;for(var s=o.points,p=n(e,r,this._bitLength),h=this.jpoint(null,null,null),d=p.length-1;d>=0;d--){for(e=0;d>=0&&0===p[d];d--)e++;if(d>=0&&e++,h=h.dblp(e),d<0)break;var u=p[d];i(0!==u),h="affine"===t.type?u>0?h.mixedAdd(s[u-1>>1]):h.mixedAdd(s[-u-1>>1].neg()):u>0?h.add(s[u-1>>1]):h.add(s[-u-1>>1].neg())}return"affine"===t.type?h.toP():h},o.prototype._wnafMulAdd=function(t,e,i,o,s){for(var p=this._wnafT1,h=this._wnafT2,d=this._wnafT3,u=0,a=0;a<o;a++){var l=(L=e[a])._getNAFPoints(t);p[a]=l.wnd,h[a]=l.points}for(a=o-1;a>=1;a-=2){var f=a-1,c=a;if(1===p[f]&&1===p[c]){var g=[e[f],null,null,e[c]];0===e[f].y.cmp(e[c].y)?(g[1]=e[f].add(e[c]),g[2]=e[f].toJ().mixedAdd(e[c].neg())):0===e[f].y.cmp(e[c].y.redNeg())?(g[1]=e[f].toJ().mixedAdd(e[c]),g[2]=e[f].add(e[c].neg())):(g[1]=e[f].toJ().mixedAdd(e[c]),g[2]=e[f].toJ().mixedAdd(e[c].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],y=r(i[f],i[c]);u=Math.max(y[0].length,u),d[f]=new Array(u),d[c]=new Array(u);for(var v=0;v<u;v++){var w=0|y[0][v],b=0|y[1][v];d[f][v]=m[3*(w+1)+(b+1)],d[c][v]=0,h[f]=g}}else d[f]=n(i[f],p[f],this._bitLength),d[c]=n(i[c],p[c],this._bitLength),u=Math.max(d[f].length,u),u=Math.max(d[c].length,u)}var _=this.jpoint(null,null,null),A=this._wnafT4;for(a=u;a>=0;a--){for(var x=0;a>=0;){var N=!0;for(v=0;v<o;v++)A[v]=0|d[v][a],0!==A[v]&&(N=!1);if(!N)break;x++,a--}if(a>=0&&x++,_=_.dblp(x),a<0)break;for(v=0;v<o;v++){var L,P=A[v];0!==P&&(P>0?L=h[v][P-1>>1]:P<0&&(L=h[v][-P-1>>1].neg()),_="affine"===L.type?_.mixedAdd(L):_.add(L))}}for(a=0;a<o;a++)h[a]=null;return s?_:_.toP()},o.BasePoint=s,s.prototype.eq=function(){throw new Error("Not implemented")},s.prototype.validate=function(){return this.curve.validate(this)},o.prototype.decodePoint=function(t,n){t=e.toArray(t,n);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*r)return 6===t[0]?i(t[t.length-1]%2==0):7===t[0]&&i(t[t.length-1]%2==1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},s.prototype.encodeCompressed=function(t){return this.encode(t,!0)},s.prototype._encode=function(t){var e=this.curve.p.byteLength(),n=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",e))},s.prototype.encode=function(t,n){return e.encode(this._encode(n),t)},s.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},s.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},s.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)r=r.dbl();n.push(r)}return{step:t,points:n}},s.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],n=(1<<t)-1,r=1===n?null:this.dbl(),i=1;i<n;i++)e[i]=e[i-1].add(r);return{wnd:t,points:e}},s.prototype._getBeta=function(){return null},s.prototype.dblp=function(t){for(var e=this,n=0;n<t;n++)e=e.dbl();return e};
},{"bn.js":"Os5M","../utils":"HKaC"}],"pq4L":[function(require,module,exports) {
"use strict";var r=require("../utils"),e=require("bn.js"),t=require("inherits"),d=require("./base"),i=r.assert;function n(r){d.call(this,"short",r),this.a=new e(r.a,16).toRed(this.red),this.b=new e(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function u(r,t,i,n){d.BasePoint.call(this,r,"affine"),null===t&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(t,16),this.y=new e(i,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function s(r,t,i,n){d.BasePoint.call(this,r,"jacobian"),null===t&&null===i&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(t,16),this.y=new e(i,16),this.z=new e(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}t(n,d),module.exports=n,n.prototype._getEndomorphism=function(r){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,d;if(r.beta)t=new e(r.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(r.lambda)d=new e(r.lambda,16);else{var u=this._getEndoRoots(this.n);0===this.g.mul(u[0]).x.cmp(this.g.x.redMul(t))?d=u[0]:(d=u[1],i(0===this.g.mul(d).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:d,basis:r.basis?r.basis.map(function(r){return{a:new e(r.a,16),b:new e(r.b,16)}}):this._getEndoBasis(d)}}},n.prototype._getEndoRoots=function(r){var t=r===this.p?this.red:e.mont(r),d=new e(2).toRed(t).redInvm(),i=d.redNeg(),n=new e(3).toRed(t).redNeg().redSqrt().redMul(d);return[i.redAdd(n).fromRed(),i.redSub(n).fromRed()]},n.prototype._getEndoBasis=function(r){for(var t,d,i,n,u,s,o,h,p,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),a=r,f=this.n.clone(),c=new e(1),S=new e(0),b=new e(0),v=new e(1),I=0;0!==a.cmpn(0);){var y=f.div(a);h=f.sub(y.mul(a)),p=b.sub(y.mul(c));var A=v.sub(y.mul(S));if(!i&&h.cmp(l)<0)t=o.neg(),d=c,i=h.neg(),n=p;else if(i&&2==++I)break;o=h,f=a,a=h,b=c,c=p,v=S,S=A}u=h.neg(),s=p;var m=i.sqr().add(n.sqr());return u.sqr().add(s.sqr()).cmp(m)>=0&&(u=t,s=d),i.negative&&(i=i.neg(),n=n.neg()),u.negative&&(u=u.neg(),s=s.neg()),[{a:i,b:n},{a:u,b:s}]},n.prototype._endoSplit=function(r){var e=this.endo.basis,t=e[0],d=e[1],i=d.b.mul(r).divRound(this.n),n=t.b.neg().mul(r).divRound(this.n),u=i.mul(t.a),s=n.mul(d.a),o=i.mul(t.b),h=n.mul(d.b);return{k1:r.sub(u).sub(s),k2:o.add(h).neg()}},n.prototype.pointFromX=function(r,t){(r=new e(r,16)).red||(r=r.toRed(this.red));var d=r.redSqr().redMul(r).redIAdd(r.redMul(this.a)).redIAdd(this.b),i=d.redSqrt();if(0!==i.redSqr().redSub(d).cmp(this.zero))throw new Error("invalid point");var n=i.fromRed().isOdd();return(t&&!n||!t&&n)&&(i=i.redNeg()),this.point(r,i)},n.prototype.validate=function(r){if(r.inf)return!0;var e=r.x,t=r.y,d=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(d).redIAdd(this.b);return 0===t.redSqr().redISub(i).cmpn(0)},n.prototype._endoWnafMulAdd=function(r,e,t){for(var d=this._endoWnafT1,i=this._endoWnafT2,n=0;n<r.length;n++){var u=this._endoSplit(e[n]),s=r[n],o=s._getBeta();u.k1.negative&&(u.k1.ineg(),s=s.neg(!0)),u.k2.negative&&(u.k2.ineg(),o=o.neg(!0)),d[2*n]=s,d[2*n+1]=o,i[2*n]=u.k1,i[2*n+1]=u.k2}for(var h=this._wnafMulAdd(1,d,i,2*n,t),p=0;p<2*n;p++)d[p]=null,i[p]=null;return h},t(u,d.BasePoint),n.prototype.point=function(r,e,t){return new u(this,r,e,t)},n.prototype.pointFromJSON=function(r,e){return u.fromJSON(this,r,e)},u.prototype._getBeta=function(){if(this.curve.endo){var r=this.precomputed;if(r&&r.beta)return r.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(r){var t=this.curve,d=function(r){return t.point(r.x.redMul(t.endo.beta),r.y)};r.beta=e,e.precomputed={beta:null,naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(d)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(d)}}}return e}},u.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},u.fromJSON=function(r,e,t){"string"==typeof e&&(e=JSON.parse(e));var d=r.point(e[0],e[1],t);if(!e[2])return d;function i(e){return r.point(e[0],e[1],t)}var n=e[2];return d.precomputed={beta:null,doubles:n.doubles&&{step:n.doubles.step,points:[d].concat(n.doubles.points.map(i))},naf:n.naf&&{wnd:n.naf.wnd,points:[d].concat(n.naf.points.map(i))}},d},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.inf},u.prototype.add=function(r){if(this.inf)return r;if(r.inf)return this;if(this.eq(r))return this.dbl();if(this.neg().eq(r))return this.curve.point(null,null);if(0===this.x.cmp(r.x))return this.curve.point(null,null);var e=this.y.redSub(r.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(r.x).redInvm()));var t=e.redSqr().redISub(this.x).redISub(r.x),d=e.redMul(this.x.redSub(t)).redISub(this.y);return this.curve.point(t,d)},u.prototype.dbl=function(){if(this.inf)return this;var r=this.y.redAdd(this.y);if(0===r.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,t=this.x.redSqr(),d=r.redInvm(),i=t.redAdd(t).redIAdd(t).redIAdd(e).redMul(d),n=i.redSqr().redISub(this.x.redAdd(this.x)),u=i.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,u)},u.prototype.getX=function(){return this.x.fromRed()},u.prototype.getY=function(){return this.y.fromRed()},u.prototype.mul=function(r){return r=new e(r,16),this.isInfinity()?this:this._hasDoubles(r)?this.curve._fixedNafMul(this,r):this.curve.endo?this.curve._endoWnafMulAdd([this],[r]):this.curve._wnafMul(this,r)},u.prototype.mulAdd=function(r,e,t){var d=[this,e],i=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(d,i):this.curve._wnafMulAdd(1,d,i,2)},u.prototype.jmulAdd=function(r,e,t){var d=[this,e],i=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(d,i,!0):this.curve._wnafMulAdd(1,d,i,2,!0)},u.prototype.eq=function(r){return this===r||this.inf===r.inf&&(this.inf||0===this.x.cmp(r.x)&&0===this.y.cmp(r.y))},u.prototype.neg=function(r){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(r&&this.precomputed){var t=this.precomputed,d=function(r){return r.neg()};e.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(d)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(d)}}}return e},u.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},t(s,d.BasePoint),n.prototype.jpoint=function(r,e,t){return new s(this,r,e,t)},s.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var r=this.z.redInvm(),e=r.redSqr(),t=this.x.redMul(e),d=this.y.redMul(e).redMul(r);return this.curve.point(t,d)},s.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},s.prototype.add=function(r){if(this.isInfinity())return r;if(r.isInfinity())return this;var e=r.z.redSqr(),t=this.z.redSqr(),d=this.x.redMul(e),i=r.x.redMul(t),n=this.y.redMul(e.redMul(r.z)),u=r.y.redMul(t.redMul(this.z)),s=d.redSub(i),o=n.redSub(u);if(0===s.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=s.redSqr(),p=h.redMul(s),l=d.redMul(h),a=o.redSqr().redIAdd(p).redISub(l).redISub(l),f=o.redMul(l.redISub(a)).redISub(n.redMul(p)),c=this.z.redMul(r.z).redMul(s);return this.curve.jpoint(a,f,c)},s.prototype.mixedAdd=function(r){if(this.isInfinity())return r.toJ();if(r.isInfinity())return this;var e=this.z.redSqr(),t=this.x,d=r.x.redMul(e),i=this.y,n=r.y.redMul(e).redMul(this.z),u=t.redSub(d),s=i.redSub(n);if(0===u.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var o=u.redSqr(),h=o.redMul(u),p=t.redMul(o),l=s.redSqr().redIAdd(h).redISub(p).redISub(p),a=s.redMul(p.redISub(l)).redISub(i.redMul(h)),f=this.z.redMul(u);return this.curve.jpoint(l,a,f)},s.prototype.dblp=function(r){if(0===r)return this;if(this.isInfinity())return this;if(!r)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var e=this,t=0;t<r;t++)e=e.dbl();return e}var d=this.curve.a,i=this.curve.tinv,n=this.x,u=this.y,s=this.z,o=s.redSqr().redSqr(),h=u.redAdd(u);for(t=0;t<r;t++){var p=n.redSqr(),l=h.redSqr(),a=l.redSqr(),f=p.redAdd(p).redIAdd(p).redIAdd(d.redMul(o)),c=n.redMul(l),S=f.redSqr().redISub(c.redAdd(c)),b=c.redISub(S),v=f.redMul(b);v=v.redIAdd(v).redISub(a);var I=h.redMul(s);t+1<r&&(o=o.redMul(a)),n=S,s=I,h=v}return this.curve.jpoint(n,h.redMul(i),s)},s.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},s.prototype._zeroDbl=function(){var r,e,t;if(this.zOne){var d=this.x.redSqr(),i=this.y.redSqr(),n=i.redSqr(),u=this.x.redAdd(i).redSqr().redISub(d).redISub(n);u=u.redIAdd(u);var s=d.redAdd(d).redIAdd(d),o=s.redSqr().redISub(u).redISub(u),h=n.redIAdd(n);h=(h=h.redIAdd(h)).redIAdd(h),r=o,e=s.redMul(u.redISub(o)).redISub(h),t=this.y.redAdd(this.y)}else{var p=this.x.redSqr(),l=this.y.redSqr(),a=l.redSqr(),f=this.x.redAdd(l).redSqr().redISub(p).redISub(a);f=f.redIAdd(f);var c=p.redAdd(p).redIAdd(p),S=c.redSqr(),b=a.redIAdd(a);b=(b=b.redIAdd(b)).redIAdd(b),r=S.redISub(f).redISub(f),e=c.redMul(f.redISub(r)).redISub(b),t=(t=this.y.redMul(this.z)).redIAdd(t)}return this.curve.jpoint(r,e,t)},s.prototype._threeDbl=function(){var r,e,t;if(this.zOne){var d=this.x.redSqr(),i=this.y.redSqr(),n=i.redSqr(),u=this.x.redAdd(i).redSqr().redISub(d).redISub(n);u=u.redIAdd(u);var s=d.redAdd(d).redIAdd(d).redIAdd(this.curve.a),o=s.redSqr().redISub(u).redISub(u);r=o;var h=n.redIAdd(n);h=(h=h.redIAdd(h)).redIAdd(h),e=s.redMul(u.redISub(o)).redISub(h),t=this.y.redAdd(this.y)}else{var p=this.z.redSqr(),l=this.y.redSqr(),a=this.x.redMul(l),f=this.x.redSub(p).redMul(this.x.redAdd(p));f=f.redAdd(f).redIAdd(f);var c=a.redIAdd(a),S=(c=c.redIAdd(c)).redAdd(c);r=f.redSqr().redISub(S),t=this.y.redAdd(this.z).redSqr().redISub(l).redISub(p);var b=l.redSqr();b=(b=(b=b.redIAdd(b)).redIAdd(b)).redIAdd(b),e=f.redMul(c.redISub(r)).redISub(b)}return this.curve.jpoint(r,e,t)},s.prototype._dbl=function(){var r=this.curve.a,e=this.x,t=this.y,d=this.z,i=d.redSqr().redSqr(),n=e.redSqr(),u=t.redSqr(),s=n.redAdd(n).redIAdd(n).redIAdd(r.redMul(i)),o=e.redAdd(e),h=(o=o.redIAdd(o)).redMul(u),p=s.redSqr().redISub(h.redAdd(h)),l=h.redISub(p),a=u.redSqr();a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);var f=s.redMul(l).redISub(a),c=t.redAdd(t).redMul(d);return this.curve.jpoint(p,f,c)},s.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var r=this.x.redSqr(),e=this.y.redSqr(),t=this.z.redSqr(),d=e.redSqr(),i=r.redAdd(r).redIAdd(r),n=i.redSqr(),u=this.x.redAdd(e).redSqr().redISub(r).redISub(d),s=(u=(u=(u=u.redIAdd(u)).redAdd(u).redIAdd(u)).redISub(n)).redSqr(),o=d.redIAdd(d);o=(o=(o=o.redIAdd(o)).redIAdd(o)).redIAdd(o);var h=i.redIAdd(u).redSqr().redISub(n).redISub(s).redISub(o),p=e.redMul(h);p=(p=p.redIAdd(p)).redIAdd(p);var l=this.x.redMul(s).redISub(p);l=(l=l.redIAdd(l)).redIAdd(l);var a=this.y.redMul(h.redMul(o.redISub(h)).redISub(u.redMul(s)));a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);var f=this.z.redAdd(u).redSqr().redISub(t).redISub(s);return this.curve.jpoint(l,a,f)},s.prototype.mul=function(r,t){return r=new e(r,t),this.curve._wnafMul(this,r)},s.prototype.eq=function(r){if("affine"===r.type)return this.eq(r.toJ());if(this===r)return!0;var e=this.z.redSqr(),t=r.z.redSqr();if(0!==this.x.redMul(t).redISub(r.x.redMul(e)).cmpn(0))return!1;var d=e.redMul(this.z),i=t.redMul(r.z);return 0===this.y.redMul(i).redISub(r.y.redMul(d)).cmpn(0)},s.prototype.eqXToP=function(r){var e=this.z.redSqr(),t=r.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(t))return!0;for(var d=r.clone(),i=this.curve.redN.redMul(e);;){if(d.iadd(this.curve.n),d.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),0===this.x.cmp(t))return!0}},s.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},s.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};
},{"../utils":"HKaC","bn.js":"Os5M","inherits":"Thv4","./base":"pVUD"}],"tYq8":[function(require,module,exports) {
"use strict";var t=require("bn.js"),r=require("inherits"),e=require("./base"),i=require("../utils");function o(r){e.call(this,"mont",r),this.a=new t(r.a,16).toRed(this.red),this.b=new t(r.b,16).toRed(this.red),this.i4=new t(4).toRed(this.red).redInvm(),this.two=new t(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function n(r,i,o){e.BasePoint.call(this,r,"projective"),null===i&&null===o?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new t(i,16),this.z=new t(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}r(o,e),module.exports=o,o.prototype.validate=function(t){var r=t.normalize().x,e=r.redSqr(),i=e.redMul(r).redAdd(e.redMul(this.a)).redAdd(r);return 0===i.redSqrt().redSqr().cmp(i)},r(n,e.BasePoint),o.prototype.decodePoint=function(t,r){return this.point(i.toArray(t,r),1)},o.prototype.point=function(t,r){return new n(this,t,r)},o.prototype.pointFromJSON=function(t){return n.fromJSON(this,t)},n.prototype.precompute=function(){},n.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},n.fromJSON=function(t,r){return new n(t,r[0],r[1]||t.one)},n.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},n.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},n.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),r=this.x.redSub(this.z).redSqr(),e=t.redSub(r),i=t.redMul(r),o=e.redMul(r.redAdd(this.curve.a24.redMul(e)));return this.curve.point(i,o)},n.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.diffAdd=function(t,r){var e=this.x.redAdd(this.z),i=this.x.redSub(this.z),o=t.x.redAdd(t.z),n=t.x.redSub(t.z).redMul(e),d=o.redMul(i),u=r.z.redMul(n.redAdd(d).redSqr()),s=r.x.redMul(n.redISub(d).redSqr());return this.curve.point(u,s)},n.prototype.mul=function(t){for(var r=t.clone(),e=this,i=this.curve.point(null,null),o=[];0!==r.cmpn(0);r.iushrn(1))o.push(r.andln(1));for(var n=o.length-1;n>=0;n--)0===o[n]?(e=e.diffAdd(i,this),i=i.dbl()):(i=e.diffAdd(i,this),e=e.dbl());return i},n.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},n.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},n.prototype.getX=function(){return this.normalize(),this.x.fromRed()};
},{"bn.js":"Os5M","inherits":"Thv4","./base":"pVUD","../utils":"HKaC"}],"pAHa":[function(require,module,exports) {
"use strict";var t=require("../utils"),e=require("bn.js"),r=require("inherits"),i=require("./base"),d=t.assert;function s(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,i.call(this,"edwards",t),this.a=new e(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),d(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function u(t,r,d,s,u){i.BasePoint.call(this,t,"projective"),null===r&&null===d&&null===s?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(r,16),this.y=new e(d,16),this.z=s?new e(s,16):this.curve.one,this.t=u&&new e(u,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}r(s,i),module.exports=s,s.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},s.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},s.prototype.jpoint=function(t,e,r,i){return this.point(t,e,r,i)},s.prototype.pointFromX=function(t,r){(t=new e(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),d=this.c2.redSub(this.a.redMul(i)),s=this.one.redSub(this.c2.redMul(this.d).redMul(i)),u=d.redMul(s.redInvm()),h=u.redSqrt();if(0!==h.redSqr().redSub(u).cmp(this.zero))throw new Error("invalid point");var n=h.fromRed().isOdd();return(r&&!n||!r&&n)&&(h=h.redNeg()),this.point(t,h)},s.prototype.pointFromY=function(t,r){(t=new e(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),d=i.redSub(this.c2),s=i.redMul(this.d).redMul(this.c2).redSub(this.a),u=d.redMul(s.redInvm());if(0===u.cmp(this.zero)){if(r)throw new Error("invalid point");return this.point(this.zero,t)}var h=u.redSqrt();if(0!==h.redSqr().redSub(u).cmp(this.zero))throw new Error("invalid point");return h.fromRed().isOdd()!==r&&(h=h.redNeg()),this.point(h,t)},s.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),r=t.y.redSqr(),i=e.redMul(this.a).redAdd(r),d=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(r)));return 0===i.cmp(d)},r(u,i.BasePoint),s.prototype.pointFromJSON=function(t){return u.fromJSON(this,t)},s.prototype.point=function(t,e,r,i){return new u(this,t,e,r,i)},u.fromJSON=function(t,e){return new u(t,e[0],e[1],e[2])},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},u.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(t),d=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),s=i.redAdd(e),u=s.redSub(r),h=i.redSub(e),n=d.redMul(u),o=s.redMul(h),l=d.redMul(h),c=u.redMul(s);return this.curve.point(n,o,c,l)},u.prototype._projDbl=function(){var t,e,r,i=this.x.redAdd(this.y).redSqr(),d=this.x.redSqr(),s=this.y.redSqr();if(this.curve.twisted){var u=(o=this.curve._mulA(d)).redAdd(s);if(this.zOne)t=i.redSub(d).redSub(s).redMul(u.redSub(this.curve.two)),e=u.redMul(o.redSub(s)),r=u.redSqr().redSub(u).redSub(u);else{var h=this.z.redSqr(),n=u.redSub(h).redISub(h);t=i.redSub(d).redISub(s).redMul(n),e=u.redMul(o.redSub(s)),r=u.redMul(n)}}else{var o=d.redAdd(s);h=this.curve._mulC(this.z).redSqr(),n=o.redSub(h).redSub(h);t=this.curve._mulC(i.redISub(o)).redMul(n),e=this.curve._mulC(o).redMul(d.redISub(s)),r=o.redMul(n)}return this.curve.point(t,e,r)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},u.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),r=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),i=this.t.redMul(this.curve.dd).redMul(t.t),d=this.z.redMul(t.z.redAdd(t.z)),s=r.redSub(e),u=d.redSub(i),h=d.redAdd(i),n=r.redAdd(e),o=s.redMul(u),l=h.redMul(n),c=s.redMul(n),p=u.redMul(h);return this.curve.point(o,l,p,c)},u.prototype._projAdd=function(t){var e,r,i=this.z.redMul(t.z),d=i.redSqr(),s=this.x.redMul(t.x),u=this.y.redMul(t.y),h=this.curve.d.redMul(s).redMul(u),n=d.redSub(h),o=d.redAdd(h),l=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(s).redISub(u),c=i.redMul(n).redMul(l);return this.curve.twisted?(e=i.redMul(o).redMul(u.redSub(this.curve._mulA(s))),r=n.redMul(o)):(e=i.redMul(o).redMul(u.redSub(s)),r=this.curve._mulC(n).redMul(o)),this.curve.point(c,e,r)},u.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},u.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},u.prototype.mulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!1)},u.prototype.jmulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!0)},u.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},u.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()},u.prototype.getY=function(){return this.normalize(),this.y.fromRed()},u.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},u.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var r=t.clone(),i=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(i),0===this.x.cmp(e))return!0}},u.prototype.toP=u.prototype.normalize,u.prototype.mixedAdd=u.prototype.add;
},{"../utils":"HKaC","bn.js":"Os5M","inherits":"Thv4","./base":"pVUD"}],"AeJq":[function(require,module,exports) {
"use strict";var r=exports;r.base=require("./base"),r.short=require("./short"),r.mont=require("./mont"),r.edwards=require("./edwards");
},{"./base":"pVUD","./short":"pq4L","./mont":"tYq8","./edwards":"pAHa"}],"tZZI":[function(require,module,exports) {
"use strict";var r=require("minimalistic-assert"),t=require("inherits");function n(r,t){return 55296==(64512&r.charCodeAt(t))&&(!(t<0||t+1>=r.length)&&56320==(64512&r.charCodeAt(t+1)))}function e(r,t){if(Array.isArray(r))return r.slice();if(!r)return[];var e=[];if("string"==typeof r)if(t){if("hex"===t)for((r=r.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(r="0"+r),u=0;u<r.length;u+=2)e.push(parseInt(r[u]+r[u+1],16))}else for(var o=0,u=0;u<r.length;u++){var i=r.charCodeAt(u);i<128?e[o++]=i:i<2048?(e[o++]=i>>6|192,e[o++]=63&i|128):n(r,u)?(i=65536+((1023&i)<<10)+(1023&r.charCodeAt(++u)),e[o++]=i>>18|240,e[o++]=i>>12&63|128,e[o++]=i>>6&63|128,e[o++]=63&i|128):(e[o++]=i>>12|224,e[o++]=i>>6&63|128,e[o++]=63&i|128)}else for(u=0;u<r.length;u++)e[u]=0|r[u];return e}function o(r){for(var t="",n=0;n<r.length;n++)t+=s(r[n].toString(16));return t}function u(r){return(r>>>24|r>>>8&65280|r<<8&16711680|(255&r)<<24)>>>0}function i(r,t){for(var n="",e=0;e<r.length;e++){var o=r[e];"little"===t&&(o=u(o)),n+=f(o.toString(16))}return n}function s(r){return 1===r.length?"0"+r:r}function f(r){return 7===r.length?"0"+r:6===r.length?"00"+r:5===r.length?"000"+r:4===r.length?"0000"+r:3===r.length?"00000"+r:2===r.length?"000000"+r:1===r.length?"0000000"+r:r}function c(t,n,e,o){var u=e-n;r(u%4==0);for(var i=new Array(u/4),s=0,f=n;s<i.length;s++,f+=4){var c;c="big"===o?t[f]<<24|t[f+1]<<16|t[f+2]<<8|t[f+3]:t[f+3]<<24|t[f+2]<<16|t[f+1]<<8|t[f],i[s]=c>>>0}return i}function h(r,t){for(var n=new Array(4*r.length),e=0,o=0;e<r.length;e++,o+=4){var u=r[e];"big"===t?(n[o]=u>>>24,n[o+1]=u>>>16&255,n[o+2]=u>>>8&255,n[o+3]=255&u):(n[o+3]=u>>>24,n[o+2]=u>>>16&255,n[o+1]=u>>>8&255,n[o]=255&u)}return n}function l(r,t){return r>>>t|r<<32-t}function p(r,t){return r<<t|r>>>32-t}function a(r,t){return r+t>>>0}function x(r,t,n){return r+t+n>>>0}function g(r,t,n,e){return r+t+n+e>>>0}function _(r,t,n,e,o){return r+t+n+e+o>>>0}function v(r,t,n,e){var o=r[t],u=e+r[t+1]>>>0,i=(u<e?1:0)+n+o;r[t]=i>>>0,r[t+1]=u}function m(r,t,n,e){return(t+e>>>0<t?1:0)+r+n>>>0}function A(r,t,n,e){return t+e>>>0}function y(r,t,n,e,o,u,i,s){var f=0,c=t;return f+=(c=c+e>>>0)<t?1:0,f+=(c=c+u>>>0)<u?1:0,r+n+o+i+(f+=(c=c+s>>>0)<s?1:0)>>>0}function d(r,t,n,e,o,u,i,s){return t+e+u+s>>>0}function C(r,t,n,e,o,u,i,s,f,c){var h=0,l=t;return h+=(l=l+e>>>0)<t?1:0,h+=(l=l+u>>>0)<u?1:0,h+=(l=l+s>>>0)<s?1:0,r+n+o+i+f+(h+=(l=l+c>>>0)<c?1:0)>>>0}function z(r,t,n,e,o,u,i,s,f,c){return t+e+u+s+c>>>0}function b(r,t,n){return(t<<32-n|r>>>n)>>>0}function q(r,t,n){return(r<<32-n|t>>>n)>>>0}function w(r,t,n){return r>>>n}function H(r,t,n){return(r<<32-n|t>>>n)>>>0}exports.inherits=t,exports.toArray=e,exports.toHex=o,exports.htonl=u,exports.toHex32=i,exports.zero2=s,exports.zero8=f,exports.join32=c,exports.split32=h,exports.rotr32=l,exports.rotl32=p,exports.sum32=a,exports.sum32_3=x,exports.sum32_4=g,exports.sum32_5=_,exports.sum64=v,exports.sum64_hi=m,exports.sum64_lo=A,exports.sum64_4_hi=y,exports.sum64_4_lo=d,exports.sum64_5_hi=C,exports.sum64_5_lo=z,exports.rotr64_hi=b,exports.rotr64_lo=q,exports.shr64_hi=w,exports.shr64_lo=H;
},{"minimalistic-assert":"t8LV","inherits":"Thv4"}],"w862":[function(require,module,exports) {
"use strict";var t=require("./utils"),i=require("minimalistic-assert");function n(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}exports.BlockHash=n,n.prototype.update=function(i,n){if(i=t.toArray(i,n),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){var e=(i=this.pending).length%this._delta8;this.pending=i.slice(i.length-e,i.length),0===this.pending.length&&(this.pending=null),i=t.join32(i,0,i.length-e,this.endian);for(var h=0;h<i.length;h+=this._delta32)this._update(i,h,h+this._delta32)}return this},n.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},n.prototype._pad=function(){var t=this.pendingTotal,i=this._delta8,n=i-(t+this.padLength)%i,e=new Array(n+this.padLength);e[0]=128;for(var h=1;h<n;h++)e[h]=0;if(t<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)e[h++]=0;e[h++]=0,e[h++]=0,e[h++]=0,e[h++]=0,e[h++]=t>>>24&255,e[h++]=t>>>16&255,e[h++]=t>>>8&255,e[h++]=255&t}else for(e[h++]=255&t,e[h++]=t>>>8&255,e[h++]=t>>>16&255,e[h++]=t>>>24&255,e[h++]=0,e[h++]=0,e[h++]=0,e[h++]=0,s=8;s<this.padLength;s++)e[h++]=0;return e};
},{"./utils":"tZZI","minimalistic-assert":"t8LV"}],"VF0O":[function(require,module,exports) {
"use strict";var r=require("../utils"),t=r.rotr32;function n(r,t,n,s){return 0===r?e(t,n,s):1===r||3===r?o(t,n,s):2===r?u(t,n,s):void 0}function e(r,t,n){return r&t^~r&n}function u(r,t,n){return r&t^r&n^t&n}function o(r,t,n){return r^t^n}function s(r){return t(r,2)^t(r,13)^t(r,22)}function i(r){return t(r,6)^t(r,11)^t(r,25)}function c(r){return t(r,7)^t(r,18)^r>>>3}function f(r){return t(r,17)^t(r,19)^r>>>10}exports.ft_1=n,exports.ch32=e,exports.maj32=u,exports.p32=o,exports.s0_256=s,exports.s1_256=i,exports.g0_256=c,exports.g1_256=f;
},{"../utils":"tZZI"}],"Gp7j":[function(require,module,exports) {
"use strict";var t=require("../utils"),h=require("../common"),i=require("./common"),s=t.rotl32,e=t.sum32,r=t.sum32_5,o=i.ft_1,n=h.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function a(){if(!(this instanceof a))return new a;n.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}t.inherits(a,n),module.exports=a,a.blockSize=512,a.outSize=160,a.hmacStrength=80,a.padLength=64,a.prototype._update=function(t,h){for(var i=this.W,n=0;n<16;n++)i[n]=t[h+n];for(;n<i.length;n++)i[n]=s(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var a=this.h[0],c=this.h[1],l=this.h[2],f=this.h[3],m=this.h[4];for(n=0;n<i.length;n++){var p=~~(n/20),g=r(s(a,5),o(p,c,l,f),m,i[n],u[p]);m=f,f=l,l=s(c,30),c=a,a=g}this.h[0]=e(this.h[0],a),this.h[1]=e(this.h[1],c),this.h[2]=e(this.h[2],l),this.h[3]=e(this.h[3],f),this.h[4]=e(this.h[4],m)},a.prototype._digest=function(h){return"hex"===h?t.toHex32(this.h,"big"):t.split32(this.h,"big")};
},{"../utils":"tZZI","../common":"w862","./common":"VF0O"}],"Tvs9":[function(require,module,exports) {
"use strict";var h=require("../utils"),t=require("../common"),i=require("./common"),s=require("minimalistic-assert"),e=h.sum32,r=h.sum32_4,n=h.sum32_5,o=i.ch32,u=i.maj32,a=i.s0_256,c=i.s1_256,l=i.g0_256,m=i.g1_256,g=t.BlockHash,f=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function p(){if(!(this instanceof p))return new p;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=f,this.W=new Array(64)}h.inherits(p,g),module.exports=p,p.blockSize=512,p.outSize=256,p.hmacStrength=192,p.padLength=64,p.prototype._update=function(h,t){for(var i=this.W,g=0;g<16;g++)i[g]=h[t+g];for(;g<i.length;g++)i[g]=r(m(i[g-2]),i[g-7],l(i[g-15]),i[g-16]);var f=this.h[0],p=this.h[1],_=this.h[2],k=this.h[3],d=this.h[4],q=this.h[5],v=this.h[6],b=this.h[7];for(s(this.k.length===i.length),g=0;g<i.length;g++){var x=n(b,c(d),o(d,q,v),this.k[g],i[g]),y=e(a(f),u(f,p,_));b=v,v=q,q=d,d=e(k,x),k=_,_=p,p=f,f=e(x,y)}this.h[0]=e(this.h[0],f),this.h[1]=e(this.h[1],p),this.h[2]=e(this.h[2],_),this.h[3]=e(this.h[3],k),this.h[4]=e(this.h[4],d),this.h[5]=e(this.h[5],q),this.h[6]=e(this.h[6],v),this.h[7]=e(this.h[7],b)},p.prototype._digest=function(t){return"hex"===t?h.toHex32(this.h,"big"):h.split32(this.h,"big")};
},{"../utils":"tZZI","../common":"w862","./common":"VF0O","minimalistic-assert":"t8LV"}],"qqHR":[function(require,module,exports) {
"use strict";var t=require("../utils"),i=require("./256");function e(){if(!(this instanceof e))return new e;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}t.inherits(e,i),module.exports=e,e.blockSize=512,e.outSize=224,e.hmacStrength=192,e.padLength=64,e.prototype._digest=function(i){return"hex"===i?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")};
},{"../utils":"tZZI","./256":"Tvs9"}],"Zcno":[function(require,module,exports) {
"use strict";var t=require("../utils"),h=require("../common"),i=require("minimalistic-assert"),r=t.rotr64_hi,n=t.rotr64_lo,s=t.shr64_hi,e=t.shr64_lo,u=t.sum64,o=t.sum64_hi,a=t.sum64_lo,c=t.sum64_4_hi,f=t.sum64_4_lo,l=t.sum64_5_hi,v=t.sum64_5_lo,_=h.BlockHash,p=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function m(){if(!(this instanceof m))return new m;_.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=p,this.W=new Array(160)}function g(t,h,i,r,n){var s=t&i^~t&n;return s<0&&(s+=4294967296),s}function k(t,h,i,r,n,s){var e=h&r^~h&s;return e<0&&(e+=4294967296),e}function d(t,h,i,r,n){var s=t&i^t&n^i&n;return s<0&&(s+=4294967296),s}function y(t,h,i,r,n,s){var e=h&r^h&s^r&s;return e<0&&(e+=4294967296),e}function b(t,h){var i=r(t,h,28)^r(h,t,2)^r(h,t,7);return i<0&&(i+=4294967296),i}function q(t,h){var i=n(t,h,28)^n(h,t,2)^n(h,t,7);return i<0&&(i+=4294967296),i}function x(t,h){var i=r(t,h,14)^r(t,h,18)^r(h,t,9);return i<0&&(i+=4294967296),i}function B(t,h){var i=n(t,h,14)^n(t,h,18)^n(h,t,9);return i<0&&(i+=4294967296),i}function S(t,h){var i=r(t,h,1)^r(t,h,8)^s(t,h,7);return i<0&&(i+=4294967296),i}function W(t,h){var i=n(t,h,1)^n(t,h,8)^e(t,h,7);return i<0&&(i+=4294967296),i}function w(t,h){var i=r(t,h,19)^r(h,t,29)^s(t,h,6);return i<0&&(i+=4294967296),i}function z(t,h){var i=n(t,h,19)^n(h,t,29)^e(t,h,6);return i<0&&(i+=4294967296),i}t.inherits(m,_),module.exports=m,m.blockSize=1024,m.outSize=512,m.hmacStrength=192,m.padLength=128,m.prototype._prepareBlock=function(t,h){for(var i=this.W,r=0;r<32;r++)i[r]=t[h+r];for(;r<i.length;r+=2){var n=w(i[r-4],i[r-3]),s=z(i[r-4],i[r-3]),e=i[r-14],u=i[r-13],o=S(i[r-30],i[r-29]),a=W(i[r-30],i[r-29]),l=i[r-32],v=i[r-31];i[r]=c(n,s,e,u,o,a,l,v),i[r+1]=f(n,s,e,u,o,a,l,v)}},m.prototype._update=function(t,h){this._prepareBlock(t,h);var r=this.W,n=this.h[0],s=this.h[1],e=this.h[2],c=this.h[3],f=this.h[4],_=this.h[5],p=this.h[6],m=this.h[7],S=this.h[8],W=this.h[9],w=this.h[10],z=this.h[11],H=this.h[12],A=this.h[13],L=this.h[14],j=this.h[15];i(this.k.length===r.length);for(var C=0;C<r.length;C+=2){var D=L,E=j,F=x(S,W),G=B(S,W),I=g(S,W,w,z,H,A),J=k(S,W,w,z,H,A),K=this.k[C],M=this.k[C+1],N=r[C],O=r[C+1],P=l(D,E,F,G,I,J,K,M,N,O),Q=v(D,E,F,G,I,J,K,M,N,O);D=b(n,s),E=q(n,s),F=d(n,s,e,c,f,_),G=y(n,s,e,c,f,_);var R=o(D,E,F,G),T=a(D,E,F,G);L=H,j=A,H=w,A=z,w=S,z=W,S=o(p,m,P,Q),W=a(m,m,P,Q),p=f,m=_,f=e,_=c,e=n,c=s,n=o(P,Q,R,T),s=a(P,Q,R,T)}u(this.h,0,n,s),u(this.h,2,e,c),u(this.h,4,f,_),u(this.h,6,p,m),u(this.h,8,S,W),u(this.h,10,w,z),u(this.h,12,H,A),u(this.h,14,L,j)},m.prototype._digest=function(h){return"hex"===h?t.toHex32(this.h,"big"):t.split32(this.h,"big")};
},{"../utils":"tZZI","../common":"w862","minimalistic-assert":"t8LV"}],"fSor":[function(require,module,exports) {
"use strict";var t=require("../utils"),i=require("./512");function e(){if(!(this instanceof e))return new e;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}t.inherits(e,i),module.exports=e,e.blockSize=1024,e.outSize=384,e.hmacStrength=192,e.padLength=128,e.prototype._digest=function(i){return"hex"===i?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")};
},{"../utils":"tZZI","./512":"Zcno"}],"iQuY":[function(require,module,exports) {
"use strict";exports.sha1=require("./sha/1"),exports.sha224=require("./sha/224"),exports.sha256=require("./sha/256"),exports.sha384=require("./sha/384"),exports.sha512=require("./sha/512");
},{"./sha/1":"Gp7j","./sha/224":"qqHR","./sha/256":"Tvs9","./sha/384":"fSor","./sha/512":"Zcno"}],"PZib":[function(require,module,exports) {
"use strict";var t=require("./utils"),h=require("./common"),i=t.rotl32,s=t.sum32,e=t.sum32_3,r=t.sum32_4,n=h.BlockHash;function o(){if(!(this instanceof o))return new o;n.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function u(t,h,i,s){return t<=15?h^i^s:t<=31?h&i|~h&s:t<=47?(h|~i)^s:t<=63?h&s|i&~s:h^(i|~s)}function c(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function l(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}t.inherits(o,n),exports.ripemd160=o,o.blockSize=512,o.outSize=160,o.hmacStrength=192,o.padLength=64,o.prototype._update=function(t,h){for(var n=this.h[0],o=this.h[1],d=this.h[2],v=this.h[3],_=this.h[4],g=n,x=o,S=d,k=v,q=_,y=0;y<80;y++){var z=s(i(r(n,u(y,o,d,v),t[a[y]+h],c(y)),p[y]),_);n=_,_=v,v=i(d,10),d=o,o=z,z=s(i(r(g,u(79-y,x,S,k),t[f[y]+h],l(y)),m[y]),q),g=q,q=k,k=i(S,10),S=x,x=z}z=e(this.h[1],d,k),this.h[1]=e(this.h[2],v,q),this.h[2]=e(this.h[3],_,g),this.h[3]=e(this.h[4],n,x),this.h[4]=e(this.h[0],o,S),this.h[0]=z},o.prototype._digest=function(h){return"hex"===h?t.toHex32(this.h,"little"):t.split32(this.h,"little")};var a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];
},{"./utils":"tZZI","./common":"w862"}],"XwOH":[function(require,module,exports) {
"use strict";var t=require("./utils"),i=require("minimalistic-assert");function e(i,s,n){if(!(this instanceof e))return new e(i,s,n);this.Hash=i,this.blockSize=i.blockSize/8,this.outSize=i.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(s,n))}module.exports=e,e.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},e.prototype.update=function(t,i){return this.inner.update(t,i),this},e.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)};
},{"./utils":"tZZI","minimalistic-assert":"t8LV"}],"xGnf":[function(require,module,exports) {
var h=exports;h.utils=require("./hash/utils"),h.common=require("./hash/common"),h.sha=require("./hash/sha"),h.ripemd=require("./hash/ripemd"),h.hmac=require("./hash/hmac"),h.sha1=h.sha.sha1,h.sha256=h.sha.sha256,h.sha224=h.sha.sha224,h.sha384=h.sha.sha384,h.sha512=h.sha.sha512,h.ripemd160=h.ripemd.ripemd160;
},{"./hash/utils":"tZZI","./hash/common":"w862","./hash/sha":"iQuY","./hash/ripemd":"PZib","./hash/hmac":"XwOH"}],"vmdQ":[function(require,module,exports) {
module.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}};
},{}],"rTyf":[function(require,module,exports) {
"use strict";var f,e=exports,a=require("hash.js"),b=require("./curve"),c=require("./utils"),d=c.assert;function r(f){"short"===f.type?this.curve=new b.short(f):"edwards"===f.type?this.curve=new b.edwards(f):this.curve=new b.mont(f),this.g=this.curve.g,this.n=this.curve.n,this.hash=f.hash,d(this.g.validate(),"Invalid curve"),d(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(f,a){Object.defineProperty(e,f,{configurable:!0,enumerable:!0,get:function(){var b=new r(a);return Object.defineProperty(e,f,{configurable:!0,enumerable:!0,value:b}),b}})}e.PresetCurve=r,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{f=require("./precomputed/secp256k1")}catch(t){f=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",f]});
},{"hash.js":"xGnf","./curve":"AeJq","./utils":"HKaC","./precomputed/secp256k1":"vmdQ"}],"L6kG":[function(require,module,exports) {
"use strict";var t=require("hash.js"),e=require("minimalistic-crypto-utils"),i=require("minimalistic-assert");function s(t){if(!(this instanceof s))return new s(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var h=e.toArray(t.entropy,t.entropyEnc||"hex"),r=e.toArray(t.nonce,t.nonceEnc||"hex"),n=e.toArray(t.pers,t.persEnc||"hex");i(h.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(h,r,n)}module.exports=s,s.prototype._init=function(t,e,i){var s=t.concat(e).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var h=0;h<this.V.length;h++)this.K[h]=0,this.V[h]=1;this._update(s),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new t.hmac(this.hash,this.K)},s.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(t,s,h,r){"string"!=typeof s&&(r=h,h=s,s=null),t=e.toArray(t,s),h=e.toArray(h,r),i(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(h||[])),this._reseed=1},s.prototype.generate=function(t,i,s,h){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof i&&(h=s,s=i,i=null),s&&(s=e.toArray(s,h||"hex"),this._update(s));for(var r=[];r.length<t;)this.V=this._hmac().update(this.V).digest(),r=r.concat(this.V);var n=r.slice(0,t);return this._update(s),this._reseed++,e.encode(n,i)};
},{"hash.js":"xGnf","minimalistic-crypto-utils":"qZjr","minimalistic-assert":"t8LV"}],"yUWQ":[function(require,module,exports) {
"use strict";var t=require("bn.js"),i=require("../utils"),e=i.assert;function r(t,i){this.ec=t,this.priv=null,this.pub=null,i.priv&&this._importPrivate(i.priv,i.privEnc),i.pub&&this._importPublic(i.pub,i.pubEnc)}module.exports=r,r.fromPublic=function(t,i,e){return i instanceof r?i:new r(t,{pub:i,pubEnc:e})},r.fromPrivate=function(t,i,e){return i instanceof r?i:new r(t,{priv:i,privEnc:e})},r.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},r.prototype.getPublic=function(t,i){return"string"==typeof t&&(i=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),i?this.pub.encode(i,t):this.pub},r.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},r.prototype._importPrivate=function(i,e){this.priv=new t(i,e||16),this.priv=this.priv.umod(this.ec.curve.n)},r.prototype._importPublic=function(t,i){if(t.x||t.y)return"mont"===this.ec.curve.type?e(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||e(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,i)},r.prototype.derive=function(t){return t.mul(this.priv).getX()},r.prototype.sign=function(t,i,e){return this.ec.sign(t,this,i,e)},r.prototype.verify=function(t,i){return this.ec.verify(t,i,this)},r.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};
},{"bn.js":"Os5M","../utils":"HKaC"}],"fgYO":[function(require,module,exports) {
"use strict";var r=require("bn.js"),e=require("../utils"),t=e.assert;function a(e,n){if(e instanceof a)return e;this._importDER(e,n)||(t(e.r&&e.s,"Signature without r or s"),this.r=new r(e.r,16),this.s=new r(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function n(){this.place=0}function c(r,e){var t=r[e.place++];if(!(128&t))return t;for(var a=15&t,n=0,c=0,i=e.place;c<a;c++,i++)n<<=8,n|=r[i];return e.place=i,n}function i(r){for(var e=0,t=r.length-1;!r[e]&&!(128&r[e+1])&&e<t;)e++;return 0===e?r:r.slice(e)}function o(r,e){if(e<128)r.push(e);else{var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(128|t);--t;)r.push(e>>>(t<<3)&255);r.push(e)}}module.exports=a,a.prototype._importDER=function(t,a){t=e.toArray(t,a);var i=new n;if(48!==t[i.place++])return!1;if(c(t,i)+i.place!==t.length)return!1;if(2!==t[i.place++])return!1;var o=c(t,i),s=t.slice(i.place,o+i.place);if(i.place+=o,2!==t[i.place++])return!1;var l=c(t,i);if(t.length!==l+i.place)return!1;var u=t.slice(i.place,l+i.place);return 0===s[0]&&128&s[1]&&(s=s.slice(1)),0===u[0]&&128&u[1]&&(u=u.slice(1)),this.r=new r(s),this.s=new r(u),this.recoveryParam=null,!0},a.prototype.toDER=function(r){var t=this.r.toArray(),a=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&a[0]&&(a=[0].concat(a)),t=i(t),a=i(a);!(a[0]||128&a[1]);)a=a.slice(1);var n=[2];o(n,t.length),(n=n.concat(t)).push(2),o(n,a.length);var c=n.concat(a),s=[48];return o(s,c.length),s=s.concat(c),e.encode(s,r)};
},{"bn.js":"Os5M","../utils":"HKaC"}],"G4Qv":[function(require,module,exports) {
"use strict";var r=require("bn.js"),e=require("hmac-drbg"),t=require("../utils"),n=require("../curves"),i=require("brorand"),s=t.assert,o=require("./key"),u=require("./signature");function h(r){if(!(this instanceof h))return new h(r);"string"==typeof r&&(s(n.hasOwnProperty(r),"Unknown curve "+r),r=n[r]),r instanceof n.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}module.exports=h,h.prototype.keyPair=function(r){return new o(this,r)},h.prototype.keyFromPrivate=function(r,e){return o.fromPrivate(this,r,e)},h.prototype.keyFromPublic=function(r,e){return o.fromPublic(this,r,e)},h.prototype.genKeyPair=function(t){t||(t={});for(var n=new e({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||i(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),s=this.n.byteLength(),o=this.n.sub(new r(2));;){var u=new r(n.generate(s));if(!(u.cmp(o)>0))return u.iaddn(1),this.keyFromPrivate(u)}},h.prototype._truncateToN=function(r,e){var t=8*r.byteLength()-this.n.bitLength();return t>0&&(r=r.ushrn(t)),!e&&r.cmp(this.n)>=0?r.sub(this.n):r},h.prototype.sign=function(t,n,i,s){"object"==typeof i&&(s=i,i=null),s||(s={}),n=this.keyFromPrivate(n,i),t=this._truncateToN(new r(t,16));for(var o=this.n.byteLength(),h=n.getPrivate().toArray("be",o),c=t.toArray("be",o),a=new e({hash:this.hash,entropy:h,nonce:c,pers:s.pers,persEnc:s.persEnc||"utf8"}),p=this.n.sub(new r(1)),m=0;;m++){var v=s.k?s.k(m):new r(a.generate(this.n.byteLength()));if(!((v=this._truncateToN(v,!0)).cmpn(1)<=0||v.cmp(p)>=0)){var y=this.g.mul(v);if(!y.isInfinity()){var f=y.getX(),g=f.umod(this.n);if(0!==g.cmpn(0)){var d=v.invm(this.n).mul(g.mul(n.getPrivate()).iadd(t));if(0!==(d=d.umod(this.n)).cmpn(0)){var b=(y.getY().isOdd()?1:0)|(0!==f.cmp(g)?2:0);return s.canonical&&d.cmp(this.nh)>0&&(d=this.n.sub(d),b^=1),new u({r:g,s:d,recoveryParam:b})}}}}}},h.prototype.verify=function(e,t,n,i){e=this._truncateToN(new r(e,16)),n=this.keyFromPublic(n,i);var s=(t=new u(t,"hex")).r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var h,c=o.invm(this.n),a=c.mul(e).umod(this.n),p=c.mul(s).umod(this.n);return this.curve._maxwellTrick?!(h=this.g.jmulAdd(a,n.getPublic(),p)).isInfinity()&&h.eqXToP(s):!(h=this.g.mulAdd(a,n.getPublic(),p)).isInfinity()&&0===h.getX().umod(this.n).cmp(s)},h.prototype.recoverPubKey=function(e,t,n,i){s((3&n)===n,"The recovery param is more than two bits"),t=new u(t,i);var o=this.n,h=new r(e),c=t.r,a=t.s,p=1&n,m=n>>1;if(c.cmp(this.curve.p.umod(this.curve.n))>=0&&m)throw new Error("Unable to find sencond key candinate");c=m?this.curve.pointFromX(c.add(this.curve.n),p):this.curve.pointFromX(c,p);var v=t.r.invm(o),y=o.sub(h).mul(v).umod(o),f=a.mul(v).umod(o);return this.g.mulAdd(y,c,f)},h.prototype.getKeyRecoveryParam=function(r,e,t,n){if(null!==(e=new u(e,n)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(r,e,i)}catch(r){continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};
},{"bn.js":"Os5M","hmac-drbg":"L6kG","../utils":"HKaC","../curves":"rTyf","brorand":"RPfS","./key":"yUWQ","./signature":"fgYO"}],"zZY2":[function(require,module,exports) {
"use strict";var t=require("../utils"),e=t.assert,s=t.parseBytes,i=t.cachedProperty;function n(t,e){this.eddsa=t,this._secret=s(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=s(e.pub)}n.fromPublic=function(t,e){return e instanceof n?e:new n(t,{pub:e})},n.fromSecret=function(t,e){return e instanceof n?e:new n(t,{secret:e})},n.prototype.secret=function(){return this._secret},i(n,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),i(n,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),i(n,"privBytes",function(){var t=this.eddsa,e=this.hash(),s=t.encodingLength-1,i=e.slice(0,t.encodingLength);return i[0]&=248,i[s]&=127,i[s]|=64,i}),i(n,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),i(n,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),i(n,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),n.prototype.sign=function(t){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},n.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},n.prototype.getSecret=function(s){return e(this._secret,"KeyPair is public only"),t.encode(this.secret(),s)},n.prototype.getPublic=function(e){return t.encode(this.pubBytes(),e)},module.exports=n;
},{"../utils":"HKaC"}],"UarM":[function(require,module,exports) {
"use strict";var e=require("bn.js"),t=require("../utils"),n=t.assert,o=t.cachedProperty,d=t.parseBytes;function i(t,o){this.eddsa=t,"object"!=typeof o&&(o=d(o)),Array.isArray(o)&&(o={R:o.slice(0,t.encodingLength),S:o.slice(t.encodingLength)}),n(o.R&&o.S,"Signature without R or S"),t.isPoint(o.R)&&(this._R=o.R),o.S instanceof e&&(this._S=o.S),this._Rencoded=Array.isArray(o.R)?o.R:o.Rencoded,this._Sencoded=Array.isArray(o.S)?o.S:o.Sencoded}o(i,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),o(i,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),o(i,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),o(i,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),i.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},i.prototype.toHex=function(){return t.encode(this.toBytes(),"hex").toUpperCase()},module.exports=i;
},{"bn.js":"Os5M","../utils":"HKaC"}],"wF4E":[function(require,module,exports) {
"use strict";var t=require("hash.js"),e=require("../curves"),n=require("../utils"),r=n.assert,i=n.parseBytes,o=require("./key"),s=require("./signature");function u(n){if(r("ed25519"===n,"only tested with ed25519 so far"),!(this instanceof u))return new u(n);n=e[n].curve;this.curve=n,this.g=n.g,this.g.precompute(n.n.bitLength()+1),this.pointClass=n.point().constructor,this.encodingLength=Math.ceil(n.n.bitLength()/8),this.hash=t.sha512}module.exports=u,u.prototype.sign=function(t,e){t=i(t);var n=this.keyFromSecret(e),r=this.hashInt(n.messagePrefix(),t),o=this.g.mul(r),s=this.encodePoint(o),u=this.hashInt(s,n.pubBytes(),t).mul(n.priv()),h=r.add(u).umod(this.curve.n);return this.makeSignature({R:o,S:h,Rencoded:s})},u.prototype.verify=function(t,e,n){t=i(t),e=this.makeSignature(e);var r=this.keyFromPublic(n),o=this.hashInt(e.Rencoded(),r.pubBytes(),t),s=this.g.mul(e.S());return e.R().add(r.pub().mul(o)).eq(s)},u.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return n.intFromLE(t.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(t){return o.fromPublic(this,t)},u.prototype.keyFromSecret=function(t){return o.fromSecret(this,t)},u.prototype.makeSignature=function(t){return t instanceof s?t:new s(this,t)},u.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},u.prototype.decodePoint=function(t){var e=(t=n.parseBytes(t)).length-1,r=t.slice(0,e).concat(-129&t[e]),i=0!=(128&t[e]),o=n.intFromLE(r);return this.curve.pointFromY(o,i)},u.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(t){return n.intFromLE(t)},u.prototype.isPoint=function(t){return t instanceof this.pointClass};
},{"hash.js":"xGnf","../curves":"rTyf","../utils":"HKaC","./key":"zZY2","./signature":"UarM"}],"MClZ":[function(require,module,exports) {
"use strict";var e=exports;e.version=require("../package.json").version,e.utils=require("./elliptic/utils"),e.rand=require("brorand"),e.curve=require("./elliptic/curve"),e.curves=require("./elliptic/curves"),e.ec=require("./elliptic/ec"),e.eddsa=require("./elliptic/eddsa");
},{"../package.json":"SP7N","./elliptic/utils":"HKaC","brorand":"RPfS","./elliptic/curve":"AeJq","./elliptic/curves":"rTyf","./elliptic/ec":"G4Qv","./elliptic/eddsa":"wF4E"}],"MyHh":[function(require,module,exports) {
var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,n){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(e){return function(e,t,n){e[t]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var n=t.contentWindow,r=n.eval,o=n.execScript;!r&&o&&(o.call(n,"null"),r=n.eval),forEach(Object_keys(e),function(t){n[t]=e[t]}),forEach(globals,function(t){e[t]&&(n[t]=e[t])});var c=Object_keys(n),i=r.call(n,this.code);return forEach(Object_keys(n),function(t){(t in e||-1===indexOf(c,t))&&(e[t]=n[t])}),forEach(globals,function(t){t in e||defineProp(e,t,n[t])}),document.body.removeChild(t),i},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),n=this.runInContext(t);return e&&forEach(Object_keys(t),function(n){e[n]=t[n]}),n},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var n=Script(t);return n[e].apply(n,[].slice.call(arguments,1))}}),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(n){t[n]=e[n]}),t};
},{}],"nCLz":[function(require,module,exports) {
var e=require("../asn1"),t=require("inherits"),n=exports;function r(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}n.define=function(e,t){return new r(e,t)},r.prototype._createNamed=function(e){var n;try{n=require("vm").runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(r){n=function(e){this._initNamed(e)}}return t(n,e),n.prototype._initNamed=function(t){e.call(this,t)},new n(this)},r.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(e.decoders[t])),this.decoders[t]},r.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)},r.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(e.encoders[t])),this.encoders[t]},r.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)};
},{"../asn1":"MP7p","inherits":"Thv4","vm":"MyHh"}],"kuzE":[function(require,module,exports) {
var t=require("inherits");function r(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function e(t,r){this.path=t,this.rethrow(r)}exports.Reporter=r,r.prototype.isError=function(t){return t instanceof e},r.prototype.save=function(){var t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},r.prototype.restore=function(t){var r=this._reporterState;r.obj=t.obj,r.path=r.path.slice(0,t.pathLen)},r.prototype.enterKey=function(t){return this._reporterState.path.push(t)},r.prototype.exitKey=function(t){var r=this._reporterState;r.path=r.path.slice(0,t-1)},r.prototype.leaveKey=function(t,r,e){var o=this._reporterState;this.exitKey(t),null!==o.obj&&(o.obj[r]=e)},r.prototype.path=function(){return this._reporterState.path.join("/")},r.prototype.enterObject=function(){var t=this._reporterState,r=t.obj;return t.obj={},r},r.prototype.leaveObject=function(t){var r=this._reporterState,e=r.obj;return r.obj=t,e},r.prototype.error=function(t){var r,o=this._reporterState,p=t instanceof e;if(r=p?t:new e(o.path.map(function(t){return"["+JSON.stringify(t)+"]"}).join(""),t.message||t,t.stack),!o.options.partial)throw r;return p||o.errors.push(r),r},r.prototype.wrapResult=function(t){var r=this._reporterState;return r.options.partial?{result:this.isError(t)?null:t,errors:r.errors}:t},t(e,Error),e.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,e),!this.stack)try{throw new Error(this.message)}catch(r){this.stack=r.stack}return this};
},{"inherits":"Thv4"}],"YtQG":[function(require,module,exports) {

var t=require("inherits"),e=require("../base").Reporter,r=require("buffer").Buffer;function s(t,s){e.call(this,s),r.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function i(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(t){return t instanceof i||(t=new i(t,e)),this.length+=t.length,t},this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=r.byteLength(t);else{if(!r.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}t(s,e),exports.DecoderBuffer=s,s.prototype.save=function(){return{offset:this.offset,reporter:e.prototype.save.call(this)}},s.prototype.restore=function(t){var r=new s(this.base);return r.offset=t.offset,r.length=this.offset,this.offset=t.offset,e.prototype.restore.call(this,t.reporter),r},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},s.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");var r=new s(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+t,this.offset+=t,r},s.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},exports.EncoderBuffer=i,i.prototype.join=function(t,e){return t||(t=new r(this.length)),e||(e=0),0===this.length?t:(Array.isArray(this.value)?this.value.forEach(function(r){r.join(t,e),e+=r.length}):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):r.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length),t)};
},{"inherits":"Thv4","../base":"DS9N","buffer":"FaCw"}],"F0OB":[function(require,module,exports) {
var e=require("../base").Reporter,t=require("../base").EncoderBuffer,r=require("../base").DecoderBuffer,i=require("minimalistic-assert"),n=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],o=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(n),s=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function c(e,t){var r={};this._baseState=r,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}module.exports=c;var a=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){var e=this._baseState,t={};a.forEach(function(r){t[r]=e[r]});var r=new this.constructor(t.parent);return r._baseState=t,r},c.prototype._wrap=function(){var e=this._baseState;o.forEach(function(t){this[t]=function(){var r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}},this)},c.prototype._init=function(e){var t=this._baseState;i(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),i.equal(t.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(e){var t=this._baseState,r=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==r.length&&(i(null===t.children),t.children=r,r.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(i(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if("object"!=typeof e||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach(function(r){r==(0|r)&&(r|=0);var i=e[r];t[i]=r}),t}))},s.forEach(function(e){c.prototype[e]=function(){var t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}}),n.forEach(function(e){c.prototype[e]=function(){var t=this._baseState,r=Array.prototype.slice.call(arguments);return i(null===t.tag),t.tag=e,this._useArgs(r),this}}),c.prototype.use=function(e){i(e);var t=this._baseState;return i(null===t.use),t.use=e,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(e){var t=this._baseState;return i(null===t.default),t.default=e,t.optional=!0,this},c.prototype.explicit=function(e){var t=this._baseState;return i(null===t.explicit&&null===t.implicit),t.explicit=e,this},c.prototype.implicit=function(e){var t=this._baseState;return i(null===t.explicit&&null===t.implicit),t.implicit=e,this},c.prototype.obj=function(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},c.prototype.key=function(e){var t=this._baseState;return i(null===t.key),t.key=e,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(e){var t=this._baseState;return i(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},c.prototype.contains=function(e){var t=this._baseState;return i(null===t.use),t.contains=e,this},c.prototype._decode=function(e,t){var i=this._baseState;if(null===i.parent)return e.wrapResult(i.children[0]._decode(e,t));var n,o=i.default,s=!0,c=null;if(null!==i.key&&(c=e.enterKey(i.key)),i.optional){var a=null;if(null!==i.explicit?a=i.explicit:null!==i.implicit?a=i.implicit:null!==i.tag&&(a=i.tag),null!==a||i.any){if(s=this._peekTag(e,a,i.any),e.isError(s))return s}else{var l=e.save();try{null===i.choice?this._decodeGeneric(i.tag,e,t):this._decodeChoice(e,t),s=!0}catch(f){s=!1}e.restore(l)}}if(i.obj&&s&&(n=e.enterObject()),s){if(null!==i.explicit){var u=this._decodeTag(e,i.explicit);if(e.isError(u))return u;e=u}var d=e.offset;if(null===i.use&&null===i.choice){if(i.any)l=e.save();var h=this._decodeTag(e,null!==i.implicit?i.implicit:i.tag,i.any);if(e.isError(h))return h;i.any?o=e.raw(l):e=h}if(t&&t.track&&null!==i.tag&&t.track(e.path(),d,e.length,"tagged"),t&&t.track&&null!==i.tag&&t.track(e.path(),e.offset,e.length,"content"),o=i.any?o:null===i.choice?this._decodeGeneric(i.tag,e,t):this._decodeChoice(e,t),e.isError(o))return o;if(i.any||null!==i.choice||null===i.children||i.children.forEach(function(r){r._decode(e,t)}),i.contains&&("octstr"===i.tag||"bitstr"===i.tag)){var p=new r(o);o=this._getUse(i.contains,e._reporterState.obj)._decode(p,t)}}return i.obj&&s&&(o=e.leaveObject(n)),null===i.key||null===o&&!0!==s?null!==c&&e.exitKey(c):e.leaveKey(c,i.key,o),o},c.prototype._decodeGeneric=function(e,t,r){var i=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,i.args[0],r):/str$/.test(e)?this._decodeStr(t,e,r):"objid"===e&&i.args?this._decodeObjid(t,i.args[0],i.args[1],r):"objid"===e?this._decodeObjid(t,null,null,r):"gentime"===e||"utctime"===e?this._decodeTime(t,e,r):"null_"===e?this._decodeNull(t,r):"bool"===e?this._decodeBool(t,r):"objDesc"===e?this._decodeStr(t,e,r):"int"===e||"enum"===e?this._decodeInt(t,i.args&&i.args[0],r):null!==i.use?this._getUse(i.use,t._reporterState.obj)._decode(t,r):t.error("unknown tag: "+e)},c.prototype._getUse=function(e,t){var r=this._baseState;return r.useDecoder=this._use(e,t),i(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},c.prototype._decodeChoice=function(e,t){var r=this._baseState,i=null,n=!1;return Object.keys(r.choice).some(function(o){var s=e.save(),c=r.choice[o];try{var a=c._decode(e,t);if(e.isError(a))return!1;i={type:o,value:a},n=!0}catch(l){return e.restore(s),!1}return!0},this),n?i:e.error("Choice not matched")},c.prototype._createEncoderBuffer=function(e){return new t(e,this.reporter)},c.prototype._encode=function(e,t,r){var i=this._baseState;if(null===i.default||i.default!==e){var n=this._encodeValue(e,t,r);if(void 0!==n&&!this._skipDefault(n,t,r))return n}},c.prototype._encodeValue=function(t,r,i){var n=this._baseState;if(null===n.parent)return n.children[0]._encode(t,r||new e);var o=null;if(this.reporter=r,n.optional&&void 0===t){if(null===n.default)return;t=n.default}var s=null,c=!1;if(n.any)o=this._createEncoderBuffer(t);else if(n.choice)o=this._encodeChoice(t,r);else if(n.contains)s=this._getUse(n.contains,i)._encode(t,r),c=!0;else if(n.children)s=n.children.map(function(e){if("null_"===e._baseState.tag)return e._encode(null,r,t);if(null===e._baseState.key)return r.error("Child should have a key");var i=r.enterKey(e._baseState.key);if("object"!=typeof t)return r.error("Child expected, but input is not object");var n=e._encode(t[e._baseState.key],r,t);return r.leaveKey(i),n},this).filter(function(e){return e}),s=this._createEncoderBuffer(s);else if("seqof"===n.tag||"setof"===n.tag){if(!n.args||1!==n.args.length)return r.error("Too many args for : "+n.tag);if(!Array.isArray(t))return r.error("seqof/setof, but data is not Array");var a=this.clone();a._baseState.implicit=null,s=this._createEncoderBuffer(t.map(function(e){var i=this._baseState;return this._getUse(i.args[0],t)._encode(e,r)},a))}else null!==n.use?o=this._getUse(n.use,i)._encode(t,r):(s=this._encodePrimitive(n.tag,t),c=!0);if(!n.any&&null===n.choice){var l=null!==n.implicit?n.implicit:n.tag,u=null===n.implicit?"universal":"context";null===l?null===n.use&&r.error("Tag could be omitted only for .use()"):null===n.use&&(o=this._encodeComposite(l,c,u,s))}return null!==n.explicit&&(o=this._encodeComposite(n.explicit,!1,"context",o)),o},c.prototype._encodeChoice=function(e,t){var r=this._baseState,n=r.choice[e.type];return n||i(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(e.value,t)},c.prototype._encodePrimitive=function(e,t){var r=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},c.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},c.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(e)};
},{"../base":"DS9N","minimalistic-assert":"t8LV"}],"DS9N":[function(require,module,exports) {
var e=exports;e.Reporter=require("./reporter").Reporter,e.DecoderBuffer=require("./buffer").DecoderBuffer,e.EncoderBuffer=require("./buffer").EncoderBuffer,e.Node=require("./node");
},{"./reporter":"kuzE","./buffer":"YtQG","./node":"F0OB"}],"Z1Yx":[function(require,module,exports) {
var t=require("../constants");exports.tagClass={0:"universal",1:"application",2:"context",3:"private"},exports.tagClassByName=t._reverse(exports.tagClass),exports.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},exports.tagByName=t._reverse(exports.tag);
},{"../constants":"llwW"}],"llwW":[function(require,module,exports) {
var r=exports;r._reverse=function(r){var e={};return Object.keys(r).forEach(function(n){(0|n)==n&&(n|=0);var t=r[n];e[t]=n}),e},r.der=require("./der");
},{"./der":"Z1Yx"}],"bDUl":[function(require,module,exports) {
var r=require("inherits"),t=require("../../asn1"),e=t.base,i=t.bignum,o=t.constants.der;function n(r){this.enc="der",this.name=r.name,this.entity=r,this.tree=new s,this.tree._init(r.body)}function s(r){e.Node.call(this,"der",r)}function a(r,t){var e=r.readUInt8(t);if(r.isError(e))return e;var i=o.tagClass[e>>6],n=0==(32&e);if(31==(31&e)){var s=e;for(e=0;128==(128&s);){if(s=r.readUInt8(t),r.isError(s))return s;e<<=7,e|=127&s}}else e&=31;return{cls:i,primitive:n,tag:e,tagStr:o.tag[e]}}function u(r,t,e){var i=r.readUInt8(e);if(r.isError(i))return i;if(!t&&128===i)return null;if(0==(128&i))return i;var o=127&i;if(o>4)return r.error("length octect is too long");i=0;for(var n=0;n<o;n++){i<<=8;var s=r.readUInt8(e);if(r.isError(s))return s;i|=s}return i}module.exports=n,n.prototype.decode=function(r,t){return r instanceof e.DecoderBuffer||(r=new e.DecoderBuffer(r,t)),this.tree._decode(r,t)},r(s,e.Node),s.prototype._peekTag=function(r,t,e){if(r.isEmpty())return!1;var i=r.save(),o=a(r,'Failed to peek tag: "'+t+'"');return r.isError(o)?o:(r.restore(i),o.tag===t||o.tagStr===t||o.tagStr+"of"===t||e)},s.prototype._decodeTag=function(r,t,e){var i=a(r,'Failed to decode tag of "'+t+'"');if(r.isError(i))return i;var o=u(r,i.primitive,'Failed to get length of "'+t+'"');if(r.isError(o))return o;if(!e&&i.tag!==t&&i.tagStr!==t&&i.tagStr+"of"!==t)return r.error('Failed to match tag: "'+t+'"');if(i.primitive||null!==o)return r.skip(o,'Failed to match body of: "'+t+'"');var n=r.save(),s=this._skipUntilEnd(r,'Failed to skip indefinite length body: "'+this.tag+'"');return r.isError(s)?s:(o=r.offset-n.offset,r.restore(n),r.skip(o,'Failed to match body of: "'+t+'"'))},s.prototype._skipUntilEnd=function(r,t){for(;;){var e=a(r,t);if(r.isError(e))return e;var i,o=u(r,e.primitive,t);if(r.isError(o))return o;if(i=e.primitive||null!==o?r.skip(o):this._skipUntilEnd(r,t),r.isError(i))return i;if("end"===e.tagStr)break}},s.prototype._decodeList=function(r,t,e,i){for(var o=[];!r.isEmpty();){var n=this._peekTag(r,"end");if(r.isError(n))return n;var s=e.decode(r,"der",i);if(r.isError(s)&&n)break;o.push(s)}return o},s.prototype._decodeStr=function(r,t){if("bitstr"===t){var e=r.readUInt8();return r.isError(e)?e:{unused:e,data:r.raw()}}if("bmpstr"===t){var i=r.raw();if(i.length%2==1)return r.error("Decoding of string type: bmpstr length mismatch");for(var o="",n=0;n<i.length/2;n++)o+=String.fromCharCode(i.readUInt16BE(2*n));return o}if("numstr"===t){var s=r.raw().toString("ascii");return this._isNumstr(s)?s:r.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return r.raw();if("objDesc"===t)return r.raw();if("printstr"===t){var a=r.raw().toString("ascii");return this._isPrintstr(a)?a:r.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?r.raw().toString():r.error("Decoding of string type: "+t+" unsupported")},s.prototype._decodeObjid=function(r,t,e){for(var i,o=[],n=0;!r.isEmpty();){var s=r.readUInt8();n<<=7,n|=127&s,0==(128&s)&&(o.push(n),n=0)}128&s&&o.push(n);var a=o[0]/40|0,u=o[0]%40;if(i=e?o:[a,u].concat(o.slice(1)),t){var d=t[i.join(" ")];void 0===d&&(d=t[i.join(".")]),void 0!==d&&(i=d)}return i},s.prototype._decodeTime=function(r,t){var e=r.raw().toString();if("gentime"===t)var i=0|e.slice(0,4),o=0|e.slice(4,6),n=0|e.slice(6,8),s=0|e.slice(8,10),a=0|e.slice(10,12),u=0|e.slice(12,14);else{if("utctime"!==t)return r.error("Decoding "+t+" time is not supported yet");i=0|e.slice(0,2),o=0|e.slice(2,4),n=0|e.slice(4,6),s=0|e.slice(6,8),a=0|e.slice(8,10),u=0|e.slice(10,12);i=i<70?2e3+i:1900+i}return Date.UTC(i,o-1,n,s,a,u,0)},s.prototype._decodeNull=function(r){return null},s.prototype._decodeBool=function(r){var t=r.readUInt8();return r.isError(t)?t:0!==t},s.prototype._decodeInt=function(r,t){var e=r.raw(),o=new i(e);return t&&(o=t[o.toString(10)]||o),o},s.prototype._use=function(r,t){return"function"==typeof r&&(r=r(t)),r._getDecoder("der").tree};
},{"inherits":"Thv4","../../asn1":"MP7p"}],"Q7ce":[function(require,module,exports) {

var e=require("inherits"),r=require("buffer").Buffer,i=require("./der");function t(e){i.call(this,e),this.enc="pem"}e(t,i),module.exports=t,t.prototype.decode=function(e,t){for(var o=e.toString().split(/[\r\n]+/g),n=t.label.toUpperCase(),a=/^-----(BEGIN|END) ([^-]+)-----$/,f=-1,l=-1,c=0;c<o.length;c++){var u=o[c].match(a);if(null!==u&&u[2]===n){if(-1!==f){if("END"!==u[1])break;l=c;break}if("BEGIN"!==u[1])break;f=c}}if(-1===f||-1===l)throw new Error("PEM section not found for: "+n);var p=o.slice(f+1,l).join("");p.replace(/[^a-z0-9\+\/=]+/gi,"");var s=new r(p,"base64");return i.prototype.decode.call(this,s,t)};
},{"inherits":"Thv4","buffer":"FaCw","./der":"bDUl"}],"iKA4":[function(require,module,exports) {
var e=exports;e.der=require("./der"),e.pem=require("./pem");
},{"./der":"bDUl","./pem":"Q7ce"}],"zrlJ":[function(require,module,exports) {

var e=require("inherits"),r=require("buffer").Buffer,t=require("../../asn1"),n=t.base,o=t.constants.der;function i(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new s,this.tree._init(e.body)}function s(e){n.Node.call(this,"der",e)}function f(e){return e<10?"0"+e:e}function u(e,r,t,n){var i;if("seqof"===e?e="seq":"setof"===e&&(e="set"),o.tagByName.hasOwnProperty(e))i=o.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return n.error("Unknown tag: "+e);i=e}return i>=31?n.error("Multi-octet tag encoding unsupported"):(r||(i|=32),i|=o.tagClassByName[t||"universal"]<<6)}module.exports=i,i.prototype.encode=function(e,r){return this.tree._encode(e,r).join()},e(s,n.Node),s.prototype._encodeComposite=function(e,t,n,o){var i,s=u(e,t,n,this.reporter);if(o.length<128)return(i=new r(2))[0]=s,i[1]=o.length,this._createEncoderBuffer([i,o]);for(var f=1,a=o.length;a>=256;a>>=8)f++;(i=new r(2+f))[0]=s,i[1]=128|f;a=1+f;for(var c=o.length;c>0;a--,c>>=8)i[a]=255&c;return this._createEncoderBuffer([i,o])},s.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){for(var n=new r(2*e.length),o=0;o<e.length;o++)n.writeUInt16BE(e.charCodeAt(o),2*o);return this._createEncoderBuffer(n)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},s.prototype._encodeObjid=function(e,t,n){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s\.]+/g);for(var o=0;o<e.length;o++)e[o]|=0}else if(Array.isArray(e)){e=e.slice();for(o=0;o<e.length;o++)e[o]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}var i=0;for(o=0;o<e.length;o++){var s=e[o];for(i++;s>=128;s>>=7)i++}var f=new r(i),u=f.length-1;for(o=e.length-1;o>=0;o--){s=e[o];for(f[u--]=127&s;(s>>=7)>0;)f[u--]=128|127&s}return this._createEncoderBuffer(f)},s.prototype._encodeTime=function(e,r){var t,n=new Date(e);return"gentime"===r?t=[f(n.getFullYear()),f(n.getUTCMonth()+1),f(n.getUTCDate()),f(n.getUTCHours()),f(n.getUTCMinutes()),f(n.getUTCSeconds()),"Z"].join(""):"utctime"===r?t=[f(n.getFullYear()%100),f(n.getUTCMonth()+1),f(n.getUTCDate()),f(n.getUTCHours()),f(n.getUTCMinutes()),f(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+r+" time is not supported yet"),this._encodeStr(t,"octstr")},s.prototype._encodeNull=function(){return this._createEncoderBuffer("")},s.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!r.isBuffer(e)){var n=e.toArray();!e.sign&&128&n[0]&&n.unshift(0),e=new r(n)}if(r.isBuffer(e)){var o=e.length;0===e.length&&o++;var i=new r(o);return e.copy(i),0===e.length&&(i[0]=0),this._createEncoderBuffer(i)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);o=1;for(var s=e;s>=256;s>>=8)o++;for(s=(i=new Array(o)).length-1;s>=0;s--)i[s]=255&e,e>>=8;return 128&i[0]&&i.unshift(0),this._createEncoderBuffer(new r(i))},s.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},s.prototype._use=function(e,r){return"function"==typeof e&&(e=e(r)),e._getEncoder("der").tree},s.prototype._skipDefault=function(e,r,t){var n,o=this._baseState;if(null===o.default)return!1;var i=e.join();if(void 0===o.defaultBuffer&&(o.defaultBuffer=this._encodeValue(o.default,r,t).join()),i.length!==o.defaultBuffer.length)return!1;for(n=0;n<i.length;n++)if(i[n]!==o.defaultBuffer[n])return!1;return!0};
},{"inherits":"Thv4","buffer":"FaCw","../../asn1":"MP7p"}],"Wmeu":[function(require,module,exports) {
var e=require("inherits"),r=require("./der");function t(e){r.call(this,e),this.enc="pem"}e(t,r),module.exports=t,t.prototype.encode=function(e,t){for(var n=r.prototype.encode.call(this,e).toString("base64"),o=["-----BEGIN "+t.label+"-----"],i=0;i<n.length;i+=64)o.push(n.slice(i,i+64));return o.push("-----END "+t.label+"-----"),o.join("\n")};
},{"inherits":"Thv4","./der":"zrlJ"}],"LVkA":[function(require,module,exports) {
var e=exports;e.der=require("./der"),e.pem=require("./pem");
},{"./der":"zrlJ","./pem":"Wmeu"}],"MP7p":[function(require,module,exports) {
var e=exports;e.bignum=require("bn.js"),e.define=require("./asn1/api").define,e.base=require("./asn1/base"),e.constants=require("./asn1/constants"),e.decoders=require("./asn1/decoders"),e.encoders=require("./asn1/encoders");
},{"bn.js":"Os5M","./asn1/api":"nCLz","./asn1/base":"DS9N","./asn1/constants":"llwW","./asn1/decoders":"iKA4","./asn1/encoders":"LVkA"}],"NgJI":[function(require,module,exports) {
"use strict";var e=require("asn1.js"),i=e.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),t=e.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),s=e.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),n=e.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())}),o=e.define("RelativeDistinguishedName",function(){this.setof(t)}),u=e.define("RDNSequence",function(){this.seqof(o)}),h=e.define("Name",function(){this.choice({rdnSequence:this.use(u)})}),c=e.define("Validity",function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))}),r=e.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),f=e.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(s),this.key("issuer").use(h),this.key("validity").use(c),this.key("subject").use(h),this.key("subjectPublicKeyInfo").use(n),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(r).optional())}),y=e.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(f),this.key("signatureAlgorithm").use(s),this.key("signatureValue").bitstr())});module.exports=y;
},{"asn1.js":"MP7p"}],"XpuY":[function(require,module,exports) {
"use strict";var e=require("asn1.js");exports.certificate=require("./certificate");var i=e.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});exports.RSAPrivateKey=i;var t=e.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});exports.RSAPublicKey=t;var s=e.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(n),this.key("subjectPublicKey").bitstr())});exports.PublicKey=s;var n=e.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),o=e.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(n),this.key("subjectPrivateKey").octstr())});exports.PrivateKey=o;var r=e.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});exports.EncryptedPrivateKey=r;var y=e.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});exports.DSAPrivateKey=y,exports.DSAparam=e.define("DSAparam",function(){this.int()});var h=e.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(a),this.key("publicKey").optional().explicit(1).bitstr())});exports.ECPrivateKey=h;var a=e.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});exports.signature=e.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});
},{"asn1.js":"MP7p","./certificate":"NgJI"}],"B3V2":[function(require,module,exports) {
module.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};
},{}],"wF8T":[function(require,module,exports) {

var e=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/\=]+)[\n\r]+/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/\=]+)-----END \1-----$/m,n=require("evp_bytestokey"),t=require("browserify-aes"),s=require("safe-buffer").Buffer;module.exports=function(E,c){var f,i=E.toString(),o=i.match(e);if(o){var u="aes"+o[1],p=s.from(o[2],"hex"),m=s.from(o[3].replace(/[\r\n]/g,""),"base64"),I=n(c,p.slice(0,8),parseInt(o[1],10)).key,h=[],C=t.createDecipheriv(u,I,p);h.push(C.update(m)),h.push(C.final()),f=s.concat(h)}else{var l=i.match(a);f=new s(l[2].replace(/[\r\n]/g,""),"base64")}return{tag:i.match(r)[1],data:f}};
},{"evp_bytestokey":"xqRd","browserify-aes":"qkMh","safe-buffer":"v6q9"}],"ocFp":[function(require,module,exports) {

var e=require("./asn1"),r=require("./aesid.json"),a=require("./fixProc"),t=require("browserify-aes"),i=require("pbkdf2"),c=require("safe-buffer").Buffer;function d(r){var t;"object"!=typeof r||c.isBuffer(r)||(t=r.passphrase,r=r.key),"string"==typeof r&&(r=c.from(r));var i,d,o=a(r,t),u=o.tag,n=o.data;switch(u){case"CERTIFICATE":d=e.certificate.decode(n,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(d||(d=e.PublicKey.decode(n,"der")),i=d.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return e.RSAPublicKey.decode(d.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return d.subjectPrivateKey=d.subjectPublicKey,{type:"ec",data:d};case"1.2.840.10040.4.1":return d.algorithm.params.pub_key=e.DSAparam.decode(d.subjectPublicKey.data,"der"),{type:"dsa",data:d.algorithm.params};default:throw new Error("unknown key id "+i)}throw new Error("unknown key type "+u);case"ENCRYPTED PRIVATE KEY":n=s(n=e.EncryptedPrivateKey.decode(n,"der"),t);case"PRIVATE KEY":switch(i=(d=e.PrivateKey.decode(n,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return e.RSAPrivateKey.decode(d.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:d.algorithm.curve,privateKey:e.ECPrivateKey.decode(d.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return d.algorithm.params.priv_key=e.DSAparam.decode(d.subjectPrivateKey,"der"),{type:"dsa",params:d.algorithm.params};default:throw new Error("unknown key id "+i)}throw new Error("unknown key type "+u);case"RSA PUBLIC KEY":return e.RSAPublicKey.decode(n,"der");case"RSA PRIVATE KEY":return e.RSAPrivateKey.decode(n,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:e.DSAPrivateKey.decode(n,"der")};case"EC PRIVATE KEY":return{curve:(n=e.ECPrivateKey.decode(n,"der")).parameters.value,privateKey:n.privateKey};default:throw new Error("unknown key type "+u)}}function s(e,a){var d=e.algorithm.decrypt.kde.kdeparams.salt,s=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=r[e.algorithm.decrypt.cipher.algo.join(".")],u=e.algorithm.decrypt.cipher.iv,n=e.subjectPrivateKey,y=parseInt(o.split("-")[1],10)/8,p=i.pbkdf2Sync(a,d,s,y,"sha1"),K=t.createDecipheriv(o,p,u),l=[];return l.push(K.update(n)),l.push(K.final()),c.concat(l)}module.exports=d,d.signature=e.signature;
},{"./asn1":"XpuY","./aesid.json":"B3V2","./fixProc":"wF8T","browserify-aes":"qkMh","pbkdf2":"rgIr","safe-buffer":"v6q9"}],"JPfP":[function(require,module,exports) {
module.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};
},{}],"UjQQ":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,r=require("create-hmac"),t=require("browserify-rsa"),n=require("elliptic").ec,a=require("bn.js"),u=require("parse-asn1"),o=require("./curves.json");function i(r,n,a,o,i){var c=u(n);if(c.curve){if("ecdsa"!==o&&"ecdsa/rsa"!==o)throw new Error("wrong private key type");return d(r,c)}if("dsa"===c.type){if("dsa"!==o)throw new Error("wrong private key type");return p(r,c,a)}if("rsa"!==o&&"ecdsa/rsa"!==o)throw new Error("wrong private key type");r=e.concat([i,r]);for(var s=c.modulus.byteLength(),g=[0,1];r.length+g.length+1<s;)g.push(255);g.push(0);for(var v=-1;++v<r.length;)g.push(r[v]);return t(g,c)}function d(r,t){var a=o[t.curve.join(".")];if(!a)throw new Error("unknown curve "+t.curve.join("."));var u=new n(a).keyFromPrivate(t.privateKey).sign(r);return new e(u.toDER())}function p(e,r,t){for(var n,u=r.params.priv_key,o=r.params.p,i=r.params.q,d=r.params.g,p=new a(0),v=g(e,i).mod(i),l=!1,w=s(u,i,e,t);!1===l;)p=h(d,n=f(i,w,t),o,i),0===(l=n.invm(i).imul(v.add(u.mul(p))).mod(i)).cmpn(0)&&(l=!1,p=new a(0));return c(p,l)}function c(r,t){r=r.toArray(),t=t.toArray(),128&r[0]&&(r=[0].concat(r)),128&t[0]&&(t=[0].concat(t));var n=[48,r.length+t.length+4,2,r.length];return n=n.concat(r,[2,t.length],t),new e(n)}function s(t,n,a,u){if((t=new e(t.toArray())).length<n.byteLength()){var o=new e(n.byteLength()-t.length);o.fill(0),t=e.concat([o,t])}var i=a.length,d=v(a,n),p=new e(i);p.fill(1);var c=new e(i);return c.fill(0),c=r(u,c).update(p).update(new e([0])).update(t).update(d).digest(),p=r(u,c).update(p).digest(),{k:c=r(u,c).update(p).update(new e([1])).update(t).update(d).digest(),v:p=r(u,c).update(p).digest()}}function g(e,r){var t=new a(e),n=(e.length<<3)-r.bitLength();return n>0&&t.ishrn(n),t}function v(r,t){r=(r=g(r,t)).mod(t);var n=new e(r.toArray());if(n.length<t.byteLength()){var a=new e(t.byteLength()-n.length);a.fill(0),n=e.concat([a,n])}return n}function f(t,n,a){var u,o;do{for(u=new e(0);8*u.length<t.bitLength();)n.v=r(a,n.k).update(n.v).digest(),u=e.concat([u,n.v]);o=g(u,t),n.k=r(a,n.k).update(n.v).update(new e([0])).digest(),n.v=r(a,n.k).update(n.v).digest()}while(-1!==o.cmp(t));return o}function h(e,r,t,n){return e.toRed(a.mont(t)).redPow(r).fromRed().mod(n)}module.exports=i,module.exports.getKey=s,module.exports.makeKey=f;
},{"create-hmac":"dgFM","browserify-rsa":"j2j4","elliptic":"MClZ","bn.js":"Os5M","parse-asn1":"ocFp","./curves.json":"JPfP","buffer":"FaCw"}],"j9eF":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer,e=require("bn.js"),n=require("elliptic").ec,t=require("parse-asn1"),o=require("./curves.json");function a(n,o,a,d,c){var w=t(a);if("ec"===w.type){if("ecdsa"!==d&&"ecdsa/rsa"!==d)throw new Error("wrong public key type");return u(n,o,w)}if("dsa"===w.type){if("dsa"!==d)throw new Error("wrong public key type");return i(n,o,w)}if("rsa"!==d&&"ecdsa/rsa"!==d)throw new Error("wrong public key type");o=r.concat([c,o]);for(var s=w.modulus.byteLength(),f=[1],l=0;o.length+f.length+2<s;)f.push(255),l++;f.push(0);for(var m=-1;++m<o.length;)f.push(o[m]);f=new r(f);var p=e.mont(w.modulus);n=(n=new e(n).toRed(p)).redPow(new e(w.publicExponent)),n=new r(n.fromRed().toArray());var h=l<8?1:0;for(s=Math.min(n.length,f.length),n.length!==f.length&&(h=1),m=-1;++m<s;)h|=n[m]^f[m];return 0===h}function u(r,e,t){var a=o[t.data.algorithm.curve.join(".")];if(!a)throw new Error("unknown curve "+t.data.algorithm.curve.join("."));var u=new n(a),i=t.data.subjectPrivateKey.data;return u.verify(e,r,i)}function i(r,n,o){var a=o.data.p,u=o.data.q,i=o.data.g,c=o.data.pub_key,w=t.signature.decode(r,"der"),s=w.s,f=w.r;d(s,u),d(f,u);var l=e.mont(a),m=s.invm(u);return 0===i.toRed(l).redPow(new e(n).mul(m).mod(u)).fromRed().mul(c.toRed(l).redPow(f.mul(m).mod(u)).fromRed()).mod(a).mod(u).cmp(f)}function d(r,e){if(r.cmpn(0)<=0)throw new Error("invalid sig");if(r.cmp(e)>=e)throw new Error("invalid sig")}module.exports=a;
},{"bn.js":"Os5M","elliptic":"MClZ","parse-asn1":"ocFp","./curves.json":"JPfP","buffer":"FaCw"}],"HHCv":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var t=require("buffer").Buffer,e=require("create-hash"),i=require("stream"),r=require("inherits"),s=require("./sign"),n=require("./verify"),h=require("./algorithms.json");function a(t){i.Writable.call(this);var r=h[t];if(!r)throw new Error("Unknown message digest");this._hashType=r.hash,this._hash=e(r.hash),this._tag=r.id,this._signType=r.sign}function o(t){i.Writable.call(this);var r=h[t];if(!r)throw new Error("Unknown message digest");this._hash=e(r.hash),this._tag=r.id,this._signType=r.sign}function u(t){return new a(t)}function p(t){return new o(t)}Object.keys(h).forEach(function(e){h[e].id=new t(h[e].id,"hex"),h[e.toLowerCase()]=h[e]}),r(a,i.Writable),a.prototype._write=function(t,e,i){this._hash.update(t),i()},a.prototype.update=function(e,i){return"string"==typeof e&&(e=new t(e,i)),this._hash.update(e),this},a.prototype.sign=function(t,e){this.end();var i=this._hash.digest(),r=s(i,t,this._hashType,this._signType,this._tag);return e?r.toString(e):r},r(o,i.Writable),o.prototype._write=function(t,e,i){this._hash.update(t),i()},o.prototype.update=function(e,i){return"string"==typeof e&&(e=new t(e,i)),this._hash.update(e),this},o.prototype.verify=function(e,i,r){"string"==typeof i&&(i=new t(i,r)),this.end();var s=this._hash.digest();return n(i,s,e,this._signType,this._tag)},module.exports={Sign:u,Verify:p,createSign:u,createVerify:p};
},{"create-hash":"ASKV","stream":"kPjL","inherits":"Thv4","./sign":"UjQQ","./verify":"j9eF","./algorithms.json":"ni6t","buffer":"FaCw"}],"QVS9":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,t=require("elliptic"),r=require("bn.js");module.exports=function(e){return new n(e)};var i={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function n(e){this.curveType=i[e],this.curveType||(this.curveType={name:e}),this.curve=new t.ec(this.curveType.name),this.keys=void 0}function s(t,r,i){Array.isArray(t)||(t=t.toArray());var n=new e(t);if(i&&n.length<i){var s=new e(i-n.length);s.fill(0),n=e.concat([s,n])}return r?n.toString(r):n}i.p224=i.secp224r1,i.p256=i.secp256r1=i.prime256v1,i.p192=i.secp192r1=i.prime192v1,i.p384=i.secp384r1,i.p521=i.secp521r1,n.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},n.prototype.computeSecret=function(t,r,i){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),s(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),i,this.curveType.byteLength)},n.prototype.getPublicKey=function(e,t){var r=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(r[r.length-1]%2?r[0]=7:r[0]=6),s(r,e)},n.prototype.getPrivateKey=function(e){return s(this.keys.getPrivate(),e)},n.prototype.setPublicKey=function(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this.keys._importPublic(t),this},n.prototype.setPrivateKey=function(t,i){i=i||"utf8",e.isBuffer(t)||(t=new e(t,i));var n=new r(t);return n=n.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(n),this};
},{"elliptic":"MClZ","bn.js":"Os5M","buffer":"FaCw"}],"OBYq":[function(require,module,exports) {

var e=require("create-hash"),r=require("safe-buffer").Buffer;function a(e){var a=r.allocUnsafe(4);return a.writeUInt32BE(e,0),a}module.exports=function(t,u){for(var n,f=r.alloc(0),c=0;f.length<u;)n=a(c++),f=r.concat([f,e("sha1").update(t).update(n).digest()]);return f.slice(0,u)};
},{"create-hash":"ASKV","safe-buffer":"v6q9"}],"GAJt":[function(require,module,exports) {
module.exports=function(r,e){for(var n=r.length,o=-1;++o<n;)r[o]^=e[o];return r};
},{}],"b61z":[function(require,module,exports) {

var e=require("bn.js"),r=require("safe-buffer").Buffer;function o(o,u){return r.from(o.toRed(e.mont(u.modulus)).redPow(new e(u.publicExponent)).fromRed().toArray())}module.exports=o;
},{"bn.js":"Os5M","safe-buffer":"v6q9"}],"HcB6":[function(require,module,exports) {

var r=require("parse-asn1"),e=require("randombytes"),o=require("create-hash"),n=require("./mgf"),a=require("./xor"),t=require("bn.js"),u=require("./withPublic"),l=require("browserify-rsa"),i=require("safe-buffer").Buffer;function s(r,u){var l=r.modulus.byteLength(),s=u.length,f=o("sha1").update(i.alloc(0)).digest(),c=f.length,g=2*c;if(s>l-g-2)throw new Error("message too long");var d=i.alloc(l-s-g-2),h=l-c-1,w=e(c),m=a(i.concat([f,d,i.alloc(1,1),u],h),n(w,h)),q=a(w,n(m,c));return new t(i.concat([i.alloc(1),q,m],l))}function f(r,e,o){var n,a=e.length,u=r.modulus.byteLength();if(a>u-11)throw new Error("message too long");return n=o?i.alloc(u-a-3,255):c(u-a-3),new t(i.concat([i.from([0,o?1:2]),n,i.alloc(1),e],u))}function c(r){for(var o,n=i.allocUnsafe(r),a=0,t=e(2*r),u=0;a<r;)u===t.length&&(t=e(2*r),u=0),(o=t[u++])&&(n[a++]=o);return n}module.exports=function(e,o,n){var a;a=e.padding?e.padding:n?1:4;var i,c=r(e);if(4===a)i=s(c,o);else if(1===a)i=f(c,o,n);else{if(3!==a)throw new Error("unknown padding");if((i=new t(o)).cmp(c.modulus)>=0)throw new Error("data too long for modulus")}return n?l(i,c):u(i,c)};
},{"parse-asn1":"ocFp","randombytes":"rsbe","create-hash":"ASKV","./mgf":"OBYq","./xor":"GAJt","bn.js":"Os5M","./withPublic":"b61z","browserify-rsa":"j2j4","safe-buffer":"v6q9"}],"fXkv":[function(require,module,exports) {

var r=require("parse-asn1"),e=require("./mgf"),n=require("./xor"),t=require("bn.js"),o=require("browserify-rsa"),i=require("create-hash"),u=require("./withPublic"),a=require("safe-buffer").Buffer;function l(r,t){var o=r.modulus.byteLength(),u=i("sha1").update(a.alloc(0)).digest(),l=u.length;if(0!==t[0])throw new Error("decryption error");var f=t.slice(1,l+1),c=t.slice(l+1),s=n(f,e(c,l)),g=n(c,e(s,o-l-1));if(h(u,g.slice(0,l)))throw new Error("decryption error");for(var d=l;0===g[d];)d++;if(1!==g[d++])throw new Error("decryption error");return g.slice(d)}function f(r,e,n){for(var t=e.slice(0,2),o=2,i=0;0!==e[o++];)if(o>=e.length){i++;break}var u=e.slice(2,o-1);if(("0002"!==t.toString("hex")&&!n||"0001"!==t.toString("hex")&&n)&&i++,u.length<8&&i++,i)throw new Error("decryption error");return e.slice(o)}function h(r,e){r=a.from(r),e=a.from(e);var n=0,t=r.length;r.length!==e.length&&(n++,t=Math.min(r.length,e.length));for(var o=-1;++o<t;)n+=r[o]^e[o];return n}module.exports=function(e,n,i){var h;h=e.padding?e.padding:i?1:4;var c,s=r(e),g=s.modulus.byteLength();if(n.length>g||new t(n).cmp(s.modulus)>=0)throw new Error("decryption error");c=i?u(new t(n),s):o(n,s);var d=a.alloc(g-c.length);if(c=a.concat([d,c],g),4===h)return l(s,c);if(1===h)return f(s,c,i);if(3===h)return c;throw new Error("unknown padding")};
},{"parse-asn1":"ocFp","./mgf":"OBYq","./xor":"GAJt","bn.js":"Os5M","browserify-rsa":"j2j4","create-hash":"ASKV","./withPublic":"b61z","safe-buffer":"v6q9"}],"ba60":[function(require,module,exports) {
exports.publicEncrypt=require("./publicEncrypt"),exports.privateDecrypt=require("./privateDecrypt"),exports.privateEncrypt=function(r,p){return exports.publicEncrypt(r,p,!0)},exports.publicDecrypt=function(r,p){return exports.privateDecrypt(r,p,!0)};
},{"./publicEncrypt":"HcB6","./privateDecrypt":"fXkv"}],"Qe1T":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var r=arguments[3],e=require("process");function n(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var t=require("safe-buffer"),o=require("randombytes"),f=t.Buffer,u=t.kMaxLength,i=r.crypto||r.msCrypto,a=Math.pow(2,32)-1;function s(r,e){if("number"!=typeof r||r!=r)throw new TypeError("offset must be a number");if(r>a||r<0)throw new TypeError("offset must be a uint32");if(r>u||r>e)throw new RangeError("offset out of range")}function m(r,e,n){if("number"!=typeof r||r!=r)throw new TypeError("size must be a number");if(r>a||r<0)throw new TypeError("size must be a uint32");if(r+e>n||r>u)throw new RangeError("buffer too small")}function l(e,n,t,o){if(!(f.isBuffer(e)||e instanceof r.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof n)o=n,n=0,t=e.length;else if("function"==typeof t)o=t,t=e.length-n;else if("function"!=typeof o)throw new TypeError('"cb" argument must be a function');return s(n,e.length),m(t,n,e.length),p(e,n,t,o)}function p(r,n,t,o){var f=r.buffer,u=new Uint8Array(f,n,t);return i.getRandomValues(u),o?void e.nextTick(function(){o(null,r)}):r}function w(e,n,t){if(void 0===n&&(n=0),!(f.isBuffer(e)||e instanceof r.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return s(n,e.length),void 0===t&&(t=e.length-n),m(t,n,e.length),p(e,n,t)}i&&i.getRandomValues?(exports.randomFill=l,exports.randomFillSync=w):(exports.randomFill=n,exports.randomFillSync=n);
},{"safe-buffer":"v6q9","randombytes":"rsbe","process":"FeV4"}],"km9O":[function(require,module,exports) {
"use strict";exports.randomBytes=exports.rng=exports.pseudoRandomBytes=exports.prng=require("randombytes"),exports.createHash=exports.Hash=require("create-hash"),exports.createHmac=exports.Hmac=require("create-hmac");var e=require("browserify-sign/algos"),r=Object.keys(e),t=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(r);exports.getHashes=function(){return t};var i=require("pbkdf2");exports.pbkdf2=i.pbkdf2,exports.pbkdf2Sync=i.pbkdf2Sync;var p=require("browserify-cipher");exports.Cipher=p.Cipher,exports.createCipher=p.createCipher,exports.Cipheriv=p.Cipheriv,exports.createCipheriv=p.createCipheriv,exports.Decipher=p.Decipher,exports.createDecipher=p.createDecipher,exports.Decipheriv=p.Decipheriv,exports.createDecipheriv=p.createDecipheriv,exports.getCiphers=p.getCiphers,exports.listCiphers=p.listCiphers;var s=require("diffie-hellman");exports.DiffieHellmanGroup=s.DiffieHellmanGroup,exports.createDiffieHellmanGroup=s.createDiffieHellmanGroup,exports.getDiffieHellman=s.getDiffieHellman,exports.createDiffieHellman=s.createDiffieHellman,exports.DiffieHellman=s.DiffieHellman;var a=require("browserify-sign");exports.createSign=a.createSign,exports.Sign=a.Sign,exports.createVerify=a.createVerify,exports.Verify=a.Verify,exports.createECDH=require("create-ecdh");var o=require("public-encrypt");exports.publicEncrypt=o.publicEncrypt,exports.privateEncrypt=o.privateEncrypt,exports.publicDecrypt=o.publicDecrypt,exports.privateDecrypt=o.privateDecrypt;var c=require("randomfill");exports.randomFill=c.randomFill,exports.randomFillSync=c.randomFillSync,exports.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},exports.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};
},{"randombytes":"rsbe","create-hash":"ASKV","create-hmac":"dgFM","browserify-sign/algos":"cl3H","pbkdf2":"rgIr","browserify-cipher":"nWDC","diffie-hellman":"j4A6","browserify-sign":"HHCv","create-ecdh":"QVS9","public-encrypt":"ba60","randomfill":"Qe1T"}],"NB3W":[function(require,module,exports) {
function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}var i=require("@reldens/utils"),n=i.Logger,a=i.ErrorManager,o=require("crypto"),s=require("../../constants"),u=require("../../items-events"),l=function(){function r(t){e(this,r),{}.hasOwnProperty.call(t,"key")||a.error("Undefined item key."),{}.hasOwnProperty.call(t,"manager")||a.error("Undefined item manager."),this.key=t.key;var i=o.randomBytes(8).toString("hex");this.uid=t.uid?t.uid:this.key+(t.id?"":t.id)+i,this.id=t.id||null,this.item_id=t.item_id||null,this.label=t.label||"",this.description=t.description||"",this.manager=t.manager,this.type=s.TYPE_BASE,this.qty={}.hasOwnProperty.call(t,"qty")?t.qty:0,this.remaining_uses=t.remaining_uses||0,this.is_active=t.is_active||!1,this.group_id=t.group_id||!1,this.qty_limit=t.qty_limit||!1,this.uses_limit=t.uses_limit||!1,this.useTimeOut=t.useTimeOut||!1,this.execTimeOut=t.execTimeOut||!1,this.modifiers={}.hasOwnProperty.call(t,"modifiers")?t.modifiers:{},this.target=!1,this.singleInstance=!1}return t(r,[{key:"getInventoryId",value:function(){return this.singleInstance?this.key:this.uid}},{key:"setProperties",value:function(e){for(var r=0,t=Object.keys(e);r<t.length;r++){var i=t[r];this[i]=e[i]}}},{key:"applyModifiers",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.changeModifiers());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},null,this)}},{key:"revertModifiers",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.changeModifiers(!0));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},null,this)}},{key:"changeModifiers",value:function(e){var r,t,i,n,a,o;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,regeneratorRuntime.awrap(this.manager.events.emit(u.EQUIP_BEFORE+(e?"Revert":"Apply")+"Modifiers",this));case 2:for(r=0,t=Object.keys(this.modifiers);r<t.length;r++)i=t[r],n=this.modifiers[i],a=this.getOwnerProperty(n.propertyKey),o=this.modifyValue(n,a,e),this.setOwnerProperty(n.propertyKey,o);return s.next=5,regeneratorRuntime.awrap(this.manager.events.emit(u.EQUIP+(e?"Reverted":"Applied")+"Modifiers",this));case 5:return s.abrupt("return",s.sent);case 6:case"end":return s.stop()}},null,this)}},{key:"modifyValue",value:function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];((e.operation===s.OPS.INC&&!t||e.operation===s.OPS.DEC&&t)&&(r+=e.value),(e.operation===s.OPS.DEC&&!t||e.operation===s.OPS.INC&&t)&&(r-=e.value),(e.operation===s.OPS.MUL&&!t||e.operation===s.OPS.DIV&&t)&&(r*=e.value),(e.operation===s.OPS.DIV&&!t||e.operation===s.OPS.MUL&&t)&&(r/=e.value),e.operation===s.OPS.INC_P&&!t||e.operation===s.OPS.DEC_P&&t)&&(r+=t?100*Math.round(r/(100-e.value))-r:Math.round(r*e.value/100));(e.operation===s.OPS.DEC_P&&!t||e.operation===s.OPS.INC_P&&t)&&(r-=t?r-100*Math.round(r/(100-e.value)):Math.round(r*e.value/100));return e.operation===s.OPS.SET&&(r=!t&&e.value),e.operation===s.OPS.METHOD&&(!{}.hasOwnProperty.call(this,e.value)||"function"!=typeof this[e.value]?n.error(["Item modifier error:",this.getInventoryId(),"Undefined method:",e.value]):r=this[e.value](e,r)),this.applyModifierLimits(e,r)}},{key:"applyModifierLimits",value:function(e,r){if(e.minValue&&r<e.minValue&&(r=e.minValue),e.maxValue&&r>e.maxValue&&(r=e.maxValue),e.minProperty){var t=this.getOwnerProperty(e.minProperty);t&&r<t&&(r=t)}if(e.maxProperty){var i=this.getOwnerProperty(e.maxProperty);i&&r>i&&(r=i)}return r}},{key:"getOwnerProperty",value:function(e){return this.manageOwnerProperty(e)}},{key:"setOwnerProperty",value:function(e,r){return this.manageOwnerProperty(e,r)}},{key:"manageOwnerProperty",value:function(e,r){var t=this.manager.owner;this.target&&(t=this.target);var i=e;if(-1!==e.indexOf("/")){var n=e.split("/");i=n.pop();var o=!0,s=!1,u=void 0;try{for(var l,p=n[Symbol.iterator]();!(o=(l=p.next()).done);o=!0){var h=l.value;({}).hasOwnProperty.call(t,h)||a.error(["Owner property not found in path:",e,h,"Object:",t]),t=t[h]}}catch(y){s=!0,u=y}finally{try{o||null==p.return||p.return()}finally{if(s)throw u}}}return void 0!==r&&(t[i]=r),t[i]}},{key:"isType",value:function(e){return this.type===e}}]),r}();module.exports=l;
},{"@reldens/utils":"nQnG","crypto":"km9O","../../constants":"pkJ0","../../items-events":"D4tT"}],"iGUL":[function(require,module,exports) {
function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var n=require("./storage/models-manager"),a=n.ModelsManager,s=require("../item/type/item-base"),i=require("../constants"),u=require("../items-events"),o=function(){function r(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e(this,r),this.manager=t,this.modelsManager=n||new a}return t(r,[{key:"listenEvents",value:function(){var e=this,r=this.manager.getOwnerId();this.manager.events.on(u.ADD_ITEM_BEFORE,function(t,n){return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(r===n.manager.getOwnerId()){a.next=2;break}return a.abrupt("return",!1);case 2:return a.abrupt("return",e.modelsManager.onAddItem(t,n));case 3:case"end":return a.stop()}})}),this.manager.events.on(u.REMOVE_ITEM,function(t,n){return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(r===t.items[n].manager.getOwnerId()){a.next=2;break}return a.abrupt("return",!1);case 2:return a.abrupt("return",e.modelsManager.onRemoveItem(t,n));case 3:case"end":return a.stop()}})}),this.manager.events.on(u.MODIFY_ITEM_QTY,function(t,n,a,s,i){return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:if(r===t.manager.getOwnerId()){u.next=2;break}return u.abrupt("return",!1);case 2:return u.abrupt("return",e.modelsManager.onModifyItemQty(t,n,a,s,i));case 3:case"end":return u.stop()}})}),this.manager.events.on(u.EQUIP_ITEM,function(t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(r===t.manager.getOwnerId()){n.next=2;break}return n.abrupt("return",!1);case 2:return n.abrupt("return",e.modelsManager.onEquipItem(t));case 3:case"end":return n.stop()}})}),this.manager.events.on(u.UNEQUIP_ITEM,function(t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(r===t.manager.getOwnerId()){n.next=2;break}return n.abrupt("return",!1);case 2:return n.abrupt("return",e.modelsManager.onUnequipItem(t));case 3:case"end":return n.stop()}})}),this.manager.events.on(u.EQUIP+"AppliedModifiers",function(t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(r===t.manager.getOwnerId()){n.next=2;break}return n.abrupt("return",!1);case 2:return n.abrupt("return",e.modelsManager.onChangedModifiers(t,i.MOD_APPLIED));case 3:case"end":return n.stop()}})}),this.manager.events.on(u.EQUIP+"RevertedModifiers",function(t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(r===t.manager.getOwnerId()){n.next=2;break}return n.abrupt("return",!1);case 2:return n.abrupt("return",e.modelsManager.onChangedModifiers(t,i.MOD_REVERTED));case 3:case"end":return n.stop()}})}),this.manager.events.on(u.EXECUTED_ITEM,function(t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(r===t.manager.getOwnerId()){n.next=2;break}return n.abrupt("return",!1);case 2:return n.abrupt("return",e.modelsManager.onExecutedItem(t));case 3:case"end":return n.stop()}})})}},{key:"loadOwnerItems",value:function(){var e,r,t,n,a,o,c,m,g,p,d;return regeneratorRuntime.async(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,regeneratorRuntime.awrap(this.modelsManager.loadOwnerItems(this.manager.getOwnerId()));case 2:if((e=f.sent).length){f.next=5;break}return f.abrupt("return",!1);case 5:for(r={},t=!0,n=!1,a=void 0,f.prev=9,o=e[Symbol.iterator]();!(t=(c=o.next()).done);t=!0)m=c.value,g=s,this.manager.itemClasses&&{}.hasOwnProperty.call(this.manager.itemClasses,m.items_item.key)&&(g=this.manager.itemClasses[m.items_item.key]),p={id:m.id,key:m.items_item.key,manager:this.manager,label:m.items_item.label,description:m.items_item.description,qty:m.qty,remaining_uses:m.remaining_uses,is_active:m.is_active,group_id:m.items_item.group_id,qty_limit:m.items_item.qty_limit,uses_limit:m.items_item.uses_limit,useTimeOut:m.items_item.useTimeOut,execTimeOut:m.items_item.execTimeOut},(d=new g(p)).isType(i.TYPE_EQUIPMENT)&&(d.equipped=1===m.is_active),r[d.getInventoryId()]=d;f.next=17;break;case 13:f.prev=13,f.t0=f.catch(9),n=!0,a=f.t0;case 17:f.prev=17,f.prev=18,t||null==o.return||o.return();case 20:if(f.prev=20,!n){f.next=23;break}throw a;case 23:return f.finish(20);case 24:return f.finish(17);case 25:return f.next=27,regeneratorRuntime.awrap(this.manager.events.emit(u.LOADED_OWNER_ITEMS,this,r,e));case 27:this.manager.setItems(r);case 28:case"end":return f.stop()}},null,this,[[9,13,17,25],[18,,20,24]])}}]),r}();module.exports.StorageObserver=o;
},{"./storage/models-manager":"jK7s","../item/type/item-base":"NB3W","../constants":"pkJ0","../items-events":"D4tT"}],"jtsL":[function(require,module,exports) {
function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var n=require("@reldens/utils"),a=n.Logger,i=n.ErrorManager,s=require("../constants"),o=require("../items-events"),u=function(){function r(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e(this,r),n||i.error("Undefined client for Sender."),this.manager=t,this.client=n,this.sendProperties={},this.sendTargetProps={broadcast:[],send:[]},this.defineBehaviorForProperties(),this.listenEvents()}return t(r,[{key:"defineBehaviorForProperties",value:function(e){e||(e={});var r=s.BEHAVIOR_SEND,t=s.BEHAVIOR_BROADCAST;this.setPropertyBehavior(s.ACTION_ADD,e,{behavior:r,send:["id","key","qty","label","description","group_id","qty_limit","uses_limit","useTimeOut","execTimeOut","remaining_uses","is_active"]}),this.setPropertyBehavior(s.ACTION_REMOVE,e,{behavior:r,send:["id","key"]}),this.setPropertyBehavior(s.ACTION_MODIFY_QTY,e,{behavior:r,send:["id","key","qty"]}),this.setPropertyBehavior(s.ACTION_MOD_APPLIED,e,{behavior:r,send:["id","key"]}),this.setPropertyBehavior(s.ACTION_MOD_REVERTED,e,{behavior:r,send:["id","key"]}),this.setPropertyBehavior(s.ACTION_EQUIP,e,{behavior:r,send:["id","key"]}),this.setPropertyBehavior(s.ACTION_UNEQUIP,e,{behavior:r,send:["id","key"]});var n={behavior:t,broadcast:["id","key","animationData"]};this.setPropertyBehavior(s.ACTION_EXECUTING,e,n),this.setPropertyBehavior(s.ACTION_EXECUTED,e,{behavior:r,send:["id","key"]})}},{key:"setPropertyBehavior",value:function(e,r,t){({}).hasOwnProperty.call(r,e)&&(this.sendProperties[e]=r[e]),this.sendProperties[e]=t}},{key:"getItemProperties",value:function(e,r,t){({}).hasOwnProperty.call(this.sendProperties,r)||i.error(["Undefined action:",r,"In sendProperties:",this.sendProperties]),{}.hasOwnProperty.call(this.sendProperties[r],t)||i.error(["Undefined behavior:",t,"Action:",r,"In sendProperties:",this.sendProperties]);var n={idx:e.getInventoryId()},s=!0,o=!1,u=void 0;try{for(var c,h=this.sendProperties[r][t][Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var d=c.value;!{}.hasOwnProperty.call(e,d)?a.error(["Undefined property:",d,"Item:",e.getInventoryId()]):n[d]=e[d]}}catch(g){o=!0,u=g}finally{try{s||null==h.return||h.return()}finally{if(o)throw u}}return n}},{key:"listenEvents",value:function(){var e=this;this.manager.events.on(o.ADD_ITEM,function(r,t){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e.runBehaviors(t,t.manager.getOwnerId(),s.ACTION_ADD));case 2:case"end":return r.stop()}})}),this.manager.events.on(o.REMOVE_ITEM,function(r,t){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return n=r.items[t],a.next=3,regeneratorRuntime.awrap(e.runBehaviors(n,n.manager.getOwnerId(),s.ACTION_REMOVE));case 3:case"end":return a.stop()}})}),this.manager.events.on(o.MODIFY_ITEM_QTY,function(r,t,n,a,i){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(e.runBehaviors(r,r.manager.getOwnerId(),s.ACTION_MODIFY_QTY));case 2:case"end":return t.stop()}})}),this.manager.events.on(o.EQUIP_ITEM,function(r){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(e.runBehaviors(r,r.manager.getOwnerId(),s.ACTION_EQUIP));case 2:case"end":return t.stop()}})}),this.manager.events.on(o.UNEQUIP_ITEM,function(r){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(e.runBehaviors(r,r.manager.getOwnerId(),s.ACTION_UNEQUIP));case 2:case"end":return t.stop()}})}),this.manager.events.on(o.EQUIP+"AppliedModifiers",function(r){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(e.runBehaviors(r,r.manager.getOwnerId(),s.ACTION_MOD_APPLIED));case 2:case"end":return t.stop()}})}),this.manager.events.on(o.EQUIP+"RevertedModifiers",function(r){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(e.runBehaviors(r,r.manager.getOwnerId(),s.ACTION_MOD_REVERTED));case 2:case"end":return t.stop()}})}),this.manager.events.on(o.EXECUTING_ITEM,function(r){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(e.runBehaviors(r,r.manager.getOwnerId(),s.ACTION_EXECUTING));case 2:case"end":return t.stop()}})}),this.manager.events.on(o.EXECUTED_ITEM,function(r){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(e.runBehaviors(r,r.manager.getOwnerId(),s.ACTION_EXECUTED));case 2:case"end":return t.stop()}})}),this.manager.events.on(o.SET_ITEMS,function(r){var t,n,a,i,o,u,c;return regeneratorRuntime.async(function(h){for(;;)switch(h.prev=h.next){case 0:if(t=r.manager.getOwnerId(),e.manager.getOwnerId()===t){h.next=3;break}return h.abrupt("return",!1);case 3:for(n={},a=0,i=Object.keys(r.items);a<i.length;a++)o=i[a],u=r.items[o],(c=e.getItemProperties(u,s.ACTION_ADD,s.BEHAVIOR_SEND)).singleInstance=u.singleInstance,n[u.getInventoryId()]=c;return h.next=7,regeneratorRuntime.awrap(e.client.send({act:s.ACTION_SET_ITEMS,owner:t,items:n}));case 7:case"end":return h.stop()}})}),this.manager.events.on(o.SET_GROUPS,function(r){var t,n,a,i,o,u,c,h,d,g,v;return regeneratorRuntime.async(function(p){for(;;)switch(p.prev=p.next){case 0:if(t=r.manager.getOwnerId(),e.manager.getOwnerId()===t){p.next=3;break}return p.abrupt("return",!1);case 3:for(n={},a=0,i=Object.keys(r.groups);a<i.length;a++)o=i[a],u=r.groups[o],c=u.id,h=u.key,d=u.label,g=u.description,v=u.sort,n[h]={id:c,key:h,label:d,description:g,sort:v};return p.next=7,regeneratorRuntime.awrap(e.client.send({act:s.ACTION_SET_GROUPS,owner:t,groups:n}));case 7:case"end":return p.stop()}})})}},{key:"runBehaviors",value:function(e,r,t){var n,a,i,o,u;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.manager.getOwnerId()===r){c.next=2;break}return c.abrupt("return",!1);case 2:if(n=this.sendProperties[t],a=this.getTargetProps(e,n.behavior),n.behavior!==s.BEHAVIOR_BROADCAST&&n.behavior!==s.BEHAVIOR_BOTH){c.next=11;break}return i=this.getItemProperties(e,t,s.BEHAVIOR_BROADCAST),o={act:t,owner:r,item:i,target:a},c.next=9,regeneratorRuntime.awrap(this.client.broadcast(o));case 9:c.next=15;break;case 11:if(n.behavior!==s.BEHAVIOR_SEND&&(n.behavior!==s.BEHAVIOR_BOTH||n[s.BEHAVIOR_SEND]===n[s.BEHAVIOR_BROADCAST])){c.next=15;break}return u=this.getItemProperties(e,t,s.BEHAVIOR_SEND),c.next=15,regeneratorRuntime.awrap(this.client.send({act:t,owner:r,item:u,targetProps:a}));case 15:case"end":return c.stop()}},null,this)}},{key:"getTargetProps",value:function(e,r){var t={},n=r===s.BEHAVIOR_BOTH?s.BEHAVIOR_BROADCAST:s.BEHAVIOR_SEND;if({}.hasOwnProperty.call(this.sendTargetProps,n)&&this.sendTargetProps[n].length){var a=!0,i=!1,o=void 0;try{for(var u,c=this.sendTargetProps[n][Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var h=u.value;"id"===h&&(h=this.manager.ownerIdProperty),t[h]=e.getOwnerProperty(h)}}catch(d){i=!0,o=d}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}}return t}}]),r}();module.exports=u;
},{"@reldens/utils":"nQnG","../constants":"pkJ0","../items-events":"D4tT"}],"KBdK":[function(require,module,exports) {
function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var r=require("./manager"),n=require("./server/storage-observer"),t=n.StorageObserver,a=require("./server/sender"),o=require("@reldens/utils"),s=o.Logger,i=o.ErrorManager,l=function n(o){if(e(this,n),{}.hasOwnProperty.call(o,"owner")||i.error("Undefined owner."),this.manager=new r(o),{}.hasOwnProperty.call(o,"persistence")&&o.persistence){var l=!1;({}).hasOwnProperty.call(o,"modelsManager")&&(l=o.modelsManager),{}.hasOwnProperty.call(o.owner,"persistData")&&"function"==typeof o.owner.persistData||s.error('Required method "persistData" not found in ItemServer props.owner.'),this.dataServer=new t(this.manager,l),this.dataServer.listenEvents()}({}).hasOwnProperty.call(o,"client")&&({}.hasOwnProperty.call(o.client,"send")&&"function"==typeof o.client.send||s.error('Required method "send" not found in ItemServer props.client.'),{}.hasOwnProperty.call(o.client,"broadcast")&&"function"!=typeof o.client.broadcast&&s.error('Property "broadcast" found in ItemServer props.client but is not a function.'),this.client=new a(this.manager,o.client))};module.exports=l;
},{"./manager":"ruSu","./server/storage-observer":"iGUL","./server/sender":"jtsL","@reldens/utils":"nQnG"}],"s966":[function(require,module,exports) {
function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?o(e):r}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=require("@reldens/utils"),u=c.ErrorManager,s=require("./inventory"),p=function(t){function o(t){var i;return e(this,o),{}.hasOwnProperty.call(t,"id")||u.error("Undefined ItemGroup id."),{}.hasOwnProperty.call(t,"key")||u.error("Undefined ItemGroup key."),t.eventsPref="g"+t.key,(i=r(this,n(o).call(this,t))).id=t.id,i.key=t.key,i.label=!!{}.hasOwnProperty.call(t,"label")&&t.label,i.description=!!{}.hasOwnProperty.call(t,"description")&&t.description,i.sort=!!{}.hasOwnProperty.call(t,"sort")&&t.sort,i.items_limit=!!{}.hasOwnProperty.call(t,"items_limit")&&t.items_limit,i.limit_per_item=!!{}.hasOwnProperty.call(t,"limit_per_item")&&t.limit_per_item,i}return i(o,s),o}();module.exports=p;
},{"@reldens/utils":"nQnG","./inventory":"IsYV"}],"hV4n":[function(require,module,exports) {
function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?i(t):r}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=a(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=require("@reldens/utils"),l=f.Logger,y=require("./item-base"),h=require("../../constants"),b=require("../../items-events"),d=function(e){function r(e){var n;return t(this,r),(n=o(this,s(r).call(this,e))).type=h.TYPE_EQUIPMENT,n.equipped=!!{}.hasOwnProperty.call(e,"equipped")&&e.equipped,n}return c(r,y),n(r,[{key:"equip",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.equipped=!0,t.next=3,regeneratorRuntime.awrap(this.manager.events.emit(b.EQUIP_ITEM,this));case 3:if(!1!==e&&!1!==this.manager.applyModifiersAuto){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,regeneratorRuntime.awrap(this.applyModifiers());case 7:case"end":return t.stop()}},null,this)}},{key:"unequip",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.equipped=!1,t.next=3,regeneratorRuntime.awrap(this.manager.events.emit(b.UNEQUIP_ITEM,this));case 3:if(!1!==e&&!1!==this.manager.revertModifiersAuto){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,regeneratorRuntime.awrap(this.revertModifiers());case 7:case"end":return t.stop()}},null,this)}},{key:"applyModifiers",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.equipped){e.next=3;break}return l.error("Item not equipped: "+this.getInventoryId()),e.abrupt("return",!1);case 3:return e.next=5,regeneratorRuntime.awrap(u(s(r.prototype),"applyModifiers",this).call(this));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},null,this)}},{key:"revertModifiers",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.equipped){e.next=3;break}return l.error("Item equipped: "+this.getInventoryId()),e.abrupt("return",!1);case 3:return e.next=5,regeneratorRuntime.awrap(u(s(r.prototype),"revertModifiers",this).call(this));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},null,this)}}]),r}();module.exports=d;
},{"@reldens/utils":"nQnG","./item-base":"NB3W","../../constants":"pkJ0","../../items-events":"D4tT"}],"koQG":[function(require,module,exports) {
function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?i(t):r}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=require("./item-base"),f=require("../../constants"),m=require("../../items-events"),h=function(e){function r(e){var n;return t(this,r),(n=s(this,u(r).call(this,e))).type=f.TYPE_USABLE,n.uses={}.hasOwnProperty.call(e,"uses")?e.uses:1,n.currentUses=n.uses,n.usesLimit=!!{}.hasOwnProperty.call(e,"usesLimit")&&e.usesLimit,n.canUse=!0,n.removeAfterUse=!0,n.useTimeOut=!1,n.useTimer=!1,n.execTimeOut=!1,n.execTimer=!1,n.removeQtyAfterUse={}.hasOwnProperty.call(e,"removeQtyAfterUse")?e.removeQtyAfterUse:1,n}return o(r,c),n(r,[{key:"use",value:function(){var e,t=this,r=arguments;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(e=r.length>0&&void 0!==r[0]&&r[0],this.canUse&&!(this.currentUses<=0)){n.next=3;break}return n.abrupt("return",!1);case 3:if(e&&(this.target=e),this.useTimeOut&&(this.canUse=!1,this.useTimer=setTimeout(function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:t.canUse=!0;case 1:case"end":return e.stop()}})},this.useTimeOut)),!this.execTimeOut){n.next=11;break}return n.next=8,regeneratorRuntime.awrap(this.manager.events.emit(m.EXECUTING_ITEM,this));case 8:this.execTimer=setTimeout(function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(t.executeItem());case 2:case"end":return e.stop()}})},this.execTimeOut),n.next=15;break;case 11:return n.next=13,regeneratorRuntime.awrap(this.manager.events.emit(m.EXECUTING_ITEM,this));case 13:return n.next=15,regeneratorRuntime.awrap(this.executeItem());case 15:case"end":return n.stop()}},null,this)}},{key:"executeItem",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.applyModifiers());case 2:if(this.currentUses--,!(this.removeAfterUse&&this.currentUses<=0)){e.next=12;break}if(!(this.qty<=this.removeQtyAfterUse)){e.next=9;break}return e.next=7,regeneratorRuntime.awrap(this.manager.removeItem(this.getInventoryId()));case 7:e.next=12;break;case 9:return e.next=11,regeneratorRuntime.awrap(this.manager.modifyItemQty(f.DECREASE,this.getInventoryId(),this.removeQtyAfterUse));case 11:this.currentUses=this.uses;case 12:return e.next=14,regeneratorRuntime.awrap(this.manager.events.emit(m.EXECUTED_ITEM,this));case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},null,this)}}]),r}();module.exports=h;
},{"./item-base":"NB3W","../../constants":"pkJ0","../../items-events":"D4tT"}],"lRtu":[function(require,module,exports) {
function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?o(e):n}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=require("./item-base"),f=function(t){function o(t){var u;return e(this,o),(u=n(this,r(o).call(this,t))).singleInstance=!0,u}return u(o,c),o}();module.exports=f;
},{"./item-base":"NB3W"}],"byck":[function(require,module,exports) {
function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?o(e):n}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=require("./equipment"),f=function(t){function o(t){var u;return e(this,o),(u=n(this,r(o).call(this,t))).singleInstance=!0,u}return u(o,c),o}();module.exports=f;
},{"./equipment":"hV4n"}],"tnLB":[function(require,module,exports) {
function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?o(e):n}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=require("./usable"),f=function(t){function o(t){var u;return e(this,o),(u=n(this,r(o).call(this,t))).singleInstance=!0,u}return u(o,c),o}();module.exports=f;
},{"./usable":"koQG"}],"LWJ1":[function(require,module,exports) {
function r(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var e=require("@reldens/utils"),a=e.ErrorManager,t=function e(t){r(this,e),{}.hasOwnProperty.call(t,"key")&&{}.hasOwnProperty.call(t,"propertyKey")&&{}.hasOwnProperty.call(t,"operation")&&{}.hasOwnProperty.call(t,"value")||a.error(["Undefined required properties {key, propertyKey, operation, value} in:",t]),this.key=t.key,this.propertyKey=t.propertyKey,this.operation=t.operation,this.value=t.value,this.itemId=t.itemId||!1,this.minValue=!!{}.hasOwnProperty.call(t,"minValue")&&t.minValue,this.maxValue=!!{}.hasOwnProperty.call(t,"maxValue")&&t.maxValue,this.minProperty=!!{}.hasOwnProperty.call(t,"minProperty")&&t.minProperty,this.maxProperty=!!{}.hasOwnProperty.call(t,"maxProperty")&&t.maxProperty};module.exports=t;
},{"@reldens/utils":"nQnG"}],"zJKE":[function(require,module,exports) {
function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}var n=require("../manager"),i=require("../constants"),a=require("../item/type/item-base"),o=require("../item/group"),s=require("@reldens/utils"),u=s.Logger,c=s.ErrorManager,m=function(){function t(r){e(this,t),{}.hasOwnProperty.call(r,"owner")||c.error("Undefined owner."),!{}.hasOwnProperty.call(r,"manager")?this.manager=new n(r):this.manager=r.manager}return r(t,[{key:"processMessage",value:function(e){if(0!==e.act.indexOf(i.ACTIONS_PREF))return!1;e.act===i.ACTION_SET_ITEMS&&this.onSetItems(e),e.act===i.ACTION_SET_GROUPS&&this.onSetGroups(e),e.act===i.ACTION_ADD&&this.onAddItem(e),e.act===i.ACTION_REMOVE&&this.onRemoveItem(e),e.act===i.ACTION_MODIFY_QTY&&this.onSetQty(e),e.act===i.ACTION_EQUIP&&this.onEquipItem(e),e.act===i.ACTION_UNEQUIP&&this.onUnequipItem(e),e.act===i.ACTION_MOD_APPLIED&&this.onModifiersApplied(e),e.act===i.ACTION_MOD_REVERTED&&this.onModifiersReverted(e),e.act===i.ACTION_EXECUTING&&this.onExecuting(e),e.act===i.ACTION_EXECUTED&&this.onExecuted(e)}},{key:"onSetItems",value:function(e){for(var t={},r=0,n=Object.keys(e.items);r<n.length;r++){var a=n[r],o=e.items[a],s=Object.assign({manager:this.manager},o,{uid:a}),u=this.getItemClass(s.key);t[a]=new u(s),t[a].isType(i.TYPE_EQUIPMENT)&&{}.hasOwnProperty.call(s,"is_active")&&(t[a].equipped=1===s.is_active)}this.manager.setItems(t)}},{key:"onSetGroups",value:function(e){for(var t={},r=0,n=Object.keys(e.groups);r<n.length;r++){var i=n[r],a=this.getGroupClass(e.groups[i].key);t[e.groups[i].key]=new a(e.groups[i])}this.manager.setGroups(t)}},{key:"onAddItem",value:function(e){var t=Object.assign({manager:this.manager},e.item,{uid:e.item.idx}),r=new(this.getItemClass(t.key))(t);this.manager.addItem(r).catch(function(e){u.error(["Error receiver onAddItem.",e])})}},{key:"onRemoveItem",value:function(e){this.manager.removeItem(e.item.idx).catch(function(e){u.error(["Error receiver onRemoveItem.",e])})}},{key:"onSetQty",value:function(e){this.manager.setItemQty(e.item.idx,e.item.qty).catch(function(e){u.error(["Error receiver onSetQty.",e])})}},{key:"onEquipItem",value:function(e){this.manager.items[e.item.idx].equip(!1).catch(function(e){u.error(["Error receiver onEquipItem.",e])})}},{key:"onUnequipItem",value:function(e){this.manager.items[e.item.idx].unequip(!1).catch(function(e){u.error(["Error receiver onUnequipItem.",e])})}},{key:"onModifiersApplied",value:function(e){}},{key:"onModifiersReverted",value:function(e){}},{key:"onExecuting",value:function(e){}},{key:"onExecuted",value:function(e){}},{key:"getItemClass",value:function(e){var t=a;return{}.hasOwnProperty.call(this.manager.itemClasses,e)&&(t=this.manager.itemClasses[e]),t}},{key:"getGroupClass",value:function(e){var t=o;return{}.hasOwnProperty.call(this.manager.groupClasses,e)&&(t=this.manager.groupClasses[e]),t}}]),t}();module.exports=m;
},{"../manager":"ruSu","../constants":"pkJ0","../item/type/item-base":"NB3W","../item/group":"s966","@reldens/utils":"nQnG"}],"sdZl":[function(require,module,exports) {
module.exports={ItemsServer:require("./lib/server"),ItemsManager:require("./lib/manager"),Inventory:require("./lib/item/inventory"),ItemGroup:require("./lib/item/group"),ItemBase:require("./lib/item/type/item-base"),ItemEquipment:require("./lib/item/type/equipment"),ItemUsable:require("./lib/item/type/usable"),ItemSingle:require("./lib/item/type/single"),ItemSingleEquipment:require("./lib/item/type/single-equipment"),ItemSingleUsable:require("./lib/item/type/single-usable"),Modifier:require("./lib/item/modifier"),ItemsConst:require("./lib/constants"),ItemsEvents:require("./lib/items-events"),Receiver:require("./lib/client/receiver")};
},{"./lib/server":"KBdK","./lib/manager":"ruSu","./lib/item/inventory":"IsYV","./lib/item/group":"s966","./lib/item/type/item-base":"NB3W","./lib/item/type/equipment":"hV4n","./lib/item/type/usable":"koQG","./lib/item/type/single":"lRtu","./lib/item/type/single-equipment":"byck","./lib/item/type/single-usable":"tnLB","./lib/item/modifier":"LWJ1","./lib/constants":"pkJ0","./lib/items-events":"D4tT","./lib/client/receiver":"zJKE"}],"pNWD":[function(require,module,exports) {
var E="ivp";module.exports.InventoryConst={INVENTORY_ITEMS:"inventory-items",INVENTORY_OPEN:"inventory-open",INVENTORY_CLOSE:"inventory-close",EQUIPMENT_ITEMS:"equipment-items",EQUIPMENT_CLOSE:"equipment-close",EQUIPMENT_OPEN:"equipment-open",INVENTORY_PREF:E,ACTION_REMOVE:E+"Rm",ACTION_USE:E+"Use",ACTION_EQUIP:E+"Eqi"};
},{}],"D1eP":[function(require,module,exports) {
"use strict";var e=n(require("@babel/runtime-corejs3/core-js-stable/instance/for-each")),t=n(require("@babel/runtime-corejs3/helpers/classCallCheck")),i=n(require("@babel/runtime-corejs3/helpers/createClass"));function n(e){return e&&e.__esModule?e:{default:e}}var r=require("../constants"),a=r.InventoryConst,c=function(){function n(e){(0,t.default)(this,n),this.uiScene=e,this.gameManager=this.uiScene.gameManager}return(0,i.default)(n,[{key:"createUi",value:function(){this.create("inventory",5),this.create("equipment",4)}},{key:"create",value:function(t,i){var n=this,r="ui"+t.replace(t[0],t[0].toUpperCase()),c=t.toUpperCase(),l=this.gameManager.config.get("client/"+t+"/position/x"),s=this.gameManager.config.get("client/"+t+"/position/y");this.uiScene[r]=this.uiScene.add.dom(l,s).createFromCache(r);var o=this.uiScene[r].getChildByProperty("id",a[c+"_CLOSE"]),u=this.uiScene[r].getChildByProperty("id",a[c+"_OPEN"]);o&&u&&(o.addEventListener("click",function(){var i,l;n.uiScene[r].getChildByProperty("id",t+"-ui").style.display="none";var s=n.uiScene[r].getChildByProperty("id",a[c+"_ITEMS"]);(0,e.default)(i=s.querySelectorAll(".item-box .image-container img")).call(i,function(e){e.style.border="none"}),(0,e.default)(l=s.querySelectorAll(".item-data-container")).call(l,function(e){e.style.display="none"}),u.style.display="block",n.uiScene[r].setDepth(1)}),u.addEventListener("click",function(){n.uiScene[r].getChildByProperty("id",t+"-ui").style.display="block",u.style.display="none",n.uiScene[r].setDepth(i)}))}}]),n}();module.exports.InventoryUi=c;
},{"@babel/runtime-corejs3/core-js-stable/instance/for-each":"MrKL","@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@babel/runtime-corejs3/helpers/createClass":"bMeU","../constants":"pNWD"}],"EpE8":[function(require,module,exports) {
"use strict";var e=l(require("@babel/runtime-corejs3/core-js-stable/instance/repeat")),t=l(require("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=l(require("@babel/runtime-corejs3/core-js-stable/instance/for-each")),a=l(require("@babel/runtime-corejs3/core-js-stable/instance/sort")),r=l(require("@babel/runtime-corejs3/core-js/get-iterator")),i=l(require("@babel/runtime-corejs3/core-js-stable/object/keys")),o=l(require("@babel/runtime-corejs3/helpers/classCallCheck")),s=l(require("@babel/runtime-corejs3/helpers/createClass"));function l(e){return e&&e.__esModule?e:{default:e}}var u=require("@reldens/items-system"),m=u.Receiver,c=u.ItemsEvents,g=u.ItemsConst,y=require("@reldens/utils"),p=y.EventsManager,d=y.Logger,v=require("./inventory-ui"),f=v.InventoryUi,I=require("../constants"),E=I.InventoryConst,h=function(){function l(){var e=this;(0,o.default)(this,l),this.itemSprites={},p.on("reldens.playersOnAdd",function(t,n,a,r){if(n===r.room.sessionId){if(!r.gameManager.inventory){var i={owner:t},o=r.gameManager.config.customClasses.inventory.items;o&&(i.itemClasses=o);var s=r.gameManager.config.customClasses.inventory.groups;s&&(i.groupClasses=s),r.gameManager.inventory=new m(i),r.gameManager.inventory.onExecuting=function(t){e.executingItem(t,r.gameManager)}}r.room.onMessage(function(e){r.gameManager.inventory.processMessage(e)})}}),p.on("reldens.preloadUiScene",function(e){e.load.html("uiInventory","assets/features/inventory/templates/ui-inventory.html"),e.load.html("uiEquipment","assets/features/inventory/templates/ui-equipment.html"),e.load.html("uiInventoryItem","assets/features/inventory/templates/item.html"),e.load.html("uiInventoryItemUse","assets/features/inventory/templates/usable.html"),e.load.html("uiInventoryItemEquip","assets/features/inventory/templates/equip.html"),e.load.html("uiInventoryGroup","assets/features/inventory/templates/group.html")}),p.on("reldens.createUiScene",function(t){e.uiCreate=new f(t),e.uiCreate.createUi();var n=t.uiInventory.getChildByProperty("id",E.INVENTORY_ITEMS),a=t.uiEquipment.getChildByProperty("id",E.EQUIPMENT_ITEMS);if(!n||!a)return d.error(["Inventory/Equipment UI not found.",n,a]),!1;var o=t.gameManager.inventory.manager;if((0,i.default)(o.groups).length){t.gameManager.gameDom.getElement("#"+E.EQUIPMENT_ITEMS).html("");var s=e.sortGroups(o.groups),l=!0,u=!1,m=void 0;try{for(var c,g=(0,r.default)(s);!(l=(c=g.next()).done);l=!0){var y=c.value,p=e.createGroupBox(o.groups[y],t.gameManager,t);t.gameManager.gameDom.appendToElement("#"+E.EQUIPMENT_ITEMS,p)}}catch(T){u=!0,m=T}finally{try{l||null==g.return||g.return()}finally{if(u)throw m}}}if((0,i.default)(o.items).length)for(var v=0,I=(0,i.default)(o.items);v<I.length;v++){var h=I[v],M=o.items[h];e.displayItem(M,t,a,n,h)}e.listenInventoryEvents(t,n,a)})}return(0,s.default)(l,[{key:"listenInventoryEvents",value:function(e,t,n){var a=this,o=e.gameManager;o.inventory.manager.events.on(c.ADD_ITEM,function(n,r){var i=a.createItemBox(r,o,e);o.gameDom.appendToElement("#"+E.INVENTORY_ITEMS,i),a.setupButtonsActions(t,r.getInventoryId(),r,e)}),o.inventory.manager.events.on(c.SET_ITEMS,function(r){t.innerHTML="";for(var o=0,s=(0,i.default)(r.items);o<s.length;o++){var l=s[o],u=r.items[l];a.displayItem(u,e,n,t,l)}}),o.inventory.manager.events.on(c.MODIFY_ITEM_QTY,function(t,n,a,r,i){e.uiInventory.getChildByID("item-qty-"+t.getInventoryId()).innerHTML=t.qty}),o.inventory.manager.events.on(c.REMOVE_ITEM,function(t,n){e.uiInventory.getChildByID("item-"+n).remove()}),o.inventory.manager.events.on(c.SET_GROUPS,function(t){o.gameDom.getElement("#"+E.EQUIPMENT_ITEMS).html("");var n=a.sortGroups(t.groups),i=!0,s=!1,l=void 0;try{for(var u,m=(0,r.default)(n);!(i=(u=m.next()).done);i=!0){var c=u.value,g=a.createGroupBox(t.groups[c],o,e);o.gameDom.appendToElement("#"+E.EQUIPMENT_ITEMS,g)}}catch(y){s=!0,l=y}finally{try{i||null==m.return||m.return()}finally{if(s)throw l}}}),o.inventory.manager.events.on(c.EQUIP_ITEM,function(r){a.displayItem(r,e,n,t,r.getInventoryId())}),o.inventory.manager.events.on(c.UNEQUIP_ITEM,function(r){a.displayItem(r,e,n,t,r.getInventoryId())})}},{key:"displayItem",value:function(e,t,n,a,r){var i=this.createItemBox(e,t.gameManager,t),o=t.gameManager.gameDom.getElement("#item-"+e.getInventoryId());if(o.length&&o.remove(),e.isType(g.TYPE_EQUIPMENT)&&e.equipped){var s=this.getGroupById(e.group_id,t.gameManager.inventory.manager.groups);s&&t.gameManager.gameDom.getElement("#group-item-"+s.key+" .equipped-item").length?t.gameManager.gameDom.updateContent("#group-item-"+s.key+" .equipped-item",i):t.gameManager.gameDom.appendToElement("#"+E.EQUIPMENT_ITEMS,i),this.setupButtonsActions(n,r,e,t)}else t.gameManager.gameDom.appendToElement("#"+E.INVENTORY_ITEMS,i),this.setupButtonsActions(a,r,e,t)}},{key:"updateEquipmentStatus",value:function(e,t){var n=t.gameDom.getElement("#item-equip-"+e.idx),a="/assets/features/inventory/assets/"+(e.equipped?"equipped":"unequipped")+".png";n.src=a}},{key:"createItemBox",value:function(e,t,n){var a=n.cache.html.get("uiInventoryItem");return t.gameEngine.parseTemplate(a,{key:e.key,label:e.label,description:e.description,id:e.getInventoryId(),qty:e.qty,usable:e.isType(g.TYPE_USABLE)?this.getUsableContent(e,t,n):"",equipment:e.isType(g.TYPE_EQUIPMENT)?this.getEquipContent(e,t,n):""})}},{key:"sortGroups",value:function(e){var t;return(0,a.default)(t=(0,i.default)(e)).call(t,function(t,n){return(0,a.default)(e[t])>(0,a.default)(e[n])?1:-1})}},{key:"createGroupBox",value:function(e,t,n){var a=n.cache.html.get("uiInventoryGroup");return t.gameEngine.parseTemplate(a,{key:e.key,label:e.label,description:e.description})}},{key:"setupButtonsActions",value:function(e,a,r,i){var o=i.gameManager.gameDom,s=e.querySelector("#item-"+a+" .image-container img");if(!s)return d.error(["Missing image.",s]),!1;s.addEventListener("click",function(){var t,r,i=e.querySelector("#item-"+a+" .item-data-container"),o=!1;"block"!==i.style.display&&(o=!0),(0,n.default)(t=e.querySelectorAll(".item-box .image-container img")).call(t,function(e){e.style.border="none"}),(0,n.default)(r=e.querySelectorAll(".item-data-container")).call(r,function(e){e.style.display="none"}),o&&(s.style.border="1px solid #fff",i.style.display="block")});var l,u,m=e.querySelector("#item-trash-"+a+" img");if(!s)return d.error(["Missing button.",m]),!1;(m&&(m.addEventListener("click",function(){e.querySelector("#trash-confirm-"+a).style.display="block"}),e.querySelector("#trash-cancel-"+a).addEventListener("click",function(){e.querySelector("#trash-confirm-"+a).style.display="none"}),e.querySelector("#trash-confirmed-"+a).addEventListener("click",function(){var e={idx:a,act:E.ACTION_REMOVE};i.gameManager.room.send(e)})),r.isType(g.TYPE_USABLE))&&o.getElement("#item-use-"+a).on("click",(0,t.default)(l=this.clickedBox).call(l,this,a,E.ACTION_USE,i));r.isType(g.TYPE_EQUIPMENT)&&o.getElement("#item-equip-"+a).on("click",(0,t.default)(u=this.clickedBox).call(u,this,a,E.ACTION_EQUIP,i))}},{key:"clickedBox",value:function(e,t,n){n.gameManager.room.send({act:t,idx:e})}},{key:"getUsableContent",value:function(e,t,n){var a=n.cache.html.get("uiInventoryItemUse");return t.gameEngine.parseTemplate(a,{id:e.getInventoryId()})}},{key:"getEquipContent",value:function(e,t,n){var a=n.cache.html.get("uiInventoryItemEquip");return t.gameEngine.parseTemplate(a,{id:e.getInventoryId(),equipStatus:e.equipped?"equipped":"unequipped"})}},{key:"executingItem",value:function(t,n){var a=this,r=t.item;if(!{}.hasOwnProperty.call(r,"animationData"))return!1;var i="aK_"+r.key,o=n.getActiveScene();o.load.spritesheet(i,"assets/custom/sprites/"+r.key+".png",{frameWidth:r.animationData.frameWidth||64,frameHeight:r.animationData.frameHeight||64}),o.load.on("complete",function(){if({}.hasOwnProperty.call(a.itemSprites,i))return!1;var s,l={key:i,frames:o.anims.generateFrameNumbers(i,{start:r.animationData.start||0,end:r.animationData.end||1}),frameRate:{}.hasOwnProperty.call(r.animationData,"rate")?r.animationData.rate:o.configuredFrameRate,repeat:(0,e.default)(r.animationData)||3,hideOnComplete:!{}.hasOwnProperty.call(r.animationData,"hide")||r.animationData.hide},u=0,m=r.animationData.startsOnTarget&&{}.hasOwnProperty.call(t.target,"sessionId")?t.target.sessionId:n.getCurrentPlayer().sessionId,c=o.player.players[m];r.animationData.usePlayerPosition&&(o.anims.create(l),s=c.x,u=c.y),{}.hasOwnProperty.call(r.animationData,"fixedX")&&(s=r.animationData.fixedX),{}.hasOwnProperty.call(r.animationData,"fixedY")&&(u=r.animationData.fixedY),r.animationData.closeInventoryOnUse&&n.gameDom.getElement("#inventory-close").click(),a.itemSprites[i]=o.physics.add.sprite(s,u,i),a.itemSprites[i].setDepth(2e6),r.animationData.followPlayer&&(c.moveSprites[i]=a.itemSprites[i]),a.itemSprites[i].anims.play(i,!0).on("animationcomplete",function(){r.animationData.destroyOnComplete&&(a.itemSprites[i].destroy(),r.animationData.followPlayer&&delete a.itemSprites[i])})}),o.load.start()}},{key:"getGroupById",value:function(e,t){var n=!1,a=(0,i.default)(t);if(a.length){var o=!0,s=!1,l=void 0;try{for(var u,m=(0,r.default)(a);!(o=(u=m.next()).done);o=!0){var c=t[u.value];if(c.id===e){n=c;break}}}catch(g){s=!0,l=g}finally{try{o||null==m.return||m.return()}finally{if(s)throw l}}}return n}}]),l}();module.exports.InventoryPack=h;
},{"@babel/runtime-corejs3/core-js-stable/instance/repeat":"duBw","@babel/runtime-corejs3/core-js-stable/instance/bind":"FPFX","@babel/runtime-corejs3/core-js-stable/instance/for-each":"MrKL","@babel/runtime-corejs3/core-js-stable/instance/sort":"rnON","@babel/runtime-corejs3/core-js/get-iterator":"dtXd","@babel/runtime-corejs3/core-js-stable/object/keys":"Jibu","@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@babel/runtime-corejs3/helpers/createClass":"bMeU","@reldens/items-system":"sdZl","@reldens/utils":"nQnG","./inventory-ui":"D1eP","../constants":"pNWD"}],"tgR9":[function(require,module,exports) {
var e=require("../../chat/client/pack"),t=e.Chat,c=require("../../objects/client/pack"),r=c.ObjectsPack,a=require("../../inventory/client/pack"),n=a.InventoryPack;module.exports.ClientCoreFeatures={chat:t,objects:r,inventory:n};
},{"../../chat/client/pack":"YUwl","../../objects/client/pack":"no6C","../../inventory/client/pack":"EpE8"}],"E8Iz":[function(require,module,exports) {
"use strict";var e=s(require("@babel/runtime-corejs3/core-js-stable/object/keys")),r=s(require("@babel/runtime-corejs3/helpers/classCallCheck")),t=s(require("@babel/runtime-corejs3/helpers/createClass"));function s(e){return e&&e.__esModule?e:{default:e}}var a=require("@reldens/utils"),u=a.EventsManager,i=require("./config-client"),l=i.ClientCoreFeatures,n=function(){function s(){(0,r.default)(this,s)}return(0,t.default)(s,[{key:"loadFeatures",value:function(r){this.featuresList={},u.emit("reldens.loadFeatures",this);for(var t=0,s=(0,e.default)(r);t<s.length;t++){var a=r[s[t]];({}).hasOwnProperty.call(l,a)&&(this.featuresList[a]=new l[a],u.emit("reldens.loadFeature_"+a,this.featuresList[a],this))}return this.featuresList}}]),s}();module.exports.FeaturesManager=n;
},{"@babel/runtime-corejs3/core-js-stable/object/keys":"Jibu","@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@babel/runtime-corejs3/helpers/createClass":"bMeU","@reldens/utils":"nQnG","./config-client":"tgR9"}],"lwLq":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var define;
var e,t=arguments[3],n=require("process");!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(t,n){"use strict";var r=[],i=Object.getPrototypeOf,o=r.slice,a=r.flat?function(e){return r.flat.call(e)}:function(e){return r.concat.apply([],e)},s=r.push,u=r.indexOf,l={},c=l.toString,f=l.hasOwnProperty,p=f.toString,d=p.call(Object),h={},g=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},v=function(e){return null!=e&&e===e.window},y=t.document,m={type:!0,src:!0,nonce:!0,noModule:!0};function x(e,t,n){var r,i,o=(n=n||y).createElement("script");if(o.text=e,t)for(r in m)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var w=function(e,t){return new w.fn.init(e,t)};function T(e){var t=!!e&&"length"in e&&e.length,n=b(e);return!g(e)&&!v(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}w.fn=w.prototype={jquery:"3.5.1",constructor:w,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(w.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:r.sort,splice:r.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||w.isPlainObject(n)?n:{},i=!1,a[t]=w.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},w.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e))&&(!(t=i(e))||"function"==typeof(n=f.call(t,"constructor")&&t.constructor)&&p.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){x(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(T(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(T(Object(e))?w.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,s=[];if(T(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return a(s)},guid:1,support:h}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=r[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});var C=function(e){var t,n,r,i,o,a,s,u,l,c,f,p,d,h,g,v,y,m,x,b="sizzle"+1*new Date,w=e.document,T=0,C=0,E=ue(),S=ue(),k=ue(),A=ue(),N=function(e,t){return e===t&&(f=!0),0},D={}.hasOwnProperty,j=[],q=j.pop,L=j.push,H=j.push,O=j.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){p()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(j=O.call(w.childNodes),w.childNodes),j[w.childNodes.length].nodeType}catch(Se){H={apply:j.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,i){var o,s,l,c,f,h,y,m=t&&t.ownerDocument,w=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return r;if(!i&&(p(t),t=t||d,g)){if(11!==w&&(f=Z.exec(e)))if(o=f[1]){if(9===w){if(!(l=t.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(m&&(l=m.getElementById(o))&&x(t,l)&&l.id===o)return r.push(l),r}else{if(f[2])return H.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return H.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!A[e+" "]&&(!v||!v.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(y=e,m=t,1===w&&(U.test(e)||z.test(e))){for((m=ee.test(e)&&ye(t.parentNode)||t)===t&&n.scope||((c=t.getAttribute("id"))?c=c.replace(re,ie):t.setAttribute("id",c=b)),s=(h=a(e)).length;s--;)h[s]=(c?"#"+c:":scope")+" "+xe(h[s]);y=h.join(",")}try{return H.apply(r,m.querySelectorAll(y)),r}catch(T){A(e,!0)}finally{c===b&&t.removeAttribute("id")}}}return u(e.replace($,"$1"),t,r,i)}function ue(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function le(e){return e[b]=!0,e}function ce(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(Se){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ve(e){return le(function(t){return t=+t,le(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ye(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},o=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},p=se.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!=d&&9===a.nodeType&&a.documentElement?(h=(d=a).documentElement,g=!o(d),w!=d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",oe,!1):i.attachEvent&&i.attachEvent("onunload",oe)),n.scope=ce(function(e){return h.appendChild(e).appendChild(d.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),n.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ce(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=K.test(d.getElementsByClassName),n.getById=ce(function(e){return h.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},y=[],v=[],(n.qsa=K.test(d.querySelectorAll))&&(ce(function(e){var t;h.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+b+"-]").length||v.push("~="),(t=d.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(n.matchesSelector=K.test(m=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ce(function(e){n.disconnectedMatch=m.call(e,"*"),m.call(e,"[s!='']:x"),y.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),y=y.length&&new RegExp(y.join("|")),t=K.test(h.compareDocumentPosition),x=t||K.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},N=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==d||e.ownerDocument==w&&x(w,e)?-1:t==d||t.ownerDocument==w&&x(w,t)?1:c?P(c,e)-P(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==d?-1:t==d?1:i?-1:o?1:c?P(c,e)-P(c,t):0;if(i===o)return pe(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?pe(a[r],s[r]):a[r]==w?-1:s[r]==w?1:0},d):d},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(p(e),n.matchesSelector&&g&&!A[t+" "]&&(!y||!y.test(t))&&(!v||!v.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(Se){A(t,!0)}return se(t,d,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=d&&p(e),x(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=d&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&D.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(N),f){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return c=null,e},i=se.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&E(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=se.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(B," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",v=t.parentNode,y=s&&t.nodeName.toLowerCase(),m=!u&&!s,x=!1;if(v){if(o){for(;g;){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?v.firstChild:v.lastChild],a&&m){for(x=(d=(l=(c=(f=(p=v)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1])&&l[2],p=d&&v.childNodes[d];p=++d&&p&&p[g]||(x=d=0)||h.pop();)if(1===p.nodeType&&++x&&p===t){c[e]=[T,d,x];break}}else if(m&&(x=d=(l=(c=(f=(p=t)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1]),!1===x)for(;(p=++d&&p&&p[g]||(x=d=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++x||(m&&((c=(f=p[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[T,x]),p!==t)););return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=P(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:le(function(e){var t=[],n=[],r=s(e.replace($,"$1"));return r[b]?le(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:le(function(e){return function(t){return se(e,t).length>0}}),contains:le(function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}}),lang:le(function(e){return V.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=C++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var l,c,f,p=[T,s];if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(c=(f=t[b]||(t[b]={}))[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[o])&&l[0]===T&&l[1]===s)return p[2]=l[2];if(c[o]=p,p[2]=e(t,n,u))return!0}return!1}}function we(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(e,t,n,r,i,o){return r&&!r[b]&&(r=Ce(r)),i&&!i[b]&&(i=Ce(i,o)),le(function(o,a,s,u){var l,c,f,p=[],d=[],h=a.length,g=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),v=!e||!o&&t?g:Te(g,p,e,s,u),y=n?i||(o?e:h||r)?[]:a:v;if(n&&n(v,y,s,u),r)for(l=Te(y,d),r(l,[],s,u),c=l.length;c--;)(f=l[c])&&(y[d[c]]=!(v[d[c]]=f));if(o){if(i||e){if(i){for(l=[],c=y.length;c--;)(f=y[c])&&l.push(v[c]=f);i(null,y=[],l,u)}for(c=y.length;c--;)(f=y[c])&&(l=i?P(o,f):p[c])>-1&&(o[l]=!(a[l]=f))}}else y=Te(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function Ee(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=be(function(e){return e===t},s,!0),f=be(function(e){return P(t,e)>-1},s,!0),p=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])p=[be(we(p),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o&&!r.relative[e[i].type];i++);return Ce(u>1&&we(p),u>1&&xe(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace($,"$1"),n,u<i&&Ee(e.slice(u,i)),i<o&&Ee(e=e.slice(i)),i<o&&xe(e))}p.push(n)}return we(p)}return me.prototype=r.filters=r.pseudos,r.setFilters=new me,a=se.tokenize=function(e,t){var n,i,o,a,s,u,l,c=S[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=r.preFilter;s;){for(a in n&&!(i=_.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=z.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace($," ")}),s=s.slice(n.length)),r.filter)!(i=G[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):S(e,u).slice(0)},s=se.compile=function(e,t){var n,i=[],o=[],s=k[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=Ee(t[n]))[b]?i.push(s):o.push(s);(s=k(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var f,h,v,y=0,m="0",x=o&&[],b=[],w=l,C=o||i&&r.find.TAG("*",c),E=T+=null==w?1:Math.random()||.1,S=C.length;for(c&&(l=a==d||a||c);m!==S&&null!=(f=C[m]);m++){if(i&&f){for(h=0,a||f.ownerDocument==d||(p(f),s=!g);v=e[h++];)if(v(f,a||d,s)){u.push(f);break}c&&(T=E)}n&&((f=!v&&f)&&y--,o&&x.push(f))}if(y+=m,n&&m!==y){for(h=0;v=t[h++];)v(x,b,a,s);if(o){if(y>0)for(;m--;)x[m]||b[m]||(b[m]=q.call(u));b=Te(b)}H.apply(u,b),c&&!o&&b.length>0&&y+t.length>1&&se.uniqueSort(u)}return c&&(T=E,l=w),x};return n?le(o):o}(o,i))).selector=e}return s},u=se.select=function(e,t,n,i){var o,u,l,c,f,p="function"==typeof e&&e,d=!i&&a(e=p.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(te,ne),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(o=G.needsContext.test(e)?0:u.length;o--&&(l=u[o],!r.relative[c=l.type]);)if((f=r.find[c])&&(i=f(l.matches[0].replace(te,ne),ee.test(u[0].type)&&ye(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&xe(u)))return H.apply(n,i),n;break}}return(p||s(e,d))(i,t,!g,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},n.sortStable=b.split("").sort(N).join("")===b,n.detectDuplicates=!!f,p(),n.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(t);w.find=C,w.expr=C.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=C.uniqueSort,w.text=C.getText,w.isXMLDoc=C.isXML,w.contains=C.contains,w.escapeSelector=C.escape;var E=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&w(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=w.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,t,n){return g(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return u.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,i[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&k.test(e)?w(e):e||[],!1).length}});var j,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||j,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:y,!0)),N.test(r[1])&&w.isPlainObject(t))for(r in t)g(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=y.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,j=w(y);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&w(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(w(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return E(e,"parentNode")},parentsUntil:function(e,t,n){return E(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return E(e,"nextSibling")},prevAll:function(e){return E(e,"previousSibling")},nextUntil:function(e,t,n){return E(e,"nextSibling",n)},prevUntil:function(e,t,n){return E(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return null!=e.contentDocument&&i(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(H[e]||w.uniqueSort(i),L.test(e)&&i.reverse()),this.pushStack(i)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return w.each(e.match(P)||[],function(e,n){t[n]=!0}),t}(e):w.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){w.each(n,function(n,r){g(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==b(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return w.each(arguments,function(e,t){for(var n;(n=w.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?w.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},w.extend({Deferred:function(e){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var i=g(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,r,i){var o=0;function a(e,n,r,i){return function(){var s=this,u=arguments,l=function(){var t,l;if(!(e<o)){if((t=r.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution");l=t&&("object"==typeof t||"function"==typeof t)&&t.then,g(l)?i?l.call(t,a(o,n,R,i),a(o,n,M,i)):(o++,l.call(t,a(o,n,R,i),a(o,n,M,i),a(o,n,R,n.notifyWith))):(r!==R&&(s=void 0,u=[t]),(i||n.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(t){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(t,c.stackTrace),e+1>=o&&(r!==M&&(s=void 0,u=[t]),n.rejectWith(s,u))}};e?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),t.setTimeout(c))}}return w.Deferred(function(t){n[0][3].add(a(0,t,g(i)?i:R,t.notifyWith)),n[1][3].add(a(0,t,g(e)?e:R)),n[2][3].add(a(0,t,g(r)?r:M))}).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},o={};return w.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=o.call(arguments),a=w.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&(I(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||g(i[n]&&i[n].then)))return a.then();for(;n--;)I(i[n],s(n),a.reject);return a.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&W.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},w.readyException=function(e){t.setTimeout(function(){throw e})};var F=w.Deferred();function B(){y.removeEventListener("DOMContentLoaded",B),t.removeEventListener("load",B),w.ready()}w.fn.ready=function(e){return F.then(e).catch(function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||F.resolveWith(y,[w]))}}),w.ready.then=F.then,"complete"===y.readyState||"loading"!==y.readyState&&!y.documentElement.doScroll?t.setTimeout(w.ready):(y.addEventListener("DOMContentLoaded",B),t.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===b(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,g(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(w(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=w.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:J.test(e)?JSON.parse(e):e)}(n)}catch(i){}Q.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Q.set(this,e)}):$(this,function(t){var n;if(o&&void 0===t)return void 0!==(n=Q.get(o,e))?n:void 0!==(n=Z(o,e))?n:void 0;this.each(function(){Q.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),o=w._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){w.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:w.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=w.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=y.documentElement,ie=function(e){return w.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return w.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===w.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,"")},u=s(),l=n&&n[3]||(w.cssNumber[t]?"":"px"),c=e.nodeType&&(w.cssNumber[t]||"px"!==l&&+u)&&te.exec(w.css(e,t));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;a--;)w.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,w.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e){var t,n=e.ownerDocument,r=e.nodeName,i=ue[r];return i||(t=n.body.appendChild(n.createElement(r)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),ue[r]=i,i)}function ce(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=Y.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=le(r))):"none"!==n&&(i[o]="none",Y.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}w.fn.extend({show:function(){return ce(this,!0)},hide:function(){return ce(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?w(this).show():w(this).hide()})}});var fe,pe,de=/^(?:checkbox|radio)$/i,he=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ge=/^$|^module$|\/(?:java|ecma)script/i;fe=y.createDocumentFragment().appendChild(y.createElement("div")),(pe=y.createElement("input")).setAttribute("type","radio"),pe.setAttribute("checked","checked"),pe.setAttribute("name","t"),fe.appendChild(pe),h.checkClone=fe.cloneNode(!0).cloneNode(!0).lastChild.checked,fe.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!fe.cloneNode(!0).lastChild.defaultValue,fe.innerHTML="<option></option>",h.option=!!fe.lastChild;var ve={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ye(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?w.merge([e],n):n}function me(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead,ve.th=ve.td,h.option||(ve.optgroup=ve.option=[1,"<select multiple='multiple'>","</select>"]);var xe=/<|&#?\w+;/;function be(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===b(o))w.merge(p,o.nodeType?[o]:o);else if(xe.test(o)){for(a=a||f.appendChild(t.createElement("div")),s=(he.exec(o)||["",""])[1].toLowerCase(),u=ve[s]||ve._default,a.innerHTML=u[1]+w.htmlPrefilter(o)+u[2],c=u[0];c--;)a=a.lastChild;w.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));for(f.textContent="",d=0;o=p[d++];)if(r&&w.inArray(o,r)>-1)i&&i.push(o);else if(l=ie(o),a=ye(f.appendChild(o),"script"),l&&me(a),n)for(c=0;o=a[c++];)ge.test(o.type||"")&&n.push(o);return f}var we=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ce=/^([^.]*)(?:\.(.+)|)/;function Ee(){return!0}function Se(){return!1}function ke(e,t){return e===function(){try{return y.activeElement}catch(e){}}()==("focus"===t)}function Ae(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ae(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Se;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return w().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),e.each(function(){w.event.add(this,t,i,r,n)})}function Ne(e,t,n){n?(Y.set(e,t,!1),w.event.add(e,t,{namespace:!1,handler:function(e){var r,i,a=Y.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(w.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=o.call(arguments),Y.set(this,t,a),r=n(this,t),this[t](),a!==(i=Y.get(this,t))||r?Y.set(this,t,!1):i={},a!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else a.length&&(Y.set(this,t,{value:w.event.trigger(w.extend(a[0],w.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,t)&&w.event.add(e,t,Ee)}w.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(e);if(V(e))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(re,i),n.guid||(n.guid=w.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(t){return void 0!==w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(P)||[""]).length;l--;)d=g=(s=Ce.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=w.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=w.event.special[d]||{},c=w.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),w.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){for(l=(t=(t||"").match(P)||[""]).length;l--;)if(d=g=(s=Ce.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){for(f=w.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||w.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)w.event.remove(e,d+t[l],n,r,!0);w.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=w.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=w.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(a=w.event.handlers.call(this,u,l),t=0;(i=a[t++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((w.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?w(i,this).index(l)>-1:w.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return de.test(t.type)&&t.click&&A(t,"input")&&Ne(t,"click",Ee),!1},trigger:function(e){var t=this||e;return de.test(t.type)&&t.click&&A(t,"input")&&Ne(t,"click"),!0},_default:function(e){var t=e.target;return de.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ee:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ee,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ee,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ee,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(e,t){w.event.special[e]={setup:function(){return Ne(this,e,ke),!1},trigger:function(){return Ne(this,e),!0},delegateType:t}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||w.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Se),this.each(function(){w.event.remove(this,e,n,t)})}});var De=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,qe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Le(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&w(e).children("tbody")[0]||e}function He(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Oe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Pe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)w.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=w.extend({},o),Q.set(t,a))}}function Re(e,t,n,r){t=a(t);var i,o,s,u,l,c,f=0,p=e.length,d=p-1,v=t[0],y=g(v);if(y||p>1&&"string"==typeof v&&!h.checkClone&&je.test(v))return e.each(function(i){var o=e.eq(i);y&&(t[0]=v.call(this,i,o.html())),Re(o,t,n,r)});if(p&&(o=(i=be(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(s=w.map(ye(i,"script"),He)).length;f<p;f++)l=i,f!==d&&(l=w.clone(l,!0,!0),u&&w.merge(s,ye(l,"script"))),n.call(e[f],l,f);if(u)for(c=s[s.length-1].ownerDocument,w.map(s,Oe),f=0;f<u;f++)l=s[f],ge.test(l.type||"")&&!Y.access(l,"globalEval")&&w.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?w._evalUrl&&!l.noModule&&w._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):x(l.textContent.replace(qe,""),l,c))}return e}function Me(e,t,n){for(var r,i=t?w.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||w.cleanData(ye(r)),r.parentNode&&(n&&ie(r)&&me(ye(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(a=ye(c),r=0,i=(o=ye(e)).length;r<i;r++)s=o[r],u=a[r],l=void 0,"input"===(l=u.nodeName.toLowerCase())&&de.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ye(e),a=a||ye(c),r=0,i=o.length;r<i;r++)Pe(o[r],a[r]);else Pe(e,c);return(a=ye(c,"script")).length>0&&me(a,!f&&ye(e,"script")),c},cleanData:function(e){for(var t,n,r,i=w.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Me(this,e,!0)},remove:function(e){return Me(this,e)},text:function(e){return $(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Re(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return Re(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!De.test(e)&&!ve[(he.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Re(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(ye(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],i=w(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),w(i[a])[t](n),s.apply(r,n.get());return this.pushStack(r)}});var Ie=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),We=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Fe=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Be=new RegExp(ne.join("|"),"i");function $e(e,t,n){var r,i,o,a,s=e.style;return(n=n||We(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=w.style(e,t)),!h.pixelBoxStyles()&&Ie.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function _e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(l).appendChild(c);var e=t.getComputedStyle(c);r="1%"!==e.top,u=12===n(e.marginLeft),c.style.right="60%",a=36===n(e.right),i=36===n(e.width),c.style.position="absolute",o=12===n(c.offsetWidth/3),re.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var r,i,o,a,s,u,l=y.createElement("div"),c=y.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(h,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,n,r,i;return null==s&&(e=y.createElement("table"),n=y.createElement("tr"),r=y.createElement("div"),e.style.cssText="position:absolute;left:-11111px",n.style.height="1px",r.style.height="9px",re.appendChild(e).appendChild(n).appendChild(r),i=t.getComputedStyle(n),s=parseInt(i.height)>3,re.removeChild(e)),s}}))}();var ze=["Webkit","Moz","ms"],Ue=y.createElement("div").style,Xe={};function Ve(e){var t=w.cssProps[e]||Xe[e];return t||(e in Ue?e:Xe[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=ze.length;n--;)if((e=ze[n]+t)in Ue)return e}(e)||e)}var Ge=/^(none|table(?!-c[ea]).+)/,Ye=/^--/,Qe={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"};function Ke(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=w.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=w.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=w.css(e,"border"+ne[a]+"Width",!0,i))):(u+=w.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=w.css(e,"border"+ne[a]+"Width",!0,i):s+=w.css(e,"border"+ne[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function et(e,t,n){var r=We(e),i=(!h.boxSizingReliable()||n)&&"border-box"===w.css(e,"boxSizing",!1,r),o=i,a=$e(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Ie.test(a)){if(!n)return a;a="auto"}return(!h.boxSizingReliable()&&i||!h.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===w.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===w.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ze(e,t,n||(i?"border":"content"),o,r,a)+"px"}function tt(e,t,n,r,i){return new tt.prototype.init(e,t,n,r,i)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=$e(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Ye.test(t),l=e.style;if(u||(t=Ve(s)),a=w.cssHooks[t]||w.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),h.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Ye.test(t)||(t=Ve(s)),(a=w.cssHooks[t]||w.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=$e(e,t,r)),"normal"===i&&t in Je&&(i=Je[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!Ge.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):Fe(e,Qe,function(){return et(e,t,r)})},set:function(e,n,r){var i,o=We(e),a=!h.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===w.css(e,"boxSizing",!1,o),u=r?Ze(e,t,r,s,o):0;return s&&a&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Ze(e,t,"border",!1,o)-.5)),u&&(i=te.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),Ke(0,n,u)}}}),w.cssHooks.marginLeft=_e(h.reliableMarginLeft,function(e,t){if(t)return(parseFloat($e(e,"marginLeft"))||e.getBoundingClientRect().left-Fe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+ne[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(w.cssHooks[e+t].set=Ke)}),w.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=We(e),i=t.length;a<i;a++)o[t[a]]=w.css(e,t[a],!1,r);return o}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}}),w.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||!w.cssHooks[e.prop]&&null==e.elem.style[Ve(e.prop)]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=tt.prototype.init,w.fx.step={};var nt,rt,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function at(){rt&&(!1===y.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(at):t.setTimeout(at,w.fx.interval),w.fx.tick())}function st(){return t.setTimeout(function(){nt=void 0}),nt=Date.now()}function ut(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function lt(e,t,n){for(var r,i=(ct.tweeners[t]||[]).concat(ct.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ct(e,t,n){var r,i,o=0,a=ct.prefilters.length,s=w.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=nt||st(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||st(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=w.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);o<a;o++)if(r=ct.prefilters[o].call(l,e,c,l.opts))return g(r.stop)&&(w._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return w.map(c,lt,l),g(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),w.fx.timer(w.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}w.Animation=w.extend(ct,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ct.tweeners[n]=ct.tweeners[n]||[],ct.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=w._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,w.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],it.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||w.style(e,r)}if((u=!w.isEmptyObject(t))||!w.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=w.css(e,"display"))&&(l?c=l:(ce([e],!0),l=e.style.display||l,c=w.css(e,"display"),ce([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===w.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&ce([e],!0),p.done(function(){for(r in g||ce([e]),Y.remove(e,"fxshow"),d)w.style(e,r,d[r])})),u=lt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ct.prefilters.unshift(e):ct.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),o=w.speed(t,n,r),a=function(){var t=ct(this,w.extend({},e),o);(i||Y.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=w.timers,a=Y.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ot.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Y.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,r,i)}}),w.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(nt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),nt=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){rt||(rt=!0,at())},w.fx.stop=function(){rt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(e,n){return e=w.fx&&w.fx.speeds[e]||e,n=n||"fx",this.queue(n,function(n,r){var i=t.setTimeout(n,e);r.stop=function(){t.clearTimeout(i)}})},function(){var e=y.createElement("input"),t=y.createElement("select").appendChild(y.createElement("option"));e.type="checkbox",h.checkOn=""!==e.value,h.optSelected=t.selected,(e=y.createElement("input")).value="t",e.type="radio",h.radioValue="t"===e.value}();var ft,pt=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return $(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?w.prop(e,t,n):(1===o&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?ft:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),ft={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=pt[t]||w.find.attr;pt[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=pt[a],pt[a]=i,i=null!=n(e,t,r)?a:null,pt[a]=o),i}});var dt=/^(?:input|select|textarea|button)$/i,ht=/^(?:a|area)$/i;function gt(e){return(e.match(P)||[]).join(" ")}function vt(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}w.fn.extend({prop:function(e,t){return $(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):dt.test(e.nodeName)||ht.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).addClass(e.call(this,t,vt(this)))});if((t=yt(e)).length)for(;n=this[u++];)if(i=vt(n),r=1===n.nodeType&&" "+gt(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=gt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).removeClass(e.call(this,t,vt(this)))});if(!arguments.length)return this.attr("class","");if((t=yt(e)).length)for(;n=this[u++];)if(i=vt(n),r=1===n.nodeType&&" "+gt(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=gt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):g(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,vt(this),t),t)}):this.each(function(){var t,i,o,a;if(r)for(i=0,o=w(this),a=yt(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=vt(this))&&Y.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+gt(vt(n))+" ").indexOf(t)>-1)return!0;return!1}});var mt=/\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=g(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(mt,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:gt(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=w(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=w.makeArray(t),a=i.length;a--;)((r=i[a]).selected=w.inArray(w.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},h.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),h.focusin="onfocusin"in t;var xt=/^(?:focusinfocus|focusoutblur)$/,bt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(e,n,r,i){var o,a,s,u,l,c,p,d,h=[r||y],m=f.call(e,"type")?e.type:e,x=f.call(e,"namespace")?e.namespace.split("."):[];if(a=d=s=r=r||y,3!==r.nodeType&&8!==r.nodeType&&!xt.test(m+w.event.triggered)&&(m.indexOf(".")>-1&&(x=m.split("."),m=x.shift(),x.sort()),l=m.indexOf(":")<0&&"on"+m,(e=e[w.expando]?e:new w.Event(m,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=x.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:w.makeArray(n,[e]),p=w.event.special[m]||{},i||!p.trigger||!1!==p.trigger.apply(r,n))){if(!i&&!p.noBubble&&!v(r)){for(u=p.delegateType||m,xt.test(u+m)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(r.ownerDocument||y)&&h.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=h[o++])&&!e.isPropagationStopped();)d=a,e.type=o>1?u:p.bindType||m,(c=(Y.get(a,"events")||Object.create(null))[e.type]&&Y.get(a,"handle"))&&c.apply(a,n),(c=l&&a[l])&&c.apply&&V(a)&&(e.result=c.apply(a,n),!1===e.result&&e.preventDefault());return e.type=m,i||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(h.pop(),n)||!V(r)||l&&g(r[m])&&!v(r)&&((s=r[l])&&(r[l]=null),w.event.triggered=m,e.isPropagationStopped()&&d.addEventListener(m,bt),r[m](),e.isPropagationStopped()&&d.removeEventListener(m,bt),w.event.triggered=void 0,s&&(r[l]=s)),e.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),h.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=Y.access(r,t);i||r.addEventListener(e,n,!0),Y.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=Y.access(r,t)-1;i?Y.access(r,t,i):(r.removeEventListener(e,n,!0),Y.remove(r,t))}}});var wt=t.location,Tt={guid:Date.now()},Ct=/\?/;w.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(r){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+e),n};var Et=/\[\]$/,St=/\r?\n/g,kt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function Nt(e,t,n,r){var i;if(Array.isArray(t))w.each(t,function(t,i){n||Et.test(e)?r(e,i):Nt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==b(t))r(e,t);else for(i in t)Nt(e+"["+i+"]",t[i],n,r)}w.param=function(e,t){var n,r=[],i=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){i(this.name,this.value)});else for(n in e)Nt(n,e[n],t,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&At.test(this.nodeName)&&!kt.test(e)&&(this.checked||!de.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(St,"\r\n")}}):{name:t.name,value:n.replace(St,"\r\n")}}).get()}});var Dt=/%20/g,jt=/#.*$/,qt=/([?&])_=[^&]*/,Lt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ht=/^(?:GET|HEAD)$/,Ot=/^\/\//,Pt={},Rt={},Mt="*/".concat("*"),It=y.createElement("a");function Wt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(P)||[];if(g(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Ft(e,t,n,r){var i={},o=e===Rt;function a(s){var u;return i[s]=!0,w.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function Bt(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}It.href=wt.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Bt(Bt(e,w.ajaxSettings),t):Bt(w.ajaxSettings,e)},ajaxPrefilter:Wt(Pt),ajaxTransport:Wt(Rt),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0),n=n||{};var r,i,o,a,s,u,l,c,f,p,d=w.ajaxSetup({},n),h=d.context||d,g=d.context&&(h.nodeType||h.jquery)?w(h):w.event,v=w.Deferred(),m=w.Callbacks("once memory"),x=d.statusCode||{},b={},T={},C="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(l){if(!a)for(a={};t=Lt.exec(o);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(e,t){return null==l&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==l&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)E.always(e[E.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||C;return r&&r.abort(t),S(0,t),this}};if(v.promise(E),d.url=((e||d.url||wt.href)+"").replace(Ot,wt.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(P)||[""],null==d.crossDomain){u=y.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=It.protocol+"//"+It.host!=u.protocol+"//"+u.host}catch(k){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=w.param(d.data,d.traditional)),Ft(Pt,d,n,E),l)return E;for(f in(c=w.event&&d.global)&&0==w.active++&&w.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Ht.test(d.type),i=d.url.replace(jt,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Dt,"+")):(p=d.url.slice(i.length),d.data&&(d.processData||"string"==typeof d.data)&&(i+=(Ct.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(qt,"$1"),p=(Ct.test(i)?"&":"?")+"_="+Tt.guid+++p),d.url=i+p),d.ifModified&&(w.lastModified[i]&&E.setRequestHeader("If-Modified-Since",w.lastModified[i]),w.etag[i]&&E.setRequestHeader("If-None-Match",w.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||n.contentType)&&E.setRequestHeader("Content-Type",d.contentType),E.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Mt+"; q=0.01":""):d.accepts["*"]),d.headers)E.setRequestHeader(f,d.headers[f]);if(d.beforeSend&&(!1===d.beforeSend.call(h,E,d)||l))return E.abort();if(C="abort",m.add(d.complete),E.done(d.success),E.fail(d.error),r=Ft(Rt,d,n,E)){if(E.readyState=1,c&&g.trigger("ajaxSend",[E,d]),l)return E;d.async&&d.timeout>0&&(s=t.setTimeout(function(){E.abort("timeout")},d.timeout));try{l=!1,r.send(b,S)}catch(k){if(l)throw k;S(-1,k)}}else S(-1,"No Transport");function S(e,n,a,u){var f,p,y,b,T,C=n;l||(l=!0,s&&t.clearTimeout(s),r=void 0,o=u||"",E.readyState=e>0?4:0,f=e>=200&&e<300||304===e,a&&(b=function(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(d,E,a)),!f&&w.inArray("script",d.dataTypes)>-1&&(d.converters["text script"]=function(){}),b=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(k){return{state:"parsererror",error:a?k:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(d,b,E,f),f?(d.ifModified&&((T=E.getResponseHeader("Last-Modified"))&&(w.lastModified[i]=T),(T=E.getResponseHeader("etag"))&&(w.etag[i]=T)),204===e||"HEAD"===d.type?C="nocontent":304===e?C="notmodified":(C=b.state,p=b.data,f=!(y=b.error))):(y=C,!e&&C||(C="error",e<0&&(e=0))),E.status=e,E.statusText=(n||C)+"",f?v.resolveWith(h,[p,C,E]):v.rejectWith(h,[E,C,y]),E.statusCode(x),x=void 0,c&&g.trigger(f?"ajaxSuccess":"ajaxError",[E,d,f?p:y]),m.fireWith(h,[E,C]),c&&(g.trigger("ajaxComplete",[E,d]),--w.active||w.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:n,success:r},w.isPlainObject(e)&&e))}}),w.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),w._evalUrl=function(e,t,n){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){w.globalEval(e,t,n)}})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return g(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=g(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var $t={0:200,1223:204},_t=w.ajaxSettings.xhr();h.cors=!!_t&&"withCredentials"in _t,h.ajax=_t=!!_t,w.ajaxTransport(function(e){var n,r;if(h.cors||_t&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o($t[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(n)throw u}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=w("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),y.head.appendChild(t[0])},abort:function(){n&&n()}}});var zt,Ut=[],Xt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ut.pop()||w.expando+"_"+Tt.guid++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(e,n,r){var i,o,a,s=!1!==e.jsonp&&(Xt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Xt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Xt,"$1"+i):!1!==e.jsonp&&(e.url+=(Ct.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||w.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){a=arguments},r.always(function(){void 0===o?w(t).removeProp(i):t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,Ut.push(i)),a&&g(o)&&o(a[0]),a=o=void 0}),"script"}),h.createHTMLDocument=((zt=y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===zt.childNodes.length),w.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(h.createHTMLDocument?((r=(t=y.implementation.createHTMLDocument("")).createElement("base")).href=y.location.href,t.head.appendChild(r)):t=y),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=be([e],t,o),o&&o.length&&w(o).remove(),w.merge([],i.childNodes)));var r,i,o},w.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=gt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=w.css(e,"position"),c=w(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=w.css(e,"top"),u=w.css(e,"left"),("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),g(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):("number"==typeof f.top&&(f.top+="px"),"number"==typeof f.left&&(f.left+="px"),c.css(f))}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(r,"marginTop",!0),left:t.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||re})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return $(this,function(e,r,i){var o;if(v(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=_e(h.pixelPosition,function(e,n){if(n)return n=$e(e,t),Ie.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return $(this,function(t,n,i){var o;return v(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?w.css(t,n,s):w.style(t,n,i,s)},t,a?i:void 0,a)}})}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var Vt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e))return r=o.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(o.call(arguments)))}).guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=A,w.isFunction=g,w.isWindow=v,w.camelCase=X,w.type=b,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},w.trim=function(e){return null==e?"":(e+"").replace(Vt,"")},"function"==typeof e&&e.amd&&e("jquery",[],function(){return w});var Gt=t.jQuery,Yt=t.$;return w.noConflict=function(e){return t.$===w&&(t.$=Yt),e&&t.jQuery===w&&(t.jQuery=Gt),w},void 0===n&&(t.jQuery=t.$=w),w});
},{"process":"FeV4"}],"Oms7":[function(require,module,exports) {
"use strict";var e=t(require("@babel/runtime-corejs3/helpers/classCallCheck")),r=t(require("@babel/runtime-corejs3/helpers/createClass"));function t(e){return e&&e.__esModule?e:{default:e}}var u=require("jquery"),n=function(){function t(){(0,e.default)(this,t)}return(0,r.default)(t,[{key:"getElement",value:function(e){return u(e)}},{key:"appendToElement",value:function(e,r){var t=u(e),n=u(r);return t.append(n),t}},{key:"updateContent",value:function(e,r){var t=u(e);return t.html(r),t}},{key:"removeElement",value:function(e){u(e).remove()}}]),t}();module.exports.GameDom=n;
},{"@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@babel/runtime-corejs3/helpers/createClass":"bMeU","jquery":"lwLq"}],"tjzy":[function(require,module,exports) {
"use strict";var e=t(require("@babel/runtime-corejs3/helpers/classCallCheck")),r=t(require("@babel/runtime-corejs3/helpers/createClass"));function t(e){return e&&e.__esModule?e:{default:e}}var n=require("@reldens/utils"),l=n.Logger,o=function(){function t(){(0,e.default)(this,t)}return(0,r.default)(t,[{key:"get",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=!1,n=e.split("/");if(3===n.length){var o=(this[n[0]]||{})[n[1]]||{};!{}.hasOwnProperty.call(o,n[2])?r||l.error("Configuration level 3 not defined: "+e):t=o[n[2]]}if(4===n.length){var i=((this[n[0]]||{})[n[1]]||{})[n[2]]||{};!{}.hasOwnProperty.call(i,n[3])?r||l.error("Configuration level 4 not defined: "+e):t=i[n[3]]}return 3!==n.length&&4!==n.length&&l.error("Configuration wrong path length: "+n.length),t}}]),t}();module.exports.ConfigProcessor=new o;
},{"@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@babel/runtime-corejs3/helpers/createClass":"bMeU","@reldens/utils":"nQnG"}],"pTL4":[function(require,module,exports) {
"use strict";var e=i(require("@babel/runtime-corejs3/core-js/get-iterator")),t=i(require("@babel/runtime-corejs3/core-js-stable/object/keys")),r=i(require("@babel/runtime-corejs3/core-js-stable/object/assign")),n=i(require("@babel/runtime-corejs3/regenerator")),a=i(require("@babel/runtime-corejs3/helpers/classCallCheck")),s=i(require("@babel/runtime-corejs3/helpers/createClass"));function i(e){return e&&e.__esModule?e:{default:e}}var o=require("./game-client"),c=o.GameClient,u=require("./game-engine"),l=u.GameEngine,h=require("./room-events"),m=h.RoomEvents,f=require("../../features/client/manager"),d=f.FeaturesManager,g=require("./game-dom"),v=g.GameDom,p=require("../../config/processor"),w=p.ConfigProcessor,R=require("@reldens/utils"),j=R.Logger,y=R.EventsManager,b=require("../constants"),C=b.GameConst,x=function(){function i(){(0,a.default)(this,i),this.activeRoomEvents=!1,this.joinedRooms={},this.userData={},this.playerData=!1,this.gameEngine=!1,this.gameOver=!1,this.events=y,this.config=w,this.features=new d,this.isChangingScene=!1,this.gameDom=new v}return(0,s.default)(i,[{key:"setupClasses",value:function(e){y.emit("reldens.setupClasses",this,e),this.config.customClasses=e}},{key:"joinGame",value:function(e){var t,r,a=this,s=arguments;return n.default.async(function(i){for(;;)switch(i.prev=i.next){case 0:return t=s.length>1&&void 0!==s[1]&&s[1],i.next=3,n.default.awrap(y.emit("reldens.beforeJoinGame",{gameManager:this,formData:e,isNewUser:t}));case 3:return this.initializeClient(),t&&(this.userData.isNewUser=!0,this.userData.email=e.email),this.userData.username=e.username,this.userData.password=e.password,i.next=9,n.default.awrap(this.gameClient.joinOrCreate(C.ROOM_GAME,this.userData));case 9:return r=i.sent,i.next=12,n.default.awrap(y.emit("reldens.joinedGameRoom",r));case 12:return r.onMessage(function(e){return n.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.act!==C.START_GAME){t.next=4;break}return t.next=3,n.default.awrap(a.initEngineAndStartGame(e));case 3:r.leave();case 4:case"end":return t.stop()}})}),i.abrupt("return",r);case 14:case"end":return i.stop()}},null,this)}},{key:"initializeClient",value:function(){var e=this.getServerUrl();this.gameClient=new c(e)}},{key:"initEngineAndStartGame",value:function(e){var t;return n.default.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.default.awrap(y.emit("reldens.beforeInitEngineAndStartGame",e));case 2:if({}.hasOwnProperty.call(e,"gameConfig")){a.next=4;break}throw new Error("ERROR - Missing game configuration.");case 4:return this.playerData=e.player,(0,r.default)(this.config,e.gameConfig),this.gameEngine=new l(e.gameConfig),this.features.loadFeatures(e.features),this.userData.isNewUser=!1,a.next=11,n.default.awrap(this.joinFeaturesRooms());case 11:return a.next=13,n.default.awrap(this.gameClient.joinOrCreate(e.player.state.scene,this.userData));case 13:return(t=a.sent)||(alert("ERROR - There was an error while joining the room: "+e.player.state.scene),window.location.reload()),a.next=17,n.default.awrap(y.emit("reldens.joinedRoom",t,this));case 17:return a.next=19,n.default.awrap(y.emit("reldens.joinedRoom_"+e.player.state.scene,t,this));case 19:return this.activeRoomEvents=this.createRoomEventsInstance(e.player.state.scene),this.activeRoomEvents.activateRoom(t),a.abrupt("return",t);case 22:case"end":return a.stop()}},null,this)}},{key:"joinFeaturesRooms",value:function(){var r,a,s,i,o,c,u,l,h,m,f;return n.default.async(function(d){for(;;)switch(d.prev=d.next){case 0:r=0,a=(0,t.default)(this.features.featuresList);case 1:if(!(r<a.length)){d.next=39;break}if(s=a[r],i=this.features.featuresList[s],!{}.hasOwnProperty.call(i,"joinRooms")){d.next=36;break}o=!0,c=!1,u=void 0,d.prev=8,l=(0,e.default)(i.joinRooms);case 10:if(o=(h=l.next()).done){d.next=22;break}return m=h.value,d.next=14,n.default.awrap(this.gameClient.joinOrCreate(m,this.userData));case 14:(f=d.sent)||(alert("ERROR - There was an error while joining the room "+m),window.location.reload()),this.joinedRooms[m]=f,y.emit("reldens.joinedRoom",f,this),y.emit("reldens.joinedRoom_"+m,f,this);case 19:o=!0,d.next=10;break;case 22:d.next=28;break;case 24:d.prev=24,d.t0=d.catch(8),c=!0,u=d.t0;case 28:d.prev=28,d.prev=29,o||null==l.return||l.return();case 31:if(d.prev=31,!c){d.next=34;break}throw u;case 34:return d.finish(31);case 35:return d.finish(28);case 36:r++,d.next=1;break;case 39:case"end":return d.stop()}},null,this,[[8,24,28,36],[29,,31,35]])}},{key:"reconnectGameClient",value:function(e,t){var r=this,n=this.createRoomEventsInstance(e.player.state.scene);this.isChangingScene=!0,this.gameClient.joinOrCreate(n.roomName,this.userData).then(function(a){t.leave(),r.activeRoomEvents=n,r.room=a,y.emit("reldens.joinedRoom",a,r),y.emit("reldens.joinedRoom_"+e.player.state.scene,a,r),n.activateRoom(a,e.prev)}).catch(function(r){alert(r),j.error(["Reconnect Game Client:",r,"message:",e,"previousRoom:",t]),window.location.reload()})}},{key:"createRoomEventsInstance",value:function(e){return new m(e,this)}},{key:"getServerUrl",value:function(){if(this.clientUrl)return this.clientUrl;if({}.hasOwnProperty.call(this.config,"serverUrl"))this.clientUrl=this.config.serverUrl;else{var e=window.location.hostname,t=window.location.port?":"+window.location.port:"";this.clientUrl="ws://"+e+t}return this.clientUrl}},{key:"getActiveScene",value:function(){return this.activeRoomEvents.getActiveScene()}},{key:"getActiveScenePreloader",value:function(){var e=this.getActiveScene().key;return this.gameEngine.scene.getScene("ScenePreloader"+e)}},{key:"getCurrentPlayer",value:function(){return this.getActiveScene().player}}]),i}();module.exports.GameManager=x;
},{"@babel/runtime-corejs3/core-js/get-iterator":"dtXd","@babel/runtime-corejs3/core-js-stable/object/keys":"Jibu","@babel/runtime-corejs3/core-js-stable/object/assign":"t1mS","@babel/runtime-corejs3/regenerator":"BXeW","@babel/runtime-corejs3/helpers/classCallCheck":"ZEWA","@babel/runtime-corejs3/helpers/createClass":"bMeU","./game-client":"aOKw","./game-engine":"tl8K","./room-events":"h1Dt","../../features/client/manager":"E8Iz","./game-dom":"Oms7","../../config/processor":"tjzy","@reldens/utils":"nQnG","../constants":"gIeR"}]},{},["pTL4"], null)